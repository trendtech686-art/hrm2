{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-settings-page-header.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Settings2 } from 'lucide-react';\r\nimport { usePageHeader, type PageHeaderState, type PageHeaderDocLink } from '../../contexts/page-header-context';\r\nimport type { BreadcrumbItem } from '../../lib/breadcrumb-system';\r\n\r\nexport type SettingsPageHeaderOptions = Omit<PageHeaderState, 'title' | 'docLink'> & {\r\n  title: string;\r\n  icon?: React.ReactNode;\r\n  docLink?: string | PageHeaderDocLink;\r\n};\r\n\r\nconst defaultDocLabel = 'Xem hướng dẫn';\r\nconst baseBreadcrumb: BreadcrumbItem[] = [\r\n  { label: 'Trang chủ', href: '/', isCurrent: false },\r\n  { label: 'Cài đặt', href: '/settings', isCurrent: false },\r\n];\r\n\r\nconst normalizeLabel = (label?: string) => label?.trim().toLocaleLowerCase('vi');\r\nconst isHomeCrumb = (item: BreadcrumbItem) => item.href === '/' || normalizeLabel(item.label) === 'trang chủ';\r\nconst isSettingsCrumb = (item: BreadcrumbItem) => item.href === '/settings' || normalizeLabel(item.label) === 'cài đặt';\r\n\r\nexport function useSettingsPageHeader(options: SettingsPageHeaderOptions) {\r\n  const pathname = usePathname();\r\n  const { title, icon, docLink, breadcrumb, ...rest } = options;\r\n\r\n  const normalizedDocLink = React.useMemo<PageHeaderDocLink | undefined>(() => {\r\n    if (!docLink) return undefined;\r\n    if (typeof docLink === 'string') {\r\n      return { href: docLink, label: defaultDocLabel };\r\n    }\r\n    return {\r\n      href: docLink.href,\r\n      label: docLink.label ?? defaultDocLabel,\r\n    };\r\n  }, [docLink]);\r\n\r\n  const decoratedTitle = React.useMemo(() => (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      {(icon ?? <Settings2 className=\"h-5 w-5 text-muted-foreground\" aria-hidden=\"true\" />)}\r\n      <span>{title}</span>\r\n    </span>\r\n  ), [icon, title]);\r\n\r\n  const normalizedBreadcrumb = React.useMemo(() => {\r\n    const custom = (breadcrumb ?? []).map((item) => ({\r\n      ...item,\r\n      href: item.href || pathname,\r\n    }));\r\n\r\n    let merged: BreadcrumbItem[] = custom.length\r\n      ? [...custom]\r\n      : [{ label: title, href: pathname, isCurrent: true }];\r\n\r\n    if (!merged.some(isHomeCrumb)) {\r\n      merged = [{ ...baseBreadcrumb[0] }, ...merged];\r\n    }\r\n\r\n    if (!merged.some(isSettingsCrumb)) {\r\n      const homeIndex = merged.findIndex(isHomeCrumb);\r\n      const insertionIndex = homeIndex >= 0 ? homeIndex + 1 : 0;\r\n      merged = [\r\n        ...merged.slice(0, insertionIndex),\r\n        { ...baseBreadcrumb[1] },\r\n        ...merged.slice(insertionIndex),\r\n      ];\r\n    }\r\n\r\n    return merged.map((item, index) => ({\r\n      ...item,\r\n      isCurrent: index === merged.length - 1,\r\n    }));\r\n  }, [breadcrumb, pathname, title]);\r\n\r\n  return usePageHeader({\r\n    ...rest,\r\n    breadcrumb: normalizedBreadcrumb,\r\n    title: decoratedTitle,\r\n    docLink: normalizedDocLink,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;AASA,MAAM,kBAAkB;AACxB,MAAM,iBAAmC;IACvC;QAAE,OAAO;QAAa,MAAM;QAAK,WAAW;IAAM;IAClD;QAAE,OAAO;QAAW,MAAM;QAAa,WAAW;IAAM;CACzD;AAED,MAAM,iBAAiB,CAAC,QAAmB,OAAO,OAAO,kBAAkB;AAC3E,MAAM,cAAc,CAAC,OAAyB,KAAK,IAAI,KAAK,OAAO,eAAe,KAAK,KAAK,MAAM;AAClG,MAAM,kBAAkB,CAAC,OAAyB,KAAK,IAAI,KAAK,eAAe,eAAe,KAAK,KAAK,MAAM;AAEvG,SAAS,sBAAsB,OAAkC;;IACtE,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;IAEtD,MAAM,oBAAoB,wKAAa;4DAAgC;YACrE,IAAI,CAAC,SAAS,OAAO;YACrB,IAAI,OAAO,YAAY,UAAU;gBAC/B,OAAO;oBAAE,MAAM;oBAAS,OAAO;gBAAgB;YACjD;YACA,OAAO;gBACL,MAAM,QAAQ,IAAI;gBAClB,OAAO,QAAQ,KAAK,IAAI;YAC1B;QACF;2DAAG;QAAC;KAAQ;IAEZ,MAAM,iBAAiB,wKAAa;yDAAC,kBACnC,6LAAC;gBAAK,WAAU;;oBACZ,sBAAQ,6LAAC,gOAAS;wBAAC,WAAU;wBAAgC,eAAY;;;;;;kCAC3E,6LAAC;kCAAM;;;;;;;;;;;;wDAER;QAAC;QAAM;KAAM;IAEhB,MAAM,uBAAuB,wKAAa;+DAAC;YACzC,MAAM,SAAS,CAAC,cAAc,EAAE,EAAE,GAAG;8EAAC,CAAC,OAAS,CAAC;wBAC/C,GAAG,IAAI;wBACP,MAAM,KAAK,IAAI,IAAI;oBACrB,CAAC;;YAED,IAAI,SAA2B,OAAO,MAAM,GACxC;mBAAI;aAAO,GACX;gBAAC;oBAAE,OAAO;oBAAO,MAAM;oBAAU,WAAW;gBAAK;aAAE;YAEvD,IAAI,CAAC,OAAO,IAAI,CAAC,cAAc;gBAC7B,SAAS;oBAAC;wBAAE,GAAG,cAAc,CAAC,EAAE;oBAAC;uBAAM;iBAAO;YAChD;YAEA,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB;gBACjC,MAAM,YAAY,OAAO,SAAS,CAAC;gBACnC,MAAM,iBAAiB,aAAa,IAAI,YAAY,IAAI;gBACxD,SAAS;uBACJ,OAAO,KAAK,CAAC,GAAG;oBACnB;wBAAE,GAAG,cAAc,CAAC,EAAE;oBAAC;uBACpB,OAAO,KAAK,CAAC;iBACjB;YACH;YAEA,OAAO,OAAO,GAAG;uEAAC,CAAC,MAAM,QAAU,CAAC;wBAClC,GAAG,IAAI;wBACP,WAAW,UAAU,OAAO,MAAM,GAAG;oBACvC,CAAC;;QACH;8DAAG;QAAC;QAAY;QAAU;KAAM;IAEhC,OAAO,IAAA,0JAAa,EAAC;QACnB,GAAG,IAAI;QACP,YAAY;QACZ,OAAO;QACP,SAAS;IACX;AACF;GA1DgB;;QACG,oJAAW;QAmDrB,0JAAa"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-tab-action-registry.ts"],"sourcesContent":["import * as React from 'react';\r\n\r\nexport type RegisterTabActions = (actions?: React.ReactNode[]) => void;\r\n\r\nexport type TabActionRegistry = {\r\n  headerActions: React.ReactNode[];\r\n  registerActions: (tabValue: string) => RegisterTabActions;\r\n  setHeaderActions: React.Dispatch<React.SetStateAction<React.ReactNode[]>>;\r\n};\r\n\r\nexport function useTabActionRegistry(activeTab: string): TabActionRegistry {\r\n  const [headerActions, setHeaderActions] = React.useState<React.ReactNode[]>([]);\r\n\r\n  const registerActions = React.useCallback(\r\n    (tabValue: string) => (actions?: React.ReactNode[]) => {\r\n      if (tabValue === activeTab) {\r\n        setHeaderActions(actions ?? []);\r\n      }\r\n    },\r\n    [activeTab],\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setHeaderActions([]);\r\n  }, [activeTab]);\r\n\r\n  return {\r\n    headerActions,\r\n    registerActions,\r\n    setHeaderActions,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAUO,SAAS,qBAAqB,SAAiB;;IACpD,MAAM,CAAC,eAAe,iBAAiB,GAAG,yKAAc,CAAoB,EAAE;IAE9E,MAAM,kBAAkB,4KAAiB;6DACvC,CAAC;qEAAqB,CAAC;oBACrB,IAAI,aAAa,WAAW;wBAC1B,iBAAiB,WAAW,EAAE;oBAChC;gBACF;;4DACA;QAAC;KAAU;IAGb,0KAAe;0CAAC;YACd,iBAAiB,EAAE;QACrB;yCAAG;QAAC;KAAU;IAEd,OAAO;QACL;QACA;QACA;IACF;AACF;GArBgB"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium text-muted-foreground ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,2KAAkB;AAE/B,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,2KAAkB;QACjB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,uEACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,2KAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6ZACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/settings/SettingsVerticalTabs.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Tabs, TabsList, TabsTrigger } from \"../ui/tabs\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\ntype SettingsVerticalTabsItem = {\r\n  value: string;\r\n  label: React.ReactNode;\r\n  disabled?: boolean;\r\n  className?: string;\r\n};\r\n\r\ntype SettingsVerticalTabsProps = {\r\n  value: string;\r\n  onValueChange: (value: string) => void;\r\n  tabs: SettingsVerticalTabsItem[];\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  listClassName?: string;\r\n  contentWrapperClassName?: string;\r\n};\r\n\r\n/**\r\n * Shared layout for Settings pages that need sticky vertical tabs.\r\n * Uses shadcn/ui Tabs component with custom styling for vertical layout on desktop.\r\n */\r\nexport function SettingsVerticalTabs({\r\n  value,\r\n  onValueChange,\r\n  tabs,\r\n  children,\r\n  className,\r\n  listClassName,\r\n  contentWrapperClassName,\r\n}: SettingsVerticalTabsProps) {\r\n  return (\r\n    <Tabs \r\n      value={value} \r\n      onValueChange={onValueChange} \r\n      className={cn(\"flex flex-col md:flex-row md:gap-8\", className)}\r\n    >\r\n      {/* Mobile: horizontal scrollable tabs, Desktop: vertical sidebar */}\r\n      <TabsList\r\n        className={cn(\r\n          // Base styles\r\n          \"h-auto w-full justify-start rounded-lg bg-muted p-1\",\r\n          // Mobile: horizontal with scroll\r\n          \"flex flex-row gap-1 overflow-x-auto\",\r\n          // Desktop: vertical sidebar\r\n          \"md:flex-col md:w-[200px] md:shrink-0 md:bg-transparent md:p-0\",\r\n          \"md:sticky md:top-6 md:self-start\",\r\n          listClassName,\r\n        )}\r\n      >\r\n        {tabs.map((tab) => (\r\n          <TabsTrigger\r\n            key={tab.value}\r\n            value={tab.value}\r\n            disabled={tab.disabled}\r\n            className={cn(\r\n              // Mobile: compact horizontal tabs\r\n              \"flex-shrink-0 px-3 py-1.5 text-sm text-foreground\",\r\n              // Desktop: full-width vertical tabs\r\n              \"md:w-full md:justify-start md:px-4 md:py-2\",\r\n              \"md:data-[state=active]:bg-muted md:data-[state=active]:shadow-none\",\r\n              tab.className\r\n            )}\r\n          >\r\n            {tab.label}\r\n          </TabsTrigger>\r\n        ))}\r\n      </TabsList>\r\n      \r\n      {/* Content area */}\r\n      <div className={cn(\r\n        \"flex-1 min-w-0 mt-4 md:mt-0\",\r\n        contentWrapperClassName\r\n      )}>\r\n        {children}\r\n      </div>\r\n    </Tabs>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAuBO,SAAS,qBAAqB,EACnC,KAAK,EACL,aAAa,EACb,IAAI,EACJ,QAAQ,EACR,SAAS,EACT,aAAa,EACb,uBAAuB,EACG;IAC1B,qBACE,6LAAC,oIAAI;QACH,OAAO;QACP,eAAe;QACf,WAAW,IAAA,qHAAE,EAAC,sCAAsC;;0BAGpD,6LAAC,wIAAQ;gBACP,WAAW,IAAA,qHAAE,EACX,cAAc;gBACd,uDACA,iCAAiC;gBACjC,uCACA,4BAA4B;gBAC5B,iEACA,oCACA;0BAGD,KAAK,GAAG,CAAC,CAAC,oBACT,6LAAC,2IAAW;wBAEV,OAAO,IAAI,KAAK;wBAChB,UAAU,IAAI,QAAQ;wBACtB,WAAW,IAAA,qHAAE,EACX,kCAAkC;wBAClC,qDACA,oCAAoC;wBACpC,8CACA,sEACA,IAAI,SAAS;kCAGd,IAAI,KAAK;uBAZL,IAAI,KAAK;;;;;;;;;;0BAkBpB,6LAAC;gBAAI,WAAW,IAAA,qHAAE,EAChB,+BACA;0BAEC;;;;;;;;;;;;AAIT;KAxDgB"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border border-border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0EACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-types.ts"],"sourcesContent":["/**\r\n * Type-safe ID System\r\n * \r\n * Prevents mixing systemId with business ID at compile time\r\n */\r\n\r\n// Branded types for type safety\r\nexport type SystemId = string & { readonly __brand: 'SystemId' };\r\nexport type BusinessId = string & { readonly __brand: 'BusinessId' };\r\n\r\n/**\r\n * Create a SystemId from a string\r\n * Use this when you know for sure it's a systemId\r\n */\r\nexport function asSystemId(id: string): SystemId {\r\n  return id as SystemId;\r\n}\r\n\r\n/**\r\n * Create a BusinessId from a string\r\n * Use this when you know for sure it's a business ID\r\n */\r\nexport function asBusinessId(id: string): BusinessId {\r\n  return id as BusinessId;\r\n}\r\n\r\n/**\r\n * Check if a string is a valid systemId format\r\n */\r\nexport function isSystemIdFormat(id: string): boolean {\r\n  // SystemId: 8 digits + prefix (e.g., NV00000001, VOUCHER00000123)\r\n  return /^[A-Z]+\\d{8}$/.test(id);\r\n}\r\n\r\n/**\r\n * Check if a string is a valid business ID format\r\n */\r\nexport function isBusinessIdFormat(id: string): boolean {\r\n  // Business ID: shorter, variable length (e.g., NV001, PT000001)\r\n  return /^[A-Z]+\\d{3,6}$/.test(id);\r\n}\r\n\r\n/**\r\n * Safely convert unknown ID to proper type\r\n */\r\nexport function parseId(id: string): { type: 'system' | 'business'; value: SystemId | BusinessId } {\r\n  if (isSystemIdFormat(id)) {\r\n    return { type: 'system', value: asSystemId(id) };\r\n  }\r\n  if (isBusinessIdFormat(id)) {\r\n    return { type: 'business', value: asBusinessId(id) };\r\n  }\r\n  throw new Error(`Invalid ID format: ${id}`);\r\n}\r\n\r\n/**\r\n * ID Pair - Always keep systemId and businessId together\r\n */\r\nexport interface IDPair {\r\n  systemId: SystemId;\r\n  businessId: BusinessId;\r\n}\r\n\r\n/**\r\n * Entity with dual IDs\r\n */\r\nexport interface DualIDEntity {\r\n  systemId: SystemId;\r\n  id: BusinessId;\r\n}\r\n\r\n/**\r\n * Store methods with type-safe IDs\r\n */\r\nexport interface TypeSafeStore<T extends DualIDEntity> {\r\n  /** Find by systemId (for queries, relationships) */\r\n  findBySystemId(systemId: SystemId): T | null;\r\n  \r\n  /** Find by business ID (for user input, display) */\r\n  findByBusinessId(businessId: BusinessId): T | null;\r\n  \r\n  /** Update by systemId (always use systemId for updates) */\r\n  updateBySystemId(systemId: SystemId, updates: Partial<T>): void;\r\n  \r\n  /** Delete by systemId (always use systemId for deletes) */\r\n  deleteBySystemId(systemId: SystemId): void;\r\n}\r\n\r\n/**\r\n * Route params with type-safe IDs\r\n */\r\nexport interface RouteParams {\r\n  systemId?: SystemId;\r\n  id?: BusinessId;\r\n}\r\n\r\n/**\r\n * Link builder - always uses systemId\r\n */\r\nexport function buildEntityLink(path: string, entity: DualIDEntity): string {\r\n  return path.replace(':systemId', entity.systemId);\r\n}\r\n\r\n/**\r\n * Display ID - always uses business ID\r\n */\r\nexport function getDisplayId(entity: DualIDEntity): string {\r\n  return entity.id;\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid SystemId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureSystemId(id: string, context?: string): SystemId {\r\n  if (!isSystemIdFormat(id)) {\r\n    console.warn(`[ensureSystemId] Invalid SystemId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asSystemId(id);\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid BusinessId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureBusinessId(id: string, context?: string): BusinessId {\r\n  if (!isBusinessIdFormat(id)) {\r\n    console.warn(`[ensureBusinessId] Invalid BusinessId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asBusinessId(id);\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC,GAED,gCAAgC;;;;;;;;;;;;;;;;;;;;;AAQzB,SAAS,WAAW,EAAU;IACnC,OAAO;AACT;AAMO,SAAS,aAAa,EAAU;IACrC,OAAO;AACT;AAKO,SAAS,iBAAiB,EAAU;IACzC,kEAAkE;IAClE,OAAO,gBAAgB,IAAI,CAAC;AAC9B;AAKO,SAAS,mBAAmB,EAAU;IAC3C,gEAAgE;IAChE,OAAO,kBAAkB,IAAI,CAAC;AAChC;AAKO,SAAS,QAAQ,EAAU;IAChC,IAAI,iBAAiB,KAAK;QACxB,OAAO;YAAE,MAAM;YAAU,OAAO,WAAW;QAAI;IACjD;IACA,IAAI,mBAAmB,KAAK;QAC1B,OAAO;YAAE,MAAM;YAAY,OAAO,aAAa;QAAI;IACrD;IACA,MAAM,IAAI,MAAM,CAAC,mBAAmB,EAAE,IAAI;AAC5C;AA8CO,SAAS,gBAAgB,IAAY,EAAE,MAAoB;IAChE,OAAO,KAAK,OAAO,CAAC,aAAa,OAAO,QAAQ;AAClD;AAKO,SAAS,aAAa,MAAoB;IAC/C,OAAO,OAAO,EAAE;AAClB;AAMO,SAAS,eAAe,EAAU,EAAE,OAAgB;IACzD,IAAI,CAAC,iBAAiB,KAAK;QACzB,QAAQ,IAAI,CAAC,CAAC,2CAA2C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACpG;IACA,OAAO,WAAW;AACpB;AAMO,SAAS,iBAAiB,EAAU,EAAE,OAAgB;IAC3D,IAAI,CAAC,mBAAmB,KAAK;QAC3B,QAAQ,IAAI,CAAC,CAAC,+CAA+C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACxG;IACA,OAAO,aAAa;AACtB"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/api/pricing-api.ts"],"sourcesContent":["/**\r\n * Pricing Settings API Layer\r\n * Handles all pricing policy-related API calls\r\n */\r\n\r\nimport type { PricingPolicy } from '../types';\r\n\r\nexport interface PricingPolicyFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  type?: 'Nhập hàng' | 'Bán hàng';\r\n  isActive?: boolean;\r\n}\r\n\r\nexport interface PricingPolicyResponse {\r\n  data: PricingPolicy[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface PricingPolicyCreateInput {\r\n  systemId?: string;\r\n  id?: string;\r\n  name: string;\r\n  description?: string;\r\n  type: 'Nhập hàng' | 'Bán hàng';\r\n  isDefault?: boolean;\r\n  isActive?: boolean;\r\n}\r\n\r\nexport interface PricingPolicyUpdateInput extends Partial<PricingPolicyCreateInput> {}\r\n\r\nconst BASE_URL = '/api/settings/pricing-policies';\r\nconst LEGACY_URL = '/api/settings/data?type=pricing-policy';\r\n\r\n/**\r\n * Fetch pricing policies with filters\r\n */\r\nexport async function fetchPricingPolicies(\r\n  filters: PricingPolicyFilters = {}\r\n): Promise<PricingPolicyResponse> {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (filters.page) params.set('page', String(filters.page));\r\n  if (filters.limit) params.set('limit', String(filters.limit));\r\n  if (filters.type) params.set('type', filters.type);\r\n  if (filters.isActive !== undefined) params.set('isActive', String(filters.isActive));\r\n\r\n  // Try new endpoint first, fallback to legacy\r\n  let url = params.toString() ? `${BASE_URL}?${params}` : BASE_URL;\r\n  let response = await fetch(url);\r\n  \r\n  // Fallback to legacy endpoint\r\n  if (!response.ok && response.status === 404) {\r\n    url = `${LEGACY_URL}${params.toString() ? '&' + params : ''}`;\r\n    response = await fetch(url);\r\n  }\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch pricing policies');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Fetch single pricing policy by ID\r\n */\r\nexport async function fetchPricingPolicyById(\r\n  systemId: string\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Create new pricing policy\r\n */\r\nexport async function createPricingPolicy(\r\n  data: PricingPolicyCreateInput\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to create pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Update pricing policy\r\n */\r\nexport async function updatePricingPolicy(\r\n  systemId: string,\r\n  data: PricingPolicyUpdateInput\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to update pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Delete pricing policy\r\n */\r\nexport async function deletePricingPolicy(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to delete pricing policy');\r\n  }\r\n}\r\n\r\n/**\r\n * Set default pricing policy for type\r\n */\r\nexport async function setDefaultPricingPolicy(\r\n  systemId: string\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default`, {\r\n    method: 'POST',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to set default pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Get active pricing policies\r\n */\r\nexport async function fetchActivePricingPolicies(): Promise<PricingPolicy[]> {\r\n  const response = await fetchPricingPolicies({ isActive: true, limit: 100 });\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Get pricing policies by type\r\n */\r\nexport async function fetchPricingPoliciesByType(\r\n  type: 'Nhập hàng' | 'Bán hàng'\r\n): Promise<PricingPolicy[]> {\r\n  const response = await fetchPricingPolicies({ type, isActive: true, limit: 100 });\r\n  return response.data;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;;;AAiCD,MAAM,WAAW;AACjB,MAAM,aAAa;AAKZ,eAAe,qBACpB,UAAgC,CAAC,CAAC;IAElC,MAAM,SAAS,IAAI;IAEnB,IAAI,QAAQ,IAAI,EAAE,OAAO,GAAG,CAAC,QAAQ,OAAO,QAAQ,IAAI;IACxD,IAAI,QAAQ,KAAK,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO,QAAQ,KAAK;IAC3D,IAAI,QAAQ,IAAI,EAAE,OAAO,GAAG,CAAC,QAAQ,QAAQ,IAAI;IACjD,IAAI,QAAQ,QAAQ,KAAK,WAAW,OAAO,GAAG,CAAC,YAAY,OAAO,QAAQ,QAAQ;IAElF,6CAA6C;IAC7C,IAAI,MAAM,OAAO,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,QAAQ,GAAG;IACxD,IAAI,WAAW,MAAM,MAAM;IAE3B,8BAA8B;IAC9B,IAAI,CAAC,SAAS,EAAE,IAAI,SAAS,MAAM,KAAK,KAAK;QAC3C,MAAM,GAAG,aAAa,OAAO,QAAQ,KAAK,MAAM,SAAS,IAAI;QAC7D,WAAW,MAAM,MAAM;IACzB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,uBACpB,QAAgB;IAEhB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IAEtD,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBACpB,IAA8B;IAE9B,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBACpB,QAAgB,EAChB,IAA8B;IAE9B,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBAAoB,QAAgB;IACxD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;AACF;AAKO,eAAe,wBACpB,QAAgB;IAEhB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAClE,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM,qBAAqB;QAAE,UAAU;QAAM,OAAO;IAAI;IACzE,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,2BACpB,IAA8B;IAE9B,MAAM,WAAW,MAAM,qBAAqB;QAAE;QAAM,UAAU;QAAM,OAAO;IAAI;IAC/E,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/hooks/use-pricing.ts"],"sourcesContent":["/**\r\n * Pricing Settings React Query Hooks\r\n * Provides data fetching and mutations for pricing policies\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchPricingPolicies,\r\n  fetchPricingPolicyById,\r\n  createPricingPolicy,\r\n  updatePricingPolicy,\r\n  deletePricingPolicy,\r\n  setDefaultPricingPolicy,\r\n  fetchActivePricingPolicies,\r\n  fetchPricingPoliciesByType,\r\n  type PricingPolicyFilters,\r\n  type PricingPolicyCreateInput,\r\n  type PricingPolicyUpdateInput,\r\n} from '../api/pricing-api';\r\n\r\n// Query keys factory\r\nexport const pricingPolicyKeys = {\r\n  all: ['pricing-policies'] as const,\r\n  lists: () => [...pricingPolicyKeys.all, 'list'] as const,\r\n  list: (filters: PricingPolicyFilters) => [...pricingPolicyKeys.lists(), filters] as const,\r\n  details: () => [...pricingPolicyKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...pricingPolicyKeys.details(), id] as const,\r\n  active: () => [...pricingPolicyKeys.all, 'active'] as const,\r\n  byType: (type: string) => [...pricingPolicyKeys.all, 'type', type] as const,\r\n};\r\n\r\n/**\r\n * Hook to fetch pricing policies with filters\r\n */\r\nexport function usePricingPolicies(filters: PricingPolicyFilters = {}) {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.list(filters),\r\n    queryFn: () => fetchPricingPolicies(filters),\r\n    staleTime: 1000 * 60 * 10, // 10 minutes - rarely changes\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch active pricing policies\r\n */\r\nexport function useActivePricingPolicies() {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.active(),\r\n    queryFn: fetchActivePricingPolicies,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch pricing policies by type\r\n */\r\nexport function usePricingPoliciesByType(type: 'Nhập hàng' | 'Bán hàng') {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.byType(type),\r\n    queryFn: () => fetchPricingPoliciesByType(type),\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch single pricing policy\r\n */\r\nexport function usePricingPolicyById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.detail(systemId!),\r\n    queryFn: () => fetchPricingPolicyById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * Hook providing pricing policy mutations\r\n */\r\nexport function usePricingPolicyMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const invalidatePolicies = () => {\r\n    queryClient.invalidateQueries({ queryKey: pricingPolicyKeys.all });\r\n  };\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: PricingPolicyCreateInput) => createPricingPolicy(data),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: PricingPolicyUpdateInput }) =>\r\n      updatePricingPolicy(systemId, data),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deletePricingPolicy(systemId),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefault = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultPricingPolicy(systemId),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create,\r\n    update,\r\n    remove,\r\n    setDefault,\r\n    isLoading:\r\n      create.isPending || update.isPending || remove.isPending || setDefault.isPending,\r\n  };\r\n}\r\n\r\n/**\r\n * Hook to get sale pricing policies\r\n */\r\nexport function useSalePricingPolicies() {\r\n  return usePricingPoliciesByType('Bán hàng');\r\n}\r\n\r\n/**\r\n * Hook to get purchase pricing policies\r\n */\r\nexport function usePurchasePricingPolicies() {\r\n  return usePricingPoliciesByType('Nhập hàng');\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 842, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/validation.ts"],"sourcesContent":["import { z } from 'zod';\r\n\r\nexport const pricingPolicySchema = z.object({\r\n  id: z.string()\r\n    .min(1, 'Mã không được để trống')\r\n    .max(20, 'Mã không được quá 20 ký tự')\r\n    .regex(/^[A-Z0-9]+$/, 'Mã chỉ được chứa chữ in hoa và số'),\r\n  name: z.string()\r\n    .min(1, 'Tên không được để trống')\r\n    .max(100, 'Tên không được quá 100 ký tự'),\r\n  description: z.string()\r\n    .max(500, 'Mô tả không được quá 500 ký tự')\r\n    .optional(),\r\n  type: z.enum(['Bán hàng', 'Nhập hàng'], {\r\n    message: 'Vui lòng chọn loại giá',\r\n  }),\r\n  isActive: z.boolean(),\r\n  isDefault: z.boolean(),\r\n});\r\n\r\nexport type PricingPolicyFormData = z.infer<typeof pricingPolicySchema>;\r\n\r\nexport const validateUniqueId = (id: string, existingIds: string[], currentId?: string) => {\r\n  const upperId = id.toUpperCase();\r\n  if (currentId && upperId === currentId.toUpperCase()) {\r\n    return true;\r\n  }\r\n  return !existingIds.some(existingId => existingId.toUpperCase() === upperId);\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,sBAAsB,qLAAC,CAAC,MAAM,CAAC;IAC1C,IAAI,qLAAC,CAAC,MAAM,GACT,GAAG,CAAC,GAAG,0BACP,GAAG,CAAC,IAAI,8BACR,KAAK,CAAC,eAAe;IACxB,MAAM,qLAAC,CAAC,MAAM,GACX,GAAG,CAAC,GAAG,2BACP,GAAG,CAAC,KAAK;IACZ,aAAa,qLAAC,CAAC,MAAM,GAClB,GAAG,CAAC,KAAK,kCACT,QAAQ;IACX,MAAM,qLAAC,CAAC,IAAI,CAAC;QAAC;QAAY;KAAY,EAAE;QACtC,SAAS;IACX;IACA,UAAU,qLAAC,CAAC,OAAO;IACnB,WAAW,qLAAC,CAAC,OAAO;AACtB;AAIO,MAAM,mBAAmB,CAAC,IAAY,aAAuB;IAClE,MAAM,UAAU,GAAG,WAAW;IAC9B,IAAI,aAAa,YAAY,UAAU,WAAW,IAAI;QACpD,OAAO;IACT;IACA,OAAO,CAAC,YAAY,IAAI,CAAC,CAAA,aAAc,WAAW,WAAW,OAAO;AACtE"}},
    {"offset": {"line": 877, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 914, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Label } from \"./label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  if (!itemContext) {\r\n    throw new Error(\"useFormField should be used within <FormItem>\")\r\n  }\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ children, ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  const childElements = React.Children\r\n    .toArray(children)\r\n    .filter((child): child is React.ReactElement => React.isValidElement(child))\r\n\r\n  if (childElements.length === 0) {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.warn('FormControl cần ít nhất một phần tử con hợp lệ')\r\n    }\r\n    return null\r\n  }\r\n\r\n  if (childElements.length > 1 && process.env.NODE_ENV === 'development') {\r\n    console.warn('FormControl chỉ hỗ trợ một phần tử con. Đang dùng phần tử đầu tiên.')\r\n  }\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    >\r\n      {childElements[0]}\r\n    </Slot>\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AA0HkC;;AAxHlC;AAEA;AACA;AASA;AACA;;;AAfA;;;;;;AAiBA,MAAM,OAAO,iLAAY;AASzB,MAAM,iCAAmB,8KAAmB,CAA+B;AAE3E,MAAM,YAAY,CAGhB,EACA,GAAG,OACkC;IACrC,qBACE,6LAAC,iBAAiB,QAAQ;QAAC,OAAO;YAAE,MAAM,MAAM,IAAI;QAAC;kBACnD,cAAA,6LAAC,+KAAU;YAAE,GAAG,KAAK;;;;;;;;;;;AAG3B;KAXM;AAaN,MAAM,eAAe;;IACnB,MAAM,eAAe,2KAAgB,CAAC;IACtC,MAAM,cAAc,2KAAgB,CAAC;IACrC,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,GAAG,IAAA,mLAAc;IAEnD,IAAI,CAAC,cAAc;QACjB,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,aAAa;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,aAAa,cAAc,aAAa,IAAI,EAAE;IAEpD,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,OAAO;QACL;QACA,MAAM,aAAa,IAAI;QACvB,YAAY,GAAG,GAAG,UAAU,CAAC;QAC7B,mBAAmB,GAAG,GAAG,sBAAsB,CAAC;QAChD,eAAe,GAAG,GAAG,kBAAkB,CAAC;QACxC,GAAG,UAAU;IACf;AACF;GAzBM;;QAGiC,mLAAc;;;AA4BrD,MAAM,gCAAkB,8KAAmB,CAA8B;AAEzE,MAAM,yBAAW,IAAA,2KAAgB,WAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;;IAC1B,MAAM,KAAK,sKAAW;IAEtB,qBACE,6LAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;QAAG;kBACpC,cAAA,6LAAC;YAAI,KAAK;YAAK,WAAW,IAAA,qHAAE,EAAC,aAAa;YAAa,GAAG,KAAK;;;;;;;;;;;AAGrE;;AACA,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,IAAA,2KAAgB,WAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;;IAC1B,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG;IAE9B,qBACE,6LAAC,sIAAK;QACJ,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,SAAS,oBAAoB;QAC3C,SAAS;QACR,GAAG,KAAK;;;;;;AAGf;;QAVgC;;;;QAAA;;;;AAWhC,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,IAAA,2KAAgB,WAGlC,CAAC,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IACzB,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,iBAAiB,EAAE,aAAa,EAAE,GAAG;IAEhE,MAAM,gBAAgB,yKAAc,CACjC,OAAO,CAAC,UACR,MAAM,CAAC,CAAC,sBAAuC,+KAAoB,CAAC;IAEvE,IAAI,cAAc,MAAM,KAAK,GAAG;QAC9B,wCAA4C;YAC1C,QAAQ,IAAI,CAAC;QACf;QACA,OAAO;IACT;IAEA,IAAI,cAAc,MAAM,GAAG,KAAK,oDAAyB,eAAe;QACtE,QAAQ,IAAI,CAAC;IACf;IAEA,qBACE,6LAAC,2KAAI;QACH,KAAK;QACL,IAAI;QACJ,oBACE,CAAC,QACG,GAAG,mBAAmB,GACtB,GAAG,kBAAkB,CAAC,EAAE,eAAe;QAE7C,gBAAc,CAAC,CAAC;QACf,GAAG,KAAK;kBAER,aAAa,CAAC,EAAE;;;;;;AAGvB;;QAhCkE;;;;QAAA;;;;AAiClE,YAAY,WAAW,GAAG;AAE1B,MAAM,gCAAkB,IAAA,2KAAgB,WAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;;IAC1B,MAAM,EAAE,iBAAiB,EAAE,GAAG;IAE9B,qBACE,6LAAC;QACC,KAAK;QACL,IAAI;QACJ,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;;QAVgC;;;;QAAA;;;;AAWhC,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,IAAA,2KAAgB,WAGlC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IACpC,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG;IACjC,MAAM,OAAO,QAAQ,OAAO,OAAO,WAAW,MAAM;IAEpD,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,qBACE,6LAAC;QACC,KAAK;QACL,IAAI;QACJ,WAAW,IAAA,qHAAE,EAAC,wCAAwC;QACrD,GAAG,KAAK;kBAER;;;;;;AAGP;;QAjBmC;;;;QAAA;;;;AAkBnC,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 1153, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1187, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/radio-group.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\n// --- Context ---\r\ntype RadioGroupContextType = {\r\n  value: string | number | undefined;\r\n  onValueChange: (value: string | number) => void;\r\n  name?: string | undefined;\r\n};\r\n\r\nconst RadioGroupContext = React.createContext<RadioGroupContextType | undefined>(undefined);\r\n\r\nconst useRadioGroup = () => {\r\n  const context = React.useContext(RadioGroupContext);\r\n  if (!context) {\r\n    throw new Error(\"useRadioGroup must be used within a RadioGroup\");\r\n  }\r\n  return context;\r\n};\r\n\r\n// --- RadioGroup ---\r\nconst RadioGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & {\r\n    value?: string | number | undefined;\r\n    defaultValue?: string | number | undefined;\r\n    onValueChange?: ((value: string | number) => void) | undefined;\r\n    name?: string | undefined;\r\n  }\r\n>(({ className, children, value, defaultValue, onValueChange, name, ...props }, ref) => {\r\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\r\n  const isControlled = value !== undefined;\r\n  const currentValue = isControlled ? value : internalValue;\r\n\r\n  const handleValueChange = (newValue: string | number) => {\r\n    if (!isControlled) {\r\n      setInternalValue(newValue);\r\n    }\r\n    if (onValueChange) {\r\n      onValueChange(newValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <RadioGroupContext.Provider value={{ value: currentValue, onValueChange: handleValueChange, name }}>\r\n      <div ref={ref} role=\"radiogroup\" className={cn(\"grid gap-2\", className)} {...props}>\r\n        {children}\r\n      </div>\r\n    </RadioGroupContext.Provider>\r\n  );\r\n});\r\nRadioGroup.displayName = \"RadioGroup\";\r\n\r\n// --- RadioGroupItem ---\r\nconst RadioGroupItem = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ButtonHTMLAttributes<HTMLButtonElement> & { value: string | number }\r\n>(({ className, value, children, ...props }, ref) => {\r\n  const { value: selectedValue, onValueChange, name } = useRadioGroup();\r\n  const isChecked = selectedValue === value;\r\n  const id = React.useId();\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      id={id}\r\n      type=\"button\"\r\n      role=\"radio\"\r\n      aria-checked={isChecked}\r\n      data-state={isChecked ? \"checked\" : \"unchecked\"}\r\n      onClick={() => onValueChange(value)}\r\n      name={name}\r\n      value={value}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {isChecked && (\r\n        <div className=\"flex items-center justify-center\">\r\n          <div className=\"h-2.5 w-2.5 rounded-full bg-current text-current\" />\r\n        </div>\r\n      )}\r\n    </button>\r\n  );\r\n});\r\nRadioGroupItem.displayName = \"RadioGroupItem\";\r\n\r\n\r\nexport { RadioGroup, RadioGroupItem };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;AASA,MAAM,kCAAoB,8KAAmB,CAAoC;AAEjF,MAAM,gBAAgB;;IACpB,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANM;AAQN,qBAAqB;AACrB,MAAM,2BAAa,IAAA,2KAAgB,UAQjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;;IAC9E,MAAM,CAAC,eAAe,iBAAiB,GAAG,yKAAc,CAAC;IACzD,MAAM,eAAe,UAAU;IAC/B,MAAM,eAAe,eAAe,QAAQ;IAE5C,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,cAAc;YACjB,iBAAiB;QACnB;QACA,IAAI,eAAe;YACjB,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE,OAAO;YAAc,eAAe;YAAmB;QAAK;kBAC/F,cAAA,6LAAC;YAAI,KAAK;YAAK,MAAK;YAAa,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAa,GAAG,KAAK;sBAC/E;;;;;;;;;;;AAIT;;AACA,WAAW,WAAW,GAAG;AAEzB,yBAAyB;AACzB,MAAM,+BAAiB,IAAA,2KAAgB,WAGrC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IAC3C,MAAM,EAAE,OAAO,aAAa,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG;IACtD,MAAM,YAAY,kBAAkB;IACpC,MAAM,KAAK,sKAAW;IAEtB,qBACE,6LAAC;QACC,KAAK;QACL,IAAI;QACJ,MAAK;QACL,MAAK;QACL,gBAAc;QACd,cAAY,YAAY,YAAY;QACpC,SAAS,IAAM,cAAc;QAC7B,MAAM;QACN,OAAO;QACP,WAAW,IAAA,qHAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAER,2BACC,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKzB;;QA5BwD;;;;QAAA;;;;AA6BxD,eAAe,WAAW,GAAG"}},
    {"offset": {"line": 1310, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype SwitchProps = Omit<\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>,\r\n  \"checked\" | \"defaultChecked\"\r\n> & {\r\n  checked?: boolean | undefined\r\n  defaultChecked?: boolean | undefined\r\n}\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  SwitchProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAeA,MAAM,uBAAS,2KAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,6LAAC,6KAAqB;QACpB,WAAW,IAAA,qHAAE,EACX,sXACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;QAC3D,KAAK;kBAEL,cAAA,6LAAC,8KAAsB;YACrB,WAAW,IAAA,qHAAE,EACX;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,6KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 1358, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/form.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport type { PricingPolicy } from \"./types\";\r\nimport { pricingPolicySchema, validateUniqueId } from \"./validation\";\r\nimport { usePricingPolicies } from \"./hooks/use-pricing\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"../../../components/ui/form\";\r\nimport { Input } from \"../../../components/ui/input\";\r\nimport { Textarea } from \"../../../components/ui/textarea\";\r\nimport { RadioGroup, RadioGroupItem } from \"../../../components/ui/radio-group\";\r\nimport { Switch } from \"../../../components/ui/switch\";\r\nimport type * as z from \"zod\";\r\n\r\nexport type PricingPolicyFormValues = z.infer<typeof pricingPolicySchema>;\r\n\r\ntype Props = {\r\n  initialData?: PricingPolicy | null;\r\n  onSubmit: (values: PricingPolicyFormValues) => void;\r\n};\r\n\r\nexport function PricingPolicyForm({ initialData, onSubmit }: Props) {\r\n  const { data: pricingData } = usePricingPolicies();\r\n  const data = pricingData?.data || [];\r\n  \r\n  const form = useForm<PricingPolicyFormValues>({\r\n    resolver: zodResolver(pricingPolicySchema),\r\n    defaultValues: initialData || {\r\n      id: '',\r\n      name: '',\r\n      type: 'Bán hàng' as const,\r\n      description: '',\r\n      isActive: true,\r\n      isDefault: false,\r\n    },\r\n  });\r\n\r\n  const { handleSubmit, control, setError } = form;\r\n\r\n  const onFormSubmit = (values: PricingPolicyFormValues) => {\r\n    // Validate unique ID\r\n    const existingIds = data.map(p => p.id);\r\n    const currentId = initialData?.id;\r\n    \r\n    if (!validateUniqueId(values.id, existingIds, currentId)) {\r\n      setError('id', {\r\n        type: 'manual',\r\n        message: 'Mã này đã tồn tại trong hệ thống',\r\n      });\r\n      return;\r\n    }\r\n\r\n    onSubmit(values);\r\n  };\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form id=\"pricing-policy-form\" onSubmit={handleSubmit(onFormSubmit)} className=\"space-y-6 pt-4\">\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n            <FormField control={control} name=\"name\" render={({ field }) => (\r\n                <FormItem>\r\n                    <FormLabel>Tên chính sách giá <span className=\"text-destructive\">*</span></FormLabel>\r\n                    <FormControl><Input {...field} value={field.value ?? ''} placeholder=\"Nhập tên chính sách giá\" className=\"h-9\" /></FormControl>\r\n                    <FormMessage />\r\n                </FormItem>\r\n            )} />\r\n            <FormField control={control} name=\"id\" render={({ field }) => (\r\n                <FormItem>\r\n                    <FormLabel>Mã chính sách giá <span className=\"text-destructive\">*</span></FormLabel>\r\n                    <FormControl>\r\n                      <Input \r\n                        {...field} \r\n                        value={field.value ?? ''}\r\n                        placeholder=\"VD: GIA001\" \r\n                        className=\"uppercase h-9\"\r\n                        onChange={(e) => field.onChange(e.target.value.toUpperCase())}\r\n                      />\r\n                    </FormControl>\r\n                    <FormDescription>Chỉ chứa chữ in hoa và số, tối đa 20 ký tự</FormDescription>\r\n                    <FormMessage />\r\n                </FormItem>\r\n            )} />\r\n        </div>\r\n        \r\n        <FormField control={control} name=\"description\" render={({ field }) => (\r\n            <FormItem>\r\n                <FormLabel>Mô tả</FormLabel>\r\n                <FormControl>\r\n                    <Textarea \r\n                        {...field} \r\n                        value={field.value ?? ''}\r\n                        placeholder=\"Nhập mô tả cho chính sách giá này\"\r\n                        rows={3}\r\n                    />\r\n                </FormControl>\r\n                <FormMessage />\r\n            </FormItem>\r\n        )} />\r\n        \r\n        <FormField control={control} name=\"type\" render={({ field }) => (\r\n            <FormItem className=\"space-y-3\">\r\n                <FormLabel>Áp dụng cho <span className=\"text-destructive\">*</span></FormLabel>\r\n                <FormControl>\r\n                    <RadioGroup onValueChange={field.onChange} value={field.value} className=\"flex space-x-4\">\r\n                        <FormItem className=\"flex items-center space-x-2 space-y-0\">\r\n                            <FormControl><RadioGroupItem value=\"Nhập hàng\" /></FormControl>\r\n                            <FormLabel className=\"font-normal\">Nhập hàng</FormLabel>\r\n                        </FormItem>\r\n                        <FormItem className=\"flex items-center space-x-2 space-y-0\">\r\n                            <FormControl><RadioGroupItem value=\"Bán hàng\" /></FormControl>\r\n                            <FormLabel className=\"font-normal\">Bán hàng</FormLabel>\r\n                        </FormItem>\r\n                    </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n            </FormItem>\r\n        )} />\r\n\r\n        <FormField control={control} name=\"isDefault\" render={({ field }) => (\r\n          <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-4\">\r\n            <div className=\"space-y-0.5\">\r\n              <FormLabel className=\"text-base\">Đặt làm mặc định</FormLabel>\r\n              <FormDescription>\r\n                Nếu bật, chính sách này sẽ được áp dụng làm mặc định cho loại giá tương ứng\r\n              </FormDescription>\r\n            </div>\r\n            <FormControl>\r\n              <Switch checked={field.value} onCheckedChange={field.onChange} />\r\n            </FormControl>\r\n          </FormItem>\r\n        )} />\r\n        \r\n        <FormField control={control} name=\"isActive\" render={({ field }) => (\r\n            <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-4\">\r\n                <div className=\"space-y-0.5\">\r\n                    <FormLabel className=\"text-base\">Trạng thái hoạt động</FormLabel>\r\n                    <FormDescription>\r\n                        Bật để kích hoạt chính sách giá này\r\n                    </FormDescription>\r\n                </div>\r\n                <FormControl>\r\n                    <Switch\r\n                        checked={field.value}\r\n                        onCheckedChange={field.onChange}\r\n                    />\r\n                </FormControl>\r\n            </FormItem>\r\n        )} />\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1842, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b [&_tr]:border-border\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"group border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-9 px-4 text-left align-middle font-medium text-foreground [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center whitespace-nowrap\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-4 py-1 align-middle whitespace-nowrap [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center\", \r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,wCAAwC;QAAa,GAAG,KAAK;;;;;;;AAE9F,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,yEACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,2KAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,mGACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kLACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6IACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,2KAAgB,QAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 1979, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/pricing-table.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport type { SystemId } from '@/lib/id-types';\r\nimport { MoreHorizontal } from 'lucide-react';\r\nimport { Button } from '../../../components/ui/button';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '../../../components/ui/dropdown-menu';\r\nimport { Badge } from '../../../components/ui/badge';\r\nimport { Switch } from '../../../components/ui/switch';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '../../../components/ui/table';\r\nimport type { PricingPolicy } from './types';\r\nimport { toast } from 'sonner';\r\n\r\ninterface PricingTableProps {\r\n  data: PricingPolicy[];\r\n  allData: PricingPolicy[]; // All policies for finding fallback\r\n  onEdit: (policy: PricingPolicy) => void;\r\n  onDelete: (systemId: SystemId) => void;\r\n  onSetDefault: (systemId: SystemId) => void;\r\n  onToggleActive?: (policy: PricingPolicy, isActive: boolean) => void;\r\n}\r\n\r\nexport function PricingTable({\r\n  data,\r\n  allData,\r\n  onEdit,\r\n  onDelete,\r\n  onSetDefault,\r\n  onToggleActive,\r\n}: PricingTableProps) {\r\n  \r\n  const handleToggleDefault = React.useCallback((policy: PricingPolicy, checked: boolean) => {\r\n    if (checked) {\r\n      // Toggle ON: set this as default\r\n      onSetDefault(policy.systemId);\r\n    } else {\r\n      // Toggle OFF: find another policy of same type to set as default\r\n      const samePolicies = allData.filter(p => p.type === policy.type && p.systemId !== policy.systemId);\r\n      if (samePolicies.length > 0) {\r\n        // Set first available as default\r\n        onSetDefault(samePolicies[0].systemId);\r\n      } else {\r\n        // No other policy, cannot turn off\r\n        toast.error('Phải có ít nhất một chính sách giá mặc định');\r\n      }\r\n    }\r\n  }, [allData, onSetDefault]);\r\n\r\n  return (\r\n    <div className=\"rounded-md border\">\r\n      <Table>\r\n        <TableHeader>\r\n          <TableRow>\r\n            <TableHead>Mã</TableHead>\r\n            <TableHead>Tên</TableHead>\r\n            <TableHead>Mô tả</TableHead>\r\n            <TableHead>Loại giá</TableHead>\r\n            <TableHead>Mặc định</TableHead>\r\n            <TableHead>Trạng thái</TableHead>\r\n            <TableHead className=\"text-right\">Thao tác</TableHead>\r\n          </TableRow>\r\n        </TableHeader>\r\n        <TableBody>\r\n          {data.length === 0 ? (\r\n            <TableRow>\r\n              <TableCell colSpan={7} className=\"h-24 text-center\">\r\n                Chưa có dữ liệu\r\n              </TableCell>\r\n            </TableRow>\r\n          ) : (\r\n            data.map((policy) => (\r\n              <TableRow key={policy.systemId}>\r\n                <TableCell className=\"font-medium\">{policy.id}</TableCell>\r\n                <TableCell className=\"font-medium\">{policy.name}</TableCell>\r\n                <TableCell className=\"text-sm text-muted-foreground\">\r\n                  {policy.description || '—'}\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Badge \r\n                    variant={policy.type === 'Bán hàng' ? 'default' : 'secondary'}\r\n                    className={policy.type === 'Bán hàng' ? 'bg-green-100 text-green-700 hover:bg-green-100' : 'bg-blue-100 text-blue-700 hover:bg-blue-100'}\r\n                  >\r\n                    {policy.type}\r\n                  </Badge>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Switch \r\n                    checked={policy.isDefault} \r\n                    onCheckedChange={(checked) => handleToggleDefault(policy, checked)}\r\n                  />\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Switch \r\n                    checked={policy.isActive} \r\n                    onCheckedChange={(checked) => onToggleActive?.(policy, checked)}\r\n                  />\r\n                </TableCell>\r\n                <TableCell className=\"text-right\">\r\n                  <DropdownMenu>\r\n                    <DropdownMenuTrigger asChild>\r\n                      <Button variant=\"ghost\" className=\"h-9 w-9 p-0\">\r\n                        <span className=\"sr-only\">Mở menu</span>\r\n                        <MoreHorizontal className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </DropdownMenuTrigger>\r\n                    <DropdownMenuContent align=\"end\">\r\n                      <DropdownMenuLabel>Thao tác</DropdownMenuLabel>\r\n                      <DropdownMenuSeparator />\r\n                      <DropdownMenuItem onClick={() => onEdit(policy)}>\r\n                        Chỉnh sửa\r\n                      </DropdownMenuItem>\r\n                      <DropdownMenuItem\r\n                        onClick={() => onDelete(policy.systemId)}\r\n                        className=\"text-destructive\"\r\n                      >\r\n                        Xóa\r\n                      </DropdownMenuItem>\r\n                    </DropdownMenuContent>\r\n                  </DropdownMenu>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))\r\n          )}\r\n        </TableBody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2298, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\n// Use the original Dialog component\r\nconst Dialog = DialogPrimitive.Root\r\n\r\n// Create a Context to pass ID through the Dialog component tree\r\nconst DialogContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst DialogProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <DialogContext.Provider value={id}>{children}</DialogContext.Provider>;\r\n};\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> & { \r\n    id?: string;\r\n    open?: boolean;\r\n  }\r\n>(({ className, children, id: propId, open, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(DialogContext);\r\n  const id = propId || contextId || `dialog-${React.useId()}`;\r\n  \r\n  // Register with our modal context using the open prop\r\n  const { zIndex } = useModal(id, !!open, 'dialog');\r\n  \r\n  return (\r\n    <DialogPortal>\r\n      {/* Sử dụng overlay chỉ dành cho Dialog */}\r\n      <DialogOverlay style={{ zIndex: zIndex - 1 }} />\r\n      <DialogPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"dialog-content fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg sm:rounded-lg\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <DialogProvider id={id}>\r\n          {children}\r\n          <DialogPrimitive.Close\r\n            aria-label=\"Đóng\"\r\n            className=\"absolute right-4 top-4 flex h-9 w-9 items-center justify-center rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">Đóng</span>\r\n          </DialogPrimitive.Close>\r\n        </DialogProvider>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n})\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n  DialogProvider,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;;;;;;;;AAEA,oCAAoC;AACpC,MAAM,SAAS,6KAAoB;AAEnC,gEAAgE;AAChE,MAAM,8BAAgB,8KAAmB,CAAS;AAElD,wCAAwC;AACxC,MAAM,iBAAiB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IACjF,qBAAO,6LAAC,cAAc,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC7C;KAFM;AAIN,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;MAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,GAAA,2KAAgB,UAMpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;;IACtD,gDAAgD;IAChD,MAAM,YAAY,2KAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,OAAO,EAAE,sKAAW,IAAI;IAE3D,sDAAsD;IACtD,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAQ,EAAC,IAAI,CAAC,CAAC,MAAM;IAExC,qBACE,6LAAC;;0BAEC,6LAAC;gBAAc,OAAO;oBAAE,QAAQ,SAAS;gBAAE;;;;;;0BAC3C,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,kLACA;gBAEF,OAAO;oBAAE;gBAAO;gBACf,GAAG,KAAK;0BAET,cAAA,6LAAC;oBAAe,IAAI;;wBACjB;sCACD,6LAAC,8KAAqB;4BACpB,cAAW;4BACX,WAAU;;8CAEV,6LAAC,oMAAC;oCAAC,WAAU;;;;;;8CACb,6LAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;;QA5BqB,4IAAQ;;;;QAAR,4IAAQ;;;;AA6B7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 2508, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0 sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,qHAAE,EACX,wIACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,yQACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,IAAA,gJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,IAAA,gJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 2668, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/settings/SettingsActionButton.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Button, type ButtonProps } from '../ui/button';\r\nimport { cn } from '../../lib/utils';\r\n\r\n/**\r\n * SettingsActionButton chuẩn hóa các nút hành động của module Cài đặt\r\n * để luôn tuân thủ chiều cao h-9 và padding đồng nhất.\r\n */\r\nexport const SettingsActionButton = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, size, children, ...props }, ref) => {\r\n    return (\r\n      <Button\r\n        ref={ref}\r\n        size={size ?? 'sm'}\r\n        className={cn('h-9 px-4 font-medium gap-2', className)}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </Button>\r\n    );\r\n  }\r\n);\r\n\r\nSettingsActionButton.displayName = 'SettingsActionButton';\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAMO,MAAM,qCAAuB,2KAAgB,MAClD,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACxC,qBACE,6LAAC,wIAAM;QACL,KAAK;QACL,MAAM,QAAQ;QACd,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;kBAER;;;;;;AAGP;;AAGF,qBAAqB,WAAW,GAAG"}},
    {"offset": {"line": 2705, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/pricing-policy-content.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { asBusinessId, asSystemId, type SystemId } from \"@/lib/id-types\";\r\nimport { usePricingPolicies, usePricingPolicyMutations } from \"./hooks/use-pricing\";\r\nimport type { PricingPolicy } from \"./types\";\r\nimport { PricingPolicyForm, type PricingPolicyFormValues } from \"./form\";\r\nimport { PricingTable } from \"./pricing-table\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"../../../components/ui/card\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle } from \"../../../components/ui/dialog\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"../../../components/ui/alert-dialog\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"../../../components/ui/tabs\";\r\nimport { toast } from 'sonner';\r\nimport { SettingsActionButton } from \"../../../components/settings/SettingsActionButton\";\r\nimport { PlusCircle } from \"lucide-react\";\r\n\r\ninterface PricingPolicyContentProps {\r\n    isActive: boolean;\r\n    onRegisterActions: (actions: React.ReactNode[]) => void;\r\n}\r\n\r\nexport function PricingPolicyContent({ isActive, onRegisterActions }: PricingPolicyContentProps) {\r\n    const { data: pricingData } = usePricingPolicies();\r\n    const data = pricingData?.data || [];\r\n    const { create, update, remove, setDefault } = usePricingPolicyMutations();\r\n\r\n    const [isFormOpen, setIsFormOpen] = React.useState(false);\r\n    const [editingPolicy, setEditingPolicy] = React.useState<PricingPolicy | null>(null);\r\n    const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n    const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n    const [innerTab, setInnerTab] = React.useState('all');\r\n\r\n    // Register actions when tab is active\r\n    React.useEffect(() => {\r\n        if (isActive) {\r\n            onRegisterActions([\r\n                <SettingsActionButton key=\"add\" onClick={() => setIsFormOpen(true)}>\r\n                    <PlusCircle className=\"h-4 w-4\" />\r\n                    Tạo chính sách giá\r\n                </SettingsActionButton>\r\n            ]);\r\n        }\r\n    }, [isActive, onRegisterActions]);\r\n\r\n    const handleAddNew = () => {\r\n        setEditingPolicy(null);\r\n        setIsFormOpen(true);\r\n    };\r\n    \r\n    const handleEdit = React.useCallback((policy: PricingPolicy) => {\r\n        setEditingPolicy(policy);\r\n        setIsFormOpen(true);\r\n    }, []);\r\n    \r\n    const handleDeleteRequest = React.useCallback((systemId: SystemId) => {\r\n        setIdToDelete(systemId);\r\n        setIsAlertOpen(true);\r\n    }, []);\r\n    \r\n    const confirmDelete = () => {\r\n        if (idToDelete) {\r\n            const policy = data.find(p => p.systemId === idToDelete);\r\n            remove.mutate(idToDelete as string);\r\n            toast.success(`Đã xóa chính sách giá \"${policy?.name}\"`);\r\n        }\r\n        setIsAlertOpen(false);\r\n        setIsFormOpen(false);\r\n        setIdToDelete(null);\r\n    };\r\n\r\n    const handleFormSubmit = (values: PricingPolicyFormValues) => {\r\n        const normalized = {\r\n            id: asBusinessId(values.id.trim().toUpperCase()),\r\n            name: values.name.trim(),\r\n            description: values.description?.trim() || undefined,\r\n            type: values.type,\r\n            isActive: values.isActive,\r\n            isDefault: values.isDefault,\r\n        } satisfies Omit<PricingPolicy, 'systemId'>;\r\n\r\n        if (editingPolicy) {\r\n            update.mutate({ systemId: editingPolicy.systemId as string, data: normalized });\r\n            toast.success(`Đã cập nhật chính sách giá \"${normalized.name}\"`);\r\n        } else {\r\n            create.mutate(normalized);\r\n            toast.success(`Đã thêm chính sách giá \"${normalized.name}\"`);\r\n        }\r\n        setIsFormOpen(false);\r\n    };\r\n    \r\n    const handleSetDefault = React.useCallback((systemId: SystemId) => {\r\n        const policy = data.find(p => p.systemId === systemId);\r\n        setDefault.mutate(systemId as string);\r\n        if (policy) {\r\n            toast.success(`Đã đặt \"${policy.name}\" làm giá mặc định`);\r\n        }\r\n    }, [data, setDefault]);\r\n    \r\n    const handleToggleActive = React.useCallback((policy: PricingPolicy, isActive: boolean) => {\r\n        update.mutate({ systemId: policy.systemId as string, data: { isActive } });\r\n        toast.success(isActive ? `Đã kích hoạt \"${policy.name}\"` : `Đã tắt \"${policy.name}\"`);\r\n    }, [update]);\r\n    \r\n    const sellingPoliciesForTab = React.useMemo(() => data.filter(p => p.type === 'Bán hàng'), [data]);\r\n    const purchasingPoliciesForTab = React.useMemo(() => data.filter(p => p.type === 'Nhập hàng'), [data]);\r\n\r\n    return (\r\n        <>\r\n            <Tabs value={innerTab} onValueChange={setInnerTab} className=\"w-full\">\r\n                <TabsList className=\"grid w-full grid-cols-3\">\r\n                    <TabsTrigger value=\"selling\">Bán hàng</TabsTrigger>\r\n                    <TabsTrigger value=\"purchasing\">Nhập hàng</TabsTrigger>\r\n                    <TabsTrigger value=\"all\">Tất cả</TabsTrigger>\r\n                </TabsList>\r\n                <TabsContent value=\"selling\" className=\"space-y-4\">\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                        Các chính sách giá áp dụng cho việc bán hàng\r\n                    </p>\r\n                    <PricingTable\r\n                        data={sellingPoliciesForTab}\r\n                        allData={data}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDeleteRequest}\r\n                        onSetDefault={handleSetDefault}\r\n                        onToggleActive={handleToggleActive}\r\n                    />\r\n                </TabsContent>\r\n                <TabsContent value=\"purchasing\" className=\"space-y-4\">\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                        Các chính sách giá áp dụng cho việc nhập hàng\r\n                    </p>\r\n                    <PricingTable\r\n                        data={purchasingPoliciesForTab}\r\n                        allData={data}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDeleteRequest}\r\n                        onSetDefault={handleSetDefault}\r\n                        onToggleActive={handleToggleActive}\r\n                    />\r\n                </TabsContent>\r\n                <TabsContent value=\"all\" className=\"space-y-4\">\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                        Tất cả các chính sách giá trong hệ thống\r\n                    </p>\r\n                    <PricingTable\r\n                        data={data}\r\n                        allData={data}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDeleteRequest}\r\n                        onSetDefault={handleSetDefault}\r\n                        onToggleActive={handleToggleActive}\r\n                    />\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>{editingPolicy ? 'Cập nhật chính sách giá' : 'Thêm chính sách giá'}</DialogTitle>\r\n                    </DialogHeader>\r\n                    <React.Fragment key={editingPolicy?.systemId || 'new'}>\r\n                        <PricingPolicyForm initialData={editingPolicy} onSubmit={handleFormSubmit} />\r\n                    </React.Fragment>\r\n\r\n                    <DialogFooter className=\"flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2\">\r\n                        {editingPolicy && (\r\n                            <Button \r\n                                type=\"button\" \r\n                                variant=\"destructive\" \r\n                                onClick={() => handleDeleteRequest(editingPolicy.systemId)}\r\n                                className=\"sm:mr-auto h-9\"\r\n                            >\r\n                                Xóa\r\n                            </Button>\r\n                        )}\r\n                        <div className=\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\">\r\n                            <Button type=\"button\" variant=\"outline\" onClick={() => setIsFormOpen(false)} className=\"h-9\">\r\n                                Thoát\r\n                            </Button>\r\n                            <Button type=\"submit\" form=\"pricing-policy-form\" className=\"h-9\">\r\n                                Xác nhận\r\n                            </Button>\r\n                        </div>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Bạn có chắc chắn muốn xóa?</AlertDialogTitle>\r\n                        <AlertDialogDescription>Hành động này không thể được hoàn tác.</AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel className=\"h-9\">Hủy</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={confirmDelete} className=\"h-9\">Xóa</AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3176, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-utils.ts"],"sourcesContent":["/**\r\n * ID Utilities\r\n * Helpers for generating and validating IDs (systemId & business id)\r\n */\r\n\r\nimport { getPrefix, type EntityType } from './smart-prefix';\r\nimport { ID_CONFIG } from './id-config';\r\n\r\n// Re-export EntityType for convenience\r\nexport type { EntityType } from './smart-prefix';\r\n\r\n/**\r\n * Generate SystemId (6 digits, immutable, internal use only)\r\n * Format: SYSTEMID_PREFIX + 6 digits (e.g., \"EMP000001\", \"CUSTOMER000001\", \"ORDER000001\")\r\n * Uses systemIdPrefix from ID_CONFIG (English full words)\r\n */\r\nexport function generateSystemId(entityType: EntityType, counter: number): string {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`No configuration found for entity type: ${entityType}`);\r\n  }\r\n  const prefix = config.systemIdPrefix;\r\n  const digitCount = config.digitCount || 6;\r\n  return `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n}\r\n\r\n/**\r\n * Generate Business ID (6 digits, user-facing, editable)\r\n * Format: PREFIX + 6 digits (e.g., \"NV000001\", \"KH000001\", \"CTV000001\")\r\n * All entities use same 6-digit format for consistency\r\n * \r\n * @param entityType - Entity type from smart-prefix\r\n * @param counter - Current counter value\r\n * @param customId - Optional custom ID from user input\r\n * @returns Generated ID or validated custom ID\r\n */\r\nexport function generateBusinessId(\r\n  entityType: EntityType, \r\n  counter: number,\r\n  customId?: string\r\n): string {\r\n  // If user provided custom ID, validate and return it\r\n  if (customId && customId.trim()) {\r\n    const sanitized = sanitizeBusinessId(customId);\r\n    if (!sanitized) {\r\n      throw new Error('Mã không hợp lệ! Chỉ được phép sử dụng chữ cái và số.');\r\n    }\r\n    return sanitized;\r\n  }\r\n  \r\n  // Otherwise, auto-generate\r\n  const prefix = getPrefix(entityType);\r\n  return `${prefix}${String(counter).padStart(6, '0')}`;\r\n}\r\n\r\n/**\r\n * Sanitize business ID\r\n * - Remove special characters (keep only letters and numbers)\r\n * - Convert to uppercase\r\n * - Trim whitespace\r\n * \r\n * @param id - Raw user input\r\n * @returns Sanitized ID or null if invalid\r\n */\r\nexport function sanitizeBusinessId(id: string): string | null {\r\n  if (!id || typeof id !== 'string') return null;\r\n  \r\n  // Remove all special characters, keep only alphanumeric\r\n  const cleaned = id.trim().replace(/[^a-zA-Z0-9]/g, '');\r\n  \r\n  if (!cleaned) return null;\r\n  \r\n  // Convert to uppercase for consistency\r\n  return cleaned.toUpperCase();\r\n}\r\n\r\n/**\r\n * Validate business ID uniqueness (case-insensitive)\r\n * \r\n * @param id - ID to check\r\n * @param existingIds - Array of existing IDs in the system\r\n * @param currentId - Current ID (for edit mode, to exclude self)\r\n * @returns true if unique, false if duplicate\r\n */\r\nexport function isBusinessIdUnique(\r\n  id: string,\r\n  existingIds: string[],\r\n  currentId?: string\r\n): boolean {\r\n  if (!id) return false;\r\n  \r\n  const normalizedId = id.toUpperCase();\r\n  const normalizedCurrentId = currentId?.toUpperCase();\r\n  \r\n  return !existingIds.some(existingId => {\r\n    // ✅ Filter out empty/undefined IDs\r\n    if (!existingId || existingId.trim() === '') return false;\r\n    \r\n    const normalizedExisting = existingId.toUpperCase();\r\n    // Skip self-comparison in edit mode\r\n    if (normalizedCurrentId && normalizedExisting === normalizedCurrentId) {\r\n      return false;\r\n    }\r\n    return normalizedExisting === normalizedId;\r\n  });\r\n}\r\n\r\n/**\r\n * Extract counter from system ID\r\n * Used to initialize counter when loading from localStorage\r\n * Supports both 6, 7 and 8 digits\r\n * \r\n * @param systemId - System ID to parse (e.g., \"EMP000001\", \"CUSTOMER000001\", \"WARRANTY0000001\")\r\n * @param prefix - Expected systemIdPrefix (e.g., \"EMP\", \"CUSTOMER\", \"WARRANTY\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromSystemId(systemId: string, prefix: string): number {\r\n  if (!systemId || typeof systemId !== 'string') return 0;\r\n  \r\n  // Try different digit counts (most entities use 6 digits, some use 7-8)\r\n  const regex8 = new RegExp(`^${prefix}(\\\\d{8})$`);\r\n  const regex7 = new RegExp(`^${prefix}(\\\\d{7})$`);\r\n  const regex6 = new RegExp(`^${prefix}(\\\\d{6})$`);\r\n  \r\n  const match8 = systemId.match(regex8);\r\n  if (match8) return parseInt(match8[1], 10);\r\n  \r\n  const match7 = systemId.match(regex7);\r\n  if (match7) return parseInt(match7[1], 10);\r\n  \r\n  const match6 = systemId.match(regex6);\r\n  if (match6) return parseInt(match6[1], 10);\r\n  \r\n  return 0;\r\n}\r\n\r\n/**\r\n * Extract counter from business ID\r\n * Used to initialize counter when loading from localStorage\r\n * \r\n * @param businessId - Business ID to parse (e.g., \"NV000001\")\r\n * @param prefix - Expected prefix (e.g., \"NV\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromBusinessId(businessId: string, prefix: string): number {\r\n  if (!businessId || typeof businessId !== 'string') return 0;\r\n  const regex = new RegExp(`^${prefix}(\\\\d+)$`);\r\n  const match = businessId.match(regex);\r\n  return match ? parseInt(match[1], 10) : 0;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for systemId)\r\n * \r\n * @param items - Array of items with systemId\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxSystemIdCounter<T extends { systemId: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.systemId) return;\r\n    const counter = extractCounterFromSystemId(item.systemId, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for business id)\r\n * Only counts auto-generated IDs (PREFIX + digits)\r\n * \r\n * @param items - Array of items with id\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxBusinessIdCounter<T extends { id: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.id) return;\r\n    const counter = extractCounterFromBusinessId(item.id, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Format ID for display\r\n * Adds spacing for readability\r\n * \r\n * @param id - ID to format\r\n * @returns Formatted ID (e.g., \"NV-000001\", \"KH-000123\")\r\n */\r\nexport function formatIdForDisplay(id: string): string {\r\n  // Match pattern: PREFIX followed by numbers\r\n  const match = id.match(/^([A-Z]+)(\\d+)$/);\r\n  if (!match) return id;\r\n  \r\n  const [, prefix, numbers] = match;\r\n  return `${prefix}-${numbers}`;\r\n}\r\n\r\n/**\r\n * Validate ID format\r\n * Check if ID follows valid pattern (letters + numbers only)\r\n * \r\n * @param id - ID to validate\r\n * @returns true if valid format\r\n */\r\nexport function isValidIdFormat(id: string): boolean {\r\n  if (!id || typeof id !== 'string') return false;\r\n  \r\n  // Only alphanumeric characters allowed\r\n  const regex = /^[A-Z0-9]+$/i;\r\n  return regex.test(id);\r\n}\r\n\r\n/**\r\n * Generate suggested IDs based on entity type\r\n * Useful for autocomplete or placeholder text\r\n * \r\n * @param entityType - Entity type\r\n * @param counter - Current counter\r\n * @param count - Number of suggestions\r\n * @returns Array of suggested IDs\r\n */\r\nexport function generateSuggestedIds(\r\n  entityType: EntityType,\r\n  counter: number,\r\n  count: number = 3\r\n): string[] {\r\n  const suggestions: string[] = [];\r\n  const prefix = getPrefix(entityType);\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    suggestions.push(`${prefix}${String(counter + i + 1).padStart(6, '0')}`);\r\n  }\r\n  \r\n  return suggestions;\r\n}\r\n\r\n/**\r\n * ✨ Find next available business ID\r\n * Checks existing IDs and increments counter until finding a unique ID\r\n * \r\n * @param prefix - ID prefix (e.g., 'PT', 'PC', 'NV')\r\n * @param existingIds - Array of existing business IDs\r\n * @param startCounter - Starting counter value\r\n * @param digitCount - Number of digits (default: 6)\r\n * @returns Object with nextId and updatedCounter\r\n */\r\nexport function findNextAvailableBusinessId(\r\n  prefix: string,\r\n  existingIds: string[],\r\n  startCounter: number,\r\n  digitCount: number = 6\r\n): { nextId: string; updatedCounter: number } {\r\n  let counter = startCounter;\r\n  let nextId: string;\r\n  \r\n  // Keep incrementing until we find a unique ID\r\n  do {\r\n    counter++;\r\n    nextId = `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n  } while (existingIds.some(id => id === nextId));\r\n  \r\n  return {\r\n    nextId,\r\n    updatedCounter: counter\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3339, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/store-factory.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// persist, createJSONStorage removed - database is now source of truth\r\nimport { \r\n  generateSystemId, \r\n  generateBusinessId, \r\n  isBusinessIdUnique,\r\n  getMaxSystemIdCounter,\r\n  getMaxBusinessIdCounter,\r\n  findNextAvailableBusinessId,\r\n  type EntityType \r\n} from './id-utils';\r\nimport { getPrefix } from './smart-prefix';\r\nimport { ID_CONFIG, type SystemId, type BusinessId, createSystemId, createBusinessId as brandBusinessId } from './id-config';\r\n\r\nconst SYSTEM_FALLBACK_ID: SystemId = createSystemId('SYS000000');\r\n\r\nconst asSystemIdFallback = (): SystemId => SYSTEM_FALLBACK_ID;\r\n\r\n// ✅ API Sync helper for store-factory\r\nasync function syncToAPI<T>(\r\n  apiEndpoint: string,\r\n  action: 'create' | 'update' | 'delete' | 'restore',\r\n  data: T | { systemId: SystemId },\r\n  systemId?: SystemId\r\n): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' \r\n      ? apiEndpoint \r\n      : `${apiEndpoint}/${systemId || (data as any).systemId}`;\r\n    \r\n    const method = action === 'create' ? 'POST' \r\n      : action === 'update' ? 'PATCH' \r\n      : action === 'delete' ? 'DELETE'\r\n      : 'PATCH'; // restore uses PATCH\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.warn(`[Store Factory API] ${action} failed for ${apiEndpoint}:`, response.status);\r\n    }\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Store Factory API] ${action} error for ${apiEndpoint}:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Item with SystemId (branded type)\r\nexport type ItemWithSystemId = { systemId: SystemId; [key: string]: any };\r\n\r\n// ✅ Counter state for ID generation\r\nexport type CounterState = {\r\n  systemId: number;\r\n  businessId: number;\r\n};\r\n\r\nexport type CrudState<T extends ItemWithSystemId> = {\r\n  data: T[];\r\n  _counters: CounterState; // ✅ Persisted counters\r\n  _initialized: boolean; // ✅ Track if loaded from API\r\n  add: (item: Omit<T, 'systemId'>) => T;\r\n  addMultiple: (items: Omit<T, 'systemId'>[]) => void;\r\n  update: (systemId: SystemId, item: Partial<T>) => void; // ✅ Accept partial updates\r\n  remove: (systemId: SystemId) => void; // ✅ Branded type\r\n  hardDelete: (systemId: SystemId) => void; // ✅ Branded type\r\n  restore: (systemId: SystemId) => void; // ✅ Branded type\r\n  findById: (systemId: SystemId | string) => T | undefined; // ✅ Branded type\r\n  getActive: () => T[];\r\n  getDeleted: () => T[];\r\n  loadFromAPI: () => Promise<void>; // ✅ Load data from database\r\n};\r\n\r\nexport const createCrudStore = <T extends ItemWithSystemId>(\r\n  _initialData: T[], // @deprecated - Kept for backward compatibility but NO LONGER USED\r\n  entityType: EntityType, // Changed from idPrefix to entityType\r\n  options?: {\r\n    businessIdField?: keyof T; // Field name for business ID (default: 'id')\r\n    persistKey?: string; // @deprecated - No longer used, kept for backward compatibility\r\n    getCurrentUser?: () => string | undefined; // Function to get current user systemId\r\n    apiEndpoint?: string; // ✅ API endpoint for database sync (e.g., '/api/employees')\r\n  }\r\n) => {\r\n  const businessPrefix = getPrefix(entityType); // Vietnamese prefix for Business ID (NV, KH, DH)\r\n  const config = ID_CONFIG[entityType];\r\n  const systemIdPrefix = config?.systemIdPrefix || entityType.toUpperCase(); // English prefix for SystemId (EMP, CUSTOMER, ORDER)\r\n  \r\n  const businessIdField = options?.businessIdField ?? 'id';\r\n  // const persistKey = options?.persistKey; // @deprecated - No longer used\r\n  const getCurrentUser = options?.getCurrentUser;\r\n  const apiEndpoint = options?.apiEndpoint;\r\n\r\n  // ✅ CHANGED: Start with empty array - database is source of truth\r\n  // Mock data files (data.ts) are NO LONGER USED for runtime\r\n  const normalizedInitialData: T[] = [];\r\n\r\n  const storeConfig = (set: any, get: any) => ({\r\n    data: normalizedInitialData, // ✅ Start empty - data loaded via React Query\r\n    // ✅ Counters start at 0 - will be initialized from API via loadFromAPI()\r\n    _counters: {\r\n      systemId: 0,\r\n      businessId: 0\r\n    },\r\n    _initialized: false, // ✅ Track API initialization\r\n    add: (item: Omit<T, 'systemId'>): T => {\r\n        // ✅ Get counters from state (persisted)\r\n        const currentCounters = get()._counters;\r\n        const newSystemIdCounter = currentCounters.systemId + 1;\r\n        const newSystemId = createSystemId(generateSystemId(entityType, newSystemIdCounter));\r\n        \r\n        // Generate or validate Business ID (if field exists)\r\n        let finalItem = { ...item } as any;\r\n        let newBusinessIdCounter = currentCounters.businessId;\r\n        \r\n        if (businessIdField in item) {\r\n          const customId = (item as any)[businessIdField];\r\n          const existingIds = get().data.map((d: any) => d[businessIdField]);\r\n          \r\n          // ✅ If customId provided, validate uniqueness\r\n          if (customId && customId.trim()) {\r\n            if (!isBusinessIdUnique(customId, existingIds)) {\r\n              throw new Error(`Mã \"${customId}\" đã tồn tại! Vui lòng sử dụng mã khác.`);\r\n            }\r\n            finalItem[businessIdField] = customId.trim().toUpperCase();\r\n          } else {\r\n            // ✅ Auto-generate with findNextAvailableBusinessId\r\n            const digitCount = 6; // All entities use 6 digits\r\n            const result = findNextAvailableBusinessId(businessPrefix, existingIds, newBusinessIdCounter, digitCount);\r\n            finalItem[businessIdField] = result.nextId;\r\n            newBusinessIdCounter = result.updatedCounter;\r\n          }\r\n        }\r\n        \r\n        const now = new Date().toISOString();\r\n        const currentUser = getCurrentUser?.();\r\n        const newItem = { \r\n          ...finalItem, \r\n          systemId: newSystemId, // ✅ Branded SystemId\r\n          createdAt: finalItem.createdAt || now,\r\n          updatedAt: now,\r\n          createdBy: finalItem.createdBy || currentUser,\r\n          updatedBy: currentUser,\r\n        } as unknown as T;\r\n        \r\n        // ✅ Update both data and counters atomically\r\n        set((state: any) => ({ \r\n          data: [...state.data, newItem],\r\n          _counters: {\r\n            systemId: newSystemIdCounter,\r\n            businessId: newBusinessIdCounter\r\n          }\r\n        }));\r\n        \r\n        // ✅ Sync to API in background\r\n        if (apiEndpoint) {\r\n          syncToAPI(apiEndpoint, 'create', newItem).catch(console.error);\r\n        }\r\n        \r\n        return newItem;\r\n    },\r\n    addMultiple: (items: Omit<T, 'systemId'>[]) => \r\n        set((state: any) => {\r\n            const now = new Date().toISOString();\r\n            const currentUser = getCurrentUser?.();\r\n            const newItems: T[] = [];\r\n            const digitCount = 6; // All entities use 6 digits\r\n            \r\n            // ✅ Start from current counters\r\n            let currentSystemIdCounter = state._counters.systemId;\r\n            let currentBusinessIdCounter = state._counters.businessId;\r\n            \r\n            items.forEach(item => {\r\n                // ✅ Generate SystemId from current counter\r\n                currentSystemIdCounter++;\r\n                const newSystemId = createSystemId(generateSystemId(entityType, currentSystemIdCounter));\r\n                \r\n                // Generate or validate Business ID (if field exists)\r\n                let finalItem = { ...item } as any;\r\n                if (businessIdField in item) {\r\n                  const customId = (item as any)[businessIdField];\r\n                  \r\n                  // Collect existing IDs (from state + already added in this batch)\r\n                  const existingIds = [\r\n                    ...state.data.map((d: any) => d[businessIdField]),\r\n                    ...newItems.map((d: any) => d[businessIdField])\r\n                  ];\r\n                  \r\n                  // ✅ If customId provided, validate uniqueness\r\n                  if (customId && customId.trim()) {\r\n                    if (!isBusinessIdUnique(customId, existingIds)) {\r\n                      throw new Error(`Mã \"${customId}\" đã tồn tại! Vui lòng sử dụng mã khác.`);\r\n                    }\r\n                    finalItem[businessIdField] = customId.trim().toUpperCase();\r\n                  } else {\r\n                    // ✅ Auto-generate with findNextAvailableBusinessId\r\n                    const result = findNextAvailableBusinessId(businessPrefix, existingIds, currentBusinessIdCounter, digitCount);\r\n                    finalItem[businessIdField] = result.nextId;\r\n                    currentBusinessIdCounter = result.updatedCounter;\r\n                  }\r\n                }\r\n                \r\n                newItems.push({ \r\n                  ...finalItem, \r\n                  systemId: newSystemId,\r\n                  createdAt: now,\r\n                  updatedAt: now,\r\n                  createdBy: currentUser,\r\n                  updatedBy: currentUser,\r\n                } as unknown as T);\r\n            });\r\n            \r\n            // ✅ Update both data and counters\r\n            const result = { \r\n              data: [...state.data, ...newItems],\r\n              _counters: {\r\n                systemId: currentSystemIdCounter,\r\n                businessId: currentBusinessIdCounter\r\n              }\r\n            };\r\n            \r\n            // ✅ Sync to API in background (batch)\r\n            if (apiEndpoint) {\r\n              newItems.forEach(item => {\r\n                syncToAPI(apiEndpoint, 'create', item).catch(console.error);\r\n              });\r\n            }\r\n            \r\n            return result;\r\n        }),\r\n    update: (systemId: SystemId, updatedItem: Partial<T>) => {\r\n      // Validate unique business ID (case-insensitive, skip self)\r\n      if (businessIdField in updatedItem) {\r\n        const businessId = (updatedItem as any)[businessIdField];\r\n        const existingIds = get().data\r\n          .filter((d: any) => d.systemId !== systemId)\r\n          .map((d: any) => d[businessIdField]);\r\n        \r\n        if (businessId && !isBusinessIdUnique(businessId, existingIds)) {\r\n          throw new Error(`Mã \"${businessId}\" đã tồn tại! Vui lòng sử dụng mã khác.`);\r\n        }\r\n      }\r\n\r\n      const now = new Date().toISOString();\r\n      const currentUser = getCurrentUser?.();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId \r\n            ? { ...item, ...updatedItem, updatedAt: now, updatedBy: currentUser } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const fullItem = get().data.find((item: T) => item.systemId === systemId);\r\n        if (fullItem) {\r\n          syncToAPI(apiEndpoint, 'update', fullItem, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    remove: (systemId: SystemId) => {\r\n      // Soft delete - mark as deleted\r\n      const now = new Date().toISOString();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: true, deletedAt: now } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'update', { ...item, isDeleted: true, deletedAt: now }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    hardDelete: (systemId: SystemId) => {\r\n      // Permanent delete - remove from array\r\n      set((state: any) => ({\r\n        data: state.data.filter((item: T) => item.systemId !== systemId),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        syncToAPI(apiEndpoint, 'delete', { systemId }, systemId).catch(console.error);\r\n      }\r\n    },\r\n    restore: (systemId: SystemId) => {\r\n      // Restore soft-deleted item\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: false, deletedAt: null } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'restore', { ...item, isDeleted: false, deletedAt: null }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    getActive: () => get().data.filter((item: any) => !item.isDeleted),\r\n    getDeleted: () => get().data.filter((item: any) => item.isDeleted),\r\n    findById: (id: SystemId | string) => get().data.find((item: T) => item.systemId === id || (item as any).id === id),\r\n    \r\n    // ✅ Load data from database API - OPTIMIZED: No more limit=10000!\r\n    // This is now only used for counter initialization, NOT for loading all data\r\n    // Use React Query hooks for data fetching with proper pagination\r\n    loadFromAPI: async () => {\r\n      if (!apiEndpoint) return;\r\n      if (get()._initialized) return;\r\n      \r\n      try {\r\n        // Only fetch minimal data needed to initialize counters\r\n        // Actual data loading should be done via React Query hooks\r\n        const response = await fetch(`${apiEndpoint}?limit=1&sortBy=systemId&sortOrder=desc`, {\r\n          credentials: 'include',\r\n        });\r\n        if (response.ok) {\r\n          const json = await response.json();\r\n          const pagination = json.pagination || {};\r\n          const lastItem = json.data?.[0];\r\n          \r\n          // Initialize counters from the latest item (highest IDs)\r\n          const newCounters = {\r\n            systemId: lastItem ? getMaxSystemIdCounter([lastItem], systemIdPrefix) : 0,\r\n            businessId: (lastItem && options?.businessIdField)\r\n              ? getMaxBusinessIdCounter([lastItem] as any[], businessPrefix)\r\n              : 0\r\n          };\r\n          \r\n          set({ \r\n            data: [], // Don't store data in Zustand anymore - use React Query\r\n            _counters: newCounters,\r\n            _initialized: true \r\n          });\r\n          \r\n          console.log(`[Store Factory] ${apiEndpoint} initialized. Total records: ${pagination.total || 'unknown'}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`[Store Factory] loadFromAPI error for ${apiEndpoint}:`, error);\r\n        // Still mark as initialized to prevent infinite retry\r\n        set({ _initialized: true });\r\n      }\r\n    },\r\n  });\r\n\r\n  // ✅ SIMPLIFIED: No localStorage persistence, database is source of truth\r\n  // Data is loaded via ApiSyncProvider on app init\r\n  return create<CrudState<T>>(storeConfig);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3650, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/taxes/store.ts"],"sourcesContent":["import type { SystemId } from '@/lib/id-types';\r\nimport type { UseBoundStore, StoreApi } from 'zustand';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { Tax } from './types';\r\nimport { createCrudStore, type CrudState } from '../../../lib/store-factory';\r\nimport { getCurrentUserSystemId } from '../../../contexts/auth-context';\r\n\r\ntype TaxStore = CrudState<Tax> & {\r\n  setDefaultSale: (systemId: SystemId) => void;\r\n  setDefaultPurchase: (systemId: SystemId) => void;\r\n  getDefaultSale: () => Tax | undefined;\r\n  getDefaultPurchase: () => Tax | undefined;\r\n};\r\n\r\nconst baseStore = createCrudStore<Tax>([], 'taxes', {\r\n  businessIdField: 'id',\r\n  getCurrentUser: getCurrentUserSystemId,\r\n  apiEndpoint: '/api/settings/data?type=tax',\r\n}) as UseBoundStore<StoreApi<TaxStore>>;\r\n\r\nconst originalAdd = baseStore.getState().add;\r\n\r\n// Set default sale - chỉ có 1 mặc định (giống setDefault của PricingPolicy)\r\nconst setDefaultSaleAction = (systemId: SystemId) => {\r\n  baseStore.setState((current) => {\r\n    const exists = current.data.some((tax) => tax.systemId === systemId);\r\n    if (!exists) return current;\r\n\r\n    return {\r\n      ...current,\r\n      data: current.data.map((tax) => ({\r\n        ...tax,\r\n        isDefaultSale: tax.systemId === systemId,\r\n      })),\r\n    };\r\n  });\r\n};\r\n\r\n// Set default purchase - chỉ có 1 mặc định\r\nconst setDefaultPurchaseAction = (systemId: SystemId) => {\r\n  baseStore.setState((current) => {\r\n    const exists = current.data.some((tax) => tax.systemId === systemId);\r\n    if (!exists) return current;\r\n\r\n    return {\r\n      ...current,\r\n      data: current.data.map((tax) => ({\r\n        ...tax,\r\n        isDefaultPurchase: tax.systemId === systemId,\r\n      })),\r\n    };\r\n  });\r\n};\r\n\r\nconst enhancedAdd: typeof originalAdd = (item) => {\r\n  const newItem = originalAdd(item);\r\n  const storeData = baseStore.getState().data;\r\n  \r\n  const hasDefaultSale = storeData.some((tax) => tax.isDefaultSale);\r\n  const hasDefaultPurchase = storeData.some((tax) => tax.isDefaultPurchase);\r\n\r\n  if (item.isDefaultSale) {\r\n    setDefaultSaleAction(newItem.systemId);\r\n  } else if (!hasDefaultSale) {\r\n    setDefaultSaleAction(newItem.systemId);\r\n  }\r\n\r\n  if (item.isDefaultPurchase) {\r\n    setDefaultPurchaseAction(newItem.systemId);\r\n  } else if (!hasDefaultPurchase) {\r\n    setDefaultPurchaseAction(newItem.systemId);\r\n  }\r\n\r\n  return newItem;\r\n};\r\n\r\nbaseStore.setState((state) => ({\r\n  ...state,\r\n  add: enhancedAdd,\r\n  setDefaultSale: setDefaultSaleAction,\r\n  setDefaultPurchase: setDefaultPurchaseAction,\r\n  getDefaultSale: () => baseStore.getState().data.find((tax) => tax.isDefaultSale),\r\n  getDefaultPurchase: () => baseStore.getState().data.find((tax) => tax.isDefaultPurchase),\r\n}));\r\n\r\n// Ensure defaults exist on initial load (migrate old data without isDefaultSale/isDefaultPurchase)\r\nconst ensureDefaultsOnInit = () => {\r\n  const currentData = baseStore.getState().data;\r\n  if (currentData.length === 0) return;\r\n\r\n  const hasDefaultSale = currentData.some((tax) => tax.isDefaultSale);\r\n  const hasDefaultPurchase = currentData.some((tax) => tax.isDefaultPurchase);\r\n\r\n  if (!hasDefaultSale || !hasDefaultPurchase) {\r\n    baseStore.setState((current) => ({\r\n      ...current,\r\n      data: current.data.map((tax, index) => ({\r\n        ...tax,\r\n        isDefaultSale: !hasDefaultSale && index === 0 ? true : (tax.isDefaultSale ?? false),\r\n        isDefaultPurchase: !hasDefaultPurchase && index === 0 ? true : (tax.isDefaultPurchase ?? false),\r\n      })),\r\n    }));\r\n  }\r\n};\r\n\r\n// Run migration on module load\r\nensureDefaultsOnInit();\r\n\r\nexport const useTaxStore = baseStore;\r\n"],"names":[],"mappings":";;;;AAIA;AACA;;;AASA,MAAM,YAAY,IAAA,6IAAe,EAAM,EAAE,EAAE,SAAS;IAClD,iBAAiB;IACjB,gBAAgB,yJAAsB;IACtC,aAAa;AACf;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAE5C,4EAA4E;AAC5E,MAAM,uBAAuB,CAAC;IAC5B,UAAU,QAAQ,CAAC,CAAC;QAClB,MAAM,SAAS,QAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,MAAQ,IAAI,QAAQ,KAAK;QAC3D,IAAI,CAAC,QAAQ,OAAO;QAEpB,OAAO;YACL,GAAG,OAAO;YACV,MAAM,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;oBAC/B,GAAG,GAAG;oBACN,eAAe,IAAI,QAAQ,KAAK;gBAClC,CAAC;QACH;IACF;AACF;AAEA,2CAA2C;AAC3C,MAAM,2BAA2B,CAAC;IAChC,UAAU,QAAQ,CAAC,CAAC;QAClB,MAAM,SAAS,QAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,MAAQ,IAAI,QAAQ,KAAK;QAC3D,IAAI,CAAC,QAAQ,OAAO;QAEpB,OAAO;YACL,GAAG,OAAO;YACV,MAAM,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;oBAC/B,GAAG,GAAG;oBACN,mBAAmB,IAAI,QAAQ,KAAK;gBACtC,CAAC;QACH;IACF;AACF;AAEA,MAAM,cAAkC,CAAC;IACvC,MAAM,UAAU,YAAY;IAC5B,MAAM,YAAY,UAAU,QAAQ,GAAG,IAAI;IAE3C,MAAM,iBAAiB,UAAU,IAAI,CAAC,CAAC,MAAQ,IAAI,aAAa;IAChE,MAAM,qBAAqB,UAAU,IAAI,CAAC,CAAC,MAAQ,IAAI,iBAAiB;IAExE,IAAI,KAAK,aAAa,EAAE;QACtB,qBAAqB,QAAQ,QAAQ;IACvC,OAAO,IAAI,CAAC,gBAAgB;QAC1B,qBAAqB,QAAQ,QAAQ;IACvC;IAEA,IAAI,KAAK,iBAAiB,EAAE;QAC1B,yBAAyB,QAAQ,QAAQ;IAC3C,OAAO,IAAI,CAAC,oBAAoB;QAC9B,yBAAyB,QAAQ,QAAQ;IAC3C;IAEA,OAAO;AACT;AAEA,UAAU,QAAQ,CAAC,CAAC,QAAU,CAAC;QAC7B,GAAG,KAAK;QACR,KAAK;QACL,gBAAgB;QAChB,oBAAoB;QACpB,gBAAgB,IAAM,UAAU,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,MAAQ,IAAI,aAAa;QAC/E,oBAAoB,IAAM,UAAU,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,MAAQ,IAAI,iBAAiB;IACzF,CAAC;AAED,mGAAmG;AACnG,MAAM,uBAAuB;IAC3B,MAAM,cAAc,UAAU,QAAQ,GAAG,IAAI;IAC7C,IAAI,YAAY,MAAM,KAAK,GAAG;IAE9B,MAAM,iBAAiB,YAAY,IAAI,CAAC,CAAC,MAAQ,IAAI,aAAa;IAClE,MAAM,qBAAqB,YAAY,IAAI,CAAC,CAAC,MAAQ,IAAI,iBAAiB;IAE1E,IAAI,CAAC,kBAAkB,CAAC,oBAAoB;QAC1C,UAAU,QAAQ,CAAC,CAAC,UAAY,CAAC;gBAC/B,GAAG,OAAO;gBACV,MAAM,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,QAAU,CAAC;wBACtC,GAAG,GAAG;wBACN,eAAe,CAAC,kBAAkB,UAAU,IAAI,OAAQ,IAAI,aAAa,IAAI;wBAC7E,mBAAmB,CAAC,sBAAsB,UAAU,IAAI,OAAQ,IAAI,iBAAiB,IAAI;oBAC3F,CAAC;YACH,CAAC;IACH;AACF;AAEA,+BAA+B;AAC/B;AAEO,MAAM,cAAc"}},
    {"offset": {"line": 3744, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/tax-table.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport type { SystemId } from '@/lib/id-types';\r\nimport { MoreHorizontal } from 'lucide-react';\r\nimport { Button } from '../../../components/ui/button';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '../../../components/ui/dropdown-menu';\r\nimport { Switch } from '../../../components/ui/switch';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '../../../components/ui/table';\r\nimport type { Tax } from '../taxes/types';\r\nimport { toast } from 'sonner';\r\n\r\ninterface TaxTableProps {\r\n  data: Tax[];\r\n  allData: Tax[]; // All taxes for finding fallback\r\n  onEdit: (tax: Tax) => void;\r\n  onDelete: (systemId: SystemId) => void;\r\n  onSetDefaultSale: (systemId: SystemId) => void;\r\n  onSetDefaultPurchase: (systemId: SystemId) => void;\r\n}\r\n\r\nexport function TaxTable({\r\n  data,\r\n  allData,\r\n  onEdit,\r\n  onDelete,\r\n  onSetDefaultSale,\r\n  onSetDefaultPurchase,\r\n}: TaxTableProps) {\r\n  \r\n  const handleToggleDefaultSale = React.useCallback((tax: Tax, checked: boolean) => {\r\n    if (checked) {\r\n      // Toggle ON: set this as default\r\n      onSetDefaultSale(tax.systemId);\r\n    } else {\r\n      // Toggle OFF: find another tax to set as default\r\n      const otherTaxes = allData.filter(t => t.systemId !== tax.systemId);\r\n      if (otherTaxes.length > 0) {\r\n        // Set first available as default\r\n        onSetDefaultSale(otherTaxes[0].systemId);\r\n      } else {\r\n        // No other tax, cannot turn off\r\n        toast.error('Phải có ít nhất một thuế mặc định bán hàng');\r\n      }\r\n    }\r\n  }, [allData, onSetDefaultSale]);\r\n\r\n  const handleToggleDefaultPurchase = React.useCallback((tax: Tax, checked: boolean) => {\r\n    if (checked) {\r\n      // Toggle ON: set this as default\r\n      onSetDefaultPurchase(tax.systemId);\r\n    } else {\r\n      // Toggle OFF: find another tax to set as default\r\n      const otherTaxes = allData.filter(t => t.systemId !== tax.systemId);\r\n      if (otherTaxes.length > 0) {\r\n        // Set first available as default\r\n        onSetDefaultPurchase(otherTaxes[0].systemId);\r\n      } else {\r\n        // No other tax, cannot turn off\r\n        toast.error('Phải có ít nhất một thuế mặc định nhập hàng');\r\n      }\r\n    }\r\n  }, [allData, onSetDefaultPurchase]);\r\n\r\n  return (\r\n    <div className=\"rounded-md border\">\r\n      <Table>\r\n        <TableHeader>\r\n          <TableRow>\r\n            <TableHead>Mã thuế</TableHead>\r\n            <TableHead>Tên thuế</TableHead>\r\n            <TableHead className=\"text-right\">Thuế suất</TableHead>\r\n            <TableHead>MĐ Bán hàng</TableHead>\r\n            <TableHead>MĐ Nhập hàng</TableHead>\r\n            <TableHead className=\"text-right\">Thao tác</TableHead>\r\n          </TableRow>\r\n        </TableHeader>\r\n        <TableBody>\r\n          {data.length === 0 ? (\r\n            <TableRow>\r\n              <TableCell colSpan={6} className=\"h-24 text-center\">\r\n                Chưa có dữ liệu\r\n              </TableCell>\r\n            </TableRow>\r\n          ) : (\r\n            data.map((tax) => (\r\n              <TableRow key={tax.systemId}>\r\n                <TableCell className=\"font-medium\">{tax.id}</TableCell>\r\n                <TableCell>\r\n                  <div className=\"flex flex-col\">\r\n                    <span className=\"font-medium\">{tax.name}</span>\r\n                    {tax.description && (\r\n                      <span className=\"text-xs text-muted-foreground\">{tax.description}</span>\r\n                    )}\r\n                  </div>\r\n                </TableCell>\r\n                <TableCell className=\"text-right font-medium\">{tax.rate}%</TableCell>\r\n                <TableCell>\r\n                  <Switch \r\n                    checked={tax.isDefaultSale} \r\n                    onCheckedChange={(checked) => handleToggleDefaultSale(tax, checked)}\r\n                  />\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Switch \r\n                    checked={tax.isDefaultPurchase} \r\n                    onCheckedChange={(checked) => handleToggleDefaultPurchase(tax, checked)}\r\n                  />\r\n                </TableCell>\r\n                <TableCell className=\"text-right\">\r\n                  <DropdownMenu>\r\n                    <DropdownMenuTrigger asChild>\r\n                      <Button variant=\"ghost\" className=\"h-9 w-9 p-0\">\r\n                        <span className=\"sr-only\">Mở menu</span>\r\n                        <MoreHorizontal className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </DropdownMenuTrigger>\r\n                    <DropdownMenuContent align=\"end\">\r\n                      <DropdownMenuLabel>Thao tác</DropdownMenuLabel>\r\n                      <DropdownMenuSeparator />\r\n                      <DropdownMenuItem onClick={() => onEdit(tax)}>\r\n                        Chỉnh sửa\r\n                      </DropdownMenuItem>\r\n                      <DropdownMenuItem\r\n                        onClick={() => onDelete(tax.systemId)}\r\n                        className=\"text-destructive\"\r\n                      >\r\n                        Xóa\r\n                      </DropdownMenuItem>\r\n                    </DropdownMenuContent>\r\n                  </DropdownMenu>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))\r\n          )}\r\n        </TableBody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AAQA;AACA;AASA;;;;;;;;;;AAWO,SAAS,SAAS,EACvB,IAAI,EACJ,OAAO,EACP,MAAM,EACN,QAAQ,EACR,gBAAgB,EAChB,oBAAoB,EACN;;IAEd,MAAM,0BAA0B,4KAAiB;yDAAC,CAAC,KAAU;YAC3D,IAAI,SAAS;gBACX,iCAAiC;gBACjC,iBAAiB,IAAI,QAAQ;YAC/B,OAAO;gBACL,iDAAiD;gBACjD,MAAM,aAAa,QAAQ,MAAM;gFAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,IAAI,QAAQ;;gBAClE,IAAI,WAAW,MAAM,GAAG,GAAG;oBACzB,iCAAiC;oBACjC,iBAAiB,UAAU,CAAC,EAAE,CAAC,QAAQ;gBACzC,OAAO;oBACL,gCAAgC;oBAChC,oJAAK,CAAC,KAAK,CAAC;gBACd;YACF;QACF;wDAAG;QAAC;QAAS;KAAiB;IAE9B,MAAM,8BAA8B,4KAAiB;6DAAC,CAAC,KAAU;YAC/D,IAAI,SAAS;gBACX,iCAAiC;gBACjC,qBAAqB,IAAI,QAAQ;YACnC,OAAO;gBACL,iDAAiD;gBACjD,MAAM,aAAa,QAAQ,MAAM;oFAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,IAAI,QAAQ;;gBAClE,IAAI,WAAW,MAAM,GAAG,GAAG;oBACzB,iCAAiC;oBACjC,qBAAqB,UAAU,CAAC,EAAE,CAAC,QAAQ;gBAC7C,OAAO;oBACL,gCAAgC;oBAChC,oJAAK,CAAC,KAAK,CAAC;gBACd;YACF;QACF;4DAAG;QAAC;QAAS;KAAqB;IAElC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,sIAAK;;8BACJ,6LAAC,4IAAW;8BACV,cAAA,6LAAC,yIAAQ;;0CACP,6LAAC,0IAAS;0CAAC;;;;;;0CACX,6LAAC,0IAAS;0CAAC;;;;;;0CACX,6LAAC,0IAAS;gCAAC,WAAU;0CAAa;;;;;;0CAClC,6LAAC,0IAAS;0CAAC;;;;;;0CACX,6LAAC,0IAAS;0CAAC;;;;;;0CACX,6LAAC,0IAAS;gCAAC,WAAU;0CAAa;;;;;;;;;;;;;;;;;8BAGtC,6LAAC,0IAAS;8BACP,KAAK,MAAM,KAAK,kBACf,6LAAC,yIAAQ;kCACP,cAAA,6LAAC,0IAAS;4BAAC,SAAS;4BAAG,WAAU;sCAAmB;;;;;;;;;;+BAKtD,KAAK,GAAG,CAAC,CAAC,oBACR,6LAAC,yIAAQ;;8CACP,6LAAC,0IAAS;oCAAC,WAAU;8CAAe,IAAI,EAAE;;;;;;8CAC1C,6LAAC,0IAAS;8CACR,cAAA,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAK,WAAU;0DAAe,IAAI,IAAI;;;;;;4CACtC,IAAI,WAAW,kBACd,6LAAC;gDAAK,WAAU;0DAAiC,IAAI,WAAW;;;;;;;;;;;;;;;;;8CAItE,6LAAC,0IAAS;oCAAC,WAAU;;wCAA0B,IAAI,IAAI;wCAAC;;;;;;;8CACxD,6LAAC,0IAAS;8CACR,cAAA,6LAAC,wIAAM;wCACL,SAAS,IAAI,aAAa;wCAC1B,iBAAiB,CAAC,UAAY,wBAAwB,KAAK;;;;;;;;;;;8CAG/D,6LAAC,0IAAS;8CACR,cAAA,6LAAC,wIAAM;wCACL,SAAS,IAAI,iBAAiB;wCAC9B,iBAAiB,CAAC,UAAY,4BAA4B,KAAK;;;;;;;;;;;8CAGnE,6LAAC,0IAAS;oCAAC,WAAU;8CACnB,cAAA,6LAAC,wJAAY;;0DACX,6LAAC,+JAAmB;gDAAC,OAAO;0DAC1B,cAAA,6LAAC,wIAAM;oDAAC,SAAQ;oDAAQ,WAAU;;sEAChC,6LAAC;4DAAK,WAAU;sEAAU;;;;;;sEAC1B,6LAAC,qOAAc;4DAAC,WAAU;;;;;;;;;;;;;;;;;0DAG9B,6LAAC,+JAAmB;gDAAC,OAAM;;kEACzB,6LAAC,6JAAiB;kEAAC;;;;;;kEACnB,6LAAC,iKAAqB;;;;;kEACtB,6LAAC,4JAAgB;wDAAC,SAAS,IAAM,OAAO;kEAAM;;;;;;kEAG9C,6LAAC,4JAAgB;wDACf,SAAS,IAAM,SAAS,IAAI,QAAQ;wDACpC,WAAU;kEACX;;;;;;;;;;;;;;;;;;;;;;;;2BAxCM,IAAI,QAAQ;;;;;;;;;;;;;;;;;;;;;AAqDzC;GAtHgB;KAAA"}},
    {"offset": {"line": 4089, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/number-input.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { ChevronUp, ChevronDown } from 'lucide-react';\r\nimport { Input } from './input';\r\nimport { Button } from './button';\r\nimport { cn } from '../../lib/utils';\r\n\r\nexport interface NumberInputProps extends Omit<React.ComponentProps<\"input\">, 'onChange' | 'value'> {\r\n  value?: number;\r\n  onChange?: (value: number) => void;\r\n  step?: number;\r\n  min?: number;\r\n  max?: number;\r\n  format?: boolean;\r\n}\r\n\r\nconst NumberInput = React.forwardRef<HTMLInputElement, NumberInputProps>(\r\n  ({ className, value, onChange, step = 1, min, max, format = true, ...props }, ref) => {\r\n    \r\n    const formatValue = React.useCallback((num?: number) => {\r\n      if (num === undefined || num === null || isNaN(num)) return '';\r\n      if (!format) return String(num);\r\n      return new Intl.NumberFormat('vi-VN').format(num);\r\n    }, [format]);\r\n\r\n    const parseValue = React.useCallback((str: string): number => {\r\n      if (!str) return 0;\r\n      const parsed = parseInt(str.replace(/\\./g, ''), 10);\r\n      return isNaN(parsed) ? 0 : parsed;\r\n    }, []);\r\n\r\n    const [displayValue, setDisplayValue] = React.useState(formatValue(value));\r\n    const inputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n    React.useImperativeHandle(ref, () => inputRef.current!);\r\n\r\n    React.useEffect(() => {\r\n      if (document.activeElement !== inputRef.current) {\r\n        setDisplayValue(formatValue(value));\r\n      }\r\n    }, [value, formatValue]);\r\n    \r\n    const handleStep = (direction: 'up' | 'down') => {\r\n      let currentValue = value ?? 0;\r\n      if (min !== undefined && currentValue < min) {\r\n        currentValue = min;\r\n      }\r\n      let newValue = currentValue + (direction === 'up' ? step : -step);\r\n\r\n      const stepDecimalPlaces = (String(step).split('.')[1] || '').length;\r\n      newValue = parseFloat(newValue.toFixed(stepDecimalPlaces));\r\n\r\n      if (min !== undefined) newValue = Math.max(min, newValue);\r\n      if (max !== undefined) newValue = Math.min(max, newValue);\r\n      \r\n      onChange?.(newValue);\r\n    };\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const rawValue = e.target.value;\r\n        \r\n        // Không cho phép nhập dấu trừ nếu min >= 0\r\n        if (min !== undefined && min >= 0 && rawValue.includes('-')) {\r\n            return;\r\n        }\r\n        \r\n        const num = parseValue(rawValue);\r\n        \r\n        // Kiểm tra giới hạn max ngay khi nhập\r\n        if (max !== undefined && num > max) {\r\n            return;\r\n        }\r\n\r\n        setDisplayValue(rawValue);\r\n        onChange?.(num);\r\n    }\r\n    \r\n    const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\r\n        let currentNum = value ?? 0;\r\n        if (min !== undefined) currentNum = Math.max(min, currentNum);\r\n        if (max !== undefined) currentNum = Math.min(max, currentNum);\r\n        \r\n        if (currentNum !== value) {\r\n            onChange?.(currentNum);\r\n        }\r\n\r\n        setDisplayValue(formatValue(currentNum));\r\n        props.onBlur?.(e);\r\n    }\r\n\r\n    const inputType = format ? \"text\" : \"number\";\r\n\r\n    return (\r\n      <div className={cn(\"relative\", className)}>\r\n        <Input\r\n          type={inputType}\r\n          inputMode={format ? \"text\" : \"numeric\"}\r\n          ref={inputRef}\r\n          value={displayValue}\r\n          onChange={handleChange}\r\n          onBlur={handleBlur}\r\n          step={format ? undefined : step}\r\n          min={format ? undefined : min}\r\n          max={format ? undefined : max}\r\n          className={cn(\r\n            \"pr-8\",\r\n            !format && \"[-moz-appearance:textfield] [&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none\"\r\n          )}\r\n          {...props}\r\n        />\r\n        <div className=\"absolute right-0 top-0 h-full flex flex-col items-center justify-center border-l\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"ghost\"\r\n            className=\"h-1/2 px-2 py-0 rounded-none rounded-tr-md flex items-center justify-center\"\r\n            onClick={() => handleStep('up')}\r\n            disabled={props.disabled || (max !== undefined && value !== undefined && value >= max)}\r\n            tabIndex={-1}\r\n          >\r\n            <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"ghost\"\r\n            className=\"h-1/2 px-2 py-0 rounded-none rounded-br-md flex items-center justify-center\"\r\n            onClick={() => handleStep('down')}\r\n            disabled={props.disabled || (min !== undefined && value !== undefined && value <= min)}\r\n            tabIndex={-1}\r\n          >\r\n            <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n);\r\nNumberInput.displayName = 'NumberInput';\r\n\r\nexport { NumberInput };\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4264, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/tax-content.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { asBusinessId, type SystemId } from \"@/lib/id-types\";\r\nimport { useTaxStore } from \"../taxes/store\";\r\nimport type { Tax } from \"../taxes/types\";\r\nimport { TaxTable } from \"./tax-table\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogDescription } from \"../../../components/ui/dialog\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"../../../components/ui/alert-dialog\";\r\nimport { Input } from \"../../../components/ui/input\";\r\nimport { Switch } from \"../../../components/ui/switch\";\r\nimport { Textarea } from \"../../../components/ui/textarea\";\r\nimport { toast } from 'sonner';\r\nimport { SettingsActionButton } from \"../../../components/settings/SettingsActionButton\";\r\nimport { PlusCircle, Percent } from \"lucide-react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from \"../../../components/ui/form\";\r\nimport { NumberInput } from \"../../../components/ui/number-input\";\r\n\r\ninterface TaxContentProps {\r\n    isActive: boolean;\r\n    onRegisterActions: (actions: React.ReactNode[]) => void;\r\n}\r\n\r\ntype TaxFormValues = {\r\n    id: string;\r\n    name: string;\r\n    rate: number;\r\n    isDefaultSale: boolean;\r\n    isDefaultPurchase: boolean;\r\n    description?: string;\r\n};\r\n\r\nexport function TaxContent({ isActive, onRegisterActions }: TaxContentProps) {\r\n    const { data, add, update, remove, setDefaultSale, setDefaultPurchase } = useTaxStore();\r\n\r\n    const [isFormOpen, setIsFormOpen] = React.useState(false);\r\n    const [editingTax, setEditingTax] = React.useState<Tax | null>(null);\r\n    const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n    const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n\r\n    const form = useForm<TaxFormValues>({\r\n        defaultValues: {\r\n            id: '',\r\n            name: '',\r\n            rate: 0,\r\n            isDefaultSale: false,\r\n            isDefaultPurchase: false,\r\n            description: '',\r\n        },\r\n    });\r\n\r\n    // Register actions when tab is active\r\n    React.useEffect(() => {\r\n        if (isActive) {\r\n            onRegisterActions([\r\n                <SettingsActionButton key=\"add\" onClick={() => handleAddNew()}>\r\n                    <PlusCircle className=\"h-4 w-4\" />\r\n                    Thêm thuế\r\n                </SettingsActionButton>\r\n            ]);\r\n        }\r\n    }, [isActive, onRegisterActions]);\r\n\r\n    const handleAddNew = () => {\r\n        setEditingTax(null);\r\n        form.reset({\r\n            id: '',\r\n            name: '',\r\n            rate: 0,\r\n            isDefaultSale: false,\r\n            isDefaultPurchase: false,\r\n            description: '',\r\n        });\r\n        setIsFormOpen(true);\r\n    };\r\n    \r\n    const handleEdit = React.useCallback((tax: Tax) => {\r\n        setEditingTax(tax);\r\n        form.reset({\r\n            id: tax.id,\r\n            name: tax.name,\r\n            rate: tax.rate,\r\n            isDefaultSale: tax.isDefaultSale,\r\n            isDefaultPurchase: tax.isDefaultPurchase,\r\n            description: tax.description || '',\r\n        });\r\n        setIsFormOpen(true);\r\n    }, [form]);\r\n    \r\n    const handleDeleteRequest = React.useCallback((systemId: SystemId) => {\r\n        setIdToDelete(systemId);\r\n        setIsAlertOpen(true);\r\n    }, []);\r\n    \r\n    const confirmDelete = () => {\r\n        if (idToDelete) {\r\n            const tax = data.find(t => t.systemId === idToDelete);\r\n            remove(idToDelete);\r\n            toast.success(`Đã xóa thuế \"${tax?.name}\"`);\r\n        }\r\n        setIsAlertOpen(false);\r\n        setIsFormOpen(false);\r\n        setIdToDelete(null);\r\n    };\r\n\r\n    const handleFormSubmit = (values: TaxFormValues) => {\r\n        if (editingTax) {\r\n            update(editingTax.systemId, {\r\n                id: asBusinessId(values.id.trim().toUpperCase()),\r\n                name: values.name.trim(),\r\n                rate: values.rate,\r\n                isDefaultSale: values.isDefaultSale,\r\n                isDefaultPurchase: values.isDefaultPurchase,\r\n                description: values.description?.trim() || undefined,\r\n            });\r\n            toast.success(`Đã cập nhật thuế \"${values.name}\"`);\r\n        } else {\r\n            add({\r\n                id: asBusinessId(values.id.trim().toUpperCase()),\r\n                name: values.name.trim(),\r\n                rate: values.rate,\r\n                isDefaultSale: values.isDefaultSale,\r\n                isDefaultPurchase: values.isDefaultPurchase,\r\n                description: values.description?.trim() || undefined,\r\n            });\r\n            toast.success(`Đã thêm thuế \"${values.name}\"`);\r\n        }\r\n        setIsFormOpen(false);\r\n    };\r\n    \r\n    const handleSetDefaultSale = React.useCallback((systemId: SystemId) => {\r\n        const tax = data.find(t => t.systemId === systemId);\r\n        setDefaultSale(systemId);\r\n        if (tax) {\r\n            toast.success(`Đã đặt \"${tax.name}\" làm thuế mặc định bán hàng`);\r\n        }\r\n    }, [data, setDefaultSale]);\r\n\r\n    const handleSetDefaultPurchase = React.useCallback((systemId: SystemId) => {\r\n        const tax = data.find(t => t.systemId === systemId);\r\n        setDefaultPurchase(systemId);\r\n        if (tax) {\r\n            toast.success(`Đã đặt \"${tax.name}\" làm thuế mặc định nhập hàng`);\r\n        }\r\n    }, [data, setDefaultPurchase]);\r\n\r\n    return (\r\n        <>\r\n            <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Tất cả các loại thuế trong hệ thống (áp dụng cho cả nhập hàng và bán hàng)\r\n            </p>\r\n            <TaxTable\r\n                data={data}\r\n                allData={data}\r\n                onEdit={handleEdit}\r\n                onDelete={handleDeleteRequest}\r\n                onSetDefaultSale={handleSetDefaultSale}\r\n                onSetDefaultPurchase={handleSetDefaultPurchase}\r\n            />\r\n\r\n            <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>{editingTax ? 'Cập nhật thuế' : 'Thêm thuế mới'}</DialogTitle>\r\n                        <DialogDescription>\r\n                            {editingTax ? 'Chỉnh sửa thông tin thuế' : 'Tạo loại thuế mới cho hệ thống'}\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    \r\n                    <Form {...form}>\r\n                        <form id=\"tax-form\" onSubmit={form.handleSubmit(handleFormSubmit)} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"id\"\r\n                                    rules={{ required: 'Mã thuế là bắt buộc' }}\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Mã thuế</FormLabel>\r\n                                            <FormControl>\r\n                                                <Input placeholder=\"VD: VAT10\" {...field} />\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                                <FormField\r\n                                    control={form.control}\r\n                                    name=\"rate\"\r\n                                    rules={{ required: 'Thuế suất là bắt buộc', min: { value: 0, message: 'Thuế suất phải >= 0' } }}\r\n                                    render={({ field }) => (\r\n                                        <FormItem>\r\n                                            <FormLabel>Thuế suất (%)</FormLabel>\r\n                                            <FormControl>\r\n                                                <div className=\"relative\">\r\n                                                    <NumberInput \r\n                                                        value={field.value} \r\n                                                        onChange={field.onChange}\r\n                                                        min={0}\r\n                                                        max={100}\r\n                                                        className=\"pr-8\"\r\n                                                    />\r\n                                                    <Percent className=\"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                                                </div>\r\n                                            </FormControl>\r\n                                            <FormMessage />\r\n                                        </FormItem>\r\n                                    )}\r\n                                />\r\n                            </div>\r\n                            \r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"name\"\r\n                                rules={{ required: 'Tên thuế là bắt buộc' }}\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Tên thuế</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"VD: VAT 10%\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"description\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Mô tả</FormLabel>\r\n                                        <FormControl>\r\n                                            <Textarea \r\n                                                placeholder=\"Mô tả về loại thuế này...\" \r\n                                                className=\"resize-none\"\r\n                                                {...field} \r\n                                            />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"isDefaultSale\"\r\n                                render={({ field }) => (\r\n                                    <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-3\">\r\n                                        <div className=\"space-y-0.5\">\r\n                                            <FormLabel>Mặc định bán hàng</FormLabel>\r\n                                            <FormDescription>\r\n                                                Thuế này sẽ được tự động áp dụng cho đơn bán hàng mới\r\n                                            </FormDescription>\r\n                                        </div>\r\n                                        <FormControl>\r\n                                            <Switch\r\n                                                checked={field.value}\r\n                                                onCheckedChange={field.onChange}\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"isDefaultPurchase\"\r\n                                render={({ field }) => (\r\n                                    <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-3\">\r\n                                        <div className=\"space-y-0.5\">\r\n                                            <FormLabel>Mặc định nhập hàng</FormLabel>\r\n                                            <FormDescription>\r\n                                                Thuế này sẽ được tự động áp dụng cho đơn nhập hàng mới\r\n                                            </FormDescription>\r\n                                        </div>\r\n                                        <FormControl>\r\n                                            <Switch\r\n                                                checked={field.value}\r\n                                                onCheckedChange={field.onChange}\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </form>\r\n                    </Form>\r\n\r\n                    <DialogFooter className=\"flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2\">\r\n                        {editingTax && (\r\n                            <Button \r\n                                type=\"button\" \r\n                                variant=\"destructive\" \r\n                                onClick={() => handleDeleteRequest(editingTax.systemId)}\r\n                                className=\"sm:mr-auto h-9\"\r\n                            >\r\n                                Xóa\r\n                            </Button>\r\n                        )}\r\n                        <div className=\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\">\r\n                            <Button type=\"button\" variant=\"outline\" onClick={() => setIsFormOpen(false)} className=\"h-9\">\r\n                                Thoát\r\n                            </Button>\r\n                            <Button type=\"submit\" form=\"tax-form\" className=\"h-9\">\r\n                                Xác nhận\r\n                            </Button>\r\n                        </div>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Bạn có chắc chắn muốn xóa?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Hành động này không thể được hoàn tác. Thuế đã xóa sẽ không còn áp dụng được cho các đơn hàng.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel className=\"h-9\">Hủy</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={confirmDelete} className=\"h-9\">Xóa</AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4976, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/page.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useSettingsPageHeader } from \"../use-settings-page-header\";\r\nimport { useTabActionRegistry } from \"../use-tab-action-registry\";\r\nimport { SettingsVerticalTabs } from \"../../../components/settings/SettingsVerticalTabs\";\r\nimport { TabsContent } from \"../../../components/ui/tabs\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"../../../components/ui/card\";\r\nimport { PricingPolicyContent } from \"./pricing-policy-content\";\r\nimport { TaxContent } from \"./tax-content\";\r\n\r\nexport function PricingSettingsPage() {\r\n    const [activeTab, setActiveTab] = React.useState('pricing-policy');\r\n    const { headerActions, registerActions } = useTabActionRegistry(activeTab);\r\n    \r\n    const registerPricingActions = React.useMemo(() => registerActions('pricing-policy'), [registerActions]);\r\n    const registerTaxActions = React.useMemo(() => registerActions('tax'), [registerActions]);\r\n\r\n    useSettingsPageHeader({\r\n        title: 'Giá & Thuế',\r\n        subtitle: 'Quản lý chính sách giá và các loại thuế',\r\n        actions: headerActions,\r\n    });\r\n\r\n    const tabs = React.useMemo(\r\n        () => [\r\n            { value: 'pricing-policy', label: 'Chính sách giá' },\r\n            { value: 'tax', label: 'Thuế' },\r\n        ],\r\n        [],\r\n    );\r\n\r\n    return (\r\n        <SettingsVerticalTabs value={activeTab} onValueChange={setActiveTab} tabs={tabs}>\r\n            <TabsContent value=\"pricing-policy\" className=\"mt-0\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Chính sách giá</CardTitle>\r\n                        <CardDescription>\r\n                            Quản lý các loại giá áp dụng cho việc bán hàng và nhập hàng\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <PricingPolicyContent\r\n                            isActive={activeTab === 'pricing-policy'}\r\n                            onRegisterActions={registerPricingActions}\r\n                        />\r\n                    </CardContent>\r\n                </Card>\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"tax\" className=\"mt-0\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Thuế</CardTitle>\r\n                        <CardDescription>\r\n                            Quản lý các loại thuế áp dụng cho nhập hàng và bán hàng (VAT, thuế GTGT...)\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <TaxContent\r\n                            isActive={activeTab === 'tax'}\r\n                            onRegisterActions={registerTaxActions}\r\n                        />\r\n                    </CardContent>\r\n                </Card>\r\n            </TabsContent>\r\n        </SettingsVerticalTabs>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEO,SAAS;;IACZ,MAAM,CAAC,WAAW,aAAa,GAAG,yKAAc,CAAC;IACjD,MAAM,EAAE,aAAa,EAAE,eAAe,EAAE,GAAG,IAAA,mLAAoB,EAAC;IAEhE,MAAM,yBAAyB,wKAAa;+DAAC,IAAM,gBAAgB;8DAAmB;QAAC;KAAgB;IACvG,MAAM,qBAAqB,wKAAa;2DAAC,IAAM,gBAAgB;0DAAQ;QAAC;KAAgB;IAExF,IAAA,sLAAqB,EAAC;QAClB,OAAO;QACP,UAAU;QACV,SAAS;IACb;IAEA,MAAM,OAAO,wKAAa;6CACtB,IAAM;gBACF;oBAAE,OAAO;oBAAkB,OAAO;gBAAiB;gBACnD;oBAAE,OAAO;oBAAO,OAAO;gBAAO;aACjC;4CACD,EAAE;IAGN,qBACI,6LAAC,0KAAoB;QAAC,OAAO;QAAW,eAAe;QAAc,MAAM;;0BACvE,6LAAC,2IAAW;gBAAC,OAAM;gBAAiB,WAAU;0BAC1C,cAAA,6LAAC,oIAAI;;sCACD,6LAAC,0IAAU;;8CACP,6LAAC,yIAAS;8CAAC;;;;;;8CACX,6LAAC,+IAAe;8CAAC;;;;;;;;;;;;sCAIrB,6LAAC,2IAAW;sCACR,cAAA,6LAAC,2LAAoB;gCACjB,UAAU,cAAc;gCACxB,mBAAmB;;;;;;;;;;;;;;;;;;;;;;0BAMnC,6LAAC,2IAAW;gBAAC,OAAM;gBAAM,WAAU;0BAC/B,cAAA,6LAAC,oIAAI;;sCACD,6LAAC,0IAAU;;8CACP,6LAAC,yIAAS;8CAAC;;;;;;8CACX,6LAAC,+IAAe;8CAAC;;;;;;;;;;;;sCAIrB,6LAAC,2IAAW;sCACR,cAAA,6LAAC,mKAAU;gCACP,UAAU,cAAc;gCACxB,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/C;GA1DgB;;QAE+B,mLAAoB;QAK/D,sLAAqB;;;KAPT"}},
    {"offset": {"line": 5162, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/app/%28authenticated%29/settings/pricing/page.tsx"],"sourcesContent":["'use client';\r\nimport { PricingSettingsPage } from '@/features/settings/pricing/page';\r\nexport default PricingSettingsPage;\r\n"],"names":[],"mappings":";;;;AACA;AADA;;uCAEe,kKAAmB"}}]
}