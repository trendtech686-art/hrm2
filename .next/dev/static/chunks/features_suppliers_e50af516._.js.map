{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/suppliers/api/suppliers-api.ts"],"sourcesContent":["/**\r\n * Suppliers API - Isolated API functions\r\n * \r\n * ⚠️ IMPORTANT: This file should ONLY contain:\r\n * - Fetch functions\r\n * - Type imports from ../types\r\n * - NO store imports\r\n * - NO cross-feature imports\r\n */\r\n\r\nimport type { Supplier } from '../types';\r\n\r\nconst API_BASE = '/api/suppliers';\r\n\r\nexport interface SuppliersParams {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  status?: string;\r\n  hasDebt?: boolean;\r\n  sortBy?: string;\r\n  sortOrder?: 'asc' | 'desc';\r\n  includeDeleted?: boolean;\r\n}\r\n\r\nexport interface PaginatedResponse<T> {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface CreateSupplierInput {\r\n  name: string;\r\n  taxCode?: string;\r\n  phone?: string;\r\n  email?: string;\r\n  address?: string;\r\n  website?: string;\r\n  accountManager?: string;\r\n  bankAccount?: string;\r\n  bankName?: string;\r\n  contactPerson?: string;\r\n  notes?: string;\r\n}\r\n\r\nexport interface UpdateSupplierInput extends Partial<CreateSupplierInput> {\r\n  systemId: string;\r\n  isDeleted?: boolean;\r\n  deletedAt?: string | Date | null;\r\n  status?: string;\r\n}\r\n\r\n/**\r\n * Fetch paginated suppliers list\r\n */\r\nexport async function fetchSuppliers(params: SuppliersParams = {}): Promise<PaginatedResponse<Supplier>> {\r\n  const { page = 1, limit = 50, ...rest } = params;\r\n  \r\n  const searchParams = new URLSearchParams({\r\n    page: String(page),\r\n    limit: String(limit),\r\n  });\r\n  \r\n  Object.entries(rest).forEach(([key, value]) => {\r\n    if (value != null && value !== '') {\r\n      searchParams.set(key, String(value));\r\n    }\r\n  });\r\n  \r\n  const res = await fetch(`${API_BASE}?${searchParams}`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to fetch suppliers: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Fetch single supplier by ID\r\n */\r\nexport async function fetchSupplier(id: string): Promise<Supplier> {\r\n  const res = await fetch(`${API_BASE}/${id}`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to fetch supplier ${id}: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Create new supplier\r\n */\r\nexport async function createSupplier(data: CreateSupplierInput): Promise<Supplier> {\r\n  const res = await fetch(API_BASE, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to create supplier: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Update existing supplier\r\n */\r\nexport async function updateSupplier({ systemId, ...data }: UpdateSupplierInput): Promise<Supplier> {\r\n  const res = await fetch(`${API_BASE}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to update supplier: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Delete supplier (soft delete)\r\n */\r\nexport async function deleteSupplier(id: string): Promise<void> {\r\n  const res = await fetch(`${API_BASE}/${id}`, {\r\n    method: 'DELETE',\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to delete supplier: ${res.statusText}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Search suppliers for autocomplete\r\n */\r\nexport async function searchSuppliers(query: string, limit = 20): Promise<Supplier[]> {\r\n  const res = await fetch(`${API_BASE}?search=${encodeURIComponent(query)}&limit=${limit}`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to search suppliers: ${res.statusText}`);\r\n  }\r\n  \r\n  const json = await res.json();\r\n  return json.data || [];\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;;;;;;;;;;;AAID,MAAM,WAAW;AA+CV,eAAe,eAAe,SAA0B,CAAC,CAAC;IAC/D,MAAM,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,EAAE,GAAG,MAAM,GAAG;IAE1C,MAAM,eAAe,IAAI,gBAAgB;QACvC,MAAM,OAAO;QACb,OAAO,OAAO;IAChB;IAEA,OAAO,OAAO,CAAC,MAAM,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACxC,IAAI,SAAS,QAAQ,UAAU,IAAI;YACjC,aAAa,GAAG,CAAC,KAAK,OAAO;QAC/B;IACF;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,cAAc,EAAE;QACrD,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,IAAI,UAAU,EAAE;IAChE;IAEA,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,cAAc,EAAU;IAC5C,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,IAAI,EAAE;QAC3C,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,GAAG,EAAE,EAAE,IAAI,UAAU,EAAE;IACrE;IAEA,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,eAAe,IAAyB;IAC5D,MAAM,MAAM,MAAM,MAAM,UAAU;QAChC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC9C,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI,CAAC,2BAA2B,EAAE,IAAI,UAAU,EAAE;IACjF;IAEA,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,eAAe,EAAE,QAAQ,EAAE,GAAG,MAA2B;IAC7E,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC9C,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI,CAAC,2BAA2B,EAAE,IAAI,UAAU,EAAE;IACjF;IAEA,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe,eAAe,EAAU;IAC7C,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,IAAI,EAAE;QAC3C,QAAQ;QACR,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC9C,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI,CAAC,2BAA2B,EAAE,IAAI,UAAU,EAAE;IACjF;AACF;AAKO,eAAe,gBAAgB,KAAa,EAAE,QAAQ,EAAE;IAC7D,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,QAAQ,EAAE,mBAAmB,OAAO,OAAO,EAAE,OAAO,EAAE;QACxF,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,IAAI,UAAU,EAAE;IACjE;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,KAAK,IAAI,IAAI,EAAE;AACxB"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/suppliers/hooks/use-suppliers.ts"],"sourcesContent":["/**\r\n * useSuppliers - React Query hooks for suppliers\r\n * \r\n * ⚠️ IMPORTANT: Direct import pattern\r\n * - Import: import { useSuppliers } from '@/features/suppliers/hooks/use-suppliers'\r\n * - NEVER import from '@/features/suppliers/store'\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\r\nimport {\r\n  fetchSuppliers,\r\n  fetchSupplier,\r\n  createSupplier,\r\n  updateSupplier,\r\n  deleteSupplier,\r\n  searchSuppliers,\r\n  type SuppliersParams,\r\n  type CreateSupplierInput,\r\n  type UpdateSupplierInput,\r\n} from '../api/suppliers-api';\r\n\r\n// Query keys\r\nexport const supplierKeys = {\r\n  all: ['suppliers'] as const,\r\n  lists: () => [...supplierKeys.all, 'list'] as const,\r\n  list: (params: SuppliersParams) => [...supplierKeys.lists(), params] as const,\r\n  details: () => [...supplierKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...supplierKeys.details(), id] as const,\r\n  search: (query: string) => [...supplierKeys.all, 'search', query] as const,\r\n};\r\n\r\nexport function useSuppliers(params: SuppliersParams = {}) {\r\n  return useQuery({\r\n    queryKey: supplierKeys.list(params),\r\n    queryFn: () => fetchSuppliers(params),\r\n    staleTime: 60_000,\r\n    gcTime: 10 * 60 * 1000,\r\n    placeholderData: keepPreviousData,\r\n  });\r\n}\r\n\r\nexport function useSupplier(id: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: supplierKeys.detail(id!),\r\n    queryFn: () => fetchSupplier(id!),\r\n    enabled: !!id,\r\n    staleTime: 60_000,\r\n  });\r\n}\r\n\r\nexport function useSupplierSearch(query: string, limit = 20) {\r\n  return useQuery({\r\n    queryKey: supplierKeys.search(query),\r\n    queryFn: () => searchSuppliers(query, limit),\r\n    enabled: query.length >= 2,\r\n    staleTime: 30_000,\r\n  });\r\n}\r\n\r\ninterface UseSupplierMutationsOptions {\r\n  onCreateSuccess?: (supplier: unknown) => void;\r\n  onUpdateSuccess?: (supplier: unknown) => void;\r\n  onDeleteSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useSupplierMutations(options: UseSupplierMutationsOptions = {}) {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const create = useMutation({\r\n    mutationFn: createSupplier,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: supplierKeys.lists() });\r\n      options.onCreateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: updateSupplier,\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: supplierKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: supplierKeys.lists() });\r\n      options.onUpdateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: deleteSupplier,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: supplierKeys.all });\r\n      options.onDeleteSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  return {\r\n    create,\r\n    update,\r\n    remove,\r\n    isCreating: create.isPending,\r\n    isUpdating: update.isPending,\r\n    isDeleting: remove.isPending,\r\n  };\r\n}\r\n\r\nexport function useActiveSuppliers(params: Omit<SuppliersParams, 'status'> = {}) {\r\n  return useSuppliers({ ...params, status: 'Đang Giao Dịch' });\r\n}\r\n\r\n// Re-export from use-all-suppliers for backward compatibility\r\nexport { useAllSuppliers, useSupplierOptions, useSupplierFinder } from './use-all-suppliers';\r\nexport { useActiveSuppliers as useActiveSuppliersFromAll } from './use-all-suppliers';\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;CAMC,GAED;AAAA;AAAA;AAAA;AACA;AAsGA,8DAA8D;AAC9D;;;;AA1FO,MAAM,eAAe;IAC1B,KAAK;QAAC;KAAY;IAClB,OAAO,IAAM;eAAI,aAAa,GAAG;YAAE;SAAO;IAC1C,MAAM,CAAC,SAA4B;eAAI,aAAa,KAAK;YAAI;SAAO;IACpE,SAAS,IAAM;eAAI,aAAa,GAAG;YAAE;SAAS;IAC9C,QAAQ,CAAC,KAAe;eAAI,aAAa,OAAO;YAAI;SAAG;IACvD,QAAQ,CAAC,QAAkB;eAAI,aAAa,GAAG;YAAE;YAAU;SAAM;AACnE;AAEO,SAAS,aAAa,SAA0B,CAAC,CAAC;;IACvD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,aAAa,IAAI,CAAC;QAC5B,OAAO;qCAAE,IAAM,IAAA,qKAAc,EAAC;;QAC9B,WAAW;QACX,QAAQ,KAAK,KAAK;QAClB,iBAAiB,8LAAgB;IACnC;AACF;GARgB;;QACP,0LAAQ;;;AASV,SAAS,YAAY,EAA6B;;IACvD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,aAAa,MAAM,CAAC;QAC9B,OAAO;oCAAE,IAAM,IAAA,oKAAa,EAAC;;QAC7B,SAAS,CAAC,CAAC;QACX,WAAW;IACb;AACF;IAPgB;;QACP,0LAAQ;;;AAQV,SAAS,kBAAkB,KAAa,EAAE,QAAQ,EAAE;;IACzD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,aAAa,MAAM,CAAC;QAC9B,OAAO;0CAAE,IAAM,IAAA,sKAAe,EAAC,OAAO;;QACtC,SAAS,MAAM,MAAM,IAAI;QACzB,WAAW;IACb;AACF;IAPgB;;QACP,0LAAQ;;;AAeV,SAAS,qBAAqB,UAAuC,CAAC,CAAC;;IAC5E,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,qKAAc;QAC1B,SAAS;wDAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,aAAa,KAAK;gBAAG;gBAC/D,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,qKAAc;QAC1B,SAAS;wDAAE,CAAC,MAAM;gBAChB,YAAY,iBAAiB,CAAC;oBAAE,UAAU,aAAa,MAAM,CAAC,UAAU,QAAQ;gBAAE;gBAClF,YAAY,iBAAiB,CAAC;oBAAE,UAAU,aAAa,KAAK;gBAAG;gBAC/D,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,qKAAc;QAC1B,SAAS;wDAAE;gBACT,YAAY,iBAAiB,CAAC;oBAAE,UAAU,aAAa,GAAG;gBAAC;gBAC3D,QAAQ,eAAe;YACzB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QACA;QACA;QACA,YAAY,OAAO,SAAS;QAC5B,YAAY,OAAO,SAAS;QAC5B,YAAY,OAAO,SAAS;IAC9B;AACF;IAvCgB;;QACM,2MAAc;QAEnB,gMAAW;QASX,gMAAW;QAUX,gMAAW;;;AAmBrB,SAAS,mBAAmB,SAA0C,CAAC,CAAC;;IAC7E,OAAO,aAAa;QAAE,GAAG,MAAM;QAAE,QAAQ;IAAiB;AAC5D;IAFgB;;QACP"}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/suppliers/hooks/use-all-suppliers.ts"],"sourcesContent":["/**\r\n * useAllSuppliers - Convenience hook for components needing all suppliers as flat array\r\n * \r\n * Replaces legacy useSupplierStore().data pattern\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useSuppliers } from './use-suppliers';\r\nimport type { Supplier } from '../types';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\n/**\r\n * Returns all suppliers as a flat array\r\n * Compatible with legacy store pattern: { data: suppliers }\r\n */\r\nexport function useAllSuppliers() {\r\n  const query = useSuppliers({ limit: 500 });\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns only active suppliers\r\n */\r\nexport function useActiveSuppliers() {\r\n  const { data, isLoading, isError, error } = useAllSuppliers();\r\n  \r\n  const activeSuppliers = React.useMemo(\r\n    () => data.filter(s => s.status === 'Đang Giao Dịch' && !s.isDeleted),\r\n    [data]\r\n  );\r\n  \r\n  return { data: activeSuppliers, isLoading, isError, error };\r\n}\r\n\r\n/**\r\n * Returns suppliers formatted as options for Select/Combobox\r\n */\r\nexport function useSupplierOptions() {\r\n  const { data, isLoading } = useActiveSuppliers();\r\n  \r\n  const options = React.useMemo(\r\n    () => data.map(s => ({\r\n      value: s.systemId,\r\n      label: s.name,\r\n    })),\r\n    [data]\r\n  );\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Helper hook to find a supplier by ID from cached data\r\n * Replaces legacy findById() method\r\n */\r\nexport function useSupplierFinder() {\r\n  const { data } = useAllSuppliers();\r\n  \r\n  const findById = React.useCallback(\r\n    (systemId: SystemId | string | undefined): Supplier | undefined => {\r\n      if (!systemId) return undefined;\r\n      return data.find(s => s.systemId === systemId);\r\n    },\r\n    [data]\r\n  );\r\n  \r\n  return { findById };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;CAIC,GAED;AACA;;;;AAQO,SAAS;;IACd,MAAM,QAAQ,IAAA,qLAAY,EAAC;QAAE,OAAO;IAAI;IAExC,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GATgB;;QACA,qLAAY;;;AAarB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG;IAE5C,MAAM,kBAAkB,wKAAa;uDACnC,IAAM,KAAK,MAAM;+DAAC,CAAA,IAAK,EAAE,MAAM,KAAK,oBAAoB,CAAC,EAAE,SAAS;;sDACpE;QAAC;KAAK;IAGR,OAAO;QAAE,MAAM;QAAiB;QAAW;QAAS;IAAM;AAC5D;IATgB;;QAC8B;;;AAavC,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,wKAAa;+CAC3B,IAAM,KAAK,GAAG;uDAAC,CAAA,IAAK,CAAC;wBACnB,OAAO,EAAE,QAAQ;wBACjB,OAAO,EAAE,IAAI;oBACf,CAAC;;8CACD;QAAC;KAAK;IAGR,OAAO;QAAE;QAAS;IAAU;AAC9B;IAZgB;;QACc;;;AAiBvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,4KAAiB;mDAChC,CAAC;YACC,IAAI,CAAC,UAAU,OAAO;YACtB,OAAO,KAAK,IAAI;2DAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;kDACA;QAAC;KAAK;IAGR,OAAO;QAAE;IAAS;AACpB;IAZgB;;QACG"}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/suppliers/columns.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport type { Supplier, SupplierStatus } from './types'\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"../../components/ui/dropdown-menu\";\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { MoreHorizontal, RotateCcw, Trash2 } from \"lucide-react\";\r\nimport { Checkbox } from \"../../components/ui/checkbox\"\r\nimport { Badge } from \"../../components/ui/badge\"\r\nimport { formatDateForDisplay } from '@/lib/date-utils';\r\nimport type { ColumnDef } from '../../components/data-table/types';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\nconst statusVariants: Record<SupplierStatus, \"success\" | \"secondary\"> = {\r\n  \"Đang Giao Dịch\": \"success\",\r\n  \"Ngừng Giao Dịch\": \"secondary\",\r\n};\r\n\r\n\r\nexport const getColumns = (\r\n  onDelete: (systemId: SystemId) => void,\r\n  onRestore: (systemId: SystemId) => void,\r\n  onEdit: (supplier: Supplier) => void,\r\n  navigate?: (path: string) => void,\r\n): ColumnDef<Supplier>[] => [\r\n  {\r\n    id: \"select\",\r\n    header: ({ isAllPageRowsSelected, isSomePageRowsSelected, onToggleAll }) => (\r\n       <div className=\"flex items-center justify-center\">\r\n        <Checkbox\r\n          checked={isAllPageRowsSelected ? true : isSomePageRowsSelected ? \"indeterminate\" : false}\r\n          onCheckedChange={(value) => onToggleAll?.(!!value)}\r\n          aria-label=\"Select all\"\r\n        />\r\n      </div>\r\n    ),\r\n    cell: ({ isSelected, onToggleSelect }) => (\r\n       <div className=\"flex items-center justify-center\">\r\n        <Checkbox\r\n          checked={isSelected}\r\n          onCheckedChange={onToggleSelect}\r\n          aria-label=\"Select row\"\r\n        />\r\n      </div>\r\n    ),\r\n    size: 48,\r\n    meta: {\r\n      displayName: \"Select\",\r\n      sticky: \"left\",\r\n    },\r\n  },\r\n  {\r\n    id: \"id\",\r\n    accessorKey: \"id\",\r\n    header: \"Mã NCC\",\r\n    cell: ({ row }) => <div className=\"font-medium\">{row.id}</div>,\r\n    meta: { displayName: \"Mã NCC\" },\r\n    size: 100,\r\n  },\r\n  {\r\n    id: \"name\",\r\n    accessorKey: \"name\",\r\n    header: \"Tên Nhà cung cấp\",\r\n    cell: ({ row }) => row.name,\r\n    meta: { displayName: \"Tên Nhà cung cấp\" },\r\n  },\r\n  {\r\n    id: \"taxCode\",\r\n    accessorKey: \"taxCode\",\r\n    header: \"Mã số thuế\",\r\n    cell: ({ row }) => row.taxCode,\r\n    meta: { displayName: \"Mã số thuế\" },\r\n  },\r\n  {\r\n    id: \"phone\",\r\n    accessorKey: \"phone\",\r\n    header: \"Số điện thoại\",\r\n    cell: ({ row }) => row.phone,\r\n    meta: { displayName: \"Số điện thoại\" },\r\n  },\r\n  {\r\n    id: \"email\",\r\n    accessorKey: \"email\",\r\n    header: \"Email\",\r\n    cell: ({ row }) => row.email,\r\n    meta: { displayName: \"Email\" },\r\n  },\r\n    {\r\n    id: \"address\",\r\n    accessorKey: \"address\",\r\n    header: \"Địa chỉ\",\r\n    cell: ({ row }) => row.address,\r\n    meta: { displayName: \"Địa chỉ\" },\r\n  },\r\n  {\r\n    id: \"website\",\r\n    accessorKey: \"website\",\r\n    header: \"Website\",\r\n    cell: ({ row }) => row.website || \"-\",\r\n    meta: { displayName: \"Website\" },\r\n  },\r\n  {\r\n    id: \"contactPerson\",\r\n    accessorKey: \"contactPerson\",\r\n    header: \"Người liên hệ\",\r\n    cell: ({ row }) => row.contactPerson || \"-\",\r\n    meta: { displayName: \"Người liên hệ\" },\r\n  },\r\n  {\r\n    id: \"accountManager\",\r\n    accessorKey: \"accountManager\",\r\n    header: \"Người phụ trách\",\r\n    cell: ({ row }) => row.accountManager,\r\n    meta: { displayName: \"Người phụ trách\" },\r\n  },\r\n  {\r\n    id: \"currentDebt\",\r\n    accessorKey: \"currentDebt\",\r\n    header: \"Công nợ\",\r\n    cell: ({ row }) => {\r\n      if (!row.currentDebt) return \"0 ₫\";\r\n      return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(row.currentDebt);\r\n    },\r\n    meta: { displayName: \"Công nợ\" },\r\n  },\r\n  {\r\n    id: \"bankAccount\",\r\n    accessorKey: \"bankAccount\",\r\n    header: \"Số tài khoản\",\r\n    cell: ({ row }) => row.bankAccount || \"-\",\r\n    meta: { displayName: \"Số tài khoản\" },\r\n  },\r\n  {\r\n    id: \"bankName\",\r\n    accessorKey: \"bankName\",\r\n    header: \"Ngân hàng\",\r\n    cell: ({ row }) => row.bankName || \"-\",\r\n    meta: { displayName: \"Ngân hàng\" },\r\n  },\r\n  {\r\n    id: \"notes\",\r\n    accessorKey: \"notes\",\r\n    header: \"Ghi chú\",\r\n    cell: ({ row }) => row.notes || \"-\",\r\n    meta: { displayName: \"Ghi chú\" },\r\n  },\r\n  {\r\n    id: \"status\",\r\n    accessorKey: \"status\",\r\n    header: \"Trạng thái\",\r\n    cell: ({ row }) => {\r\n        const variant = statusVariants[row.status];\r\n        return <Badge variant={variant as any}>{row.status}</Badge>\r\n    },\r\n    meta: { displayName: \"Trạng thái\" },\r\n  },\r\n  {\r\n    id: \"createdAt\",\r\n    accessorKey: \"createdAt\",\r\n    header: \"Ngày tạo\",\r\n    cell: ({ row }) => {\r\n      if (!row.createdAt) return \"-\";\r\n      return formatDateForDisplay(row.createdAt);\r\n    },\r\n    meta: { displayName: \"Ngày tạo\" },\r\n  },\r\n  {\r\n    id: \"updatedAt\",\r\n    accessorKey: \"updatedAt\",\r\n    header: \"Cập nhật\",\r\n    cell: ({ row }) => {\r\n      if (!row.updatedAt) return \"-\";\r\n      return formatDateForDisplay(row.updatedAt);\r\n    },\r\n    meta: { displayName: \"Cập nhật\" },\r\n  },\r\n  {\r\n    id: \"createdBy\",\r\n    accessorKey: \"createdBy\",\r\n    header: \"Người tạo\",\r\n    cell: ({ row }) => row.createdBy || \"-\",\r\n    meta: { displayName: \"Người tạo\" },\r\n  },\r\n   {\r\n    id: \"actions\",\r\n    header: () => <div className=\"text-center\">Hành động</div>,\r\n    cell: ({ row }) => {\r\n      // ✅ Show restore button for deleted items\r\n      if (row.deletedAt) {\r\n        return (\r\n          <div className=\"flex items-center justify-center\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={() => onRestore(row.systemId)}\r\n            >\r\n              <RotateCcw className=\"mr-2 h-4 w-4\" />\r\n              Khôi phục\r\n            </Button>\r\n          </div>\r\n        );\r\n      }\r\n      \r\n      // ✅ Show edit/delete for active items\r\n      return (\r\n        <div className=\"flex items-center justify-center\">\r\n          <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                  <span className=\"sr-only\">Mở menu</span>\r\n                  <MoreHorizontal className=\"h-4 w-4\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent align=\"end\">\r\n                <DropdownMenuItem onSelect={() => onEdit(row)}>\r\n                  Sửa\r\n                </DropdownMenuItem>\r\n                <DropdownMenuItem\r\n                  className=\"text-destructive\"\r\n                  onSelect={() => onDelete(row.systemId)}\r\n                >\r\n                  <Trash2 className=\"mr-2 h-4 w-4\" />\r\n                  Chuyển vào thùng rác\r\n                </DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n        </div>\r\n      );\r\n    },\r\n    meta: {\r\n      displayName: \"Hành động\",\r\n      sticky: \"right\",\r\n    },\r\n    size: 90,\r\n  },\r\n];\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/suppliers/supplier-card.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport type { AppRouterInstance } from 'next/dist/shared/lib/app-router-context.shared-runtime';\r\nimport type { Supplier } from './types';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '../../components/ui/card';\r\nimport { Badge } from '../../components/ui/badge';\r\nimport { Button } from '../../components/ui/button';\r\nimport { MoreHorizontal, Phone, Mail, MapPin, User, Building2, CreditCard, RotateCcw } from 'lucide-react';\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"../../components/ui/dropdown-menu\";\r\nimport { formatDateForDisplay } from '@/lib/date-utils';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\ninterface SupplierCardProps {\r\n  supplier: Supplier;\r\n  onEdit: (supplier: Supplier) => void;\r\n  onDelete: (systemId: SystemId) => void;\r\n  onRestore: (systemId: SystemId) => void;\r\n  router: AppRouterInstance;\r\n}\r\n\r\nexport function SupplierCard({ supplier, onEdit, onDelete, onRestore, router }: SupplierCardProps) {\r\n  const statusVariant = supplier.status === \"Đang Giao Dịch\" ? \"success\" : \"secondary\";\r\n  const isDeleted = !!supplier.deletedAt;\r\n\r\n  const handleCardClick = () => {\r\n    if (!isDeleted) {\r\n      router.push(`/suppliers/${supplier.systemId}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card \r\n      className={isDeleted ? \"opacity-60 bg-muted/50\" : \"hover:shadow-md transition-shadow cursor-pointer\"}\r\n      onClick={handleCardClick}\r\n    >\r\n      <CardHeader>\r\n        <div className=\"flex items-start justify-between gap-2\">\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex items-center gap-2 mb-1\">\r\n              <CardTitle className=\"text-h3 truncate\">{supplier.name}</CardTitle>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <span className=\"text-body-sm text-muted-foreground font-mono\">{supplier.id}</span>\r\n              <Badge variant={statusVariant as any}>{supplier.status}</Badge>\r\n              {isDeleted && <Badge variant=\"destructive\">Đã xóa</Badge>}\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Actions */}\r\n          {isDeleted ? (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onRestore(supplier.systemId);\r\n              }}\r\n            >\r\n              <RotateCcw className=\"h-4 w-4 mr-2\" />\r\n              Khôi phục\r\n            </Button>\r\n          ) : (\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button \r\n                  variant=\"ghost\" \r\n                  size=\"sm\" \r\n                  className=\"h-8 w-8 p-0\"\r\n                  onClick={(e) => e.stopPropagation()}\r\n                >\r\n                  <MoreHorizontal className=\"h-4 w-4\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent align=\"end\">\r\n                <DropdownMenuItem onSelect={(e) => {\r\n                  e.preventDefault();\r\n                  router.push(`/suppliers/${supplier.systemId}`);\r\n                }}>\r\n                  Xem chi tiết\r\n                </DropdownMenuItem>\r\n                <DropdownMenuItem onSelect={(e) => {\r\n                  e.preventDefault();\r\n                  onEdit(supplier);\r\n                }}>\r\n                  Sửa\r\n                </DropdownMenuItem>\r\n                <DropdownMenuItem\r\n                  className=\"text-destructive\"\r\n                  onSelect={(e) => {\r\n                    e.preventDefault();\r\n                    onDelete(supplier.systemId);\r\n                  }}\r\n                >\r\n                  Xóa\r\n                </DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n      \r\n      <CardContent className=\"space-y-3\">\r\n        {/* Contact Info */}\r\n        <div className=\"space-y-2\">\r\n          {supplier.phone && (\r\n            <div className=\"flex items-center gap-2 text-body-sm\">\r\n              <Phone className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\r\n              <span className=\"truncate\">{supplier.phone}</span>\r\n            </div>\r\n          )}\r\n          {supplier.email && (\r\n            <div className=\"flex items-center gap-2 text-body-sm\">\r\n              <Mail className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\r\n              <span className=\"truncate\">{supplier.email}</span>\r\n            </div>\r\n          )}\r\n          {supplier.address && (\r\n            <div className=\"flex items-start gap-2 text-body-sm\">\r\n              <MapPin className=\"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5\" />\r\n              <span className=\"line-clamp-2\">{supplier.address}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Additional Info */}\r\n        <div className=\"grid grid-cols-2 gap-2 pt-2 border-t\">\r\n          {supplier.taxCode && (\r\n            <div className=\"text-body-sm\">\r\n              <span className=\"text-muted-foreground\">MST:</span>\r\n              <div className=\"font-medium\">{supplier.taxCode}</div>\r\n            </div>\r\n          )}\r\n          {supplier.accountManager && (\r\n            <div className=\"text-body-sm\">\r\n              <span className=\"text-muted-foreground flex items-center gap-1\">\r\n                <User className=\"h-3 w-3\" /> Phụ trách:\r\n              </span>\r\n              <div className=\"font-medium truncate\">{supplier.accountManager}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Debt & Bank Info */}\r\n        {(supplier.currentDebt !== undefined || supplier.bankAccount) && (\r\n          <div className=\"grid grid-cols-2 gap-2 pt-2 border-t\">\r\n            {supplier.currentDebt !== undefined && (\r\n              <div className=\"text-body-sm\">\r\n                <span className=\"text-muted-foreground\">Công nợ:</span>\r\n                <div className={`font-medium ${supplier.currentDebt > 0 ? 'text-orange-600' : 'text-green-600'}`}>\r\n                  {new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(supplier.currentDebt)}\r\n                </div>\r\n              </div>\r\n            )}\r\n            {supplier.bankAccount && (\r\n              <div className=\"text-body-sm\">\r\n                <span className=\"text-muted-foreground flex items-center gap-1\">\r\n                  <CreditCard className=\"h-3 w-3\" /> TK:\r\n                </span>\r\n                <div className=\"font-medium font-mono text-body-xs\">{supplier.bankAccount}</div>\r\n                {supplier.bankName && (\r\n                  <div className=\"text-body-xs text-muted-foreground truncate\">{supplier.bankName}</div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Contact Person */}\r\n        {supplier.contactPerson && (\r\n          <div className=\"text-body-sm pt-2 border-t\">\r\n            <span className=\"text-muted-foreground flex items-center gap-1\">\r\n              <User className=\"h-3 w-3\" /> Người liên hệ:\r\n            </span>\r\n            <div className=\"font-medium\">{supplier.contactPerson}</div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes */}\r\n        {supplier.notes && (\r\n          <div className=\"text-body-sm pt-2 border-t\">\r\n            <span className=\"text-muted-foreground\">Ghi chú:</span>\r\n            <div className=\"text-body-xs text-muted-foreground line-clamp-2 mt-1\">{supplier.notes}</div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Audit Info */}\r\n        {supplier.createdAt && (\r\n          <div className=\"text-body-xs text-muted-foreground pt-2 border-t\">\r\n            Tạo: {formatDateForDisplay(supplier.createdAt)}\r\n            {supplier.updatedAt && supplier.updatedAt !== supplier.createdAt && (\r\n              <> • Cập nhật: {formatDateForDisplay(supplier.updatedAt)}</>\r\n            )}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1327, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/suppliers/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from \"react\"\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAllSuppliers } from \"./hooks/use-all-suppliers\"\r\nimport { useSupplierMutations } from \"./hooks/use-suppliers\"\r\nimport { getColumns } from \"./columns\"\r\nimport { ResponsiveDataTable } from \"../../components/data-table/responsive-data-table\"\r\nimport { PageToolbar } from \"../../components/layout/page-toolbar\"\r\nimport { PageFilters } from \"../../components/layout/page-filters\"\r\nimport {\r\n  Card,\r\n  CardContent,\r\n} from \"../../components/ui/card\"\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"../../components/ui/alert-dialog\"\r\nimport type { Supplier } from \"./types\"\r\nimport { Button } from \"../../components/ui/button\"\r\nimport { PlusCircle, Trash2, FileSpreadsheet, Download } from \"lucide-react\"\r\nimport Fuse from \"fuse.js\"\r\nimport { usePageHeader } from \"../../contexts/page-header-context\";\r\nimport { DataTableColumnCustomizer } from \"../../components/data-table/data-table-column-toggle\";\r\nimport { SupplierCard } from \"./supplier-card\";\r\nimport { useColumnVisibility } from \"../../hooks/use-column-visibility\";\r\nimport { useBreakpoint } from \"../../contexts/breakpoint-context\";\r\nimport { toast } from 'sonner';\r\nimport { asSystemId, type SystemId } from \"@/lib/id-types\";\r\nimport { GenericImportDialogV2 } from \"../../components/shared/generic-import-dialog-v2\";\r\nimport { GenericExportDialogV2 } from \"../../components/shared/generic-export-dialog-v2\";\r\nimport { supplierImportExportConfig } from \"../../lib/import-export/configs/supplier.config\";\r\nimport { useAllBranches } from \"../settings/branches/hooks/use-all-branches\";\r\nimport { useAuth } from \"../../contexts/auth-context\";\r\n\r\nexport function SuppliersPage() {\r\n  const { data: suppliersRaw } = useAllSuppliers();\r\n  const { remove, update, create } = useSupplierMutations();\r\n  const { data: branches } = useAllBranches();\r\n  const { employee: currentUser } = useAuth();\r\n  const router = useRouter();\r\n  const { isMobile } = useBreakpoint();\r\n  \r\n  // ✅ Import/Export dialogs\r\n  const [showImportDialog, setShowImportDialog] = React.useState(false);\r\n  const [showExportDialog, setShowExportDialog] = React.useState(false);\r\n  \r\n  // ✅ Memoize suppliers để tránh unstable reference\r\n  const suppliers = React.useMemo(() => suppliersRaw, [suppliersRaw]);\r\n  \r\n  // Calculate deleted count reactively\r\n  const deletedCount = React.useMemo(() => \r\n    suppliers.filter((s: any) => s.isDeleted).length, \r\n    [suppliers]\r\n  );\r\n  \r\n  // ✅ Mobile infinite scroll state\r\n  const [mobileLoadedCount, setMobileLoadedCount] = React.useState(20);\r\n  \r\n  // ✅ Memoize headerActions để tránh infinite loop\r\n  const headerActions = React.useMemo(() => [\r\n    <Button \r\n      key=\"trash\"\r\n      variant=\"outline\"\r\n      size=\"sm\"\r\n      className=\"h-9 gap-2\"\r\n      onClick={() => router.push('/suppliers/trash')}\r\n    >\r\n      <Trash2 className=\"mr-2 h-4 w-4\" />\r\n      Thùng rác ({deletedCount})\r\n    </Button>,\r\n    <Button\r\n      key=\"add\"\r\n      size=\"sm\"\r\n      className=\"h-9 gap-2\"\r\n      onClick={() => router.push('/suppliers/new')}\r\n    >\r\n      <PlusCircle className=\"mr-2 h-4 w-4\" />\r\n      Thêm nhà cung cấp\r\n    </Button>\r\n  ], [router, deletedCount]);\r\n  \r\n  usePageHeader({\r\n    title: 'Nhà cung cấp',\r\n    actions: headerActions,\r\n    breadcrumb: [\r\n      { label: 'Trang chủ', href: '/', isCurrent: false },\r\n      { label: 'Nhà cung cấp', href: '/suppliers', isCurrent: true },\r\n    ],\r\n  });\r\n\r\n  const [rowSelection, setRowSelection] = React.useState<Record<string, boolean>>({})\r\n  const [isAlertOpen, setIsAlertOpen] = React.useState(false)\r\n  const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null)\r\n  \r\n  const [sorting, setSorting] = React.useState<{ id: string, desc: boolean }>({ id: 'createdAt', desc: true });\r\n  const [globalFilter, setGlobalFilter] = React.useState('');\r\n  const [pagination, setPagination] = React.useState({ pageIndex: 0, pageSize: 10 });\r\n  \r\n  // Get initial column visibility from columns\r\n  const cols = React.useMemo(() => getColumns(() => {}, () => {}, () => {}, () => {}), []);\r\n  const defaultVisibility = React.useMemo(() => {\r\n    const initial: Record<string, boolean> = {};\r\n    cols.forEach(c => { if (c.id) initial[c.id] = true; });\r\n    return initial;\r\n  }, [cols]);\r\n  \r\n  // Use hook for column visibility (database-backed)\r\n  const [columnVisibility, setColumnVisibility] = useColumnVisibility('suppliers', defaultVisibility);\r\n  \r\n  const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\r\n  const [pinnedColumns, setPinnedColumns] = React.useState<string[]>([]);\r\n\r\n  const handleDelete = React.useCallback((systemId: SystemId) => {\r\n    setIdToDelete(systemId)\r\n    setIsAlertOpen(true)\r\n  }, []);\r\n  \r\n  // ✅ Handle restore cho soft delete\r\n  const handleRestore = React.useCallback((systemId: SystemId) => {\r\n    const supplier = suppliersRaw.find(s => s.systemId === systemId);\r\n    // TODO: Add restore mutation when API supports it\r\n    // For now, update isDeleted to false\r\n    update.mutate({ systemId: systemId as string, isDeleted: false });\r\n    if (supplier) {\r\n      toast.success(`Đã khôi phục nhà cung cấp \"${supplier.name}\"`);\r\n    }\r\n  }, [update, suppliersRaw]);\r\n\r\n  const handleEdit = React.useCallback((supplier: Supplier) => {\r\n    router.push(`/suppliers/${supplier.systemId}/edit`);\r\n  }, [router]);\r\n\r\n  const columns = React.useMemo(() => getColumns(handleDelete, handleRestore, handleEdit, (path: string) => router.push(path)), [handleDelete, handleRestore, handleEdit, router]);\r\n  \r\n  // ✅ Run once on mount only\r\n  React.useEffect(() => {\r\n    const defaultVisibleColumns = [\r\n      'id', 'name', 'taxCode', 'phone', 'email', 'address', 'website',\r\n      'contactPerson', 'accountManager', 'currentDebt', 'bankAccount',\r\n      'bankName', 'status', 'createdAt', 'updatedAt'\r\n    ];\r\n    const initialVisibility: Record<string, boolean> = {};\r\n    columns.forEach(c => {\r\n      if (c.id === 'select' || c.id === 'actions') {\r\n        initialVisibility[c.id!] = true;\r\n      } else {\r\n        initialVisibility[c.id!] = defaultVisibleColumns.includes(c.id!);\r\n      }\r\n    });\r\n    setColumnVisibility(initialVisibility);\r\n    setColumnOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n  }, []);\r\n\r\n  // ✅ Cache active and deleted suppliers - use data from hook\r\n  const activeSuppliers = React.useMemo(() => \r\n    suppliersRaw.filter(s => !s.isDeleted && s.status === 'Đang Giao Dịch'), \r\n    [suppliersRaw]\r\n  );\r\n\r\n  const fuse = React.useMemo(() => new Fuse(activeSuppliers, { keys: [\"name\", \"taxCode\", \"phone\", \"email\"] }), [activeSuppliers]);\r\n\r\n  const confirmDelete = () => {\r\n    if (idToDelete) {\r\n      const supplier = suppliersRaw.find(s => s.systemId === idToDelete);\r\n      remove.mutate(idToDelete);\r\n      if (supplier) {\r\n        toast.success(`Đã chuyển nhà cung cấp \"${supplier.name}\" vào thùng rác`);\r\n      }\r\n    }\r\n    setIsAlertOpen(false)\r\n    setIdToDelete(null)\r\n  }\r\n\r\n  const handleAddNew = () => {\r\n    router.push('/suppliers/new');\r\n  };\r\n\r\n  const filteredData = React.useMemo(() => {\r\n    if (globalFilter) {\r\n        return fuse.search(globalFilter).map(result => result.item);\r\n    }\r\n    return activeSuppliers;\r\n  }, [activeSuppliers, globalFilter, fuse]);\r\n\r\n  const sortedData = React.useMemo(() => {\r\n    const sorted = [...filteredData];\r\n    if (sorting.id) {\r\n      sorted.sort((a, b) => {\r\n        const aValue = (a as any)[sorting.id];\r\n        const bValue = (b as any)[sorting.id];\r\n        // Special handling for date columns\r\n        if (sorting.id === 'createdAt') {\r\n          const aTime = aValue ? new Date(aValue).getTime() : 0;\r\n          const bTime = bValue ? new Date(bValue).getTime() : 0;\r\n          // Nếu thời gian bằng nhau, sort theo systemId (ID mới hơn = số lớn hơn)\r\n          if (aTime === bTime) {\r\n            const aNum = parseInt(a.systemId.replace(/\\D/g, '')) || 0;\r\n            const bNum = parseInt(b.systemId.replace(/\\D/g, '')) || 0;\r\n            return sorting.desc ? bNum - aNum : aNum - bNum;\r\n          }\r\n          return sorting.desc ? bTime - aTime : aTime - bTime;\r\n        }\r\n        if (aValue < bValue) return sorting.desc ? 1 : -1;\r\n        if (aValue > bValue) return sorting.desc ? -1 : 1;\r\n        return 0;\r\n      });\r\n    }\r\n    return sorted;\r\n  }, [filteredData, sorting]);\r\n\r\n  const pageCount = Math.ceil(sortedData.length / pagination.pageSize);\r\n  const paginatedData = React.useMemo(() => {\r\n    const start = pagination.pageIndex * pagination.pageSize;\r\n    const end = start + pagination.pageSize;\r\n    return sortedData.slice(start, end);\r\n  }, [sortedData, pagination]);\r\n  \r\n  const allSelectedRows = React.useMemo(() => {\r\n    return activeSuppliers.filter(s => rowSelection[s.systemId]);\r\n  }, [activeSuppliers, rowSelection]);\r\n\r\n  const handleRowClick = (supplier: Supplier) => {\r\n    router.push(`/suppliers/${supplier.systemId}`);\r\n  };\r\n\r\n  // Bulk actions\r\n  const handleBulkStatusChange = (status: Supplier['status']) => {\r\n    const selectedIds = Object.keys(rowSelection).filter(id => rowSelection[id]);\r\n    if (selectedIds.length === 0) {\r\n      toast.error('Chưa chọn nhà cung cấp', {\r\n        description: 'Vui lòng chọn ít nhất một nhà cung cấp',\r\n      });\r\n      return;\r\n    }\r\n    const systemIds = selectedIds.map(asSystemId);\r\n    // Bulk update status via individual mutations\r\n    systemIds.forEach(id => {\r\n      update.mutate({ systemId: id as string, status });\r\n    });\r\n    setRowSelection({});\r\n    toast.success(`Đã cập nhật trạng thái ${selectedIds.length} nhà cung cấp`);\r\n  };\r\n\r\n  const handleBulkDelete = () => {\r\n    const selectedIds = Object.keys(rowSelection).filter(id => rowSelection[id]);\r\n    if (selectedIds.length === 0) {\r\n      toast.error('Chưa chọn nhà cung cấp', {\r\n        description: 'Vui lòng chọn ít nhất một nhà cung cấp',\r\n      });\r\n      return;\r\n    }\r\n    const systemIds = selectedIds.map(asSystemId);\r\n    // Bulk delete via individual mutations\r\n    systemIds.forEach(id => {\r\n      remove.mutate(id);\r\n    });\r\n    setRowSelection({});\r\n    toast.success(`Đã chuyển ${selectedIds.length} nhà cung cấp vào thùng rác`);\r\n  };\r\n\r\n  // ✅ Mobile infinite scroll - Reset khi filter thay đổi\r\n  React.useEffect(() => {\r\n    setMobileLoadedCount(20);\r\n  }, [globalFilter, sorting]);\r\n\r\n  // ✅ Mobile infinite scroll - Load more on scroll\r\n  React.useEffect(() => {\r\n    if (!isMobile) return;\r\n\r\n    const handleScroll = () => {\r\n      const scrollTop = window.scrollY || document.documentElement.scrollTop;\r\n      const scrollHeight = document.documentElement.scrollHeight;\r\n      const clientHeight = window.innerHeight;\r\n\r\n      // Load more when 80% scrolled\r\n      if (scrollTop + clientHeight >= scrollHeight * 0.8) {\r\n        setMobileLoadedCount(prev => {\r\n          if (prev < sortedData.length) {\r\n            return Math.min(prev + 20, sortedData.length);\r\n          }\r\n          return prev;\r\n        });\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [isMobile, sortedData.length]);\r\n\r\n  // ✅ Display data - Desktop pagination or Mobile infinite scroll\r\n  const displayData = React.useMemo(() => {\r\n    if (isMobile) {\r\n      return sortedData.slice(0, mobileLoadedCount);\r\n    }\r\n    return paginatedData;\r\n  }, [isMobile, sortedData, mobileLoadedCount, paginatedData]);\r\n\r\n  const bulkActions = [\r\n    {\r\n      label: \"Đang giao dịch\",\r\n      onSelect: () => handleBulkStatusChange('Đang Giao Dịch')\r\n    },\r\n    {\r\n      label: \"Tạm ngừng\",\r\n      onSelect: () => handleBulkStatusChange('Ngừng Giao Dịch')\r\n    },\r\n    {\r\n      label: \"Chuyển vào thùng rác\",\r\n      onSelect: handleBulkDelete\r\n    }\r\n  ];\r\n\r\n  // ✅ Import handler\r\n  const handleImport = React.useCallback(async (\r\n    importedSuppliers: Partial<Supplier>[], \r\n    mode: 'insert-only' | 'update-only' | 'upsert',\r\n    _branchId?: string\r\n  ) => {\r\n    let addedCount = 0;\r\n    let updatedCount = 0;\r\n    let skippedCount = 0;\r\n    const errors: Array<{ row: number; message: string }> = [];\r\n    \r\n    importedSuppliers.forEach((supplier, index) => {\r\n      try {\r\n        const existing = activeSuppliers.find(s => \r\n          s.id.toLowerCase() === (supplier.id || '').toLowerCase()\r\n        );\r\n        \r\n        if (existing) {\r\n          if (mode === 'update-only' || mode === 'upsert') {\r\n            update.mutate({ systemId: existing.systemId as string, ...supplier });\r\n            updatedCount++;\r\n          } else {\r\n            skippedCount++;\r\n          }\r\n        } else {\r\n          if (mode === 'insert-only' || mode === 'upsert') {\r\n            create.mutate(supplier as any);\r\n            addedCount++;\r\n          } else {\r\n            skippedCount++;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        errors.push({ row: index + 1, message: (error as Error).message });\r\n      }\r\n    });\r\n    \r\n    if (addedCount > 0 || updatedCount > 0) {\r\n      const messages = [];\r\n      if (addedCount > 0) messages.push(`${addedCount} nhà cung cấp mới`);\r\n      if (updatedCount > 0) messages.push(`${updatedCount} nhà cung cấp cập nhật`);\r\n      toast.success(`Đã import: ${messages.join(', ')}`);\r\n    }\r\n    \r\n    return {\r\n      success: addedCount + updatedCount,\r\n      failed: errors.length,\r\n      inserted: addedCount,\r\n      updated: updatedCount,\r\n      skipped: skippedCount,\r\n      errors,\r\n    };\r\n  }, [activeSuppliers, create, update]);\r\n\r\n  // Get selected suppliers for export\r\n  const selectedSuppliers = React.useMemo(() => {\r\n    return activeSuppliers.filter(s => rowSelection[s.systemId]);\r\n  }, [activeSuppliers, rowSelection]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* PageToolbar - Desktop only */}\r\n      {!isMobile && (\r\n        <PageToolbar\r\n          rightActions={\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => setShowImportDialog(true)}>\r\n                <FileSpreadsheet className=\"mr-2 h-4 w-4\" />\r\n                Nhập file\r\n              </Button>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => setShowExportDialog(true)}>\r\n                <Download className=\"mr-2 h-4 w-4\" />\r\n                Xuất Excel\r\n              </Button>\r\n              <DataTableColumnCustomizer\r\n                columns={columns}\r\n                columnVisibility={columnVisibility}\r\n                setColumnVisibility={setColumnVisibility}\r\n                columnOrder={columnOrder}\r\n                setColumnOrder={setColumnOrder}\r\n                pinnedColumns={pinnedColumns}\r\n                setPinnedColumns={setPinnedColumns}\r\n              />\r\n            </div>\r\n          }\r\n        />\r\n      )}\r\n      \r\n      {/* Mobile Import/Export Buttons */}\r\n      {isMobile && (\r\n        <div className=\"flex gap-2\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => setShowImportDialog(true)}>\r\n            <FileSpreadsheet className=\"mr-2 h-4 w-4\" />\r\n            Nhập\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => setShowExportDialog(true)}>\r\n            <Download className=\"mr-2 h-4 w-4\" />\r\n            Xuất\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* PageFilters */}\r\n      <PageFilters\r\n        searchValue={globalFilter}\r\n        onSearchChange={setGlobalFilter}\r\n        searchPlaceholder=\"Tìm kiếm nhà cung cấp...\"\r\n      />\r\n\r\n      <ResponsiveDataTable\r\n        columns={columns}\r\n        data={displayData}\r\n        pageCount={pageCount}\r\n        pagination={pagination}\r\n        setPagination={setPagination}\r\n        rowCount={filteredData.length}\r\n        rowSelection={rowSelection}\r\n        setRowSelection={setRowSelection}\r\n        sorting={sorting}\r\n        setSorting={setSorting}\r\n        onRowClick={handleRowClick}\r\n        allSelectedRows={allSelectedRows}\r\n        bulkActions={bulkActions}\r\n        expanded={{}}\r\n        setExpanded={() => {}}\r\n        columnVisibility={columnVisibility}\r\n        setColumnVisibility={setColumnVisibility}\r\n        columnOrder={columnOrder}\r\n        setColumnOrder={setColumnOrder}\r\n        pinnedColumns={pinnedColumns}\r\n        setPinnedColumns={setPinnedColumns}\r\n        renderMobileCard={(supplier) => (\r\n          <SupplierCard\r\n            supplier={supplier}\r\n            onEdit={handleEdit}\r\n            onDelete={handleDelete}\r\n            onRestore={handleRestore}\r\n            router={router}\r\n          />\r\n        )}\r\n      />\r\n\r\n      {/* Mobile infinite scroll indicator */}\r\n      {isMobile && mobileLoadedCount < sortedData.length && (\r\n        <div className=\"text-center py-4\">\r\n          <div className=\"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]\" />\r\n          <p className=\"text-body-sm text-muted-foreground mt-2\">Đang tải thêm...</p>\r\n        </div>\r\n      )}\r\n      \r\n      {isMobile && mobileLoadedCount >= sortedData.length && sortedData.length > 20 && (\r\n        <div className=\"text-center py-4\">\r\n          <p className=\"text-body-sm text-muted-foreground\">Đã hiển thị tất cả {sortedData.length} kết quả</p>\r\n        </div>\r\n      )}\r\n\r\n      <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Bạn có chắc chắn muốn xóa?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Nhà cung cấp sẽ được chuyển vào thùng rác. Bạn có thể khôi phục lại sau.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Hủy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDelete}>Xóa</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Import Dialog */}\r\n      <GenericImportDialogV2<Supplier>\r\n        open={showImportDialog}\r\n        onOpenChange={setShowImportDialog}\r\n        config={supplierImportExportConfig}\r\n        branches={branches.map(b => ({ systemId: b.systemId, name: b.name }))}\r\n        existingData={activeSuppliers}\r\n        onImport={handleImport}\r\n        currentUser={{\r\n          name: currentUser?.fullName || 'Hệ thống',\r\n          systemId: currentUser?.systemId || asSystemId('SYSTEM'),\r\n        }}\r\n      />\r\n\r\n      {/* Export Dialog */}\r\n      <GenericExportDialogV2<Supplier>\r\n        open={showExportDialog}\r\n        onOpenChange={setShowExportDialog}\r\n        config={supplierImportExportConfig}\r\n        allData={activeSuppliers}\r\n        filteredData={sortedData}\r\n        currentPageData={paginatedData}\r\n        selectedData={selectedSuppliers}\r\n        currentUser={{\r\n          name: currentUser?.fullName || 'Hệ thống',\r\n          systemId: currentUser?.systemId || asSystemId('SYSTEM'),\r\n        }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}