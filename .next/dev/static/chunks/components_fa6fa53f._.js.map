{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border border-border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0EACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype BaseCheckboxProps = React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n\r\ntype CheckboxProps = Omit<BaseCheckboxProps, \"checked\" | \"defaultChecked\"> & {\r\n  checked?: CheckboxPrimitive.CheckedState | undefined\r\n  defaultChecked?: CheckboxPrimitive.CheckedState | undefined\r\n}\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  CheckboxProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AASA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kTACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;kBAE3D,cAAA,6LAAC,oLAA2B;YAC1B,WAAW,IAAA,qHAAE,EAAC;sBAEd,cAAA,6LAAC,gNAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/shared/subtask-list.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Button } from '../ui/button';\r\nimport { Checkbox } from '../ui/checkbox';\r\nimport { Input } from '../ui/input';\r\nimport { Avatar, AvatarFallback } from '../ui/avatar';\r\nimport {\r\n  Plus,\r\n  GripVertical,\r\n  Trash2,\r\n  Edit2,\r\n  Check,\r\n  X,\r\n  User,\r\n  Copy,\r\n} from 'lucide-react';\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n} from '@dnd-kit/core';\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  useSortable,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { vi } from 'date-fns/locale';\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\n\r\nexport type Subtask<T = any> = {\r\n  id: string;\r\n  title: string;\r\n  completed: boolean;\r\n  order: number;\r\n  createdAt: Date;\r\n  completedAt?: Date | undefined;\r\n  assigneeId?: string | undefined;\r\n  assigneeName?: string | undefined;\r\n  parentId?: string | undefined; // For nested subtasks (1 level)\r\n  metadata?: T | undefined; // Additional fields for specific use cases\r\n};\r\n\r\nexport interface SubtaskListProps<T = any> {\r\n  subtasks: Subtask<T>[];\r\n  onAdd?: (title: string, parentId?: string | undefined) => void;\r\n  onUpdate?: (id: string, updates: Partial<Subtask<T>>) => void;\r\n  onDelete?: (id: string) => void;\r\n  onReorder?: (reorderedSubtasks: Subtask<T>[]) => void;\r\n  onToggleComplete?: (id: string, completed: boolean) => void;\r\n  onAllCompleted?: (() => void) | undefined; // Callback khi tất cả subtasks được hoàn thành\r\n  allowNested?: boolean | undefined; // Enable nested subtasks (1 level)\r\n  showAssignee?: boolean | undefined; // Show assignee column\r\n  showProgress?: boolean | undefined; // Show progress indicator\r\n  readonly?: boolean | undefined; // Disable editing\r\n  compact?: boolean | undefined; // Compact mode for mobile\r\n  emptyMessage?: string | undefined;\r\n}\r\n\r\n// ============================================================================\r\n// Sortable Subtask Item\r\n// ============================================================================\r\n\r\ninterface SortableSubtaskProps<T> {\r\n  subtask: Subtask<T>;\r\n  isNested?: boolean | undefined;\r\n  onToggleComplete?: ((id: string, completed: boolean) => void) | undefined;\r\n  onUpdate?: ((id: string, updates: Partial<Subtask<T>>) => void) | undefined;\r\n  onDelete?: ((id: string) => void) | undefined;\r\n  onAddNested?: ((parentId: string) => void) | undefined;\r\n  showAssignee?: boolean | undefined;\r\n  readonly?: boolean | undefined;\r\n  compact?: boolean | undefined;\r\n}\r\n\r\nfunction SortableSubtask<T>({\r\n  subtask,\r\n  isNested = false,\r\n  onToggleComplete,\r\n  onUpdate,\r\n  onDelete,\r\n  onAddNested,\r\n  showAssignee,\r\n  readonly,\r\n  compact,\r\n}: SortableSubtaskProps<T>) {\r\n  const [isEditing, setIsEditing] = React.useState(false);\r\n  const [editValue, setEditValue] = React.useState(subtask.title);\r\n\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: subtask.id, disabled: readonly ?? false });\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (editValue.trim() && editValue !== subtask.title) {\r\n      onUpdate?.(subtask.id, { title: editValue.trim() });\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditValue(subtask.title);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      .split(' ')\r\n      .map((n) => n[0])\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      style={style}\r\n      className={`group flex items-start gap-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors ${\r\n        isNested ? 'ml-8 border-l-2 border-l-primary/30' : ''\r\n      } ${compact ? 'p-2' : 'p-3'} ${onToggleComplete && !isEditing ? 'cursor-pointer' : ''}`}\r\n      onClick={(e) => {\r\n        // Only toggle if clicking on the row (not on buttons/inputs)\r\n        if (!isEditing && onToggleComplete && e.target === e.currentTarget) {\r\n          onToggleComplete(subtask.id, !subtask.completed);\r\n        }\r\n      }}\r\n    >\r\n      {/* Drag Handle */}\r\n      {!readonly && (\r\n        <button\r\n          className=\"cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 pt-0.5\"\r\n          {...attributes}\r\n          {...listeners}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <GripVertical className={`text-muted-foreground ${compact ? 'h-3.5 w-3.5' : 'h-4 w-4'}`} />\r\n        </button>\r\n      )}\r\n\r\n      {/* Checkbox */}\r\n      <div className=\"flex-shrink-0 pt-0.5\" onClick={(e) => e.stopPropagation()}>\r\n        <Checkbox\r\n          checked={subtask.completed}\r\n          onCheckedChange={(checked) =>\r\n            onToggleComplete?.(subtask.id, checked as boolean)\r\n          }\r\n          disabled={!onToggleComplete}\r\n        />\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 min-w-0\" onClick={(e) => {\r\n        // Allow toggle when clicking on title text\r\n        if (!isEditing && onToggleComplete && (e.target as HTMLElement).tagName === 'P') {\r\n          return; // Let the text onClick handle it\r\n        }\r\n        // Stop propagation for other clicks in this area\r\n        if (isEditing) {\r\n          e.stopPropagation();\r\n        }\r\n      }}>\r\n        {isEditing ? (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Input\r\n              value={editValue}\r\n              onChange={(e) => setEditValue(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') handleSave();\r\n                if (e.key === 'Escape') handleCancel();\r\n              }}\r\n              className={compact ? 'h-7 text-sm' : 'h-8'}\r\n              autoFocus\r\n            />\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"ghost\"\r\n              className={compact ? 'h-7 w-7 p-0' : 'h-8 w-8 p-0'}\r\n              onClick={handleSave}\r\n            >\r\n              <Check className=\"h-4 w-4 text-green-600\" />\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"ghost\"\r\n              className={compact ? 'h-7 w-7 p-0' : 'h-8 w-8 p-0'}\r\n              onClick={handleCancel}\r\n            >\r\n              <X className=\"h-4 w-4 text-muted-foreground\" />\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <p\r\n                className={`flex-1 text-sm ${\r\n                  subtask.completed\r\n                    ? 'line-through text-muted-foreground'\r\n                    : 'font-medium'\r\n                }`}\r\n                onClick={() => {\r\n                  if (onToggleComplete) {\r\n                    onToggleComplete(subtask.id, !subtask.completed);\r\n                  }\r\n                }}\r\n              >\r\n                {subtask.title}\r\n              </p>\r\n              {/* Copy Button */}\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"ghost\"\r\n                className={`${compact ? 'h-6 w-6 p-0' : 'h-7 w-7 p-0'} opacity-0 group-hover:opacity-100 transition-opacity`}\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  navigator.clipboard.writeText(subtask.title);\r\n                  // Could add toast here if needed\r\n                }}\r\n                title=\"Copy nội dung\"\r\n              >\r\n                <Copy className=\"h-3 w-3 text-muted-foreground\" />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Assignee */}\r\n      {showAssignee && subtask.assigneeName && (\r\n        <div className=\"flex items-center gap-1.5 pt-0.5\" onClick={(e) => e.stopPropagation()}>\r\n          <Avatar className={compact ? 'h-5 w-5' : 'h-6 w-6'}>\r\n            <AvatarFallback className={`text-[10px] font-medium bg-primary/10 text-primary`}>\r\n              {getInitials(subtask.assigneeName)}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          {!compact && (\r\n            <span className=\"text-xs text-muted-foreground truncate max-w-[100px]\">\r\n              {subtask.assigneeName}\r\n            </span>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Actions */}\r\n      {!readonly && !isEditing && (\r\n        <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\" onClick={(e) => e.stopPropagation()}>\r\n          {!isNested && onAddNested && (\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"ghost\"\r\n              className={compact ? 'h-7 w-7 p-0' : 'h-8 w-8 p-0'}\r\n              onClick={() => onAddNested(subtask.id)}\r\n              title=\"Thêm subtask con\"\r\n            >\r\n              <Plus className=\"h-3.5 w-3.5\" />\r\n            </Button>\r\n          )}\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"ghost\"\r\n            className={compact ? 'h-7 w-7 p-0' : 'h-8 w-8 p-0'}\r\n            onClick={() => setIsEditing(true)}\r\n          >\r\n            <Edit2 className=\"h-3.5 w-3.5\" />\r\n          </Button>\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"ghost\"\r\n            className={`${compact ? 'h-7 w-7 p-0' : 'h-8 w-8 p-0'} text-destructive hover:text-destructive`}\r\n            onClick={() => onDelete?.(subtask.id)}\r\n          >\r\n            <Trash2 className=\"h-3.5 w-3.5\" />\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============================================================================\r\n// Main SubtaskList Component\r\n// ============================================================================\r\n\r\nexport function SubtaskList<T = any>({\r\n  subtasks,\r\n  onAdd,\r\n  onUpdate,\r\n  onDelete,\r\n  onReorder,\r\n  onToggleComplete,\r\n  onAllCompleted,\r\n  allowNested = false,\r\n  showAssignee = false,\r\n  showProgress = true,\r\n  readonly = false,\r\n  compact = false,\r\n  emptyMessage = 'Chưa có subtask nào',\r\n}: SubtaskListProps<T>) {\r\n  const [newSubtaskTitle, setNewSubtaskTitle] = React.useState('');\r\n  const [isAdding, setIsAdding] = React.useState(false);\r\n  const [addingParentId, setAddingParentId] = React.useState<string | undefined>();\r\n\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n\r\n  // Separate parent and nested subtasks\r\n  const parentSubtasks = React.useMemo(\r\n    () => subtasks.filter((s) => !s.parentId).sort((a, b) => a.order - b.order),\r\n    [subtasks]\r\n  );\r\n\r\n  const getNestedSubtasks = React.useCallback(\r\n    (parentId: string) =>\r\n      subtasks\r\n        .filter((s) => s.parentId === parentId)\r\n        .sort((a, b) => a.order - b.order),\r\n    [subtasks]\r\n  );\r\n\r\n  // Calculate progress\r\n  const progress = React.useMemo(() => {\r\n    if (subtasks.length === 0) return 0;\r\n    const completed = subtasks.filter((s) => s.completed).length;\r\n    return Math.round((completed / subtasks.length) * 100);\r\n  }, [subtasks]);\r\n\r\n  // Check if all completed and trigger callback\r\n  React.useEffect(() => {\r\n    if (subtasks.length > 0 && progress === 100 && onAllCompleted) {\r\n      onAllCompleted();\r\n    }\r\n  }, [progress, subtasks.length, onAllCompleted]);\r\n\r\n  const handleAdd = () => {\r\n    if (newSubtaskTitle.trim()) {\r\n      onAdd?.(newSubtaskTitle.trim(), addingParentId);\r\n      setNewSubtaskTitle('');\r\n      setIsAdding(false);\r\n      setAddingParentId(undefined);\r\n    }\r\n  };\r\n\r\n  const handleAddNested = (parentId: string) => {\r\n    setAddingParentId(parentId);\r\n    setIsAdding(true);\r\n  };\r\n\r\n  const handleDragEnd = (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n\r\n    if (over && active.id !== over.id) {\r\n      const oldIndex = parentSubtasks.findIndex((s) => s.id === active.id);\r\n      const newIndex = parentSubtasks.findIndex((s) => s.id === over.id);\r\n\r\n      const reordered = arrayMove(parentSubtasks, oldIndex, newIndex).map(\r\n        (s, idx) => ({ ...s, order: idx })\r\n      );\r\n\r\n      // Include nested subtasks\r\n      const allReordered = [\r\n        ...reordered,\r\n        ...subtasks.filter((s) => s.parentId),\r\n      ];\r\n\r\n      onReorder?.(allReordered);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Progress Bar */}\r\n      {showProgress && subtasks.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex items-center justify-between text-sm\">\r\n            <span className=\"font-medium\">Tiến độ</span>\r\n            <span className=\"text-muted-foreground\">\r\n              {subtasks.filter((s) => s.completed).length}/{subtasks.length} hoàn thành\r\n            </span>\r\n          </div>\r\n          <div className=\"h-2 bg-secondary rounded-full overflow-hidden\">\r\n            <div\r\n              className=\"h-full bg-primary transition-all duration-300\"\r\n              style={{ width: `${progress}%` }}\r\n            />\r\n          </div>\r\n          <p className=\"text-xs text-muted-foreground text-right\">{progress}%</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Subtasks List */}\r\n      {subtasks.length > 0 ? (\r\n        <DndContext\r\n          sensors={sensors}\r\n          collisionDetection={closestCenter}\r\n          onDragEnd={handleDragEnd}\r\n        >\r\n          <SortableContext\r\n            items={parentSubtasks.map((s) => s.id)}\r\n            strategy={verticalListSortingStrategy}\r\n          >\r\n            <div className=\"space-y-2\">\r\n              {parentSubtasks.map((subtask) => (\r\n                <div key={subtask.id} className=\"space-y-2\">\r\n                  {/* Parent Subtask */}\r\n                  <SortableSubtask\r\n                    subtask={subtask}\r\n                    onToggleComplete={onToggleComplete}\r\n                    onUpdate={onUpdate}\r\n                    onDelete={onDelete}\r\n                    onAddNested={allowNested ? handleAddNested : undefined}\r\n                    showAssignee={showAssignee}\r\n                    readonly={readonly}\r\n                    compact={compact}\r\n                  />\r\n\r\n                  {/* Nested Subtasks */}\r\n                  {allowNested &&\r\n                    getNestedSubtasks(subtask.id).map((nested) => (\r\n                      <SortableSubtask\r\n                        key={nested.id}\r\n                        subtask={nested}\r\n                        isNested\r\n                        onToggleComplete={onToggleComplete}\r\n                        onUpdate={onUpdate}\r\n                        onDelete={onDelete}\r\n                        showAssignee={showAssignee}\r\n                        readonly={readonly}\r\n                        compact={compact}\r\n                      />\r\n                    ))}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </SortableContext>\r\n        </DndContext>\r\n      ) : (\r\n        <div className=\"text-center py-8 text-muted-foreground text-sm border border-dashed rounded-lg\">\r\n          {emptyMessage}\r\n        </div>\r\n      )}\r\n\r\n      {/* Add New Subtask */}\r\n      {!readonly && (\r\n        <div className=\"space-y-2\">\r\n          {isAdding ? (\r\n            <div className={`flex items-center gap-2 ${addingParentId ? 'ml-8' : ''}`}>\r\n              <Input\r\n                value={newSubtaskTitle}\r\n                onChange={(e) => setNewSubtaskTitle(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter') handleAdd();\r\n                  if (e.key === 'Escape') {\r\n                    setIsAdding(false);\r\n                    setAddingParentId(undefined);\r\n                    setNewSubtaskTitle('');\r\n                  }\r\n                }}\r\n                placeholder={\r\n                  addingParentId ? 'Nhập subtask con...' : 'Nhập subtask mới...'\r\n                }\r\n                className={compact ? 'h-8 text-sm' : 'h-9'}\r\n                autoFocus\r\n              />\r\n              <Button\r\n                size=\"sm\"\r\n                onClick={handleAdd}\r\n                disabled={!newSubtaskTitle.trim()}\r\n              >\r\n                <Check className=\"h-4 w-4\" />\r\n              </Button>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"ghost\"\r\n                onClick={() => {\r\n                  setIsAdding(false);\r\n                  setAddingParentId(undefined);\r\n                  setNewSubtaskTitle('');\r\n                }}\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          ) : (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"w-full\"\r\n              onClick={() => setIsAdding(true)}\r\n            >\r\n              <Plus className=\"mr-2 h-4 w-4\" />\r\n              Thêm subtask\r\n            </Button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AASA;AAOA;;;;;;;;;;;;AAqDA,SAAS,gBAAmB,EAC1B,OAAO,EACP,WAAW,KAAK,EAChB,gBAAgB,EAChB,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,QAAQ,EACR,OAAO,EACiB;;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,yKAAc,CAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,yKAAc,CAAC,QAAQ,KAAK;IAE9D,MAAM,EACJ,UAAU,EACV,SAAS,EACT,UAAU,EACV,SAAS,EACT,UAAU,EACV,UAAU,EACX,GAAG,IAAA,qLAAW,EAAC;QAAE,IAAI,QAAQ,EAAE;QAAE,UAAU,YAAY;IAAM;IAE9D,MAAM,QAAQ;QACZ,WAAW,+KAAG,CAAC,SAAS,CAAC,QAAQ,CAAC;QAClC;QACA,SAAS,aAAa,MAAM;IAC9B;IAEA,MAAM,aAAa;QACjB,IAAI,UAAU,IAAI,MAAM,cAAc,QAAQ,KAAK,EAAE;YACnD,WAAW,QAAQ,EAAE,EAAE;gBAAE,OAAO,UAAU,IAAI;YAAG;QACnD;QACA,aAAa;IACf;IAEA,MAAM,eAAe;QACnB,aAAa,QAAQ,KAAK;QAC1B,aAAa;IACf;IAEA,MAAM,cAAc,CAAC;QACnB,OAAO,KACJ,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,EACf,IAAI,CAAC,IACL,WAAW,GACX,KAAK,CAAC,GAAG;IACd;IAEA,qBACE,6LAAC;QACC,KAAK;QACL,OAAO;QACP,WAAW,CAAC,4FAA4F,EACtG,WAAW,wCAAwC,GACpD,CAAC,EAAE,UAAU,QAAQ,MAAM,CAAC,EAAE,oBAAoB,CAAC,YAAY,mBAAmB,IAAI;QACvF,SAAS,CAAC;YACR,6DAA6D;YAC7D,IAAI,CAAC,aAAa,oBAAoB,EAAE,MAAM,KAAK,EAAE,aAAa,EAAE;gBAClE,iBAAiB,QAAQ,EAAE,EAAE,CAAC,QAAQ,SAAS;YACjD;QACF;;YAGC,CAAC,0BACA,6LAAC;gBACC,WAAU;gBACT,GAAG,UAAU;gBACb,GAAG,SAAS;gBACb,SAAS,CAAC,IAAM,EAAE,eAAe;0BAEjC,cAAA,6LAAC,yOAAY;oBAAC,WAAW,CAAC,sBAAsB,EAAE,UAAU,gBAAgB,WAAW;;;;;;;;;;;0BAK3F,6LAAC;gBAAI,WAAU;gBAAuB,SAAS,CAAC,IAAM,EAAE,eAAe;0BACrE,cAAA,6LAAC,4IAAQ;oBACP,SAAS,QAAQ,SAAS;oBAC1B,iBAAiB,CAAC,UAChB,mBAAmB,QAAQ,EAAE,EAAE;oBAEjC,UAAU,CAAC;;;;;;;;;;;0BAKf,6LAAC;gBAAI,WAAU;gBAAiB,SAAS,CAAC;oBACxC,2CAA2C;oBAC3C,IAAI,CAAC,aAAa,oBAAoB,AAAC,EAAE,MAAM,CAAiB,OAAO,KAAK,KAAK;wBAC/E,QAAQ,iCAAiC;oBAC3C;oBACA,iDAAiD;oBACjD,IAAI,WAAW;wBACb,EAAE,eAAe;oBACnB;gBACF;0BACG,0BACC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,sIAAK;4BACJ,OAAO;4BACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;4BAC5C,WAAW,CAAC;gCACV,IAAI,EAAE,GAAG,KAAK,SAAS;gCACvB,IAAI,EAAE,GAAG,KAAK,UAAU;4BAC1B;4BACA,WAAW,UAAU,gBAAgB;4BACrC,SAAS;;;;;;sCAEX,6LAAC,wIAAM;4BACL,MAAK;4BACL,SAAQ;4BACR,WAAW,UAAU,gBAAgB;4BACrC,SAAS;sCAET,cAAA,6LAAC,gNAAK;gCAAC,WAAU;;;;;;;;;;;sCAEnB,6LAAC,wIAAM;4BACL,MAAK;4BACL,SAAQ;4BACR,WAAW,UAAU,gBAAgB;4BACrC,SAAS;sCAET,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;yCAIjB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAW,CAAC,eAAe,EACzB,QAAQ,SAAS,GACb,uCACA,eACJ;gCACF,SAAS;oCACP,IAAI,kBAAkB;wCACpB,iBAAiB,QAAQ,EAAE,EAAE,CAAC,QAAQ,SAAS;oCACjD;gCACF;0CAEC,QAAQ,KAAK;;;;;;0CAGhB,6LAAC,wIAAM;gCACL,MAAK;gCACL,SAAQ;gCACR,WAAW,GAAG,UAAU,gBAAgB,cAAc,qDAAqD,CAAC;gCAC5G,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,UAAU,SAAS,CAAC,SAAS,CAAC,QAAQ,KAAK;gCAC3C,iCAAiC;gCACnC;gCACA,OAAM;0CAEN,cAAA,6LAAC,6MAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQzB,gBAAgB,QAAQ,YAAY,kBACnC,6LAAC;gBAAI,WAAU;gBAAmC,SAAS,CAAC,IAAM,EAAE,eAAe;;kCACjF,6LAAC,wIAAM;wBAAC,WAAW,UAAU,YAAY;kCACvC,cAAA,6LAAC,gJAAc;4BAAC,WAAW,CAAC,kDAAkD,CAAC;sCAC5E,YAAY,QAAQ,YAAY;;;;;;;;;;;oBAGpC,CAAC,yBACA,6LAAC;wBAAK,WAAU;kCACb,QAAQ,YAAY;;;;;;;;;;;;YAO5B,CAAC,YAAY,CAAC,2BACb,6LAAC;gBAAI,WAAU;gBAA+E,SAAS,CAAC,IAAM,EAAE,eAAe;;oBAC5H,CAAC,YAAY,6BACZ,6LAAC,wIAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,WAAW,UAAU,gBAAgB;wBACrC,SAAS,IAAM,YAAY,QAAQ,EAAE;wBACrC,OAAM;kCAEN,cAAA,6LAAC,6MAAI;4BAAC,WAAU;;;;;;;;;;;kCAGpB,6LAAC,wIAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,WAAW,UAAU,gBAAgB;wBACrC,SAAS,IAAM,aAAa;kCAE5B,cAAA,6LAAC,8MAAK;4BAAC,WAAU;;;;;;;;;;;kCAEnB,6LAAC,wIAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,WAAW,GAAG,UAAU,gBAAgB,cAAc,wCAAwC,CAAC;wBAC/F,SAAS,IAAM,WAAW,QAAQ,EAAE;kCAEpC,cAAA,6LAAC,uNAAM;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAM9B;GArNS;;QAqBH,qLAAW;;;KArBR;AA2NF,SAAS,YAAqB,EACnC,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,gBAAgB,EAChB,cAAc,EACd,cAAc,KAAK,EACnB,eAAe,KAAK,EACpB,eAAe,IAAI,EACnB,WAAW,KAAK,EAChB,UAAU,KAAK,EACf,eAAe,qBAAqB,EAChB;;IACpB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,yKAAc,CAAC;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,yKAAc,CAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,yKAAc;IAE1D,MAAM,UAAU,IAAA,4KAAU,EACxB,IAAA,2KAAS,EAAC,+KAAa,GACvB,IAAA,2KAAS,EAAC,gLAAc,EAAE;QACxB,kBAAkB,qMAA2B;IAC/C;IAGF,sCAAsC;IACtC,MAAM,iBAAiB,wKAAa;+CAClC,IAAM,SAAS,MAAM;uDAAC,CAAC,IAAM,CAAC,EAAE,QAAQ;sDAAE,IAAI;uDAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK;;8CAC1E;QAAC;KAAS;IAGZ,MAAM,oBAAoB,4KAAiB;sDACzC,CAAC,WACC,SACG,MAAM;8DAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;6DAC7B,IAAI;8DAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK;;qDACrC;QAAC;KAAS;IAGZ,qBAAqB;IACrB,MAAM,WAAW,wKAAa;yCAAC;YAC7B,IAAI,SAAS,MAAM,KAAK,GAAG,OAAO;YAClC,MAAM,YAAY,SAAS,MAAM;iDAAC,CAAC,IAAM,EAAE,SAAS;gDAAE,MAAM;YAC5D,OAAO,KAAK,KAAK,CAAC,AAAC,YAAY,SAAS,MAAM,GAAI;QACpD;wCAAG;QAAC;KAAS;IAEb,8CAA8C;IAC9C,0KAAe;iCAAC;YACd,IAAI,SAAS,MAAM,GAAG,KAAK,aAAa,OAAO,gBAAgB;gBAC7D;YACF;QACF;gCAAG;QAAC;QAAU,SAAS,MAAM;QAAE;KAAe;IAE9C,MAAM,YAAY;QAChB,IAAI,gBAAgB,IAAI,IAAI;YAC1B,QAAQ,gBAAgB,IAAI,IAAI;YAChC,mBAAmB;YACnB,YAAY;YACZ,kBAAkB;QACpB;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,kBAAkB;QAClB,YAAY;IACd;IAEA,MAAM,gBAAgB,CAAC;QACrB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG;QAEzB,IAAI,QAAQ,OAAO,EAAE,KAAK,KAAK,EAAE,EAAE;YACjC,MAAM,WAAW,eAAe,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO,EAAE;YACnE,MAAM,WAAW,eAAe,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;YAEjE,MAAM,YAAY,IAAA,mLAAS,EAAC,gBAAgB,UAAU,UAAU,GAAG,CACjE,CAAC,GAAG,MAAQ,CAAC;oBAAE,GAAG,CAAC;oBAAE,OAAO;gBAAI,CAAC;YAGnC,0BAA0B;YAC1B,MAAM,eAAe;mBAChB;mBACA,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ;aACrC;YAED,YAAY;QACd;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;YAEZ,gBAAgB,SAAS,MAAM,GAAG,mBACjC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAAc;;;;;;0CAC9B,6LAAC;gCAAK,WAAU;;oCACb,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;oCAAC;oCAAE,SAAS,MAAM;oCAAC;;;;;;;;;;;;;kCAGlE,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,SAAS,CAAC,CAAC;4BAAC;;;;;;;;;;;kCAGnC,6LAAC;wBAAE,WAAU;;4BAA4C;4BAAS;;;;;;;;;;;;;YAKrE,SAAS,MAAM,GAAG,kBACjB,6LAAC,4KAAU;gBACT,SAAS;gBACT,oBAAoB,+KAAa;gBACjC,WAAW;0BAEX,cAAA,6LAAC,yLAAe;oBACd,OAAO,eAAe,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;oBACrC,UAAU,qMAA2B;8BAErC,cAAA,6LAAC;wBAAI,WAAU;kCACZ,eAAe,GAAG,CAAC,CAAC,wBACnB,6LAAC;gCAAqB,WAAU;;kDAE9B,6LAAC;wCACC,SAAS;wCACT,kBAAkB;wCAClB,UAAU;wCACV,UAAU;wCACV,aAAa,cAAc,kBAAkB;wCAC7C,cAAc;wCACd,UAAU;wCACV,SAAS;;;;;;oCAIV,eACC,kBAAkB,QAAQ,EAAE,EAAE,GAAG,CAAC,CAAC,uBACjC,6LAAC;4CAEC,SAAS;4CACT,QAAQ;4CACR,kBAAkB;4CAClB,UAAU;4CACV,UAAU;4CACV,cAAc;4CACd,UAAU;4CACV,SAAS;2CARJ,OAAO,EAAE;;;;;;+BAjBZ,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;qCAkC5B,6LAAC;gBAAI,WAAU;0BACZ;;;;;;YAKJ,CAAC,0BACA,6LAAC;gBAAI,WAAU;0BACZ,yBACC,6LAAC;oBAAI,WAAW,CAAC,wBAAwB,EAAE,iBAAiB,SAAS,IAAI;;sCACvE,6LAAC,sIAAK;4BACJ,OAAO;4BACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;4BAClD,WAAW,CAAC;gCACV,IAAI,EAAE,GAAG,KAAK,SAAS;gCACvB,IAAI,EAAE,GAAG,KAAK,UAAU;oCACtB,YAAY;oCACZ,kBAAkB;oCAClB,mBAAmB;gCACrB;4BACF;4BACA,aACE,iBAAiB,wBAAwB;4BAE3C,WAAW,UAAU,gBAAgB;4BACrC,SAAS;;;;;;sCAEX,6LAAC,wIAAM;4BACL,MAAK;4BACL,SAAS;4BACT,UAAU,CAAC,gBAAgB,IAAI;sCAE/B,cAAA,6LAAC,gNAAK;gCAAC,WAAU;;;;;;;;;;;sCAEnB,6LAAC,wIAAM;4BACL,MAAK;4BACL,SAAQ;4BACR,SAAS;gCACP,YAAY;gCACZ,kBAAkB;gCAClB,mBAAmB;4BACrB;sCAEA,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;yCAIjB,6LAAC,wIAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAU;oBACV,SAAS,IAAM,YAAY;;sCAE3B,6LAAC,6MAAI;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;;;;;;;AAQ/C;IA1NgB;;QAmBE,4KAAU;;;MAnBZ"}},
    {"offset": {"line": 834, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\n// Use the original Dialog component\r\nconst Dialog = DialogPrimitive.Root\r\n\r\n// Create a Context to pass ID through the Dialog component tree\r\nconst DialogContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst DialogProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <DialogContext.Provider value={id}>{children}</DialogContext.Provider>;\r\n};\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> & { \r\n    id?: string;\r\n    open?: boolean;\r\n  }\r\n>(({ className, children, id: propId, open, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(DialogContext);\r\n  const id = propId || contextId || `dialog-${React.useId()}`;\r\n  \r\n  // Register with our modal context using the open prop\r\n  const { zIndex } = useModal(id, !!open, 'dialog');\r\n  \r\n  return (\r\n    <DialogPortal>\r\n      {/* Sử dụng overlay chỉ dành cho Dialog */}\r\n      <DialogOverlay style={{ zIndex: zIndex - 1 }} />\r\n      <DialogPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"dialog-content fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg sm:rounded-lg\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <DialogProvider id={id}>\r\n          {children}\r\n          <DialogPrimitive.Close\r\n            aria-label=\"Đóng\"\r\n            className=\"absolute right-4 top-4 flex h-9 w-9 items-center justify-center rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">Đóng</span>\r\n          </DialogPrimitive.Close>\r\n        </DialogProvider>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n})\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n  DialogProvider,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;;;;;;;;AAEA,oCAAoC;AACpC,MAAM,SAAS,6KAAoB;AAEnC,gEAAgE;AAChE,MAAM,8BAAgB,8KAAmB,CAAS;AAElD,wCAAwC;AACxC,MAAM,iBAAiB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IACjF,qBAAO,6LAAC,cAAc,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC7C;KAFM;AAIN,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;MAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,GAAA,2KAAgB,UAMpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;;IACtD,gDAAgD;IAChD,MAAM,YAAY,2KAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,OAAO,EAAE,sKAAW,IAAI;IAE3D,sDAAsD;IACtD,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAQ,EAAC,IAAI,CAAC,CAAC,MAAM;IAExC,qBACE,6LAAC;;0BAEC,6LAAC;gBAAc,OAAO;oBAAE,QAAQ,SAAS;gBAAE;;;;;;0BAC3C,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,kLACA;gBAEF,OAAO;oBAAE;gBAAO;gBACf,GAAG,KAAK;0BAET,cAAA,6LAAC;oBAAe,IAAI;;wBACjB;sCACD,6LAAC,8KAAqB;4BACpB,cAAW;4BACX,WAAU;;8CAEV,6LAAC,oMAAC;oCAAC,WAAU;;;;;;8CACb,6LAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;;QA5BqB,4IAAQ;;;;QAAR,4IAAQ;;;;AA6B7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 1044, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\ntype BaseSelectProps = React.ComponentPropsWithoutRef<typeof SelectPrimitive.Root>\r\n\r\ntype SelectProps = Omit<BaseSelectProps, \"value\" | \"defaultValue\"> & {\r\n  value?: string | undefined\r\n  defaultValue?: string | undefined\r\n}\r\n\r\nconst Select = ({ value, defaultValue, ...props }: SelectProps) => {\r\n  const controlledProps: Partial<BaseSelectProps> = {}\r\n\r\n  if (value !== undefined) {\r\n    controlledProps.value = value\r\n  }\r\n\r\n  if (defaultValue !== undefined) {\r\n    controlledProps.defaultValue = defaultValue\r\n  }\r\n\r\n  return <SelectPrimitive.Root {...props} {...controlledProps} />\r\n}\r\nSelect.displayName = SelectPrimitive.Root.displayName\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => {\r\n  const modalId = React.useId();\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const { zIndex } = useModal(modalId, isOpen, 'select');\r\n\r\n  React.useEffect(() => {\r\n    const content = ref && 'current' in ref ? ref.current : null;\r\n    if (!content) return;\r\n\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'data-state') {\r\n          const target = mutation.target as HTMLElement;\r\n          const state = target.getAttribute('data-state');\r\n          setIsOpen(state === 'open');\r\n        }\r\n      });\r\n    });\r\n\r\n    observer.observe(content, { attributes: true, attributeFilter: ['data-state'] });\r\n\r\n    return () => observer.disconnect();\r\n  }, [ref]);\r\n\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  );\r\n})\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1335, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 1372, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1406, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype SwitchProps = Omit<\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>,\r\n  \"checked\" | \"defaultChecked\"\r\n> & {\r\n  checked?: boolean | undefined\r\n  defaultChecked?: boolean | undefined\r\n}\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  SwitchProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAeA,MAAM,uBAAS,2KAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,6LAAC,6KAAqB;QACpB,WAAW,IAAA,qHAAE,EACX,sXACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;QAC3D,KAAK;kBAEL,cAAA,6LAAC,8KAAsB;YACrB,WAAW,IAAA,qHAAE,EACX;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,6KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 1454, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b [&_tr]:border-border\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"group border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-9 px-4 text-left align-middle font-medium text-foreground [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center whitespace-nowrap\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-4 py-1 align-middle whitespace-nowrap [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center\", \r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,wCAAwC;QAAa,GAAG,KAAK;;;;;;;AAE9F,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,yEACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,2KAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,mGACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kLACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6IACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,2KAAgB,QAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 1591, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/virtualized-data-table.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Trash2, ChevronDown, ChevronsRight } from \"lucide-react\"\r\nimport { cn } from \"../../lib/utils\"\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"../ui/table\"\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"../ui/dropdown-menu\"\r\nimport type { ColumnDef } from './types'\r\n\r\ninterface BulkAction<TData> {\r\n  label: string\r\n  icon?: React.ComponentType<{ className?: string }>\r\n  onSelect: (selectedRows: TData[]) => void\r\n}\r\n\r\ninterface VirtualizedDataTableProps<TData extends { systemId: string }> {\r\n  columns: ColumnDef<TData>[]\r\n  data: TData[]\r\n  rowSelection: Record<string, boolean>\r\n  setRowSelection: (updater: React.SetStateAction<Record<string, boolean>>) => void\r\n  onBulkDelete?: () => void\r\n  showBulkDeleteButton?: boolean\r\n  bulkActions?: BulkAction<TData>[]\r\n  bulkActionButtons?: React.ReactNode\r\n  allSelectedRows: TData[]\r\n  renderSubComponent?: (row: TData) => React.ReactNode\r\n  expanded: Record<string, boolean>\r\n  setExpanded: (updater: React.SetStateAction<Record<string, boolean>>) => void\r\n  sorting: { id: string, desc: boolean }\r\n  setSorting: (updater: React.SetStateAction<{ id: string, desc: boolean }>) => void\r\n  columnVisibility: Record<string, boolean>\r\n  setColumnVisibility: React.Dispatch<React.SetStateAction<Record<string, boolean>>>\r\n  columnOrder: string[]\r\n  setColumnOrder: React.Dispatch<React.SetStateAction<string[]>>\r\n  pinnedColumns: string[]\r\n  setPinnedColumns: React.Dispatch<React.SetStateAction<string[]>>\r\n  onRowClick?: (row: TData) => void\r\n  className?: string\r\n  // Virtual scrolling specific props\r\n  estimateRowHeight?: number\r\n  overscan?: number\r\n  // Infinite scroll props\r\n  hasNextPage?: boolean\r\n  isFetchingNextPage?: boolean\r\n  fetchNextPage?: () => void\r\n}\r\n\r\nexport function VirtualizedDataTable<TData extends { systemId: string }>({\r\n  columns,\r\n  data,\r\n  rowSelection,\r\n  setRowSelection,\r\n  onBulkDelete,\r\n  showBulkDeleteButton = true,\r\n  bulkActions,\r\n  bulkActionButtons,\r\n  allSelectedRows,\r\n  renderSubComponent,\r\n  expanded,\r\n  setExpanded,\r\n  sorting,\r\n  setSorting,\r\n  columnVisibility,\r\n  setColumnVisibility,\r\n  columnOrder,\r\n  setColumnOrder,\r\n  pinnedColumns,\r\n  setPinnedColumns,\r\n  onRowClick,\r\n  className,\r\n  estimateRowHeight = 53,\r\n  overscan = 10,\r\n  hasNextPage,\r\n  isFetchingNextPage,\r\n  fetchNextPage,\r\n}: VirtualizedDataTableProps<TData>) {\r\n  \r\n  const tableContainerRef = React.useRef<HTMLDivElement>(null)\r\n  const headerTableRef = React.useRef<HTMLTableElement>(null)\r\n  const bodyTableRef = React.useRef<HTMLTableElement>(null)\r\n  \r\n  const numSelected = Object.keys(rowSelection).length\r\n  const isAllPageRowsSelected = data.length > 0 && data.every(row => rowSelection[row.systemId])\r\n  const isSomePageRowsSelected = !isAllPageRowsSelected && data.some(row => rowSelection[row.systemId])\r\n  \r\n  const handleToggleAllPageRows = (value: boolean) => {\r\n    const newSelection = { ...rowSelection }\r\n    data.forEach(row => {\r\n      if (value) {\r\n        newSelection[row.systemId] = true\r\n      } else {\r\n        delete newSelection[row.systemId]\r\n      }\r\n    })\r\n    setRowSelection(newSelection)\r\n  }\r\n\r\n  // Apply column visibility, order, and pinning\r\n  const displayColumns = React.useMemo(() => {\r\n    let cols = columns.filter(col => columnVisibility[col.id] !== false)\r\n    \r\n    if (columnOrder.length > 0) {\r\n      cols = cols.sort((a, b) => {\r\n        const aIndex = columnOrder.indexOf(a.id)\r\n        const bIndex = columnOrder.indexOf(b.id)\r\n        if (aIndex === -1 && bIndex === -1) return 0\r\n        if (aIndex === -1) return 1\r\n        if (bIndex === -1) return -1\r\n        return aIndex - bIndex\r\n      })\r\n    }\r\n\r\n    const leftPinned = cols.filter(c => pinnedColumns.includes(c.id) && (c.meta as any)?.sticky === 'left')\r\n    const rightPinned = cols.filter(c => pinnedColumns.includes(c.id) && (c.meta as any)?.sticky === 'right')\r\n    const middle = cols.filter(c => !pinnedColumns.includes(c.id))\r\n\r\n    return [...leftPinned, ...middle, ...rightPinned]\r\n  }, [columns, columnVisibility, columnOrder, pinnedColumns])\r\n\r\n  const leftStickyColumns = displayColumns.filter(c => (c.meta as any)?.sticky === 'left')\r\n  const rightStickyColumns = displayColumns.filter(c => (c.meta as any)?.sticky === 'right')\r\n\r\n  const leftOffsets = React.useMemo(() => {\r\n    let offset = 0\r\n    return leftStickyColumns.map(col => {\r\n      const currentOffset = offset\r\n      offset += col.size || 150\r\n      return currentOffset\r\n    })\r\n  }, [leftStickyColumns])\r\n\r\n  const rightOffsets = React.useMemo(() => {\r\n    let offset = 0\r\n    return rightStickyColumns.slice().reverse().map(col => {\r\n      const currentOffset = offset\r\n      offset += col.size || 150\r\n      return currentOffset\r\n    }).reverse()\r\n  }, [rightStickyColumns])\r\n\r\n  // Simple render - no virtual scrolling needed with pagination\r\n  // Pagination ensures we never render more than 20-100 rows\r\n  // Performance is excellent without virtualization complexity\r\n\r\n  return (\r\n    <div className={cn(\"w-full\", className)}>\r\n      {/* Header table - fixed */}\r\n      <div className=\"rounded-t-md border border-border border-b-0 bg-background overflow-hidden\">\r\n        <Table ref={headerTableRef}>\r\n          <TableHeader>\r\n            {numSelected > 0 && (\r\n              <tr className=\"bg-muted/50 border-b border-border\">\r\n                <th colSpan={displayColumns.length} className=\"p-0\">\r\n                  <div className=\"h-9 px-4 flex items-center gap-2\">\r\n                    {onBulkDelete && showBulkDeleteButton && (\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={onBulkDelete}\r\n                        className=\"h-8 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                        Xóa\r\n                      </Button>\r\n                    )}\r\n                    {bulkActions && (\r\n                      <DropdownMenu>\r\n                        <DropdownMenuTrigger asChild>\r\n                          <Button variant=\"outline\" size=\"sm\">\r\n                            Action\r\n                            <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                          </Button>\r\n                        </DropdownMenuTrigger>\r\n                        <DropdownMenuContent align=\"start\">\r\n                          {bulkActions.map((action, index) => (\r\n                            <DropdownMenuItem\r\n                              key={index}\r\n                              onSelect={() => action.onSelect(allSelectedRows)}\r\n                            >\r\n                              {action.icon && <action.icon className=\"mr-2 h-4 w-4\" />}\r\n                              {action.label}\r\n                            </DropdownMenuItem>\r\n                          ))}\r\n                        </DropdownMenuContent>\r\n                      </DropdownMenu>\r\n                    )}\r\n                    {bulkActionButtons}\r\n                    <div className=\"flex-1\"></div>\r\n                    <span className=\"text-sm font-medium\">{numSelected} mục đã chọn</span>\r\n                  </div>\r\n                </th>\r\n              </tr>\r\n            )}\r\n            <TableRow className=\"h-9\">\r\n              {displayColumns.map((column, colIndex) => {\r\n                const stickyMeta = (column.meta as any)?.sticky\r\n                const hasFixedSize = column.size !== undefined\r\n                const colSize = column.size || 150\r\n                \r\n                const style: React.CSSProperties = hasFixedSize ? { \r\n                  width: colSize, \r\n                  minWidth: colSize,\r\n                  maxWidth: colSize,\r\n                } : {\r\n                  minWidth: 100,\r\n                }\r\n                \r\n                let thClassName = \"bg-muted whitespace-nowrap\"\r\n\r\n                const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1\r\n\r\n                if (stickyMeta === 'left') {\r\n                  const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id)\r\n                  if (stickyIndex !== -1) {\r\n                    (style as any).position = 'sticky';\r\n                    (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n                    (style as any).top = 0;\r\n                    thClassName = cn(thClassName, \"z-30 bg-muted\")\r\n                  }\r\n                } else if (stickyMeta === 'right') {\r\n                  const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id)\r\n                  if (stickyIndex !== -1) {\r\n                    (style as any).position = 'sticky';\r\n                    (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n                    (style as any).top = 0;\r\n                    thClassName = cn(thClassName, \"z-30 bg-muted shadow-[-2px_0_4px_-2px_rgba(0,0,0,0.1)]\")\r\n                  }\r\n                }\r\n                \r\n                if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n                  thClassName = cn(thClassName, \"px-2 text-center\")\r\n                }\r\n\r\n                return (\r\n                  <TableHead \r\n                    key={column.id} \r\n                    style={style}\r\n                    className={cn(thClassName, {\r\n                      \"border-r border-border\": isLastLeftSticky,\r\n                    })}\r\n                  >\r\n                    {typeof column.header === 'function' \r\n                      // @ts-ignore\r\n                      ? column.header({ \r\n                          isAllPageRowsSelected, \r\n                          isSomePageRowsSelected, \r\n                          onToggleAll: handleToggleAllPageRows,\r\n                          sorting,\r\n                          setSorting\r\n                        }) \r\n                      : column.header}\r\n                  </TableHead>\r\n                )\r\n              })}\r\n            </TableRow>\r\n          </TableHeader>\r\n        </Table>\r\n      </div>\r\n\r\n      {/* Body table - natural height, scroll entire page */}\r\n      <div \r\n        ref={tableContainerRef}\r\n        className=\"rounded-b-md border border-border border-t-0 bg-background\"\r\n      >\r\n        <Table ref={bodyTableRef}>\r\n          <TableBody>\r\n            {data.length > 0 ? (\r\n              data.map((row, index) => {\r\n\r\n                return (\r\n                  <React.Fragment key={row.systemId}>\r\n                    <TableRow\r\n                      data-state={rowSelection[row.systemId] && \"selected\"}\r\n                      onClick={() => onRowClick?.(row)}\r\n                      className={cn('group', onRowClick && 'cursor-pointer')}\r\n                    >\r\n                      {displayColumns.map((column, colIndex) => {\r\n                        const isInteractiveColumn = ['select', 'control', 'actions', 'expander'].includes(column.id)\r\n                        const stickyMeta = (column.meta as any)?.sticky\r\n                        const hasFixedSize = column.size !== undefined\r\n                        const colSize = column.size || 150\r\n                        \r\n                        const style: React.CSSProperties = hasFixedSize ? {\r\n                          width: colSize,\r\n                          minWidth: colSize,\r\n                          maxWidth: colSize,\r\n                        } : {\r\n                          minWidth: 100,\r\n                        }\r\n                        \r\n                        let tdClassName = \"\"\r\n                        \r\n                        const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1\r\n\r\n                        if (stickyMeta === 'left') {\r\n                          const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id)\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n                            tdClassName = \"z-10 bg-background group-hover:bg-muted/50 group-data-[state=selected]:bg-muted transition-colors\"\r\n                          }\r\n                        } else if (stickyMeta === 'right') {\r\n                          const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id)\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n                            tdClassName = \"z-10 bg-background group-hover:bg-muted/50 group-data-[state=selected]:bg-muted transition-colors shadow-[-2px_0_4px_-2px_rgba(0,0,0,0.1)]\"\r\n                          }\r\n                        }\r\n                        \r\n                        if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n                          tdClassName = cn(tdClassName, \"px-2 text-center\")\r\n                        }\r\n\r\n                        return (\r\n                          <TableCell \r\n                            key={column.id}\r\n                            style={style}\r\n                            className={cn(tdClassName, {\r\n                              \"border-r border-border\": isLastLeftSticky,\r\n                            })}\r\n                            onClick={isInteractiveColumn ? (e) => e.stopPropagation() : undefined}\r\n                          >\r\n                            {column.cell({ \r\n                              row, \r\n                              isSelected: !!rowSelection[row.systemId],\r\n                              isExpanded: !!expanded[row.systemId],\r\n                              onToggleSelect: (value) => {\r\n                                setRowSelection(prev => {\r\n                                  const newSelection = {...prev}\r\n                                  if (value) {\r\n                                    newSelection[row.systemId] = true\r\n                                  } else {\r\n                                    delete newSelection[row.systemId]\r\n                                  }\r\n                                  return newSelection\r\n                                })\r\n                              },\r\n                              onToggleExpand: () => setExpanded(prev => ({ ...prev, [row.systemId]: !prev[row.systemId] })),\r\n                            })}\r\n                          </TableCell>\r\n                        )\r\n                      })}\r\n                    </TableRow>\r\n                    {expanded[row.systemId] && renderSubComponent && (\r\n                      <TableRow>\r\n                        <TableCell colSpan={displayColumns.length} className=\"p-0\">\r\n                          {renderSubComponent(row)}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    )}\r\n                  </React.Fragment>\r\n                )\r\n              })\r\n            ) : (\r\n              <TableRow>\r\n                <TableCell colSpan={displayColumns.length} className=\"h-24 text-center\">\r\n                  Không có dữ liệu\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2075, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0 sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,qHAAE,EACX,wIACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,yQACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,IAAA,gJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,IAAA,gJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 2235, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/confirm-dialog.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"./alert-dialog\";\r\n\r\ninterface ConfirmDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  title: string;\r\n  description: string;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  variant?: \"default\" | \"destructive\";\r\n  onConfirm: () => void;\r\n}\r\n\r\nexport const ConfirmDialog = React.memo(function ConfirmDialog({\r\n  open,\r\n  onOpenChange,\r\n  title,\r\n  description,\r\n  confirmText = \"Xác nhận\",\r\n  cancelText = \"Hủy\",\r\n  variant = \"default\",\r\n  onConfirm,\r\n}: ConfirmDialogProps) {\r\n  const handleConfirm = React.useCallback(() => {\r\n    onConfirm();\r\n    onOpenChange(false);\r\n  }, [onConfirm, onOpenChange]);\r\n  \r\n  // ⚡ OPTIMIZE: Don't render content when closed\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n      <AlertDialogContent>\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle>{title}</AlertDialogTitle>\r\n          <AlertDialogDescription>{description}</AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <AlertDialogFooter>\r\n          <AlertDialogCancel onClick={() => onOpenChange(false)}>\r\n            {cancelText}\r\n          </AlertDialogCancel>\r\n          <AlertDialogAction\r\n            onClick={handleConfirm}\r\n            className={variant === \"destructive\" ? \"bg-destructive text-destructive-foreground hover:bg-destructive/90\" : \"\"}\r\n          >\r\n            {confirmText}\r\n          </AlertDialogAction>\r\n        </AlertDialogFooter>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n});\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAsBO,MAAM,8BAAgB,GAAA,qKAAU,SAAC,SAAS,cAAc,EAC7D,IAAI,EACJ,YAAY,EACZ,KAAK,EACL,WAAW,EACX,cAAc,UAAU,EACxB,aAAa,KAAK,EAClB,UAAU,SAAS,EACnB,SAAS,EACU;;IACnB,MAAM,gBAAgB,4KAAiB;kEAAC;YACtC;YACA,aAAa;QACf;iEAAG;QAAC;QAAW;KAAa;IAE5B,+CAA+C;IAC/C,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,6LAAC,sJAAW;QAAC,MAAM;QAAM,cAAc;kBACrC,cAAA,6LAAC,6JAAkB;;8BACjB,6LAAC,4JAAiB;;sCAChB,6LAAC,2JAAgB;sCAAE;;;;;;sCACnB,6LAAC,iKAAsB;sCAAE;;;;;;;;;;;;8BAE3B,6LAAC,4JAAiB;;sCAChB,6LAAC,4JAAiB;4BAAC,SAAS,IAAM,aAAa;sCAC5C;;;;;;sCAEH,6LAAC,4JAAiB;4BAChB,SAAS;4BACT,WAAW,YAAY,gBAAgB,uEAAuE;sCAE7G;;;;;;;;;;;;;;;;;;;;;;;AAMb"}},
    {"offset": {"line": 2334, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,2KAAgB,MAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6LAAC,gLAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,qHAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,gLAAuB,CAAC,WAAW"}},
    {"offset": {"line": 2371, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium text-muted-foreground ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,2KAAkB;AAE/B,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,2KAAkB;QACjB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,uEACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,2KAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6ZACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 2438, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/progressive-image.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { cn } from '../../lib/utils';\r\n\r\ninterface ProgressiveImageProps extends React.ImgHTMLAttributes<HTMLImageElement> {\r\n  src: string;\r\n  placeholder?: string;\r\n  alt: string;\r\n  className?: string;\r\n  showSpinner?: boolean;\r\n}\r\n\r\n/**\r\n * Progressive image viewer that is safe under React StrictMode.\r\n * Renders the real `<img>` immediately and fades it in once loaded,\r\n * optionally showing a placeholder/spinner while loading.\r\n */\r\nexport const ProgressiveImage: React.FC<ProgressiveImageProps> = ({\r\n  src,\r\n  placeholder,\r\n  alt,\r\n  className,\r\n  showSpinner = true,\r\n  onLoad,\r\n  onError,\r\n  ...imgProps\r\n}) => {\r\n  const [loaded, setLoaded] = React.useState(false);\r\n  const [errored, setErrored] = React.useState(false);\r\n\r\n  const handleLoad = React.useCallback<React.ReactEventHandler<HTMLImageElement>>((event) => {\r\n    setLoaded(true);\r\n    setErrored(false);\r\n    onLoad?.(event as any);\r\n  }, [onLoad]);\r\n\r\n  const handleError = React.useCallback<React.ReactEventHandler<HTMLImageElement>>((event) => {\r\n    setErrored(true);\r\n    onError?.(event as any);\r\n  }, [onError]);\r\n\r\n  const hasValidSrc = Boolean(src && src.trim());\r\n\r\n  return (\r\n    <div className={cn('relative overflow-hidden bg-muted/20', className)}>\r\n      {!loaded && !errored && (\r\n        <>\r\n          {placeholder ? (\r\n            <img\r\n              src={placeholder}\r\n              alt=\"placeholder\"\r\n              className=\"absolute inset-0 h-full w-full object-cover blur-sm scale-105\"\r\n              aria-hidden=\"true\"\r\n            />\r\n          ) : showSpinner ? (\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin\" />\r\n            </div>\r\n          ) : null}\r\n        </>\r\n      )}\r\n\r\n      {hasValidSrc && !errored ? (\r\n        <img\r\n          src={src}\r\n          alt={alt}\r\n          loading=\"lazy\"\r\n          decoding=\"async\"\r\n          onLoad={handleLoad}\r\n          onError={handleError}\r\n          className={cn(\r\n            'w-full h-full object-cover transition-opacity duration-300',\r\n            loaded ? 'opacity-100' : 'opacity-0'\r\n          )}\r\n          {...imgProps}\r\n        />\r\n      ) : (\r\n        <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground/60\">\r\n          <svg className=\"w-10 h-10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={1.5}>\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n          </svg>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAeO,MAAM,mBAAoD,CAAC,EAChE,GAAG,EACH,WAAW,EACX,GAAG,EACH,SAAS,EACT,cAAc,IAAI,EAClB,MAAM,EACN,OAAO,EACP,GAAG,UACJ;;IACC,MAAM,CAAC,QAAQ,UAAU,GAAG,yKAAc,CAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,yKAAc,CAAC;IAE7C,MAAM,aAAa,4KAAiB;oDAA4C,CAAC;YAC/E,UAAU;YACV,WAAW;YACX,SAAS;QACX;mDAAG;QAAC;KAAO;IAEX,MAAM,cAAc,4KAAiB;qDAA4C,CAAC;YAChF,WAAW;YACX,UAAU;QACZ;oDAAG;QAAC;KAAQ;IAEZ,MAAM,cAAc,QAAQ,OAAO,IAAI,IAAI;IAE3C,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,wCAAwC;;YACxD,CAAC,UAAU,CAAC,yBACX;0BACG,4BACC,6LAAC;oBACC,KAAK;oBACL,KAAI;oBACJ,WAAU;oBACV,eAAY;;;;;+DAEZ,4BACF,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;;;;;;;;;+DAEf;;YAIP,eAAe,CAAC,wBACf,6LAAC;gBACC,KAAK;gBACL,KAAK;gBACL,SAAQ;gBACR,UAAS;gBACT,QAAQ;gBACR,SAAS;gBACT,WAAW,IAAA,qHAAE,EACX,8DACA,SAAS,gBAAgB;gBAE1B,GAAG,QAAQ;;;;;yEAGd,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;oBAAY,SAAQ;oBAAY,MAAK;oBAAO,QAAO;oBAAe,aAAa;8BAC5F,cAAA,6LAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,GAAE;;;;;;;;;;;;;;;;;;;;;;AAMjE;GApEa;KAAA"}},
    {"offset": {"line": 2557, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/skeleton.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Card, CardContent } from \"../ui/card\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\ninterface SkeletonProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Skeleton - Base skeleton loading component\r\n */\r\nexport function Skeleton({ className, ...props }: SkeletonProps) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\n/**\r\n * MobileCardSkeleton - Loading placeholder for mobile cards\r\n */\r\nexport function MobileCardSkeleton({ \r\n  count = 3,\r\n  className \r\n}: { \r\n  count?: number | undefined;\r\n  className?: string | undefined;\r\n}) {\r\n  return (\r\n    <>\r\n      {Array.from({ length: count }).map((_, i) => (\r\n        <Card key={i} className={cn(\"overflow-hidden\", className)}>\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-start space-x-3\">\r\n              {/* Avatar skeleton */}\r\n              <Skeleton className=\"h-12 w-12 rounded-full flex-shrink-0\" />\r\n              \r\n              {/* Content skeleton */}\r\n              <div className=\"flex-1 space-y-2\">\r\n                <Skeleton className=\"h-4 w-3/4\" />\r\n                <Skeleton className=\"h-3 w-1/2\" />\r\n                <div className=\"space-y-1.5 pt-2\">\r\n                  <Skeleton className=\"h-3 w-full\" />\r\n                  <Skeleton className=\"h-3 w-2/3\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Footer skeleton */}\r\n            <div className=\"flex items-center justify-between mt-3 pt-3 border-t border-border\">\r\n              <Skeleton className=\"h-5 w-20\" />\r\n              <Skeleton className=\"h-3 w-24\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\n/**\r\n * TableSkeleton - Loading placeholder for tables\r\n */\r\nexport function TableSkeleton({ \r\n  rows = 5,\r\n  columns = 4 \r\n}: { \r\n  rows?: number;\r\n  columns?: number;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {Array.from({ length: rows }).map((_, rowIndex) => (\r\n        <div key={rowIndex} className=\"flex items-center space-x-4\">\r\n          {Array.from({ length: columns }).map((_, colIndex) => (\r\n            <div key={colIndex}>\r\n              <Skeleton \r\n                className={cn(\r\n                  \"h-9\",\r\n                  colIndex === 0 ? \"w-1/4\" : \"flex-1\"\r\n                )}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * CardGridSkeleton - Loading placeholder for card grids\r\n */\r\nexport function CardGridSkeleton({\r\n  count = 4,\r\n  columns = 4\r\n}: {\r\n  count?: number;\r\n  columns?: number;\r\n}) {\r\n  return (\r\n    <div className={`grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-${columns}`}>\r\n      {Array.from({ length: count }).map((_, i) => (\r\n        <Card key={i}>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-start justify-between mb-2\">\r\n              <Skeleton className=\"h-5 w-5 rounded\" />\r\n              <Skeleton className=\"h-4 w-16\" />\r\n            </div>\r\n            <Skeleton className=\"h-8 w-24 mb-2\" />\r\n            <Skeleton className=\"h-3 w-full\" />\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * FormSkeleton - Loading placeholder for forms\r\n */\r\nexport function FormSkeleton({ fields = 6 }: { fields?: number }) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {Array.from({ length: fields }).map((_, i) => (\r\n        <div key={i} className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-32\" />\r\n          <Skeleton className=\"h-9 w-full\" />\r\n        </div>\r\n      ))}\r\n      <div className=\"flex justify-end space-x-2 pt-4\">\r\n        <Skeleton className=\"h-9 w-24\" />\r\n        <Skeleton className=\"h-9 w-24\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ChartSkeleton - Loading placeholder for charts\r\n */\r\nexport function ChartSkeleton({ height = \"300px\" }: { height?: string }) {\r\n  return (\r\n    <div className=\"w-full\" style={{ height }}>\r\n      <div className=\"flex items-end justify-between h-full space-x-2 pb-4\">\r\n        {[40, 70, 55, 80, 60, 90, 45].map((h, i) => (\r\n          <div key={i} className=\"flex-1\" style={{ height: `${h}%` }}>\r\n            <Skeleton className=\"w-full h-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"flex justify-between pt-2\">\r\n        {Array.from({ length: 7 }).map((_, i) => (\r\n          <div key={i}>\r\n            <Skeleton className=\"h-3 w-8\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * PageSkeleton - Loading placeholder for full pages\r\n */\r\nexport function PageSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"space-y-2\">\r\n        <Skeleton className=\"h-8 w-48\" />\r\n        <Skeleton className=\"h-4 w-96\" />\r\n      </div>\r\n      \r\n      {/* Actions */}\r\n      <div className=\"flex justify-between\">\r\n        <Skeleton className=\"h-9 w-64\" />\r\n        <Skeleton className=\"h-9 w-32\" />\r\n      </div>\r\n      \r\n      {/* Content */}\r\n      <CardGridSkeleton count={6} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3005, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/touch-button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Button } from \"../ui/button\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nconst touchButtonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-12 px-4 py-2 min-w-touch\", // Mobile-first: 48px height\r\n        sm: \"h-9 rounded-md px-3 min-w-touch\",\r\n        lg: \"h-14 rounded-md px-8 min-w-touch-lg\", // 56px height for large touch\r\n        xl: \"h-16 rounded-md px-10 min-w-touch-lg\", // 64px height for extra large\r\n        icon: \"h-12 w-12\", // Square touch target\r\n        \"icon-sm\": \"h-9 w-10\",\r\n        \"icon-lg\": \"h-14 w-14\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface TouchButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof touchButtonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\n/**\r\n * TouchButton - Mobile-optimized button with minimum 44px touch targets\r\n * Follows Apple HIG and Material Design guidelines for touch interfaces\r\n */\r\nconst TouchButton = React.forwardRef<HTMLButtonElement, TouchButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    return (\r\n      <Button\r\n        className={cn(touchButtonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nTouchButton.displayName = \"TouchButton\";\r\n\r\nexport { TouchButton, touchButtonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,sBAAsB,IAAA,0KAAG,EAC7B,0RACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF;;;CAGC,GACD,MAAM,4BAAc,2KAAgB,MAClC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,qBACE,6LAAC,wIAAM;QACL,WAAW,IAAA,qHAAE,EAAC,oBAAoB;YAAE;YAAS;YAAM;QAAU;QAC7D,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 3077, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/empty-state.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { LucideIcon } from \"lucide-react\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { TouchButton } from \"./touch-button\";\r\n\r\ninterface EmptyStateProps {\r\n  icon?: LucideIcon | undefined;\r\n  title: string;\r\n  description?: string | undefined;\r\n  action?: React.ReactNode | undefined;\r\n  className?: string | undefined;\r\n  size?: \"sm\" | \"md\" | \"lg\" | undefined;\r\n}\r\n\r\n/**\r\n * EmptyState - Professional empty state component\r\n * Use cases:\r\n * - No search results\r\n * - Empty lists\r\n * - No data to display\r\n * - First-time user experience\r\n */\r\nexport function EmptyState({\r\n  icon: Icon,\r\n  title,\r\n  description,\r\n  action,\r\n  className,\r\n  size = \"md\",\r\n}: EmptyStateProps) {\r\n  const sizeClasses = {\r\n    sm: {\r\n      container: \"py-8\",\r\n      icon: \"h-12 w-12 mb-3\",\r\n      title: \"text-base\",\r\n      description: \"text-sm\",\r\n    },\r\n    md: {\r\n      container: \"py-12\",\r\n      icon: \"h-16 w-16 mb-4\",\r\n      title: \"text-lg\",\r\n      description: \"text-sm\",\r\n    },\r\n    lg: {\r\n      container: \"py-16\",\r\n      icon: \"h-20 w-20 mb-6\",\r\n      title: \"text-xl\",\r\n      description: \"text-base\",\r\n    },\r\n  };\r\n\r\n  const classes = sizeClasses[size];\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"flex flex-col items-center justify-center px-4 text-center\",\r\n        classes.container,\r\n        className\r\n      )}\r\n    >\r\n      {Icon && (\r\n        <Icon\r\n          className={cn(\r\n            \"text-muted-foreground\",\r\n            classes.icon\r\n          )}\r\n          strokeWidth={1.5}\r\n        />\r\n      )}\r\n      \r\n      <h3 className={cn(\"font-semibold mb-2\", classes.title)}>\r\n        {title}\r\n      </h3>\r\n      \r\n      {description && (\r\n        <p\r\n          className={cn(\r\n            \"text-muted-foreground mb-6 max-w-sm\",\r\n            classes.description\r\n          )}\r\n        >\r\n          {description}\r\n        </p>\r\n      )}\r\n      \r\n      {action && <div className=\"mt-2\">{action}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * SearchEmptyState - Specialized empty state for search results\r\n */\r\nexport function SearchEmptyState({\r\n  searchQuery,\r\n  onClear,\r\n}: {\r\n  searchQuery: string;\r\n  onClear?: () => void;\r\n}) {\r\n  return (\r\n    <EmptyState\r\n      title=\"Không tìm thấy kết quả\"\r\n      description={`Không có kết quả nào phù hợp với \"${searchQuery}\". Thử tìm kiếm với từ khóa khác.`}\r\n      action={\r\n        onClear && (\r\n          <TouchButton variant=\"outline\" onClick={onClear}>\r\n            Xóa bộ lọc\r\n          </TouchButton>\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;AAmBO,SAAS,WAAW,EACzB,MAAM,IAAI,EACV,KAAK,EACL,WAAW,EACX,MAAM,EACN,SAAS,EACT,OAAO,IAAI,EACK;IAChB,MAAM,cAAc;QAClB,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;QACA,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;QACA,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;IACF;IAEA,MAAM,UAAU,WAAW,CAAC,KAAK;IAEjC,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,8DACA,QAAQ,SAAS,EACjB;;YAGD,sBACC,6LAAC;gBACC,WAAW,IAAA,qHAAE,EACX,yBACA,QAAQ,IAAI;gBAEd,aAAa;;;;;;0BAIjB,6LAAC;gBAAG,WAAW,IAAA,qHAAE,EAAC,sBAAsB,QAAQ,KAAK;0BAClD;;;;;;YAGF,6BACC,6LAAC;gBACC,WAAW,IAAA,qHAAE,EACX,uCACA,QAAQ,WAAW;0BAGpB;;;;;;YAIJ,wBAAU,6LAAC;gBAAI,WAAU;0BAAQ;;;;;;;;;;;;AAGxC;KAnEgB;AAwET,SAAS,iBAAiB,EAC/B,WAAW,EACX,OAAO,EAIR;IACC,qBACE,6LAAC;QACC,OAAM;QACN,aAAa,CAAC,kCAAkC,EAAE,YAAY,iCAAiC,CAAC;QAChG,QACE,yBACE,6LAAC,0JAAW;YAAC,SAAQ;YAAU,SAAS;sBAAS;;;;;;;;;;;AAO3D;MApBgB"}},
    {"offset": {"line": 3184, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-pagination.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport {\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ChevronsLeft,\r\n  ChevronsRight,\r\n} from \"lucide-react\"\r\n\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"../ui/select\"\r\n\r\ninterface DataTablePaginationProps {\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  pageCount: number;\r\n  rowCount: number;\r\n  selectedRowCount: number;\r\n  setPageIndex: (index: number) => void;\r\n  setPageSize: (size: number) => void;\r\n  canPreviousPage: boolean;\r\n  canNextPage: boolean;\r\n}\r\n\r\nexport function DataTablePagination({\r\n  pageIndex,\r\n  pageSize,\r\n  pageCount,\r\n  rowCount,\r\n  selectedRowCount,\r\n  setPageIndex,\r\n  setPageSize,\r\n  canPreviousPage,\r\n  canNextPage,\r\n}: DataTablePaginationProps) {\r\n  // Generate page numbers to display\r\n  const getPageNumbers = () => {\r\n    const pages: (number | 'ellipsis')[] = [];\r\n    const showEllipsis = pageCount > 7;\r\n    \r\n    if (!showEllipsis) {\r\n      // Show all pages if 7 or fewer\r\n      for (let i = 0; i < pageCount; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      // Always show first page\r\n      pages.push(0);\r\n      \r\n      if (pageIndex <= 3) {\r\n        // Near start: 1 2 3 4 5 ... last\r\n        for (let i = 1; i < 5; i++) {\r\n          pages.push(i);\r\n        }\r\n        pages.push('ellipsis');\r\n        pages.push(pageCount - 1);\r\n      } else if (pageIndex >= pageCount - 4) {\r\n        // Near end: 1 ... N-4 N-3 N-2 N-1 N\r\n        pages.push('ellipsis');\r\n        for (let i = pageCount - 5; i < pageCount; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else {\r\n        // Middle: 1 ... current-1 current current+1 ... last\r\n        pages.push('ellipsis');\r\n        pages.push(pageIndex - 1);\r\n        pages.push(pageIndex);\r\n        pages.push(pageIndex + 1);\r\n        pages.push('ellipsis');\r\n        pages.push(pageCount - 1);\r\n      }\r\n    }\r\n    \r\n    return pages;\r\n  };\r\n  \r\n  const pageNumbers = getPageNumbers();\r\n  \r\n  return (\r\n    <div className=\"flex items-center justify-between px-2\">\r\n      <div className=\"flex-1 text-sm text-muted-foreground\">\r\n        {selectedRowCount} của{\" \"}\r\n        {rowCount} dòng được chọn.\r\n      </div>\r\n      <div className=\"flex items-center space-x-6 lg:space-x-8\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <p className=\"text-sm font-medium\">Số dòng mỗi trang</p>\r\n          <Select\r\n            value={`${pageSize}`}\r\n            onValueChange={(value) => {\r\n              setPageSize(Number(value))\r\n            }}\r\n          >\r\n            <SelectTrigger className=\"w-[70px]\">\r\n              <SelectValue placeholder={`${pageSize}`} />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {[10, 20, 30, 40, 50].map((size) => (\r\n                <SelectItem key={size} value={`${size}`}>\r\n                  {size}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-1\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"px-3\"\r\n            onClick={() => setPageIndex(pageIndex - 1)}\r\n            disabled={!canPreviousPage}\r\n          >\r\n            Previous\r\n          </Button>\r\n          \r\n          {pageNumbers.map((page, idx) => {\r\n            if (page === 'ellipsis') {\r\n              return (\r\n                <span key={`ellipsis-${idx}`} className=\"px-2 text-muted-foreground\">\r\n                  ...\r\n                </span>\r\n              );\r\n            }\r\n            \r\n            return (\r\n              <Button\r\n                key={page}\r\n                variant={pageIndex === page ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"w-9 p-0\"\r\n                onClick={() => setPageIndex(page)}\r\n              >\r\n                {page + 1}\r\n              </Button>\r\n            );\r\n          })}\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"px-3\"\r\n            onClick={() => setPageIndex(pageIndex + 1)}\r\n            disabled={!canNextPage}\r\n          >\r\n            Next\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAQA;AACA;;;;AAoBO,SAAS,oBAAoB,EAClC,SAAS,EACT,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,gBAAgB,EAChB,YAAY,EACZ,WAAW,EACX,eAAe,EACf,WAAW,EACc;IACzB,mCAAmC;IACnC,MAAM,iBAAiB;QACrB,MAAM,QAAiC,EAAE;QACzC,MAAM,eAAe,YAAY;QAEjC,IAAI,CAAC,cAAc;YACjB,+BAA+B;YAC/B,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,IAAK;gBAClC,MAAM,IAAI,CAAC;YACb;QACF,OAAO;YACL,yBAAyB;YACzB,MAAM,IAAI,CAAC;YAEX,IAAI,aAAa,GAAG;gBAClB,iCAAiC;gBACjC,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;oBAC1B,MAAM,IAAI,CAAC;gBACb;gBACA,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;YACzB,OAAO,IAAI,aAAa,YAAY,GAAG;gBACrC,oCAAoC;gBACpC,MAAM,IAAI,CAAC;gBACX,IAAK,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW,IAAK;oBAC9C,MAAM,IAAI,CAAC;gBACb;YACF,OAAO;gBACL,qDAAqD;gBACrD,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;gBACvB,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;gBACvB,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;YACzB;QACF;QAEA,OAAO;IACT;IAEA,MAAM,cAAc;IAEpB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;oBACZ;oBAAiB;oBAAK;oBACtB;oBAAS;;;;;;;0BAEZ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAAsB;;;;;;0CACnC,6LAAC,wIAAM;gCACL,OAAO,GAAG,UAAU;gCACpB,eAAe,CAAC;oCACd,YAAY,OAAO;gCACrB;;kDAEA,6LAAC,+IAAa;wCAAC,WAAU;kDACvB,cAAA,6LAAC,6IAAW;4CAAC,aAAa,GAAG,UAAU;;;;;;;;;;;kDAEzC,6LAAC,+IAAa;kDACX;4CAAC;4CAAI;4CAAI;4CAAI;4CAAI;yCAAG,CAAC,GAAG,CAAC,CAAC,qBACzB,6LAAC,4IAAU;gDAAY,OAAO,GAAG,MAAM;0DACpC;+CADc;;;;;;;;;;;;;;;;;;;;;;kCAQzB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,wIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,aAAa,YAAY;gCACxC,UAAU,CAAC;0CACZ;;;;;;4BAIA,YAAY,GAAG,CAAC,CAAC,MAAM;gCACtB,IAAI,SAAS,YAAY;oCACvB,qBACE,6LAAC;wCAA6B,WAAU;kDAA6B;uCAA1D,CAAC,SAAS,EAAE,KAAK;;;;;gCAIhC;gCAEA,qBACE,6LAAC,wIAAM;oCAEL,SAAS,cAAc,OAAO,YAAY;oCAC1C,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,aAAa;8CAE3B,OAAO;mCANH;;;;;4BASX;0CAEA,6LAAC,wIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,aAAa,YAAY;gCACxC,UAAU,CAAC;0CACZ;;;;;;;;;;;;;;;;;;;;;;;;AAOX;KAhIgB"}},
    {"offset": {"line": 3395, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/sticky-scrollbar.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { cn } from '../../lib/utils';\r\n\r\ninterface StickyScrollbarProps {\r\n  /** Ref to the scrollable element (table container) */\r\n  targetRef: React.RefObject<HTMLDivElement | null>;\r\n  /** Additional CSS classes */\r\n  className?: string | undefined;\r\n}\r\n\r\n/**\r\n * Sticky Horizontal Scrollbar Component\r\n * \r\n * Creates a sticky scrollbar at the bottom of the viewport that syncs with\r\n * the table's horizontal scroll. This allows users to scroll horizontally\r\n * without having to scroll to the bottom of the table first.\r\n */\r\nexport function StickyScrollbar({ targetRef, className }: StickyScrollbarProps) {\r\n  const scrollbarRef = React.useRef<HTMLDivElement>(null);\r\n  const [isVisible, setIsVisible] = React.useState(false);\r\n  const [scrollbarStyle, setScrollbarStyle] = React.useState<React.CSSProperties>({});\r\n  const [isMounted, setIsMounted] = React.useState(false);\r\n  const [updateTrigger, setUpdateTrigger] = React.useState(0); // ✅ Force update trigger\r\n\r\n  // Force re-render after mount to ensure refs are available\r\n  React.useEffect(() => {\r\n    setIsMounted(true);\r\n  }, []);\r\n\r\n  // ✅ Force update when target element changes size (e.g., columns added/removed)\r\n  React.useEffect(() => {\r\n    if (!isMounted || !targetRef.current) return;\r\n    \r\n    const targetElement = targetRef.current;\r\n    \r\n    // Watch for changes to table width/scrollWidth\r\n    const mutationObserver = new MutationObserver(() => {\r\n      setUpdateTrigger(prev => prev + 1);\r\n    });\r\n    \r\n    mutationObserver.observe(targetElement, {\r\n      attributes: true,\r\n      childList: true,\r\n      subtree: true,\r\n    });\r\n    \r\n    return () => {\r\n      mutationObserver.disconnect();\r\n    };\r\n  }, [targetRef, isMounted]);\r\n\r\n  React.useEffect(() => {\r\n    if (!isMounted) return;\r\n    \r\n    const targetElement = targetRef.current;\r\n    const scrollbarElement = scrollbarRef.current;\r\n    \r\n    if (!targetElement || !scrollbarElement) return;\r\n\r\n    let animationFrameId: number;\r\n\r\n    // Check if horizontal scrollbar is needed and update position\r\n    const updateScrollbar = () => {\r\n      const hasHorizontalScroll = targetElement.scrollWidth > targetElement.clientWidth;\r\n      setIsVisible(hasHorizontalScroll);\r\n      \r\n      if (hasHorizontalScroll) {\r\n        // Get the bounding rect to position the scrollbar correctly\r\n        const rect = targetElement.getBoundingClientRect();\r\n        \r\n        // Set the scrollbar position and width to match the table VIEWPORT\r\n        setScrollbarStyle({\r\n          left: `${rect.left}px`,\r\n          width: `${rect.width}px`,\r\n        });\r\n        \r\n        // ✅ FIX: Set the inner content width to match table's FULL scroll width\r\n        // This allows the scrollbar to scroll the full distance\r\n        const scrollContent = scrollbarElement.firstElementChild as HTMLDivElement;\r\n        if (scrollContent) {\r\n          scrollContent.style.width = `${targetElement.scrollWidth}px`;\r\n          scrollContent.style.height = '1px'; // Ensure height for scrollbar\r\n        }\r\n      }\r\n    };\r\n\r\n    // Sync scroll position: sticky scrollbar -> table\r\n    const handleStickyScroll = () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      animationFrameId = requestAnimationFrame(() => {\r\n        if (targetElement.scrollLeft !== scrollbarElement.scrollLeft) {\r\n          targetElement.scrollLeft = scrollbarElement.scrollLeft;\r\n        }\r\n      });\r\n    };\r\n\r\n    // Sync scroll position: table -> sticky scrollbar\r\n    const handleTableScroll = () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      animationFrameId = requestAnimationFrame(() => {\r\n        if (scrollbarElement.scrollLeft !== targetElement.scrollLeft) {\r\n          scrollbarElement.scrollLeft = targetElement.scrollLeft;\r\n        }\r\n      });\r\n    };\r\n\r\n    // Initial update\r\n    updateScrollbar();\r\n\r\n    // Add event listeners\r\n    scrollbarElement.addEventListener('scroll', handleStickyScroll, { passive: true });\r\n    targetElement.addEventListener('scroll', handleTableScroll, { passive: true });\r\n    window.addEventListener('resize', updateScrollbar, { passive: true });\r\n\r\n    // Re-check on content changes\r\n    const resizeObserver = new ResizeObserver(updateScrollbar);\r\n    resizeObserver.observe(targetElement);\r\n\r\n    return () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      scrollbarElement.removeEventListener('scroll', handleStickyScroll);\r\n      targetElement.removeEventListener('scroll', handleTableScroll);\r\n      window.removeEventListener('resize', updateScrollbar);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [targetRef, isMounted, updateTrigger]); // ✅ Re-run when updateTrigger changes\r\n\r\n  // Always render but conditionally show with visibility\r\n  return (\r\n    <div\r\n      ref={scrollbarRef}\r\n      className={cn(\r\n        \"fixed bottom-0 z-[100] overflow-x-auto overflow-y-hidden\",\r\n        \"h-3 bg-muted/90 backdrop-blur-sm border-t border-border shadow-[0_-2px_12px_rgba(0,0,0,0.08)]\",\r\n        \"transition-opacity duration-200\",\r\n        isVisible ? \"opacity-100\" : \"opacity-0 pointer-events-none\",\r\n        className\r\n      )}\r\n      style={scrollbarStyle}\r\n    >\r\n      {/* Invisible content div to create scrollbar width */}\r\n      <div className=\"h-px pointer-events-none\" />\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAgBO,SAAS,gBAAgB,EAAE,SAAS,EAAE,SAAS,EAAwB;;IAC5E,MAAM,eAAe,uKAAY,CAAiB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,yKAAc,CAAC;IACjD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,yKAAc,CAAsB,CAAC;IACjF,MAAM,CAAC,WAAW,aAAa,GAAG,yKAAc,CAAC;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,yKAAc,CAAC,IAAI,yBAAyB;IAEtF,2DAA2D;IAC3D,0KAAe;qCAAC;YACd,aAAa;QACf;oCAAG,EAAE;IAEL,gFAAgF;IAChF,0KAAe;qCAAC;YACd,IAAI,CAAC,aAAa,CAAC,UAAU,OAAO,EAAE;YAEtC,MAAM,gBAAgB,UAAU,OAAO;YAEvC,+CAA+C;YAC/C,MAAM,mBAAmB,IAAI;6CAAiB;oBAC5C;qDAAiB,CAAA,OAAQ,OAAO;;gBAClC;;YAEA,iBAAiB,OAAO,CAAC,eAAe;gBACtC,YAAY;gBACZ,WAAW;gBACX,SAAS;YACX;YAEA;6CAAO;oBACL,iBAAiB,UAAU;gBAC7B;;QACF;oCAAG;QAAC;QAAW;KAAU;IAEzB,0KAAe;qCAAC;YACd,IAAI,CAAC,WAAW;YAEhB,MAAM,gBAAgB,UAAU,OAAO;YACvC,MAAM,mBAAmB,aAAa,OAAO;YAE7C,IAAI,CAAC,iBAAiB,CAAC,kBAAkB;YAEzC,IAAI;YAEJ,8DAA8D;YAC9D,MAAM;6DAAkB;oBACtB,MAAM,sBAAsB,cAAc,WAAW,GAAG,cAAc,WAAW;oBACjF,aAAa;oBAEb,IAAI,qBAAqB;wBACvB,4DAA4D;wBAC5D,MAAM,OAAO,cAAc,qBAAqB;wBAEhD,mEAAmE;wBACnE,kBAAkB;4BAChB,MAAM,GAAG,KAAK,IAAI,CAAC,EAAE,CAAC;4BACtB,OAAO,GAAG,KAAK,KAAK,CAAC,EAAE,CAAC;wBAC1B;wBAEA,wEAAwE;wBACxE,wDAAwD;wBACxD,MAAM,gBAAgB,iBAAiB,iBAAiB;wBACxD,IAAI,eAAe;4BACjB,cAAc,KAAK,CAAC,KAAK,GAAG,GAAG,cAAc,WAAW,CAAC,EAAE,CAAC;4BAC5D,cAAc,KAAK,CAAC,MAAM,GAAG,OAAO,8BAA8B;wBACpE;oBACF;gBACF;;YAEA,kDAAkD;YAClD,MAAM;gEAAqB;oBACzB,qBAAqB;oBACrB,mBAAmB;wEAAsB;4BACvC,IAAI,cAAc,UAAU,KAAK,iBAAiB,UAAU,EAAE;gCAC5D,cAAc,UAAU,GAAG,iBAAiB,UAAU;4BACxD;wBACF;;gBACF;;YAEA,kDAAkD;YAClD,MAAM;+DAAoB;oBACxB,qBAAqB;oBACrB,mBAAmB;uEAAsB;4BACvC,IAAI,iBAAiB,UAAU,KAAK,cAAc,UAAU,EAAE;gCAC5D,iBAAiB,UAAU,GAAG,cAAc,UAAU;4BACxD;wBACF;;gBACF;;YAEA,iBAAiB;YACjB;YAEA,sBAAsB;YACtB,iBAAiB,gBAAgB,CAAC,UAAU,oBAAoB;gBAAE,SAAS;YAAK;YAChF,cAAc,gBAAgB,CAAC,UAAU,mBAAmB;gBAAE,SAAS;YAAK;YAC5E,OAAO,gBAAgB,CAAC,UAAU,iBAAiB;gBAAE,SAAS;YAAK;YAEnE,8BAA8B;YAC9B,MAAM,iBAAiB,IAAI,eAAe;YAC1C,eAAe,OAAO,CAAC;YAEvB;6CAAO;oBACL,qBAAqB;oBACrB,iBAAiB,mBAAmB,CAAC,UAAU;oBAC/C,cAAc,mBAAmB,CAAC,UAAU;oBAC5C,OAAO,mBAAmB,CAAC,UAAU;oBACrC,eAAe,UAAU;gBAC3B;;QACF;oCAAG;QAAC;QAAW;QAAW;KAAc,GAAG,sCAAsC;IAEjF,uDAAuD;IACvD,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,4DACA,iGACA,mCACA,YAAY,gBAAgB,iCAC5B;QAEF,OAAO;kBAGP,cAAA,6LAAC;YAAI,WAAU;;;;;;;;;;;AAGrB;GA/HgB;KAAA"}},
    {"offset": {"line": 3562, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/responsive-data-table.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Trash2, ChevronDown, ChevronsRight } from \"lucide-react\";\r\nimport { useBreakpoint } from \"../../contexts/breakpoint-context\";\r\nimport { Card, CardContent } from \"../ui/card\";\r\nimport { MobileCardSkeleton } from \"../mobile/skeleton\";\r\nimport { EmptyState } from \"../mobile/empty-state\";\r\nimport { TouchButton } from \"../mobile/touch-button\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"../ui/table\";\r\nimport { DataTablePagination } from \"./data-table-pagination\";\r\nimport { Button } from \"../ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"../ui/dropdown-menu\";\r\nimport { StickyScrollbar } from \"./sticky-scrollbar\";\r\nimport type { ColumnDef } from './types';\r\n\r\nexport interface BulkAction<TData> {\r\n  label: string;\r\n  icon?: React.ComponentType<{ className?: string }>;\r\n  onSelect: (selectedRows: TData[]) => void;\r\n}\r\n\r\ninterface DesktopDataTableProps<TData extends { systemId: string }> {\r\n  columns: ColumnDef<TData>[];\r\n  data: TData[];\r\n  pageCount: number;\r\n  pagination: { pageIndex: number; pageSize: number };\r\n  setPagination: (updater: React.SetStateAction<{ pageIndex: number; pageSize: number }>) => void;\r\n  rowCount: number;\r\n  rowSelection: Record<string, boolean>;\r\n  setRowSelection: (updater: React.SetStateAction<Record<string, boolean>>) => void;\r\n  onBulkDelete?: (() => void) | undefined;\r\n  showBulkDeleteButton?: boolean | undefined;\r\n  bulkActions?: BulkAction<TData>[] | undefined;\r\n  pkgxBulkActions?: BulkAction<TData>[] | undefined;\r\n  bulkActionButtons?: React.ReactNode | undefined;\r\n  allSelectedRows: TData[];\r\n  renderSubComponent?: ((row: TData) => React.ReactNode) | undefined;\r\n  expanded: Record<string, boolean>;\r\n  setExpanded: (updater: React.SetStateAction<Record<string, boolean>>) => void;\r\n  sorting: { id: string; desc: boolean };\r\n  setSorting: (updater: React.SetStateAction<{ id: string; desc: boolean }>) => void;\r\n  columnVisibility: Record<string, boolean>;\r\n  setColumnVisibility: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\r\n  columnOrder: string[];\r\n  setColumnOrder: React.Dispatch<React.SetStateAction<string[]>>;\r\n  pinnedColumns: string[];\r\n  setPinnedColumns: React.Dispatch<React.SetStateAction<string[]>>;\r\n  onRowClick?: ((row: TData) => void) | undefined;\r\n  getRowStyle?: ((row: TData) => React.CSSProperties) | undefined;\r\n  className?: string | undefined;\r\n}\r\n\r\ninterface ResponsiveDataTableProps<TData extends { systemId: string }> {\r\n  // Required props\r\n  columns: ColumnDef<TData>[];\r\n  data: TData[];\r\n  \r\n  // Mobile-specific\r\n  renderMobileCard?: ((row: TData, index: number) => React.ReactNode) | undefined;\r\n  mobileCardClassName?: string | undefined;\r\n  autoGenerateMobileCards?: boolean | undefined;\r\n  mobileVirtualized?: boolean | undefined;\r\n  mobileRowHeight?: number | undefined;\r\n  mobileListHeight?: number | undefined;\r\n  \r\n  // States\r\n  isLoading?: boolean | undefined;\r\n  emptyTitle?: string | undefined;\r\n  emptyDescription?: string | undefined;\r\n  emptyAction?: React.ReactNode | undefined;\r\n  \r\n  // Desktop DataTable props\r\n  pageCount: number;\r\n  pagination: { pageIndex: number; pageSize: number };\r\n  setPagination: (updater: React.SetStateAction<{ pageIndex: number; pageSize: number }>) => void;\r\n  rowCount: number;\r\n  rowSelection?: Record<string, boolean> | undefined;\r\n  setRowSelection?: ((updater: React.SetStateAction<Record<string, boolean>>) => void) | undefined;\r\n  onBulkDelete?: (() => void) | undefined;\r\n  showBulkDeleteButton?: boolean | undefined;\r\n  bulkActions?: BulkAction<TData>[] | undefined;\r\n  pkgxBulkActions?: BulkAction<TData>[] | undefined;\r\n  bulkActionButtons?: React.ReactNode | undefined;\r\n  allSelectedRows?: TData[] | undefined;\r\n  renderSubComponent?: ((row: TData) => React.ReactNode) | undefined;\r\n  expanded?: Record<string, boolean> | undefined;\r\n  setExpanded?: ((updater: React.SetStateAction<Record<string, boolean>>) => void) | undefined;\r\n  sorting: { id: string; desc: boolean };\r\n  setSorting: (updater: React.SetStateAction<{ id: string; desc: boolean }>) => void;\r\n  columnVisibility?: Record<string, boolean> | undefined;\r\n  setColumnVisibility?: React.Dispatch<React.SetStateAction<Record<string, boolean>>> | undefined;\r\n  columnOrder?: string[] | undefined;\r\n  setColumnOrder?: React.Dispatch<React.SetStateAction<string[]>> | undefined;\r\n  pinnedColumns?: string[] | undefined;\r\n  setPinnedColumns?: React.Dispatch<React.SetStateAction<string[]>> | undefined;\r\n  onRowClick?: ((row: TData) => void) | undefined;\r\n  getRowStyle?: ((row: TData) => React.CSSProperties) | undefined;\r\n  className?: string | undefined;\r\n}\r\n\r\n/**\r\n * ResponsiveDataTable - Auto-adaptive data display component\r\n * \r\n * Desktop (>= 768px): Full-featured DataTable with sorting, filtering, bulk actions\r\n * Mobile (< 768px): Card-based layout with touch-friendly interactions\r\n * \r\n * Features:\r\n * - Automatic responsive switching\r\n * - Loading states (skeleton)\r\n * - Empty states\r\n * - Mobile pagination\r\n * - Preserves functionality across breakpoints\r\n * \r\n * @example\r\n * <ResponsiveDataTable\r\n *   columns={columns}\r\n *   data={employees}\r\n *   renderMobileCard={(employee) => <EmployeeCard employee={employee} />}\r\n *   pagination={pagination}\r\n *   setPagination={setPagination}\r\n *   // ... other props\r\n * />\r\n */\r\nexport function ResponsiveDataTable<TData extends { systemId: string }>({\r\n  columns,\r\n  data,\r\n  renderMobileCard,\r\n  autoGenerateMobileCards = true,\r\n  mobileCardClassName,\r\n  isLoading = false,\r\n  emptyTitle = \"Không có dữ liệu\",\r\n  emptyDescription,\r\n  emptyAction,\r\n  mobileVirtualized = false,\r\n  mobileRowHeight = 180,\r\n  mobileListHeight = 600,\r\n  pageCount,\r\n  pagination,\r\n  setPagination,\r\n  rowCount,\r\n  rowSelection = {},\r\n  setRowSelection = () => {},\r\n  onBulkDelete,\r\n  showBulkDeleteButton = true,\r\n  bulkActions,\r\n  pkgxBulkActions,\r\n  bulkActionButtons,\r\n  allSelectedRows = [],\r\n  renderSubComponent,\r\n  expanded = {},\r\n  setExpanded = () => {},\r\n  sorting,\r\n  setSorting,\r\n  columnVisibility = {},\r\n  setColumnVisibility = () => {},\r\n  columnOrder = [],\r\n  setColumnOrder = () => {},\r\n  pinnedColumns = [],\r\n  setPinnedColumns = () => {},\r\n  onRowClick,\r\n  getRowStyle,\r\n  className,\r\n}: ResponsiveDataTableProps<TData>) {\r\n  const { isMobile } = useBreakpoint();\r\n  const autoCardColumns = React.useMemo(() => {\r\n    return columns\r\n      .filter(column => {\r\n        if (!column.id) return false;\r\n        if (['select', 'control', 'actions', 'expander'].includes(column.id)) return false;\r\n        if (columnVisibility && columnVisibility[column.id] === false) return false;\r\n        const meta = column.meta as Record<string, any> | undefined;\r\n        if (meta?.hideOnMobileCard) return false;\r\n        return true;\r\n      })\r\n      .slice(0, 6);\r\n  }, [columns, columnVisibility]);\r\n\r\n  const getColumnLabel = React.useCallback((column: ColumnDef<TData>) => {\r\n    if (typeof column.header === 'string') return column.header;\r\n    const meta = column.meta as Record<string, any> | undefined;\r\n    if (meta?.displayName) return meta.displayName;\r\n    return column.id || '';\r\n  }, []);\r\n\r\n  const renderColumnValue = React.useCallback((column: ColumnDef<TData>, row: TData) => {\r\n    if (typeof column.cell === 'function') {\r\n      return column.cell({\r\n        row,\r\n        isSelected: false,\r\n        isExpanded: false,\r\n        onToggleSelect: () => {},\r\n        onToggleExpand: () => {},\r\n      } as any);\r\n    }\r\n    if (column.accessorKey) {\r\n      const value = (row as any)[column.accessorKey as string];\r\n      if (value === undefined || value === null) return '—';\r\n      if (React.isValidElement(value)) return value;\r\n      return String(value);\r\n    }\r\n    return '—';\r\n  }, []);\r\n\r\n  const autoRenderMobileCard = React.useCallback((row: TData) => (\r\n    <MobileCardWrapper>\r\n      <div className=\"space-y-3 text-sm\">\r\n        {autoCardColumns.map(column => (\r\n          <div key={column.id}>\r\n            <div className=\"text-xs uppercase text-muted-foreground font-semibold\">\r\n              {getColumnLabel(column)}\r\n            </div>\r\n            <div className=\"text-base font-medium text-foreground\">\r\n              {renderColumnValue(column, row)}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </MobileCardWrapper>\r\n  ), [autoCardColumns, getColumnLabel, renderColumnValue]);\r\n\r\n  const hasAutoCardSupport = autoGenerateMobileCards !== false && autoCardColumns.length > 0;\r\n  const cardRenderer = renderMobileCard ?? (hasAutoCardSupport ? autoRenderMobileCard : undefined);\r\n  const shouldRenderMobileCards = Boolean(isMobile && cardRenderer);\r\n\r\n  const desktopProps: DesktopDataTableProps<TData> = {\r\n    columns,\r\n    data,\r\n    pageCount,\r\n    pagination,\r\n    setPagination,\r\n    rowCount,\r\n    rowSelection,\r\n    setRowSelection,\r\n    onBulkDelete,\r\n    showBulkDeleteButton,\r\n    bulkActions,\r\n    pkgxBulkActions,\r\n    bulkActionButtons,\r\n    allSelectedRows,\r\n    renderSubComponent,\r\n    expanded,\r\n    setExpanded,\r\n    sorting,\r\n    setSorting,\r\n    columnVisibility,\r\n    setColumnVisibility,\r\n    columnOrder,\r\n    setColumnOrder,\r\n    pinnedColumns,\r\n    setPinnedColumns,\r\n    onRowClick,\r\n    getRowStyle,\r\n    className,\r\n  };\r\n\r\n  // Loading state\r\n  if (isLoading) {\r\n    return shouldRenderMobileCards ? (\r\n      <MobileCardSkeleton count={pagination.pageSize || 10} className={mobileCardClassName} />\r\n    ) : (\r\n      <div className={cn(\"space-y-3\", className)}>\r\n        {Array.from({ length: pagination.pageSize || 10 }).map((_, i) => (\r\n          <div key={i} className=\"h-16 bg-muted animate-pulse rounded\" />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Empty state - only for mobile card mode\r\n  if (data.length === 0 && shouldRenderMobileCards) {\r\n    return (\r\n      <EmptyState\r\n        title={emptyTitle}\r\n        description={emptyDescription}\r\n        action={emptyAction}\r\n        className={className}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Mobile card layout\r\n  if (shouldRenderMobileCards && cardRenderer) {\r\n    if (mobileVirtualized) {\r\n      return (\r\n        <div\r\n          className={cn('pb-4', className)}\r\n          style={{ maxHeight: mobileListHeight, overflowY: 'auto' }}\r\n        >\r\n          {data.map((row, index) => (\r\n            <div\r\n              key={row.systemId}\r\n              className={mobileCardClassName}\r\n              style={{ minHeight: mobileRowHeight }}\r\n            >\r\n              {cardRenderer(row, index)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className={cn(\"space-y-3 pb-4\", className)}>\r\n        {data.map((row, index) => (\r\n          <div key={row.systemId} className={mobileCardClassName}>\r\n            {cardRenderer(row, index)}\r\n          </div>\r\n        ))}\r\n\r\n        {/* Mobile Pagination */}\r\n        {pageCount > 1 && (\r\n          <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n            <TouchButton\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setPagination(p => ({ ...p, pageIndex: Math.max(0, p.pageIndex - 1) }))}\r\n              disabled={pagination.pageIndex === 0}\r\n            >\r\n              Trước\r\n            </TouchButton>\r\n            \r\n            <div className=\"flex flex-col items-center gap-1\">\r\n              <span className=\"text-sm font-medium\">\r\n                Trang {pagination.pageIndex + 1} / {pageCount}\r\n              </span>\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                {rowCount} kết quả\r\n              </span>\r\n            </div>\r\n            \r\n            <TouchButton\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setPagination(p => ({ ...p, pageIndex: Math.min(pageCount - 1, p.pageIndex + 1) }))}\r\n              disabled={pagination.pageIndex >= pageCount - 1}\r\n            >\r\n              Sau\r\n            </TouchButton>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Desktop table layout\r\n  return <DesktopDataTable {...desktopProps} />;\r\n}\r\n\r\nfunction DesktopDataTable<TData extends { systemId: string }>({\r\n  columns,\r\n  data,\r\n  pageCount,\r\n  pagination,\r\n  setPagination,\r\n  rowCount,\r\n  rowSelection,\r\n  setRowSelection,\r\n  onBulkDelete,\r\n  showBulkDeleteButton = true,\r\n  bulkActions,\r\n  pkgxBulkActions,\r\n  bulkActionButtons,\r\n  allSelectedRows,\r\n  renderSubComponent,\r\n  expanded,\r\n  setExpanded,\r\n  sorting,\r\n  setSorting,\r\n  columnVisibility,\r\n  setColumnVisibility,\r\n  columnOrder,\r\n  setColumnOrder,\r\n  pinnedColumns,\r\n  setPinnedColumns,\r\n  onRowClick,\r\n  getRowStyle,\r\n  className,\r\n}: DesktopDataTableProps<TData>) {\r\n  const numSelected = Object.keys(rowSelection).length;\r\n  const isAllPageRowsSelected = data.length > 0 && data.every(row => rowSelection[row.systemId]);\r\n  const isSomePageRowsSelected = !isAllPageRowsSelected && data.some(row => rowSelection[row.systemId]);\r\n  const hasData = data?.length > 0;\r\n  const [columnWidths, setColumnWidths] = React.useState<Record<string, number>>({});\r\n  const stickyCellBg = 'var(--sticky-column-bg, rgba(255, 255, 255, 1))';\r\n  const stickyHeaderBg = 'var(--sticky-column-header-bg, var(--muted))';\r\n\r\n  const handleToggleAllPageRows = (value: boolean) => {\r\n    const newSelection = { ...rowSelection };\r\n    data.forEach(row => {\r\n      if (value) {\r\n        newSelection[row.systemId] = true;\r\n      } else {\r\n        delete newSelection[row.systemId];\r\n      }\r\n    });\r\n    setRowSelection(newSelection);\r\n  };\r\n\r\n  const displayColumns = React.useMemo(() => {\r\n    const expanderColumn: ColumnDef<TData> | null = renderSubComponent\r\n      ? {\r\n          id: 'expander',\r\n          header: () => null,\r\n          cell: ({ isExpanded, onToggleExpand }) => (\r\n            <div className=\"flex items-center justify-center\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onToggleExpand();\r\n                }}\r\n                className=\"h-8 w-8\"\r\n              >\r\n                <ChevronsRight className={cn('h-4 w-4 transition-transform', isExpanded && 'rotate-90')} />\r\n              </Button>\r\n            </div>\r\n          ),\r\n          size: 60,\r\n          meta: { displayName: 'Mở rộng', sticky: 'left' },\r\n        }\r\n      : null;\r\n\r\n    const allConfigurableColumns = expanderColumn ? [expanderColumn, ...columns] : [...columns];\r\n\r\n    const visibleMasterCols = allConfigurableColumns.filter(col => {\r\n      if (col.id === 'expander') return true;\r\n      const isVisible = columnVisibility[col.id];\r\n      return isVisible !== false;\r\n    });\r\n\r\n    const normalizedCols = visibleMasterCols.map(col => {\r\n      if (['select', 'control'].includes(col.id)) {\r\n        return {\r\n          ...col,\r\n          meta: { ...col.meta, sticky: 'left' as const },\r\n        };\r\n      }\r\n\r\n      if (col.id === 'actions') {\r\n        return {\r\n          ...col,\r\n          meta: { ...col.meta, sticky: 'right' as const },\r\n        };\r\n      }\r\n\r\n      return col;\r\n    });\r\n\r\n    const staticLeftCols = normalizedCols.filter(c => {\r\n      const meta = c.meta as any;\r\n      return meta?.sticky === 'left' && !['select', 'control', 'expander'].includes(c.id);\r\n    });\r\n    const staticRightCols = normalizedCols.filter(c => (c.meta as any)?.sticky === 'right');\r\n    const controlCols = normalizedCols.filter(c => ['select', 'control', 'expander'].includes(c.id));\r\n    const bodyCols = normalizedCols.filter(c => {\r\n      const meta = c.meta as any;\r\n      return !meta?.sticky && !['select', 'control', 'expander'].includes(c.id);\r\n    });\r\n\r\n    const orderedBodyCols = [...bodyCols].sort((a, b) => {\r\n      const indexA = columnOrder.indexOf(a.id);\r\n      const indexB = columnOrder.indexOf(b.id);\r\n      if (indexA === -1 && indexB === -1) return 0;\r\n      if (indexA === -1) return 1;\r\n      if (indexB === -1) return -1;\r\n      return indexA - indexB;\r\n    });\r\n\r\n    const userPinnedCols = orderedBodyCols\r\n      .filter(col => pinnedColumns.includes(col.id))\r\n      .map(col => ({\r\n        ...col,\r\n        meta: { ...col.meta, sticky: 'left' as const }\r\n      }));\r\n\r\n    const nonPinnedBodyCols = orderedBodyCols.filter(c => !pinnedColumns.includes(c.id));\r\n\r\n    return [\r\n      ...controlCols,\r\n      ...staticLeftCols,\r\n      ...userPinnedCols,\r\n      ...nonPinnedBodyCols,\r\n      ...staticRightCols,\r\n    ] as ColumnDef<TData>[];\r\n  }, [columns, columnVisibility, columnOrder, pinnedColumns, renderSubComponent]);\r\n\r\n  const leftStickyColumns = React.useMemo(() => displayColumns.filter(c => (c.meta as any)?.sticky === 'left'), [displayColumns]);\r\n  const rightStickyColumns = React.useMemo(() => displayColumns.filter(c => (c.meta as any)?.sticky === 'right'), [displayColumns]);\r\n\r\n  const getColumnWidth = React.useCallback((column: ColumnDef<TData>) => {\r\n    return column.size ?? columnWidths[column.id] ?? ((column.meta as any)?.minWidth ?? 140);\r\n  }, [columnWidths]);\r\n\r\n  const leftOffsets = React.useMemo(() => {\r\n      let offset = 0;\r\n      return leftStickyColumns.map(c => {\r\n          const width = getColumnWidth(c);\r\n          const currentOffset = offset;\r\n          offset += width;\r\n          return currentOffset;\r\n      });\r\n  }, [leftStickyColumns, getColumnWidth]);\r\n\r\n  const rightOffsets = React.useMemo(() => {\r\n      let offset = 0;\r\n      const reversedOffsets = [...rightStickyColumns].reverse().map(c => {\r\n          const width = getColumnWidth(c);\r\n          const currentOffset = offset;\r\n          offset += width;\r\n          return currentOffset;\r\n      });\r\n      return reversedOffsets.reverse();\r\n  }, [rightStickyColumns, getColumnWidth]);\r\n\r\n  const tableContainerRef = React.useRef<HTMLDivElement>(null);\r\n  const headerScrollRef = React.useRef<HTMLDivElement>(null);\r\n  const bodyTableRef = React.useRef<HTMLTableElement>(null);\r\n  const headerTableRef = React.useRef<HTMLTableElement>(null);\r\n  const fallbackTableRef = React.useCallback((node: HTMLTableElement | null) => {\r\n    headerTableRef.current = node;\r\n    bodyTableRef.current = node;\r\n  }, []);\r\n\r\n  const syncScroll = (source: 'header' | 'body') => {\r\n    if (!headerScrollRef.current || !tableContainerRef.current) return;\r\n\r\n    if (source === 'body') {\r\n      headerScrollRef.current.scrollLeft = tableContainerRef.current.scrollLeft;\r\n    } else {\r\n      tableContainerRef.current.scrollLeft = headerScrollRef.current.scrollLeft;\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!hasData) return;\r\n    if (!headerTableRef.current) return;\r\n\r\n    const syncWidths = () => {\r\n      const bodyTable = bodyTableRef.current;\r\n      const headerTable = headerTableRef.current;\r\n      if (!headerTable) return;\r\n\r\n      const bodyRow = bodyTable?.querySelector('tbody tr:first-child');\r\n      const headerRow = headerTable.querySelector('thead tr:last-child');\r\n      if (!headerRow) return;\r\n\r\n      const bodyCells = bodyRow ? Array.from(bodyRow.querySelectorAll('td')) : [];\r\n      const headerCells = Array.from(headerRow.querySelectorAll('th'));\r\n      const nextWidthMap: Record<string, number> = {};\r\n\r\n      displayColumns.forEach((column, index) => {\r\n        const sourceCell = bodyCells[index];\r\n        const fallbackCell = headerCells[index];\r\n        const width = sourceCell?.getBoundingClientRect().width || fallbackCell?.getBoundingClientRect().width;\r\n        if (width && headerCells[index]) {\r\n          headerCells[index].style.width = `${width}px`;\r\n          headerCells[index].style.minWidth = `${width}px`;\r\n          headerCells[index].style.maxWidth = `${width}px`;\r\n          nextWidthMap[column.id] = width;\r\n        }\r\n      });\r\n\r\n      if (bodyTable) {\r\n        headerTable.style.width = `${bodyTable.getBoundingClientRect().width}px`;\r\n      }\r\n\r\n      setColumnWidths(prev => {\r\n        let changed = false;\r\n        const updated = { ...prev };\r\n        Object.entries(nextWidthMap).forEach(([key, width]) => {\r\n          if (prev[key] !== width) {\r\n            changed = true;\r\n            updated[key] = width;\r\n          }\r\n        });\r\n        return changed ? updated : prev;\r\n      });\r\n    };\r\n\r\n    syncWidths();\r\n    window.addEventListener('resize', syncWidths);\r\n\r\n    const resizeObserver = new ResizeObserver(syncWidths);\r\n    if (bodyTableRef.current) {\r\n      resizeObserver.observe(bodyTableRef.current);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', syncWidths);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [data, displayColumns, hasData]);\r\n\r\n  const renderHeaderRow = (isSticky: boolean) => (\r\n    <TableRow className=\"h-9\">\r\n      {displayColumns.map((column, colIndex) => {\r\n        const stickyMeta = isSticky ? (column.meta as any)?.sticky : undefined;\r\n        const hasFixedSize = column.size !== undefined;\r\n        const fallbackMinWidth = (column.meta as any)?.minWidth ?? 140;\r\n\r\n        const style: React.CSSProperties = {};\r\n\r\n        if (hasFixedSize) {\r\n          style.width = column.size;\r\n          style.minWidth = column.size;\r\n          style.maxWidth = column.size;\r\n        } else {\r\n          style.minWidth = fallbackMinWidth;\r\n        }\r\n\r\n        let thClassName = \"bg-muted whitespace-nowrap\";\r\n\r\n        const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1;\r\n        const isFirstRightSticky = stickyMeta === 'right' && colIndex === displayColumns.length - rightStickyColumns.length;\r\n\r\n        if (isSticky && stickyMeta === 'left') {\r\n          const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id);\r\n          if (stickyIndex !== -1) {\r\n            (style as any).position = 'sticky';\r\n            (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n            (style as any).top = 0;\r\n            (style as any).backgroundColor = stickyHeaderBg;\r\n            thClassName = cn(thClassName, \"z-30 bg-muted shadow-sm\");\r\n          }\r\n        } else if (isSticky && stickyMeta === 'right') {\r\n          const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id);\r\n          if (stickyIndex !== -1) {\r\n            (style as any).position = 'sticky';\r\n            (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n            (style as any).top = 0;\r\n            (style as any).backgroundColor = stickyHeaderBg;\r\n            thClassName = cn(thClassName, \"z-30 bg-muted shadow-[-2px_0_4px_-2px_rgba(0,0,0,0.1)]\");\r\n          }\r\n        }\r\n\r\n        if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n          thClassName = cn(thClassName, \"px-2 text-center\");\r\n        }\r\n\r\n        return (\r\n          <TableHead\r\n            key={column.id}\r\n            style={style}\r\n            className={cn(thClassName, {\r\n              \"border-r border-border\": isSticky && isLastLeftSticky,\r\n            })}\r\n          >\r\n            {typeof column.header === 'function'\r\n              // @ts-ignore\r\n              ? column.header({\r\n                  isAllPageRowsSelected,\r\n                  isSomePageRowsSelected,\r\n                  onToggleAll: handleToggleAllPageRows,\r\n                  sorting,\r\n                  setSorting,\r\n                })\r\n              : column.header}\r\n          </TableHead>\r\n        );\r\n      })}\r\n    </TableRow>\r\n  );\r\n\r\n  return (\r\n    <div className={cn(\"flex flex-col w-full\", className)}>\r\n      {hasData ? (\r\n        <>\r\n          <div\r\n            ref={headerScrollRef}\r\n            onScroll={() => syncScroll('header')}\r\n            className=\"sticky top-32 z-30 overflow-x-auto rounded-t-md border border-border border-b-0 bg-muted [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n          >\r\n            <Table ref={headerTableRef}>\r\n              <TableHeader className=\"bg-muted shadow-sm\">\r\n                {numSelected > 0 && (\r\n                  <tr className=\"absolute inset-x-0 top-0 z-50 h-9 bg-muted/95 backdrop-blur-sm border-b border-border shadow-md\">\r\n                    <th className=\"sticky left-0 z-[60] bg-muted/95 backdrop-blur-sm px-3 w-[48px]\">\r\n                      {columns.find(c => c.id === 'select') &&\r\n                        typeof columns.find(c => c.id === 'select')!.header === 'function' &&\r\n                        // @ts-ignore\r\n                        columns.find(c => c.id === 'select')!.header({\r\n                          isAllPageRowsSelected,\r\n                          isSomePageRowsSelected,\r\n                          onToggleAll: handleToggleAllPageRows,\r\n                        })\r\n                      }\r\n                    </th>\r\n                    <th className=\"sticky left-[48px] z-[60] h-9 bg-muted/95 backdrop-blur-sm\">\r\n                      <div className=\"flex items-center gap-3 px-4\">\r\n                        <span className=\"text-sm font-medium\">{numSelected} mục đã chọn</span>\r\n                        {bulkActions && bulkActions.length > 0 && (\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                Action\r\n                                <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"start\">\r\n                              {bulkActions.map((action, index) => (\r\n                                <DropdownMenuItem\r\n                                  key={index}\r\n                                  onSelect={() => action.onSelect(allSelectedRows)}\r\n                                  disabled={(action as any).disabled}\r\n                                >\r\n                                  {action.icon && <action.icon className=\"mr-2 h-4 w-4\" />}\r\n                                  {action.label}\r\n                                </DropdownMenuItem>\r\n                              ))}\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        )}\r\n                        {pkgxBulkActions && pkgxBulkActions.length > 0 && (\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                PKGX\r\n                                <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"start\">\r\n                              {pkgxBulkActions.map((action, index) => (\r\n                                <DropdownMenuItem\r\n                                  key={index}\r\n                                  onSelect={() => action.onSelect(allSelectedRows)}\r\n                                  disabled={(action as any).disabled}\r\n                                  className={(action as any).variant === 'destructive' ? 'text-destructive focus:text-destructive' : ''}\r\n                                >\r\n                                  {action.icon && <action.icon className=\"mr-2 h-4 w-4\" />}\r\n                                  {action.label}\r\n                                </DropdownMenuItem>\r\n                              ))}\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        )}\r\n                        {bulkActionButtons}\r\n                      </div>\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n                {renderHeaderRow(true)}\r\n              </TableHeader>\r\n            </Table>\r\n          </div>\r\n\r\n          <div\r\n            ref={tableContainerRef}\r\n            onScroll={() => syncScroll('body')}\r\n            className=\"rounded-b-md border border-border bg-background overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n          >\r\n            <Table ref={bodyTableRef}>\r\n              <TableBody>\r\n                {data.map((row, rowIndex) => (\r\n                  <React.Fragment key={`${row.systemId}-${rowIndex}`}>\r\n                    <TableRow\r\n                      data-state={rowSelection[row.systemId] && \"selected\"}\r\n                      onClick={() => onRowClick?.(row)}\r\n                      className={cn('group', onRowClick && 'cursor-pointer')}\r\n                      style={getRowStyle?.(row)}\r\n                    >\r\n                      {displayColumns.map((column, colIndex) => {\r\n                        const isInteractiveColumn = ['select', 'control', 'actions', 'expander'].includes(column.id);\r\n\r\n                        const stickyMeta = (column.meta as any)?.sticky;\r\n                        const hasFixedSize = column.size !== undefined;\r\n                        const fallbackMinWidth = (column.meta as any)?.minWidth ?? 140;\r\n\r\n                        const style: React.CSSProperties = {};\r\n\r\n                        if (hasFixedSize) {\r\n                          style.width = column.size;\r\n                          style.minWidth = column.size;\r\n                          style.maxWidth = column.size;\r\n                        } else {\r\n                          style.minWidth = fallbackMinWidth;\r\n                        }\r\n\r\n                        let tdClassName = \"\";\r\n\r\n                        const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1;\r\n\r\n                        if (stickyMeta === 'left') {\r\n                          const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id);\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n                            const rowBgColor = getRowStyle?.(row)?.backgroundColor;\r\n                            (style as any).backgroundColor = rowBgColor || stickyCellBg;\r\n                            tdClassName = cn(\r\n                              \"z-20 shadow-[2px_0_6px_rgba(0,0,0,0.05)]\",\r\n                              \"bg-muted text-foreground group-hover:bg-muted group-data-[state=selected]:bg-muted\"\r\n                            );\r\n                          }\r\n                        } else if (stickyMeta === 'right') {\r\n                          const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id);\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n                            const rowBgColor = getRowStyle?.(row)?.backgroundColor;\r\n                            (style as any).backgroundColor = rowBgColor || stickyCellBg;\r\n                            tdClassName = cn(\r\n                              \"z-20\",\r\n                              \"bg-muted text-foreground group-hover:bg-muted group-data-[state=selected]:bg-muted shadow-[-2px_0_6px_rgba(0,0,0,0.08)]\"\r\n                            );\r\n                          }\r\n                        }\r\n\r\n                        if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n                          tdClassName = cn(tdClassName, \"px-2 text-center\");\r\n                        }\r\n\r\n                        return (\r\n                          <TableCell\r\n                            key={column.id}\r\n                            style={style}\r\n                            className={cn(tdClassName, {\r\n                              \"border-r border-border\": isLastLeftSticky,\r\n                            })}\r\n                            onClick={isInteractiveColumn ? (e) => e.stopPropagation() : undefined}\r\n                          >\r\n                            {column.cell({\r\n                              row,\r\n                              isSelected: !!rowSelection[row.systemId],\r\n                              isExpanded: !!expanded[row.systemId],\r\n                              onToggleSelect: (value) => {\r\n                                setRowSelection(prev => {\r\n                                  const newSelection = { ...prev };\r\n                                  if (value) {\r\n                                    newSelection[row.systemId] = true;\r\n                                  } else {\r\n                                    delete newSelection[row.systemId];\r\n                                  }\r\n                                  return newSelection;\r\n                                });\r\n                              },\r\n                              onToggleExpand: () => setExpanded(prev => ({ ...prev, [row.systemId]: !prev[row.systemId] })),\r\n                            })}\r\n                          </TableCell>\r\n                        );\r\n                      })}\r\n                    </TableRow>\r\n                    {expanded[row.systemId] && renderSubComponent && (\r\n                      <TableRow>\r\n                        <TableCell colSpan={displayColumns.length} className=\"p-0\">\r\n                          {renderSubComponent(row)}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    )}\r\n                  </React.Fragment>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div\r\n          ref={tableContainerRef}\r\n          className=\"rounded-md border border-border bg-background overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n        >\r\n          <Table ref={fallbackTableRef}>\r\n            <TableHeader className=\"bg-muted shadow-sm\">\r\n              {renderHeaderRow(true)}\r\n            </TableHeader>\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell colSpan={displayColumns.length} className=\"h-24 text-center\">\r\n                  Không có dữ liệu.\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex-shrink-0 border-t border-border bg-background px-6 py-3\">\r\n        <DataTablePagination\r\n          pageIndex={pagination.pageIndex}\r\n          pageSize={pagination.pageSize}\r\n          pageCount={pageCount}\r\n          setPageIndex={(index) => setPagination(p => ({ ...p, pageIndex: index }))}\r\n          setPageSize={(size) => setPagination({ pageIndex: 0, pageSize: size })}\r\n          canPreviousPage={pagination.pageIndex > 0}\r\n          canNextPage={pagination.pageIndex < pageCount - 1}\r\n          rowCount={rowCount}\r\n          selectedRowCount={numSelected}\r\n        />\r\n      </div>\r\n\r\n      <StickyScrollbar targetRef={tableContainerRef} />\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * MobileCardWrapper - Helper component for consistent mobile card styling\r\n */\r\nexport function MobileCardWrapper({\r\n  children,\r\n  onClick,\r\n  className,\r\n}: {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <Card\r\n      className={cn(\r\n        \"hover:shadow-md transition-shadow\",\r\n        onClick && \"cursor-pointer\",\r\n        className\r\n      )}\r\n      onClick={onClick}\r\n    >\r\n      <CardContent className=\"p-4\">\r\n        {children}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4741, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/calendar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport {\r\n  ChevronDownIcon,\r\n  ChevronLeftIcon,\r\n  ChevronRightIcon,\r\n} from \"lucide-react\"\r\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Button, buttonVariants } from \"./button\"\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  captionLayout = \"label\",\r\n  buttonVariant = \"ghost\",\r\n  formatters,\r\n  components,\r\n  ...props\r\n}: React.ComponentProps<typeof DayPicker> & {\r\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\r\n}) {\r\n  const defaultClassNames = getDefaultClassNames()\r\n\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\r\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\r\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\r\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\r\n        className\r\n      )}\r\n      captionLayout={captionLayout}\r\n      formatters={{\r\n        formatMonthDropdown: (date) =>\r\n          date.toLocaleString(\"default\", { month: \"short\" }),\r\n        ...formatters,\r\n      }}\r\n      classNames={{\r\n        root: cn(\"w-fit\", defaultClassNames.root),\r\n        months: cn(\r\n          \"relative flex flex-col gap-4 md:flex-row\",\r\n          defaultClassNames.months\r\n        ),\r\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\r\n        nav: cn(\r\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\r\n          defaultClassNames.nav\r\n        ),\r\n        button_previous: cn(\r\n          buttonVariants({ variant: buttonVariant }),\r\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\r\n          defaultClassNames.button_previous\r\n        ),\r\n        button_next: cn(\r\n          buttonVariants({ variant: buttonVariant }),\r\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\r\n          defaultClassNames.button_next\r\n        ),\r\n        month_caption: cn(\r\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\r\n          defaultClassNames.month_caption\r\n        ),\r\n        dropdowns: cn(\r\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\r\n          defaultClassNames.dropdowns\r\n        ),\r\n        dropdown_root: cn(\r\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\r\n          defaultClassNames.dropdown_root\r\n        ),\r\n        dropdown: cn(\"absolute inset-0 opacity-0\", defaultClassNames.dropdown),\r\n        caption_label: cn(\r\n          \"select-none font-medium\",\r\n          captionLayout === \"label\"\r\n            ? \"text-sm\"\r\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\r\n          defaultClassNames.caption_label\r\n        ),\r\n        table: \"w-full border-collapse\",\r\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\r\n        weekday: cn(\r\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\r\n          defaultClassNames.weekday\r\n        ),\r\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\r\n        week_number_header: cn(\r\n          \"w-[--cell-size] select-none\",\r\n          defaultClassNames.week_number_header\r\n        ),\r\n        week_number: cn(\r\n          \"text-muted-foreground select-none text-[0.8rem]\",\r\n          defaultClassNames.week_number\r\n        ),\r\n        day: cn(\r\n          \"relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none\",\r\n          props.showWeekNumber\r\n            ? \"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md\"\r\n            : \"[&:first-child[data-selected=true]_button]:rounded-l-md\",\r\n          defaultClassNames.day\r\n        ),\r\n        range_start: cn(\r\n          \"bg-accent rounded-l-md\",\r\n          defaultClassNames.range_start\r\n        ),\r\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\r\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\r\n        today: cn(\r\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\r\n          defaultClassNames.today\r\n        ),\r\n        outside: cn(\r\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\r\n          defaultClassNames.outside\r\n        ),\r\n        disabled: cn(\r\n          \"text-muted-foreground opacity-50\",\r\n          defaultClassNames.disabled\r\n        ),\r\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        Root: ({ className, rootRef, ...props }) => {\r\n          return (\r\n            <div\r\n              data-slot=\"calendar\"\r\n              ref={rootRef}\r\n              className={cn(className)}\r\n              {...props}\r\n            />\r\n          )\r\n        },\r\n        Chevron: ({ className, orientation, ...props }) => {\r\n          if (orientation === \"left\") {\r\n            return (\r\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\r\n            )\r\n          }\r\n\r\n          if (orientation === \"right\") {\r\n            return (\r\n              <ChevronRightIcon\r\n                className={cn(\"size-4\", className)}\r\n                {...props}\r\n              />\r\n            )\r\n          }\r\n\r\n          return (\r\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\r\n          )\r\n        },\r\n        DayButton: CalendarDayButton,\r\n        WeekNumber: ({ children, ...props }) => {\r\n          return (\r\n            <td {...props}>\r\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\r\n                {children}\r\n              </div>\r\n            </td>\r\n          )\r\n        },\r\n        ...components,\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CalendarDayButton({\r\n  className,\r\n  day,\r\n  modifiers,\r\n  ...props\r\n}: React.ComponentProps<typeof DayButton>) {\r\n  const defaultClassNames = getDefaultClassNames()\r\n\r\n  const ref = React.useRef<HTMLButtonElement>(null)\r\n  React.useEffect(() => {\r\n    if (modifiers.focused) ref.current?.focus()\r\n  }, [modifiers.focused])\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      data-day={day.date.toLocaleDateString()}\r\n      data-selected-single={\r\n        modifiers.selected &&\r\n        !modifiers.range_start &&\r\n        !modifiers.range_end &&\r\n        !modifiers.range_middle\r\n      }\r\n      data-range-start={modifiers.range_start}\r\n      data-range-end={modifiers.range_end}\r\n      data-range-middle={modifiers.range_middle}\r\n      className={cn(\r\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\r\n        defaultClassNames.day,\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Calendar, CalendarDayButton }\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4920, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-date-filter.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Calendar as CalendarIcon, X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuTrigger,\r\n} from \"../ui/dropdown-menu\"\r\nimport { Calendar } from \"../ui/calendar\"\r\nimport { Input } from \"../ui/input\"\r\nimport { formatDate, formatDateTime, formatDateTimeSeconds, formatDateCustom, getCurrentDate, isDateSame, isDateBetween, isDateAfter, isDateBefore, getDaysDiff, getMonthsDiff, addDays, addMonths, subtractDays, subtractMonths, getStartOfDay, getEndOfDay, getStartOfMonth, getEndOfMonth, getStartOfWeek, getEndOfWeek, toISODate, toISODateTime, isValidDate } from '../../lib/date-utils';\r\nconst presets = [\r\n    { key: 'today', label: 'Hôm nay', getRange: () => [getStartOfDay(getCurrentDate()), getEndOfDay(getCurrentDate())] },\r\n    { key: 'yesterday', label: 'Hôm qua', getRange: () => [getStartOfDay(subtractDays(getCurrentDate(), 1)), getEndOfDay(subtractDays(getCurrentDate(), 1))] },\r\n    { key: 'this_week', label: 'Tuần này', getRange: () => [getStartOfWeek(getCurrentDate()), getEndOfWeek(getCurrentDate())] },\r\n    { key: 'last_week', label: 'Tuần trước', getRange: () => [getStartOfWeek(subtractDays(getCurrentDate(), 7)), getEndOfWeek(subtractDays(getCurrentDate(), 7))] },\r\n    { key: 'this_month', label: 'Tháng này', getRange: () => [getStartOfMonth(getCurrentDate()), getEndOfMonth(getCurrentDate())] },\r\n    { key: 'last_month', label: 'Tháng trước', getRange: () => [getStartOfMonth(subtractMonths(getCurrentDate(), 1)), getEndOfMonth(subtractMonths(getCurrentDate(), 1))] },\r\n]\r\n\r\nfunction DateFilterContent({ value, onChange }: { value?: [string | undefined, string | undefined] | undefined; onChange: (value: [string | undefined, string | undefined] | undefined) => void }) {\r\n    // const { setOpen } = React.useContext(DropdownMenuContext);\r\n    const [initialFrom, initialTo] = value ?? [undefined, undefined];\r\n    \r\n    const [from, setFrom] = React.useState<Date | undefined>(initialFrom ? new Date(initialFrom) : undefined);\r\n    const [to, setTo] = React.useState<Date | undefined>(initialTo ? new Date(initialTo) : undefined);\r\n    \r\n    const [fromInput, setFromInput] = React.useState<string>(initialFrom ? formatDate(initialFrom) : '');\r\n    const [toInput, setToInput] = React.useState<string>(initialTo ? formatDate(initialTo) : '');\r\n    \r\n    const [calendarMonth, setCalendarMonth] = React.useState<Date>(\r\n      from ?? to ?? new Date()\r\n    );\r\n\r\n    React.useEffect(() => {\r\n        if (from && to && isDateAfter(new Date(from), new Date(to))) {\r\n            const tempFrom = from;\r\n            setFrom(to);\r\n            setTo(tempFrom);\r\n        }\r\n    }, [from, to]);\r\n\r\n\r\n    React.useEffect(() => {\r\n        setFromInput(from ? formatDate(from) : '');\r\n    }, [from]);\r\n\r\n    React.useEffect(() => {\r\n        setToInput(to ? formatDate(to) : '');\r\n    }, [to]);\r\n\r\n    const calculateActivePreset = (fromVal: Date | undefined, toVal: Date | undefined) => {\r\n        if (!fromVal || !toVal) return null;\r\n        for (const preset of presets) {\r\n            const [start, end] = preset.getRange();\r\n            if (fromVal && isDateSame(fromVal, start) && toVal && isDateSame(toVal, end)) {\r\n                return preset.key;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    const [activePreset, setActivePreset] = React.useState<string | null>(() => calculateActivePreset(from, to));\r\n\r\n    const [showCustom, setShowCustom] = React.useState(() => {\r\n        return (!!initialFrom || !!initialTo) && activePreset === null;\r\n    });\r\n\r\n    const handlePresetClick = (preset: typeof presets[0]) => {\r\n        const [newFrom, newTo] = preset.getRange();\r\n        setFrom(newFrom ?? undefined);\r\n        setTo(newTo ?? undefined);\r\n        setActivePreset(preset.key);\r\n        setShowCustom(false);\r\n        if (newFrom) setCalendarMonth(newFrom);\r\n    };\r\n\r\n    const handleCustomClick = () => {\r\n        setShowCustom(prev => !prev);\r\n        setActivePreset(null);\r\n    }\r\n\r\n    const handleDateSelect = (range: { from?: Date | undefined; to?: Date | undefined } | undefined) => {\r\n        setActivePreset(null);\r\n        if (!range) {\r\n            setFrom(undefined);\r\n            setTo(undefined);\r\n            return;\r\n        }\r\n        setFrom(range.from);\r\n        setTo(range.to);\r\n    }\r\n    \r\n    const handleDateInputChange = (e: React.ChangeEvent<HTMLInputElement>, type: 'from' | 'to') => {\r\n        const setInput = type === 'from' ? setFromInput : setToInput;\r\n        const setDate = type === 'from' ? setFrom : setTo;\r\n    \r\n        const value = e.target.value;\r\n        const digits = value.replace(/\\D/g, '');\r\n    \r\n        if (digits.length > 8) {\r\n            return;\r\n        }\r\n    \r\n        let dayStr = digits.slice(0, 2);\r\n        let monthStr = digits.slice(2, 4);\r\n        let yearStr = digits.slice(4, 8);\r\n    \r\n        if (dayStr.length === 2) {\r\n            let day = parseInt(dayStr, 10);\r\n            if (day > 31) dayStr = '31';\r\n            if (day === 0) dayStr = '01';\r\n        }\r\n        \r\n        if (monthStr.length === 2) {\r\n            let month = parseInt(monthStr, 10);\r\n            if (month > 12) monthStr = '12';\r\n            if (month === 0) monthStr = '01';\r\n        }\r\n    \r\n        if (dayStr.length === 2 && monthStr.length === 2) {\r\n            const month = parseInt(monthStr, 10);\r\n            const year = yearStr.length === 4 ? parseInt(yearStr, 10) : getCurrentDate().getFullYear();\r\n            \r\n            if (month >= 1 && month <= 12) {\r\n                const tempDate = new Date(year, month - 1);\r\n                if (tempDate && isValidDate(tempDate)) {\r\n                    const daysInMonth = new Date(tempDate.getFullYear(), tempDate.getMonth() + 1, 0).getDate();\r\n                    let day = parseInt(dayStr, 10);\r\n                    if (day > daysInMonth) {\r\n                        dayStr = String(daysInMonth);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        const newDigits = dayStr + monthStr + yearStr;\r\n        let formattedValue = dayStr;\r\n        if (newDigits.length > 2) {\r\n            formattedValue += '/' + monthStr;\r\n        }\r\n        if (newDigits.length > 4) {\r\n            formattedValue += '/' + yearStr;\r\n        }\r\n        \r\n        setInput(formattedValue);\r\n    \r\n        const finalDateStr = `${dayStr}/${monthStr}/${yearStr}`;\r\n        const parsedDate = finalDateStr.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/) ? new Date(finalDateStr.split('/').reverse().join('-')) : null;\r\n    \r\n        if (parsedDate && isValidDate(parsedDate)) {\r\n            setDate(parsedDate);\r\n            setCalendarMonth(parsedDate);\r\n            setActivePreset(null);\r\n        } else {\r\n            setDate(undefined);\r\n        }\r\n    };\r\n\r\n\r\n    const handleApply = () => {\r\n        if (from || to) {\r\n            onChange([\r\n                from ? toISODate(from) : undefined, \r\n                to ? toISODate(to) : undefined\r\n            ]);\r\n        } else {\r\n            onChange(undefined);\r\n        }\r\n        // setOpen(false);\r\n    };\r\n    \r\n    const isCustomActive = showCustom || (activePreset === null && (!!from || !!to));\r\n\r\n    return (\r\n        <div className=\"p-3 space-y-3\">\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n                {presets.map(preset => (\r\n                    <Button\r\n                        key={preset.key}\r\n                        variant={activePreset === preset.key ? \"secondary\" : \"outline\"}\r\n                        size=\"sm\"\r\n                        className=\"h-8 justify-center\"\r\n                        onClick={() => handlePresetClick(preset)}\r\n                    >\r\n                        {preset.label}\r\n                    </Button>\r\n                ))}\r\n            </div>\r\n            \r\n            <Button\r\n                variant={isCustomActive ? \"secondary\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"h-9 w-full justify-center\"\r\n                onClick={handleCustomClick}\r\n            >\r\n                Tùy chọn\r\n            </Button>\r\n            \r\n            {showCustom && (\r\n                <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center justify-center space-x-2\">\r\n                         <div className=\"relative\">\r\n                            <CalendarIcon className=\"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"dd/mm/yyyy\"\r\n                                value={fromInput}\r\n                                onChange={(e) => handleDateInputChange(e, 'from')}\r\n                                className=\"pl-8 h-9 text-sm\"\r\n                            />\r\n                        </div>\r\n                        <span className=\"text-muted-foreground\">-</span>\r\n                        <div className=\"relative\">\r\n                            <CalendarIcon className=\"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"dd/mm/yyyy\"\r\n                                value={toInput}\r\n                                onChange={(e) => handleDateInputChange(e, 'to')}\r\n                                className=\"pl-8 h-9 text-sm\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-center\">\r\n                        <Calendar\r\n                            mode=\"range\"\r\n                            selected={{ from: from, to: to }}\r\n                            onSelect={handleDateSelect}\r\n                            month={calendarMonth}\r\n                            onMonthChange={setCalendarMonth}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )}\r\n            \r\n            <Button size=\"sm\" onClick={handleApply} className=\"w-full h-9\">Lọc</Button>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface DataTableDateFilterProps {\r\n    value?: [string | undefined, string | undefined] | undefined;\r\n    onChange: (value: [string | undefined, string | undefined] | undefined) => void;\r\n    title?: string | undefined;\r\n}\r\n\r\nexport function DataTableDateFilter({\r\n  value,\r\n  onChange,\r\n  title = \"Ngày\",\r\n}: DataTableDateFilterProps) {\r\n    const [from, to] = value ?? [\"\", \"\"];\r\n    const isFiltered = !!(from || to);\r\n\r\n    let buttonText = title;\r\n    if (isFiltered) {\r\n        let presetLabel = '';\r\n        for (const preset of presets) {\r\n            const [start, end] = preset.getRange();\r\n            if (isDateSame(from, start) && isDateSame(to, end)) {\r\n                presetLabel = preset.label;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (presetLabel) {\r\n            buttonText = presetLabel;\r\n        } else {\r\n            const fromFormatted = from ? formatDate(from) : '...';\r\n            const toFormatted = to ? formatDate(to) : '...';\r\n            if (from && to) {\r\n                 buttonText = `${fromFormatted} - ${toFormatted}`;\r\n            } else if (from) {\r\n                buttonText = `Từ ${fromFormatted}`;\r\n            } else if (to) {\r\n                buttonText = `Đến ${toFormatted}`;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // Use state to track if the dropdown is open\r\n    const [isOpen, setIsOpen] = React.useState(false);\r\n  \r\n    return (\r\n    <div className=\"relative inline-flex w-full sm:w-auto h-9\">\r\n      <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className={cn(\r\n                \"h-9 w-full sm:w-[180px] lg:w-[220px] justify-start text-left font-normal flex items-center\",\r\n                !isFiltered && \"text-muted-foreground\",\r\n                isFiltered && \"pr-8\"\r\n            )}\r\n          >\r\n            <CalendarIcon className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n            <span className=\"truncate flex-1\">{buttonText}</span>\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent className=\"w-[300px] p-0\" align=\"start\" id=\"date-range-filter\">\r\n          {/* Bỏ overlay tối ở đây */}\r\n          <DateFilterContent value={value} onChange={(val) => {\r\n            onChange(val);\r\n            setIsOpen(false);\r\n          }} />\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n      {isFiltered && (\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            onChange(undefined);\r\n          }}\r\n          className=\"absolute right-0 top-0 h-9 w-8 p-0 hover:bg-transparent opacity-50 hover:opacity-100\"\r\n          aria-label=\"Xóa bộ lọc\"\r\n        >\r\n          <X className=\"h-4 w-4\"/>\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5428, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-toolbar.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Search } from \"lucide-react\"\r\nimport { Input } from \"../ui/input\"\r\nimport { DataTableFacetedFilter } from './data-table-faceted-filter';\r\nimport { DataTableDateFilter } from './data-table-date-filter';\r\nimport type { ColumnDef } from './types'\r\n\r\nexport interface DataTableToolbarProps<TData> {\r\n  search: string;\r\n  onSearchChange: (value: string) => void;\r\n  searchPlaceholder: string;\r\n  dateFilter?: [string | undefined, string | undefined] | undefined;\r\n  onDateFilterChange?: ((value: [string | undefined, string | undefined] | undefined) => void) | undefined;\r\n  dateFilterTitle?: string | undefined;\r\n  numResults?: number | undefined;\r\n  children?: React.ReactNode | undefined;\r\n}\r\n\r\nexport function DataTableToolbar<TData>({\r\n  search,\r\n  onSearchChange,\r\n  searchPlaceholder,\r\n  dateFilter,\r\n  onDateFilterChange,\r\n  dateFilterTitle,\r\n  numResults = 0,\r\n  children,\r\n}: DataTableToolbarProps<TData>) {\r\n  const isFiltered = search.length > 0;\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\r\n      <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-2\">\r\n        <div className=\"relative flex items-center\">\r\n          <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder={searchPlaceholder}\r\n            value={search}\r\n            onChange={(event) => onSearchChange(event.target.value)}\r\n            className=\"w-full sm:w-[200px] lg:w-[280px] pl-8\"\r\n          />\r\n           {isFiltered && (\r\n            <div className=\"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-muted-foreground\">\r\n              {numResults} kết quả\r\n            </div>\r\n          )}\r\n        </div>\r\n        {onDateFilterChange && (\r\n          <DataTableDateFilter value={dateFilter} onChange={onDateFilterChange} title={dateFilterTitle} />\r\n        )}\r\n      </div>\r\n      <div className=\"flex items-center gap-2 sm:ml-auto\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAcO,SAAS,iBAAwB,EACtC,MAAM,EACN,cAAc,EACd,iBAAiB,EACjB,UAAU,EACV,kBAAkB,EAClB,eAAe,EACf,aAAa,CAAC,EACd,QAAQ,EACqB;IAC7B,MAAM,aAAa,OAAO,MAAM,GAAG;IAEnC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,mNAAM;gCAAC,WAAU;;;;;;0CAClB,6LAAC,sIAAK;gCACJ,aAAa;gCACb,OAAO;gCACP,UAAU,CAAC,QAAU,eAAe,MAAM,MAAM,CAAC,KAAK;gCACtD,WAAU;;;;;;4BAEV,4BACA,6LAAC;gCAAI,WAAU;;oCACZ;oCAAW;;;;;;;;;;;;;oBAIjB,oCACC,6LAAC,yLAAmB;wBAAC,OAAO;wBAAY,UAAU;wBAAoB,OAAO;;;;;;;;;;;;0BAGjF,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;KAtCgB"}},
    {"offset": {"line": 5525, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/radio-group.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\n// --- Context ---\r\ntype RadioGroupContextType = {\r\n  value: string | number | undefined;\r\n  onValueChange: (value: string | number) => void;\r\n  name?: string | undefined;\r\n};\r\n\r\nconst RadioGroupContext = React.createContext<RadioGroupContextType | undefined>(undefined);\r\n\r\nconst useRadioGroup = () => {\r\n  const context = React.useContext(RadioGroupContext);\r\n  if (!context) {\r\n    throw new Error(\"useRadioGroup must be used within a RadioGroup\");\r\n  }\r\n  return context;\r\n};\r\n\r\n// --- RadioGroup ---\r\nconst RadioGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & {\r\n    value?: string | number | undefined;\r\n    defaultValue?: string | number | undefined;\r\n    onValueChange?: ((value: string | number) => void) | undefined;\r\n    name?: string | undefined;\r\n  }\r\n>(({ className, children, value, defaultValue, onValueChange, name, ...props }, ref) => {\r\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\r\n  const isControlled = value !== undefined;\r\n  const currentValue = isControlled ? value : internalValue;\r\n\r\n  const handleValueChange = (newValue: string | number) => {\r\n    if (!isControlled) {\r\n      setInternalValue(newValue);\r\n    }\r\n    if (onValueChange) {\r\n      onValueChange(newValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <RadioGroupContext.Provider value={{ value: currentValue, onValueChange: handleValueChange, name }}>\r\n      <div ref={ref} role=\"radiogroup\" className={cn(\"grid gap-2\", className)} {...props}>\r\n        {children}\r\n      </div>\r\n    </RadioGroupContext.Provider>\r\n  );\r\n});\r\nRadioGroup.displayName = \"RadioGroup\";\r\n\r\n// --- RadioGroupItem ---\r\nconst RadioGroupItem = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ButtonHTMLAttributes<HTMLButtonElement> & { value: string | number }\r\n>(({ className, value, children, ...props }, ref) => {\r\n  const { value: selectedValue, onValueChange, name } = useRadioGroup();\r\n  const isChecked = selectedValue === value;\r\n  const id = React.useId();\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      id={id}\r\n      type=\"button\"\r\n      role=\"radio\"\r\n      aria-checked={isChecked}\r\n      data-state={isChecked ? \"checked\" : \"unchecked\"}\r\n      onClick={() => onValueChange(value)}\r\n      name={name}\r\n      value={value}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {isChecked && (\r\n        <div className=\"flex items-center justify-center\">\r\n          <div className=\"h-2.5 w-2.5 rounded-full bg-current text-current\" />\r\n        </div>\r\n      )}\r\n    </button>\r\n  );\r\n});\r\nRadioGroupItem.displayName = \"RadioGroupItem\";\r\n\r\n\r\nexport { RadioGroup, RadioGroupItem };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;AASA,MAAM,kCAAoB,8KAAmB,CAAoC;AAEjF,MAAM,gBAAgB;;IACpB,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANM;AAQN,qBAAqB;AACrB,MAAM,2BAAa,IAAA,2KAAgB,UAQjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;;IAC9E,MAAM,CAAC,eAAe,iBAAiB,GAAG,yKAAc,CAAC;IACzD,MAAM,eAAe,UAAU;IAC/B,MAAM,eAAe,eAAe,QAAQ;IAE5C,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,cAAc;YACjB,iBAAiB;QACnB;QACA,IAAI,eAAe;YACjB,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE,OAAO;YAAc,eAAe;YAAmB;QAAK;kBAC/F,cAAA,6LAAC;YAAI,KAAK;YAAK,MAAK;YAAa,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAa,GAAG,KAAK;sBAC/E;;;;;;;;;;;AAIT;;AACA,WAAW,WAAW,GAAG;AAEzB,yBAAyB;AACzB,MAAM,+BAAiB,IAAA,2KAAgB,WAGrC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IAC3C,MAAM,EAAE,OAAO,aAAa,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG;IACtD,MAAM,YAAY,kBAAkB;IACpC,MAAM,KAAK,sKAAW;IAEtB,qBACE,6LAAC;QACC,KAAK;QACL,IAAI;QACJ,MAAK;QACL,MAAK;QACL,gBAAc;QACd,cAAY,YAAY,YAAY;QACpC,SAAS,IAAM,cAAc;QAC7B,MAAM;QACN,OAAO;QACP,WAAW,IAAA,qHAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAER,2BACC,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKzB;;QA5BwD;;;;QAAA;;;;AA6BxD,eAAe,WAAW,GAAG"}},
    {"offset": {"line": 5648, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-export-dialog.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Download, ArrowLeft } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport { Button } from '../ui/button';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from '../ui/dialog';\r\nimport { RadioGroup, RadioGroupItem } from '../ui/radio-group';\r\nimport { Label } from '../ui/label';\r\nimport { Checkbox } from '../ui/checkbox';\r\nimport type { ColumnDef } from './types';\r\n\r\nexport type ExportConfig<TData> = {\r\n  fileName: string;\r\n  columns: ColumnDef<TData>[];\r\n};\r\n\r\ninterface DataTableExportDialogProps<TData> {\r\n  children?: React.ReactNode;\r\n  allData: TData[];\r\n  filteredData: TData[];\r\n  pageData: TData[];\r\n  config: ExportConfig<TData>;\r\n}\r\n\r\nexport function DataTableExportDialog<TData>({ \r\n  children,\r\n  allData, \r\n  filteredData,\r\n  pageData,\r\n  config \r\n}: DataTableExportDialogProps<TData>) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [view, setView] = React.useState<'scope' | 'columns'>('scope');\r\n  const [exportScope, setExportScope] = React.useState<'all' | 'filtered' | 'page'>('filtered');\r\n  const [selectedColumns, setSelectedColumns] = React.useState<Record<string, boolean>>({});\r\n\r\n  const exportableColumns = React.useMemo(\r\n    () => config.columns.filter(c => c.id !== 'select' && c.id !== 'actions' && c.id !== 'expander' && c.id !== 'settings'),\r\n    [config.columns]\r\n  );\r\n  \r\n  React.useEffect(() => {\r\n    if (open) {\r\n      const initialSelection = Object.fromEntries(\r\n        exportableColumns.map(c => [c.id, true])\r\n      );\r\n      setSelectedColumns(initialSelection);\r\n    }\r\n  }, [open, exportableColumns]);\r\n\r\n  const handleExport = () => {\r\n    let dataToExport: TData[];\r\n    switch (exportScope) {\r\n      case 'all':\r\n        dataToExport = allData;\r\n        break;\r\n      case 'page':\r\n        dataToExport = pageData;\r\n        break;\r\n      case 'filtered':\r\n      default:\r\n        dataToExport = filteredData;\r\n        break;\r\n    }\r\n\r\n    const columnsToExport = exportableColumns.filter(c => selectedColumns[c.id]);\r\n    \r\n    const headers = columnsToExport.map(col => col.meta?.displayName ?? col.id);\r\n    \r\n    const mappedData = dataToExport.map(row => {\r\n        const rowData: Record<string, any> = {};\r\n        columnsToExport.forEach(col => {\r\n            const key = col.accessorKey as keyof TData;\r\n            rowData[col.meta?.displayName ?? col.id] = (row as any)[key as string];\r\n        });\r\n        return rowData;\r\n    });\r\n\r\n    const worksheet = XLSX.utils.json_to_sheet(mappedData, { header: headers });\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Sheet1\");\r\n    XLSX.writeFile(workbook, `${config.fileName}.xlsx`);\r\n\r\n    setOpen(false);\r\n  };\r\n  \r\n  const toggleSelectAll = (checked: boolean) => {\r\n    const newSelection = Object.fromEntries(exportableColumns.map(c => [c.id, checked]));\r\n    setSelectedColumns(newSelection);\r\n  }\r\n  \r\n  const areAllSelected = exportableColumns.every(c => selectedColumns[c.id]);\r\n  const isSomeSelected = exportableColumns.some(c => selectedColumns[c.id]);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        {children || (\r\n          <Button variant=\"outline\" size=\"sm\" className=\"ml-auto gap-1\">\r\n            <Download className=\"h-3.5 w-3.5\" />\r\n            <span>Xuất file</span>\r\n          </Button>\r\n        )}\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        {view === 'scope' ? (\r\n          <>\r\n            <DialogHeader>\r\n              <DialogTitle>Xuất file danh sách</DialogTitle>\r\n              <DialogDescription>\r\n                Chọn phạm vi và tùy chọn các trường dữ liệu bạn muốn xuất ra file Excel.\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n            <div className=\"space-y-4 py-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label>Giới hạn kết quả xuất</Label>\r\n                <RadioGroup value={exportScope} onValueChange={(v) => setExportScope(v as any)}>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"filtered\" id=\"filtered\" />\r\n                    <Label htmlFor=\"filtered\">Kết quả đã lọc ({filteredData.length} dòng)</Label>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"page\" id=\"page\" />\r\n                    <Label htmlFor=\"page\">Chỉ trang này ({pageData.length} dòng)</Label>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"all\" id=\"all\" />\r\n                    <Label htmlFor=\"all\">Tất cả ({allData.length} dòng)</Label>\r\n                  </div>\r\n                </RadioGroup>\r\n              </div>\r\n              <Button variant=\"link\" className=\"p-0 h-auto\" onClick={() => setView('columns')}>\r\n                Tùy chọn trường hiển thị\r\n              </Button>\r\n            </div>\r\n            <DialogFooter className=\"sm:justify-end\">\r\n              <Button type=\"button\" variant=\"secondary\" onClick={() => setOpen(false)}>\r\n                Thoát\r\n              </Button>\r\n              <Button type=\"button\" onClick={handleExport}>\r\n                Xuất file\r\n              </Button>\r\n            </DialogFooter>\r\n          </>\r\n        ) : (\r\n           <>\r\n            <DialogHeader>\r\n              <div className=\"flex items-center -ml-4\">\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\" onClick={() => setView('scope')}>\r\n                    <ArrowLeft className=\"h-4 w-4\" />\r\n                </Button>\r\n                <DialogTitle>Tùy chọn trường hiển thị</DialogTitle>\r\n              </div>\r\n              <DialogDescription>\r\n                Chọn các cột bạn muốn đưa vào file xuất.\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n            <div className=\"py-4 space-y-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <Checkbox\r\n                        id=\"select-all-columns\"\r\n                        checked={areAllSelected ? true : isSomeSelected ? \"indeterminate\" : false}\r\n                        onCheckedChange={(value) => toggleSelectAll(!!value)}\r\n                    />\r\n                    <Label htmlFor=\"select-all-columns\" className=\"font-semibold\">Chọn tất cả</Label>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 max-h-64 overflow-y-auto pr-2\">\r\n                    {exportableColumns.map(col => (\r\n                        <div key={col.id} className=\"flex items-center space-x-2\">\r\n                            <Checkbox\r\n                                id={`col-${col.id}`}\r\n                                checked={selectedColumns[col.id] || false}\r\n                                onCheckedChange={(checked) => setSelectedColumns(prev => ({...prev, [col.id]: !!checked}))}\r\n                            />\r\n                            <Label htmlFor={`col-${col.id}`} className=\"text-sm font-normal\">\r\n                                {col.meta?.displayName ?? col.id}\r\n                            </Label>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <DialogFooter className=\"sm:justify-end\">\r\n              <Button type=\"button\" variant=\"secondary\" onClick={() => setView('scope')}>\r\n                Quay lại\r\n              </Button>\r\n              <Button type=\"button\" onClick={handleExport}>\r\n                Xuất file\r\n              </Button>\r\n            </DialogFooter>\r\n           </>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6141, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-column-toggle.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Settings2, Search, X, Pin, GripVertical } from \"lucide-react\"\r\n\r\nimport { Button } from \"../ui/button\"\r\nimport { Checkbox } from \"../ui/checkbox\"\r\nimport { Input } from \"../ui/input\"\r\nimport { Label } from \"../ui/label\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"../ui/dialog\"\r\nimport { ScrollArea } from \"../ui/scroll-area\"\r\nimport { cn } from \"../../lib/utils\"\r\nimport type { ColumnDef } from './types'\r\nimport { Separator } from \"../ui/separator\"\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n} from '@dnd-kit/core'\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  useSortable,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\n\r\ninterface DataTableColumnCustomizerProps<TData> {\r\n  children?: React.ReactNode;\r\n  columns: ColumnDef<TData>[];\r\n  columnVisibility: Record<string, boolean>;\r\n  setColumnVisibility: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\r\n  columnOrder: string[];\r\n  setColumnOrder: React.Dispatch<React.SetStateAction<string[]>>;\r\n  pinnedColumns: string[];\r\n  setPinnedColumns: React.Dispatch<React.SetStateAction<string[]>>;\r\n  onResetToDefault?: () => void;\r\n}\r\n\r\nexport function DataTableColumnCustomizer<TData>({\r\n  children,\r\n  columns,\r\n  columnVisibility,\r\n  setColumnVisibility,\r\n  columnOrder,\r\n  setColumnOrder,\r\n  pinnedColumns,\r\n  setPinnedColumns,\r\n  onResetToDefault,\r\n}: DataTableColumnCustomizerProps<TData>) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  // Local state for changes within the dialog\r\n  const [localVisibility, setLocalVisibility] = React.useState<Record<string, boolean>>({});\r\n  const [localOrder, setLocalOrder] = React.useState<string[]>([]);\r\n  const [localPinned, setLocalPinned] = React.useState<string[]>([]);\r\n  const [search, setSearch] = React.useState('');\r\n  \r\n  // @dnd-kit sensors\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8, // 8px movement to start drag (prevents accidental drags)\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n  \r\n  const allConfigurableColumns = React.useMemo(() => \r\n    columns.filter(c => c.id !== 'select' && c.id !== 'actions' && c.id !== 'control' && c.id !== 'expander'),\r\n    [columns]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      // On open, sync local state with props\r\n      // ✅ FIX: Đảm bảo TẤT CẢ columns có trong localVisibility (không bị undefined)\r\n      const fullVisibility: Record<string, boolean> = {};\r\n      allConfigurableColumns.forEach(col => {\r\n        // Nếu columnVisibility có giá trị → dùng giá trị đó\r\n        // Nếu không → mặc định false (ẩn)\r\n        fullVisibility[col.id] = columnVisibility[col.id] ?? false;\r\n      });\r\n      \r\n      setLocalVisibility(fullVisibility);\r\n      setLocalPinned(pinnedColumns);\r\n      \r\n      const allIds = allConfigurableColumns.map(c => c.id);\r\n      const currentOrder = columnOrder.filter(id => allIds.includes(id));\r\n      const newIds = allIds.filter(id => !currentOrder.includes(id));\r\n      setLocalOrder([...currentOrder, ...newIds]);\r\n\r\n      setSearch('');\r\n    }\r\n  }, [open, columnVisibility, columnOrder, pinnedColumns, allConfigurableColumns]);\r\n\r\n\r\n  const handleSave = () => {\r\n    // ✅ FIX: Merge localVisibility với columnVisibility, giữ nguyên select & actions\r\n    setColumnVisibility(prev => ({\r\n      ...localVisibility,\r\n      select: true,      // Luôn giữ select visible\r\n      actions: true,     // Luôn giữ actions visible\r\n    }));\r\n    setColumnOrder(localOrder);\r\n    setPinnedColumns(localPinned);\r\n    setOpen(false);\r\n  };\r\n  \r\n  const handleReset = () => {\r\n    if (onResetToDefault) {\r\n      onResetToDefault();\r\n      return;\r\n    }\r\n\r\n    const defaultVisibleColumns = [\r\n      'id', 'fullName', 'workEmail', 'phone', 'department', \r\n      'jobTitle', 'hireDate', 'employmentStatus'\r\n    ];\r\n    \r\n    const initialVisibility: Record<string, boolean> = {};\r\n    allConfigurableColumns.forEach(c => {\r\n      initialVisibility[c.id] = defaultVisibleColumns.includes(c.id);\r\n    });\r\n\r\n    setLocalVisibility(initialVisibility);\r\n    setLocalOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n    setLocalPinned(['id']);\r\n  }\r\n\r\n  const toggleColumnVisibility = (colId: string, checked: boolean) => {\r\n    setLocalVisibility(prev => ({ ...prev, [colId]: checked }));\r\n  };\r\n  \r\n  const togglePin = (colId: string) => {\r\n    setLocalPinned(prev => \r\n        prev.includes(colId) \r\n        ? prev.filter(id => id !== colId) \r\n        : [...prev, colId]\r\n    );\r\n  };\r\n\r\n  const availableColumns = React.useMemo(() => \r\n    allConfigurableColumns.filter(c => !localVisibility[c.id] && ((c.meta as any)?.displayName ?? c.id).toLowerCase().includes(search.toLowerCase())),\r\n    [allConfigurableColumns, localVisibility, search]\r\n  );\r\n  \r\n  const { pinnedVisibleColumns, unpinnedVisibleColumns } = React.useMemo(() => {\r\n    const visibleCols = localOrder\r\n      .map(id => allConfigurableColumns.find(c => c.id === id))\r\n      .filter((c): c is ColumnDef<TData> => !!c && localVisibility[c.id]);\r\n\r\n    const pinned = visibleCols.filter(c => localPinned.includes(c.id));\r\n    const unpinned = visibleCols.filter(c => !localPinned.includes(c.id));\r\n    \r\n    return { pinnedVisibleColumns: pinned, unpinnedVisibleColumns: unpinned };\r\n  }, [localOrder, localPinned, localVisibility, allConfigurableColumns]);\r\n\r\n  const groupedAvailableColumns = React.useMemo(() => {\r\n    return availableColumns.reduce((groups, col) => {\r\n        const groupName = (col.meta as any)?.group || 'Thông tin khác';\r\n        if (!groups[groupName]) {\r\n            groups[groupName] = [];\r\n        }\r\n        groups[groupName].push(col);\r\n        return groups;\r\n    }, {} as Record<string, ColumnDef<TData>[]>);\r\n  }, [availableColumns]);\r\n\r\n  const handleDragEnd = (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n    \r\n    if (!over || active.id === over.id) return;\r\n    \r\n    const activeId = active.id as string;\r\n    const overId = over.id as string;\r\n    \r\n    // Check if both are in same group (pinned or unpinned)\r\n    const isActivePinned = localPinned.includes(activeId);\r\n    const isOverPinned = localPinned.includes(overId);\r\n    if (isActivePinned !== isOverPinned) return;\r\n\r\n    setLocalOrder((items) => {\r\n      const oldIndex = items.indexOf(activeId);\r\n      const newIndex = items.indexOf(overId);\r\n      \r\n      if (oldIndex === -1 || newIndex === -1) return items;\r\n      \r\n      return arrayMove(items, oldIndex, newIndex);\r\n    });\r\n  };\r\n  \r\n  const SortableColumnItem = ({ col }: { col: ColumnDef<TData> }) => {\r\n    const {\r\n      attributes,\r\n      listeners,\r\n      setNodeRef,\r\n      transform,\r\n      transition,\r\n      isDragging,\r\n    } = useSortable({ id: col.id });\r\n\r\n    const style = {\r\n      transform: CSS.Transform.toString(transform),\r\n      transition,\r\n    };\r\n\r\n    return (\r\n      <div\r\n        ref={setNodeRef}\r\n        style={style}\r\n        className={cn(\r\n          \"flex items-center p-2 rounded-md group\",\r\n          isDragging ? 'opacity-50' : 'hover:bg-muted/50'\r\n        )}\r\n      >\r\n        <div\r\n          {...attributes}\r\n          {...listeners}\r\n          className=\"cursor-grab active:cursor-grabbing touch-none\"\r\n        >\r\n          <GripVertical className=\"h-5 w-5 mr-2 text-muted-foreground\" />\r\n        </div>\r\n        <span className=\"flex-grow text-sm\">{ (col.meta as any)?.displayName ?? col.id }</span>\r\n        \r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className=\"h-7 w-7\"\r\n          onClick={() => togglePin(col.id)}\r\n        >\r\n          <Pin className={cn(\"h-4 w-4\", localPinned.includes(col.id) ? \"text-primary fill-current\" : \"text-muted-foreground\")} />\r\n        </Button>\r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className=\"h-7 w-7 text-muted-foreground hover:text-destructive\"\r\n          onClick={() => toggleColumnVisibility(col.id, false)}\r\n        >\r\n          <X className=\"h-4 w-4\" />\r\n        </Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        {children || (\r\n          <Button variant=\"outline\" size=\"sm\">\r\n            <Settings2 className=\"mr-2 h-4 w-4\" />\r\n            Điều chỉnh cột\r\n          </Button>\r\n        )}\r\n      </DialogTrigger>\r\n      <DialogContent className=\"max-w-3xl h-[75vh] flex flex-col\" open={open}>\r\n        <DialogHeader>\r\n          <DialogTitle>Điều chỉnh cột hiển thị</DialogTitle>\r\n          <DialogDescription>\r\n            Chọn, sắp xếp và ghim các cột để tùy chỉnh giao diện bảng của bạn.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div className=\"flex flex-col md:flex-row gap-6 flex-grow min-h-0\">\r\n            {/* Left Panel: Available Columns */}\r\n            <div className=\"flex flex-col border rounded-lg flex-1 min-h-0\">\r\n                <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold mb-2\">Thêm cột hiển thị</h3>\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"Tìm kiếm cột...\"\r\n                            className=\"w-full pl-8 h-9\"\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <ScrollArea className=\"flex-grow p-4\">\r\n                    <div className=\"space-y-4\">\r\n                        {Object.keys(groupedAvailableColumns).map((groupName) => {\r\n                            const cols = groupedAvailableColumns[groupName];\r\n                            if (!Array.isArray(cols) || cols.length === 0) return null;\r\n                            return (\r\n                                <div key={groupName}>\r\n                                    <h4 className=\"text-sm font-semibold mb-2 text-muted-foreground\">{groupName}</h4>\r\n                                    <div className=\"space-y-2\">\r\n                                    {cols.map(col => (\r\n                                        <div key={col.id} className=\"flex items-center space-x-2\">\r\n                                            <Checkbox \r\n                                                id={`add-${col.id}`}\r\n                                                checked={localVisibility[col.id] || false}\r\n                                                onCheckedChange={(checked) => toggleColumnVisibility(col.id, !!checked)}\r\n                                            />\r\n                                            <Label htmlFor={`add-${col.id}`} className=\"font-normal text-sm\">{ (col.meta as any)?.displayName ?? col.id }</Label>\r\n                                        </div>\r\n                                    ))}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                         {availableColumns.length === 0 && (\r\n                            <p className=\"text-sm text-muted-foreground text-center py-4\">Không có cột nào.</p>\r\n                        )}\r\n                    </div>\r\n                </ScrollArea>\r\n            </div>\r\n            {/* Right Panel: Visible Columns */}\r\n            <div className=\"flex flex-col border rounded-lg flex-1 min-h-0\">\r\n                 <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold\">Cột hiển thị</h3>\r\n                 </div>\r\n                 <ScrollArea className=\"flex-grow p-2\">\r\n                    <DndContext\r\n                      sensors={sensors}\r\n                      collisionDetection={closestCenter}\r\n                      onDragEnd={handleDragEnd}\r\n                    >\r\n                      <div className=\"space-y-1\">\r\n                        {/* Pinned columns - sortable among themselves */}\r\n                        {pinnedVisibleColumns.length > 0 && (\r\n                          <SortableContext\r\n                            items={pinnedVisibleColumns.map(c => c.id)}\r\n                            strategy={verticalListSortingStrategy}\r\n                          >\r\n                            {pinnedVisibleColumns.map((col) => (\r\n                              <SortableColumnItem key={col.id} col={col} />\r\n                            ))}\r\n                          </SortableContext>\r\n                        )}\r\n                        \r\n                        {pinnedVisibleColumns.length > 0 && unpinnedVisibleColumns.length > 0 && (\r\n                            <div className=\"relative my-2 mx-2\">\r\n                                <Separator />\r\n                                <span className=\"absolute left-1/2 -translate-x-1/2 -top-2 text-xs bg-popover px-2 text-muted-foreground\">Ghim</span>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {/* Unpinned columns - sortable among themselves */}\r\n                        {unpinnedVisibleColumns.length > 0 && (\r\n                          <SortableContext\r\n                            items={unpinnedVisibleColumns.map(c => c.id)}\r\n                            strategy={verticalListSortingStrategy}\r\n                          >\r\n                            {unpinnedVisibleColumns.map((col) => (\r\n                              <SortableColumnItem key={col.id} col={col} />\r\n                            ))}\r\n                          </SortableContext>\r\n                        )}\r\n                        \r\n                        {(pinnedVisibleColumns.length + unpinnedVisibleColumns.length) === 0 && (\r\n                            <p className=\"text-sm text-muted-foreground text-center py-4\">Không có cột nào được hiển thị.</p>\r\n                        )}\r\n                      </div>\r\n                    </DndContext>\r\n                 </ScrollArea>\r\n            </div>\r\n        </div>\r\n        <DialogFooter className=\"pt-6 mt-auto flex-shrink-0\">\r\n          <Button type=\"button\" variant=\"ghost\" size=\"sm\" onClick={handleReset}>\r\n            Quay về mặc định\r\n          </Button>\r\n          <div className=\"flex-grow\" />\r\n          <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => setOpen(false)}>\r\n            Thoát\r\n          </Button>\r\n          <Button type=\"button\" size=\"sm\" onClick={handleSave}>\r\n            Lưu\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6818, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/related-data-table.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport Fuse from 'fuse.js';\r\nimport * as XLSX from 'xlsx';\r\nimport { Printer, FileSpreadsheet, FileText } from 'lucide-react';\r\nimport { ResponsiveDataTable, type BulkAction } from './responsive-data-table';\r\nimport { DataTableToolbar } from './data-table-toolbar';\r\nimport { DataTableExportDialog } from './data-table-export-dialog';\r\nimport type { ColumnDef } from './types';\r\nimport { DataTableColumnCustomizer } from './data-table-column-toggle';\r\nimport { Checkbox } from '../ui/checkbox';\r\nimport { useDefaultPageSize } from '../../features/settings/global-settings-store';\r\nimport { formatDate, formatDateTime, formatDateTimeSeconds, formatDateCustom, getCurrentDate, isDateSame, isDateBetween, isDateAfter, isDateBefore, getDaysDiff, getMonthsDiff, addDays, addMonths, subtractDays, subtractMonths, getStartOfDay, getEndOfDay, getStartOfMonth, getEndOfMonth, getStartOfWeek, getEndOfWeek, toISODate, toISODateTime, isValidDate, parseDate } from '../../lib/date-utils';\r\n// FIX: Changed generic constraint from `id` to `systemId` to match application data structure\r\ninterface DrilldownSearchState {\r\n  query: string;\r\n  token: string;\r\n}\r\n\r\ninterface RelatedDataTableProps<TData extends { systemId: string }> {\r\n  data: TData[];\r\n  columns: ColumnDef<TData>[];\r\n  // FIX: Changed from `(keyof TData)[]` to `string[]` to resolve type inference issues.\r\n  searchKeys: string[];\r\n  searchPlaceholder: string;\r\n  // FIX: Changed from `keyof TData` to `string` to resolve type inference issues.\r\n  dateFilterColumn?: string;\r\n  dateFilterTitle?: string;\r\n  exportFileName: string;\r\n  onRowClick?: (row: TData) => void;\r\n  children?: React.ReactNode;\r\n  controlledSearch?: DrilldownSearchState | null;\r\n  onControlledSearchApplied?: () => void;\r\n  // ✅ New props for checkbox and bulk actions\r\n  showCheckbox?: boolean;\r\n  bulkActions?: React.ReactNode;\r\n  onBulkDelete?: () => void;\r\n  showBulkDeleteButton?: boolean;\r\n  // ✅ Default sorting - sort by date column descending (newest first)\r\n  defaultSorting?: { id: string; desc: boolean };\r\n  // ✅ Custom bulk actions to override default print/export behavior\r\n  customBulkActions?: BulkAction<TData>[];\r\n}\r\n\r\nexport function RelatedDataTable<TData extends { systemId: string }>({\r\n  data,\r\n  columns,\r\n  searchKeys,\r\n  searchPlaceholder,\r\n  dateFilterColumn,\r\n  dateFilterTitle,\r\n  exportFileName,\r\n  onRowClick,\r\n  children,\r\n  controlledSearch,\r\n  onControlledSearchApplied,\r\n  showCheckbox = false,\r\n  bulkActions,\r\n  onBulkDelete,\r\n  showBulkDeleteButton = false,\r\n  defaultSorting,\r\n  customBulkActions,\r\n}: RelatedDataTableProps<TData>) {\r\n  // Get default page size from global settings\r\n  const defaultPageSize = useDefaultPageSize();\r\n  \r\n  // State\r\n  const [rowSelection, setRowSelection] = React.useState({});\r\n  const [sorting, setSorting] = React.useState<{ id: string; desc: boolean }>(defaultSorting || { id: '', desc: false });\r\n  const [globalFilter, setGlobalFilter] = React.useState('');\r\n  const [dateFilter, setDateFilter] = React.useState<[string | undefined, string | undefined] | undefined>();\r\n  const [pagination, setPagination] = React.useState({ pageIndex: 0, pageSize: defaultPageSize });\r\n  const lastAppliedSearchTokenRef = React.useRef<string | null>(null);\r\n  \r\n  // State for column customization\r\n  const [columnVisibility, setColumnVisibility] = React.useState<Record<string, boolean>>({});\r\n  const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\r\n  const [pinnedColumns, setPinnedColumns] = React.useState<string[]>([]);\r\n  const [isInitialized, setIsInitialized] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (!controlledSearch) {\r\n      return;\r\n    }\r\n\r\n    if (controlledSearch.token === lastAppliedSearchTokenRef.current) {\r\n      return;\r\n    }\r\n\r\n    lastAppliedSearchTokenRef.current = controlledSearch.token;\r\n    setGlobalFilter(controlledSearch.query);\r\n    setPagination(prev => ({ ...prev, pageIndex: 0 }));\r\n    onControlledSearchApplied?.();\r\n  }, [controlledSearch, onControlledSearchApplied]);\r\n\r\n  React.useEffect(() => {\r\n    // Only run this on initial mount or when columns fundamentally change.\r\n    // This prevents wiping out user's visibility changes.\r\n    if (!isInitialized && columns.length > 0) {\r\n      const initialVisibility: Record<string, boolean> = {};\r\n      columns.forEach(c => {\r\n        if (c.id) {\r\n          initialVisibility[c.id] = true; // Show all columns by default\r\n        }\r\n      });\r\n      setColumnVisibility(initialVisibility);\r\n      setColumnOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n      setIsInitialized(true);\r\n    }\r\n  }, [columns, isInitialized]);\r\n\r\n\r\n  const fuse = React.useMemo(() => new Fuse(data, { keys: searchKeys as string[] }), [data, searchKeys]);\r\n\r\n  const filteredData = React.useMemo(() => {\r\n    let filtered = data;\r\n\r\n    if (globalFilter) {\r\n      filtered = fuse.search(globalFilter).map(result => result.item);\r\n    }\r\n\r\n    if (dateFilterColumn && dateFilter && (dateFilter[0] || dateFilter[1])) {\r\n      const [start, end] = dateFilter;\r\n      const startDate = start ? getStartOfDay(start) : null;\r\n      const endDate = end ? getEndOfDay(end) : null;\r\n\r\n      filtered = filtered.filter(item => {\r\n        const rowDateValue = item[dateFilterColumn as keyof TData] as string | undefined;\r\n        if (!rowDateValue) return false;\r\n        const rowDate = parseDate(rowDateValue);\r\n        if (!isValidDate(rowDate)) return false;\r\n\r\n        if (startDate && !endDate) return isDateAfter(rowDate, startDate) || isDateSame(rowDate, startDate);\r\n        if (!startDate && endDate) return isDateBefore(rowDate, endDate) || isDateSame(rowDate, endDate);\r\n        if (startDate && endDate) return isDateBetween(rowDate, startDate, endDate);\r\n        return true;\r\n      });\r\n    }\r\n    return filtered;\r\n  }, [data, globalFilter, dateFilter, fuse, dateFilterColumn]);\r\n\r\n  const sortedData = React.useMemo(() => {\r\n    const sorted = [...filteredData];\r\n    if (sorting.id) {\r\n      sorted.sort((a, b) => {\r\n        const aValue = (a as any)[sorting.id];\r\n        const bValue = (b as any)[sorting.id];\r\n        if (aValue === null || aValue === undefined) return 1;\r\n        if (bValue === null || bValue === undefined) return -1;\r\n        // Special handling for date columns - parse as Date for proper comparison\r\n        if (sorting.id === 'createdAt' || sorting.id === 'date' || sorting.id === 'orderDate' || sorting.id.toLowerCase().includes('date')) {\r\n          const aTime = aValue ? new Date(aValue).getTime() : 0;\r\n          const bTime = bValue ? new Date(bValue).getTime() : 0;\r\n          return sorting.desc ? bTime - aTime : aTime - bTime;\r\n        }\r\n        if (aValue < bValue) return sorting.desc ? 1 : -1;\r\n        if (aValue > bValue) return sorting.desc ? -1 : 1;\r\n        return 0;\r\n      });\r\n    }\r\n    return sorted;\r\n  }, [filteredData, sorting]);\r\n\r\n  const pageCount = Math.ceil(sortedData.length / pagination.pageSize);\r\n  const paginatedData = React.useMemo(() => {\r\n    const start = pagination.pageIndex * pagination.pageSize;\r\n    const end = start + pagination.pageSize;\r\n    return sortedData.slice(start, end);\r\n  }, [sortedData, pagination]);\r\n\r\n  // ✅ Calculate all selected rows from filteredData (not just current page)\r\n  const allSelectedRows = React.useMemo(() => {\r\n    return Object.keys(rowSelection)\r\n      .filter(id => rowSelection[id as keyof typeof rowSelection])\r\n      .map(id => filteredData.find(row => row.systemId === id))\r\n      .filter((row): row is TData => row !== undefined);\r\n  }, [rowSelection, filteredData]);\r\n\r\n  // ✅ Build display columns with optional checkbox\r\n  const displayColumns = React.useMemo(() => {\r\n    if (!showCheckbox) return columns;\r\n\r\n    const selectColumn: ColumnDef<TData> = {\r\n      id: 'select',\r\n      header: ({ isAllPageRowsSelected, isSomePageRowsSelected, onToggleAll }) => (\r\n        <Checkbox\r\n          checked={isAllPageRowsSelected ? true : (isSomePageRowsSelected ? 'indeterminate' : false)}\r\n          onCheckedChange={(value) => onToggleAll?.(!!value)}\r\n          aria-label=\"Chọn tất cả\"\r\n          className=\"translate-y-[2px]\"\r\n        />\r\n      ),\r\n      cell: ({ row, isSelected, onToggleSelect }) => (\r\n        <Checkbox\r\n          checked={isSelected}\r\n          onCheckedChange={(value) => onToggleSelect?.(!!value)}\r\n          aria-label=\"Chọn dòng\"\r\n          className=\"translate-y-[2px]\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        />\r\n      ),\r\n      size: 48,\r\n      meta: { displayName: 'Chọn', sticky: 'left' as const },\r\n    };\r\n\r\n    return [selectColumn, ...columns];\r\n  }, [columns, showCheckbox]);\r\n\r\n  const exportConfig = {\r\n    fileName: exportFileName,\r\n    columns,\r\n  };\r\n\r\n  // ✅ Default bulk actions: In, Xuất Excel, Xuất PDF\r\n  const defaultBulkActions: BulkAction<TData>[] = React.useMemo(() => {\r\n    const exportableColumns = columns.filter(c => \r\n      c.id !== 'select' && c.id !== 'actions' && c.id !== 'expander' && c.id !== 'settings'\r\n    );\r\n\r\n    const handleExportExcel = (rows: TData[]) => {\r\n      const headers = exportableColumns.map(col => col.meta?.displayName ?? col.id);\r\n      const mappedData = rows.map(row => {\r\n        const rowData: Record<string, any> = {};\r\n        exportableColumns.forEach(col => {\r\n          const key = col.accessorKey as keyof TData;\r\n          rowData[col.meta?.displayName ?? col.id] = (row as any)[key as string];\r\n        });\r\n        return rowData;\r\n      });\r\n      const ws = XLSX.utils.json_to_sheet(mappedData, { header: headers });\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, 'Data');\r\n      XLSX.writeFile(wb, `${exportFileName}_selected.xlsx`);\r\n    };\r\n\r\n    const handlePrint = (rows: TData[]) => {\r\n      const headers = exportableColumns.map(col => col.meta?.displayName ?? col.id);\r\n      const printContent = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n          <head>\r\n            <title>${exportFileName}</title>\r\n            <style>\r\n              body { font-family: Arial, sans-serif; padding: 20px; }\r\n              table { border-collapse: collapse; width: 100%; }\r\n              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\r\n              th { background-color: #f2f2f2; font-weight: bold; }\r\n              tr:nth-child(even) { background-color: #f9f9f9; }\r\n              @media print { body { padding: 0; } }\r\n            </style>\r\n          </head>\r\n          <body>\r\n            <h2>${exportFileName}</h2>\r\n            <p>Số lượng: ${rows.length} dòng</p>\r\n            <table>\r\n              <thead>\r\n                <tr>${headers.map(h => `<th>${h}</th>`).join('')}</tr>\r\n              </thead>\r\n              <tbody>\r\n                ${rows.map(row => `\r\n                  <tr>\r\n                    ${exportableColumns.map(col => {\r\n                      const key = col.accessorKey as keyof TData;\r\n                      const value = (row as any)[key as string] ?? '';\r\n                      return `<td>${value}</td>`;\r\n                    }).join('')}\r\n                  </tr>\r\n                `).join('')}\r\n              </tbody>\r\n            </table>\r\n          </body>\r\n        </html>\r\n      `;\r\n      \r\n      // In trực tiếp bằng iframe ẩn thay vì mở tab mới\r\n      const printFrame = document.createElement('iframe');\r\n      printFrame.style.position = 'absolute';\r\n      printFrame.style.top = '-10000px';\r\n      printFrame.style.left = '-10000px';\r\n      document.body.appendChild(printFrame);\r\n      \r\n      const printDoc = printFrame.contentDocument || printFrame.contentWindow?.document;\r\n      if (printDoc) {\r\n        printDoc.write(printContent);\r\n        printDoc.close();\r\n        \r\n        // Đợi load xong rồi in\r\n        setTimeout(() => {\r\n          printFrame.contentWindow?.print();\r\n          // Xóa iframe sau khi in\r\n          setTimeout(() => {\r\n            if (document.body.contains(printFrame)) {\r\n              document.body.removeChild(printFrame);\r\n            }\r\n          }, 1000);\r\n        }, 100);\r\n      }\r\n    };\r\n\r\n    return [\r\n      {\r\n        label: 'In danh sách',\r\n        icon: Printer,\r\n        onSelect: handlePrint,\r\n      },\r\n      {\r\n        label: 'Xuất Excel',\r\n        icon: FileSpreadsheet,\r\n        onSelect: handleExportExcel,\r\n      },\r\n    ];\r\n  }, [columns, exportFileName]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <DataTableToolbar\r\n        search={globalFilter}\r\n        onSearchChange={setGlobalFilter}\r\n        searchPlaceholder={searchPlaceholder}\r\n        dateFilter={dateFilterColumn ? dateFilter : undefined}\r\n        onDateFilterChange={dateFilterColumn ? setDateFilter : undefined}\r\n        dateFilterTitle={dateFilterTitle}\r\n        numResults={filteredData.length}\r\n      >\r\n        <div className=\"flex items-center gap-2\">\r\n            {children}\r\n            <DataTableColumnCustomizer\r\n                columns={columns}\r\n                columnVisibility={columnVisibility}\r\n                setColumnVisibility={setColumnVisibility}\r\n                columnOrder={columnOrder}\r\n                setColumnOrder={setColumnOrder}\r\n                pinnedColumns={pinnedColumns}\r\n                setPinnedColumns={setPinnedColumns}\r\n            />\r\n            <DataTableExportDialog allData={data} filteredData={sortedData} pageData={paginatedData} config={exportConfig} />\r\n        </div>\r\n      </DataTableToolbar>\r\n\r\n      <ResponsiveDataTable\r\n        columns={displayColumns}\r\n        data={paginatedData}\r\n        pageCount={pageCount}\r\n        pagination={pagination}\r\n        setPagination={setPagination}\r\n        rowCount={filteredData.length}\r\n        rowSelection={rowSelection}\r\n        setRowSelection={setRowSelection}\r\n        sorting={sorting}\r\n        setSorting={setSorting}\r\n        onRowClick={onRowClick}\r\n        allSelectedRows={allSelectedRows}\r\n        onBulkDelete={onBulkDelete}\r\n        showBulkDeleteButton={showBulkDeleteButton}\r\n        bulkActions={showCheckbox ? (customBulkActions || defaultBulkActions) : undefined}\r\n        bulkActionButtons={bulkActions}\r\n        expanded={{}}\r\n        setExpanded={() => {}}\r\n        columnVisibility={columnVisibility}\r\n        setColumnVisibility={setColumnVisibility}\r\n        columnOrder={columnOrder}\r\n        setColumnOrder={setColumnOrder}\r\n        pinnedColumns={pinnedColumns}\r\n        setPinnedColumns={setPinnedColumns}\r\n        autoGenerateMobileCards\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7296, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border border-border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,2KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,6LAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 7374, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/command.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\r\nimport { Command as CommandPrimitive } from \"cmdk\"\r\nimport { Search } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Dialog, DialogContent } from \"./dialog\"\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCommand.displayName = CommandPrimitive.displayName\r\n\r\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b border-border px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => (\r\n  <CommandPrimitive.Empty\r\n    ref={ref}\r\n    className=\"py-6 text-center text-sm\"\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 h-px bg-border\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName\r\n\r\nconst CommandShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCommandShortcut.displayName = \"CommandShortcut\"\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AACA;;;;;;;AAEA,MAAM,wBAAU,2KAAgB,CAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB;QACf,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,QAAQ,WAAW,GAAG,oJAAgB,CAAC,WAAW;AAElD,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,GAAG,OAAoB;IACxD,qBACE,6LAAC,wIAAM;QAAE,GAAG,KAAK;kBACf,cAAA,6LAAC,+IAAa;YAAC,WAAU;sBACvB,cAAA,6LAAC;gBAAQ,WAAU;0BAChB;;;;;;;;;;;;;;;;AAKX;MAVM;AAYN,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;QAAgD,sBAAmB;;0BAChF,6LAAC,mNAAM;gBAAC,WAAU;;;;;;0BAClB,6LAAC,oJAAgB,CAAC,KAAK;gBACrB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,0JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAKf,aAAa,WAAW,GAAG,oJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,mDAAmD;QAChE,GAAG,KAAK;;;;;;;AAIb,YAAY,WAAW,GAAG,oJAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,OAAO,oBACR,6LAAC,oJAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;;;;;;;AAIb,aAAa,WAAW,GAAG,oJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;;AAIb,aAAa,WAAW,GAAG,oJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,iCAAmB,2KAAgB,QAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,SAAS;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,wBAAwB;QACrC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,oJAAgB,CAAC,SAAS,CAAC,WAAW;AAErE,MAAM,4BAAc,2KAAgB,QAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6TACA;QAED,GAAG,KAAK;;;;;;;AAIb,YAAY,WAAW,GAAG,oJAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,kBAAkB,CAAC,EACvB,SAAS,EACT,GAAG,OACmC;IACtC,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf;OAbM;AAcN,gBAAgB,WAAW,GAAG"}},
    {"offset": {"line": 7561, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\n// Context to pass popover ID through the component tree\r\nconst PopoverContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst PopoverProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <PopoverContext.Provider value={id}>{children}</PopoverContext.Provider>;\r\n};\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content> & {\r\n    id?: string;\r\n  }\r\n>(({ className, align = \"center\", sideOffset = 4, id: propId, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(PopoverContext);\r\n  const id = propId || contextId || `popover-${React.useId()}`;\r\n  \r\n  // Get open state from props\r\n  const [open, setOpen] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (props[\"data-state\"] === \"open\") {\r\n      setOpen(true);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n  }, [props[\"data-state\"]]);\r\n  \r\n  // Register with our modal context\r\n  const { zIndex } = useModal(id, open, 'popover');\r\n  \r\n  return (\r\n    <PopoverPrimitive.Portal>\r\n      <PopoverPrimitive.Content\r\n        ref={ref}\r\n        align={align}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <PopoverProvider id={id}>\r\n          {props.children}\r\n        </PopoverProvider>\r\n      </PopoverPrimitive.Content>\r\n    </PopoverPrimitive.Portal>\r\n  );\r\n})\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverProvider }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AACA;;;AANA;;;;;AAQA,MAAM,UAAU,8KAAqB;AAErC,MAAM,iBAAiB,iLAAwB;AAE/C,wDAAwD;AACxD,MAAM,+BAAiB,8KAAmB,CAAS;AAEnD,wCAAwC;AACxC,MAAM,kBAAkB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IAClF,qBAAO,6LAAC,eAAe,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC9C;KAFM;AAIN,MAAM,+BAAiB,GAAA,2KAAgB,UAKrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,IAAI,MAAM,EAAE,GAAG,OAAO,EAAE;;IACxE,gDAAgD;IAChD,MAAM,YAAY,2KAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,QAAQ,EAAE,sKAAW,IAAI;IAE5D,4BAA4B;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,yKAAc,CAAC;IACvC,0KAAe;oCAAC;YACd,IAAI,KAAK,CAAC,aAAa,KAAK,QAAQ;gBAClC,QAAQ;YACV,OAAO;gBACL,QAAQ;YACV;QACF;mCAAG;QAAC,KAAK,CAAC,aAAa;KAAC;IAExB,kCAAkC;IAClC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAQ,EAAC,IAAI,MAAM;IAEtC,qBACE,6LAAC,gLAAuB;kBACtB,cAAA,6LAAC,iLAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,qHAAE,EACX,8LACA;YAEF,OAAO;gBAAE;YAAO;YACf,GAAG,KAAK;sBAET,cAAA,6LAAC;gBAAgB,IAAI;0BAClB,MAAM,QAAQ;;;;;;;;;;;;;;;;AAKzB;;QArBqB,4IAAQ;;;;QAAR,4IAAQ;;;;AAsB7B,eAAe,WAAW,GAAG,iLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 7670, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/virtualized-combobox.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Check, ChevronsUpDown, Loader2 } from 'lucide-react';\r\nimport { useVirtualizer } from '@tanstack/react-virtual';\r\nimport { useDebounce } from '../../hooks/use-debounce';\r\nimport { cn } from '../../lib/utils';\r\nimport { Button } from './button';\r\nimport { Command, CommandInput, CommandEmpty } from './command';\r\nimport { Popover, PopoverContent, PopoverTrigger } from './popover';\r\n\r\nexport type ComboboxOption = {\r\n  value: string;\r\n  label: string;\r\n  subtitle?: string | undefined; // For additional info like ID, phone\r\n  acText?: string | undefined; // Accent-stripped text for resilient search\r\n  metadata?: any | undefined; // Optional metadata for custom rendering\r\n};\r\n\r\ntype VirtualizedComboboxProps = {\r\n  value: ComboboxOption | null;\r\n  onChange: (value: ComboboxOption | null) => void;\r\n  options: ComboboxOption[];\r\n  placeholder?: string;\r\n  searchPlaceholder?: string;\r\n  emptyPlaceholder?: string;\r\n  disabled?: boolean;\r\n  isLoading?: boolean;\r\n  onSearchChange?: (search: string) => void; // For server-side filtering\r\n  renderOption?: (option: ComboboxOption, isSelected: boolean) => React.ReactNode;\r\n  renderHeader?: () => React.ReactNode; // ✅ Custom header (e.g., \"Add new\" button)\r\n  estimatedItemHeight?: number; // Estimated height for better performance\r\n  maxHeight?: number;\r\n  minSearchLength?: number; // Minimum chars before showing results\r\n};\r\n\r\nconst defaultRenderOption = (option: ComboboxOption, isSelected: boolean) => (\r\n  <div className=\"flex items-center flex-1 min-w-0\">\r\n    <Check\r\n      className={cn(\r\n        'mr-2 h-4 w-4 flex-shrink-0',\r\n        isSelected ? 'opacity-100' : 'opacity-0'\r\n      )}\r\n    />\r\n    <div className=\"flex flex-col flex-1 min-w-0\">\r\n      <span className=\"font-medium text-sm truncate\">{option.label}</span>\r\n      {option.subtitle && (\r\n        <span className=\"text-xs text-muted-foreground truncate\">\r\n          {option.subtitle}\r\n        </span>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport function VirtualizedCombobox({\r\n  value,\r\n  onChange,\r\n  options,\r\n  placeholder = 'Chọn một tùy chọn',\r\n  searchPlaceholder = 'Tìm kiếm...',\r\n  emptyPlaceholder = 'Không tìm thấy kết quả.',\r\n  disabled = false,\r\n  isLoading = false,\r\n  onSearchChange,\r\n  renderOption = defaultRenderOption,\r\n  renderHeader, // ✅ NEW: Custom header\r\n  estimatedItemHeight = 48,\r\n  maxHeight = 320,\r\n  minSearchLength = 0,\r\n}: VirtualizedComboboxProps) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n  const debouncedSearchQuery = useDebounce(searchQuery, 300);\r\n  \r\n  const parentRef = React.useRef<HTMLDivElement>(null);\r\n  const inputRef = React.useRef<HTMLInputElement>(null); // NEW: Ref for input\r\n\r\n  // Client-side filtering (if no server-side handler)\r\n  const filteredOptions = React.useMemo(() => {\r\n    if (onSearchChange) return options; // Server handles filtering\r\n    \r\n    // Use immediate search for instant filtering (no debounce lag)\r\n    const query = searchQuery.toLowerCase();\r\n    if (!query) return options;\r\n    \r\n    return options.filter(option => {\r\n      const subtitleMatch = option.subtitle?.toLowerCase().includes(query);\r\n      const acTextMatch = option.acText?.toLowerCase().includes(query);\r\n      return (\r\n        option.label.toLowerCase().includes(query) ||\r\n        option.value.toLowerCase().includes(query) ||\r\n        subtitleMatch ||\r\n        acTextMatch\r\n      );\r\n    });\r\n  }, [options, searchQuery, onSearchChange]);\r\n\r\n  // Show results: if minSearchLength > 0, check debounced search\r\n  // if minSearchLength = 0, always show (use current search, not debounced)\r\n  const shouldShowResults = minSearchLength > 0 \r\n    ? debouncedSearchQuery.length >= minSearchLength\r\n    : true;\r\n  \r\n  const displayOptions = shouldShowResults ? filteredOptions : [];\r\n\r\n  // Tanstack Virtual for 10K+ items performance\r\n  const virtualizer = useVirtualizer({\r\n    count: displayOptions.length,\r\n    getScrollElement: () => parentRef.current,\r\n    estimateSize: () => estimatedItemHeight,\r\n    overscan: 5, // Render 5 extra items outside viewport\r\n  });\r\n\r\n  // Call server-side search handler\r\n  React.useEffect(() => {\r\n    if (onSearchChange) {\r\n      onSearchChange(debouncedSearchQuery);\r\n    }\r\n  }, [debouncedSearchQuery, onSearchChange]);\r\n\r\n  // Reset scroll and force virtualizer measure when popup opens\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      if (parentRef.current) {\r\n        parentRef.current.scrollTop = 0;\r\n      }\r\n      // Force virtualizer to measure after a tick\r\n      requestAnimationFrame(() => {\r\n        virtualizer.measure();\r\n      });\r\n      // NEW: Auto focus vào input khi mở popup\r\n      setTimeout(() => {\r\n        inputRef.current?.focus();\r\n      }, 50);\r\n    }\r\n  }, [open, virtualizer]);\r\n\r\n  const handleSelect = (option: ComboboxOption) => {\r\n    onChange(option.value === value?.value ? null : option);\r\n    setOpen(false);\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const handleSearchChange = (newValue: string) => {\r\n    setSearchQuery(newValue);\r\n  };\r\n\r\n  return (\r\n    <Popover open={open} onOpenChange={setOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Button\r\n          variant=\"outline\"\r\n          role=\"combobox\"\r\n          aria-expanded={open}\r\n          className=\"w-full justify-between font-normal h-9\"\r\n          disabled={disabled}\r\n        >\r\n          <span className=\"truncate\">{value ? value.label : placeholder}</span>\r\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\r\n        </Button>\r\n      </PopoverTrigger>\r\n      <PopoverContent \r\n        className=\"w-[--radix-popover-trigger-width] p-0\" \r\n        align=\"start\"\r\n        side=\"bottom\"\r\n        sideOffset={4}\r\n        onOpenAutoFocus={(e) => {\r\n          e.preventDefault(); // Prevent default radix behavior\r\n          // Focus will be handled by useEffect\r\n        }}\r\n      >\r\n        <Command shouldFilter={false}>\r\n          <CommandInput\r\n            ref={inputRef}\r\n            placeholder={searchPlaceholder}\r\n            value={searchQuery}\r\n            onValueChange={handleSearchChange}\r\n          />\r\n          \r\n          {/* ✅ Custom header (e.g., \"Add new\" button) */}\r\n          {renderHeader && renderHeader()}\r\n          \r\n          {isLoading ? (\r\n            <div className=\"py-6 text-center\">\r\n              <Loader2 className=\"h-6 w-6 animate-spin mx-auto text-muted-foreground\" />\r\n              <p className=\"text-sm text-muted-foreground mt-2\">Đang tải...</p>\r\n            </div>\r\n          ) : !shouldShowResults && minSearchLength > 0 ? (\r\n            <div className=\"py-6 text-center text-sm text-muted-foreground\">\r\n              Nhập ít nhất {minSearchLength} ký tự để tìm kiếm\r\n            </div>\r\n          ) : displayOptions.length === 0 ? (\r\n            <CommandEmpty>{emptyPlaceholder}</CommandEmpty>\r\n          ) : (\r\n            <div \r\n              ref={parentRef}\r\n              className=\"overflow-y-auto overflow-x-hidden scrollbar-thin\"\r\n              style={{ \r\n                maxHeight: `${maxHeight}px`,\r\n                overscrollBehavior: 'contain',\r\n                WebkitOverflowScrolling: 'touch',\r\n              }}\r\n              onWheel={(e) => {\r\n                e.stopPropagation();\r\n              }}\r\n            >\r\n              {/* Total height placeholder for scroll */}\r\n              <div\r\n                style={{\r\n                  height: `${virtualizer.getTotalSize()}px`,\r\n                  width: '100%',\r\n                  position: 'relative',\r\n                  minHeight: displayOptions.length > 0 ? `${estimatedItemHeight}px` : '0px',\r\n                }}\r\n              >\r\n                {/* Only render visible items */}\r\n                {virtualizer.getVirtualItems().length > 0 ? (\r\n                  virtualizer.getVirtualItems().map((virtualItem) => {\r\n                    const option = displayOptions[virtualItem.index];\r\n                    const isSelected = value?.value === option.value;\r\n                    \r\n                    return (\r\n                      <div\r\n                        key={virtualItem.key}\r\n                        data-index={virtualItem.index}\r\n                        ref={virtualizer.measureElement}\r\n                        className={cn(\r\n                          \"absolute top-0 left-0 w-full\",\r\n                          \"flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none\",\r\n                          \"hover:bg-accent hover:text-accent-foreground\",\r\n                          \"data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n                          isSelected && \"bg-accent\"\r\n                        )}\r\n                        style={{\r\n                          transform: `translateY(${virtualItem.start}px)`,\r\n                        }}\r\n                        onClick={() => handleSelect(option)}\r\n                      >\r\n                        {renderOption(option, isSelected)}\r\n                      </div>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  /* Fallback: render first few items without virtualization */\r\n                  displayOptions.slice(0, 10).map((option, index) => {\r\n                    const isSelected = value?.value === option.value;\r\n                    return (\r\n                      <div\r\n                        key={option.value}\r\n                        className={cn(\r\n                          \"flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none\",\r\n                          \"hover:bg-accent hover:text-accent-foreground\",\r\n                          isSelected && \"bg-accent\"\r\n                        )}\r\n                        style={{ height: `${estimatedItemHeight}px` }}\r\n                        onClick={() => handleSelect(option)}\r\n                      >\r\n                        {renderOption(option, isSelected)}\r\n                      </div>\r\n                    );\r\n                  })\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Show count info */}\r\n          {displayOptions.length > 0 && (\r\n            <div className=\"border-t border-border px-2 py-1.5 text-xs text-muted-foreground\">\r\n              {displayOptions.length === options.length \r\n                ? `${displayOptions.length} kết quả`\r\n                : `${displayOptions.length} / ${options.length} kết quả`\r\n              }\r\n            </div>\r\n          )}\r\n        </Command>\r\n      </PopoverContent>\r\n    </Popover>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8026, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/shared/copy-button.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Check, Copy } from 'lucide-react';\r\nimport { Button } from '../ui/button';\r\nimport { cn } from '../../lib/utils';\r\nimport { toast } from 'sonner';\r\n\r\ninterface CopyButtonProps {\r\n  value: string | undefined | null;\r\n  className?: string;\r\n  showToast?: boolean;\r\n  toastMessage?: string;\r\n  size?: 'xs' | 'sm' | 'md';\r\n}\r\n\r\n/**\r\n * CopyButton - Nút copy với animation và feedback\r\n * \r\n * @example\r\n * <CopyButton value={email} />\r\n * <CopyButton value={phone} showToast toastMessage=\"Đã copy số điện thoại\" />\r\n */\r\nexport function CopyButton({ \r\n  value, \r\n  className,\r\n  showToast = true,\r\n  toastMessage = 'Đã copy vào clipboard',\r\n  size = 'sm',\r\n}: CopyButtonProps) {\r\n  const [copied, setCopied] = React.useState(false);\r\n\r\n  const handleCopy = async (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    if (!value) return;\r\n\r\n    try {\r\n      await navigator.clipboard.writeText(value);\r\n      setCopied(true);\r\n      if (showToast) {\r\n        toast.success(toastMessage);\r\n      }\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (err) {\r\n      console.error('Failed to copy:', err);\r\n      toast.error('Không thể copy vào clipboard');\r\n    }\r\n  };\r\n\r\n  if (!value) return null;\r\n\r\n  const sizeClasses = {\r\n    xs: 'h-5 w-5',\r\n    sm: 'h-6 w-6',\r\n    md: 'h-7 w-7',\r\n  };\r\n\r\n  const iconSizes = {\r\n    xs: 'h-3 w-3',\r\n    sm: 'h-3.5 w-3.5',\r\n    md: 'h-4 w-4',\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      type=\"button\"\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      onClick={handleCopy}\r\n      className={cn(\r\n        sizeClasses[size],\r\n        'text-muted-foreground hover:text-foreground transition-colors',\r\n        className\r\n      )}\r\n      title=\"Copy\"\r\n    >\r\n      {copied ? (\r\n        <Check className={cn(iconSizes[size], 'text-green-600')} />\r\n      ) : (\r\n        <Copy className={iconSizes[size]} />\r\n      )}\r\n    </Button>\r\n  );\r\n}\r\n\r\ninterface CopyableTextProps {\r\n  label: string;\r\n  value: string | undefined | null;\r\n  onClick?: () => void;\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * CopyableText - Text hiển thị với nút copy bên cạnh\r\n * \r\n * @example\r\n * <CopyableText label=\"Email\" value={customer.email} />\r\n * <CopyableText label=\"SĐT\" value={customer.phone} onClick={() => window.open(`tel:${phone}`)} />\r\n */\r\nexport function CopyableText({ label, value, onClick, className }: CopyableTextProps) {\r\n  if (!value) {\r\n    return (\r\n      <div className={cn('space-y-1', className)}>\r\n        <dt className=\"text-sm text-muted-foreground\">{label}</dt>\r\n        <dd className=\"text-sm font-medium\">—</dd>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn('space-y-1', className)}>\r\n      <dt className=\"text-sm text-muted-foreground\">{label}</dt>\r\n      <dd className=\"flex items-center gap-1\">\r\n        <span \r\n          className={cn(\r\n            'text-sm font-medium',\r\n            onClick && 'text-primary hover:underline cursor-pointer'\r\n          )}\r\n          onClick={onClick}\r\n        >\r\n          {value}\r\n        </span>\r\n        <CopyButton value={value} size=\"xs\" showToast toastMessage={`Đã copy ${label.toLowerCase()}`} />\r\n      </dd>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CopyButton;\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AAiBO,SAAS,WAAW,EACzB,KAAK,EACL,SAAS,EACT,YAAY,IAAI,EAChB,eAAe,uBAAuB,EACtC,OAAO,IAAI,EACK;;IAChB,MAAM,CAAC,QAAQ,UAAU,GAAG,yKAAc,CAAC;IAE3C,MAAM,aAAa,OAAO;QACxB,EAAE,eAAe;QACjB,IAAI,CAAC,OAAO;QAEZ,IAAI;YACF,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;YACpC,UAAU;YACV,IAAI,WAAW;gBACb,oJAAK,CAAC,OAAO,CAAC;YAChB;YACA,WAAW,IAAM,UAAU,QAAQ;QACrC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,mBAAmB;YACjC,oJAAK,CAAC,KAAK,CAAC;QACd;IACF;IAEA,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,cAAc;QAClB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,MAAM,YAAY;QAChB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,6LAAC,wIAAM;QACL,MAAK;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,WAAW,IAAA,qHAAE,EACX,WAAW,CAAC,KAAK,EACjB,iEACA;QAEF,OAAM;kBAEL,uBACC,6LAAC,gNAAK;YAAC,WAAW,IAAA,qHAAE,EAAC,SAAS,CAAC,KAAK,EAAE;;;;;iCAEtC,6LAAC,6MAAI;YAAC,WAAW,SAAS,CAAC,KAAK;;;;;;;;;;;AAIxC;GA5DgB;KAAA;AA4ET,SAAS,aAAa,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAqB;IAClF,IAAI,CAAC,OAAO;QACV,qBACE,6LAAC;YAAI,WAAW,IAAA,qHAAE,EAAC,aAAa;;8BAC9B,6LAAC;oBAAG,WAAU;8BAAiC;;;;;;8BAC/C,6LAAC;oBAAG,WAAU;8BAAsB;;;;;;;;;;;;IAG1C;IAEA,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,aAAa;;0BAC9B,6LAAC;gBAAG,WAAU;0BAAiC;;;;;;0BAC/C,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC;wBACC,WAAW,IAAA,qHAAE,EACX,uBACA,WAAW;wBAEb,SAAS;kCAER;;;;;;kCAEH,6LAAC;wBAAW,OAAO;wBAAO,MAAK;wBAAK,SAAS;wBAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,WAAW,IAAI;;;;;;;;;;;;;;;;;;AAIpG;MA3BgB;uCA6BD"}},
    {"offset": {"line": 8191, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/progress.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype ProgressProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  value?: number | null\r\n}\r\n\r\nconst Progress = React.forwardRef<HTMLDivElement, ProgressProps>(\r\n  ({ className, value, ...props }, ref) => {\r\n    const progressValue = value ?? 0;\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        role=\"progressbar\"\r\n        aria-valuenow={progressValue}\r\n        aria-valuemin={0}\r\n        aria-valuemax={100}\r\n        className={cn(\r\n          \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <div\r\n          className=\"h-full w-full flex-1 bg-primary transition-all\"\r\n          style={{ transform: `translateX(-${100 - progressValue}%)` }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n)\r\nProgress.displayName = \"Progress\"\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAMA,MAAM,yBAAW,2KAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE;IAC/B,MAAM,gBAAgB,SAAS;IAE/B,qBACE,6LAAC;QACC,KAAK;QACL,MAAK;QACL,iBAAe;QACf,iBAAe;QACf,iBAAe;QACf,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,cAAc,EAAE,CAAC;YAAC;;;;;;;;;;;AAInE;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 8240, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/mention-combobox.tsx"],"sourcesContent":["/**\r\n * Mention Combobox for TipTap Editor\r\n * \r\n * Virtualized dropdown with search for @mention functionality\r\n * Optimized for 100+ employees\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useVirtualizer } from '@tanstack/react-virtual';\r\nimport { cn } from '../../lib/utils';\r\nimport { Avatar, AvatarFallback } from './avatar';\r\nimport { Check } from 'lucide-react';\r\n\r\nexport interface MentionOption {\r\n  id: string;\r\n  label: string;\r\n  avatar?: string;\r\n}\r\n\r\ninterface MentionComboboxProps {\r\n  items: MentionOption[];\r\n  selectedIndex: number;\r\n  onSelect: (index: number) => void;\r\n  onKeyDown: (event: KeyboardEvent) => boolean;\r\n}\r\n\r\nexport class MentionCombobox {\r\n  items: MentionOption[];\r\n  selectedIndex: number;\r\n  element: HTMLElement;\r\n  command: any;\r\n  query: string;\r\n  virtualizer: any;\r\n  parentRef: HTMLDivElement | null;\r\n\r\n  constructor(props: any) {\r\n    this.items = props.items;\r\n    this.command = props.command;\r\n    this.query = '';\r\n    this.selectedIndex = 0;\r\n    this.parentRef = null;\r\n    this.element = document.createElement('div');\r\n    this.element.className = 'bg-popover text-popover-foreground border border-border rounded-md shadow-lg overflow-hidden z-50';\r\n    this.element.style.width = '320px';\r\n    this.element.style.maxHeight = '420px';\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    if (this.items.length === 0) {\r\n      this.element.innerHTML = `\r\n        <div class=\"p-4 text-center\">\r\n          <div class=\"text-sm text-muted-foreground\">Không tìm thấy nhân viên</div>\r\n          <div class=\"text-xs text-muted-foreground mt-1\">Thử tìm kiếm với từ khóa khác</div>\r\n        </div>\r\n      `;\r\n      return;\r\n    }\r\n\r\n    // Header\r\n    const headerHtml = `\r\n      <div class=\"border-b border-border bg-muted/30 px-3 py-2 flex items-center justify-between sticky top-0 z-10\">\r\n        <div class=\"text-xs font-medium text-muted-foreground flex items-center gap-2\">\r\n          <svg class=\"h-3.5 w-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n          </svg>\r\n          <span>Tag nhân viên • ${this.items.length} người</span>\r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    // Virtualized list - Render all items\r\n    const itemsHtml = this.items\r\n      .map((item, index) => {\r\n        const isSelected = index === this.selectedIndex;\r\n        const avatarInitial = item.label ? item.label[0].toUpperCase() : '?';\r\n        \r\n        return `\r\n          <button\r\n            type=\"button\"\r\n            class=\"mention-item flex items-center gap-3 w-full px-3 py-2.5 text-sm transition-all ${\r\n              isSelected \r\n                ? 'bg-accent text-accent-foreground' \r\n                : 'hover:bg-accent/50'\r\n            }\"\r\n            data-index=\"${index}\"\r\n            data-id=\"${item.id}\"\r\n          >\r\n            ${\r\n              item.avatar \r\n                ? `<img src=\"${item.avatar}\" alt=\"${item.label}\" class=\"w-9 h-9 rounded-full object-cover flex-shrink-0 border border-border\" />` \r\n                : `<div class=\"w-9 h-9 rounded-full bg-primary/10 text-primary flex items-center justify-center text-sm font-semibold flex-shrink-0 border border-primary/20\">${avatarInitial}</div>`\r\n            }\r\n            <span class=\"font-medium truncate flex-1 text-left\">${item.label}</span>\r\n            ${isSelected ? '<svg class=\"h-4 w-4 text-primary flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path></svg>' : ''}\r\n          </button>\r\n        `;\r\n      })\r\n      .join('');\r\n\r\n    this.element.innerHTML = `\r\n      ${headerHtml}\r\n      <div class=\"overflow-y-auto scrollbar-thin\" style=\"max-height: 380px;\" data-scroll-container>\r\n        ${itemsHtml}\r\n      </div>\r\n    `;\r\n\r\n    // Add click event listeners\r\n    this.element.querySelectorAll('.mention-item').forEach((btn, index) => {\r\n      btn.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.selectItem(index);\r\n      });\r\n      \r\n      btn.addEventListener('mousedown', (e) => {\r\n        e.preventDefault();\r\n      });\r\n      \r\n      // Hover to highlight\r\n      btn.addEventListener('mouseenter', () => {\r\n        this.selectedIndex = index;\r\n        this.updateSelection();\r\n      });\r\n    });\r\n    \r\n    // Auto scroll to selected item\r\n    this.scrollToSelected();\r\n  }\r\n  \r\n  updateSelection() {\r\n    const buttons = this.element.querySelectorAll('.mention-item');\r\n    buttons.forEach((btn, index) => {\r\n      if (index === this.selectedIndex) {\r\n        btn.classList.add('bg-accent', 'text-accent-foreground');\r\n        btn.classList.remove('hover:bg-accent/50');\r\n        // Add checkmark\r\n        const hasCheck = btn.querySelector('svg');\r\n        if (!hasCheck) {\r\n          btn.innerHTML = btn.innerHTML + '<svg class=\"h-4 w-4 text-primary flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path></svg>';\r\n        }\r\n      } else {\r\n        btn.classList.remove('bg-accent', 'text-accent-foreground');\r\n        btn.classList.add('hover:bg-accent/50');\r\n        // Remove checkmark\r\n        const check = btn.querySelector('svg');\r\n        if (check) check.remove();\r\n      }\r\n    });\r\n    this.scrollToSelected();\r\n  }\r\n  \r\n  scrollToSelected() {\r\n    const scrollContainer = this.element.querySelector('[data-scroll-container]') as HTMLElement;\r\n    const buttons = this.element.querySelectorAll('.mention-item');\r\n    const selectedButton = buttons[this.selectedIndex] as HTMLElement;\r\n    \r\n    if (scrollContainer && selectedButton) {\r\n      const containerRect = scrollContainer.getBoundingClientRect();\r\n      const itemRect = selectedButton.getBoundingClientRect();\r\n      const scrollTop = scrollContainer.scrollTop;\r\n      \r\n      const itemTop = itemRect.top - containerRect.top + scrollTop;\r\n      const itemBottom = itemTop + itemRect.height;\r\n      \r\n      const visibleTop = scrollTop;\r\n      const visibleBottom = scrollTop + scrollContainer.clientHeight;\r\n      \r\n      if (itemTop < visibleTop) {\r\n        scrollContainer.scrollTop = itemTop - 8; // 8px padding\r\n      } else if (itemBottom > visibleBottom) {\r\n        scrollContainer.scrollTop = itemBottom - scrollContainer.clientHeight + 8;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateProps(props: any) {\r\n    this.items = props.items;\r\n    this.command = props.command;\r\n    this.selectedIndex = 0;\r\n    this.render();\r\n  }\r\n\r\n  onKeyDown({ event }: { event: KeyboardEvent }) {\r\n    if (event.key === 'ArrowUp') {\r\n      this.upHandler();\r\n      return true;\r\n    }\r\n    if (event.key === 'ArrowDown') {\r\n      this.downHandler();\r\n      return true;\r\n    }\r\n    if (event.key === 'Enter') {\r\n      this.enterHandler();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  upHandler() {\r\n    this.selectedIndex = (this.selectedIndex + this.items.length - 1) % this.items.length;\r\n    this.updateSelection();\r\n  }\r\n\r\n  downHandler() {\r\n    this.selectedIndex = (this.selectedIndex + 1) % this.items.length;\r\n    this.updateSelection();\r\n  }\r\n\r\n  enterHandler() {\r\n    this.selectItem(this.selectedIndex);\r\n  }\r\n\r\n  selectItem(index: number) {\r\n    const item = this.items[index];\r\n    if (item && this.command) {\r\n      this.command({ id: item.id, label: item.label });\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.element.remove();\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8424, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/comment-editor.tsx"],"sourcesContent":["/**\r\n * Comment Editor - Simplified TipTap for comments\r\n * \r\n * Features:\r\n * - @mention employees\r\n * - Upload/paste/drop images → direct to server (no staging)\r\n * - Rich text formatting\r\n * - Enter to submit\r\n * \r\n * Use this for: Comments, quick notes, chat-like UX\r\n * For rich content (category, product descriptions), use TipTapEditor instead\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Image from '@tiptap/extension-image';\r\nimport Mention from '@tiptap/extension-mention';\r\nimport Placeholder from '@tiptap/extension-placeholder';\r\nimport { cn } from '../../lib/utils';\r\nimport { FileUploadAPI } from '../../lib/file-upload-api';\r\nimport { Bold, Italic, Image as ImageIcon, AtSign, Upload, Loader2 } from 'lucide-react';\r\nimport { Button } from './button';\r\nimport { toast } from 'sonner';\r\nimport tippy from 'tippy.js';\r\nimport 'tippy.js/dist/tippy.css';\r\nimport { MentionCombobox } from './mention-combobox';\r\n\r\nexport interface CommentEditorProps {\r\n  content?: string;\r\n  onChange?: (content: string, contentText: string) => void;\r\n  placeholder?: string;\r\n  mentions?: Array<{ id: string; label: string; avatar?: string }>;\r\n  onImageUpload?: (file: File) => Promise<string>; // Custom uploader\r\n  disabled?: boolean;\r\n  className?: string;\r\n  minHeight?: string;\r\n  onSubmit?: () => void; // Enter to submit\r\n  maxImageSize?: number; // Max image size in bytes (default 5MB)\r\n}\r\n\r\nexport function CommentEditor({\r\n  content = '',\r\n  onChange,\r\n  placeholder = 'Viết bình luận...',\r\n  mentions = [],\r\n  onImageUpload,\r\n  disabled = false,\r\n  className,\r\n  minHeight = '80px',\r\n  onSubmit,\r\n  maxImageSize = 5 * 1024 * 1024, // 5MB default\r\n}: CommentEditorProps) {\r\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\r\n  const [isUploading, setIsUploading] = React.useState(false);\r\n  const [isDragging, setIsDragging] = React.useState(false);\r\n  const dragCounterRef = React.useRef(0);\r\n\r\n  // Default uploader - direct to comments folder\r\n  const defaultUploader = React.useCallback(async (file: File): Promise<string> => {\r\n    const asset = await FileUploadAPI.uploadCommentImage(file);\r\n    return asset.url;\r\n  }, []);\r\n\r\n  // Use custom uploader or default\r\n  const uploadImage = onImageUpload || defaultUploader;\r\n\r\n  // Validate and upload image\r\n  const handleImageFile = React.useCallback(async (file: File, source: 'select' | 'paste' | 'drop') => {\r\n    if (!file.type.startsWith('image/')) {\r\n      toast.error('Chỉ chấp nhận file ảnh');\r\n      return;\r\n    }\r\n\r\n    if (file.size > maxImageSize) {\r\n      const maxMB = Math.round(maxImageSize / 1024 / 1024);\r\n      toast.error('Ảnh quá lớn', { description: `Kích thước tối đa ${maxMB}MB` });\r\n      return;\r\n    }\r\n\r\n    setIsUploading(true);\r\n    try {\r\n      const url = await uploadImage(file);\r\n      editor?.chain().focus().setImage({ src: url }).run();\r\n      toast.success(source === 'paste' ? 'Đã dán ảnh' : source === 'drop' ? 'Đã thả ảnh' : 'Đã thêm ảnh');\r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      toast.error('Không thể tải ảnh lên');\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  }, [uploadImage, maxImageSize]);\r\n\r\n  const editor = useEditor({\r\n    immediatelyRender: false, // Fix SSR hydration mismatch\r\n    extensions: [\r\n      StarterKit,\r\n      Image.configure({\r\n        inline: true,\r\n        allowBase64: false, // No base64!\r\n      }),\r\n      Placeholder.configure({\r\n        placeholder,\r\n      }),\r\n      Mention.configure({\r\n        HTMLAttributes: {\r\n          class: 'mention',\r\n        },\r\n        suggestion: {\r\n          items: ({ query }) => {\r\n            return mentions.filter(item => \r\n              item.label.toLowerCase().includes(query.toLowerCase())\r\n            );\r\n          },\r\n          render: () => {\r\n            let component: any;\r\n            let popup: any;\r\n\r\n            return {\r\n              onStart: (props: any) => {\r\n                component = new MentionCombobox(props);\r\n                popup = tippy('body', {\r\n                  getReferenceClientRect: props.clientRect,\r\n                  appendTo: () => document.body,\r\n                  content: component.element,\r\n                  showOnCreate: true,\r\n                  interactive: true,\r\n                  trigger: 'manual',\r\n                  placement: 'bottom-start',\r\n                  theme: 'mention',\r\n                  maxWidth: 'none',\r\n                });\r\n              },\r\n              onUpdate(props: any) {\r\n                component.updateProps(props);\r\n                popup[0].setProps({\r\n                  getReferenceClientRect: props.clientRect,\r\n                });\r\n              },\r\n              onKeyDown(props: any) {\r\n                if (props.event.key === 'Escape') {\r\n                  popup[0].hide();\r\n                  return true;\r\n                }\r\n                return component.onKeyDown(props);\r\n              },\r\n              onExit() {\r\n                popup[0].destroy();\r\n                component.destroy();\r\n              },\r\n            };\r\n          },\r\n        },\r\n      }),\r\n    ],\r\n    content,\r\n    editable: !disabled,\r\n    onUpdate: ({ editor }) => {\r\n      const html = editor.getHTML();\r\n      const text = editor.getText();\r\n      onChange?.(html, text);\r\n    },\r\n    editorProps: {\r\n      handleKeyDown: (view, event) => {\r\n        // Enter to submit (without Shift)\r\n        if (event.key === 'Enter' && !event.shiftKey && onSubmit) {\r\n          event.preventDefault();\r\n          onSubmit();\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n    },\r\n  });\r\n\r\n  // Handle image upload from file input\r\n  const handleImageSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      await handleImageFile(file, 'select');\r\n    }\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  // Handle paste image\r\n  React.useEffect(() => {\r\n    if (!editor) return;\r\n\r\n    const handlePaste = async (event: ClipboardEvent) => {\r\n      const items = event.clipboardData?.items;\r\n      if (!items) return;\r\n\r\n      for (const item of Array.from(items)) {\r\n        if (item.type.startsWith('image/')) {\r\n          event.preventDefault();\r\n          const file = item.getAsFile();\r\n          if (file) {\r\n            await handleImageFile(file, 'paste');\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    const editorElement = editor.view.dom;\r\n    editorElement.addEventListener('paste', handlePaste as any);\r\n    return () => {\r\n      editorElement.removeEventListener('paste', handlePaste as any);\r\n    };\r\n  }, [editor, handleImageFile]);\r\n\r\n  // Handle drag & drop\r\n  const handleDragEnter = React.useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounterRef.current++;\r\n    if (e.dataTransfer?.types.includes('Files')) {\r\n      setIsDragging(true);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragLeave = React.useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounterRef.current--;\r\n    if (dragCounterRef.current === 0) {\r\n      setIsDragging(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragOver = React.useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }, []);\r\n\r\n  const handleDrop = React.useCallback(async (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n    dragCounterRef.current = 0;\r\n\r\n    const files = Array.from(e.dataTransfer?.files || []);\r\n    const imageFile = files.find(f => f.type.startsWith('image/'));\r\n    \r\n    if (imageFile) {\r\n      await handleImageFile(imageFile, 'drop');\r\n    }\r\n  }, [handleImageFile]);\r\n\r\n  // Sync content prop with editor state\r\n  React.useEffect(() => {\r\n    if (!editor) return;\r\n    const currentContent = editor.getHTML();\r\n    if (content !== currentContent) {\r\n      editor.commands.setContent(content);\r\n    }\r\n  }, [editor, content]);\r\n\r\n  if (!editor) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={cn(\r\n        'border border-border rounded-lg bg-background relative',\r\n        isDragging && 'ring-2 ring-primary border-primary',\r\n        className\r\n      )}\r\n      onDragEnter={handleDragEnter}\r\n      onDragLeave={handleDragLeave}\r\n      onDragOver={handleDragOver}\r\n      onDrop={handleDrop}\r\n    >\r\n      {/* Drag overlay */}\r\n      {isDragging && (\r\n        <div className=\"absolute inset-0 z-10 bg-primary/10 flex items-center justify-center rounded-lg pointer-events-none\">\r\n          <div className=\"flex flex-col items-center gap-2 text-primary\">\r\n            <Upload className=\"h-6 w-6\" />\r\n            <span className=\"text-sm font-medium\">Thả ảnh vào đây</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Toolbar - Compact */}\r\n      <div className=\"flex items-center gap-0.5 p-1.5 border-b border-border bg-muted/30\">\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().toggleBold().run()}\r\n          className={cn('h-7 w-7 p-0', editor.isActive('bold') && 'bg-muted')}\r\n          disabled={disabled}\r\n          title=\"Bold\"\r\n        >\r\n          <Bold className=\"h-3.5 w-3.5\" />\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().toggleItalic().run()}\r\n          className={cn('h-7 w-7 p-0', editor.isActive('italic') && 'bg-muted')}\r\n          disabled={disabled}\r\n          title=\"Italic\"\r\n        >\r\n          <Italic className=\"h-3.5 w-3.5\" />\r\n        </Button>\r\n        <div className=\"w-px h-5 bg-border mx-0.5\" />\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => fileInputRef.current?.click()}\r\n          className=\"h-7 w-7 p-0\"\r\n          disabled={disabled || isUploading}\r\n          title=\"Thêm ảnh\"\r\n        >\r\n          {isUploading ? (\r\n            <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\r\n          ) : (\r\n            <ImageIcon className=\"h-3.5 w-3.5\" />\r\n          )}\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().insertContent('@').run()}\r\n          className=\"h-7 w-7 p-0\"\r\n          disabled={disabled}\r\n          title=\"Tag người (@)\"\r\n        >\r\n          <AtSign className=\"h-3.5 w-3.5\" />\r\n        </Button>\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={handleImageSelect}\r\n          className=\"hidden\"\r\n        />\r\n      </div>\r\n\r\n      {/* Editor Content */}\r\n      <div\r\n        onClick={() => editor?.commands.focus()}\r\n        className=\"cursor-text\"\r\n        style={{ minHeight }}\r\n      >\r\n        <EditorContent\r\n          editor={editor}\r\n          className={cn('prose prose-sm max-w-none p-2', disabled && 'opacity-50')}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8907, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/Comments.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Card, CardHeader, CardTitle, CardContent } from './ui/card';\r\nimport { Button } from './ui/button';\r\nimport { Textarea } from './ui/textarea';\r\nimport { CommentEditor } from './ui/comment-editor';\r\nimport { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';\r\nimport { Badge } from './ui/badge';\r\nimport { MessageSquare, Reply, Edit2, Trash2, Send, FileText } from 'lucide-react';\r\nimport { cn } from '../lib/utils';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { vi } from 'date-fns/locale';\r\n\r\nexport interface Comment<AuthorId extends string = string, CommentId extends string = string> {\r\n  id: CommentId;\r\n  content: string;\r\n  author: {\r\n    systemId: AuthorId;\r\n    name: string;\r\n    avatar?: string | undefined;\r\n  };\r\n  createdAt: Date | string;\r\n  updatedAt?: Date | string | undefined;\r\n  parentId?: CommentId | undefined; // For replies\r\n  attachments?: (\r\n    {\r\n      id: string;\r\n      name: string;\r\n      url: string;\r\n      type: string;\r\n    }[] | string[]\r\n  ) | undefined;\r\n}\r\n\r\ninterface CommentsProps<\r\n  EntityId extends string = string,\r\n  AuthorId extends string = string,\r\n  CommentId extends string = string\r\n> {\r\n  entityType: string;\r\n  entityId: EntityId;\r\n  comments: Comment<AuthorId, CommentId>[];\r\n  onAddComment?: (content: string, parentIdOrAttachments?: CommentId | string[], parentId?: CommentId) => void;\r\n  onUpdateComment?: (commentId: CommentId, content: string) => void;\r\n  onDeleteComment?: (commentId: CommentId) => void;\r\n  readOnly?: boolean;\r\n  currentUser?: {\r\n    systemId: AuthorId;\r\n    name: string;\r\n    avatar?: string;\r\n  } | undefined;\r\n  title?: string;\r\n  placeholder?: string;\r\n  className?: string;\r\n  // Local storage for draft comments\r\n  enableDraftSaving?: boolean;\r\n  // Mentionable users for @tag functionality\r\n  mentions?: Array<{ id: string; label: string; avatar?: string }>;\r\n}\r\n\r\n/**\r\n * Generic Comments Component\r\n * \r\n * Dùng chung cho: Warranty, Orders, Complaints, Projects...\r\n * \r\n * Features:\r\n * - Add/edit/delete comments\r\n * - Threaded replies (parent-child)\r\n * - Draft saving (in-memory, per session)\r\n * - Rich text display\r\n * - Attachments support\r\n * - Relative timestamps\r\n * - User avatars\r\n * \r\n * Usage:\r\n * ```tsx\r\n * <Comments\r\n *   entityType=\"warranty\"\r\n *   entityId={ticket.systemId}\r\n *   comments={ticket.comments}\r\n *   onAddComment={(content, parentId) => addComment(content, parentId)}\r\n *   onUpdateComment={(id, content) => updateComment(id, content)}\r\n *   onDeleteComment={(id) => deleteComment(id)}\r\n *   currentUser={currentUser}\r\n * />\r\n * ```\r\n */\r\nexport function Comments<\r\n  EntityId extends string = string,\r\n  AuthorId extends string = string,\r\n  CommentId extends string = string\r\n>({\r\n  entityType,\r\n  entityId,\r\n  comments = [],\r\n  onAddComment,\r\n  onUpdateComment,\r\n  onDeleteComment,\r\n  readOnly = false,\r\n  currentUser,\r\n  title = 'Bình luận',\r\n  placeholder = 'Nhập bình luận...',\r\n  className,\r\n  enableDraftSaving = true,\r\n  mentions = [],\r\n}: CommentsProps<EntityId, AuthorId, CommentId>) {\r\n  const [newComment, setNewComment] = React.useState('');\r\n  const [newCommentText, setNewCommentText] = React.useState(''); // Plain text version\r\n  const [editingId, setEditingId] = React.useState<CommentId | null>(null);\r\n  const [editContent, setEditContent] = React.useState('');\r\n  const [replyingTo, setReplyingTo] = React.useState<CommentId | null>(null);\r\n  const [replyContent, setReplyContent] = React.useState('');\r\n\r\n  // Draft key for reference (no longer uses localStorage)\r\n  // Drafts are now kept in-memory only for the current session\r\n  // This is intentional - drafts don't need to persist across browser sessions\r\n\r\n  // Organize comments into tree structure\r\n  const commentTree = React.useMemo(() => {\r\n    const topLevel = comments.filter((c) => !c.parentId);\r\n    const childrenMap = new Map<CommentId, Comment<AuthorId, CommentId>[]>();\r\n\r\n    comments.forEach((comment) => {\r\n      if (!comment.parentId) {\r\n        return;\r\n      }\r\n      const siblings = childrenMap.get(comment.parentId) || [];\r\n      siblings.push(comment);\r\n      childrenMap.set(comment.parentId, siblings);\r\n    });\r\n\r\n    return { topLevel, childrenMap };\r\n  }, [comments]);\r\n\r\n  const handleAddComment = () => {\r\n    if (!newCommentText.trim() || !onAddComment) return;\r\n    \r\n    onAddComment(newComment.trim(), undefined, undefined); // Send HTML content\r\n    setNewComment('');\r\n    setNewCommentText('');\r\n    // Draft is cleared automatically when state is reset\r\n  };\r\n\r\n  const handleAddReply = (parentId: CommentId) => {\r\n    if (!replyContent.trim() || !onAddComment) return;\r\n    \r\n    onAddComment(replyContent.trim(), undefined, parentId);\r\n    setReplyContent('');\r\n    setReplyingTo(null);\r\n  };\r\n\r\n  const handleUpdateComment = (commentId: CommentId) => {\r\n    if (!editContent.trim() || !onUpdateComment) return;\r\n    \r\n    onUpdateComment(commentId, editContent.trim());\r\n    setEditingId(null);\r\n    setEditContent('');\r\n  };\r\n\r\n  const handleDeleteComment = (commentId: CommentId) => {\r\n    if (!onDeleteComment) return;\r\n    \r\n    if (confirm('Bạn có chắc muốn xóa bình luận này?')) {\r\n      onDeleteComment(commentId);\r\n    }\r\n  };\r\n\r\n  const startEdit = (comment: Comment<AuthorId, CommentId>) => {\r\n    setEditingId(comment.id);\r\n    setEditContent(comment.content);\r\n  };\r\n\r\n  const cancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditContent('');\r\n  };\r\n\r\n  const startReply = (commentId: CommentId) => {\r\n    setReplyingTo(commentId);\r\n    setReplyContent('');\r\n  };\r\n\r\n  const cancelReply = () => {\r\n    setReplyingTo(null);\r\n    setReplyContent('');\r\n  };\r\n\r\n  const renderComment = (comment: Comment<AuthorId, CommentId>, depth: number = 0) => {\r\n    const isEditing = editingId === comment.id;\r\n    const isReplying = replyingTo === comment.id;\r\n    const isOwn = currentUser?.systemId === comment.author.systemId;\r\n    const children = commentTree.childrenMap.get(comment.id) || [];\r\n    const createdAtDate = new Date(comment.createdAt);\r\n    const updatedAtDate = comment.updatedAt ? new Date(comment.updatedAt) : null;\r\n\r\n    return (\r\n      <div key={comment.id} className={cn(\"space-y-2\", depth > 0 && \"ml-12\")}>\r\n        <div className=\"flex gap-3\">\r\n          {/* Avatar */}\r\n          <Avatar className=\"h-8 w-8 flex-shrink-0\">\r\n            <AvatarImage src={comment.author.avatar} />\r\n            <AvatarFallback>{comment.author.name.charAt(0)}</AvatarFallback>\r\n          </Avatar>\r\n\r\n          <div className=\"flex-1 min-w-0 space-y-1\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              <span className=\"font-medium text-sm\">{comment.author.name}</span>\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                {formatDistanceToNow(createdAtDate, {\r\n                  addSuffix: true,\r\n                  locale: vi,\r\n                })}\r\n              </span>\r\n              {updatedAtDate && updatedAtDate.getTime() > createdAtDate.getTime() && (\r\n                <Badge variant=\"outline\" className=\"text-xs\">Đã chỉnh sửa</Badge>\r\n              )}\r\n            </div>\r\n\r\n            {/* Content */}\r\n            {isEditing ? (\r\n              <div className=\"space-y-2\">\r\n                <Textarea\r\n                  value={editContent}\r\n                  onChange={(e) => setEditContent(e.target.value)}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                      e.preventDefault();\r\n                      if (editContent.trim()) {\r\n                        handleUpdateComment(comment.id);\r\n                      }\r\n                    } else if (e.key === 'Escape') {\r\n                      cancelEdit();\r\n                    }\r\n                  }}\r\n                  className=\"min-h-[80px]\"\r\n                  autoFocus\r\n                />\r\n                <div className=\"flex gap-2\">\r\n                  <Button size=\"sm\" onClick={() => handleUpdateComment(comment.id)}>\r\n                    Lưu\r\n                  </Button>\r\n                  <Button size=\"sm\" variant=\"outline\" onClick={cancelEdit}>\r\n                    Hủy\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <div \r\n                  className=\"text-sm bg-muted/30 p-3 rounded-md prose prose-sm max-w-none [&_.mention]:text-primary [&_.mention]:font-medium\"\r\n                  dangerouslySetInnerHTML={{ __html: comment.content }}\r\n                />\r\n\r\n                {/* Attachments */}\r\n                {comment.attachments && comment.attachments.length > 0 && (\r\n                  <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                    {comment.attachments.map((file) => (\r\n                      <a\r\n                        key={file.id}\r\n                        href={file.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"flex items-center gap-2 px-3 py-1.5 bg-muted rounded-md hover:bg-muted/80 transition-colors text-sm\"\r\n                      >\r\n                        <FileText className=\"h-4 w-4\" />\r\n                        {file.name}\r\n                      </a>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Actions - Only reply allowed, no edit/delete to preserve data */}\r\n                {!readOnly && (\r\n                  <div className=\"flex items-center gap-2 text-xs\">\r\n                    {onAddComment && (\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => startReply(comment.id)}\r\n                        className=\"h-7 px-2\"\r\n                      >\r\n                        <Reply className=\"h-3 w-3 mr-1\" />\r\n                        Trả lời\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {/* Reply form */}\r\n            {isReplying && (\r\n              <div className=\"space-y-2 pt-2\">\r\n                <Textarea\r\n                  value={replyContent}\r\n                  onChange={(e) => setReplyContent(e.target.value)}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                      e.preventDefault();\r\n                      if (replyContent.trim()) {\r\n                        handleAddReply(comment.id);\r\n                      }\r\n                    } else if (e.key === 'Escape') {\r\n                      cancelReply();\r\n                    }\r\n                  }}\r\n                  placeholder={`Trả lời ${comment.author.name}...`}\r\n                  className=\"min-h-[80px]\"\r\n                  autoFocus\r\n                />\r\n                <div className=\"flex gap-2\">\r\n                  <Button size=\"sm\" onClick={() => handleAddReply(comment.id)}>\r\n                    <Send className=\"h-4 w-4 mr-2\" />\r\n                    Gửi\r\n                  </Button>\r\n                  <Button size=\"sm\" variant=\"outline\" onClick={cancelReply}>\r\n                    Hủy\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Render replies */}\r\n        {children.length > 0 && (\r\n          <div className=\"space-y-2\">\r\n            {children.map(child => renderComment(child, depth + 1))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Card className={className}>\r\n      <CardHeader>\r\n        <CardTitle className=\"text-h5 flex items-center gap-2\">\r\n          <MessageSquare className=\"h-4 w-4\" />\r\n          {title}\r\n          <Badge variant=\"secondary\" className=\"ml-auto\">\r\n            {comments.length}\r\n          </Badge>\r\n        </CardTitle>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"space-y-4\">\r\n        {/* Add new comment */}\r\n        {!readOnly && onAddComment && (\r\n          <div className=\"space-y-2\">\r\n            <CommentEditor\r\n              content={newComment}\r\n              onChange={(html, text) => {\r\n                setNewComment(html);\r\n                setNewCommentText(text);\r\n              }}\r\n              placeholder={placeholder}\r\n              mentions={mentions}\r\n              onSubmit={handleAddComment}\r\n              minHeight=\"80px\"\r\n            />\r\n            <Button onClick={handleAddComment} disabled={!newCommentText.trim()}>\r\n              <Send className=\"h-4 w-4 mr-2\" />\r\n              Gửi bình luận\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Comments list */}\r\n        {commentTree.topLevel.length === 0 ? (\r\n          <div className=\"text-sm text-muted-foreground text-center py-8\">\r\n            Chưa có bình luận nào\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {commentTree.topLevel.map(comment => renderComment(comment))}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9429, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/DatabaseComments.tsx"],"sourcesContent":["/**\r\n * Database-backed Comments Component\r\n * Wrapper cho Comments component, lưu vào database\r\n */\r\n\r\n'use client'\r\n\r\nimport * as React from 'react'\r\nimport { Comments, type Comment as CommentType } from './Comments'\r\nimport { useAuth } from '@/contexts/auth-context'\r\nimport { asSystemId, type SystemId } from '@/lib/id-types'\r\n\r\ninterface DatabaseCommentsProps {\r\n  entityType: string  // e.g., 'supplier', 'stock_transfer', 'leave'\r\n  entityId: string    // ID of the entity\r\n  className?: string\r\n}\r\n\r\nconst API_BASE = '/api/comments'\r\n\r\n/**\r\n * Comments component với database backend\r\n * Data được lưu trực tiếp vào PostgreSQL qua API\r\n */\r\nexport function DatabaseComments({ entityType, entityId, className }: DatabaseCommentsProps) {\r\n  const { user, employee } = useAuth()\r\n  const [comments, setComments] = React.useState<CommentType<SystemId>[]>([])\r\n  const [isLoading, setIsLoading] = React.useState(true)\r\n\r\n  // Load comments from database\r\n  React.useEffect(() => {\r\n    const loadComments = async () => {\r\n      try {\r\n        // Load from database API\r\n        const res = await fetch(\r\n          `${API_BASE}?entityType=${encodeURIComponent(entityType)}&entityId=${encodeURIComponent(entityId)}`\r\n        )\r\n        \r\n        if (res.ok) {\r\n          const data = await res.json()\r\n          \r\n          if (data && data.length > 0) {\r\n            // Transform API data to component format\r\n            const transformed = data.map((c: any) => ({\r\n              id: asSystemId(c.systemId),\r\n              content: c.content,\r\n              author: {\r\n                systemId: asSystemId(c.createdBy || 'system'),\r\n                name: c.createdByName || 'Hệ thống',\r\n              },\r\n              createdAt: c.createdAt,\r\n              updatedAt: c.updatedAt,\r\n              attachments: c.attachments || [],\r\n            }))\r\n            setComments(transformed)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(`Error loading comments for ${entityType}/${entityId}:`, error)\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n\r\n    if (entityId) {\r\n      loadComments()\r\n    }\r\n  }, [entityType, entityId])\r\n\r\n  // Add comment\r\n  const handleAddComment = React.useCallback(async (\r\n    content: string,\r\n    attachments?: string[],\r\n    parentId?: string\r\n  ) => {\r\n    const tempId = asSystemId(`temp-${Date.now()}`)\r\n    const newComment: CommentType<SystemId> = {\r\n      id: tempId,\r\n      content,\r\n      author: {\r\n        systemId: employee?.systemId ? asSystemId(employee.systemId) : asSystemId('system'),\r\n        name: employee?.fullName || user?.fullName || 'Hệ thống',\r\n        avatar: employee?.avatar,\r\n      },\r\n      createdAt: new Date().toISOString(),\r\n      attachments,\r\n      parentId: parentId as SystemId | undefined,\r\n    }\r\n\r\n    // Optimistic update\r\n    setComments(prev => [...prev, newComment])\r\n\r\n    // Save to database\r\n    try {\r\n      const res = await fetch(API_BASE, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          entityType,\r\n          entityId,\r\n          content,\r\n          attachments: attachments || [],\r\n          createdBy: user?.systemId || employee?.systemId,\r\n          createdByName: employee?.fullName || user?.fullName,\r\n        }),\r\n      })\r\n\r\n      if (res.ok) {\r\n        const saved = await res.json()\r\n        // Update with real ID\r\n        setComments(prev => prev.map(c => \r\n          c.id === tempId \r\n            ? { ...c, id: asSystemId(saved.systemId) }\r\n            : c\r\n        ))\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving comment:', error)\r\n    }\r\n  }, [entityType, entityId, user, employee])\r\n\r\n  // Update comment\r\n  const handleUpdateComment = React.useCallback((commentId: string, content: string) => {\r\n    setComments(prev => prev.map(c => \r\n      c.id === commentId \r\n        ? { ...c, content, updatedAt: new Date().toISOString() } \r\n        : c\r\n    ))\r\n    // Note: API update not implemented yet\r\n  }, [])\r\n\r\n  // Delete comment\r\n  const handleDeleteComment = React.useCallback(async (commentId: string) => {\r\n    // Optimistic delete\r\n    setComments(prev => prev.filter(c => c.id !== commentId))\r\n\r\n    // Delete from database\r\n    try {\r\n      await fetch(`${API_BASE}?systemId=${encodeURIComponent(commentId)}`, {\r\n        method: 'DELETE',\r\n      })\r\n    } catch (error) {\r\n      console.error('Error deleting comment:', error)\r\n    }\r\n  }, [])\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-4 text-muted-foreground\">Đang tải bình luận...</div>\r\n  }\r\n\r\n  return (\r\n    <Comments\r\n      comments={comments}\r\n      onAddComment={handleAddComment}\r\n      onUpdateComment={handleUpdateComment}\r\n      onDeleteComment={handleDeleteComment}\r\n      entityType={entityType}\r\n      entityId={entityId}\r\n      className={className}\r\n    />\r\n  )\r\n}\r\n\r\n/**\r\n * Migrate localStorage comments to database\r\n */\r\nasync function migrateComments(\r\n  entityType: string,\r\n  entityId: string,\r\n  comments: CommentType<SystemId>[]\r\n): Promise<void> {\r\n  try {\r\n    for (const comment of comments) {\r\n      await fetch(API_BASE, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          entityType,\r\n          entityId,\r\n          content: comment.content,\r\n          attachments: comment.attachments || [],\r\n          createdBy: comment.author?.systemId,\r\n          createdByName: comment.author?.name,\r\n        }),\r\n      })\r\n    }\r\n    console.log(`[Migration] Successfully migrated ${comments.length} comments to database`)\r\n  } catch (error) {\r\n    console.error(`[Migration] Failed to migrate comments:`, error)\r\n  }\r\n}\r\n\r\nexport default DatabaseComments\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9659, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ActivityHistory.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Card, CardHeader, CardTitle, CardContent } from './ui/card';\r\nimport { Badge } from './ui/badge';\r\nimport { Avatar, AvatarFallback, AvatarImage } from './ui/avatar';\r\nimport { Input } from './ui/input';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from './ui/select';\r\nimport {\r\n  History,\r\n  Plus,\r\n  Edit,\r\n  Trash2,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Clock,\r\n  User,\r\n  Package,\r\n  DollarSign,\r\n  FileText,\r\n  AlertCircle,\r\n  ArrowRight,\r\n  Filter,\r\n} from 'lucide-react';\r\nimport { cn } from '../lib/utils';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { vi } from 'date-fns/locale';\r\nimport { formatDateForDisplay, formatDateTimeForDisplay } from '@/lib/date-utils';\r\n\r\nexport interface HistoryEntry {\r\n  id: string;\r\n  action:\r\n    | 'created'\r\n    | 'updated'\r\n    | 'deleted'\r\n    | 'status_changed'\r\n    | 'assigned'\r\n    | 'product_added'\r\n    | 'product_updated'\r\n    | 'product_removed'\r\n    | 'payment_made'\r\n    | 'comment_added'\r\n    | 'attachment_added'\r\n    // Complaint-specific actions\r\n    | 'verified'\r\n    | 'verified-correct'\r\n    | 'verified-incorrect'\r\n    | 'investigated'\r\n    | 'resolved'\r\n    | 'rejected'\r\n    | 'cancelled'\r\n    | 'ended'\r\n    | 'reopened'\r\n    | 'commented'\r\n    | 'custom';\r\n  timestamp: Date;\r\n  user: {\r\n    systemId: string;\r\n    name: string;\r\n    avatar?: string | undefined;\r\n  };\r\n  description: string;\r\n  content?: React.ReactNode;\r\n  metadata?: {\r\n    oldValue?: any;\r\n    newValue?: any;\r\n    field?: string | undefined;\r\n    [key: string]: any;\r\n  } | undefined;\r\n}\r\n\r\ninterface ActivityHistoryProps {\r\n  history: HistoryEntry[];\r\n  title?: string;\r\n  emptyMessage?: string;\r\n  className?: string;\r\n  // Filter options\r\n  showFilters?: boolean;\r\n  filterableActions?: string[];\r\n  filterableUsers?: { systemId: string; name: string }[];\r\n  // Display options\r\n  showUser?: boolean;\r\n  showTimestamp?: boolean;\r\n  showMetadata?: boolean;\r\n  groupByDate?: boolean;\r\n  maxHeight?: string;\r\n}\r\n\r\n/**\r\n * Generic Activity History Component\r\n * \r\n * Dùng chung cho: Warranty, Orders, Complaints, Projects...\r\n * \r\n * Features:\r\n * - Display timeline of actions\r\n * - Filter by action type, user, date range\r\n * - Group by date\r\n * - Show old/new values for updates\r\n * - User avatars\r\n * - Relative timestamps\r\n * - Scrollable with max height\r\n * \r\n * Usage:\r\n * ```tsx\r\n * <ActivityHistory\r\n *   history={ticket.history}\r\n *   showFilters\r\n *   groupByDate\r\n *   filterableActions={['created', 'status_changed', 'updated']}\r\n *   title=\"Lịch sử thao tác\"\r\n * />\r\n * ```\r\n */\r\nexport function ActivityHistory({\r\n  history = [],\r\n  title = 'Lịch sử thao tác',\r\n  emptyMessage = 'Chưa có lịch sử nào',\r\n  className,\r\n  showFilters = true,\r\n  filterableActions,\r\n  filterableUsers,\r\n  showUser = true,\r\n  showTimestamp = true,\r\n  showMetadata = true,\r\n  groupByDate = false,\r\n  maxHeight = '600px',\r\n}: ActivityHistoryProps) {\r\n  const [filterAction, setFilterAction] = React.useState<string>('all');\r\n  const [filterUser, setFilterUser] = React.useState<string>('all');\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n\r\n  // Filter history\r\n  const filteredHistory = React.useMemo(() => {\r\n    let filtered = [...history];\r\n\r\n    // Filter by action\r\n    if (filterAction !== 'all') {\r\n      filtered = filtered.filter(h => h.action === filterAction);\r\n    }\r\n\r\n    // Filter by user\r\n    if (filterUser !== 'all') {\r\n      filtered = filtered.filter(h => h.user.systemId === filterUser);\r\n    }\r\n\r\n    // Search in description\r\n    if (searchQuery) {\r\n      filtered = filtered.filter(h =>\r\n        h.description.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Sort by timestamp (newest first)\r\n    filtered.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n\r\n    return filtered;\r\n  }, [history, filterAction, filterUser, searchQuery]);\r\n\r\n  // Group by date if enabled\r\n  const groupedHistory = React.useMemo(() => {\r\n    if (!groupByDate) return null;\r\n\r\n    const groups = new Map<string, HistoryEntry[]>();\r\n    \r\n    filteredHistory.forEach(entry => {\r\n      const date = formatDateForDisplay(entry.timestamp);\r\n      const group = groups.get(date) || [];\r\n      group.push(entry);\r\n      groups.set(date, group);\r\n    });\r\n\r\n    return groups;\r\n  }, [filteredHistory, groupByDate]);\r\n\r\n  // Get action icon and color\r\n  const getActionStyle = (action: string) => {\r\n    const styles: Record<string, { icon: any; color: string; bgColor: string }> = {\r\n      created: { icon: Plus, color: 'text-green-600', bgColor: 'bg-green-100' },\r\n      updated: { icon: Edit, color: 'text-blue-600', bgColor: 'bg-blue-100' },\r\n      deleted: { icon: Trash2, color: 'text-red-600', bgColor: 'bg-red-100' },\r\n      status_changed: { icon: CheckCircle2, color: 'text-purple-600', bgColor: 'bg-purple-100' },\r\n      assigned: { icon: User, color: 'text-orange-600', bgColor: 'bg-orange-100' },\r\n      product_added: { icon: Package, color: 'text-teal-600', bgColor: 'bg-teal-100' },\r\n      product_updated: { icon: Package, color: 'text-blue-600', bgColor: 'bg-blue-100' },\r\n      product_removed: { icon: Package, color: 'text-red-600', bgColor: 'bg-red-100' },\r\n      payment_made: { icon: DollarSign, color: 'text-green-600', bgColor: 'bg-green-100' },\r\n      comment_added: { icon: FileText, color: 'text-gray-600', bgColor: 'bg-gray-100' },\r\n      attachment_added: { icon: FileText, color: 'text-indigo-600', bgColor: 'bg-indigo-100' },\r\n      \r\n      // Complaint-specific actions\r\n      verified: { icon: CheckCircle2, color: 'text-blue-600', bgColor: 'bg-blue-100' },\r\n      'verified-correct': { icon: CheckCircle2, color: 'text-green-600', bgColor: 'bg-green-100' },\r\n      'verified-incorrect': { icon: XCircle, color: 'text-red-600', bgColor: 'bg-red-100' },\r\n      investigated: { icon: AlertCircle, color: 'text-blue-600', bgColor: 'bg-blue-100' },\r\n      resolved: { icon: CheckCircle2, color: 'text-green-600', bgColor: 'bg-green-100' },\r\n      rejected: { icon: XCircle, color: 'text-red-600', bgColor: 'bg-red-100' },\r\n      cancelled: { icon: XCircle, color: 'text-red-600', bgColor: 'bg-red-100' },\r\n      ended: { icon: CheckCircle2, color: 'text-green-600', bgColor: 'bg-green-100' },\r\n      reopened: { icon: History, color: 'text-purple-600', bgColor: 'bg-purple-100' },\r\n      commented: { icon: FileText, color: 'text-gray-600', bgColor: 'bg-gray-100' },\r\n      \r\n      custom: { icon: AlertCircle, color: 'text-gray-600', bgColor: 'bg-gray-100' },\r\n    };\r\n\r\n    return styles[action] || styles.custom;\r\n  };\r\n\r\n  const renderHistoryEntry = (entry: HistoryEntry, showDate: boolean = false) => {\r\n    const style = getActionStyle(entry.action);\r\n    const Icon = style.icon;\r\n\r\n    return (\r\n      <div key={entry.id} className=\"flex gap-3 pb-4 last:pb-0\">\r\n        {/* Icon */}\r\n        <div className={cn('flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center', style.bgColor)}>\r\n          <Icon className={cn('h-4 w-4', style.color)} />\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 min-w-0 space-y-1\">\r\n          {/* Description */}\r\n          <div className=\"text-sm\">{entry.content ?? entry.description}</div>\r\n\r\n          {/* Metadata - Note (e.g. reopen reason) */}\r\n          {showMetadata && entry.metadata?.note && (\r\n            <div className=\"text-sm text-muted-foreground italic border-l-2 border-muted pl-3 mt-1\">\r\n              {entry.metadata.note}\r\n            </div>\r\n          )}\r\n\r\n          {/* Metadata - old/new values */}\r\n          {showMetadata && entry.metadata && (entry.metadata.oldValue || entry.metadata.newValue) && (\r\n            <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n              {entry.metadata.oldValue && (\r\n                <span className=\"px-2 py-0.5 bg-red-100 text-red-700 rounded\">\r\n                  {String(entry.metadata.oldValue)}\r\n                </span>\r\n              )}\r\n              {entry.metadata.oldValue && entry.metadata.newValue && (\r\n                <ArrowRight className=\"h-3 w-3\" />\r\n              )}\r\n              {entry.metadata.newValue && (\r\n                <span className=\"px-2 py-0.5 bg-green-100 text-green-700 rounded\">\r\n                  {String(entry.metadata.newValue)}\r\n                </span>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* User & Timestamp */}\r\n          <div className=\"flex items-center gap-2 text-xs text-muted-foreground flex-wrap\">\r\n            {showUser && (\r\n              <>\r\n                <Avatar className=\"h-5 w-5\">\r\n                  <AvatarImage src={entry.user.avatar} />\r\n                  <AvatarFallback className=\"text-[10px]\">\r\n                    {entry.user.name.charAt(0)}\r\n                  </AvatarFallback>\r\n                </Avatar>\r\n                <span className=\"font-medium\">{entry.user.name}</span>\r\n              </>\r\n            )}\r\n\r\n            {showTimestamp && (\r\n              <>\r\n                <Clock className=\"h-3 w-3\" />\r\n                <span>\r\n                  {formatDistanceToNow(new Date(entry.timestamp), {\r\n                    addSuffix: true,\r\n                    locale: vi,\r\n                  })}\r\n                </span>\r\n                {showDate && (\r\n                  <span className=\"text-[10px]\">\r\n                    ({formatDateTimeForDisplay(entry.timestamp)})\r\n                  </span>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Card className={className}>\r\n      <CardHeader>\r\n        <div className=\"flex items-center justify-between gap-2\">\r\n          <CardTitle className=\"text-h5 flex items-center gap-2\">\r\n            <History className=\"h-4 w-4\" />\r\n            {title}\r\n          </CardTitle>\r\n          <Badge variant=\"secondary\">{filteredHistory.length}</Badge>\r\n        </div>\r\n\r\n        {/* Filters */}\r\n        {showFilters && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2 mt-4\">\r\n            {/* Search */}\r\n            <Input\r\n              placeholder=\"Tìm kiếm...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"h-9\"\r\n            />\r\n\r\n            {/* Filter by action */}\r\n            {filterableActions && (\r\n              <Select value={filterAction} onValueChange={setFilterAction}>\r\n                <SelectTrigger className=\"h-9\">\r\n                  <Filter className=\"h-4 w-4 mr-2\" />\r\n                  <SelectValue placeholder=\"Loại hành động\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">Tất cả hành động</SelectItem>\r\n                  {filterableActions.map(action => (\r\n                    <SelectItem key={action} value={action}>\r\n                      {action.replace(/_/g, ' ')}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            )}\r\n\r\n            {/* Filter by user */}\r\n            {filterableUsers && (\r\n              <Select value={filterUser} onValueChange={setFilterUser}>\r\n                <SelectTrigger className=\"h-9\">\r\n                  <User className=\"h-4 w-4 mr-2\" />\r\n                  <SelectValue placeholder=\"Người thực hiện\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">Tất cả</SelectItem>\r\n                  {filterableUsers.map(user => (\r\n                    <SelectItem key={user.systemId} value={user.systemId}>\r\n                      {user.name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            )}\r\n          </div>\r\n        )}\r\n      </CardHeader>\r\n\r\n      <CardContent>\r\n        {filteredHistory.length === 0 ? (\r\n          <div className=\"text-sm text-muted-foreground text-center py-8\">\r\n            {emptyMessage}\r\n          </div>\r\n        ) : (\r\n          <div\r\n            className=\"space-y-0 overflow-y-auto pr-2\"\r\n            style={{ maxHeight }}\r\n          >\r\n            {groupByDate && groupedHistory ? (\r\n              // Grouped by date\r\n              Array.from(groupedHistory.entries()).map(([date, entries]) => (\r\n                <div key={date} className=\"mb-6 last:mb-0\">\r\n                  <div className=\"sticky top-0 bg-background z-10 pb-2 mb-2\">\r\n                    <Badge variant=\"outline\" className=\"text-xs\">\r\n                      {date}\r\n                    </Badge>\r\n                  </div>\r\n                  <div className=\"space-y-0 relative before:absolute before:left-4 before:top-2 before:bottom-2 before:w-px before:bg-border\">\r\n                    {entries.map(entry => renderHistoryEntry(entry, true))}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              // Flat list with timeline\r\n              <div className=\"relative before:absolute before:left-4 before:top-2 before:bottom-2 before:w-px before:bg-border\">\r\n                {filteredHistory.map(entry => renderHistoryEntry(entry, true))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}