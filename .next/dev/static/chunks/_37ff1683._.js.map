{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/hooks/use-column-visibility.ts"],"sourcesContent":["/**\r\n * Hook ƒë·ªÉ qu·∫£n l√Ω column visibility\r\n * S·ª≠ d·ª•ng database (user preferences) l√†m source of truth\r\n * localStorage ƒë√£ b·ªã remove kh·ªèi codebase\r\n */\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react'\r\nimport { useAuth } from '@/contexts/auth-context'\r\n\r\nconst API_BASE = '/api/user-preferences'\r\n\r\n// Debounce delay for saving preferences (ms)\r\nconst SAVE_DEBOUNCE_DELAY = 1000\r\n\r\n/**\r\n * Hook ƒë·ªÉ qu·∫£n l√Ω column visibility cho data tables\r\n * \r\n * @param tableName - T√™n b·∫£ng (e.g., 'suppliers', 'tasks', 'products')\r\n * @param defaultVisibility - Default visibility state\r\n */\r\nexport function useColumnVisibility(\r\n  tableName: string,\r\n  defaultVisibility: Record<string, boolean> = {}\r\n): [Record<string, boolean>, (visibility: Record<string, boolean>) => void, boolean] {\r\n  const { user } = useAuth()\r\n  const [visibility, setVisibility] = useState<Record<string, boolean>>(defaultVisibility)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const lastSavedRef = useRef<string>('')\r\n\r\n  const storageKey = `${tableName}-column-visibility`\r\n\r\n  // Load from database\r\n  useEffect(() => {\r\n    const loadVisibility = async () => {\r\n      try {\r\n        if (user?.systemId) {\r\n          const res = await fetch(\r\n            `${API_BASE}?userId=${user.systemId}&key=${encodeURIComponent(storageKey)}`\r\n          )\r\n          \r\n          if (res.ok) {\r\n            const data = await res.json()\r\n            if (data && data.value) {\r\n              setVisibility(data.value)\r\n              lastSavedRef.current = JSON.stringify(data.value)\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(`Error loading column visibility for ${tableName}:`, error)\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n\r\n    loadVisibility()\r\n  }, [user?.systemId, storageKey, tableName])\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Update visibility - save to database with debounce\r\n  const updateVisibility = useCallback(\r\n    (newVisibility: Record<string, boolean>) => {\r\n      setVisibility(newVisibility)\r\n\r\n      // Save to database if user logged in (with debounce)\r\n      if (user?.systemId) {\r\n        const newValueStr = JSON.stringify(newVisibility)\r\n        \r\n        // Skip if value hasn't changed\r\n        if (newValueStr === lastSavedRef.current) {\r\n          return\r\n        }\r\n\r\n        // Clear existing timeout\r\n        if (saveTimeoutRef.current) {\r\n          clearTimeout(saveTimeoutRef.current)\r\n        }\r\n\r\n        // Debounce save\r\n        saveTimeoutRef.current = setTimeout(() => {\r\n          lastSavedRef.current = newValueStr\r\n          fetch(API_BASE, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n              userId: user.systemId,\r\n              key: storageKey,\r\n              value: newVisibility,\r\n              category: 'ui',\r\n            }),\r\n          }).catch(error => {\r\n            console.error(`Error saving column visibility for ${tableName}:`, error)\r\n          })\r\n        }, SAVE_DEBOUNCE_DELAY)\r\n      }\r\n    },\r\n    [user?.systemId, storageKey, tableName]\r\n  )\r\n\r\n  return [visibility, updateVisibility, isLoading]\r\n}\r\n\r\n/**\r\n * Hook ƒë·ªÉ qu·∫£n l√Ω column order\r\n */\r\nexport function useColumnOrder(\r\n  tableName: string,\r\n  defaultOrder: string[] = []\r\n): [string[], (order: string[]) => void, boolean] {\r\n  const { user } = useAuth()\r\n  const [order, setOrder] = useState<string[]>(defaultOrder)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const lastSavedRef = useRef<string>('')\r\n\r\n  const storageKey = `${tableName}-column-order`\r\n\r\n  useEffect(() => {\r\n    const loadOrder = async () => {\r\n      try {\r\n        if (user?.systemId) {\r\n          const res = await fetch(\r\n            `${API_BASE}?userId=${user.systemId}&key=${encodeURIComponent(storageKey)}`\r\n          )\r\n          \r\n          if (res.ok) {\r\n            const data = await res.json()\r\n            if (data && data.value) {\r\n              setOrder(data.value)\r\n              lastSavedRef.current = JSON.stringify(data.value)\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(`Error loading column order for ${tableName}:`, error)\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n\r\n    loadOrder()\r\n  }, [user?.systemId, storageKey, tableName])\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const updateOrder = useCallback(\r\n    (newOrder: string[]) => {\r\n      setOrder(newOrder)\r\n\r\n      if (user?.systemId) {\r\n        const newValueStr = JSON.stringify(newOrder)\r\n        \r\n        // Skip if value hasn't changed\r\n        if (newValueStr === lastSavedRef.current) {\r\n          return\r\n        }\r\n\r\n        // Clear existing timeout\r\n        if (saveTimeoutRef.current) {\r\n          clearTimeout(saveTimeoutRef.current)\r\n        }\r\n\r\n        // Debounce save\r\n        saveTimeoutRef.current = setTimeout(() => {\r\n          lastSavedRef.current = newValueStr\r\n          fetch(API_BASE, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n              userId: user.systemId,\r\n              key: storageKey,\r\n              value: newOrder,\r\n              category: 'ui',\r\n            }),\r\n          }).catch(error => {\r\n            console.error(`Error saving column order for ${tableName}:`, error)\r\n          })\r\n        }, SAVE_DEBOUNCE_DELAY)\r\n      }\r\n    },\r\n    [user?.systemId, storageKey, tableName]\r\n  )\r\n\r\n  return [order, updateOrder, isLoading]\r\n}\r\n\r\n/**\r\n * Hook ƒë·ªÉ qu·∫£n l√Ω pinned columns\r\n */\r\nexport function usePinnedColumns(\r\n  tableName: string,\r\n  defaultPinned: string[] = []\r\n): [string[], (pinned: string[]) => void, boolean] {\r\n  const { user } = useAuth()\r\n  const [pinned, setPinned] = useState<string[]>(defaultPinned)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const lastSavedRef = useRef<string>('')\r\n\r\n  const storageKey = `${tableName}-column-pinned`\r\n\r\n  useEffect(() => {\r\n    const loadPinned = async () => {\r\n      try {\r\n        if (user?.systemId) {\r\n          const res = await fetch(\r\n            `${API_BASE}?userId=${user.systemId}&key=${encodeURIComponent(storageKey)}`\r\n          )\r\n          \r\n          if (res.ok) {\r\n            const data = await res.json()\r\n            if (data && data.value) {\r\n              setPinned(data.value)\r\n              lastSavedRef.current = JSON.stringify(data.value)\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(`Error loading pinned columns for ${tableName}:`, error)\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n\r\n    loadPinned()\r\n  }, [user?.systemId, storageKey, tableName])\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const updatePinned = useCallback(\r\n    (newPinned: string[]) => {\r\n      setPinned(newPinned)\r\n\r\n      if (user?.systemId) {\r\n        const newValueStr = JSON.stringify(newPinned)\r\n        \r\n        // Skip if value hasn't changed\r\n        if (newValueStr === lastSavedRef.current) {\r\n          return\r\n        }\r\n\r\n        // Clear existing timeout\r\n        if (saveTimeoutRef.current) {\r\n          clearTimeout(saveTimeoutRef.current)\r\n        }\r\n\r\n        // Debounce save\r\n        saveTimeoutRef.current = setTimeout(() => {\r\n          lastSavedRef.current = newValueStr\r\n          fetch(API_BASE, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n              userId: user.systemId,\r\n              key: storageKey,\r\n              value: newPinned,\r\n              category: 'ui',\r\n            }),\r\n          }).catch(error => {\r\n            console.error(`Error saving pinned columns for ${tableName}:`, error)\r\n          })\r\n        }, SAVE_DEBOUNCE_DELAY)\r\n      }\r\n    },\r\n    [user?.systemId, storageKey, tableName]\r\n  )\r\n\r\n  return [pinned, updatePinned, isLoading]\r\n}\r\n\r\nexport default useColumnVisibility\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 343, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-types.ts"],"sourcesContent":["/**\r\n * Type-safe ID System\r\n * \r\n * Prevents mixing systemId with business ID at compile time\r\n */\r\n\r\n// Branded types for type safety\r\nexport type SystemId = string & { readonly __brand: 'SystemId' };\r\nexport type BusinessId = string & { readonly __brand: 'BusinessId' };\r\n\r\n/**\r\n * Create a SystemId from a string\r\n * Use this when you know for sure it's a systemId\r\n */\r\nexport function asSystemId(id: string): SystemId {\r\n  return id as SystemId;\r\n}\r\n\r\n/**\r\n * Create a BusinessId from a string\r\n * Use this when you know for sure it's a business ID\r\n */\r\nexport function asBusinessId(id: string): BusinessId {\r\n  return id as BusinessId;\r\n}\r\n\r\n/**\r\n * Check if a string is a valid systemId format\r\n */\r\nexport function isSystemIdFormat(id: string): boolean {\r\n  // SystemId: 8 digits + prefix (e.g., NV00000001, VOUCHER00000123)\r\n  return /^[A-Z]+\\d{8}$/.test(id);\r\n}\r\n\r\n/**\r\n * Check if a string is a valid business ID format\r\n */\r\nexport function isBusinessIdFormat(id: string): boolean {\r\n  // Business ID: shorter, variable length (e.g., NV001, PT000001)\r\n  return /^[A-Z]+\\d{3,6}$/.test(id);\r\n}\r\n\r\n/**\r\n * Safely convert unknown ID to proper type\r\n */\r\nexport function parseId(id: string): { type: 'system' | 'business'; value: SystemId | BusinessId } {\r\n  if (isSystemIdFormat(id)) {\r\n    return { type: 'system', value: asSystemId(id) };\r\n  }\r\n  if (isBusinessIdFormat(id)) {\r\n    return { type: 'business', value: asBusinessId(id) };\r\n  }\r\n  throw new Error(`Invalid ID format: ${id}`);\r\n}\r\n\r\n/**\r\n * ID Pair - Always keep systemId and businessId together\r\n */\r\nexport interface IDPair {\r\n  systemId: SystemId;\r\n  businessId: BusinessId;\r\n}\r\n\r\n/**\r\n * Entity with dual IDs\r\n */\r\nexport interface DualIDEntity {\r\n  systemId: SystemId;\r\n  id: BusinessId;\r\n}\r\n\r\n/**\r\n * Store methods with type-safe IDs\r\n */\r\nexport interface TypeSafeStore<T extends DualIDEntity> {\r\n  /** Find by systemId (for queries, relationships) */\r\n  findBySystemId(systemId: SystemId): T | null;\r\n  \r\n  /** Find by business ID (for user input, display) */\r\n  findByBusinessId(businessId: BusinessId): T | null;\r\n  \r\n  /** Update by systemId (always use systemId for updates) */\r\n  updateBySystemId(systemId: SystemId, updates: Partial<T>): void;\r\n  \r\n  /** Delete by systemId (always use systemId for deletes) */\r\n  deleteBySystemId(systemId: SystemId): void;\r\n}\r\n\r\n/**\r\n * Route params with type-safe IDs\r\n */\r\nexport interface RouteParams {\r\n  systemId?: SystemId;\r\n  id?: BusinessId;\r\n}\r\n\r\n/**\r\n * Link builder - always uses systemId\r\n */\r\nexport function buildEntityLink(path: string, entity: DualIDEntity): string {\r\n  return path.replace(':systemId', entity.systemId);\r\n}\r\n\r\n/**\r\n * Display ID - always uses business ID\r\n */\r\nexport function getDisplayId(entity: DualIDEntity): string {\r\n  return entity.id;\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid SystemId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureSystemId(id: string, context?: string): SystemId {\r\n  if (!isSystemIdFormat(id)) {\r\n    console.warn(`[ensureSystemId] Invalid SystemId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asSystemId(id);\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid BusinessId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureBusinessId(id: string, context?: string): BusinessId {\r\n  if (!isBusinessIdFormat(id)) {\r\n    console.warn(`[ensureBusinessId] Invalid BusinessId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asBusinessId(id);\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC,GAED,gCAAgC;;;;;;;;;;;;;;;;;;;;;AAQzB,SAAS,WAAW,EAAU;IACnC,OAAO;AACT;AAMO,SAAS,aAAa,EAAU;IACrC,OAAO;AACT;AAKO,SAAS,iBAAiB,EAAU;IACzC,kEAAkE;IAClE,OAAO,gBAAgB,IAAI,CAAC;AAC9B;AAKO,SAAS,mBAAmB,EAAU;IAC3C,gEAAgE;IAChE,OAAO,kBAAkB,IAAI,CAAC;AAChC;AAKO,SAAS,QAAQ,EAAU;IAChC,IAAI,iBAAiB,KAAK;QACxB,OAAO;YAAE,MAAM;YAAU,OAAO,WAAW;QAAI;IACjD;IACA,IAAI,mBAAmB,KAAK;QAC1B,OAAO;YAAE,MAAM;YAAY,OAAO,aAAa;QAAI;IACrD;IACA,MAAM,IAAI,MAAM,CAAC,mBAAmB,EAAE,IAAI;AAC5C;AA8CO,SAAS,gBAAgB,IAAY,EAAE,MAAoB;IAChE,OAAO,KAAK,OAAO,CAAC,aAAa,OAAO,QAAQ;AAClD;AAKO,SAAS,aAAa,MAAoB;IAC/C,OAAO,OAAO,EAAE;AAClB;AAMO,SAAS,eAAe,EAAU,EAAE,OAAgB;IACzD,IAAI,CAAC,iBAAiB,KAAK;QACzB,QAAQ,IAAI,CAAC,CAAC,2CAA2C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACpG;IACA,OAAO,WAAW;AACpB;AAMO,SAAS,iBAAiB,EAAU,EAAE,OAAgB;IAC3D,IAAI,CAAC,mBAAmB,KAAK;QAC3B,QAAQ,IAAI,CAAC,CAAC,+CAA+C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACxG;IACA,OAAO,aAAa;AACtB"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/smart-prefix.ts"],"sourcesContent":["/**\r\n * Smart Prefix System\r\n * Mapping entity types to their unique prefixes\r\n */\r\n\r\nexport const ENTITY_PREFIXES = {\r\n  // ========================================\r\n  // NH√ÇN S·ª∞ & T·ªî CH·ª®C (HR & ORGANIZATION)\r\n  // ========================================\r\n  'employees': 'NV',           // Nh√¢n vi√™n (Employee)\r\n  'departments': 'PB',         // Ph√≤ng ban (Department)\r\n  'branches': 'CN',            // Chi nh√°nh (Branch)\r\n  'job-titles': 'CV',          // Ch·ª©c v·ª• (Job Title)\r\n  \r\n  // ========================================\r\n  // KH√ÅCH H√ÄNG & ƒê·ªêI T√ÅC (CUSTOMERS & PARTNERS)\r\n  // ========================================\r\n  'customers': 'KH',           // Kh√°ch h√†ng (Customer)\r\n  'suppliers': 'NCC',          // Nh√† cung c·∫•p (Supplier)\r\n  'shipping-partners': 'DVVC', // ƒê∆°n v·ªã v·∫≠n chuy·ªÉn (Shipping Partner)\r\n  \r\n  // ========================================\r\n  // S·∫¢N PH·∫®M & KHO (PRODUCTS & INVENTORY)\r\n  // ========================================\r\n  'products': 'SP',            // S·∫£n ph·∫©m (Product)\r\n  'brands': 'TH',              // Th∆∞∆°ng hi·ªáu (Brand)\r\n  'categories': 'DM',          // Danh m·ª•c (Category)\r\n  'units': 'DVT',              // ƒê∆°n v·ªã t√≠nh (Unit)\r\n  'stock-locations': 'KHO',    // Kho h√†ng (Stock Location)\r\n  'inventory-receipts': 'NK',  // Nh·∫≠p kho (Inventory Receipt)\r\n  'inventory-checks': 'PKK',   // Phi·∫øu ki·ªÉm kho (Inventory Check)\r\n  'stock-transfers': 'PCK',    // Phi·∫øu chuy·ªÉn kho (Stock Transfer)\r\n  'stock-history': 'LS',       // L·ªãch s·ª≠ kho (Stock History)\r\n  \r\n  // ========================================\r\n  // B√ÅN H√ÄNG (SALES)\r\n  // ========================================\r\n  'orders': 'DH',              // ƒê∆°n h√†ng (Sales Order)\r\n  'sales-returns': 'TH',       // Tr·∫£ h√†ng (Sales Return)\r\n  'sales-channels': 'KENH',    // K√™nh b√°n h√†ng (Sales Channel)\r\n  'shipments': 'VC',           // V·∫≠n chuy·ªÉn (Shipment)\r\n  \r\n  // ========================================\r\n  // MUA H√ÄNG (PURCHASING)\r\n  // ========================================\r\n  'purchase-orders': 'PO',     // ƒê∆°n mua h√†ng (Purchase Order)\r\n  'purchase-returns': 'TM',    // Tr·∫£ mua (Purchase Return)\r\n  \r\n  // ========================================\r\n  // T√ÄI CH√çNH (FINANCE)\r\n  // ========================================\r\n  'receipts': 'PT',            // Phi·∫øu thu (Receipt)\r\n  'payments': 'PC',            // Phi·∫øu chi (Payment)\r\n  'voucher-receipt': 'PT',     // Alias phi·∫øu thu t·ª´ workflow voucher\r\n  'voucher-payment': 'PC',     // Alias phi·∫øu chi t·ª´ workflow voucher\r\n  'cashbook': 'SCT',           // S·ªï qu·ªπ (Cashbook)\r\n  'reconciliation': 'DT',      // ƒê·ªëi t√†i (Reconciliation)\r\n  \r\n  // C√†i ƒë·∫∑t t√†i ch√≠nh\r\n  'receipt-types': 'LT',       // Lo·∫°i thu (Receipt Type)\r\n  'payment-types': 'LC',       // Lo·∫°i chi (Payment Type)\r\n  'cash-accounts': 'TK',       // T√†i kho·∫£n ti·ªÅn (Cash Account)\r\n  'payment-methods': 'PTTT',   // Ph∆∞∆°ng th·ª©c thanh to√°n (Payment Method)\r\n  'pricing-settings': 'GIA',   // Ch√≠nh s√°ch gi√° (Pricing Policy)\r\n  'taxes': 'TAX',              // Thu·∫ø (Tax)\r\n  \r\n  // ========================================\r\n  // L∆Ø∆†NG & NH√ÇN S·ª∞ (PAYROLL & HR)\r\n  // ========================================\r\n  'payroll': 'BL',             // B·∫£ng l∆∞∆°ng (Payroll)\r\n  'payslips': 'PL',            // Phi·∫øu l∆∞∆°ng (Payslip)\r\n  'payroll-audit-log': 'PAL',  // Nh·∫≠t k√Ω payroll\r\n  'payroll-templates': 'BTP',  // M·∫´u b·∫£ng l∆∞∆°ng (Payroll Template)\r\n  'penalties': 'PF',           // Phi·∫øu ph·∫°t (Penalty)\r\n  'leaves': 'PN',              // Ph√©p ngh·ªâ (Leave)\r\n  'attendance': 'CC',          // Ch·∫•m c√¥ng (Attendance)\r\n  'duty-schedule': 'PC',       // Ph√¢n c√¥ng (Duty Schedule)\r\n  \r\n  // ========================================\r\n  // KPI & M·ª§C TI√äU (KPI & TARGETS)\r\n  // ========================================\r\n  'kpi': 'KPI',                // KPI\r\n  'target-groups': 'NHOM',     // Nh√≥m m·ª•c ti√™u (Target Group)\r\n  'other-targets': 'MT',       // M·ª•c ti√™u kh√°c (Other Target)\r\n  \r\n  // ========================================\r\n  // C√îNG VI·ªÜC & D·ªäCH V·ª§ (TASKS & SERVICES)\r\n  // ========================================\r\n  'internal-tasks': 'CVNB',    // C√¥ng vi·ªác n·ªôi b·ªô (Internal Task)\r\n  'task-templates': 'TMPL',    // M·∫´u c√¥ng vi·ªác (Task Template)\r\n  'custom-fields': 'FIELD',    // Tr∆∞·ªùng t√πy ch·ªânh (Custom Field)\r\n  'warranty': 'BH',            // B·∫£o h√†nh (Warranty)\r\n  'complaints': 'PKN',         // Khi·∫øu n·∫°i (Complaint)\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T & DANH M·ª§C (SETTINGS & CATEGORIES)\r\n  // ========================================\r\n  'provinces': 'TP',           // T·ªânh/Th√†nh ph·ªë (Province)\r\n  'districts': 'QH',           // Qu·∫≠n/Huy·ªán (District)\r\n  'wards': 'PX',               // Ph∆∞·ªùng/X√£ (Ward)\r\n  'wiki': 'TL',                // T√†i li·ªáu (Wiki)\r\n  'packaging': 'DG',           // ƒê√≥ng g√≥i (Packaging)\r\n  'audit-log': 'LOG',          // Nh·∫≠t k√Ω (Audit Log)\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T KH√ÅCH H√ÄNG (CUSTOMER SETTINGS)\r\n  // ========================================\r\n  'customer-types': 'LKH',     // Lo·∫°i kh√°ch h√†ng (Customer Type)\r\n  'customer-groups': 'NHKH',   // Nh√≥m kh√°ch h√†ng (Customer Group)\r\n  'customer-sources': 'NKH',   // Ngu·ªìn kh√°ch h√†ng (Customer Source)\r\n  'payment-terms': 'HTTT',     // H·∫°n thanh to√°n (Payment Term)\r\n  'credit-ratings': 'XHTD',    // X·∫øp h·∫°ng t√≠n d·ª•ng (Credit Rating)\r\n  'lifecycle-stages': 'GDL',   // Giai ƒëo·∫°n v√≤ng ƒë·ªùi kh√°ch h√†ng\r\n  'sla-settings': 'SLA',       // C√†i ƒë·∫∑t SLA kh√°ch h√†ng\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T NH√ÇN VI√äN (EMPLOYEE SETTINGS)\r\n  // ========================================\r\n  'employee-types': 'LNV',     // Lo·∫°i nh√¢n vi√™n (Employee Type)\r\n  'employee-statuses': 'TTNV', // Tr·∫°ng th√°i nh√¢n vi√™n (Employee Status)\r\n  'contract-types': 'LHD',     // Lo·∫°i h·ª£p ƒë·ªìng (Contract Type)\r\n  'work-shifts': 'CA',         // Ca l√†m vi·ªác (Work Shift)\r\n  'leave-types': 'LP',         // Lo·∫°i ngh·ªâ ph√©p (Leave Type)\r\n  'salary-components': 'SC',   // Th√†nh ph·∫ßn l∆∞∆°ng (Salary Component)\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T KH√ÅC (OTHER SETTINGS)\r\n  // ========================================\r\n  'settings': 'CFG',           // C·∫•u h√¨nh (Configuration)\r\n  \r\n  // ========================================\r\n  // AUTHENTICATION & USERS\r\n  // ========================================\r\n  'users': 'USER',             // User accounts (for admin management)\r\n  \r\n} as const;\r\n\r\nexport type EntityType = keyof typeof ENTITY_PREFIXES;\r\n\r\n/**\r\n * Get prefix for an entity type\r\n */\r\nexport function getPrefix(entityType: EntityType): string {\r\n  return ENTITY_PREFIXES[entityType];\r\n}\r\n\r\n/**\r\n * Get all entity types\r\n */\r\nexport function getAllEntityTypes(): EntityType[] {\r\n  return Object.keys(ENTITY_PREFIXES) as EntityType[];\r\n}\r\n\r\n/**\r\n * Check if an entity type exists\r\n */\r\nexport function isValidEntityType(entityType: string): entityType is EntityType {\r\n  return entityType in ENTITY_PREFIXES;\r\n}\r\n\r\n/**\r\n * Get entity type from prefix\r\n */\r\nexport function getEntityTypeFromPrefix(prefix: string): EntityType | null {\r\n  const entry = Object.entries(ENTITY_PREFIXES).find(([_, p]) => p === prefix);\r\n  return entry ? (entry[0] as EntityType) : null;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;AAEM,MAAM,kBAAkB;IAC7B,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,aAAa;IACb,eAAe;IACf,YAAY;IACZ,cAAc;IAEd,2CAA2C;IAC3C,8CAA8C;IAC9C,2CAA2C;IAC3C,aAAa;IACb,aAAa;IACb,qBAAqB;IAErB,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,YAAY;IACZ,UAAU;IACV,cAAc;IACd,SAAS;IACT,mBAAmB;IACnB,sBAAsB;IACtB,oBAAoB;IACpB,mBAAmB;IACnB,iBAAiB;IAEjB,2CAA2C;IAC3C,mBAAmB;IACnB,2CAA2C;IAC3C,UAAU;IACV,iBAAiB;IACjB,kBAAkB;IAClB,aAAa;IAEb,2CAA2C;IAC3C,wBAAwB;IACxB,2CAA2C;IAC3C,mBAAmB;IACnB,oBAAoB;IAEpB,2CAA2C;IAC3C,sBAAsB;IACtB,2CAA2C;IAC3C,YAAY;IACZ,YAAY;IACZ,mBAAmB;IACnB,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAElB,oBAAoB;IACpB,iBAAiB;IACjB,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;IACnB,oBAAoB;IACpB,SAAS;IAET,2CAA2C;IAC3C,iCAAiC;IACjC,2CAA2C;IAC3C,WAAW;IACX,YAAY;IACZ,qBAAqB;IACrB,qBAAqB;IACrB,aAAa;IACb,UAAU;IACV,cAAc;IACd,iBAAiB;IAEjB,2CAA2C;IAC3C,iCAAiC;IACjC,2CAA2C;IAC3C,OAAO;IACP,iBAAiB;IACjB,iBAAiB;IAEjB,2CAA2C;IAC3C,yCAAyC;IACzC,2CAA2C;IAC3C,kBAAkB;IAClB,kBAAkB;IAClB,iBAAiB;IACjB,YAAY;IACZ,cAAc;IAEd,2CAA2C;IAC3C,6CAA6C;IAC7C,2CAA2C;IAC3C,aAAa;IACb,aAAa;IACb,SAAS;IACT,QAAQ;IACR,aAAa;IACb,aAAa;IAEb,2CAA2C;IAC3C,yCAAyC;IACzC,2CAA2C;IAC3C,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;IACpB,iBAAiB;IACjB,kBAAkB;IAClB,oBAAoB;IACpB,gBAAgB;IAEhB,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,kBAAkB;IAClB,qBAAqB;IACrB,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,qBAAqB;IAErB,2CAA2C;IAC3C,gCAAgC;IAChC,2CAA2C;IAC3C,YAAY;IAEZ,2CAA2C;IAC3C,yBAAyB;IACzB,2CAA2C;IAC3C,SAAS;AAEX;AAOO,SAAS,UAAU,UAAsB;IAC9C,OAAO,eAAe,CAAC,WAAW;AACpC;AAKO,SAAS;IACd,OAAO,OAAO,IAAI,CAAC;AACrB;AAKO,SAAS,kBAAkB,UAAkB;IAClD,OAAO,cAAc;AACvB;AAKO,SAAS,wBAAwB,MAAc;IACpD,MAAM,QAAQ,OAAO,OAAO,CAAC,iBAAiB,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,MAAM;IACrE,OAAO,QAAS,KAAK,CAAC,EAAE,GAAkB;AAC5C"}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-config.ts"],"sourcesContent":["/**\r\n * ‚ö° ENTERPRISE ID MANAGEMENT SYSTEM v2.0\r\n * \r\n * SINGLE SOURCE OF TRUTH - Synced with smart-prefix.ts\r\n * \r\n * Features:\r\n * - 60+ entity configurations\r\n * - TypeScript branded types (SystemId, BusinessId)\r\n * - Category grouping for UI\r\n * - Validation rules\r\n * - Store factory integration\r\n * - Backward compatibility\r\n * \r\n * @version 2.0.0\r\n * @date 2025-11-10\r\n */\r\n\r\nimport { ENTITY_PREFIXES, type EntityType } from './smart-prefix';\r\n\r\n// Re-export EntityType for external use\r\nexport type { EntityType };\r\n\r\n// ========================================\r\n// üè∑Ô∏è BRANDED TYPES FOR TYPE SAFETY\r\n// ========================================\r\n\r\n/**\r\n * SystemId - Internal unique identifier (6 digits)\r\n * Used for: Database queries, foreign keys, routing\r\n * Example: \"EMP000001\", \"CUSTOMER000001\", \"ORDER000001\"\r\n */\r\nexport type SystemId = string & { readonly __brand: 'SystemId' };\r\n\r\n/**\r\n * BusinessId - User-facing display identifier (6 digits)\r\n * Used for: UI display, breadcrumbs, user communication\r\n * Example: \"NV000001\", \"KH000001\", \"DH000001\"\r\n */\r\nexport type BusinessId = string & { readonly __brand: 'BusinessId' };\r\n\r\n/**\r\n * Create a branded SystemId (use with caution - prefer auto-generation)\r\n */\r\nexport function createSystemId(id: string): SystemId {\r\n  return id as SystemId;\r\n}\r\n\r\n/**\r\n * Create a branded BusinessId (use with caution - prefer auto-generation)\r\n */\r\nexport function createBusinessId(id: string): BusinessId {\r\n  return id as BusinessId;\r\n}\r\n\r\nexport interface FormattedCounterInfo {\r\n  currentBusinessCounter: number;\r\n  currentSystemCounter: number;\r\n  nextBusinessId: BusinessId;\r\n  nextSystemId: SystemId;\r\n  digitCount: number;\r\n  prefix: string;\r\n  systemIdPrefix: string;\r\n  displayName: string;\r\n}\r\n\r\nexport function formatCounterInfo(\r\n  entityType: EntityType,\r\n  counters?: { business?: number | null; system?: number | null }\r\n): FormattedCounterInfo {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`Unknown entity type: ${entityType}`);\r\n  }\r\n\r\n  const currentBusinessCounter = Math.max(0, counters?.business ?? 0);\r\n  const currentSystemCounter = Math.max(0, counters?.system ?? currentBusinessCounter);\r\n  const nextBusinessCounter = currentBusinessCounter + 1;\r\n  const nextSystemCounter = currentSystemCounter + 1;\r\n  const paddedBusiness = String(nextBusinessCounter).padStart(config.digitCount, '0');\r\n  const paddedSystem = String(nextSystemCounter).padStart(config.digitCount, '0');\r\n\r\n  return {\r\n    currentBusinessCounter,\r\n    currentSystemCounter,\r\n    nextBusinessId: createBusinessId(`${config.prefix}${paddedBusiness}`),\r\n    nextSystemId: createSystemId(`${config.systemIdPrefix}${paddedSystem}`),\r\n    digitCount: config.digitCount,\r\n    prefix: config.prefix,\r\n    systemIdPrefix: config.systemIdPrefix,\r\n    displayName: config.displayName,\r\n  };\r\n}\r\n\r\n// ========================================\r\n// üìã CONFIGURATION INTERFACE\r\n// ========================================\r\n\r\nexport interface EntityIDConfig {\r\n  /** Entity type identifier */\r\n  entityType: EntityType;\r\n  \r\n  /** Prefix for business ID (user-facing) - from smart-prefix.ts */\r\n  prefix: string;\r\n  \r\n  /** Prefix for system ID (internal) - usually same or 'entity-name' */\r\n  systemIdPrefix: string;\r\n  \r\n  /** Number of digits for business ID (e.g., 6 ‚Üí NV000001) */\r\n  digitCount: number;\r\n  \r\n  /** Display name (Vietnamese) */\r\n  displayName: string;\r\n  \r\n  /** Category for settings UI grouping */\r\n  category: 'hr' | 'finance' | 'inventory' | 'sales' | 'purchasing' | 'service' | 'settings' | 'system';\r\n  \r\n  /** Description or notes */\r\n  description?: string;\r\n  \r\n  /** Custom validation rules */\r\n  validation?: {\r\n    /** Allow users to input custom ID */\r\n    allowCustomId?: boolean;\r\n    /** Regex pattern for validation */\r\n    pattern?: RegExp;\r\n    /** Minimum counter value */\r\n    minValue?: number;\r\n    /** Maximum counter value */\r\n    maxValue?: number;\r\n  };\r\n  \r\n  /** Whether entity uses store-factory auto-generation */\r\n  usesStoreFactory?: boolean;\r\n  \r\n  /** Special handling notes for developers */\r\n  notes?: string;\r\n}\r\n\r\n// ========================================\r\n// üóÇÔ∏è COMPLETE CONFIGURATION REGISTRY\r\n// ========================================\r\n\r\n/**\r\n * ID_CONFIG - Central registry for all 60+ entities\r\n * \r\n * ‚úÖ Synced with smart-prefix.ts\r\n * ‚úÖ Includes all missing entities\r\n * ‚úÖ Category organization\r\n */\r\nexport const ID_CONFIG: Record<EntityType, EntityIDConfig> = {\r\n  // ========================================\r\n  // üë• HR & ORGANIZATION (NH√ÇN S·ª∞)\r\n  // ========================================\r\n  \r\n  'employees': {\r\n    entityType: 'employees',\r\n    prefix: ENTITY_PREFIXES['employees'], // 'NV'\r\n    systemIdPrefix: 'EMP',\r\n    digitCount: 6,\r\n    displayName: 'Nh√¢n vi√™n',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'departments': {\r\n    entityType: 'departments',\r\n    prefix: ENTITY_PREFIXES['departments'], // 'PB'\r\n    systemIdPrefix: 'DEPT',\r\n    digitCount: 6,\r\n    displayName: 'Ph√≤ng ban',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'branches': {\r\n    entityType: 'branches',\r\n    prefix: ENTITY_PREFIXES['branches'], // 'CN'\r\n    systemIdPrefix: 'BRANCH',\r\n    digitCount: 6,\r\n    displayName: 'Chi nh√°nh',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'job-titles': {\r\n    entityType: 'job-titles',\r\n    prefix: ENTITY_PREFIXES['job-titles'], // 'CV'\r\n    systemIdPrefix: 'JOB',\r\n    digitCount: 6,\r\n    displayName: 'Ch·ª©c v·ª•',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'attendance': {\r\n    entityType: 'attendance',\r\n    prefix: ENTITY_PREFIXES['attendance'], // 'CC'\r\n    systemIdPrefix: 'ATTEND',\r\n    digitCount: 6,\r\n    displayName: 'Ch·∫•m c√¥ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'duty-schedule': {\r\n    entityType: 'duty-schedule',\r\n    prefix: ENTITY_PREFIXES['duty-schedule'], // 'PC'\r\n    systemIdPrefix: 'DUTY',\r\n    digitCount: 6,\r\n    displayName: 'Ph√¢n c√¥ng',\r\n    category: 'hr',\r\n    notes: 'Prefix conflict with \"payments\" (PC)',\r\n  },\r\n  \r\n  'payroll': {\r\n    entityType: 'payroll',\r\n    prefix: ENTITY_PREFIXES['payroll'], // 'BL'\r\n    systemIdPrefix: 'PAYROLL',\r\n    digitCount: 6,\r\n    displayName: 'B·∫£ng l∆∞∆°ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'payslips': {\r\n    entityType: 'payslips',\r\n    prefix: ENTITY_PREFIXES['payslips'], // 'PL'\r\n    systemIdPrefix: 'PAYSLIP',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu l∆∞∆°ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n    notes: 'Sinh t·ª´ payroll batch store',\r\n  },\r\n  \r\n  'payroll-audit-log': {\r\n    entityType: 'payroll-audit-log',\r\n    prefix: ENTITY_PREFIXES['payroll-audit-log'], // 'PAL'\r\n    systemIdPrefix: 'PAYROLLLOG',\r\n    digitCount: 6,\r\n    displayName: 'Nh·∫≠t k√Ω payroll',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  'payroll-templates': {\r\n    entityType: 'payroll-templates',\r\n    prefix: ENTITY_PREFIXES['payroll-templates'], // 'BTP'\r\n    systemIdPrefix: 'PAYTPL',\r\n    digitCount: 6,\r\n    displayName: 'M·∫´u b·∫£ng l∆∞∆°ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n    notes: 'D√πng cho trang template payroll Phase 3',\r\n  },\r\n  \r\n  'penalties': {\r\n    entityType: 'penalties',\r\n    prefix: ENTITY_PREFIXES['penalties'], // 'PF'\r\n    systemIdPrefix: 'PENALTY',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu ph·∫°t',\r\n    category: 'hr',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'leaves': {\r\n    entityType: 'leaves',\r\n    prefix: ENTITY_PREFIXES['leaves'], // 'PN'\r\n    systemIdPrefix: 'LEAVE',\r\n    digitCount: 6,\r\n    displayName: 'Ngh·ªâ ph√©p',\r\n    category: 'hr',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üë§ CUSTOMERS & PARTNERS (KH√ÅCH H√ÄNG)\r\n  // ========================================\r\n  \r\n  'customers': {\r\n    entityType: 'customers',\r\n    prefix: ENTITY_PREFIXES['customers'], // 'KH'\r\n    systemIdPrefix: 'CUSTOMER',\r\n    digitCount: 6,\r\n    displayName: 'Kh√°ch h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'suppliers': {\r\n    entityType: 'suppliers',\r\n    prefix: ENTITY_PREFIXES['suppliers'], // 'NCC'\r\n    systemIdPrefix: 'SUPPLIER',\r\n    digitCount: 6,\r\n    displayName: 'Nh√† cung c·∫•p',\r\n    category: 'purchasing',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'shipping-partners': {\r\n    entityType: 'shipping-partners',\r\n    prefix: ENTITY_PREFIXES['shipping-partners'], // 'DVVC'\r\n    systemIdPrefix: 'SHIPPING',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n v·ªã v·∫≠n chuy·ªÉn',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üì¶ PRODUCTS & INVENTORY (S·∫¢N PH·∫®M & KHO)\r\n  // ========================================\r\n  \r\n  'products': {\r\n    entityType: 'products',\r\n    prefix: ENTITY_PREFIXES['products'], // 'SP'\r\n    systemIdPrefix: 'PRODUCT',\r\n    digitCount: 6,\r\n    displayName: 'S·∫£n ph·∫©m',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'brands': {\r\n    entityType: 'brands',\r\n    prefix: ENTITY_PREFIXES['brands'], // 'TH'\r\n    systemIdPrefix: 'BRAND',\r\n    digitCount: 6,\r\n    displayName: 'Th∆∞∆°ng hi·ªáu',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'categories': {\r\n    entityType: 'categories',\r\n    prefix: ENTITY_PREFIXES['categories'], // 'DM'\r\n    systemIdPrefix: 'CATEGORY',\r\n    digitCount: 6,\r\n    displayName: 'Danh m·ª•c',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'units': {\r\n    entityType: 'units',\r\n    prefix: ENTITY_PREFIXES['units'], // 'DVT'\r\n    systemIdPrefix: 'UNIT',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n v·ªã t√≠nh',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'stock-locations': {\r\n    entityType: 'stock-locations',\r\n    prefix: ENTITY_PREFIXES['stock-locations'], // 'KHO'\r\n    systemIdPrefix: 'STOCK',\r\n    digitCount: 6,\r\n    displayName: 'V·ªã tr√≠ kho',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'inventory-receipts': {\r\n    entityType: 'inventory-receipts',\r\n    prefix: ENTITY_PREFIXES['inventory-receipts'], // 'NK'\r\n    systemIdPrefix: 'INVRECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Nh·∫≠p kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'inventory-checks': {\r\n    entityType: 'inventory-checks',\r\n    prefix: ENTITY_PREFIXES['inventory-checks'], // 'PKK'\r\n    systemIdPrefix: 'INVCHECK',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu ki·ªÉm kho',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'stock-transfers': {\r\n    entityType: 'stock-transfers',\r\n    prefix: ENTITY_PREFIXES['stock-transfers'], // 'PCK'\r\n    systemIdPrefix: 'TRANSFER',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu chuy·ªÉn kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: TRANSFER000001, Business ID: PCK000001',\r\n  },\r\n  \r\n  'stock-history': {\r\n    entityType: 'stock-history',\r\n    prefix: ENTITY_PREFIXES['stock-history'], // 'LS'\r\n    systemIdPrefix: 'HISTORY',\r\n    digitCount: 6,\r\n    displayName: 'L·ªãch s·ª≠ kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // üõí SALES (B√ÅN H√ÄNG)\r\n  // ========================================\r\n  \r\n  'orders': {\r\n    entityType: 'orders',\r\n    prefix: ENTITY_PREFIXES['orders'], // 'DH'\r\n    systemIdPrefix: 'ORDER',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'sales-returns': {\r\n    entityType: 'sales-returns',\r\n    prefix: ENTITY_PREFIXES['sales-returns'], // 'TH'\r\n    systemIdPrefix: 'RETURN',\r\n    digitCount: 6,\r\n    displayName: 'Tr·∫£ h√†ng',\r\n    category: 'sales',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'sales-channels': {\r\n    entityType: 'sales-channels',\r\n    prefix: ENTITY_PREFIXES['sales-channels'], // 'KENH'\r\n    systemIdPrefix: 'CHANNEL',\r\n    digitCount: 6,\r\n    displayName: 'K√™nh b√°n h√†ng',\r\n    category: 'sales',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'shipments': {\r\n    entityType: 'shipments',\r\n    prefix: ENTITY_PREFIXES['shipments'], // 'VC'\r\n    systemIdPrefix: 'SHIPMENT',\r\n    digitCount: 6,\r\n    displayName: 'V·∫≠n chuy·ªÉn',\r\n    category: 'sales',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // üè≠ PURCHASING (MUA H√ÄNG)\r\n  // ========================================\r\n  \r\n  'purchase-orders': {\r\n    entityType: 'purchase-orders',\r\n    prefix: ENTITY_PREFIXES['purchase-orders'], // 'PO'\r\n    systemIdPrefix: 'PURCHASE',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n mua h√†ng',\r\n    category: 'purchasing',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'purchase-returns': {\r\n    entityType: 'purchase-returns',\r\n    prefix: ENTITY_PREFIXES['purchase-returns'], // 'TM'\r\n    systemIdPrefix: 'PRETURN',\r\n    digitCount: 6,\r\n    displayName: 'Tr·∫£ h√†ng NCC',\r\n    category: 'purchasing',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üí∞ FINANCE (T√ÄI CH√çNH)\r\n  // ========================================\r\n  \r\n  'receipts': {\r\n    entityType: 'receipts',\r\n    prefix: ENTITY_PREFIXES['receipts'], // 'PT'\r\n    systemIdPrefix: 'RECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu thu',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payments': {\r\n    entityType: 'payments',\r\n    prefix: ENTITY_PREFIXES['payments'], // 'PC'\r\n    systemIdPrefix: 'PAYMENT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu chi',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n  },\r\n\r\n  'voucher-receipt': {\r\n    entityType: 'voucher-receipt',\r\n    prefix: ENTITY_PREFIXES['voucher-receipt'], // Alias 'PT'\r\n    systemIdPrefix: 'RECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu thu (Voucher)',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n    notes: 'Alias d√πng cho c√°c workflow voucher-only ho·∫∑c m√†n h√¨nh t·ªïng h·ª£p phi·∫øu thu/chi.',\r\n  },\r\n  \r\n  'voucher-payment': {\r\n    entityType: 'voucher-payment',\r\n    prefix: ENTITY_PREFIXES['voucher-payment'], // Alias 'PC'\r\n    systemIdPrefix: 'PAYMENT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu chi (Voucher)',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n    notes: 'Alias d√πng cho c√°c workflow voucher-only ho·∫∑c m√†n h√¨nh t·ªïng h·ª£p phi·∫øu thu/chi.',\r\n  },\r\n  \r\n  'cashbook': {\r\n    entityType: 'cashbook',\r\n    prefix: ENTITY_PREFIXES['cashbook'], // 'SCT'\r\n    systemIdPrefix: 'CASHBOOK',\r\n    digitCount: 6,\r\n    displayName: 'S·ªï qu·ªπ ti·ªÅn m·∫∑t',\r\n    category: 'finance',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'reconciliation': {\r\n    entityType: 'reconciliation',\r\n    prefix: ENTITY_PREFIXES['reconciliation'], // 'DT'\r\n    systemIdPrefix: 'RECON',\r\n    digitCount: 6,\r\n    displayName: 'ƒê·ªëi chi·∫øu',\r\n    category: 'finance',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // Finance Settings\r\n  'receipt-types': {\r\n    entityType: 'receipt-types',\r\n    prefix: ENTITY_PREFIXES['receipt-types'], // 'LT'\r\n    systemIdPrefix: 'RECTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i thu',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payment-types': {\r\n    entityType: 'payment-types',\r\n    prefix: ENTITY_PREFIXES['payment-types'], // 'LC'\r\n    systemIdPrefix: 'PAYTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i chi',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'cash-accounts': {\r\n    entityType: 'cash-accounts',\r\n    prefix: ENTITY_PREFIXES['cash-accounts'], // 'TK'\r\n    systemIdPrefix: 'ACCOUNT',\r\n    digitCount: 6,\r\n    displayName: 'T√†i kho·∫£n',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payment-methods': {\r\n    entityType: 'payment-methods',\r\n    prefix: ENTITY_PREFIXES['payment-methods'], // 'PTTT'\r\n    systemIdPrefix: 'METHOD',\r\n    digitCount: 6,\r\n    displayName: 'Ph∆∞∆°ng th·ª©c thanh to√°n',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'pricing-settings': {\r\n    entityType: 'pricing-settings',\r\n    prefix: ENTITY_PREFIXES['pricing-settings'], // 'GIA'\r\n    systemIdPrefix: 'PRICING',\r\n    digitCount: 6,\r\n    displayName: 'C√†i ƒë·∫∑t gi√°',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n\r\n  'taxes': {\r\n    entityType: 'taxes',\r\n    prefix: ENTITY_PREFIXES['taxes'], // 'TAX'\r\n    systemIdPrefix: 'TAX',\r\n    digitCount: 6,\r\n    displayName: 'Thu·∫ø',\r\n    category: 'settings',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üéØ KPI & TARGETS (M·ª§C TI√äU)\r\n  // ========================================\r\n  \r\n  'kpi': {\r\n    entityType: 'kpi',\r\n    prefix: ENTITY_PREFIXES['kpi'], // 'KPI'\r\n    systemIdPrefix: 'KPI',\r\n    digitCount: 6,\r\n    displayName: 'KPI',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'target-groups': {\r\n    entityType: 'target-groups',\r\n    prefix: ENTITY_PREFIXES['target-groups'], // 'NHOM'\r\n    systemIdPrefix: 'TARGET',\r\n    digitCount: 6,\r\n    displayName: 'Nh√≥m m·ª•c ti√™u',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'other-targets': {\r\n    entityType: 'other-targets',\r\n    prefix: ENTITY_PREFIXES['other-targets'], // 'MT'\r\n    systemIdPrefix: 'OTHERTARGET',\r\n    digitCount: 6,\r\n    displayName: 'M·ª•c ti√™u kh√°c',\r\n    category: 'sales',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // CUSTOMER SERVICE (D·ªäCH V·ª§)\r\n  // ========================================\r\n  \r\n  'internal-tasks': {\r\n    entityType: 'internal-tasks',\r\n    prefix: ENTITY_PREFIXES['internal-tasks'], // 'CVNB'\r\n    systemIdPrefix: 'TASK',\r\n    digitCount: 6,\r\n    displayName: 'C√¥ng vi·ªác n·ªôi b·ªô',\r\n    category: 'system',\r\n    usesStoreFactory: true,\r\n    validation: { allowCustomId: true },\r\n  },\r\n  \r\n  'task-templates': {\r\n    entityType: 'task-templates',\r\n    prefix: ENTITY_PREFIXES['task-templates'], // 'TMPL'\r\n    systemIdPrefix: 'TMPL',\r\n    digitCount: 6,\r\n    displayName: 'M·∫´u c√¥ng vi·ªác',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'custom-fields': {\r\n    entityType: 'custom-fields',\r\n    prefix: ENTITY_PREFIXES['custom-fields'], // 'FIELD'\r\n    systemIdPrefix: 'FIELD',\r\n    digitCount: 6,\r\n    displayName: 'Tr∆∞·ªùng t√πy ch·ªânh',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'warranty': {\r\n    entityType: 'warranty',\r\n    prefix: ENTITY_PREFIXES['warranty'], // 'BH'\r\n    systemIdPrefix: 'WARRANTY',\r\n    digitCount: 6,\r\n    displayName: 'B·∫£o h√†nh',\r\n    category: 'service',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: WARRANTY000001, Business ID: BH000001',\r\n  },\r\n  \r\n  'complaints': {\r\n    entityType: 'complaints',\r\n    prefix: ENTITY_PREFIXES['complaints'], // 'PKN'\r\n    systemIdPrefix: 'COMPLAINT',\r\n    digitCount: 6,\r\n    displayName: 'Khi·∫øu n·∫°i',\r\n    category: 'service',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: COMPLAINT000001, Business ID: PKN000001',\r\n  },\r\n  \r\n  // ========================================\r\n  // ‚öôÔ∏è SETTINGS & CATEGORIES\r\n  // ========================================\r\n  \r\n  'provinces': {\r\n    entityType: 'provinces',\r\n    prefix: ENTITY_PREFIXES['provinces'], // 'TP'\r\n    systemIdPrefix: 'PROVINCE',\r\n    digitCount: 6,\r\n    displayName: 'T·ªânh/Th√†nh ph·ªë',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'districts': {\r\n    entityType: 'districts',\r\n    prefix: ENTITY_PREFIXES['districts'], // 'QH'\r\n    systemIdPrefix: 'DISTRICT',\r\n    digitCount: 6,\r\n    displayName: 'Qu·∫≠n/Huy·ªán',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'wards': {\r\n    entityType: 'wards',\r\n    prefix: ENTITY_PREFIXES['wards'], // 'PX'\r\n    systemIdPrefix: 'WARD',\r\n    digitCount: 6,\r\n    displayName: 'Ph∆∞·ªùng/X√£',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'wiki': {\r\n    entityType: 'wiki',\r\n    prefix: ENTITY_PREFIXES['wiki'], // 'TL'\r\n    systemIdPrefix: 'WIKI',\r\n    digitCount: 6,\r\n    displayName: 'T√†i li·ªáu',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'packaging': {\r\n    entityType: 'packaging',\r\n    prefix: ENTITY_PREFIXES['packaging'], // 'DG'\r\n    systemIdPrefix: 'PACKAGE',\r\n    digitCount: 6,\r\n    displayName: 'ƒê√≥ng g√≥i',\r\n    category: 'inventory',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'audit-log': {\r\n    entityType: 'audit-log',\r\n    prefix: ENTITY_PREFIXES['audit-log'], // 'LOG'\r\n    systemIdPrefix: 'LOG',\r\n    digitCount: 10,\r\n    displayName: 'Nh·∫≠t k√Ω',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // Customer Settings\r\n  'customer-types': {\r\n    entityType: 'customer-types',\r\n    prefix: ENTITY_PREFIXES['customer-types'], // 'LKH'\r\n    systemIdPrefix: 'CUSTTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i kh√°ch h√†ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'customer-groups': {\r\n    entityType: 'customer-groups',\r\n    prefix: ENTITY_PREFIXES['customer-groups'], // 'NHKH'\r\n    systemIdPrefix: 'CUSTGROUP',\r\n    digitCount: 6,\r\n    displayName: 'Nh√≥m kh√°ch h√†ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'customer-sources': {\r\n    entityType: 'customer-sources',\r\n    prefix: ENTITY_PREFIXES['customer-sources'], // 'NKH'\r\n    systemIdPrefix: 'CUSTSOURCE',\r\n    digitCount: 6,\r\n    displayName: 'Ngu·ªìn kh√°ch h√†ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'payment-terms': {\r\n    entityType: 'payment-terms',\r\n    prefix: ENTITY_PREFIXES['payment-terms'], // 'HTTT'\r\n    systemIdPrefix: 'PAYTERM',\r\n    digitCount: 6,\r\n    displayName: 'H√¨nh th·ª©c thanh to√°n',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'credit-ratings': {\r\n    entityType: 'credit-ratings',\r\n    prefix: ENTITY_PREFIXES['credit-ratings'], // 'XHTD'\r\n    systemIdPrefix: 'CREDIT',\r\n    digitCount: 6,\r\n    displayName: 'X·∫øp h·∫°ng t√≠n d·ª•ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  'lifecycle-stages': {\r\n    entityType: 'lifecycle-stages',\r\n    prefix: ENTITY_PREFIXES['lifecycle-stages'], // 'GDL'\r\n    systemIdPrefix: 'LIFECYCLE',\r\n    digitCount: 6,\r\n    displayName: 'Giai ƒëo·∫°n v√≤ng ƒë·ªùi kh√°ch h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'sla-settings': {\r\n    entityType: 'sla-settings',\r\n    prefix: ENTITY_PREFIXES['sla-settings'], // 'SLA'\r\n    systemIdPrefix: 'SLACFG',\r\n    digitCount: 6,\r\n    displayName: 'C√†i ƒë·∫∑t SLA kh√°ch h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // Employee Settings\r\n  'employee-types': {\r\n    entityType: 'employee-types',\r\n    prefix: ENTITY_PREFIXES['employee-types'], // 'LNV'\r\n    systemIdPrefix: 'EMPTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i nh√¢n vi√™n',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'employee-statuses': {\r\n    entityType: 'employee-statuses',\r\n    prefix: ENTITY_PREFIXES['employee-statuses'], // 'TTNV'\r\n    systemIdPrefix: 'EMPSTATUS',\r\n    digitCount: 6,\r\n    displayName: 'Tr·∫°ng th√°i nh√¢n vi√™n',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'contract-types': {\r\n    entityType: 'contract-types',\r\n    prefix: ENTITY_PREFIXES['contract-types'], // 'LHD'\r\n    systemIdPrefix: 'CONTRACT',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i h·ª£p ƒë·ªìng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'work-shifts': {\r\n    entityType: 'work-shifts',\r\n    prefix: ENTITY_PREFIXES['work-shifts'], // 'CA'\r\n    systemIdPrefix: 'WSHIFT',\r\n    digitCount: 6,\r\n    displayName: 'Ca l√†m vi·ªác',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'D√πng cho c√†i ƒë·∫∑t ca l√†m vi·ªác & Dual ID trong attendance',\r\n  },\r\n  \r\n  'leave-types': {\r\n    entityType: 'leave-types',\r\n    prefix: ENTITY_PREFIXES['leave-types'], // 'LP'\r\n    systemIdPrefix: 'LEAVETYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i ngh·ªâ ph√©p',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Qu·∫£n l√Ω danh m·ª•c ph√©p nƒÉm/ph√©p ƒë·∫∑c bi·ªát',\r\n  },\r\n  \r\n  'salary-components': {\r\n    entityType: 'salary-components',\r\n    prefix: ENTITY_PREFIXES['salary-components'], // 'SC'\r\n    systemIdPrefix: 'SALCOMP',\r\n    digitCount: 6,\r\n    displayName: 'Th√†nh ph·∫ßn l∆∞∆°ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'D√πng cho c·∫•u h√¨nh payroll engine',\r\n  },\r\n  \r\n  // ========================================\r\n  // üîê SYSTEM & AUTH\r\n  // ========================================\r\n  \r\n  'settings': {\r\n    entityType: 'settings',\r\n    prefix: ENTITY_PREFIXES['settings'], // 'CFG'\r\n    systemIdPrefix: 'CONFIG',\r\n    digitCount: 6,\r\n    displayName: 'C·∫•u h√¨nh',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'users': {\r\n    entityType: 'users',\r\n    prefix: ENTITY_PREFIXES['users'], // 'USER'\r\n    systemIdPrefix: 'USER',\r\n    digitCount: 6,\r\n    displayName: 'Ng∆∞·ªùi d√πng',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n};\r\n\r\n// ========================================\r\n// üõ†Ô∏è HELPER FUNCTIONS\r\n// ========================================\r\n\r\n/**\r\n * Get configuration for an entity type\r\n */\r\nexport function getEntityConfig(entityType: EntityType): EntityIDConfig {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`No configuration found for entity type: ${entityType}`);\r\n  }\r\n  return config;\r\n}\r\n\r\n/**\r\n * Get all entity types in a category\r\n */\r\nexport function getEntitiesByCategory(category: EntityIDConfig['category']): EntityType[] {\r\n  return Object.values(ID_CONFIG)\r\n    .filter(config => config.category === category)\r\n    .map(config => config.entityType);\r\n}\r\n\r\n/**\r\n * Get entities grouped by category\r\n */\r\nexport function getEntityCategories(): Record<string, EntityType[]> {\r\n  const categories: Record<string, EntityType[]> = {\r\n    'hr': [],\r\n    'finance': [],\r\n    'inventory': [],\r\n    'sales': [],\r\n    'purchasing': [],\r\n    'service': [],\r\n    'settings': [],\r\n    'system': [],\r\n  };\r\n  \r\n  Object.values(ID_CONFIG).forEach(config => {\r\n    categories[config.category].push(config.entityType);\r\n  });\r\n  \r\n  return categories;\r\n}\r\n\r\n/**\r\n * Validate ID format for an entity\r\n * Returns validation result with detailed error message\r\n */\r\nexport function validateIdFormat(\r\n  id: string,\r\n  entityType: EntityType\r\n): { valid: boolean; error?: string } {\r\n  const config = getEntityConfig(entityType);\r\n  \r\n  // Check prefix\r\n  if (!id.startsWith(config.prefix)) {\r\n    return { \r\n      valid: false, \r\n      error: `Invalid prefix. Expected \"${config.prefix}\", got \"${id.slice(0, config.prefix.length)}\"` \r\n    };\r\n  }\r\n  \r\n  // Check digit count\r\n  const numberPart = id.substring(config.prefix.length);\r\n  if (numberPart.length !== config.digitCount) {\r\n    const expectedLength = config.prefix.length + config.digitCount;\r\n    return { \r\n      valid: false, \r\n      error: `Invalid length. Expected ${expectedLength} characters, got ${id.length}` \r\n    };\r\n  }\r\n  \r\n  // Check if numeric\r\n  if (!/^\\d+$/.test(numberPart)) {\r\n    return { \r\n      valid: false, \r\n      error: 'Numeric part must contain only digits' \r\n    };\r\n  }\r\n  \r\n  // Custom pattern validation\r\n  if (config.validation?.pattern && !config.validation.pattern.test(id)) {\r\n    return { \r\n      valid: false, \r\n      error: 'ID does not match required pattern' \r\n    };\r\n  }\r\n  \r\n  return { valid: true };\r\n}\r\n\r\n/**\r\n * Check if entity allows custom ID input\r\n */\r\nexport function allowsCustomId(entityType: EntityType): boolean {\r\n  return getEntityConfig(entityType).validation?.allowCustomId ?? false;\r\n}\r\n\r\n/**\r\n * Get entities that use store factory\r\n */\r\nexport function getStoreFactoryEntities(): EntityType[] {\r\n  return Object.values(ID_CONFIG)\r\n    .filter(config => config.usesStoreFactory === true)\r\n    .map(config => config.entityType);\r\n}\r\n\r\n/**\r\n * Get display label for category\r\n */\r\nexport function getCategoryLabel(category: EntityIDConfig['category']): string {\r\n  const labels: Record<EntityIDConfig['category'], string> = {\r\n    'hr': 'Nh√¢n s·ª± & T·ªï ch·ª©c',\r\n    'finance': 'T√†i ch√≠nh',\r\n    'inventory': 'Kho h√†ng',\r\n    'sales': 'B√°n h√†ng',\r\n    'purchasing': 'Mua h√†ng',\r\n    'service': 'D·ªãch v·ª• kh√°ch h√†ng',\r\n    'settings': 'C√†i ƒë·∫∑t',\r\n    'system': 'H·ªá th·ªëng',\r\n  };\r\n  return labels[category];\r\n}\r\n\r\n/**\r\n * Search entities by name or prefix\r\n */\r\nexport function searchEntities(query: string): EntityIDConfig[] {\r\n  const lowerQuery = query.toLowerCase();\r\n  return Object.values(ID_CONFIG).filter(config => \r\n    config.displayName.toLowerCase().includes(lowerQuery) ||\r\n    config.prefix.toLowerCase().includes(lowerQuery) ||\r\n    config.entityType.includes(lowerQuery)\r\n  );\r\n}\r\n\r\n/**\r\n * Get total entity count\r\n */\r\nexport function getTotalEntityCount(): number {\r\n  return Object.keys(ID_CONFIG).length;\r\n}\r\n\r\n/**\r\n * Export configuration for backup/import\r\n */\r\nexport function exportConfig(): string {\r\n  return JSON.stringify(ID_CONFIG, null, 2);\r\n}\r\n\r\n// ========================================\r\n// üìä STATISTICS & ANALYTICS\r\n// ========================================\r\n\r\nexport interface IDSystemStats {\r\n  totalEntities: number;\r\n  byCategory: Record<string, number>;\r\n  storeFactoryEnabled: number;\r\n  customIdAllowed: number;\r\n  averageDigitCount: number;\r\n}\r\n\r\n/**\r\n * Get ID system statistics\r\n */\r\nexport function getIDSystemStats(): IDSystemStats {\r\n  const configs = Object.values(ID_CONFIG);\r\n  \r\n  const byCategory: Record<string, number> = {};\r\n  let storeFactoryEnabled = 0;\r\n  let customIdAllowed = 0;\r\n  let totalDigits = 0;\r\n  \r\n  configs.forEach(config => {\r\n    // Count by category\r\n    byCategory[config.category] = (byCategory[config.category] || 0) + 1;\r\n    \r\n    // Count features\r\n    if (config.usesStoreFactory) storeFactoryEnabled++;\r\n    if (config.validation?.allowCustomId) customIdAllowed++;\r\n    totalDigits += config.digitCount;\r\n  });\r\n  \r\n  return {\r\n    totalEntities: configs.length,\r\n    byCategory,\r\n    storeFactoryEnabled,\r\n    customIdAllowed,\r\n    averageDigitCount: Math.round(totalDigits / configs.length * 10) / 10,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1529, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-utils.ts"],"sourcesContent":["/**\r\n * ID Utilities\r\n * Helpers for generating and validating IDs (systemId & business id)\r\n */\r\n\r\nimport { getPrefix, type EntityType } from './smart-prefix';\r\nimport { ID_CONFIG } from './id-config';\r\n\r\n// Re-export EntityType for convenience\r\nexport type { EntityType } from './smart-prefix';\r\n\r\n/**\r\n * Generate SystemId (6 digits, immutable, internal use only)\r\n * Format: SYSTEMID_PREFIX + 6 digits (e.g., \"EMP000001\", \"CUSTOMER000001\", \"ORDER000001\")\r\n * Uses systemIdPrefix from ID_CONFIG (English full words)\r\n */\r\nexport function generateSystemId(entityType: EntityType, counter: number): string {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`No configuration found for entity type: ${entityType}`);\r\n  }\r\n  const prefix = config.systemIdPrefix;\r\n  const digitCount = config.digitCount || 6;\r\n  return `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n}\r\n\r\n/**\r\n * Generate Business ID (6 digits, user-facing, editable)\r\n * Format: PREFIX + 6 digits (e.g., \"NV000001\", \"KH000001\", \"CTV000001\")\r\n * All entities use same 6-digit format for consistency\r\n * \r\n * @param entityType - Entity type from smart-prefix\r\n * @param counter - Current counter value\r\n * @param customId - Optional custom ID from user input\r\n * @returns Generated ID or validated custom ID\r\n */\r\nexport function generateBusinessId(\r\n  entityType: EntityType, \r\n  counter: number,\r\n  customId?: string\r\n): string {\r\n  // If user provided custom ID, validate and return it\r\n  if (customId && customId.trim()) {\r\n    const sanitized = sanitizeBusinessId(customId);\r\n    if (!sanitized) {\r\n      throw new Error('M√£ kh√¥ng h·ª£p l·ªá! Ch·ªâ ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng ch·ªØ c√°i v√† s·ªë.');\r\n    }\r\n    return sanitized;\r\n  }\r\n  \r\n  // Otherwise, auto-generate\r\n  const prefix = getPrefix(entityType);\r\n  return `${prefix}${String(counter).padStart(6, '0')}`;\r\n}\r\n\r\n/**\r\n * Sanitize business ID\r\n * - Remove special characters (keep only letters and numbers)\r\n * - Convert to uppercase\r\n * - Trim whitespace\r\n * \r\n * @param id - Raw user input\r\n * @returns Sanitized ID or null if invalid\r\n */\r\nexport function sanitizeBusinessId(id: string): string | null {\r\n  if (!id || typeof id !== 'string') return null;\r\n  \r\n  // Remove all special characters, keep only alphanumeric\r\n  const cleaned = id.trim().replace(/[^a-zA-Z0-9]/g, '');\r\n  \r\n  if (!cleaned) return null;\r\n  \r\n  // Convert to uppercase for consistency\r\n  return cleaned.toUpperCase();\r\n}\r\n\r\n/**\r\n * Validate business ID uniqueness (case-insensitive)\r\n * \r\n * @param id - ID to check\r\n * @param existingIds - Array of existing IDs in the system\r\n * @param currentId - Current ID (for edit mode, to exclude self)\r\n * @returns true if unique, false if duplicate\r\n */\r\nexport function isBusinessIdUnique(\r\n  id: string,\r\n  existingIds: string[],\r\n  currentId?: string\r\n): boolean {\r\n  if (!id) return false;\r\n  \r\n  const normalizedId = id.toUpperCase();\r\n  const normalizedCurrentId = currentId?.toUpperCase();\r\n  \r\n  return !existingIds.some(existingId => {\r\n    // ‚úÖ Filter out empty/undefined IDs\r\n    if (!existingId || existingId.trim() === '') return false;\r\n    \r\n    const normalizedExisting = existingId.toUpperCase();\r\n    // Skip self-comparison in edit mode\r\n    if (normalizedCurrentId && normalizedExisting === normalizedCurrentId) {\r\n      return false;\r\n    }\r\n    return normalizedExisting === normalizedId;\r\n  });\r\n}\r\n\r\n/**\r\n * Extract counter from system ID\r\n * Used to initialize counter when loading from localStorage\r\n * Supports both 6, 7 and 8 digits\r\n * \r\n * @param systemId - System ID to parse (e.g., \"EMP000001\", \"CUSTOMER000001\", \"WARRANTY0000001\")\r\n * @param prefix - Expected systemIdPrefix (e.g., \"EMP\", \"CUSTOMER\", \"WARRANTY\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromSystemId(systemId: string, prefix: string): number {\r\n  if (!systemId || typeof systemId !== 'string') return 0;\r\n  \r\n  // Try different digit counts (most entities use 6 digits, some use 7-8)\r\n  const regex8 = new RegExp(`^${prefix}(\\\\d{8})$`);\r\n  const regex7 = new RegExp(`^${prefix}(\\\\d{7})$`);\r\n  const regex6 = new RegExp(`^${prefix}(\\\\d{6})$`);\r\n  \r\n  const match8 = systemId.match(regex8);\r\n  if (match8) return parseInt(match8[1], 10);\r\n  \r\n  const match7 = systemId.match(regex7);\r\n  if (match7) return parseInt(match7[1], 10);\r\n  \r\n  const match6 = systemId.match(regex6);\r\n  if (match6) return parseInt(match6[1], 10);\r\n  \r\n  return 0;\r\n}\r\n\r\n/**\r\n * Extract counter from business ID\r\n * Used to initialize counter when loading from localStorage\r\n * \r\n * @param businessId - Business ID to parse (e.g., \"NV000001\")\r\n * @param prefix - Expected prefix (e.g., \"NV\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromBusinessId(businessId: string, prefix: string): number {\r\n  if (!businessId || typeof businessId !== 'string') return 0;\r\n  const regex = new RegExp(`^${prefix}(\\\\d+)$`);\r\n  const match = businessId.match(regex);\r\n  return match ? parseInt(match[1], 10) : 0;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for systemId)\r\n * \r\n * @param items - Array of items with systemId\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxSystemIdCounter<T extends { systemId: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.systemId) return;\r\n    const counter = extractCounterFromSystemId(item.systemId, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for business id)\r\n * Only counts auto-generated IDs (PREFIX + digits)\r\n * \r\n * @param items - Array of items with id\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxBusinessIdCounter<T extends { id: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.id) return;\r\n    const counter = extractCounterFromBusinessId(item.id, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Format ID for display\r\n * Adds spacing for readability\r\n * \r\n * @param id - ID to format\r\n * @returns Formatted ID (e.g., \"NV-000001\", \"KH-000123\")\r\n */\r\nexport function formatIdForDisplay(id: string): string {\r\n  // Match pattern: PREFIX followed by numbers\r\n  const match = id.match(/^([A-Z]+)(\\d+)$/);\r\n  if (!match) return id;\r\n  \r\n  const [, prefix, numbers] = match;\r\n  return `${prefix}-${numbers}`;\r\n}\r\n\r\n/**\r\n * Validate ID format\r\n * Check if ID follows valid pattern (letters + numbers only)\r\n * \r\n * @param id - ID to validate\r\n * @returns true if valid format\r\n */\r\nexport function isValidIdFormat(id: string): boolean {\r\n  if (!id || typeof id !== 'string') return false;\r\n  \r\n  // Only alphanumeric characters allowed\r\n  const regex = /^[A-Z0-9]+$/i;\r\n  return regex.test(id);\r\n}\r\n\r\n/**\r\n * Generate suggested IDs based on entity type\r\n * Useful for autocomplete or placeholder text\r\n * \r\n * @param entityType - Entity type\r\n * @param counter - Current counter\r\n * @param count - Number of suggestions\r\n * @returns Array of suggested IDs\r\n */\r\nexport function generateSuggestedIds(\r\n  entityType: EntityType,\r\n  counter: number,\r\n  count: number = 3\r\n): string[] {\r\n  const suggestions: string[] = [];\r\n  const prefix = getPrefix(entityType);\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    suggestions.push(`${prefix}${String(counter + i + 1).padStart(6, '0')}`);\r\n  }\r\n  \r\n  return suggestions;\r\n}\r\n\r\n/**\r\n * ‚ú® Find next available business ID\r\n * Checks existing IDs and increments counter until finding a unique ID\r\n * \r\n * @param prefix - ID prefix (e.g., 'PT', 'PC', 'NV')\r\n * @param existingIds - Array of existing business IDs\r\n * @param startCounter - Starting counter value\r\n * @param digitCount - Number of digits (default: 6)\r\n * @returns Object with nextId and updatedCounter\r\n */\r\nexport function findNextAvailableBusinessId(\r\n  prefix: string,\r\n  existingIds: string[],\r\n  startCounter: number,\r\n  digitCount: number = 6\r\n): { nextId: string; updatedCounter: number } {\r\n  let counter = startCounter;\r\n  let nextId: string;\r\n  \r\n  // Keep incrementing until we find a unique ID\r\n  do {\r\n    counter++;\r\n    nextId = `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n  } while (existingIds.some(id => id === nextId));\r\n  \r\n  return {\r\n    nextId,\r\n    updatedCounter: counter\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1692, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/store-factory.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// persist, createJSONStorage removed - database is now source of truth\r\nimport { \r\n  generateSystemId, \r\n  generateBusinessId, \r\n  isBusinessIdUnique,\r\n  getMaxSystemIdCounter,\r\n  getMaxBusinessIdCounter,\r\n  findNextAvailableBusinessId,\r\n  type EntityType \r\n} from './id-utils';\r\nimport { getPrefix } from './smart-prefix';\r\nimport { ID_CONFIG, type SystemId, type BusinessId, createSystemId, createBusinessId as brandBusinessId } from './id-config';\r\n\r\nconst SYSTEM_FALLBACK_ID: SystemId = createSystemId('SYS000000');\r\n\r\nconst asSystemIdFallback = (): SystemId => SYSTEM_FALLBACK_ID;\r\n\r\n// ‚úÖ API Sync helper for store-factory\r\nasync function syncToAPI<T>(\r\n  apiEndpoint: string,\r\n  action: 'create' | 'update' | 'delete' | 'restore',\r\n  data: T | { systemId: SystemId },\r\n  systemId?: SystemId\r\n): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' \r\n      ? apiEndpoint \r\n      : `${apiEndpoint}/${systemId || (data as any).systemId}`;\r\n    \r\n    const method = action === 'create' ? 'POST' \r\n      : action === 'update' ? 'PATCH' \r\n      : action === 'delete' ? 'DELETE'\r\n      : 'PATCH'; // restore uses PATCH\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.warn(`[Store Factory API] ${action} failed for ${apiEndpoint}:`, response.status);\r\n    }\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Store Factory API] ${action} error for ${apiEndpoint}:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Item with SystemId (branded type)\r\nexport type ItemWithSystemId = { systemId: SystemId; [key: string]: any };\r\n\r\n// ‚úÖ Counter state for ID generation\r\nexport type CounterState = {\r\n  systemId: number;\r\n  businessId: number;\r\n};\r\n\r\nexport type CrudState<T extends ItemWithSystemId> = {\r\n  data: T[];\r\n  _counters: CounterState; // ‚úÖ Persisted counters\r\n  _initialized: boolean; // ‚úÖ Track if loaded from API\r\n  add: (item: Omit<T, 'systemId'>) => T;\r\n  addMultiple: (items: Omit<T, 'systemId'>[]) => void;\r\n  update: (systemId: SystemId, item: Partial<T>) => void; // ‚úÖ Accept partial updates\r\n  remove: (systemId: SystemId) => void; // ‚úÖ Branded type\r\n  hardDelete: (systemId: SystemId) => void; // ‚úÖ Branded type\r\n  restore: (systemId: SystemId) => void; // ‚úÖ Branded type\r\n  findById: (systemId: SystemId | string) => T | undefined; // ‚úÖ Branded type\r\n  getActive: () => T[];\r\n  getDeleted: () => T[];\r\n  loadFromAPI: () => Promise<void>; // ‚úÖ Load data from database\r\n};\r\n\r\nexport const createCrudStore = <T extends ItemWithSystemId>(\r\n  _initialData: T[], // @deprecated - Kept for backward compatibility but NO LONGER USED\r\n  entityType: EntityType, // Changed from idPrefix to entityType\r\n  options?: {\r\n    businessIdField?: keyof T; // Field name for business ID (default: 'id')\r\n    persistKey?: string; // @deprecated - No longer used, kept for backward compatibility\r\n    getCurrentUser?: () => string | undefined; // Function to get current user systemId\r\n    apiEndpoint?: string; // ‚úÖ API endpoint for database sync (e.g., '/api/employees')\r\n  }\r\n) => {\r\n  const businessPrefix = getPrefix(entityType); // Vietnamese prefix for Business ID (NV, KH, DH)\r\n  const config = ID_CONFIG[entityType];\r\n  const systemIdPrefix = config?.systemIdPrefix || entityType.toUpperCase(); // English prefix for SystemId (EMP, CUSTOMER, ORDER)\r\n  \r\n  const businessIdField = options?.businessIdField ?? 'id';\r\n  // const persistKey = options?.persistKey; // @deprecated - No longer used\r\n  const getCurrentUser = options?.getCurrentUser;\r\n  const apiEndpoint = options?.apiEndpoint;\r\n\r\n  // ‚úÖ CHANGED: Start with empty array - database is source of truth\r\n  // Mock data files (data.ts) are NO LONGER USED for runtime\r\n  const normalizedInitialData: T[] = [];\r\n\r\n  const storeConfig = (set: any, get: any) => ({\r\n    data: normalizedInitialData, // ‚úÖ Start empty - data loaded via React Query\r\n    // ‚úÖ Counters start at 0 - will be initialized from API via loadFromAPI()\r\n    _counters: {\r\n      systemId: 0,\r\n      businessId: 0\r\n    },\r\n    _initialized: false, // ‚úÖ Track API initialization\r\n    add: (item: Omit<T, 'systemId'>): T => {\r\n        // ‚úÖ Get counters from state (persisted)\r\n        const currentCounters = get()._counters;\r\n        const newSystemIdCounter = currentCounters.systemId + 1;\r\n        const newSystemId = createSystemId(generateSystemId(entityType, newSystemIdCounter));\r\n        \r\n        // Generate or validate Business ID (if field exists)\r\n        let finalItem = { ...item } as any;\r\n        let newBusinessIdCounter = currentCounters.businessId;\r\n        \r\n        if (businessIdField in item) {\r\n          const customId = (item as any)[businessIdField];\r\n          const existingIds = get().data.map((d: any) => d[businessIdField]);\r\n          \r\n          // ‚úÖ If customId provided, validate uniqueness\r\n          if (customId && customId.trim()) {\r\n            if (!isBusinessIdUnique(customId, existingIds)) {\r\n              throw new Error(`M√£ \"${customId}\" ƒë√£ t·ªìn t·∫°i! Vui l√≤ng s·ª≠ d·ª•ng m√£ kh√°c.`);\r\n            }\r\n            finalItem[businessIdField] = customId.trim().toUpperCase();\r\n          } else {\r\n            // ‚úÖ Auto-generate with findNextAvailableBusinessId\r\n            const digitCount = 6; // All entities use 6 digits\r\n            const result = findNextAvailableBusinessId(businessPrefix, existingIds, newBusinessIdCounter, digitCount);\r\n            finalItem[businessIdField] = result.nextId;\r\n            newBusinessIdCounter = result.updatedCounter;\r\n          }\r\n        }\r\n        \r\n        const now = new Date().toISOString();\r\n        const currentUser = getCurrentUser?.();\r\n        const newItem = { \r\n          ...finalItem, \r\n          systemId: newSystemId, // ‚úÖ Branded SystemId\r\n          createdAt: finalItem.createdAt || now,\r\n          updatedAt: now,\r\n          createdBy: finalItem.createdBy || currentUser,\r\n          updatedBy: currentUser,\r\n        } as unknown as T;\r\n        \r\n        // ‚úÖ Update both data and counters atomically\r\n        set((state: any) => ({ \r\n          data: [...state.data, newItem],\r\n          _counters: {\r\n            systemId: newSystemIdCounter,\r\n            businessId: newBusinessIdCounter\r\n          }\r\n        }));\r\n        \r\n        // ‚úÖ Sync to API in background\r\n        if (apiEndpoint) {\r\n          syncToAPI(apiEndpoint, 'create', newItem).catch(console.error);\r\n        }\r\n        \r\n        return newItem;\r\n    },\r\n    addMultiple: (items: Omit<T, 'systemId'>[]) => \r\n        set((state: any) => {\r\n            const now = new Date().toISOString();\r\n            const currentUser = getCurrentUser?.();\r\n            const newItems: T[] = [];\r\n            const digitCount = 6; // All entities use 6 digits\r\n            \r\n            // ‚úÖ Start from current counters\r\n            let currentSystemIdCounter = state._counters.systemId;\r\n            let currentBusinessIdCounter = state._counters.businessId;\r\n            \r\n            items.forEach(item => {\r\n                // ‚úÖ Generate SystemId from current counter\r\n                currentSystemIdCounter++;\r\n                const newSystemId = createSystemId(generateSystemId(entityType, currentSystemIdCounter));\r\n                \r\n                // Generate or validate Business ID (if field exists)\r\n                let finalItem = { ...item } as any;\r\n                if (businessIdField in item) {\r\n                  const customId = (item as any)[businessIdField];\r\n                  \r\n                  // Collect existing IDs (from state + already added in this batch)\r\n                  const existingIds = [\r\n                    ...state.data.map((d: any) => d[businessIdField]),\r\n                    ...newItems.map((d: any) => d[businessIdField])\r\n                  ];\r\n                  \r\n                  // ‚úÖ If customId provided, validate uniqueness\r\n                  if (customId && customId.trim()) {\r\n                    if (!isBusinessIdUnique(customId, existingIds)) {\r\n                      throw new Error(`M√£ \"${customId}\" ƒë√£ t·ªìn t·∫°i! Vui l√≤ng s·ª≠ d·ª•ng m√£ kh√°c.`);\r\n                    }\r\n                    finalItem[businessIdField] = customId.trim().toUpperCase();\r\n                  } else {\r\n                    // ‚úÖ Auto-generate with findNextAvailableBusinessId\r\n                    const result = findNextAvailableBusinessId(businessPrefix, existingIds, currentBusinessIdCounter, digitCount);\r\n                    finalItem[businessIdField] = result.nextId;\r\n                    currentBusinessIdCounter = result.updatedCounter;\r\n                  }\r\n                }\r\n                \r\n                newItems.push({ \r\n                  ...finalItem, \r\n                  systemId: newSystemId,\r\n                  createdAt: now,\r\n                  updatedAt: now,\r\n                  createdBy: currentUser,\r\n                  updatedBy: currentUser,\r\n                } as unknown as T);\r\n            });\r\n            \r\n            // ‚úÖ Update both data and counters\r\n            const result = { \r\n              data: [...state.data, ...newItems],\r\n              _counters: {\r\n                systemId: currentSystemIdCounter,\r\n                businessId: currentBusinessIdCounter\r\n              }\r\n            };\r\n            \r\n            // ‚úÖ Sync to API in background (batch)\r\n            if (apiEndpoint) {\r\n              newItems.forEach(item => {\r\n                syncToAPI(apiEndpoint, 'create', item).catch(console.error);\r\n              });\r\n            }\r\n            \r\n            return result;\r\n        }),\r\n    update: (systemId: SystemId, updatedItem: Partial<T>) => {\r\n      // Validate unique business ID (case-insensitive, skip self)\r\n      if (businessIdField in updatedItem) {\r\n        const businessId = (updatedItem as any)[businessIdField];\r\n        const existingIds = get().data\r\n          .filter((d: any) => d.systemId !== systemId)\r\n          .map((d: any) => d[businessIdField]);\r\n        \r\n        if (businessId && !isBusinessIdUnique(businessId, existingIds)) {\r\n          throw new Error(`M√£ \"${businessId}\" ƒë√£ t·ªìn t·∫°i! Vui l√≤ng s·ª≠ d·ª•ng m√£ kh√°c.`);\r\n        }\r\n      }\r\n\r\n      const now = new Date().toISOString();\r\n      const currentUser = getCurrentUser?.();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId \r\n            ? { ...item, ...updatedItem, updatedAt: now, updatedBy: currentUser } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const fullItem = get().data.find((item: T) => item.systemId === systemId);\r\n        if (fullItem) {\r\n          syncToAPI(apiEndpoint, 'update', fullItem, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    remove: (systemId: SystemId) => {\r\n      // Soft delete - mark as deleted\r\n      const now = new Date().toISOString();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: true, deletedAt: now } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'update', { ...item, isDeleted: true, deletedAt: now }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    hardDelete: (systemId: SystemId) => {\r\n      // Permanent delete - remove from array\r\n      set((state: any) => ({\r\n        data: state.data.filter((item: T) => item.systemId !== systemId),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        syncToAPI(apiEndpoint, 'delete', { systemId }, systemId).catch(console.error);\r\n      }\r\n    },\r\n    restore: (systemId: SystemId) => {\r\n      // Restore soft-deleted item\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: false, deletedAt: null } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'restore', { ...item, isDeleted: false, deletedAt: null }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    getActive: () => get().data.filter((item: any) => !item.isDeleted),\r\n    getDeleted: () => get().data.filter((item: any) => item.isDeleted),\r\n    findById: (id: SystemId | string) => get().data.find((item: T) => item.systemId === id || (item as any).id === id),\r\n    \r\n    // ‚úÖ Load data from database API - OPTIMIZED: No more limit=10000!\r\n    // This is now only used for counter initialization, NOT for loading all data\r\n    // Use React Query hooks for data fetching with proper pagination\r\n    loadFromAPI: async () => {\r\n      if (!apiEndpoint) return;\r\n      if (get()._initialized) return;\r\n      \r\n      try {\r\n        // Only fetch minimal data needed to initialize counters\r\n        // Actual data loading should be done via React Query hooks\r\n        const response = await fetch(`${apiEndpoint}?limit=1&sortBy=systemId&sortOrder=desc`, {\r\n          credentials: 'include',\r\n        });\r\n        if (response.ok) {\r\n          const json = await response.json();\r\n          const pagination = json.pagination || {};\r\n          const lastItem = json.data?.[0];\r\n          \r\n          // Initialize counters from the latest item (highest IDs)\r\n          const newCounters = {\r\n            systemId: lastItem ? getMaxSystemIdCounter([lastItem], systemIdPrefix) : 0,\r\n            businessId: (lastItem && options?.businessIdField)\r\n              ? getMaxBusinessIdCounter([lastItem] as any[], businessPrefix)\r\n              : 0\r\n          };\r\n          \r\n          set({ \r\n            data: [], // Don't store data in Zustand anymore - use React Query\r\n            _counters: newCounters,\r\n            _initialized: true \r\n          });\r\n          \r\n          console.log(`[Store Factory] ${apiEndpoint} initialized. Total records: ${pagination.total || 'unknown'}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`[Store Factory] loadFromAPI error for ${apiEndpoint}:`, error);\r\n        // Still mark as initialized to prevent infinite retry\r\n        set({ _initialized: true });\r\n      }\r\n    },\r\n  });\r\n\r\n  // ‚úÖ SIMPLIFIED: No localStorage persistence, database is source of truth\r\n  // Data is loaded via ApiSyncProvider on app init\r\n  return create<CrudState<T>>(storeConfig);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2003, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/target-groups/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { TargetGroup } from './types';\r\n\r\nexport const useTargetGroupStore = createCrudStore<TargetGroup>([], 'target-groups', {\r\n  apiEndpoint: '/api/settings/data?type=target-group',\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM,sBAAsB,IAAA,6IAAe,EAAc,EAAE,EAAE,iBAAiB;IACnF,aAAa;AACf"}},
    {"offset": {"line": 2019, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/methods/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { PaymentMethod } from './types';\r\nimport { asSystemId, type SystemId } from '@/lib/id-types';\r\n\r\n// API sync helper\r\nasync function syncToAPI(\r\n  action: 'create' | 'update' | 'delete',\r\n  data: Partial<PaymentMethod>\r\n): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create'\r\n      ? '/api/settings/payment-methods'\r\n      : `/api/settings/payment-methods/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Payment Methods API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\ninterface PaymentMethodState {\r\n  data: PaymentMethod[];\r\n  initialized: boolean;\r\n  add: (item: Omit<PaymentMethod, 'systemId' | 'isDefault'>) => void;\r\n  update: (systemId: SystemId, updatedPolicy: Omit<PaymentMethod, 'isDefault' | 'systemId'>) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  setDefault: (systemId: SystemId) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nexport const usePaymentMethodStore = create<PaymentMethodState>()(\r\n  (set, get) => ({\r\n      data: [],\r\n      initialized: false,\r\n      add: (item) => {\r\n        const newItem: PaymentMethod = { \r\n          ...item, \r\n          systemId: asSystemId(`PM_${Date.now()}`),\r\n          isDefault: get().data.length === 0,\r\n        };\r\n        set((state) => ({ data: [...state.data, newItem] }));\r\n        \r\n        // Sync to API\r\n        syncToAPI('create', newItem).catch(console.error);\r\n      },\r\n      update: (systemId, updatedFields) => {\r\n        set((state) => ({\r\n          data: state.data.map(p => p.systemId === systemId ? { ...p, ...updatedFields } : p),\r\n        }));\r\n        \r\n        // Sync to API\r\n        const updated = get().data.find(p => p.systemId === systemId);\r\n        if (updated) {\r\n          syncToAPI('update', updated).catch(console.error);\r\n        }\r\n      },\r\n      remove: (systemId) => {\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n        set((state) => ({\r\n          data: state.data.filter((p) => p.systemId !== systemId),\r\n        }));\r\n      },\r\n      setDefault: (systemId) => {\r\n        set((state) => ({\r\n          data: state.data.map(p => ({ ...p, isDefault: p.systemId === systemId })),\r\n        }));\r\n        \r\n        // Sync all to API (update default status)\r\n        const data = get().data;\r\n        for (const item of data) {\r\n          syncToAPI('update', item).catch(console.error);\r\n        }\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        \r\n        try {\r\n          // NOTE: Settings data is typically small, but using limit for consistency\r\n          const response = await fetch('/api/settings/payment-methods?limit=30');\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            const data = json.data || json.methods || [];\r\n            if (data.length > 0) {\r\n              set({ data, initialized: true });\r\n            } else {\r\n              set({ initialized: true });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('[Payment Methods Store] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,kBAAkB;AAClB,eAAe,UACb,MAAsC,EACtC,IAA4B;IAE5B,IAAI;QACF,MAAM,WAAW,WAAW,WACxB,kCACA,CAAC,8BAA8B,EAAE,KAAK,QAAQ,EAAE;QACpD,MAAM,SAAS,WAAW,WAAW,SAAS,WAAW,WAAW,UAAU;QAE9E,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC;YACA,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,WAAW,WAAW,KAAK,SAAS,CAAC,QAAQ;QACrD;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,OAAO,OAAO,CAAC,EAAE;QACxD,OAAO;IACT;AACF;AAYO,MAAM,wBAAwB,IAAA,qJAAM,IACzC,CAAC,KAAK,MAAQ,CAAC;QACX,MAAM,EAAE;QACR,aAAa;QACb,KAAK,CAAC;YACJ,MAAM,UAAyB;gBAC7B,GAAG,IAAI;gBACP,UAAU,IAAA,mIAAU,EAAC,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI;gBACvC,WAAW,MAAM,IAAI,CAAC,MAAM,KAAK;YACnC;YACA,IAAI,CAAC,QAAU,CAAC;oBAAE,MAAM;2BAAI,MAAM,IAAI;wBAAE;qBAAQ;gBAAC,CAAC;YAElD,cAAc;YACd,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;QAClD;QACA,QAAQ,CAAC,UAAU;YACjB,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,WAAW;4BAAE,GAAG,CAAC;4BAAE,GAAG,aAAa;wBAAC,IAAI;gBACnF,CAAC;YAED,cAAc;YACd,MAAM,UAAU,MAAM,IAAI,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;YACpD,IAAI,SAAS;gBACX,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;YAClD;QACF;QACA,QAAQ,CAAC;YACP,UAAU,UAAU;gBAAE;YAAS,GAAG,KAAK,CAAC,QAAQ,KAAK;YACrD,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;gBAChD,CAAC;QACH;QACA,YAAY,CAAC;YACX,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;4BAAE,GAAG,CAAC;4BAAE,WAAW,EAAE,QAAQ,KAAK;wBAAS,CAAC;gBACzE,CAAC;YAED,0CAA0C;YAC1C,MAAM,OAAO,MAAM,IAAI;YACvB,KAAK,MAAM,QAAQ,KAAM;gBACvB,UAAU,UAAU,MAAM,KAAK,CAAC,QAAQ,KAAK;YAC/C;QACF;QAEA,aAAa;YACX,IAAI,MAAM,WAAW,EAAE;YAEvB,IAAI;gBACF,0EAA0E;gBAC1E,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,MAAM,OAAO,KAAK,IAAI,IAAI,KAAK,OAAO,IAAI,EAAE;oBAC5C,IAAI,KAAK,MAAM,GAAG,GAAG;wBACnB,IAAI;4BAAE;4BAAM,aAAa;wBAAK;oBAChC,OAAO;wBACL,IAAI;4BAAE,aAAa;wBAAK;oBAC1B;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8CAA8C;YAC9D;QACF;IACF,CAAC"}},
    {"offset": {"line": 2128, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/cashbook/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { CashAccount } from './types';\r\nimport { findNextAvailableBusinessId, generateSystemId, getMaxBusinessIdCounter, getMaxSystemIdCounter, type EntityType } from '../../lib/id-utils';\r\nimport { asBusinessId, asSystemId, type BusinessId, type SystemId } from '../../lib/id-types';\r\n\r\nconst CASH_ACCOUNT_ENTITY: EntityType = 'cash-accounts';\r\nconst SYSTEM_ID_PREFIX = 'ACCOUNT';\r\nconst BUSINESS_ID_PREFIX = 'TK';\r\nconst BUSINESS_ID_DIGITS = 6;\r\n\r\n// API sync helpers\r\nasync function syncToAPI(action: 'create' | 'update' | 'delete', data: any): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' ? '/api/cash-accounts' : `/api/cash-accounts/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.error(`[Cashbook API] ${action} failed:`, await response.text());\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`[Cashbook API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\nasync function fetchFromAPI(): Promise<CashAccount[]> {\r\n  try {\r\n    const response = await fetch('/api/cash-accounts?limit=50');\r\n    if (!response.ok) return [];\r\n    const json = await response.json();\r\n    return json.data || [];\r\n  } catch (error) {\r\n    console.error('[Cashbook API] fetch error:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\ninterface CashbookState {\r\n  accounts: CashAccount[];\r\n  initialized: boolean;\r\n  getAccountById: (id: BusinessId) => CashAccount | undefined;\r\n  add: (item: Omit<CashAccount, 'systemId'>) => void;\r\n  update: (systemId: SystemId, item: CashAccount) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  setDefault: (systemId: SystemId) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst getNextSystemId = (accounts: CashAccount[]): SystemId => {\r\n  const currentCounter = getMaxSystemIdCounter(accounts, SYSTEM_ID_PREFIX);\r\n  return asSystemId(generateSystemId(CASH_ACCOUNT_ENTITY, currentCounter + 1));\r\n};\r\n\r\nconst ensureBusinessId = (accounts: CashAccount[], provided?: BusinessId): BusinessId => {\r\n  if (provided && provided.trim()) {\r\n    return provided;\r\n  }\r\n\r\n  const existingIds = accounts.map(acc => acc.id as string);\r\n  const startCounter = getMaxBusinessIdCounter(accounts, BUSINESS_ID_PREFIX);\r\n  const { nextId } = findNextAvailableBusinessId(BUSINESS_ID_PREFIX, existingIds, startCounter, BUSINESS_ID_DIGITS);\r\n  return asBusinessId(nextId);\r\n};\r\n\r\nexport const useCashbookStore = create<CashbookState>()(\r\n  (set, get) => ({\r\n      accounts: [],\r\n      initialized: false,\r\n      getAccountById: (id) => get().accounts.find(a => a.id === id),\r\n      \r\n      add: (item) => {\r\n        const newAccount: CashAccount = {\r\n          ...item,\r\n          systemId: getNextSystemId(get().accounts),\r\n          id: ensureBusinessId(get().accounts, item.id),\r\n        };\r\n        set((state) => ({ accounts: [...state.accounts, newAccount] }));\r\n        // Sync to API\r\n        syncToAPI('create', newAccount).catch(console.error);\r\n      },\r\n      \r\n      update: (systemId, updatedItem) => {\r\n        set((state) => ({\r\n          accounts: state.accounts.map((acc) => (acc.systemId === systemId ? updatedItem : acc))\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('update', updatedItem).catch(console.error);\r\n      },\r\n      \r\n      remove: (systemId) => {\r\n        set((state) => ({\r\n          accounts: state.accounts.filter(acc => acc.systemId !== systemId)\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n      },\r\n      \r\n      setDefault: (systemId) => {\r\n        set((state) => {\r\n          const targetAccount = state.accounts.find(acc => acc.systemId === systemId);\r\n          if (!targetAccount) return state;\r\n\r\n          const updated = state.accounts.map(acc => ({\r\n            ...acc,\r\n            isDefault: (acc.type === targetAccount.type ? acc.systemId === systemId : acc.isDefault) ?? false\r\n          }));\r\n          \r\n          // Sync updated accounts to API\r\n          updated.forEach(acc => {\r\n            if (acc.type === targetAccount.type) {\r\n              syncToAPI('update', acc).catch(console.error);\r\n            }\r\n          });\r\n          \r\n          return { accounts: updated };\r\n        });\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        const apiData = await fetchFromAPI();\r\n        if (apiData.length > 0) {\r\n          set({ accounts: apiData, initialized: true });\r\n        } else {\r\n          set({ initialized: true });\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2263, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { ReceiptType } from './types';\r\nimport { toISODate, getCurrentDate } from '../../../lib/date-utils';\r\n\r\nconst baseStore = createCrudStore<ReceiptType>([], 'receipt-types', {\r\n  businessIdField: 'id',\r\n  apiEndpoint: '/api/settings/data?type=receipt-type',\r\n});\r\n\r\nconst originalAdd = baseStore.getState().add;\r\n\r\nbaseStore.setState((state) => ({\r\n  ...state,\r\n  add: (item) => {\r\n    const newItem = {\r\n      ...item,\r\n      createdAt: item.createdAt ?? toISODate(getCurrentDate()),\r\n    } satisfies Omit<ReceiptType, 'systemId'>;\r\n    return originalAdd(newItem);\r\n  },\r\n}));\r\n\r\nexport const useReceiptTypeStore = baseStore;\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,MAAM,YAAY,IAAA,6IAAe,EAAc,EAAE,EAAE,iBAAiB;IAClE,iBAAiB;IACjB,aAAa;AACf;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAE5C,UAAU,QAAQ,CAAC,CAAC,QAAU,CAAC;QAC7B,GAAG,KAAK;QACR,KAAK,CAAC;YACJ,MAAM,UAAU;gBACd,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,IAAI,IAAA,oIAAS,EAAC,IAAA,yIAAc;YACvD;YACA,OAAO,YAAY;QACrB;IACF,CAAC;AAEM,MAAM,sBAAsB"}},
    {"offset": {"line": 2294, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/types/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { PaymentType } from './types';\r\nimport { toISODate, getCurrentDate } from '../../../../lib/date-utils';\r\n\r\nconst baseStore = createCrudStore<PaymentType>([], 'payment-types', {\r\n  businessIdField: 'id',\r\n  apiEndpoint: '/api/settings/data?type=payment-type',\r\n});\r\n\r\nconst originalAdd = baseStore.getState().add;\r\n\r\nbaseStore.setState((state) => ({\r\n  ...state,\r\n  add: (item) => {\r\n    const newItem = {\r\n      ...item,\r\n      createdAt: item.createdAt ?? toISODate(getCurrentDate()),\r\n    } satisfies Omit<PaymentType, 'systemId'>;\r\n    return originalAdd(newItem);\r\n  },\r\n}));\r\n\r\nexport const usePaymentTypeStore = baseStore;\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,MAAM,YAAY,IAAA,6IAAe,EAAc,EAAE,EAAE,iBAAiB;IAClE,iBAAiB;IACjB,aAAa;AACf;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAE5C,UAAU,QAAQ,CAAC,CAAC,QAAU,CAAC;QAC7B,GAAG,KAAK;QACR,KAAK,CAAC;YACJ,MAAM,UAAU;gBACd,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,IAAI,IAAA,oIAAS,EAAC,IAAA,yIAAc;YACvD;YACA,OAAO,YAAY;QACrB;IACF,CAAC;AAEM,MAAM,sBAAsB"}},
    {"offset": {"line": 2325, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/finance/document-lookups.ts"],"sourcesContent":["import { useTargetGroupStore } from '@/features/settings/target-groups/store';\r\nimport { usePaymentMethodStore } from '@/features/settings/payments/methods/store';\r\nimport { useCashbookStore } from '@/features/cashbook/store';\r\nimport { useReceiptTypeStore } from '@/features/settings/receipt-types/store';\r\nimport { usePaymentTypeStore } from '@/features/settings/payments/types/store';\r\nimport type { TargetGroup } from '@/features/settings/target-groups/types';\r\nimport type { PaymentMethod } from '@/features/settings/payments/methods/types';\r\nimport type { CashAccount } from '@/features/cashbook/types';\r\nimport type { ReceiptType } from '@/features/settings/receipt-types/types';\r\nimport type { PaymentType } from '@/features/settings/payments/types/types';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\nconst normalizeName = (value?: string | null) => (value ?? '').trim().toLowerCase();\r\n\r\nexport const DEFAULT_CUSTOMER_GROUP = 'kh√°ch h√†ng';\r\n\r\nexport const pickTargetGroup = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n  fallbackName?: string | undefined;\r\n}): TargetGroup | null => {\r\n  const groups = useTargetGroupStore.getState().data ?? [];\r\n  if (groups.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = groups.find(group => group.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  const lookupNames = [options?.name, options?.fallbackName, DEFAULT_CUSTOMER_GROUP].filter(Boolean) as string[];\r\n  for (const candidate of lookupNames) {\r\n    const normalized = normalizeName(candidate);\r\n    const match = groups.find(group => normalizeName(group.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return groups[0] ?? null;\r\n};\r\n\r\nexport const pickPaymentMethod = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n}): PaymentMethod | null => {\r\n  const methods = usePaymentMethodStore.getState().data ?? [];\r\n  if (methods.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = methods.find(method => method.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  if (options?.name) {\r\n    const normalized = normalizeName(options.name);\r\n    const match = methods.find(method => normalizeName(method.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return methods.find(method => method.isDefault) ?? methods[0] ?? null;\r\n};\r\n\r\nexport const pickAccount = (options: {\r\n  accountSystemId?: SystemId | undefined;\r\n  preferredType?: 'cash' | 'bank' | undefined;\r\n  branchSystemId?: SystemId | undefined;\r\n  paymentMethodName?: string | undefined;\r\n}): CashAccount | null => {\r\n  const { accounts } = useCashbookStore.getState();\r\n  if (!accounts || accounts.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options.accountSystemId) {\r\n    const match = accounts.find(account => account.systemId === options.accountSystemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  let preferredType = options.preferredType;\r\n  if (!preferredType && options.paymentMethodName) {\r\n    const normalizedMethod = normalizeName(options.paymentMethodName);\r\n    preferredType = normalizedMethod === 'ti·ªÅn m·∫∑t' ? 'cash' : normalizedMethod === 'chuy·ªÉn kho·∫£n' ? 'bank' : undefined;\r\n  }\r\n\r\n  const candidates = preferredType ? accounts.filter(account => account.type === preferredType) : accounts;\r\n\r\n  if (candidates.length === 0) {\r\n    return accounts[0];\r\n  }\r\n\r\n  return (\r\n    candidates.find(account => account.branchSystemId && options.branchSystemId && account.branchSystemId === options.branchSystemId) ??\r\n    candidates.find(account => account.isDefault) ??\r\n    candidates[0]\r\n  );\r\n};\r\n\r\nexport const pickReceiptType = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n}): ReceiptType | null => {\r\n  const types = useReceiptTypeStore.getState().data ?? [];\r\n  if (types.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = types.find(type => type.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  if (options?.name) {\r\n    const normalized = normalizeName(options.name);\r\n    const match = types.find(type => normalizeName(type.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return types[0] ?? null;\r\n};\r\n\r\nexport const pickPaymentType = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n}): PaymentType | null => {\r\n  const types = usePaymentTypeStore.getState().data ?? [];\r\n  if (types.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = types.find(type => type.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  if (options?.name) {\r\n    const normalized = normalizeName(options.name);\r\n    const match = types.find(type => normalizeName(type.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return types[0] ?? null;\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2465, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/breadcrumb-generator.ts"],"sourcesContent":["/**\r\n * üçû BREADCRUMB AUTO-GENERATION SYSTEM\r\n * \r\n * Automatically generates breadcrumbs from route metadata + entity data\r\n * \r\n * Features:\r\n * - Auto-lookup entity name from systemId\r\n * - Falls back to route metadata if entity not found\r\n * - Type-safe with SystemId branded types\r\n * - Supports all entity types from id-config.ts\r\n * \r\n * @example\r\n * ```typescript\r\n * // Route: /receipts/VOUCHER00000123\r\n * const crumbs = generateBreadcrumb(location.pathname);\r\n * // Result: ['Phi·∫øu thu/chi', 'PT000051']\r\n * ```\r\n * \r\n * @version 1.0.0\r\n * @date 2025-11-11\r\n */\r\n\r\nimport { type EntityType, getEntityConfig } from './id-config';\r\nimport { type SystemId } from './id-config';\r\n\r\n// Store registry - lazy loaded to avoid circular dependencies\r\ntype StoreGetter<T> = () => { data: T[] };\r\n\r\ninterface StoreRegistry {\r\n  [key: string]: StoreGetter<any>;\r\n}\r\n\r\nlet storeRegistry: StoreRegistry = {};\r\n\r\n/**\r\n * Register a store for breadcrumb lookup\r\n * Call this in store files to enable auto breadcrumb\r\n */\r\nexport function registerBreadcrumbStore<T extends { systemId: string; id?: string; name?: string }>(\r\n  entityType: EntityType,\r\n  getStore: StoreGetter<T>\r\n) {\r\n  storeRegistry[entityType] = getStore;\r\n}\r\n\r\n/**\r\n * Find entity by systemId and return display name\r\n */\r\nfunction findEntityDisplayName(entityType: EntityType, systemId: string): string | null {\r\n  const getStore = storeRegistry[entityType];\r\n  if (!getStore) return null;\r\n\r\n  try {\r\n    const store = getStore();\r\n    const item = store.data.find((d: any) => d.systemId === systemId);\r\n    \r\n    if (!item) return null;\r\n\r\n    // Priority: name > title > id (business ID) > systemId\r\n    return item.name || item.title || item.id || systemId;\r\n  } catch (error) {\r\n    console.warn(`[Breadcrumb] Failed to lookup ${entityType}:`, error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Parse route path and extract entity info\r\n */\r\ninterface RouteEntityInfo {\r\n  entityType: EntityType | null;\r\n  systemId: string | null;\r\n  displayName: string | null;\r\n}\r\n\r\nfunction parseRouteEntity(pathname: string): RouteEntityInfo {\r\n  // Pattern: /{entity-type}/{systemId}\r\n  const match = pathname.match(/^\\/([^/]+)\\/([^/]+)$/);\r\n  \r\n  if (!match) {\r\n    return { entityType: null, systemId: null, displayName: null };\r\n  }\r\n\r\n  const [, routeType, id] = match;\r\n  \r\n  // Map route type to entity type\r\n  const routeToEntityMap: Record<string, EntityType> = {\r\n    'receipts': 'voucher-receipt',\r\n    'payments': 'voucher-payment',\r\n    'employees': 'employees',\r\n    'customers': 'customers',\r\n    'products': 'products',\r\n    'orders': 'orders',\r\n    'suppliers': 'suppliers',\r\n    'complaints': 'complaints',\r\n    'warranty': 'warranty',\r\n    'purchase-orders': 'purchase-orders',\r\n    'sales-returns': 'sales-returns',\r\n    'purchase-returns': 'purchase-returns',\r\n    'inventory-checks': 'inventory-checks',\r\n  };\r\n\r\n  const entityType = routeToEntityMap[routeType] || null;\r\n  \r\n  if (!entityType) {\r\n    return { entityType: null, systemId: id, displayName: null };\r\n  }\r\n\r\n  // Lookup display name\r\n  const displayName = findEntityDisplayName(entityType, id);\r\n  \r\n  return { entityType, systemId: id, displayName };\r\n}\r\n\r\n/**\r\n * Generate breadcrumb trail from pathname\r\n * \r\n * @param pathname - Current route pathname\r\n * @param routeMeta - Optional route metadata with static breadcrumb\r\n * @returns Array of breadcrumb labels\r\n */\r\nexport function generateBreadcrumb(\r\n  pathname: string,\r\n  routeMeta?: { breadcrumb?: string[] }\r\n): string[] {\r\n  // If route has static breadcrumb metadata, use it as base\r\n  const baseCrumbs = routeMeta?.breadcrumb || [];\r\n  \r\n  // Try to enhance with entity data\r\n  const entityInfo = parseRouteEntity(pathname);\r\n  \r\n  if (entityInfo.displayName) {\r\n    // Replace last breadcrumb with entity display name\r\n    return [...baseCrumbs.slice(0, -1), entityInfo.displayName];\r\n  }\r\n  \r\n  // Fallback to route metadata\r\n  return baseCrumbs;\r\n}\r\n\r\n/**\r\n * Generate breadcrumb for detail page\r\n * \r\n * @example\r\n * ```typescript\r\n * // In voucher detail page (phi·∫øu chi)\r\n * const crumbs = generateDetailBreadcrumb('voucher-payment', voucher.systemId, 'Phi·∫øu thu/chi');\r\n * // Result: ['Phi·∫øu thu/chi', 'PT000051']\r\n * ```\r\n */\r\nexport function generateDetailBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string,\r\n  listPageLabel: string\r\n): string[] {\r\n  const displayName = findEntityDisplayName(entityType, systemId);\r\n  return [listPageLabel, displayName || systemId];\r\n}\r\n\r\n/**\r\n * Generate breadcrumb for form page (create/edit)\r\n * \r\n * @example\r\n * ```typescript\r\n * const crumbs = generateFormBreadcrumb('employees', employeeSystemId, 'Nh√¢n vi√™n');\r\n * // Create: ['Nh√¢n vi√™n', 'Th√™m m·ªõi']\r\n * // Edit: ['Nh√¢n vi√™n', 'NV000001']\r\n * ```\r\n */\r\nexport function generateFormBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string | null | undefined,\r\n  listPageLabel: string\r\n): string[] {\r\n  if (!systemId) {\r\n    return [listPageLabel, 'Th√™m m·ªõi'];\r\n  }\r\n  \r\n  const displayName = findEntityDisplayName(entityType, systemId);\r\n  return [listPageLabel, displayName || 'Ch·ªânh s·ª≠a'];\r\n}\r\n\r\n/**\r\n * Hook for breadcrumb in React components\r\n * \r\n * @example\r\n * ```typescript\r\n * function EmployeeDetailPage() {\r\n *   const { systemId } = useParams();\r\n *   const crumbs = useBreadcrumb('employees', systemId, 'Nh√¢n vi√™n');\r\n *   usePageHeader({ breadcrumb: crumbs });\r\n * }\r\n * ```\r\n */\r\nexport function useBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string | null | undefined,\r\n  listPageLabel: string\r\n): string[] {\r\n  if (!systemId) {\r\n    return [listPageLabel, 'Th√™m m·ªõi'];\r\n  }\r\n  \r\n  return generateDetailBreadcrumb(entityType, systemId, listPageLabel);\r\n}\r\n\r\n/**\r\n * Get entity config for breadcrumb display\r\n */\r\nexport function getEntityDisplayInfo(entityType: EntityType) {\r\n  try {\r\n    const config = getEntityConfig(entityType);\r\n    return {\r\n      displayName: config.displayName,\r\n      prefix: config.prefix,\r\n      category: config.category,\r\n    };\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Clear store registry (for testing)\r\n */\r\nexport function clearBreadcrumbStores() {\r\n  storeRegistry = {};\r\n}\r\n\r\n/**\r\n * Get all registered stores (for debugging)\r\n */\r\nexport function getRegisteredStores(): string[] {\r\n  return Object.keys(storeRegistry);\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;CAoBC,GAED;;AAUA,IAAI,gBAA+B,CAAC;AAM7B,SAAS,wBACd,UAAsB,EACtB,QAAwB;IAExB,aAAa,CAAC,WAAW,GAAG;AAC9B;AAEA;;CAEC,GACD,SAAS,sBAAsB,UAAsB,EAAE,QAAgB;IACrE,MAAM,WAAW,aAAa,CAAC,WAAW;IAC1C,IAAI,CAAC,UAAU,OAAO;IAEtB,IAAI;QACF,MAAM,QAAQ;QACd,MAAM,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,QAAQ,KAAK;QAExD,IAAI,CAAC,MAAM,OAAO;QAElB,uDAAuD;QACvD,OAAO,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,KAAK,EAAE,IAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,CAAC,8BAA8B,EAAE,WAAW,CAAC,CAAC,EAAE;QAC7D,OAAO;IACT;AACF;AAWA,SAAS,iBAAiB,QAAgB;IACxC,qCAAqC;IACrC,MAAM,QAAQ,SAAS,KAAK,CAAC;IAE7B,IAAI,CAAC,OAAO;QACV,OAAO;YAAE,YAAY;YAAM,UAAU;YAAM,aAAa;QAAK;IAC/D;IAEA,MAAM,GAAG,WAAW,GAAG,GAAG;IAE1B,gCAAgC;IAChC,MAAM,mBAA+C;QACnD,YAAY;QACZ,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,UAAU;QACV,aAAa;QACb,cAAc;QACd,YAAY;QACZ,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,oBAAoB;IACtB;IAEA,MAAM,aAAa,gBAAgB,CAAC,UAAU,IAAI;IAElD,IAAI,CAAC,YAAY;QACf,OAAO;YAAE,YAAY;YAAM,UAAU;YAAI,aAAa;QAAK;IAC7D;IAEA,sBAAsB;IACtB,MAAM,cAAc,sBAAsB,YAAY;IAEtD,OAAO;QAAE;QAAY,UAAU;QAAI;IAAY;AACjD;AASO,SAAS,mBACd,QAAgB,EAChB,SAAqC;IAErC,0DAA0D;IAC1D,MAAM,aAAa,WAAW,cAAc,EAAE;IAE9C,kCAAkC;IAClC,MAAM,aAAa,iBAAiB;IAEpC,IAAI,WAAW,WAAW,EAAE;QAC1B,mDAAmD;QACnD,OAAO;eAAI,WAAW,KAAK,CAAC,GAAG,CAAC;YAAI,WAAW,WAAW;SAAC;IAC7D;IAEA,6BAA6B;IAC7B,OAAO;AACT;AAYO,SAAS,yBACd,UAAsB,EACtB,QAAgB,EAChB,aAAqB;IAErB,MAAM,cAAc,sBAAsB,YAAY;IACtD,OAAO;QAAC;QAAe,eAAe;KAAS;AACjD;AAYO,SAAS,uBACd,UAAsB,EACtB,QAAmC,EACnC,aAAqB;IAErB,IAAI,CAAC,UAAU;QACb,OAAO;YAAC;YAAe;SAAW;IACpC;IAEA,MAAM,cAAc,sBAAsB,YAAY;IACtD,OAAO;QAAC;QAAe,eAAe;KAAY;AACpD;AAcO,SAAS,cACd,UAAsB,EACtB,QAAmC,EACnC,aAAqB;IAErB,IAAI,CAAC,UAAU;QACb,OAAO;YAAC;YAAe;SAAW;IACpC;IAEA,OAAO,yBAAyB,YAAY,UAAU;AACxD;AAKO,SAAS,qBAAqB,UAAsB;IACzD,IAAI;QACF,MAAM,SAAS,IAAA,yIAAe,EAAC;QAC/B,OAAO;YACL,aAAa,OAAO,WAAW;YAC/B,QAAQ,OAAO,MAAM;YACrB,UAAU,OAAO,QAAQ;QAC3B;IACF,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,SAAS;IACd,gBAAgB,CAAC;AACnB;AAKO,SAAS;IACd,OAAO,OAAO,IAAI,CAAC;AACrB"}},
    {"offset": {"line": 2637, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/repositories/in-memory-repository.ts"],"sourcesContent":["import type { SystemId } from '../lib/id-types';\r\nimport type { CrudState, ItemWithSystemId } from '../lib/store-factory';\r\nimport type { CrudRepository } from './types';\r\n\r\n/**\r\n * Adapter m·∫∑c ƒë·ªãnh d√πng tr·ª±c ti·∫øp Zustand store ƒë·ªÉ gi·∫£ l·∫≠p t·∫ßng persistence.\r\n * Gi·ªØ c√πng signature v·ªõi repository interface ƒë·ªÉ sau n√†y thay b·∫±ng API/DB d·ªÖ d√†ng.\r\n */\r\nexport const createInMemoryRepository = <TEntity extends ItemWithSystemId>(\r\n  stateGetter: () => CrudState<TEntity>\r\n): CrudRepository<TEntity, Omit<TEntity, 'systemId'>, Partial<TEntity>> => {\r\n  const getStore = () => stateGetter();\r\n\r\n  const ensureEntity = (systemId: SystemId): TEntity => {\r\n    const entity = getStore().findById(systemId);\r\n    if (!entity) {\r\n      throw new Error(`Kh√¥ng t√¨m th·∫•y entity v·ªõi systemId=${systemId}`);\r\n    }\r\n    return entity;\r\n  };\r\n\r\n  return {\r\n    async list() {\r\n      return [...getStore().data];\r\n    },\r\n    async getById(systemId) {\r\n      return getStore().findById(systemId);\r\n    },\r\n    async create(payload) {\r\n      return getStore().add(payload as Omit<TEntity, 'systemId'>);\r\n    },\r\n    async update(systemId, payload) {\r\n      ensureEntity(systemId);\r\n      getStore().update(systemId, payload);\r\n      return ensureEntity(systemId);\r\n    },\r\n    async softDelete(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().remove(systemId);\r\n    },\r\n    async restore(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().restore(systemId);\r\n      return getStore().findById(systemId);\r\n    },\r\n    async hardDelete(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().hardDelete(systemId);\r\n    },\r\n  };\r\n};\r\n"],"names":[],"mappings":";;;;AAQO,MAAM,2BAA2B,CACtC;IAEA,MAAM,WAAW,IAAM;IAEvB,MAAM,eAAe,CAAC;QACpB,MAAM,SAAS,WAAW,QAAQ,CAAC;QACnC,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,MAAM,CAAC,mCAAmC,EAAE,UAAU;QAClE;QACA,OAAO;IACT;IAEA,OAAO;QACL,MAAM;YACJ,OAAO;mBAAI,WAAW,IAAI;aAAC;QAC7B;QACA,MAAM,SAAQ,QAAQ;YACpB,OAAO,WAAW,QAAQ,CAAC;QAC7B;QACA,MAAM,QAAO,OAAO;YAClB,OAAO,WAAW,GAAG,CAAC;QACxB;QACA,MAAM,QAAO,QAAQ,EAAE,OAAO;YAC5B,aAAa;YACb,WAAW,MAAM,CAAC,UAAU;YAC5B,OAAO,aAAa;QACtB;QACA,MAAM,YAAW,QAAQ;YACvB,aAAa;YACb,WAAW,MAAM,CAAC;QACpB;QACA,MAAM,SAAQ,QAAQ;YACpB,aAAa;YACb,WAAW,OAAO,CAAC;YACnB,OAAO,WAAW,QAAQ,CAAC;QAC7B;QACA,MAAM,YAAW,QAAQ;YACvB,aAAa;YACb,WAAW,UAAU,CAAC;QACxB;IACF;AACF"}},
    {"offset": {"line": 2689, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/activity-history-helper.ts"],"sourcesContent":["/**\r\n * Activity History Helper\r\n * \r\n * Helper ƒë·ªÉ t·∫°o c√°c entry l·ªãch s·ª≠ ho·∫°t ƒë·ªông m·ªôt c√°ch nh·∫•t qu√°n\r\n * D√πng chung cho t·∫•t c·∫£ c√°c modules trong h·ªá th·ªëng\r\n * \r\n * NOTE: ƒê√£ remove import useEmployeeStore ƒë·ªÉ tr√°nh circular dependency\r\n * v√† c·∫£i thi·ªán compile time\r\n */\r\n\r\nimport type { HistoryEntry } from '../components/ActivityHistory';\r\nimport { getCurrentUserInfo as getAuthUserInfo } from '../contexts/auth-context';\r\nimport type { SystemId } from './id-types';\r\n\r\n// Re-export HistoryEntry type for convenience\r\nexport type { HistoryEntry } from '../components/ActivityHistory';\r\n\r\n/**\r\n * L·∫•y th√¥ng tin ng∆∞·ªùi d√πng hi·ªán t·∫°i t·ª´ auth context\r\n * NOTE: Avatar lookup t·ª´ employee store ƒë√£ b·ªã remove ƒë·ªÉ tr√°nh circular dependency\r\n */\r\nexport function getCurrentUserInfo(): { systemId: string; name: string; avatar?: string } {\r\n  const authInfo = getAuthUserInfo();\r\n  \r\n  return {\r\n    systemId: authInfo.systemId || 'SYSTEM',\r\n    name: authInfo.name || 'H·ªá th·ªëng',\r\n    avatar: undefined, // Avatar will be fetched by component if needed\r\n  };\r\n}\r\n\r\n/**\r\n * L·∫•y th√¥ng tin nh√¢n vi√™n t·ª´ systemId\r\n * NOTE: This function now requires employee data to be passed in\r\n * to avoid circular dependency with employee store\r\n */\r\nexport function getEmployeeInfoFromData(\r\n  employeeSystemId: SystemId | string,\r\n  employees: Array<{ systemId: string; fullName: string; avatarUrl?: string }>\r\n): { systemId: string; name: string; avatar?: string } {\r\n  const employee = employees.find(e => e.systemId === employeeSystemId);\r\n  \r\n  if (employee) {\r\n    return {\r\n      systemId: employee.systemId,\r\n      name: employee.fullName,\r\n      avatar: employee.avatarUrl,\r\n    };\r\n  }\r\n  \r\n  // Fallback to system\r\n  return {\r\n    systemId: String(employeeSystemId) || 'SYSTEM',\r\n    name: 'H·ªá th·ªëng',\r\n  };\r\n}\r\n\r\n/**\r\n * @deprecated Use getEmployeeInfoFromData instead\r\n */\r\nexport function getEmployeeInfo(employeeSystemId: SystemId | string): { systemId: string; name: string; avatar?: string } {\r\n  // Return minimal info without employee store lookup\r\n  return {\r\n    systemId: String(employeeSystemId) || 'SYSTEM',\r\n    name: 'H·ªá th·ªëng',\r\n  };\r\n}\r\n\r\n/**\r\n * T·∫°o m·ªôt history entry m·ªõi\r\n */\r\nexport function createHistoryEntry(\r\n  action: HistoryEntry['action'],\r\n  userOrDescription: { systemId: string; name: string; avatar?: string } | string,\r\n  descriptionOrMetadata?: string | HistoryEntry['metadata'],\r\n  metadata?: HistoryEntry['metadata']\r\n): HistoryEntry {\r\n  const hasUserObject = typeof userOrDescription === 'object' && userOrDescription !== null;\r\n  const user = hasUserObject ? userOrDescription : getCurrentUserInfo();\r\n  const description = (hasUserObject ? descriptionOrMetadata : userOrDescription) as string | undefined;\r\n  const meta = (hasUserObject ? metadata : descriptionOrMetadata) as HistoryEntry['metadata'] | undefined;\r\n\r\n  return {\r\n    id: `history-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n    action,\r\n    timestamp: new Date(),\r\n    user: {\r\n      systemId: user.systemId,\r\n      name: user.name,\r\n      avatar: user.avatar,\r\n    },\r\n    description: description ?? '',\r\n    metadata: meta,\r\n  };\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"created\"\r\n */\r\nexport function createCreatedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('created', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"updated\"\r\n */\r\nexport function createUpdatedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('updated', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"status_changed\"\r\n */\r\nexport function createStatusChangedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  oldStatus: string,\r\n  newStatus: string,\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry(\r\n    'status_changed',\r\n    user,\r\n    description,\r\n    { field: 'status', oldValue: oldStatus, newValue: newStatus }\r\n  );\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"deleted\"\r\n */\r\nexport function createDeletedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('deleted', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"assigned\"\r\n */\r\nexport function createAssignedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('assigned', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"payment_made\"\r\n */\r\nexport function createPaymentEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('payment_made', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"comment_added\"\r\n */\r\nexport function createCommentEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('comment_added', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"cancelled\"\r\n */\r\nexport function createCancelledEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('cancelled', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"verified\"\r\n */\r\nexport function createVerifiedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('verified', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"ended\"\r\n */\r\nexport function createEndedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('ended', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"reopened\"\r\n */\r\nexport function createReopenedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('reopened', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho product actions\r\n */\r\nexport function createProductEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  action: 'product_added' | 'product_updated' | 'product_removed',\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry(action, user, description);\r\n}\r\n\r\n/**\r\n * Helper ƒë·ªÉ append history entry v√†o existing array\r\n */\r\nexport function appendHistoryEntry(\r\n  existingHistory: HistoryEntry[] | undefined,\r\n  ...newEntries: HistoryEntry[]\r\n): HistoryEntry[] {\r\n  return [...(existingHistory || []), ...newEntries];\r\n}\r\n\r\n/**\r\n * Helper ƒë·ªÉ t·∫°o nhi·ªÅu history entries c√πng l√∫c\r\n */\r\nexport function createBulkUpdateEntries(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  changes: Array<{ field: string; description: string }>\r\n): HistoryEntry[] {\r\n  return changes.map(change => createHistoryEntry('updated', user, change.description));\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2841, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/employees/store.ts"],"sourcesContent":["import { createCrudStore, CrudState } from '../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { Employee } from './types';\r\nimport type { HistoryEntry } from '../../components/ActivityHistory';\r\nimport Fuse from 'fuse.js';\r\nimport { getCurrentUserSystemId } from '../../contexts/auth-context';\r\nimport { registerBreadcrumbStore } from '../../lib/breadcrumb-generator'; // ‚úÖ NEW\r\nimport { type SystemId } from '../../lib/id-types';\r\nimport { createInMemoryRepository } from '../../repositories/in-memory-repository';\r\nimport { \r\n  createHistoryEntry, \r\n  getCurrentUserInfo,\r\n  appendHistoryEntry \r\n} from '../../lib/activity-history-helper';\r\n\r\ntype EmployeePersistenceAdapter = {\r\n  create: (payload: Omit<Employee, 'systemId'>) => Promise<Employee>;\r\n  update: (systemId: SystemId, payload: Partial<Employee>) => Promise<Employee>;\r\n  softDelete: (systemId: SystemId) => Promise<void>;\r\n  restore: (systemId: SystemId) => Promise<Employee | undefined>;\r\n  hardDelete: (systemId: SystemId) => Promise<void>;\r\n};\r\n\r\nconst baseStore = createCrudStore<Employee>([], 'employees', {\r\n  businessIdField: 'id',\r\n  getCurrentUser: getCurrentUserSystemId, // ‚úÖ Track who creates/updates\r\n  apiEndpoint: '/api/employees',\r\n});\r\n\r\n// ‚úÖ Wrap add method to include activity history\r\nconst originalAdd = baseStore.getState().add;\r\nconst wrappedAdd = (item: Omit<Employee, 'systemId'>): Employee => {\r\n  const userInfo = getCurrentUserInfo();\r\n  const historyEntry = createHistoryEntry(\r\n    'created',\r\n    `${userInfo.name} ƒë√£ t·∫°o h·ªì s∆° nh√¢n vi√™n ${item.fullName} (${item.id})`,\r\n    userInfo\r\n  );\r\n  \r\n  const newEmployee = originalAdd({\r\n    ...item,\r\n    activityHistory: [historyEntry],\r\n  });\r\n  \r\n  return newEmployee;\r\n};\r\n\r\n// ‚úÖ Wrap update method to include activity history\r\nconst originalUpdate = baseStore.getState().update;\r\nconst wrappedUpdate = (systemId: SystemId, updates: Partial<Employee>): void => {\r\n  const currentEmployee = baseStore.getState().data.find(e => e.systemId === systemId);\r\n  if (!currentEmployee) return;\r\n  \r\n  const userInfo = getCurrentUserInfo();\r\n  const historyEntries: HistoryEntry[] = [];\r\n  \r\n  // Track important field changes\r\n  const trackedFields: { key: keyof Employee; label: string }[] = [\r\n    { key: 'fullName', label: 'h·ªç t√™n' },\r\n    { key: 'jobTitle', label: 'ch·ª©c danh' },\r\n    { key: 'department', label: 'ph√≤ng ban' },\r\n    { key: 'employmentStatus', label: 'tr·∫°ng th√°i l√†m vi·ªác' },\r\n    { key: 'employeeType', label: 'lo·∫°i nh√¢n vi√™n' },\r\n    { key: 'baseSalary', label: 'l∆∞∆°ng c∆° b·∫£n' },\r\n    { key: 'phone', label: 's·ªë ƒëi·ªán tho·∫°i' },\r\n    { key: 'workEmail', label: 'email c√¥ng vi·ªác' },\r\n    { key: 'role', label: 'vai tr√≤' },\r\n  ];\r\n  \r\n  trackedFields.forEach(({ key, label }) => {\r\n    if (updates[key] !== undefined && updates[key] !== currentEmployee[key]) {\r\n      const oldValue = currentEmployee[key];\r\n      const newValue = updates[key];\r\n      \r\n      // Format values for display\r\n      let oldDisplay = oldValue;\r\n      let newDisplay = newValue;\r\n      \r\n      if (key === 'baseSalary') {\r\n        oldDisplay = new Intl.NumberFormat('vi-VN').format(oldValue as number) + 'ƒë';\r\n        newDisplay = new Intl.NumberFormat('vi-VN').format(newValue as number) + 'ƒë';\r\n      }\r\n      \r\n      historyEntries.push(createHistoryEntry(\r\n        'updated',\r\n        `${userInfo.name} ƒë√£ c·∫≠p nh·∫≠t ${label}: \"${oldDisplay || '(tr·ªëng)'}\" ‚Üí \"${newDisplay}\"`,\r\n        userInfo,\r\n        { field: key, oldValue, newValue }\r\n      ));\r\n    }\r\n  });\r\n  \r\n  // If status changed specifically\r\n  if (updates.employmentStatus && updates.employmentStatus !== currentEmployee.employmentStatus) {\r\n    historyEntries.push(createHistoryEntry(\r\n      'status_changed',\r\n      `${userInfo.name} ƒë√£ thay ƒë·ªïi tr·∫°ng th√°i l√†m vi·ªác t·ª´ \"${currentEmployee.employmentStatus}\" th√†nh \"${updates.employmentStatus}\"`,\r\n      userInfo,\r\n      { field: 'employmentStatus', oldValue: currentEmployee.employmentStatus, newValue: updates.employmentStatus }\r\n    ));\r\n  }\r\n  \r\n  // If no specific changes tracked, add generic update entry\r\n  if (historyEntries.length === 0) {\r\n    historyEntries.push(createHistoryEntry(\r\n      'updated',\r\n      `${userInfo.name} ƒë√£ c·∫≠p nh·∫≠t th√¥ng tin nh√¢n vi√™n`,\r\n      userInfo\r\n    ));\r\n  }\r\n  \r\n  const updatedHistory = appendHistoryEntry(currentEmployee.activityHistory, ...historyEntries);\r\n  \r\n  originalUpdate(systemId, {\r\n    ...updates,\r\n    activityHistory: updatedHistory,\r\n  });\r\n};\r\n\r\n// ‚úÖ Override base store methods\r\nbaseStore.setState({\r\n  add: wrappedAdd,\r\n  update: wrappedUpdate,\r\n});\r\n\r\nexport const employeeRepository = createInMemoryRepository<Employee>(() => baseStore.getState());\r\n\r\n// ‚úÖ API-backed persistence adapter - syncs to PostgreSQL\r\nconst API_ENDPOINT = '/api/employees';\r\n\r\nconst persistence: EmployeePersistenceAdapter = {\r\n  create: async (payload) => {\r\n    // First create locally for immediate UI update\r\n    const localResult = await employeeRepository.create(payload);\r\n    \r\n    // Then sync to API (background)\r\n    try {\r\n      const response = await fetch(API_ENDPOINT, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ ...payload, systemId: localResult.systemId }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Create sync failed, data saved locally');\r\n      } else {\r\n        console.log('[Employee API] Created:', localResult.systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Create sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  update: async (systemId, payload) => {\r\n    // First update locally\r\n    const localResult = await employeeRepository.update(systemId, payload);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'PATCH',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Update sync failed');\r\n      } else {\r\n        console.log('[Employee API] Updated:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Update sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  softDelete: async (systemId) => {\r\n    // First delete locally\r\n    await employeeRepository.softDelete(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ hard: false }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Soft delete sync failed');\r\n      } else {\r\n        console.log('[Employee API] Soft deleted:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Soft delete sync error:', e);\r\n    }\r\n  },\r\n  restore: async (systemId) => {\r\n    // First restore locally\r\n    const localResult = await employeeRepository.restore(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}/restore`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Restore sync failed');\r\n      } else {\r\n        console.log('[Employee API] Restored:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Restore sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  hardDelete: async (systemId) => {\r\n    // First delete locally\r\n    await employeeRepository.hardDelete(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ hard: true }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Hard delete sync failed');\r\n      } else {\r\n        console.log('[Employee API] Hard deleted:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Hard delete sync error:', e);\r\n    }\r\n  },\r\n};\r\n\r\n// ‚úÖ Register for breadcrumb auto-generation\r\nregisterBreadcrumbStore('employees', () => baseStore.getState());\r\n\r\n// Define enhanced interface\r\ninterface EmployeeStoreState extends CrudState<Employee> {\r\n  searchEmployees: (query: string, page: number, limit?: number) => Promise<{ items: { value: string; label: string }[], hasNextPage: boolean }>;\r\n  permanentDelete: (systemId: SystemId) => Promise<void>;\r\n  persistence: EmployeePersistenceAdapter;\r\n}\r\n\r\ntype EmployeeStoreHook = (() => EmployeeStoreState) & {\r\n  getState: () => EmployeeStoreState;\r\n  persistence: EmployeePersistenceAdapter;\r\n};\r\n\r\n// Augmented methods\r\nconst augmentedMethods = {\r\n    // FIX: Changed `page: number = 1` to `page: number` to make it a required parameter, matching Combobox prop type.\r\n    // ‚úÖ CRITICAL FIX: Create fresh Fuse instance on each search to avoid stale data\r\n    searchEmployees: async (query: string, page: number, limit: number = 20) => {\r\n        return new Promise<{ items: { value: string; label: string }[], hasNextPage: boolean }>(resolve => {\r\n            setTimeout(() => {\r\n                const allEmployees = baseStore.getState().data;\r\n                \r\n                // ‚úÖ Create fresh Fuse instance with current data\r\n                const fuse = new Fuse(allEmployees, {\r\n                    keys: ['fullName', 'id', 'phone', 'personalEmail', 'workEmail'],\r\n                    threshold: 0.3,\r\n                });\r\n                \r\n                const results = query ? fuse.search(query).map(r => r.item) : allEmployees;\r\n                \r\n                const start = (page - 1) * limit;\r\n                const end = start + limit;\r\n                const paginatedItems = results.slice(start, end);\r\n\r\n                resolve({\r\n                    items: paginatedItems.map(e => ({ value: e.systemId, label: e.fullName })),\r\n                    hasNextPage: end < results.length,\r\n                });\r\n            }, 300);\r\n        });\r\n    },\r\n    permanentDelete: async (systemId: SystemId) => {\r\n        await persistence.hardDelete(systemId);\r\n    }\r\n};\r\n\r\nconst useEmployeeStoreHook = (): EmployeeStoreState => {\r\n  const state = baseStore();\r\n  return {\r\n    ...state,\r\n    ...augmentedMethods, // This includes permanentDelete\r\n    persistence,\r\n  };\r\n};\r\n\r\nexport const useEmployeeStore = useEmployeeStoreHook as EmployeeStoreHook;\r\n\r\n// Export getState for non-hook usage\r\nuseEmployeeStore.getState = (): EmployeeStoreState => {\r\n  const state = baseStore.getState();\r\n  return {\r\n    ...state,\r\n    ...augmentedMethods,\r\n    persistence,\r\n  };\r\n};\r\n\r\nuseEmployeeStore.persistence = persistence;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3153, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { subscribeWithSelector } from 'zustand/middleware';\r\nimport type { Receipt } from './types';\r\nimport type { HistoryEntry } from '../../components/ActivityHistory';\r\nimport { \r\n  findNextAvailableBusinessId, \r\n  generateSystemId, \r\n  getMaxBusinessIdCounter, \r\n  getMaxSystemIdCounter,\r\n  extractCounterFromBusinessId,\r\n  type EntityType \r\n} from '@/lib/id-utils';\r\nimport { asSystemId, asBusinessId, type BusinessId, type SystemId } from '@/lib/id-types';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport { pickAccount, pickPaymentMethod, pickReceiptType, pickTargetGroup } from '@/features/finance/document-lookups';\r\nimport { useEmployeeStore } from '../employees/store';\r\nimport { getCurrentUserSystemId } from '../../contexts/auth-context';\r\n\r\n// API sync helpers\r\nasync function syncToAPI(action: 'create' | 'update' | 'delete', data: any): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' ? '/api/receipts' : `/api/receipts/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.error(`[Receipts API] ${action} failed:`, await response.text());\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`[Receipts API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Helper to get current user info\r\nconst getCurrentUserInfo = () => {\r\n  const currentUserSystemId = getCurrentUserSystemId?.() || 'SYSTEM';\r\n  const employee = useEmployeeStore.getState().data.find(e => e.systemId === currentUserSystemId);\r\n  return {\r\n    systemId: currentUserSystemId,\r\n    name: employee?.fullName || 'H·ªá th·ªëng',\r\n    avatar: employee?.avatarUrl,\r\n  };\r\n};\r\n\r\n// Helper to create history entry\r\nconst createHistoryEntry = (\r\n  action: HistoryEntry['action'],\r\n  description: string,\r\n  metadata?: HistoryEntry['metadata']\r\n): HistoryEntry => ({\r\n  id: crypto.randomUUID(),\r\n  action,\r\n  timestamp: new Date(),\r\n  user: getCurrentUserInfo(),\r\n  description,\r\n  metadata,\r\n});\r\n\r\nconst SYSTEM_AUTHOR = asSystemId('SYSTEM');\r\nconst getCurrentReceiptAuthor = (): SystemId => {\r\n  const userId = getCurrentUserSystemId?.();\r\n  return userId ? asSystemId(userId) : SYSTEM_AUTHOR;\r\n};\r\n\r\nexport type ReceiptInput = Omit<Receipt, 'systemId' | 'id'> & { id?: BusinessId };\r\n\r\ninterface ReceiptStore {\r\n  data: Receipt[];\r\n  businessIdCounter: number;\r\n  systemIdCounter: number;\r\n  initialized: boolean;\r\n  add: (item: ReceiptInput) => Receipt;\r\n  addMultiple: (items: ReceiptInput[]) => void;\r\n  update: (systemId: SystemId, item: Receipt) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  findById: (systemId: SystemId) => Receipt | undefined;\r\n  getActive: () => Receipt[];\r\n  cancel: (systemId: SystemId, reason?: string) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst RECEIPT_ENTITY: EntityType = 'receipts';\r\nconst SYSTEM_ID_PREFIX = 'RECEIPT';\r\nconst BUSINESS_ID_PREFIX = 'PT';\r\nconst BUSINESS_ID_DIGITS = 6;\r\n\r\nconst normalizeReceiptStatus = (status?: Receipt['status']): Receipt['status'] =>\r\n  status === 'cancelled' ? 'cancelled' : 'completed';\r\n\r\nconst ensureReceiptMetadata = (receipt: Receipt): Receipt => {\r\n  let mutated = false;\r\n  const updates: Partial<Receipt> = {};\r\n\r\n  const targetGroup = pickTargetGroup({\r\n    systemId: receipt.payerTypeSystemId,\r\n    name: receipt.payerTypeName,\r\n  });\r\n  if (targetGroup) {\r\n    if (receipt.payerTypeSystemId !== targetGroup.systemId) {\r\n      updates.payerTypeSystemId = targetGroup.systemId;\r\n      mutated = true;\r\n    }\r\n    if (receipt.payerTypeName !== targetGroup.name) {\r\n      updates.payerTypeName = targetGroup.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const paymentMethod = pickPaymentMethod({\r\n    systemId: receipt.paymentMethodSystemId,\r\n    name: receipt.paymentMethodName,\r\n  });\r\n  if (paymentMethod) {\r\n    if (receipt.paymentMethodSystemId !== paymentMethod.systemId) {\r\n      updates.paymentMethodSystemId = paymentMethod.systemId;\r\n      mutated = true;\r\n    }\r\n    if (receipt.paymentMethodName !== paymentMethod.name) {\r\n      updates.paymentMethodName = paymentMethod.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const account = pickAccount({\r\n    accountSystemId: receipt.accountSystemId,\r\n    branchSystemId: receipt.branchSystemId,\r\n    paymentMethodName: paymentMethod?.name ?? receipt.paymentMethodName,\r\n  });\r\n  if (account && receipt.accountSystemId !== account.systemId) {\r\n    updates.accountSystemId = account.systemId;\r\n    mutated = true;\r\n  }\r\n\r\n  const receiptType = pickReceiptType({\r\n    systemId: receipt.paymentReceiptTypeSystemId,\r\n    name: receipt.paymentReceiptTypeName,\r\n  });\r\n  if (receiptType) {\r\n    if (receipt.paymentReceiptTypeSystemId !== receiptType.systemId) {\r\n      updates.paymentReceiptTypeSystemId = receiptType.systemId;\r\n      mutated = true;\r\n    }\r\n    if (receipt.paymentReceiptTypeName !== receiptType.name) {\r\n      updates.paymentReceiptTypeName = receiptType.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  if (!receipt.customerName && receipt.payerName) {\r\n    updates.customerName = receipt.payerName;\r\n    mutated = true;\r\n  }\r\n\r\n  if (!receipt.customerSystemId && receipt.payerSystemId) {\r\n    updates.customerSystemId = receipt.payerSystemId;\r\n    mutated = true;\r\n  }\r\n\r\n  return mutated ? { ...receipt, ...updates } : receipt;\r\n};\r\n\r\nconst backfillReceiptMetadata = (receipts: Receipt[]): Receipt[] => {\r\n  let mutated = false;\r\n  const updated = receipts.map(receipt => {\r\n    const normalized = ensureReceiptMetadata(receipt);\r\n    if (normalized !== receipt) {\r\n      mutated = true;\r\n    }\r\n    return normalized;\r\n  });\r\n  return mutated ? updated : receipts;\r\n};\r\n\r\nconst initialReceipts: Receipt[] = []; // Database is source of truth\r\n\r\nlet systemIdCounter = getMaxSystemIdCounter(initialReceipts, SYSTEM_ID_PREFIX);\r\nlet businessIdCounter = getMaxBusinessIdCounter(initialReceipts, BUSINESS_ID_PREFIX);\r\n\r\nconst getNextSystemId = (): SystemId => {\r\n  systemIdCounter += 1;\r\n  return asSystemId(generateSystemId(RECEIPT_ENTITY, systemIdCounter));\r\n};\r\n\r\nconst ensureReceiptBusinessId = (receipts: Receipt[], provided?: BusinessId | string): BusinessId => {\r\n  if (provided && `${provided}`.trim().length > 0) {\r\n    const normalized = `${provided}`.trim().toUpperCase();\r\n    const parsedCounter = extractCounterFromBusinessId(normalized, BUSINESS_ID_PREFIX);\r\n    if (parsedCounter > businessIdCounter) {\r\n      businessIdCounter = parsedCounter;\r\n    }\r\n    return asBusinessId(normalized);\r\n  }\r\n\r\n  const existingIds = receipts.map(receipt => receipt.id as string).filter(Boolean);\r\n  const { nextId, updatedCounter } = findNextAvailableBusinessId(\r\n    BUSINESS_ID_PREFIX,\r\n    existingIds,\r\n    businessIdCounter,\r\n    BUSINESS_ID_DIGITS\r\n  );\r\n  businessIdCounter = updatedCounter;\r\n  return asBusinessId(nextId);\r\n};\r\n\r\nexport const useReceiptStore = create<ReceiptStore>()(\r\n  subscribeWithSelector(\r\n    (set, get) => ({\r\n      data: initialReceipts,\r\n      businessIdCounter,\r\n      systemIdCounter,\r\n      initialized: false,\r\n      \r\n      add: (item: ReceiptInput): Receipt => {\r\n        let createdReceipt: Receipt | null = null;\r\n        set(state => {\r\n          const systemId = getNextSystemId();\r\n          const id = ensureReceiptBusinessId(state.data, item.id);\r\n          const createdBy = item.createdBy ?? getCurrentReceiptAuthor();\r\n          \r\n          const newReceipt: Receipt = { \r\n            ...item, \r\n            systemId, \r\n            id,\r\n            createdBy,\r\n            createdAt: item.createdAt || new Date().toISOString(),\r\n            status: normalizeReceiptStatus(item.status),\r\n            orderAllocations: item.orderAllocations ?? [],\r\n          };\r\n\r\n          const normalizedReceipt = ensureReceiptMetadata(newReceipt);\r\n          createdReceipt = normalizedReceipt;\r\n\r\n          return { \r\n            data: [...state.data, normalizedReceipt],\r\n            businessIdCounter,\r\n            systemIdCounter\r\n          };\r\n        });\r\n        // Sync to API\r\n        if (createdReceipt) {\r\n          syncToAPI('create', createdReceipt).catch(console.error);\r\n        }\r\n        return createdReceipt!;\r\n      },\r\n      \r\n      addMultiple: (items: ReceiptInput[]) => {\r\n        const created: Receipt[] = [];\r\n        set(state => {\r\n          items.forEach(item => {\r\n            const context = [...state.data, ...created];\r\n            const systemId = getNextSystemId();\r\n            const id = ensureReceiptBusinessId(context, item.id);\r\n            const createdBy = item.createdBy ?? getCurrentReceiptAuthor();\r\n            \r\n            const newReceipt: Receipt = { \r\n              ...item, \r\n              systemId, \r\n              id,\r\n              createdBy,\r\n              createdAt: item.createdAt || new Date().toISOString(),\r\n              status: normalizeReceiptStatus(item.status),\r\n              orderAllocations: item.orderAllocations ?? [],\r\n            };\r\n            created.push(ensureReceiptMetadata(newReceipt));\r\n          });\r\n          \r\n          return { \r\n            data: [...state.data, ...created],\r\n            businessIdCounter,\r\n            systemIdCounter\r\n          };\r\n        });\r\n        // Sync all to API\r\n        created.forEach(receipt => {\r\n          syncToAPI('create', receipt).catch(console.error);\r\n        });\r\n      },\r\n      \r\n      update: (systemId: SystemId, item: Receipt) => {\r\n        const updated = { ...item, status: normalizeReceiptStatus(item.status), updatedAt: new Date().toISOString() };\r\n        set(state => ({\r\n          data: state.data.map(r => r.systemId === systemId ? updated : r),\r\n          businessIdCounter,\r\n          systemIdCounter\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('update', updated).catch(console.error);\r\n      },\r\n      \r\n      remove: (systemId: SystemId) => {\r\n        set(state => ({\r\n          data: state.data.filter(r => r.systemId !== systemId),\r\n          businessIdCounter,\r\n          systemIdCounter\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n      },\r\n      \r\n      findById: (systemId: SystemId) => {\r\n        return get().data.find(r => r.systemId === systemId);\r\n      },\r\n      \r\n      getActive: () => {\r\n        return get().data.filter(r => r.status !== 'cancelled');\r\n      },\r\n      \r\n      cancel: (systemId: SystemId, reason?: string) => {\r\n        const receipt = get().findById(systemId);\r\n        if (receipt && receipt.status !== 'cancelled') {\r\n          const historyEntry = createHistoryEntry(\r\n            'cancelled',\r\n            `ƒê√£ h·ªßy phi·∫øu thu${reason ? `: ${reason}` : ''}`,\r\n            { oldValue: 'Ho√†n th√†nh', newValue: 'ƒê√£ h·ªßy', note: reason }\r\n          );\r\n          \r\n          get().update(systemId, {\r\n            ...receipt,\r\n            status: 'cancelled',\r\n            cancelledAt: new Date().toISOString(),\r\n            activityHistory: [...(receipt.activityHistory || []), historyEntry],\r\n          });\r\n        }\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        try {\r\n          // NOTE: Use React Query hooks for paginated data. This only loads initial batch.\r\n          const response = await fetch('/api/receipts?limit=30');\r\n          if (!response.ok) return;\r\n          const json = await response.json();\r\n          const apiData = json.data || [];\r\n          if (apiData.length > 0) {\r\n            const normalized = backfillReceiptMetadata(apiData.map((receipt: Receipt) => ({\r\n              ...receipt,\r\n              status: normalizeReceiptStatus(receipt.status),\r\n            })));\r\n            const nextSystemCounter = getMaxSystemIdCounter(normalized, SYSTEM_ID_PREFIX);\r\n            const nextBusinessCounter = getMaxBusinessIdCounter(normalized, BUSINESS_ID_PREFIX);\r\n            systemIdCounter = nextSystemCounter;\r\n            businessIdCounter = nextBusinessCounter;\r\n            set({ \r\n              data: normalized, \r\n              systemIdCounter, \r\n              businessIdCounter,\r\n              initialized: true \r\n            });\r\n          } else {\r\n            set({ initialized: true });\r\n          }\r\n        } catch (error) {\r\n          console.error('[Receipts API] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n  )\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3484, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/payments/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport type { Payment } from './types';\r\nimport type { HistoryEntry } from '../../components/ActivityHistory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport {\r\n  extractCounterFromBusinessId,\r\n  findNextAvailableBusinessId,\r\n  generateSystemId,\r\n  getMaxBusinessIdCounter,\r\n  getMaxSystemIdCounter,\r\n  type EntityType,\r\n} from '../../lib/id-utils';\r\nimport { asBusinessId, asSystemId, type BusinessId, type SystemId } from '../../lib/id-types';\r\nimport { pickAccount, pickPaymentMethod, pickPaymentType, pickTargetGroup } from '@/features/finance/document-lookups';\r\nimport { useEmployeeStore } from '../employees/store';\r\nimport { getCurrentUserSystemId } from '../../contexts/auth-context';\r\n\r\n// API sync helpers\r\nasync function syncToAPI(action: 'create' | 'update' | 'delete', data: any): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' ? '/api/payments' : `/api/payments/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.error(`[Payments API] ${action} failed:`, await response.text());\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`[Payments API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Helper to get current user info\r\nconst getCurrentUserInfo = () => {\r\n  const currentUserSystemId = getCurrentUserSystemId?.() || 'SYSTEM';\r\n  const employee = useEmployeeStore.getState().data.find(e => e.systemId === currentUserSystemId);\r\n  return {\r\n    systemId: currentUserSystemId,\r\n    name: employee?.fullName || 'H·ªá th·ªëng',\r\n    avatar: employee?.avatarUrl,\r\n  };\r\n};\r\n\r\n// Helper to create history entry\r\nconst createHistoryEntry = (\r\n  action: HistoryEntry['action'],\r\n  description: string,\r\n  metadata?: HistoryEntry['metadata']\r\n): HistoryEntry => ({\r\n  id: crypto.randomUUID(),\r\n  action,\r\n  timestamp: new Date(),\r\n  user: getCurrentUserInfo(),\r\n  description,\r\n  metadata,\r\n});\r\n\r\nexport type PaymentInput = Omit<Payment, 'systemId' | 'id'> & { id?: BusinessId | string };\r\n\r\ninterface PaymentStore {\r\n  data: Payment[];\r\n  businessIdCounter: number;\r\n  systemIdCounter: number;\r\n  initialized: boolean;\r\n  add: (item: PaymentInput) => Payment;\r\n  addMultiple: (items: PaymentInput[]) => void;\r\n  update: (systemId: SystemId, item: Payment) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  findById: (systemId: SystemId) => Payment | undefined;\r\n  getActive: () => Payment[];\r\n  cancel: (systemId: SystemId, reason?: string) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst PAYMENT_ENTITY: EntityType = 'payments';\r\nconst SYSTEM_ID_PREFIX = 'PAYMENT';\r\nconst BUSINESS_ID_PREFIX = 'PC';\r\nconst BUSINESS_ID_DIGITS = 6;\r\nconst PURCHASE_ORDER_SYSTEM_PREFIX = 'PURCHASE';\r\nconst PURCHASE_ORDER_BUSINESS_PREFIX = 'PO';\r\n\r\nconst normalizePaymentStatus = (status?: Payment['status']): Payment['status'] =>\r\n  status === 'cancelled' ? 'cancelled' : 'completed';\r\n\r\nconst normalizePayment = (payment: Payment): Payment => ({\r\n  ...payment,\r\n  status: normalizePaymentStatus(payment.status),\r\n});\r\n\r\nconst ensurePaymentMetadata = (payment: Payment): Payment => {\r\n  let mutated = false;\r\n  const updates: Partial<Payment> = {};\r\n\r\n  const targetGroup = pickTargetGroup({\r\n    systemId: payment.recipientTypeSystemId,\r\n    name: payment.recipientTypeName,\r\n  });\r\n  if (targetGroup) {\r\n    if (payment.recipientTypeSystemId !== targetGroup.systemId) {\r\n      updates.recipientTypeSystemId = targetGroup.systemId;\r\n      mutated = true;\r\n    }\r\n    if (payment.recipientTypeName !== targetGroup.name) {\r\n      updates.recipientTypeName = targetGroup.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const paymentMethod = pickPaymentMethod({\r\n    systemId: payment.paymentMethodSystemId,\r\n    name: payment.paymentMethodName,\r\n  });\r\n  if (paymentMethod) {\r\n    if (payment.paymentMethodSystemId !== paymentMethod.systemId) {\r\n      updates.paymentMethodSystemId = paymentMethod.systemId;\r\n      mutated = true;\r\n    }\r\n    if (payment.paymentMethodName !== paymentMethod.name) {\r\n      updates.paymentMethodName = paymentMethod.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const account = pickAccount({\r\n    accountSystemId: payment.accountSystemId,\r\n    branchSystemId: payment.branchSystemId,\r\n    paymentMethodName: paymentMethod?.name ?? payment.paymentMethodName,\r\n  });\r\n  if (account && payment.accountSystemId !== account.systemId) {\r\n    updates.accountSystemId = account.systemId;\r\n    mutated = true;\r\n  }\r\n\r\n  const paymentType = pickPaymentType({\r\n    systemId: payment.paymentReceiptTypeSystemId,\r\n    name: payment.paymentReceiptTypeName,\r\n  });\r\n  if (paymentType) {\r\n    if (payment.paymentReceiptTypeSystemId !== paymentType.systemId) {\r\n      updates.paymentReceiptTypeSystemId = paymentType.systemId;\r\n      mutated = true;\r\n    }\r\n    if (payment.paymentReceiptTypeName !== paymentType.name) {\r\n      updates.paymentReceiptTypeName = paymentType.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const normalizedGroupName = targetGroup?.name?.trim().toLowerCase();\r\n  if (normalizedGroupName === 'kh√°ch h√†ng') {\r\n    if (!payment.customerName && payment.recipientName) {\r\n      updates.customerName = payment.recipientName;\r\n      mutated = true;\r\n    }\r\n    if (!payment.customerSystemId && payment.recipientSystemId) {\r\n      updates.customerSystemId = payment.recipientSystemId;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  return mutated ? { ...payment, ...updates } : payment;\r\n};\r\n\r\nconst backfillPaymentMetadata = (payments: Payment[]): Payment[] => {\r\n  let mutated = false;\r\n  const updated = payments.map(payment => {\r\n    const normalized = ensurePaymentMetadata(payment);\r\n    if (normalized !== payment) {\r\n      mutated = true;\r\n    }\r\n    return normalized;\r\n  });\r\n  return mutated ? updated : payments;\r\n};\r\n\r\nconst initialPayments: Payment[] = []; // Database is source of truth\r\n\r\nlet systemIdCounter = getMaxSystemIdCounter(initialPayments, SYSTEM_ID_PREFIX);\r\nlet businessIdCounter = getMaxBusinessIdCounter(initialPayments, BUSINESS_ID_PREFIX);\r\n\r\nconst getNextSystemId = (): SystemId => {\r\n  systemIdCounter += 1;\r\n  return asSystemId(generateSystemId(PAYMENT_ENTITY, systemIdCounter));\r\n};\r\n\r\nconst ensurePaymentBusinessId = (payments: Payment[], provided?: BusinessId | string): BusinessId => {\r\n  if (provided && `${provided}`.trim().length > 0) {\r\n    const normalized = `${provided}`.trim().toUpperCase();\r\n    const parsedCounter = extractCounterFromBusinessId(normalized, BUSINESS_ID_PREFIX);\r\n    if (parsedCounter > businessIdCounter) {\r\n      businessIdCounter = parsedCounter;\r\n    }\r\n    return asBusinessId(normalized);\r\n  }\r\n\r\n  const existingIds = payments.map(payment => payment.id as string).filter(Boolean);\r\n  const { nextId, updatedCounter } = findNextAvailableBusinessId(\r\n    BUSINESS_ID_PREFIX,\r\n    existingIds,\r\n    businessIdCounter,\r\n    BUSINESS_ID_DIGITS\r\n  );\r\n  businessIdCounter = updatedCounter;\r\n  return asBusinessId(nextId);\r\n};\r\n\r\nconst reconcileLinkedDocuments = (payment: Payment): Payment => {\r\n  if (!payment.originalDocumentId) {\r\n    return payment;\r\n  }\r\n\r\n  const normalizedDocId = payment.originalDocumentId.toUpperCase();\r\n  const nextPayment = { ...payment };\r\n\r\n  if (!nextPayment.purchaseOrderSystemId && normalizedDocId.startsWith(PURCHASE_ORDER_SYSTEM_PREFIX)) {\r\n    nextPayment.purchaseOrderSystemId = asSystemId(payment.originalDocumentId);\r\n  }\r\n\r\n  if (!nextPayment.purchaseOrderId && normalizedDocId.startsWith(PURCHASE_ORDER_BUSINESS_PREFIX)) {\r\n    nextPayment.purchaseOrderId = asBusinessId(payment.originalDocumentId);\r\n  }\r\n\r\n  return nextPayment;\r\n};\r\n\r\nconst buildPayment = (input: PaymentInput, existingPayments: Payment[]): Payment => {\r\n  const systemId = getNextSystemId();\r\n  const id = ensurePaymentBusinessId(existingPayments, input.id);\r\n  const basePayment: Payment = {\r\n    ...input,\r\n    systemId,\r\n    id,\r\n    createdAt: input.createdAt || new Date().toISOString(),\r\n    status: normalizePaymentStatus(input.status),\r\n  };\r\n\r\n  return reconcileLinkedDocuments(basePayment);\r\n};\r\n\r\nexport const usePaymentStore = create<PaymentStore>()(\r\n  (set, get) => ({\r\n      data: initialPayments,\r\n      businessIdCounter,\r\n      systemIdCounter,\r\n      initialized: false,\r\n      \r\n      add: (item) => {\r\n        let createdPayment: Payment | null = null;\r\n        set(state => {\r\n          const newPayment = buildPayment(item, state.data);\r\n          createdPayment = newPayment;\r\n          return {\r\n            data: [...state.data, newPayment],\r\n            businessIdCounter,\r\n            systemIdCounter,\r\n          };\r\n        });\r\n        // Sync to API\r\n        if (createdPayment) {\r\n          syncToAPI('create', createdPayment).catch(console.error);\r\n        }\r\n        return createdPayment!;\r\n      },\r\n      \r\n      addMultiple: (items) => {\r\n        const created: Payment[] = [];\r\n        set(state => {\r\n          items.forEach(item => {\r\n            const context = [...state.data, ...created];\r\n            const payment = buildPayment(item, context);\r\n            created.push(payment);\r\n          });\r\n\r\n          return {\r\n            data: [...state.data, ...created],\r\n            businessIdCounter,\r\n            systemIdCounter,\r\n          };\r\n        });\r\n        // Sync all to API\r\n        created.forEach(payment => {\r\n          syncToAPI('create', payment).catch(console.error);\r\n        });\r\n      },\r\n      \r\n      update: (systemId, item) => {\r\n        const updated = reconcileLinkedDocuments({\r\n          ...item,\r\n          systemId,\r\n          status: normalizePaymentStatus(item.status),\r\n          updatedAt: new Date().toISOString(),\r\n        });\r\n        set(state => ({\r\n          data: state.data.map(payment =>\r\n            payment.systemId === systemId ? updated : payment\r\n          ),\r\n          businessIdCounter,\r\n          systemIdCounter,\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('update', updated).catch(console.error);\r\n      },\r\n      \r\n      remove: (systemId) => {\r\n        set(state => ({\r\n          data: state.data.filter(payment => payment.systemId !== systemId),\r\n          businessIdCounter,\r\n          systemIdCounter,\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n      },\r\n      \r\n      findById: (systemId) => {\r\n        return get().data.find(payment => payment.systemId === systemId);\r\n      },\r\n      \r\n      getActive: () => {\r\n        return get().data.filter(payment => payment.status !== 'cancelled');\r\n      },\r\n      \r\n      cancel: (systemId: SystemId, reason?: string) => {\r\n        const payment = get().findById(systemId);\r\n        if (payment && payment.status !== 'cancelled') {\r\n          const historyEntry = createHistoryEntry(\r\n            'cancelled',\r\n            `ƒê√£ h·ªßy phi·∫øu chi${reason ? `: ${reason}` : ''}`,\r\n            { oldValue: 'Ho√†n th√†nh', newValue: 'ƒê√£ h·ªßy', note: reason }\r\n          );\r\n          \r\n          get().update(systemId, {\r\n            ...payment,\r\n            status: 'cancelled',\r\n            cancelledAt: new Date().toISOString(),\r\n            activityHistory: [...(payment.activityHistory || []), historyEntry],\r\n          });\r\n        }\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        try {\r\n          // NOTE: Use React Query hooks for paginated data. This only loads initial batch.\r\n          const response = await fetch('/api/payments?limit=30');\r\n          if (!response.ok) return;\r\n          const json = await response.json();\r\n          const apiData = json.data || [];\r\n          if (apiData.length > 0) {\r\n            const normalized = backfillPaymentMetadata(apiData.map(normalizePayment));\r\n            const nextSystemCounter = getMaxSystemIdCounter(normalized, SYSTEM_ID_PREFIX);\r\n            const nextBusinessCounter = getMaxBusinessIdCounter(normalized, BUSINESS_ID_PREFIX);\r\n            systemIdCounter = nextSystemCounter;\r\n            businessIdCounter = nextBusinessCounter;\r\n            set({ \r\n              data: normalized, \r\n              systemIdCounter, \r\n              businessIdCounter,\r\n              initialized: true \r\n            });\r\n          } else {\r\n            set({ initialized: true });\r\n          }\r\n        } catch (error) {\r\n          console.error('[Payments API] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3820, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/store.ts"],"sourcesContent":["import { createCrudStore, CrudState } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { Branch } from './types';\r\nimport { SystemId } from '../../../lib/id-types';\r\n\r\nexport interface BranchStoreState extends CrudState<Branch> {\r\n  setDefault: (systemId: SystemId) => void;\r\n}\r\n\r\nconst baseStore = createCrudStore<Branch>([], 'branches', {\r\n  apiEndpoint: '/api/branches',\r\n});\r\n\r\nconst setDefault = (systemId: SystemId) => {\r\n  baseStore.setState(state => ({\r\n    data: state.data.map(branch => ({\r\n      ...branch,\r\n      isDefault: branch.systemId === systemId,\r\n    })),\r\n  }));\r\n};\r\n\r\nconst originalAdd = baseStore.getState().add;\r\nconst originalUpdate = baseStore.getState().update;\r\n\r\nbaseStore.setState({\r\n  add: (item: Omit<Branch, 'systemId'>) => {\r\n    const result = originalAdd(item);\r\n    if ((item as Branch).isDefault) {\r\n      setDefault(result.systemId);\r\n    }\r\n    return result;\r\n  },\r\n  update: (systemId: SystemId, updatedItem: Branch) => {\r\n    originalUpdate(systemId, updatedItem);\r\n    if (updatedItem.isDefault) {\r\n      setDefault(systemId);\r\n    }\r\n  },\r\n} as Partial<BranchStoreState>);\r\n\r\nconst enhanceState = (state: CrudState<Branch>): BranchStoreState => ({\r\n  ...state,\r\n  setDefault,\r\n});\r\n\r\ntype BranchStoreHook = (() => BranchStoreState) & {\r\n  getState: () => BranchStoreState;\r\n};\r\n\r\nconst useBranchStoreBase = (() => enhanceState(baseStore())) as BranchStoreHook;\r\n\r\nuseBranchStoreBase.getState = () => enhanceState(baseStore.getState());\r\n\r\nexport const useBranchStore = useBranchStoreBase;\r\n"],"names":[],"mappings":";;;;AAAA;;AASA,MAAM,YAAY,IAAA,6IAAe,EAAS,EAAE,EAAE,YAAY;IACxD,aAAa;AACf;AAEA,MAAM,aAAa,CAAC;IAClB,UAAU,QAAQ,CAAC,CAAA,QAAS,CAAC;YAC3B,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,SAAU,CAAC;oBAC9B,GAAG,MAAM;oBACT,WAAW,OAAO,QAAQ,KAAK;gBACjC,CAAC;QACH,CAAC;AACH;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAC5C,MAAM,iBAAiB,UAAU,QAAQ,GAAG,MAAM;AAElD,UAAU,QAAQ,CAAC;IACjB,KAAK,CAAC;QACJ,MAAM,SAAS,YAAY;QAC3B,IAAI,AAAC,KAAgB,SAAS,EAAE;YAC9B,WAAW,OAAO,QAAQ;QAC5B;QACA,OAAO;IACT;IACA,QAAQ,CAAC,UAAoB;QAC3B,eAAe,UAAU;QACzB,IAAI,YAAY,SAAS,EAAE;YACzB,WAAW;QACb;IACF;AACF;AAEA,MAAM,eAAe,CAAC,QAA+C,CAAC;QACpE,GAAG,KAAK;QACR;IACF,CAAC;AAMD,MAAM,qBAAsB,IAAM,aAAa;AAE/C,mBAAmB,QAAQ,GAAG,IAAM,aAAa,UAAU,QAAQ;AAE5D,MAAM,iBAAiB"}},
    {"offset": {"line": 3868, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-column-header.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { ArrowDown, ArrowUp, ChevronsUpDown } from \"lucide-react\"\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Button } from \"../ui/button\"\r\n\r\ntype SortDirection = 'asc' | 'desc';\r\n\r\ntype DataTableColumnHeaderProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  title: string;\r\n  sortKey?: string;\r\n  isSorted: boolean;\r\n  sortDirection: SortDirection;\r\n  onSort: (key: string) => void;\r\n}\r\n\r\nexport function DataTableColumnHeader({\r\n  title,\r\n  sortKey,\r\n  isSorted,\r\n  sortDirection,\r\n  onSort,\r\n  className,\r\n}: DataTableColumnHeaderProps) {\r\n  if (!sortKey) {\r\n    return <div className={cn(className)}>{title}</div>\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\"flex items-center space-x-2\", className)}>\r\n      <Button\r\n        variant=\"ghost\"\r\n        onClick={() => onSort(sortKey)}\r\n        className=\"-ml-4 h-8 data-[state=open]:bg-accent\"\r\n      >\r\n        <span>{title}</span>\r\n        {isSorted ? (\r\n          sortDirection === \"desc\" ? (\r\n            <ArrowDown className=\"ml-2 h-4 w-4 text-primary\" />\r\n          ) : (\r\n            <ArrowUp className=\"ml-2 h-4 w-4 text-primary\" />\r\n          )\r\n        ) : (\r\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 text-muted-foreground/30\" />\r\n        )}\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AACA;AACA;;;;;AAYO,SAAS,sBAAsB,EACpC,KAAK,EACL,OAAO,EACP,QAAQ,EACR,aAAa,EACb,MAAM,EACN,SAAS,EACkB;IAC3B,IAAI,CAAC,SAAS;QACZ,qBAAO,6LAAC;YAAI,WAAW,IAAA,qHAAE,EAAC;sBAAa;;;;;;IACzC;IAEA,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,+BAA+B;kBAChD,cAAA,6LAAC,wIAAM;YACL,SAAQ;YACR,SAAS,IAAM,OAAO;YACtB,WAAU;;8BAEV,6LAAC;8BAAM;;;;;;gBACN,WACC,kBAAkB,uBAChB,6LAAC,gOAAS;oBAAC,WAAU;;;;;yCAErB,6LAAC,0NAAO;oBAAC,WAAU;;;;;yCAGrB,6LAAC,mPAAc;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAKpC;KAhCgB"}},
    {"offset": {"line": 3948, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype BaseCheckboxProps = React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n\r\ntype CheckboxProps = Omit<BaseCheckboxProps, \"checked\" | \"defaultChecked\"> & {\r\n  checked?: CheckboxPrimitive.CheckedState | undefined\r\n  defaultChecked?: CheckboxPrimitive.CheckedState | undefined\r\n}\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  CheckboxProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AASA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kTACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;kBAE3D,cAAA,6LAAC,oLAA2B;YAC1B,WAAW,IAAA,qHAAE,EAAC;sBAEd,cAAA,6LAAC,gNAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 4004, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/cashbook/columns.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport type { ColumnDef } from \"../../components/data-table/types\";\r\nimport { DataTableColumnHeader } from \"../../components/data-table/data-table-column-header\";\r\nimport { Badge } from \"../../components/ui/badge\";\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Eye, MoreHorizontal, Pencil, XCircle } from \"lucide-react\";\r\nimport { generatePath, ROUTES } from \"../../lib/router\";\r\nimport { formatDate, formatDateCustom, toISODate, toISODateTime } from '../../lib/date-utils';\r\nimport type { Receipt } from \"../receipts/types\";\r\nimport type { Payment } from \"../payments/types\";\r\nimport { Checkbox } from \"../../components/ui/checkbox\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from \"../../components/ui/dropdown-menu\";\r\nimport type { CashAccount } from \"./types\";\r\n\r\nconst formatCurrency = (value: number) => new Intl.NumberFormat('vi-VN').format(value);\r\n\r\ntype CashbookTransaction = (Receipt & { type: 'receipt' }) | (Payment & { type: 'payment' });\r\n\r\nconst isReceipt = (transaction: CashbookTransaction): transaction is Receipt & { type: 'receipt' } => {\r\n  return transaction?.type === 'receipt';\r\n};\r\n\r\nconst formatDateDisplay = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return formatDateCustom(date, \"dd/MM/yyyy\");\r\n};\r\n\r\nconst formatDateTimeDisplay = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return formatDateCustom(date, \"dd/MM/yyyy HH:mm\");\r\n};\r\n\r\nconst getStatusBadge = (status?: Receipt['status'] | Payment['status']) => {\r\n  const normalizedStatus = status === 'cancelled' ? 'cancelled' : 'completed';\r\n  const variants: Record<'completed' | 'cancelled', { label: string; variant: 'default' | 'destructive' }> = {\r\n    completed: { label: 'Ho√†n th√†nh', variant: 'default' },\r\n    cancelled: { label: 'ƒê√£ h·ªßy', variant: 'destructive' },\r\n  };\r\n  const config = variants[normalizedStatus];\r\n  return <Badge variant={config.variant}>{config.label}</Badge>;\r\n};\r\n\r\nexport const getColumns = (\r\n  accounts: CashAccount[],\r\n  onCancel: (systemId: string) => void,\r\n  navigate: (path: string) => void\r\n): ColumnDef<CashbookTransaction>[] => [\r\n  {\r\n    id: \"select\",\r\n    header: ({ isAllPageRowsSelected, isSomePageRowsSelected, onToggleAll }) => (\r\n        <Checkbox\r\n            checked={isAllPageRowsSelected ? true : isSomePageRowsSelected ? \"indeterminate\" : false}\r\n            onCheckedChange={(value) => onToggleAll?.(!!value)}\r\n            aria-label=\"Select all\"\r\n        />\r\n    ),\r\n    cell: ({ onToggleSelect, isSelected }) => (\r\n        <Checkbox\r\n            checked={isSelected}\r\n            onCheckedChange={onToggleSelect}\r\n            aria-label=\"Select row\"\r\n        />\r\n    ),\r\n    size: 48,\r\n    meta: {\r\n        displayName: \"Ch·ªçn\",\r\n        sticky: \"left\",\r\n    }\r\n  },\r\n  {\r\n    id: \"type\",\r\n    accessorKey: \"type\",\r\n    header: \"Lo·∫°i\",\r\n    cell: ({ row }) => {\r\n      const transaction = row;\r\n      if (!transaction) return null;\r\n      return (\r\n        <Badge variant={isReceipt(transaction) ? \"default\" : \"destructive\"}>\r\n          {isReceipt(transaction) ? 'Thu' : 'Chi'}\r\n        </Badge>\r\n      );\r\n    },\r\n    meta: {\r\n      displayName: \"Lo·∫°i phi·∫øu\",\r\n      group: \"Th√¥ng tin chung\"\r\n    },\r\n  },\r\n  {\r\n    id: \"id\",\r\n    accessorKey: \"id\",\r\n    header: ({ sorting, setSorting }) => (\r\n      <DataTableColumnHeader\r\n        title=\"M√£ phi·∫øu\"\r\n        sortKey=\"id\"\r\n        isSorted={sorting?.id === 'id'}\r\n        sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n        onSort={() => setSorting?.((s: any) => ({ id: 'id', desc: s.id === 'id' ? !s.desc : false }))}\r\n      />\r\n    ),\r\n    cell: ({ row }) => {\r\n      const id = row?.id;\r\n      if (!id) return <div className=\"font-medium text-muted-foreground\">N/A</div>;\r\n      return <div className=\"font-medium\">{id}</div>;\r\n    },\r\n    meta: {\r\n      displayName: \"M√£ phi·∫øu\",\r\n      group: \"Th√¥ng tin chung\"\r\n    },\r\n  },\r\n  {\r\n    id: \"date\",\r\n    accessorKey: \"date\",\r\n    header: ({ sorting, setSorting }) => (\r\n      <DataTableColumnHeader\r\n        title=\"Ng√†y\"\r\n        sortKey=\"date\"\r\n        isSorted={sorting?.id === 'date'}\r\n        sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n        onSort={() => setSorting?.((s: any) => ({ id: 'date', desc: s.id === 'date' ? !s.desc : false }))}\r\n      />\r\n    ),\r\n    cell: ({ row }) => row?.date ? formatDateDisplay(row.date) : 'N/A',\r\n    meta: {\r\n      displayName: \"Ng√†y\",\r\n      group: \"Th√¥ng tin chung\"\r\n    },\r\n  },\r\n  {\r\n    id: \"amount\",\r\n    accessorKey: \"amount\",\r\n    header: ({ sorting, setSorting }) => (\r\n      <DataTableColumnHeader\r\n        title=\"S·ªë ti·ªÅn\"\r\n        sortKey=\"amount\"\r\n        isSorted={sorting?.id === 'amount'}\r\n        sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n        onSort={() => setSorting?.((s: any) => ({ id: 'amount', desc: s.id === 'amount' ? !s.desc : false }))}\r\n      />\r\n    ),\r\n    cell: ({ row }) => {\r\n      const transaction = row;\r\n      if (!transaction?.amount) return <div className=\"text-right\">N/A</div>;\r\n      const isReceiptTx = isReceipt(transaction);\r\n      return (\r\n        <div className={`text-right font-medium ${isReceiptTx ? 'text-green-600' : 'text-red-600'}`}>\r\n          {isReceiptTx ? '+' : '-'}{formatCurrency(transaction.amount)} ‚Ç´\r\n        </div>\r\n      );\r\n    },\r\n    meta: {\r\n      displayName: \"S·ªë ti·ªÅn\",\r\n      group: \"Th√¥ng tin chung\"\r\n    },\r\n  },\r\n  {\r\n    id: \"targetName\",\r\n    header: \"Ng∆∞·ªùi n·ªôp/nh·∫≠n\",\r\n    cell: ({ row }) => {\r\n      const transaction = row;\r\n      if (!transaction) return <div>N/A</div>;\r\n      const name = isReceipt(transaction) ? transaction.payerName : transaction.recipientName;\r\n      return (\r\n        <div className=\"max-w-[200px] truncate\" title={name}>\r\n          {name || 'N/A'}\r\n        </div>\r\n      );\r\n    },\r\n    meta: {\r\n      displayName: \"Ng∆∞·ªùi n·ªôp/nh·∫≠n\",\r\n      group: \"Th√¥ng tin giao d·ªãch\"\r\n    },\r\n  },\r\n  {\r\n    id: \"paymentMethodName\",\r\n    accessorKey: \"paymentMethodName\",\r\n    header: \"H√¨nh th·ª©c\",\r\n    cell: ({ row }) => row?.paymentMethodName || 'N/A',\r\n    meta: {\r\n      displayName: \"H√¨nh th·ª©c thanh to√°n\",\r\n      group: \"Th√¥ng tin thanh to√°n\"\r\n    },\r\n  },\r\n  {\r\n    id: \"accountSystemId\",\r\n    accessorKey: \"accountSystemId\",\r\n    header: \"T√†i kho·∫£n\",\r\n    cell: ({ row }) => {\r\n      const account = accounts.find(a => a.systemId === row?.accountSystemId);\r\n      return (\r\n        <div className=\"max-w-[150px] truncate\" title={account?.name}>\r\n          {account?.name || row?.accountSystemId || 'N/A'}\r\n        </div>\r\n      );\r\n    },\r\n    meta: {\r\n      displayName: \"T√†i kho·∫£n\",\r\n      group: \"Th√¥ng tin thanh to√°n\"\r\n    },\r\n  },\r\n  {\r\n    id: \"paymentReceiptTypeName\",\r\n    accessorKey: \"paymentReceiptTypeName\",\r\n    header: \"Lo·∫°i nghi·ªáp v·ª•\",\r\n    cell: ({ row }) => row?.paymentReceiptTypeName || 'N/A',\r\n    meta: {\r\n      displayName: \"Lo·∫°i nghi·ªáp v·ª•\",\r\n      group: \"Ph√¢n lo·∫°i\"\r\n    },\r\n  },\r\n  {\r\n    id: \"status\",\r\n    accessorKey: \"status\",\r\n    header: \"Tr·∫°ng th√°i\",\r\n    cell: ({ row }) => row?.status ? getStatusBadge(row.status) : 'N/A',\r\n    meta: {\r\n      displayName: \"Tr·∫°ng th√°i\",\r\n      group: \"Th√¥ng tin chung\"\r\n    },\r\n  },\r\n  {\r\n    id: \"branchName\",\r\n    accessorKey: \"branchName\",\r\n    header: \"Chi nh√°nh\",\r\n    cell: ({ row }) => row?.branchName || 'N/A',\r\n    meta: {\r\n      displayName: \"Chi nh√°nh\",\r\n      group: \"Th√¥ng tin chi nh√°nh\"\r\n    },\r\n  },\r\n  {\r\n    id: \"description\",\r\n    accessorKey: \"description\",\r\n    header: \"Di·ªÖn gi·∫£i\",\r\n    cell: ({ row }) => (\r\n      <div className=\"max-w-[300px] truncate\" title={row?.description}>\r\n        {row?.description || 'N/A'}\r\n      </div>\r\n    ),\r\n    meta: {\r\n      displayName: \"Di·ªÖn gi·∫£i\",\r\n      group: \"Th√¥ng tin chung\"\r\n    },\r\n  },\r\n  {\r\n    id: \"runningBalance\",\r\n    accessorKey: \"runningBalance\",\r\n    header: \"S·ªë d∆∞\",\r\n    cell: ({ row }) => {\r\n      const balance = row?.runningBalance;\r\n      return balance != null ? (\r\n        <div className=\"text-right\">{formatCurrency(balance)} ‚Ç´</div>\r\n      ) : '-';\r\n    },\r\n    meta: {\r\n      displayName: \"S·ªë d∆∞\",\r\n      group: \"T√†i ch√≠nh\"\r\n    },\r\n  },\r\n  {\r\n    id: \"createdBy\",\r\n    accessorKey: \"createdBy\",\r\n    header: \"Ng∆∞·ªùi t·∫°o\",\r\n    cell: ({ row }) => row?.createdBy || 'N/A',\r\n    meta: {\r\n      displayName: \"Ng∆∞·ªùi t·∫°o\",\r\n      group: \"Th√¥ng tin h·ªá th·ªëng\"\r\n    },\r\n  },\r\n  {\r\n    id: \"createdAt\",\r\n    accessorKey: \"createdAt\",\r\n    header: ({ sorting, setSorting }) => (\r\n      <DataTableColumnHeader\r\n        title=\"Ng√†y t·∫°o\"\r\n        sortKey=\"createdAt\"\r\n        isSorted={sorting?.id === 'createdAt'}\r\n        sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n        onSort={() => setSorting?.((s: any) => ({ id: 'createdAt', desc: s.id === 'createdAt' ? !s.desc : false }))}\r\n      />\r\n    ),\r\n    cell: ({ row }) => row?.createdAt ? formatDateTimeDisplay(row.createdAt) : 'N/A',\r\n    meta: {\r\n      displayName: \"Ng√†y t·∫°o\",\r\n      group: \"Th√¥ng tin h·ªá th·ªëng\"\r\n    },\r\n  },\r\n  {\r\n    id: \"actions\",\r\n    header: () => <div className=\"text-center\">H√†nh ƒë·ªông</div>,\r\n    cell: ({ row }) => {\r\n      const transaction = row;\r\n      const isCancelled = transaction.status === 'cancelled';\r\n      const isReceiptTx = isReceipt(transaction);\r\n      const viewRoute = isReceiptTx ? ROUTES.FINANCE.RECEIPT_VIEW : ROUTES.FINANCE.PAYMENT_VIEW;\r\n      const editRoute = isReceiptTx ? ROUTES.FINANCE.RECEIPT_EDIT : ROUTES.FINANCE.PAYMENT_EDIT;\r\n\r\n      return (\r\n        <div className=\"flex items-center justify-center gap-0.5\">\r\n          {isCancelled ? (\r\n            <div className=\"text-xs text-muted-foreground px-2\">ƒê√£ h·ªßy</div>\r\n          ) : (\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  className=\"h-7 w-7 p-0\"\r\n                  onClick={(e) => e.stopPropagation()}\r\n                >\r\n                  <MoreHorizontal className=\"h-4 w-4\" />\r\n                </Button>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                <DropdownMenuItem\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    navigate(generatePath(editRoute, { systemId: transaction.systemId }));\r\n                  }}\r\n                >\r\n                  Ch·ªânh s·ª≠a\r\n                </DropdownMenuItem>\r\n                <DropdownMenuSeparator />\r\n                <DropdownMenuItem\r\n                  className=\"text-destructive focus:text-destructive\"\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    onCancel(transaction.systemId);\r\n                  }}\r\n                >\r\n                  H·ªßy phi·∫øu\r\n                </DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          )}\r\n        </div>\r\n      );\r\n    },\r\n    size: 90,\r\n    meta: {\r\n      displayName: \"H√†nh ƒë·ªông\",\r\n      sticky: \"right\",\r\n    },\r\n  },\r\n];\r\n\r\nexport type { CashbookTransaction };\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4500, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 4607, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/skeleton.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Card, CardContent } from \"../ui/card\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\ninterface SkeletonProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Skeleton - Base skeleton loading component\r\n */\r\nexport function Skeleton({ className, ...props }: SkeletonProps) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\n/**\r\n * MobileCardSkeleton - Loading placeholder for mobile cards\r\n */\r\nexport function MobileCardSkeleton({ \r\n  count = 3,\r\n  className \r\n}: { \r\n  count?: number | undefined;\r\n  className?: string | undefined;\r\n}) {\r\n  return (\r\n    <>\r\n      {Array.from({ length: count }).map((_, i) => (\r\n        <Card key={i} className={cn(\"overflow-hidden\", className)}>\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-start space-x-3\">\r\n              {/* Avatar skeleton */}\r\n              <Skeleton className=\"h-12 w-12 rounded-full flex-shrink-0\" />\r\n              \r\n              {/* Content skeleton */}\r\n              <div className=\"flex-1 space-y-2\">\r\n                <Skeleton className=\"h-4 w-3/4\" />\r\n                <Skeleton className=\"h-3 w-1/2\" />\r\n                <div className=\"space-y-1.5 pt-2\">\r\n                  <Skeleton className=\"h-3 w-full\" />\r\n                  <Skeleton className=\"h-3 w-2/3\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Footer skeleton */}\r\n            <div className=\"flex items-center justify-between mt-3 pt-3 border-t\">\r\n              <Skeleton className=\"h-5 w-20\" />\r\n              <Skeleton className=\"h-3 w-24\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\n/**\r\n * TableSkeleton - Loading placeholder for tables\r\n */\r\nexport function TableSkeleton({ \r\n  rows = 5,\r\n  columns = 4 \r\n}: { \r\n  rows?: number;\r\n  columns?: number;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {Array.from({ length: rows }).map((_, rowIndex) => (\r\n        <div key={rowIndex} className=\"flex items-center space-x-4\">\r\n          {Array.from({ length: columns }).map((_, colIndex) => (\r\n            <div key={colIndex}>\r\n              <Skeleton \r\n                className={cn(\r\n                  \"h-9\",\r\n                  colIndex === 0 ? \"w-1/4\" : \"flex-1\"\r\n                )}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * CardGridSkeleton - Loading placeholder for card grids\r\n */\r\nexport function CardGridSkeleton({\r\n  count = 4,\r\n  columns = 4\r\n}: {\r\n  count?: number;\r\n  columns?: number;\r\n}) {\r\n  return (\r\n    <div className={`grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-${columns}`}>\r\n      {Array.from({ length: count }).map((_, i) => (\r\n        <Card key={i}>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-start justify-between mb-2\">\r\n              <Skeleton className=\"h-5 w-5 rounded\" />\r\n              <Skeleton className=\"h-4 w-16\" />\r\n            </div>\r\n            <Skeleton className=\"h-8 w-24 mb-2\" />\r\n            <Skeleton className=\"h-3 w-full\" />\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * FormSkeleton - Loading placeholder for forms\r\n */\r\nexport function FormSkeleton({ fields = 6 }: { fields?: number }) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {Array.from({ length: fields }).map((_, i) => (\r\n        <div key={i} className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-32\" />\r\n          <Skeleton className=\"h-9 w-full\" />\r\n        </div>\r\n      ))}\r\n      <div className=\"flex justify-end space-x-2 pt-4\">\r\n        <Skeleton className=\"h-9 w-24\" />\r\n        <Skeleton className=\"h-9 w-24\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ChartSkeleton - Loading placeholder for charts\r\n */\r\nexport function ChartSkeleton({ height = \"300px\" }: { height?: string }) {\r\n  return (\r\n    <div className=\"w-full\" style={{ height }}>\r\n      <div className=\"flex items-end justify-between h-full space-x-2 pb-4\">\r\n        {[40, 70, 55, 80, 60, 90, 45].map((h, i) => (\r\n          <div key={i} className=\"flex-1\" style={{ height: `${h}%` }}>\r\n            <Skeleton className=\"w-full h-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"flex justify-between pt-2\">\r\n        {Array.from({ length: 7 }).map((_, i) => (\r\n          <div key={i}>\r\n            <Skeleton className=\"h-3 w-8\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * PageSkeleton - Loading placeholder for full pages\r\n */\r\nexport function PageSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"space-y-2\">\r\n        <Skeleton className=\"h-8 w-48\" />\r\n        <Skeleton className=\"h-4 w-96\" />\r\n      </div>\r\n      \r\n      {/* Actions */}\r\n      <div className=\"flex justify-between\">\r\n        <Skeleton className=\"h-9 w-64\" />\r\n        <Skeleton className=\"h-9 w-32\" />\r\n      </div>\r\n      \r\n      {/* Content */}\r\n      <CardGridSkeleton count={6} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5055, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/touch-button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Button } from \"../ui/button\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nconst touchButtonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-12 px-4 py-2 min-w-touch\", // Mobile-first: 48px height\r\n        sm: \"h-9 rounded-md px-3 min-w-touch\",\r\n        lg: \"h-14 rounded-md px-8 min-w-touch-lg\", // 56px height for large touch\r\n        xl: \"h-16 rounded-md px-10 min-w-touch-lg\", // 64px height for extra large\r\n        icon: \"h-12 w-12\", // Square touch target\r\n        \"icon-sm\": \"h-9 w-10\",\r\n        \"icon-lg\": \"h-14 w-14\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface TouchButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof touchButtonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\n/**\r\n * TouchButton - Mobile-optimized button with minimum 44px touch targets\r\n * Follows Apple HIG and Material Design guidelines for touch interfaces\r\n */\r\nconst TouchButton = React.forwardRef<HTMLButtonElement, TouchButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    return (\r\n      <Button\r\n        className={cn(touchButtonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nTouchButton.displayName = \"TouchButton\";\r\n\r\nexport { TouchButton, touchButtonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,sBAAsB,IAAA,0KAAG,EAC7B,0RACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF;;;CAGC,GACD,MAAM,4BAAc,2KAAgB,MAClC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,qBACE,6LAAC,wIAAM;QACL,WAAW,IAAA,qHAAE,EAAC,oBAAoB;YAAE;YAAS;YAAM;QAAU;QAC7D,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 5127, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/empty-state.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { LucideIcon } from \"lucide-react\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { TouchButton } from \"./touch-button\";\r\n\r\ninterface EmptyStateProps {\r\n  icon?: LucideIcon | undefined;\r\n  title: string;\r\n  description?: string | undefined;\r\n  action?: React.ReactNode | undefined;\r\n  className?: string | undefined;\r\n  size?: \"sm\" | \"md\" | \"lg\" | undefined;\r\n}\r\n\r\n/**\r\n * EmptyState - Professional empty state component\r\n * Use cases:\r\n * - No search results\r\n * - Empty lists\r\n * - No data to display\r\n * - First-time user experience\r\n */\r\nexport function EmptyState({\r\n  icon: Icon,\r\n  title,\r\n  description,\r\n  action,\r\n  className,\r\n  size = \"md\",\r\n}: EmptyStateProps) {\r\n  const sizeClasses = {\r\n    sm: {\r\n      container: \"py-8\",\r\n      icon: \"h-12 w-12 mb-3\",\r\n      title: \"text-base\",\r\n      description: \"text-sm\",\r\n    },\r\n    md: {\r\n      container: \"py-12\",\r\n      icon: \"h-16 w-16 mb-4\",\r\n      title: \"text-lg\",\r\n      description: \"text-sm\",\r\n    },\r\n    lg: {\r\n      container: \"py-16\",\r\n      icon: \"h-20 w-20 mb-6\",\r\n      title: \"text-xl\",\r\n      description: \"text-base\",\r\n    },\r\n  };\r\n\r\n  const classes = sizeClasses[size];\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"flex flex-col items-center justify-center px-4 text-center\",\r\n        classes.container,\r\n        className\r\n      )}\r\n    >\r\n      {Icon && (\r\n        <Icon\r\n          className={cn(\r\n            \"text-muted-foreground\",\r\n            classes.icon\r\n          )}\r\n          strokeWidth={1.5}\r\n        />\r\n      )}\r\n      \r\n      <h3 className={cn(\"font-semibold mb-2\", classes.title)}>\r\n        {title}\r\n      </h3>\r\n      \r\n      {description && (\r\n        <p\r\n          className={cn(\r\n            \"text-muted-foreground mb-6 max-w-sm\",\r\n            classes.description\r\n          )}\r\n        >\r\n          {description}\r\n        </p>\r\n      )}\r\n      \r\n      {action && <div className=\"mt-2\">{action}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * SearchEmptyState - Specialized empty state for search results\r\n */\r\nexport function SearchEmptyState({\r\n  searchQuery,\r\n  onClear,\r\n}: {\r\n  searchQuery: string;\r\n  onClear?: () => void;\r\n}) {\r\n  return (\r\n    <EmptyState\r\n      title=\"Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£\"\r\n      description={`Kh√¥ng c√≥ k·∫øt qu·∫£ n√†o ph√π h·ª£p v·ªõi \"${searchQuery}\". Th·ª≠ t√¨m ki·∫øm v·ªõi t·ª´ kh√≥a kh√°c.`}\r\n      action={\r\n        onClear && (\r\n          <TouchButton variant=\"outline\" onClick={onClear}>\r\n            X√≥a b·ªô l·ªçc\r\n          </TouchButton>\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;AAmBO,SAAS,WAAW,EACzB,MAAM,IAAI,EACV,KAAK,EACL,WAAW,EACX,MAAM,EACN,SAAS,EACT,OAAO,IAAI,EACK;IAChB,MAAM,cAAc;QAClB,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;QACA,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;QACA,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;IACF;IAEA,MAAM,UAAU,WAAW,CAAC,KAAK;IAEjC,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,8DACA,QAAQ,SAAS,EACjB;;YAGD,sBACC,6LAAC;gBACC,WAAW,IAAA,qHAAE,EACX,yBACA,QAAQ,IAAI;gBAEd,aAAa;;;;;;0BAIjB,6LAAC;gBAAG,WAAW,IAAA,qHAAE,EAAC,sBAAsB,QAAQ,KAAK;0BAClD;;;;;;YAGF,6BACC,6LAAC;gBACC,WAAW,IAAA,qHAAE,EACX,uCACA,QAAQ,WAAW;0BAGpB;;;;;;YAIJ,wBAAU,6LAAC;gBAAI,WAAU;0BAAQ;;;;;;;;;;;;AAGxC;KAnEgB;AAwET,SAAS,iBAAiB,EAC/B,WAAW,EACX,OAAO,EAIR;IACC,qBACE,6LAAC;QACC,OAAM;QACN,aAAa,CAAC,kCAAkC,EAAE,YAAY,iCAAiC,CAAC;QAChG,QACE,yBACE,6LAAC,0JAAW;YAAC,SAAQ;YAAU,SAAS;sBAAS;;;;;;;;;;;AAO3D;MApBgB"}},
    {"offset": {"line": 5234, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"group border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-9 px-4 text-left align-middle font-medium text-foreground [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center whitespace-nowrap\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-4 py-1 align-middle whitespace-nowrap [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center\", \r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,2KAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,kLACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6IACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,2KAAgB,QAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 5371, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\ntype BaseSelectProps = React.ComponentPropsWithoutRef<typeof SelectPrimitive.Root>\r\n\r\ntype SelectProps = Omit<BaseSelectProps, \"value\" | \"defaultValue\"> & {\r\n  value?: string | undefined\r\n  defaultValue?: string | undefined\r\n}\r\n\r\nconst Select = ({ value, defaultValue, ...props }: SelectProps) => {\r\n  const controlledProps: Partial<BaseSelectProps> = {}\r\n\r\n  if (value !== undefined) {\r\n    controlledProps.value = value\r\n  }\r\n\r\n  if (defaultValue !== undefined) {\r\n    controlledProps.defaultValue = defaultValue\r\n  }\r\n\r\n  return <SelectPrimitive.Root {...props} {...controlledProps} />\r\n}\r\nSelect.displayName = SelectPrimitive.Root.displayName\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => {\r\n  const modalId = React.useId();\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const { zIndex } = useModal(modalId, isOpen, 'select');\r\n\r\n  React.useEffect(() => {\r\n    const content = ref && 'current' in ref ? ref.current : null;\r\n    if (!content) return;\r\n\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'data-state') {\r\n          const target = mutation.target as HTMLElement;\r\n          const state = target.getAttribute('data-state');\r\n          setIsOpen(state === 'open');\r\n        }\r\n      });\r\n    });\r\n\r\n    observer.observe(content, { attributes: true, attributeFilter: ['data-state'] });\r\n\r\n    return () => observer.disconnect();\r\n  }, [ref]);\r\n\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  );\r\n})\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5662, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-pagination.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport {\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ChevronsLeft,\r\n  ChevronsRight,\r\n} from \"lucide-react\"\r\n\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"../ui/select\"\r\n\r\ninterface DataTablePaginationProps {\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  pageCount: number;\r\n  rowCount: number;\r\n  selectedRowCount: number;\r\n  setPageIndex: (index: number) => void;\r\n  setPageSize: (size: number) => void;\r\n  canPreviousPage: boolean;\r\n  canNextPage: boolean;\r\n}\r\n\r\nexport function DataTablePagination({\r\n  pageIndex,\r\n  pageSize,\r\n  pageCount,\r\n  rowCount,\r\n  selectedRowCount,\r\n  setPageIndex,\r\n  setPageSize,\r\n  canPreviousPage,\r\n  canNextPage,\r\n}: DataTablePaginationProps) {\r\n  // Generate page numbers to display\r\n  const getPageNumbers = () => {\r\n    const pages: (number | 'ellipsis')[] = [];\r\n    const showEllipsis = pageCount > 7;\r\n    \r\n    if (!showEllipsis) {\r\n      // Show all pages if 7 or fewer\r\n      for (let i = 0; i < pageCount; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      // Always show first page\r\n      pages.push(0);\r\n      \r\n      if (pageIndex <= 3) {\r\n        // Near start: 1 2 3 4 5 ... last\r\n        for (let i = 1; i < 5; i++) {\r\n          pages.push(i);\r\n        }\r\n        pages.push('ellipsis');\r\n        pages.push(pageCount - 1);\r\n      } else if (pageIndex >= pageCount - 4) {\r\n        // Near end: 1 ... N-4 N-3 N-2 N-1 N\r\n        pages.push('ellipsis');\r\n        for (let i = pageCount - 5; i < pageCount; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else {\r\n        // Middle: 1 ... current-1 current current+1 ... last\r\n        pages.push('ellipsis');\r\n        pages.push(pageIndex - 1);\r\n        pages.push(pageIndex);\r\n        pages.push(pageIndex + 1);\r\n        pages.push('ellipsis');\r\n        pages.push(pageCount - 1);\r\n      }\r\n    }\r\n    \r\n    return pages;\r\n  };\r\n  \r\n  const pageNumbers = getPageNumbers();\r\n  \r\n  return (\r\n    <div className=\"flex items-center justify-between px-2\">\r\n      <div className=\"flex-1 text-sm text-muted-foreground\">\r\n        {selectedRowCount} c·ªßa{\" \"}\r\n        {rowCount} d√≤ng ƒë∆∞·ª£c ch·ªçn.\r\n      </div>\r\n      <div className=\"flex items-center space-x-6 lg:space-x-8\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <p className=\"text-sm font-medium\">S·ªë d√≤ng m·ªói trang</p>\r\n          <Select\r\n            value={`${pageSize}`}\r\n            onValueChange={(value) => {\r\n              setPageSize(Number(value))\r\n            }}\r\n          >\r\n            <SelectTrigger className=\"w-[70px]\">\r\n              <SelectValue placeholder={`${pageSize}`} />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {[10, 20, 30, 40, 50].map((size) => (\r\n                <SelectItem key={size} value={`${size}`}>\r\n                  {size}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-1\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"px-3\"\r\n            onClick={() => setPageIndex(pageIndex - 1)}\r\n            disabled={!canPreviousPage}\r\n          >\r\n            Previous\r\n          </Button>\r\n          \r\n          {pageNumbers.map((page, idx) => {\r\n            if (page === 'ellipsis') {\r\n              return (\r\n                <span key={`ellipsis-${idx}`} className=\"px-2 text-muted-foreground\">\r\n                  ...\r\n                </span>\r\n              );\r\n            }\r\n            \r\n            return (\r\n              <Button\r\n                key={page}\r\n                variant={pageIndex === page ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"w-9 p-0\"\r\n                onClick={() => setPageIndex(page)}\r\n              >\r\n                {page + 1}\r\n              </Button>\r\n            );\r\n          })}\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"px-3\"\r\n            onClick={() => setPageIndex(pageIndex + 1)}\r\n            disabled={!canNextPage}\r\n          >\r\n            Next\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAQA;AACA;;;;AAoBO,SAAS,oBAAoB,EAClC,SAAS,EACT,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,gBAAgB,EAChB,YAAY,EACZ,WAAW,EACX,eAAe,EACf,WAAW,EACc;IACzB,mCAAmC;IACnC,MAAM,iBAAiB;QACrB,MAAM,QAAiC,EAAE;QACzC,MAAM,eAAe,YAAY;QAEjC,IAAI,CAAC,cAAc;YACjB,+BAA+B;YAC/B,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,IAAK;gBAClC,MAAM,IAAI,CAAC;YACb;QACF,OAAO;YACL,yBAAyB;YACzB,MAAM,IAAI,CAAC;YAEX,IAAI,aAAa,GAAG;gBAClB,iCAAiC;gBACjC,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;oBAC1B,MAAM,IAAI,CAAC;gBACb;gBACA,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;YACzB,OAAO,IAAI,aAAa,YAAY,GAAG;gBACrC,oCAAoC;gBACpC,MAAM,IAAI,CAAC;gBACX,IAAK,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW,IAAK;oBAC9C,MAAM,IAAI,CAAC;gBACb;YACF,OAAO;gBACL,qDAAqD;gBACrD,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;gBACvB,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;gBACvB,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;YACzB;QACF;QAEA,OAAO;IACT;IAEA,MAAM,cAAc;IAEpB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;oBACZ;oBAAiB;oBAAK;oBACtB;oBAAS;;;;;;;0BAEZ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAAsB;;;;;;0CACnC,6LAAC,wIAAM;gCACL,OAAO,GAAG,UAAU;gCACpB,eAAe,CAAC;oCACd,YAAY,OAAO;gCACrB;;kDAEA,6LAAC,+IAAa;wCAAC,WAAU;kDACvB,cAAA,6LAAC,6IAAW;4CAAC,aAAa,GAAG,UAAU;;;;;;;;;;;kDAEzC,6LAAC,+IAAa;kDACX;4CAAC;4CAAI;4CAAI;4CAAI;4CAAI;yCAAG,CAAC,GAAG,CAAC,CAAC,qBACzB,6LAAC,4IAAU;gDAAY,OAAO,GAAG,MAAM;0DACpC;+CADc;;;;;;;;;;;;;;;;;;;;;;kCAQzB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,wIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,aAAa,YAAY;gCACxC,UAAU,CAAC;0CACZ;;;;;;4BAIA,YAAY,GAAG,CAAC,CAAC,MAAM;gCACtB,IAAI,SAAS,YAAY;oCACvB,qBACE,6LAAC;wCAA6B,WAAU;kDAA6B;uCAA1D,CAAC,SAAS,EAAE,KAAK;;;;;gCAIhC;gCAEA,qBACE,6LAAC,wIAAM;oCAEL,SAAS,cAAc,OAAO,YAAY;oCAC1C,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,aAAa;8CAE3B,OAAO;mCANH;;;;;4BASX;0CAEA,6LAAC,wIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,aAAa,YAAY;gCACxC,UAAU,CAAC;0CACZ;;;;;;;;;;;;;;;;;;;;;;;;AAOX;KAhIgB"}},
    {"offset": {"line": 5873, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/sticky-scrollbar.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { cn } from '../../lib/utils';\r\n\r\ninterface StickyScrollbarProps {\r\n  /** Ref to the scrollable element (table container) */\r\n  targetRef: React.RefObject<HTMLDivElement | null>;\r\n  /** Additional CSS classes */\r\n  className?: string | undefined;\r\n}\r\n\r\n/**\r\n * Sticky Horizontal Scrollbar Component\r\n * \r\n * Creates a sticky scrollbar at the bottom of the viewport that syncs with\r\n * the table's horizontal scroll. This allows users to scroll horizontally\r\n * without having to scroll to the bottom of the table first.\r\n */\r\nexport function StickyScrollbar({ targetRef, className }: StickyScrollbarProps) {\r\n  const scrollbarRef = React.useRef<HTMLDivElement>(null);\r\n  const [isVisible, setIsVisible] = React.useState(false);\r\n  const [scrollbarStyle, setScrollbarStyle] = React.useState<React.CSSProperties>({});\r\n  const [isMounted, setIsMounted] = React.useState(false);\r\n  const [updateTrigger, setUpdateTrigger] = React.useState(0); // ‚úÖ Force update trigger\r\n\r\n  // Force re-render after mount to ensure refs are available\r\n  React.useEffect(() => {\r\n    setIsMounted(true);\r\n  }, []);\r\n\r\n  // ‚úÖ Force update when target element changes size (e.g., columns added/removed)\r\n  React.useEffect(() => {\r\n    if (!isMounted || !targetRef.current) return;\r\n    \r\n    const targetElement = targetRef.current;\r\n    \r\n    // Watch for changes to table width/scrollWidth\r\n    const mutationObserver = new MutationObserver(() => {\r\n      setUpdateTrigger(prev => prev + 1);\r\n    });\r\n    \r\n    mutationObserver.observe(targetElement, {\r\n      attributes: true,\r\n      childList: true,\r\n      subtree: true,\r\n    });\r\n    \r\n    return () => {\r\n      mutationObserver.disconnect();\r\n    };\r\n  }, [targetRef, isMounted]);\r\n\r\n  React.useEffect(() => {\r\n    if (!isMounted) return;\r\n    \r\n    const targetElement = targetRef.current;\r\n    const scrollbarElement = scrollbarRef.current;\r\n    \r\n    if (!targetElement || !scrollbarElement) return;\r\n\r\n    let animationFrameId: number;\r\n\r\n    // Check if horizontal scrollbar is needed and update position\r\n    const updateScrollbar = () => {\r\n      const hasHorizontalScroll = targetElement.scrollWidth > targetElement.clientWidth;\r\n      setIsVisible(hasHorizontalScroll);\r\n      \r\n      if (hasHorizontalScroll) {\r\n        // Get the bounding rect to position the scrollbar correctly\r\n        const rect = targetElement.getBoundingClientRect();\r\n        \r\n        // Set the scrollbar position and width to match the table VIEWPORT\r\n        setScrollbarStyle({\r\n          left: `${rect.left}px`,\r\n          width: `${rect.width}px`,\r\n        });\r\n        \r\n        // ‚úÖ FIX: Set the inner content width to match table's FULL scroll width\r\n        // This allows the scrollbar to scroll the full distance\r\n        const scrollContent = scrollbarElement.firstElementChild as HTMLDivElement;\r\n        if (scrollContent) {\r\n          scrollContent.style.width = `${targetElement.scrollWidth}px`;\r\n          scrollContent.style.height = '1px'; // Ensure height for scrollbar\r\n        }\r\n      }\r\n    };\r\n\r\n    // Sync scroll position: sticky scrollbar -> table\r\n    const handleStickyScroll = () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      animationFrameId = requestAnimationFrame(() => {\r\n        if (targetElement.scrollLeft !== scrollbarElement.scrollLeft) {\r\n          targetElement.scrollLeft = scrollbarElement.scrollLeft;\r\n        }\r\n      });\r\n    };\r\n\r\n    // Sync scroll position: table -> sticky scrollbar\r\n    const handleTableScroll = () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      animationFrameId = requestAnimationFrame(() => {\r\n        if (scrollbarElement.scrollLeft !== targetElement.scrollLeft) {\r\n          scrollbarElement.scrollLeft = targetElement.scrollLeft;\r\n        }\r\n      });\r\n    };\r\n\r\n    // Initial update\r\n    updateScrollbar();\r\n\r\n    // Add event listeners\r\n    scrollbarElement.addEventListener('scroll', handleStickyScroll, { passive: true });\r\n    targetElement.addEventListener('scroll', handleTableScroll, { passive: true });\r\n    window.addEventListener('resize', updateScrollbar, { passive: true });\r\n\r\n    // Re-check on content changes\r\n    const resizeObserver = new ResizeObserver(updateScrollbar);\r\n    resizeObserver.observe(targetElement);\r\n\r\n    return () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      scrollbarElement.removeEventListener('scroll', handleStickyScroll);\r\n      targetElement.removeEventListener('scroll', handleTableScroll);\r\n      window.removeEventListener('resize', updateScrollbar);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [targetRef, isMounted, updateTrigger]); // ‚úÖ Re-run when updateTrigger changes\r\n\r\n  // Always render but conditionally show with visibility\r\n  return (\r\n    <div\r\n      ref={scrollbarRef}\r\n      className={cn(\r\n        \"fixed bottom-0 z-[100] overflow-x-auto overflow-y-hidden\",\r\n        \"h-3 bg-muted/90 backdrop-blur-sm border-t border-border shadow-[0_-2px_12px_rgba(0,0,0,0.08)]\",\r\n        \"transition-opacity duration-200\",\r\n        isVisible ? \"opacity-100\" : \"opacity-0 pointer-events-none\",\r\n        className\r\n      )}\r\n      style={scrollbarStyle}\r\n    >\r\n      {/* Invisible content div to create scrollbar width */}\r\n      <div className=\"h-px pointer-events-none\" />\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6040, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/responsive-data-table.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Trash2, ChevronDown, ChevronsRight } from \"lucide-react\";\r\nimport { useBreakpoint } from \"../../contexts/breakpoint-context\";\r\nimport { Card, CardContent } from \"../ui/card\";\r\nimport { MobileCardSkeleton } from \"../mobile/skeleton\";\r\nimport { EmptyState } from \"../mobile/empty-state\";\r\nimport { TouchButton } from \"../mobile/touch-button\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"../ui/table\";\r\nimport { DataTablePagination } from \"./data-table-pagination\";\r\nimport { Button } from \"../ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"../ui/dropdown-menu\";\r\nimport { StickyScrollbar } from \"./sticky-scrollbar\";\r\nimport type { ColumnDef } from './types';\r\n\r\nexport interface BulkAction<TData> {\r\n  label: string;\r\n  icon?: React.ComponentType<{ className?: string }>;\r\n  onSelect: (selectedRows: TData[]) => void;\r\n}\r\n\r\ninterface DesktopDataTableProps<TData extends { systemId: string }> {\r\n  columns: ColumnDef<TData>[];\r\n  data: TData[];\r\n  pageCount: number;\r\n  pagination: { pageIndex: number; pageSize: number };\r\n  setPagination: (updater: React.SetStateAction<{ pageIndex: number; pageSize: number }>) => void;\r\n  rowCount: number;\r\n  rowSelection: Record<string, boolean>;\r\n  setRowSelection: (updater: React.SetStateAction<Record<string, boolean>>) => void;\r\n  onBulkDelete?: (() => void) | undefined;\r\n  showBulkDeleteButton?: boolean | undefined;\r\n  bulkActions?: BulkAction<TData>[] | undefined;\r\n  pkgxBulkActions?: BulkAction<TData>[] | undefined;\r\n  bulkActionButtons?: React.ReactNode | undefined;\r\n  allSelectedRows: TData[];\r\n  renderSubComponent?: ((row: TData) => React.ReactNode) | undefined;\r\n  expanded: Record<string, boolean>;\r\n  setExpanded: (updater: React.SetStateAction<Record<string, boolean>>) => void;\r\n  sorting: { id: string; desc: boolean };\r\n  setSorting: (updater: React.SetStateAction<{ id: string; desc: boolean }>) => void;\r\n  columnVisibility: Record<string, boolean>;\r\n  setColumnVisibility: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\r\n  columnOrder: string[];\r\n  setColumnOrder: React.Dispatch<React.SetStateAction<string[]>>;\r\n  pinnedColumns: string[];\r\n  setPinnedColumns: React.Dispatch<React.SetStateAction<string[]>>;\r\n  onRowClick?: ((row: TData) => void) | undefined;\r\n  getRowStyle?: ((row: TData) => React.CSSProperties) | undefined;\r\n  className?: string | undefined;\r\n}\r\n\r\ninterface ResponsiveDataTableProps<TData extends { systemId: string }> {\r\n  // Required props\r\n  columns: ColumnDef<TData>[];\r\n  data: TData[];\r\n  \r\n  // Mobile-specific\r\n  renderMobileCard?: ((row: TData, index: number) => React.ReactNode) | undefined;\r\n  mobileCardClassName?: string | undefined;\r\n  autoGenerateMobileCards?: boolean | undefined;\r\n  mobileVirtualized?: boolean | undefined;\r\n  mobileRowHeight?: number | undefined;\r\n  mobileListHeight?: number | undefined;\r\n  \r\n  // States\r\n  isLoading?: boolean | undefined;\r\n  emptyTitle?: string | undefined;\r\n  emptyDescription?: string | undefined;\r\n  emptyAction?: React.ReactNode | undefined;\r\n  \r\n  // Desktop DataTable props\r\n  pageCount: number;\r\n  pagination: { pageIndex: number; pageSize: number };\r\n  setPagination: (updater: React.SetStateAction<{ pageIndex: number; pageSize: number }>) => void;\r\n  rowCount: number;\r\n  rowSelection?: Record<string, boolean> | undefined;\r\n  setRowSelection?: ((updater: React.SetStateAction<Record<string, boolean>>) => void) | undefined;\r\n  onBulkDelete?: (() => void) | undefined;\r\n  showBulkDeleteButton?: boolean | undefined;\r\n  bulkActions?: BulkAction<TData>[] | undefined;\r\n  pkgxBulkActions?: BulkAction<TData>[] | undefined;\r\n  bulkActionButtons?: React.ReactNode | undefined;\r\n  allSelectedRows?: TData[] | undefined;\r\n  renderSubComponent?: ((row: TData) => React.ReactNode) | undefined;\r\n  expanded?: Record<string, boolean> | undefined;\r\n  setExpanded?: ((updater: React.SetStateAction<Record<string, boolean>>) => void) | undefined;\r\n  sorting: { id: string; desc: boolean };\r\n  setSorting: (updater: React.SetStateAction<{ id: string; desc: boolean }>) => void;\r\n  columnVisibility?: Record<string, boolean> | undefined;\r\n  setColumnVisibility?: React.Dispatch<React.SetStateAction<Record<string, boolean>>> | undefined;\r\n  columnOrder?: string[] | undefined;\r\n  setColumnOrder?: React.Dispatch<React.SetStateAction<string[]>> | undefined;\r\n  pinnedColumns?: string[] | undefined;\r\n  setPinnedColumns?: React.Dispatch<React.SetStateAction<string[]>> | undefined;\r\n  onRowClick?: ((row: TData) => void) | undefined;\r\n  getRowStyle?: ((row: TData) => React.CSSProperties) | undefined;\r\n  className?: string | undefined;\r\n}\r\n\r\n/**\r\n * ResponsiveDataTable - Auto-adaptive data display component\r\n * \r\n * Desktop (>= 768px): Full-featured DataTable with sorting, filtering, bulk actions\r\n * Mobile (< 768px): Card-based layout with touch-friendly interactions\r\n * \r\n * Features:\r\n * - Automatic responsive switching\r\n * - Loading states (skeleton)\r\n * - Empty states\r\n * - Mobile pagination\r\n * - Preserves functionality across breakpoints\r\n * \r\n * @example\r\n * <ResponsiveDataTable\r\n *   columns={columns}\r\n *   data={employees}\r\n *   renderMobileCard={(employee) => <EmployeeCard employee={employee} />}\r\n *   pagination={pagination}\r\n *   setPagination={setPagination}\r\n *   // ... other props\r\n * />\r\n */\r\nexport function ResponsiveDataTable<TData extends { systemId: string }>({\r\n  columns,\r\n  data,\r\n  renderMobileCard,\r\n  autoGenerateMobileCards = true,\r\n  mobileCardClassName,\r\n  isLoading = false,\r\n  emptyTitle = \"Kh√¥ng c√≥ d·ªØ li·ªáu\",\r\n  emptyDescription,\r\n  emptyAction,\r\n  mobileVirtualized = false,\r\n  mobileRowHeight = 180,\r\n  mobileListHeight = 600,\r\n  pageCount,\r\n  pagination,\r\n  setPagination,\r\n  rowCount,\r\n  rowSelection = {},\r\n  setRowSelection = () => {},\r\n  onBulkDelete,\r\n  showBulkDeleteButton = true,\r\n  bulkActions,\r\n  pkgxBulkActions,\r\n  bulkActionButtons,\r\n  allSelectedRows = [],\r\n  renderSubComponent,\r\n  expanded = {},\r\n  setExpanded = () => {},\r\n  sorting,\r\n  setSorting,\r\n  columnVisibility = {},\r\n  setColumnVisibility = () => {},\r\n  columnOrder = [],\r\n  setColumnOrder = () => {},\r\n  pinnedColumns = [],\r\n  setPinnedColumns = () => {},\r\n  onRowClick,\r\n  getRowStyle,\r\n  className,\r\n}: ResponsiveDataTableProps<TData>) {\r\n  const { isMobile } = useBreakpoint();\r\n  const autoCardColumns = React.useMemo(() => {\r\n    return columns\r\n      .filter(column => {\r\n        if (!column.id) return false;\r\n        if (['select', 'control', 'actions', 'expander'].includes(column.id)) return false;\r\n        if (columnVisibility && columnVisibility[column.id] === false) return false;\r\n        const meta = column.meta as Record<string, any> | undefined;\r\n        if (meta?.hideOnMobileCard) return false;\r\n        return true;\r\n      })\r\n      .slice(0, 6);\r\n  }, [columns, columnVisibility]);\r\n\r\n  const getColumnLabel = React.useCallback((column: ColumnDef<TData>) => {\r\n    if (typeof column.header === 'string') return column.header;\r\n    const meta = column.meta as Record<string, any> | undefined;\r\n    if (meta?.displayName) return meta.displayName;\r\n    return column.id || '';\r\n  }, []);\r\n\r\n  const renderColumnValue = React.useCallback((column: ColumnDef<TData>, row: TData) => {\r\n    if (typeof column.cell === 'function') {\r\n      return column.cell({\r\n        row,\r\n        isSelected: false,\r\n        isExpanded: false,\r\n        onToggleSelect: () => {},\r\n        onToggleExpand: () => {},\r\n      } as any);\r\n    }\r\n    if (column.accessorKey) {\r\n      const value = (row as any)[column.accessorKey as string];\r\n      if (value === undefined || value === null) return '‚Äî';\r\n      if (React.isValidElement(value)) return value;\r\n      return String(value);\r\n    }\r\n    return '‚Äî';\r\n  }, []);\r\n\r\n  const autoRenderMobileCard = React.useCallback((row: TData) => (\r\n    <MobileCardWrapper>\r\n      <div className=\"space-y-3 text-sm\">\r\n        {autoCardColumns.map(column => (\r\n          <div key={column.id}>\r\n            <div className=\"text-xs uppercase text-muted-foreground font-semibold\">\r\n              {getColumnLabel(column)}\r\n            </div>\r\n            <div className=\"text-base font-medium text-foreground\">\r\n              {renderColumnValue(column, row)}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </MobileCardWrapper>\r\n  ), [autoCardColumns, getColumnLabel, renderColumnValue]);\r\n\r\n  const hasAutoCardSupport = autoGenerateMobileCards !== false && autoCardColumns.length > 0;\r\n  const cardRenderer = renderMobileCard ?? (hasAutoCardSupport ? autoRenderMobileCard : undefined);\r\n  const shouldRenderMobileCards = Boolean(isMobile && cardRenderer);\r\n\r\n  const desktopProps: DesktopDataTableProps<TData> = {\r\n    columns,\r\n    data,\r\n    pageCount,\r\n    pagination,\r\n    setPagination,\r\n    rowCount,\r\n    rowSelection,\r\n    setRowSelection,\r\n    onBulkDelete,\r\n    showBulkDeleteButton,\r\n    bulkActions,\r\n    pkgxBulkActions,\r\n    bulkActionButtons,\r\n    allSelectedRows,\r\n    renderSubComponent,\r\n    expanded,\r\n    setExpanded,\r\n    sorting,\r\n    setSorting,\r\n    columnVisibility,\r\n    setColumnVisibility,\r\n    columnOrder,\r\n    setColumnOrder,\r\n    pinnedColumns,\r\n    setPinnedColumns,\r\n    onRowClick,\r\n    getRowStyle,\r\n    className,\r\n  };\r\n\r\n  // Loading state\r\n  if (isLoading) {\r\n    return shouldRenderMobileCards ? (\r\n      <MobileCardSkeleton count={pagination.pageSize || 10} className={mobileCardClassName} />\r\n    ) : (\r\n      <div className={cn(\"space-y-3\", className)}>\r\n        {Array.from({ length: pagination.pageSize || 10 }).map((_, i) => (\r\n          <div key={i} className=\"h-16 bg-muted animate-pulse rounded\" />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Empty state - only for mobile card mode\r\n  if (data.length === 0 && shouldRenderMobileCards) {\r\n    return (\r\n      <EmptyState\r\n        title={emptyTitle}\r\n        description={emptyDescription}\r\n        action={emptyAction}\r\n        className={className}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Mobile card layout\r\n  if (shouldRenderMobileCards && cardRenderer) {\r\n    if (mobileVirtualized) {\r\n      return (\r\n        <div\r\n          className={cn('pb-4', className)}\r\n          style={{ maxHeight: mobileListHeight, overflowY: 'auto' }}\r\n        >\r\n          {data.map((row, index) => (\r\n            <div\r\n              key={row.systemId}\r\n              className={mobileCardClassName}\r\n              style={{ minHeight: mobileRowHeight }}\r\n            >\r\n              {cardRenderer(row, index)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className={cn(\"space-y-3 pb-4\", className)}>\r\n        {data.map((row, index) => (\r\n          <div key={row.systemId} className={mobileCardClassName}>\r\n            {cardRenderer(row, index)}\r\n          </div>\r\n        ))}\r\n\r\n        {/* Mobile Pagination */}\r\n        {pageCount > 1 && (\r\n          <div className=\"flex items-center justify-between pt-4 border-t\">\r\n            <TouchButton\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setPagination(p => ({ ...p, pageIndex: Math.max(0, p.pageIndex - 1) }))}\r\n              disabled={pagination.pageIndex === 0}\r\n            >\r\n              Tr∆∞·ªõc\r\n            </TouchButton>\r\n            \r\n            <div className=\"flex flex-col items-center gap-1\">\r\n              <span className=\"text-sm font-medium\">\r\n                Trang {pagination.pageIndex + 1} / {pageCount}\r\n              </span>\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                {rowCount} k·∫øt qu·∫£\r\n              </span>\r\n            </div>\r\n            \r\n            <TouchButton\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setPagination(p => ({ ...p, pageIndex: Math.min(pageCount - 1, p.pageIndex + 1) }))}\r\n              disabled={pagination.pageIndex >= pageCount - 1}\r\n            >\r\n              Sau\r\n            </TouchButton>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Desktop table layout\r\n  return <DesktopDataTable {...desktopProps} />;\r\n}\r\n\r\nfunction DesktopDataTable<TData extends { systemId: string }>({\r\n  columns,\r\n  data,\r\n  pageCount,\r\n  pagination,\r\n  setPagination,\r\n  rowCount,\r\n  rowSelection,\r\n  setRowSelection,\r\n  onBulkDelete,\r\n  showBulkDeleteButton = true,\r\n  bulkActions,\r\n  pkgxBulkActions,\r\n  bulkActionButtons,\r\n  allSelectedRows,\r\n  renderSubComponent,\r\n  expanded,\r\n  setExpanded,\r\n  sorting,\r\n  setSorting,\r\n  columnVisibility,\r\n  setColumnVisibility,\r\n  columnOrder,\r\n  setColumnOrder,\r\n  pinnedColumns,\r\n  setPinnedColumns,\r\n  onRowClick,\r\n  getRowStyle,\r\n  className,\r\n}: DesktopDataTableProps<TData>) {\r\n  const numSelected = Object.keys(rowSelection).length;\r\n  const isAllPageRowsSelected = data.length > 0 && data.every(row => rowSelection[row.systemId]);\r\n  const isSomePageRowsSelected = !isAllPageRowsSelected && data.some(row => rowSelection[row.systemId]);\r\n  const hasData = data?.length > 0;\r\n  const [columnWidths, setColumnWidths] = React.useState<Record<string, number>>({});\r\n  const stickyCellBg = 'var(--sticky-column-bg, rgba(255, 255, 255, 1))';\r\n  const stickyHeaderBg = 'var(--sticky-column-header-bg, var(--muted))';\r\n\r\n  const handleToggleAllPageRows = (value: boolean) => {\r\n    const newSelection = { ...rowSelection };\r\n    data.forEach(row => {\r\n      if (value) {\r\n        newSelection[row.systemId] = true;\r\n      } else {\r\n        delete newSelection[row.systemId];\r\n      }\r\n    });\r\n    setRowSelection(newSelection);\r\n  };\r\n\r\n  const displayColumns = React.useMemo(() => {\r\n    const expanderColumn: ColumnDef<TData> | null = renderSubComponent\r\n      ? {\r\n          id: 'expander',\r\n          header: () => null,\r\n          cell: ({ isExpanded, onToggleExpand }) => (\r\n            <div className=\"flex items-center justify-center\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onToggleExpand();\r\n                }}\r\n                className=\"h-8 w-8\"\r\n              >\r\n                <ChevronsRight className={cn('h-4 w-4 transition-transform', isExpanded && 'rotate-90')} />\r\n              </Button>\r\n            </div>\r\n          ),\r\n          size: 60,\r\n          meta: { displayName: 'M·ªü r·ªông', sticky: 'left' },\r\n        }\r\n      : null;\r\n\r\n    const allConfigurableColumns = expanderColumn ? [expanderColumn, ...columns] : [...columns];\r\n\r\n    const visibleMasterCols = allConfigurableColumns.filter(col => {\r\n      if (col.id === 'expander') return true;\r\n      const isVisible = columnVisibility[col.id];\r\n      return isVisible !== false;\r\n    });\r\n\r\n    const normalizedCols = visibleMasterCols.map(col => {\r\n      if (['select', 'control'].includes(col.id)) {\r\n        return {\r\n          ...col,\r\n          meta: { ...col.meta, sticky: 'left' as const },\r\n        };\r\n      }\r\n\r\n      if (col.id === 'actions') {\r\n        return {\r\n          ...col,\r\n          meta: { ...col.meta, sticky: 'right' as const },\r\n        };\r\n      }\r\n\r\n      return col;\r\n    });\r\n\r\n    const staticLeftCols = normalizedCols.filter(c => {\r\n      const meta = c.meta as any;\r\n      return meta?.sticky === 'left' && !['select', 'control', 'expander'].includes(c.id);\r\n    });\r\n    const staticRightCols = normalizedCols.filter(c => (c.meta as any)?.sticky === 'right');\r\n    const controlCols = normalizedCols.filter(c => ['select', 'control', 'expander'].includes(c.id));\r\n    const bodyCols = normalizedCols.filter(c => {\r\n      const meta = c.meta as any;\r\n      return !meta?.sticky && !['select', 'control', 'expander'].includes(c.id);\r\n    });\r\n\r\n    const orderedBodyCols = [...bodyCols].sort((a, b) => {\r\n      const indexA = columnOrder.indexOf(a.id);\r\n      const indexB = columnOrder.indexOf(b.id);\r\n      if (indexA === -1 && indexB === -1) return 0;\r\n      if (indexA === -1) return 1;\r\n      if (indexB === -1) return -1;\r\n      return indexA - indexB;\r\n    });\r\n\r\n    const userPinnedCols = orderedBodyCols\r\n      .filter(col => pinnedColumns.includes(col.id))\r\n      .map(col => ({\r\n        ...col,\r\n        meta: { ...col.meta, sticky: 'left' as const }\r\n      }));\r\n\r\n    const nonPinnedBodyCols = orderedBodyCols.filter(c => !pinnedColumns.includes(c.id));\r\n\r\n    return [\r\n      ...controlCols,\r\n      ...staticLeftCols,\r\n      ...userPinnedCols,\r\n      ...nonPinnedBodyCols,\r\n      ...staticRightCols,\r\n    ] as ColumnDef<TData>[];\r\n  }, [columns, columnVisibility, columnOrder, pinnedColumns, renderSubComponent]);\r\n\r\n  const leftStickyColumns = React.useMemo(() => displayColumns.filter(c => (c.meta as any)?.sticky === 'left'), [displayColumns]);\r\n  const rightStickyColumns = React.useMemo(() => displayColumns.filter(c => (c.meta as any)?.sticky === 'right'), [displayColumns]);\r\n\r\n  const getColumnWidth = React.useCallback((column: ColumnDef<TData>) => {\r\n    return column.size ?? columnWidths[column.id] ?? ((column.meta as any)?.minWidth ?? 140);\r\n  }, [columnWidths]);\r\n\r\n  const leftOffsets = React.useMemo(() => {\r\n      let offset = 0;\r\n      return leftStickyColumns.map(c => {\r\n          const width = getColumnWidth(c);\r\n          const currentOffset = offset;\r\n          offset += width;\r\n          return currentOffset;\r\n      });\r\n  }, [leftStickyColumns, getColumnWidth]);\r\n\r\n  const rightOffsets = React.useMemo(() => {\r\n      let offset = 0;\r\n      const reversedOffsets = [...rightStickyColumns].reverse().map(c => {\r\n          const width = getColumnWidth(c);\r\n          const currentOffset = offset;\r\n          offset += width;\r\n          return currentOffset;\r\n      });\r\n      return reversedOffsets.reverse();\r\n  }, [rightStickyColumns, getColumnWidth]);\r\n\r\n  const tableContainerRef = React.useRef<HTMLDivElement>(null);\r\n  const headerScrollRef = React.useRef<HTMLDivElement>(null);\r\n  const bodyTableRef = React.useRef<HTMLTableElement>(null);\r\n  const headerTableRef = React.useRef<HTMLTableElement>(null);\r\n  const fallbackTableRef = React.useCallback((node: HTMLTableElement | null) => {\r\n    headerTableRef.current = node;\r\n    bodyTableRef.current = node;\r\n  }, []);\r\n\r\n  const syncScroll = (source: 'header' | 'body') => {\r\n    if (!headerScrollRef.current || !tableContainerRef.current) return;\r\n\r\n    if (source === 'body') {\r\n      headerScrollRef.current.scrollLeft = tableContainerRef.current.scrollLeft;\r\n    } else {\r\n      tableContainerRef.current.scrollLeft = headerScrollRef.current.scrollLeft;\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!hasData) return;\r\n    if (!headerTableRef.current) return;\r\n\r\n    const syncWidths = () => {\r\n      const bodyTable = bodyTableRef.current;\r\n      const headerTable = headerTableRef.current;\r\n      if (!headerTable) return;\r\n\r\n      const bodyRow = bodyTable?.querySelector('tbody tr:first-child');\r\n      const headerRow = headerTable.querySelector('thead tr:last-child');\r\n      if (!headerRow) return;\r\n\r\n      const bodyCells = bodyRow ? Array.from(bodyRow.querySelectorAll('td')) : [];\r\n      const headerCells = Array.from(headerRow.querySelectorAll('th'));\r\n      const nextWidthMap: Record<string, number> = {};\r\n\r\n      displayColumns.forEach((column, index) => {\r\n        const sourceCell = bodyCells[index];\r\n        const fallbackCell = headerCells[index];\r\n        const width = sourceCell?.getBoundingClientRect().width || fallbackCell?.getBoundingClientRect().width;\r\n        if (width && headerCells[index]) {\r\n          headerCells[index].style.width = `${width}px`;\r\n          headerCells[index].style.minWidth = `${width}px`;\r\n          headerCells[index].style.maxWidth = `${width}px`;\r\n          nextWidthMap[column.id] = width;\r\n        }\r\n      });\r\n\r\n      if (bodyTable) {\r\n        headerTable.style.width = `${bodyTable.getBoundingClientRect().width}px`;\r\n      }\r\n\r\n      setColumnWidths(prev => {\r\n        let changed = false;\r\n        const updated = { ...prev };\r\n        Object.entries(nextWidthMap).forEach(([key, width]) => {\r\n          if (prev[key] !== width) {\r\n            changed = true;\r\n            updated[key] = width;\r\n          }\r\n        });\r\n        return changed ? updated : prev;\r\n      });\r\n    };\r\n\r\n    syncWidths();\r\n    window.addEventListener('resize', syncWidths);\r\n\r\n    const resizeObserver = new ResizeObserver(syncWidths);\r\n    if (bodyTableRef.current) {\r\n      resizeObserver.observe(bodyTableRef.current);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', syncWidths);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [data, displayColumns, hasData]);\r\n\r\n  const renderHeaderRow = (isSticky: boolean) => (\r\n    <TableRow className=\"h-9\">\r\n      {displayColumns.map((column, colIndex) => {\r\n        const stickyMeta = isSticky ? (column.meta as any)?.sticky : undefined;\r\n        const hasFixedSize = column.size !== undefined;\r\n        const fallbackMinWidth = (column.meta as any)?.minWidth ?? 140;\r\n\r\n        const style: React.CSSProperties = {};\r\n\r\n        if (hasFixedSize) {\r\n          style.width = column.size;\r\n          style.minWidth = column.size;\r\n          style.maxWidth = column.size;\r\n        } else {\r\n          style.minWidth = fallbackMinWidth;\r\n        }\r\n\r\n        let thClassName = \"bg-muted whitespace-nowrap\";\r\n\r\n        const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1;\r\n        const isFirstRightSticky = stickyMeta === 'right' && colIndex === displayColumns.length - rightStickyColumns.length;\r\n\r\n        if (isSticky && stickyMeta === 'left') {\r\n          const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id);\r\n          if (stickyIndex !== -1) {\r\n            (style as any).position = 'sticky';\r\n            (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n            (style as any).top = 0;\r\n            (style as any).backgroundColor = stickyHeaderBg;\r\n            thClassName = cn(thClassName, \"z-30 bg-muted shadow-sm\");\r\n          }\r\n        } else if (isSticky && stickyMeta === 'right') {\r\n          const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id);\r\n          if (stickyIndex !== -1) {\r\n            (style as any).position = 'sticky';\r\n            (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n            (style as any).top = 0;\r\n            (style as any).backgroundColor = stickyHeaderBg;\r\n            thClassName = cn(thClassName, \"z-30 bg-muted shadow-[-2px_0_4px_-2px_rgba(0,0,0,0.1)]\");\r\n          }\r\n        }\r\n\r\n        if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n          thClassName = cn(thClassName, \"px-2 text-center\");\r\n        }\r\n\r\n        return (\r\n          <TableHead\r\n            key={column.id}\r\n            style={style}\r\n            className={cn(thClassName, {\r\n              \"border-r\": isSticky && isLastLeftSticky,\r\n            })}\r\n          >\r\n            {typeof column.header === 'function'\r\n              // @ts-ignore\r\n              ? column.header({\r\n                  isAllPageRowsSelected,\r\n                  isSomePageRowsSelected,\r\n                  onToggleAll: handleToggleAllPageRows,\r\n                  sorting,\r\n                  setSorting,\r\n                })\r\n              : column.header}\r\n          </TableHead>\r\n        );\r\n      })}\r\n    </TableRow>\r\n  );\r\n\r\n  return (\r\n    <div className={cn(\"flex flex-col w-full\", className)}>\r\n      {hasData ? (\r\n        <>\r\n          <div\r\n            ref={headerScrollRef}\r\n            onScroll={() => syncScroll('header')}\r\n            className=\"sticky top-32 z-30 overflow-x-auto rounded-t-md border border-b-0 bg-muted [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n          >\r\n            <Table ref={headerTableRef}>\r\n              <TableHeader className=\"bg-muted shadow-sm\">\r\n                {numSelected > 0 && (\r\n                  <tr className=\"absolute inset-x-0 top-0 z-50 h-9 bg-muted/95 backdrop-blur-sm border-b shadow-md\">\r\n                    <th className=\"sticky left-0 z-[60] bg-muted/95 backdrop-blur-sm px-3 w-[48px]\">\r\n                      {columns.find(c => c.id === 'select') &&\r\n                        typeof columns.find(c => c.id === 'select')!.header === 'function' &&\r\n                        // @ts-ignore\r\n                        columns.find(c => c.id === 'select')!.header({\r\n                          isAllPageRowsSelected,\r\n                          isSomePageRowsSelected,\r\n                          onToggleAll: handleToggleAllPageRows,\r\n                        })\r\n                      }\r\n                    </th>\r\n                    <th className=\"sticky left-[48px] z-[60] h-9 bg-muted/95 backdrop-blur-sm\">\r\n                      <div className=\"flex items-center gap-3 px-4\">\r\n                        <span className=\"text-sm font-medium\">{numSelected} m·ª•c ƒë√£ ch·ªçn</span>\r\n                        {bulkActions && bulkActions.length > 0 && (\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                Action\r\n                                <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"start\">\r\n                              {bulkActions.map((action, index) => (\r\n                                <DropdownMenuItem\r\n                                  key={index}\r\n                                  onSelect={() => action.onSelect(allSelectedRows)}\r\n                                  disabled={(action as any).disabled}\r\n                                >\r\n                                  {action.icon && <action.icon className=\"mr-2 h-4 w-4\" />}\r\n                                  {action.label}\r\n                                </DropdownMenuItem>\r\n                              ))}\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        )}\r\n                        {pkgxBulkActions && pkgxBulkActions.length > 0 && (\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                PKGX\r\n                                <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"start\">\r\n                              {pkgxBulkActions.map((action, index) => (\r\n                                <DropdownMenuItem\r\n                                  key={index}\r\n                                  onSelect={() => action.onSelect(allSelectedRows)}\r\n                                  disabled={(action as any).disabled}\r\n                                  className={(action as any).variant === 'destructive' ? 'text-destructive focus:text-destructive' : ''}\r\n                                >\r\n                                  {action.icon && <action.icon className=\"mr-2 h-4 w-4\" />}\r\n                                  {action.label}\r\n                                </DropdownMenuItem>\r\n                              ))}\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        )}\r\n                        {bulkActionButtons}\r\n                      </div>\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n                {renderHeaderRow(true)}\r\n              </TableHeader>\r\n            </Table>\r\n          </div>\r\n\r\n          <div\r\n            ref={tableContainerRef}\r\n            onScroll={() => syncScroll('body')}\r\n            className=\"rounded-b-md border bg-background overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n          >\r\n            <Table ref={bodyTableRef}>\r\n              <TableBody>\r\n                {data.map((row, rowIndex) => (\r\n                  <React.Fragment key={`${row.systemId}-${rowIndex}`}>\r\n                    <TableRow\r\n                      data-state={rowSelection[row.systemId] && \"selected\"}\r\n                      onClick={() => onRowClick?.(row)}\r\n                      className={cn('group', onRowClick && 'cursor-pointer')}\r\n                      style={getRowStyle?.(row)}\r\n                    >\r\n                      {displayColumns.map((column, colIndex) => {\r\n                        const isInteractiveColumn = ['select', 'control', 'actions', 'expander'].includes(column.id);\r\n\r\n                        const stickyMeta = (column.meta as any)?.sticky;\r\n                        const hasFixedSize = column.size !== undefined;\r\n                        const fallbackMinWidth = (column.meta as any)?.minWidth ?? 140;\r\n\r\n                        const style: React.CSSProperties = {};\r\n\r\n                        if (hasFixedSize) {\r\n                          style.width = column.size;\r\n                          style.minWidth = column.size;\r\n                          style.maxWidth = column.size;\r\n                        } else {\r\n                          style.minWidth = fallbackMinWidth;\r\n                        }\r\n\r\n                        let tdClassName = \"\";\r\n\r\n                        const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1;\r\n\r\n                        if (stickyMeta === 'left') {\r\n                          const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id);\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n                            const rowBgColor = getRowStyle?.(row)?.backgroundColor;\r\n                            (style as any).backgroundColor = rowBgColor || stickyCellBg;\r\n                            tdClassName = cn(\r\n                              \"z-20 shadow-[2px_0_6px_rgba(0,0,0,0.05)]\",\r\n                              \"bg-muted text-foreground group-hover:bg-muted group-data-[state=selected]:bg-muted\"\r\n                            );\r\n                          }\r\n                        } else if (stickyMeta === 'right') {\r\n                          const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id);\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n                            const rowBgColor = getRowStyle?.(row)?.backgroundColor;\r\n                            (style as any).backgroundColor = rowBgColor || stickyCellBg;\r\n                            tdClassName = cn(\r\n                              \"z-20\",\r\n                              \"bg-muted text-foreground group-hover:bg-muted group-data-[state=selected]:bg-muted shadow-[-2px_0_6px_rgba(0,0,0,0.08)]\"\r\n                            );\r\n                          }\r\n                        }\r\n\r\n                        if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n                          tdClassName = cn(tdClassName, \"px-2 text-center\");\r\n                        }\r\n\r\n                        return (\r\n                          <TableCell\r\n                            key={column.id}\r\n                            style={style}\r\n                            className={cn(tdClassName, {\r\n                              \"border-r\": isLastLeftSticky,\r\n                            })}\r\n                            onClick={isInteractiveColumn ? (e) => e.stopPropagation() : undefined}\r\n                          >\r\n                            {column.cell({\r\n                              row,\r\n                              isSelected: !!rowSelection[row.systemId],\r\n                              isExpanded: !!expanded[row.systemId],\r\n                              onToggleSelect: (value) => {\r\n                                setRowSelection(prev => {\r\n                                  const newSelection = { ...prev };\r\n                                  if (value) {\r\n                                    newSelection[row.systemId] = true;\r\n                                  } else {\r\n                                    delete newSelection[row.systemId];\r\n                                  }\r\n                                  return newSelection;\r\n                                });\r\n                              },\r\n                              onToggleExpand: () => setExpanded(prev => ({ ...prev, [row.systemId]: !prev[row.systemId] })),\r\n                            })}\r\n                          </TableCell>\r\n                        );\r\n                      })}\r\n                    </TableRow>\r\n                    {expanded[row.systemId] && renderSubComponent && (\r\n                      <TableRow>\r\n                        <TableCell colSpan={displayColumns.length} className=\"p-0\">\r\n                          {renderSubComponent(row)}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    )}\r\n                  </React.Fragment>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div\r\n          ref={tableContainerRef}\r\n          className=\"rounded-md border bg-background overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n        >\r\n          <Table ref={fallbackTableRef}>\r\n            <TableHeader className=\"bg-muted shadow-sm\">\r\n              {renderHeaderRow(true)}\r\n            </TableHeader>\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell colSpan={displayColumns.length} className=\"h-24 text-center\">\r\n                  Kh√¥ng c√≥ d·ªØ li·ªáu.\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex-shrink-0 border-t bg-background px-6 py-3\">\r\n        <DataTablePagination\r\n          pageIndex={pagination.pageIndex}\r\n          pageSize={pagination.pageSize}\r\n          pageCount={pageCount}\r\n          setPageIndex={(index) => setPagination(p => ({ ...p, pageIndex: index }))}\r\n          setPageSize={(size) => setPagination({ pageIndex: 0, pageSize: size })}\r\n          canPreviousPage={pagination.pageIndex > 0}\r\n          canNextPage={pagination.pageIndex < pageCount - 1}\r\n          rowCount={rowCount}\r\n          selectedRowCount={numSelected}\r\n        />\r\n      </div>\r\n\r\n      <StickyScrollbar targetRef={tableContainerRef} />\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * MobileCardWrapper - Helper component for consistent mobile card styling\r\n */\r\nexport function MobileCardWrapper({\r\n  children,\r\n  onClick,\r\n  className,\r\n}: {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <Card\r\n      className={cn(\r\n        \"hover:shadow-md transition-shadow\",\r\n        onClick && \"cursor-pointer\",\r\n        className\r\n      )}\r\n      onClick={onClick}\r\n    >\r\n      <CardContent className=\"p-4\">\r\n        {children}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AAMA;;;;;;;;;;;;;;;;AA+GO,SAAS,oBAAwD,EACtE,OAAO,EACP,IAAI,EACJ,gBAAgB,EAChB,0BAA0B,IAAI,EAC9B,mBAAmB,EACnB,YAAY,KAAK,EACjB,aAAa,kBAAkB,EAC/B,gBAAgB,EAChB,WAAW,EACX,oBAAoB,KAAK,EACzB,kBAAkB,GAAG,EACrB,mBAAmB,GAAG,EACtB,SAAS,EACT,UAAU,EACV,aAAa,EACb,QAAQ,EACR,eAAe,CAAC,CAAC,EACjB,kBAAkB,KAAO,CAAC,EAC1B,YAAY,EACZ,uBAAuB,IAAI,EAC3B,WAAW,EACX,eAAe,EACf,iBAAiB,EACjB,kBAAkB,EAAE,EACpB,kBAAkB,EAClB,WAAW,CAAC,CAAC,EACb,cAAc,KAAO,CAAC,EACtB,OAAO,EACP,UAAU,EACV,mBAAmB,CAAC,CAAC,EACrB,sBAAsB,KAAO,CAAC,EAC9B,cAAc,EAAE,EAChB,iBAAiB,KAAO,CAAC,EACzB,gBAAgB,EAAE,EAClB,mBAAmB,KAAO,CAAC,EAC3B,UAAU,EACV,WAAW,EACX,SAAS,EACuB;;IAChC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,sJAAa;IAClC,MAAM,kBAAkB,wKAAa;wDAAC;YACpC,OAAO,QACJ,MAAM;gEAAC,CAAA;oBACN,IAAI,CAAC,OAAO,EAAE,EAAE,OAAO;oBACvB,IAAI;wBAAC;wBAAU;wBAAW;wBAAW;qBAAW,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,OAAO;oBAC7E,IAAI,oBAAoB,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,OAAO,OAAO;oBACtE,MAAM,OAAO,OAAO,IAAI;oBACxB,IAAI,MAAM,kBAAkB,OAAO;oBACnC,OAAO;gBACT;+DACC,KAAK,CAAC,GAAG;QACd;uDAAG;QAAC;QAAS;KAAiB;IAE9B,MAAM,iBAAiB,4KAAiB;2DAAC,CAAC;YACxC,IAAI,OAAO,OAAO,MAAM,KAAK,UAAU,OAAO,OAAO,MAAM;YAC3D,MAAM,OAAO,OAAO,IAAI;YACxB,IAAI,MAAM,aAAa,OAAO,KAAK,WAAW;YAC9C,OAAO,OAAO,EAAE,IAAI;QACtB;0DAAG,EAAE;IAEL,MAAM,oBAAoB,4KAAiB;8DAAC,CAAC,QAA0B;YACrE,IAAI,OAAO,OAAO,IAAI,KAAK,YAAY;gBACrC,OAAO,OAAO,IAAI,CAAC;oBACjB;oBACA,YAAY;oBACZ,YAAY;oBACZ,cAAc;8EAAE,KAAO;;oBACvB,cAAc;8EAAE,KAAO;;gBACzB;YACF;YACA,IAAI,OAAO,WAAW,EAAE;gBACtB,MAAM,QAAQ,AAAC,GAAW,CAAC,OAAO,WAAW,CAAW;gBACxD,IAAI,UAAU,aAAa,UAAU,MAAM,OAAO;gBAClD,kBAAI,+KAAoB,CAAC,QAAQ,OAAO;gBACxC,OAAO,OAAO;YAChB;YACA,OAAO;QACT;6DAAG,EAAE;IAEL,MAAM,uBAAuB,4KAAiB;iEAAC,CAAC,oBAC9C,6LAAC;0BACC,cAAA,6LAAC;oBAAI,WAAU;8BACZ,gBAAgB,GAAG;iFAAC,CAAA,uBACnB,6LAAC;;kDACC,6LAAC;wCAAI,WAAU;kDACZ,eAAe;;;;;;kDAElB,6LAAC;wCAAI,WAAU;kDACZ,kBAAkB,QAAQ;;;;;;;+BALrB,OAAO,EAAE;;;;;;;;;;;;;;;;gEAWxB;QAAC;QAAiB;QAAgB;KAAkB;IAEvD,MAAM,qBAAqB,4BAA4B,SAAS,gBAAgB,MAAM,GAAG;IACzF,MAAM,eAAe,oBAAoB,CAAC,qBAAqB,uBAAuB,SAAS;IAC/F,MAAM,0BAA0B,QAAQ,YAAY;IAEpD,MAAM,eAA6C;QACjD;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,gBAAgB;IAChB,IAAI,WAAW;QACb,OAAO,wCACL,6LAAC,0JAAkB;YAAC,OAAO,WAAW,QAAQ,IAAI;YAAI,WAAW;;;;;iCAEjE,6LAAC;YAAI,WAAW,IAAA,qHAAE,EAAC,aAAa;sBAC7B,MAAM,IAAI,CAAC;gBAAE,QAAQ,WAAW,QAAQ,IAAI;YAAG,GAAG,GAAG,CAAC,CAAC,GAAG,kBACzD,6LAAC;oBAAY,WAAU;mBAAb;;;;;;;;;;IAIlB;IAEA,0CAA0C;IAC1C,IAAI,KAAK,MAAM,KAAK,KAAK,yBAAyB;QAChD,qBACE,6LAAC,wJAAU;YACT,OAAO;YACP,aAAa;YACb,QAAQ;YACR,WAAW;;;;;;IAGjB;IAEA,qBAAqB;IACrB,IAAI,2BAA2B,cAAc;QAC3C,IAAI,mBAAmB;YACrB,qBACE,6LAAC;gBACC,WAAW,IAAA,qHAAE,EAAC,QAAQ;gBACtB,OAAO;oBAAE,WAAW;oBAAkB,WAAW;gBAAO;0BAEvD,KAAK,GAAG,CAAC,CAAC,KAAK,sBACd,6LAAC;wBAEC,WAAW;wBACX,OAAO;4BAAE,WAAW;wBAAgB;kCAEnC,aAAa,KAAK;uBAJd,IAAI,QAAQ;;;;;;;;;;QAS3B;QAEA,qBACE,6LAAC;YAAI,WAAW,IAAA,qHAAE,EAAC,kBAAkB;;gBAClC,KAAK,GAAG,CAAC,CAAC,KAAK,sBACd,6LAAC;wBAAuB,WAAW;kCAChC,aAAa,KAAK;uBADX,IAAI,QAAQ;;;;;gBAMvB,YAAY,mBACX,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,0JAAW;4BACV,SAAQ;4BACR,MAAK;4BACL,SAAS,IAAM,cAAc,CAAA,IAAK,CAAC;wCAAE,GAAG,CAAC;wCAAE,WAAW,KAAK,GAAG,CAAC,GAAG,EAAE,SAAS,GAAG;oCAAG,CAAC;4BACpF,UAAU,WAAW,SAAS,KAAK;sCACpC;;;;;;sCAID,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;;wCAAsB;wCAC7B,WAAW,SAAS,GAAG;wCAAE;wCAAI;;;;;;;8CAEtC,6LAAC;oCAAK,WAAU;;wCACb;wCAAS;;;;;;;;;;;;;sCAId,6LAAC,0JAAW;4BACV,SAAQ;4BACR,MAAK;4BACL,SAAS,IAAM,cAAc,CAAA,IAAK,CAAC;wCAAE,GAAG,CAAC;wCAAE,WAAW,KAAK,GAAG,CAAC,YAAY,GAAG,EAAE,SAAS,GAAG;oCAAG,CAAC;4BAChG,UAAU,WAAW,SAAS,IAAI,YAAY;sCAC/C;;;;;;;;;;;;;;;;;;IAOX;IAEA,uBAAuB;IACvB,qBAAO,6LAAC;QAAkB,GAAG,YAAY;;;;;;AAC3C;GA/NgB;;QAwCO,sJAAa;;;KAxCpB;AAiOhB,SAAS,iBAAqD,EAC5D,OAAO,EACP,IAAI,EACJ,SAAS,EACT,UAAU,EACV,aAAa,EACb,QAAQ,EACR,YAAY,EACZ,eAAe,EACf,YAAY,EACZ,uBAAuB,IAAI,EAC3B,WAAW,EACX,eAAe,EACf,iBAAiB,EACjB,eAAe,EACf,kBAAkB,EAClB,QAAQ,EACR,WAAW,EACX,OAAO,EACP,UAAU,EACV,gBAAgB,EAChB,mBAAmB,EACnB,WAAW,EACX,cAAc,EACd,aAAa,EACb,gBAAgB,EAChB,UAAU,EACV,WAAW,EACX,SAAS,EACoB;;IAC7B,MAAM,cAAc,OAAO,IAAI,CAAC,cAAc,MAAM;IACpD,MAAM,wBAAwB,KAAK,MAAM,GAAG,KAAK,KAAK,KAAK,CAAC,CAAA,MAAO,YAAY,CAAC,IAAI,QAAQ,CAAC;IAC7F,MAAM,yBAAyB,CAAC,yBAAyB,KAAK,IAAI,CAAC,CAAA,MAAO,YAAY,CAAC,IAAI,QAAQ,CAAC;IACpG,MAAM,UAAU,MAAM,SAAS;IAC/B,MAAM,CAAC,cAAc,gBAAgB,GAAG,yKAAc,CAAyB,CAAC;IAChF,MAAM,eAAe;IACrB,MAAM,iBAAiB;IAEvB,MAAM,0BAA0B,CAAC;QAC/B,MAAM,eAAe;YAAE,GAAG,YAAY;QAAC;QACvC,KAAK,OAAO,CAAC,CAAA;YACX,IAAI,OAAO;gBACT,YAAY,CAAC,IAAI,QAAQ,CAAC,GAAG;YAC/B,OAAO;gBACL,OAAO,YAAY,CAAC,IAAI,QAAQ,CAAC;YACnC;QACF;QACA,gBAAgB;IAClB;IAEA,MAAM,iBAAiB,wKAAa;oDAAC;YACnC,MAAM,iBAA0C,qBAC5C;gBACE,IAAI;gBACJ,MAAM;gEAAE,IAAM;;gBACd,IAAI;gEAAE,CAAC,EAAE,UAAU,EAAE,cAAc,EAAE,iBACnC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,wIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,OAAO;gFAAE,CAAC;wCACR,EAAE,eAAe;wCACjB;oCACF;;gCACA,WAAU;0CAEV,cAAA,6LAAC,4OAAa;oCAAC,WAAW,IAAA,qHAAE,EAAC,gCAAgC,cAAc;;;;;;;;;;;;;;;;;gBAIjF,MAAM;gBACN,MAAM;oBAAE,aAAa;oBAAW,QAAQ;gBAAO;YACjD,IACA;YAEJ,MAAM,yBAAyB,iBAAiB;gBAAC;mBAAmB;aAAQ,GAAG;mBAAI;aAAQ;YAE3F,MAAM,oBAAoB,uBAAuB,MAAM;8EAAC,CAAA;oBACtD,IAAI,IAAI,EAAE,KAAK,YAAY,OAAO;oBAClC,MAAM,YAAY,gBAAgB,CAAC,IAAI,EAAE,CAAC;oBAC1C,OAAO,cAAc;gBACvB;;YAEA,MAAM,iBAAiB,kBAAkB,GAAG;2EAAC,CAAA;oBAC3C,IAAI;wBAAC;wBAAU;qBAAU,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG;wBAC1C,OAAO;4BACL,GAAG,GAAG;4BACN,MAAM;gCAAE,GAAG,IAAI,IAAI;gCAAE,QAAQ;4BAAgB;wBAC/C;oBACF;oBAEA,IAAI,IAAI,EAAE,KAAK,WAAW;wBACxB,OAAO;4BACL,GAAG,GAAG;4BACN,MAAM;gCAAE,GAAG,IAAI,IAAI;gCAAE,QAAQ;4BAAiB;wBAChD;oBACF;oBAEA,OAAO;gBACT;;YAEA,MAAM,iBAAiB,eAAe,MAAM;2EAAC,CAAA;oBAC3C,MAAM,OAAO,EAAE,IAAI;oBACnB,OAAO,MAAM,WAAW,UAAU,CAAC;wBAAC;wBAAU;wBAAW;qBAAW,CAAC,QAAQ,CAAC,EAAE,EAAE;gBACpF;;YACA,MAAM,kBAAkB,eAAe,MAAM;4EAAC,CAAA,IAAK,AAAC,EAAE,IAAI,EAAU,WAAW;;YAC/E,MAAM,cAAc,eAAe,MAAM;wEAAC,CAAA,IAAK;wBAAC;wBAAU;wBAAW;qBAAW,CAAC,QAAQ,CAAC,EAAE,EAAE;;YAC9F,MAAM,WAAW,eAAe,MAAM;qEAAC,CAAA;oBACrC,MAAM,OAAO,EAAE,IAAI;oBACnB,OAAO,CAAC,MAAM,UAAU,CAAC;wBAAC;wBAAU;wBAAW;qBAAW,CAAC,QAAQ,CAAC,EAAE,EAAE;gBAC1E;;YAEA,MAAM,kBAAkB;mBAAI;aAAS,CAAC,IAAI;4EAAC,CAAC,GAAG;oBAC7C,MAAM,SAAS,YAAY,OAAO,CAAC,EAAE,EAAE;oBACvC,MAAM,SAAS,YAAY,OAAO,CAAC,EAAE,EAAE;oBACvC,IAAI,WAAW,CAAC,KAAK,WAAW,CAAC,GAAG,OAAO;oBAC3C,IAAI,WAAW,CAAC,GAAG,OAAO;oBAC1B,IAAI,WAAW,CAAC,GAAG,OAAO,CAAC;oBAC3B,OAAO,SAAS;gBAClB;;YAEA,MAAM,iBAAiB,gBACpB,MAAM;2EAAC,CAAA,MAAO,cAAc,QAAQ,CAAC,IAAI,EAAE;0EAC3C,GAAG;2EAAC,CAAA,MAAO,CAAC;wBACX,GAAG,GAAG;wBACN,MAAM;4BAAE,GAAG,IAAI,IAAI;4BAAE,QAAQ;wBAAgB;oBAC/C,CAAC;;YAEH,MAAM,oBAAoB,gBAAgB,MAAM;8EAAC,CAAA,IAAK,CAAC,cAAc,QAAQ,CAAC,EAAE,EAAE;;YAElF,OAAO;mBACF;mBACA;mBACA;mBACA;mBACA;aACJ;QACH;mDAAG;QAAC;QAAS;QAAkB;QAAa;QAAe;KAAmB;IAE9E,MAAM,oBAAoB,wKAAa;uDAAC,IAAM,eAAe,MAAM;+DAAC,CAAA,IAAK,AAAC,EAAE,IAAI,EAAU,WAAW;;sDAAS;QAAC;KAAe;IAC9H,MAAM,qBAAqB,wKAAa;wDAAC,IAAM,eAAe,MAAM;gEAAC,CAAA,IAAK,AAAC,EAAE,IAAI,EAAU,WAAW;;uDAAU;QAAC;KAAe;IAEhI,MAAM,iBAAiB,4KAAiB;wDAAC,CAAC;YACxC,OAAO,OAAO,IAAI,IAAI,YAAY,CAAC,OAAO,EAAE,CAAC,IAAK,AAAC,OAAO,IAAI,EAAU,YAAY;QACtF;uDAAG;QAAC;KAAa;IAEjB,MAAM,cAAc,wKAAa;iDAAC;YAC9B,IAAI,SAAS;YACb,OAAO,kBAAkB,GAAG;yDAAC,CAAA;oBACzB,MAAM,QAAQ,eAAe;oBAC7B,MAAM,gBAAgB;oBACtB,UAAU;oBACV,OAAO;gBACX;;QACJ;gDAAG;QAAC;QAAmB;KAAe;IAEtC,MAAM,eAAe,wKAAa;kDAAC;YAC/B,IAAI,SAAS;YACb,MAAM,kBAAkB;mBAAI;aAAmB,CAAC,OAAO,GAAG,GAAG;0EAAC,CAAA;oBAC1D,MAAM,QAAQ,eAAe;oBAC7B,MAAM,gBAAgB;oBACtB,UAAU;oBACV,OAAO;gBACX;;YACA,OAAO,gBAAgB,OAAO;QAClC;iDAAG;QAAC;QAAoB;KAAe;IAEvC,MAAM,oBAAoB,uKAAY,CAAiB;IACvD,MAAM,kBAAkB,uKAAY,CAAiB;IACrD,MAAM,eAAe,uKAAY,CAAmB;IACpD,MAAM,iBAAiB,uKAAY,CAAmB;IACtD,MAAM,mBAAmB,4KAAiB;0DAAC,CAAC;YAC1C,eAAe,OAAO,GAAG;YACzB,aAAa,OAAO,GAAG;QACzB;yDAAG,EAAE;IAEL,MAAM,aAAa,CAAC;QAClB,IAAI,CAAC,gBAAgB,OAAO,IAAI,CAAC,kBAAkB,OAAO,EAAE;QAE5D,IAAI,WAAW,QAAQ;YACrB,gBAAgB,OAAO,CAAC,UAAU,GAAG,kBAAkB,OAAO,CAAC,UAAU;QAC3E,OAAO;YACL,kBAAkB,OAAO,CAAC,UAAU,GAAG,gBAAgB,OAAO,CAAC,UAAU;QAC3E;IACF;IAEA,0KAAe;sCAAC;YACd,IAAI,CAAC,SAAS;YACd,IAAI,CAAC,eAAe,OAAO,EAAE;YAE7B,MAAM;yDAAa;oBACjB,MAAM,YAAY,aAAa,OAAO;oBACtC,MAAM,cAAc,eAAe,OAAO;oBAC1C,IAAI,CAAC,aAAa;oBAElB,MAAM,UAAU,WAAW,cAAc;oBACzC,MAAM,YAAY,YAAY,aAAa,CAAC;oBAC5C,IAAI,CAAC,WAAW;oBAEhB,MAAM,YAAY,UAAU,MAAM,IAAI,CAAC,QAAQ,gBAAgB,CAAC,SAAS,EAAE;oBAC3E,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,gBAAgB,CAAC;oBAC1D,MAAM,eAAuC,CAAC;oBAE9C,eAAe,OAAO;iEAAC,CAAC,QAAQ;4BAC9B,MAAM,aAAa,SAAS,CAAC,MAAM;4BACnC,MAAM,eAAe,WAAW,CAAC,MAAM;4BACvC,MAAM,QAAQ,YAAY,wBAAwB,SAAS,cAAc,wBAAwB;4BACjG,IAAI,SAAS,WAAW,CAAC,MAAM,EAAE;gCAC/B,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,MAAM,EAAE,CAAC;gCAC7C,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,MAAM,EAAE,CAAC;gCAChD,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,MAAM,EAAE,CAAC;gCAChD,YAAY,CAAC,OAAO,EAAE,CAAC,GAAG;4BAC5B;wBACF;;oBAEA,IAAI,WAAW;wBACb,YAAY,KAAK,CAAC,KAAK,GAAG,GAAG,UAAU,qBAAqB,GAAG,KAAK,CAAC,EAAE,CAAC;oBAC1E;oBAEA;iEAAgB,CAAA;4BACd,IAAI,UAAU;4BACd,MAAM,UAAU;gCAAE,GAAG,IAAI;4BAAC;4BAC1B,OAAO,OAAO,CAAC,cAAc,OAAO;yEAAC,CAAC,CAAC,KAAK,MAAM;oCAChD,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO;wCACvB,UAAU;wCACV,OAAO,CAAC,IAAI,GAAG;oCACjB;gCACF;;4BACA,OAAO,UAAU,UAAU;wBAC7B;;gBACF;;YAEA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAElC,MAAM,iBAAiB,IAAI,eAAe;YAC1C,IAAI,aAAa,OAAO,EAAE;gBACxB,eAAe,OAAO,CAAC,aAAa,OAAO;YAC7C;YAEA;8CAAO;oBACL,OAAO,mBAAmB,CAAC,UAAU;oBACrC,eAAe,UAAU;gBAC3B;;QACF;qCAAG;QAAC;QAAM;QAAgB;KAAQ;IAElC,MAAM,kBAAkB,CAAC,yBACvB,6LAAC,yIAAQ;YAAC,WAAU;sBACjB,eAAe,GAAG,CAAC,CAAC,QAAQ;gBAC3B,MAAM,aAAa,WAAY,OAAO,IAAI,EAAU,SAAS;gBAC7D,MAAM,eAAe,OAAO,IAAI,KAAK;gBACrC,MAAM,mBAAmB,AAAC,OAAO,IAAI,EAAU,YAAY;gBAE3D,MAAM,QAA6B,CAAC;gBAEpC,IAAI,cAAc;oBAChB,MAAM,KAAK,GAAG,OAAO,IAAI;oBACzB,MAAM,QAAQ,GAAG,OAAO,IAAI;oBAC5B,MAAM,QAAQ,GAAG,OAAO,IAAI;gBAC9B,OAAO;oBACL,MAAM,QAAQ,GAAG;gBACnB;gBAEA,IAAI,cAAc;gBAElB,MAAM,mBAAmB,eAAe,UAAU,aAAa,kBAAkB,MAAM,GAAG;gBAC1F,MAAM,qBAAqB,eAAe,WAAW,aAAa,eAAe,MAAM,GAAG,mBAAmB,MAAM;gBAEnH,IAAI,YAAY,eAAe,QAAQ;oBACrC,MAAM,cAAc,kBAAkB,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO,EAAE;oBACvE,IAAI,gBAAgB,CAAC,GAAG;wBACrB,MAAc,QAAQ,GAAG;wBACzB,MAAc,IAAI,GAAG,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC;wBACpD,MAAc,GAAG,GAAG;wBACpB,MAAc,eAAe,GAAG;wBACjC,cAAc,IAAA,qHAAE,EAAC,aAAa;oBAChC;gBACF,OAAO,IAAI,YAAY,eAAe,SAAS;oBAC7C,MAAM,cAAc,mBAAmB,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO,EAAE;oBACxE,IAAI,gBAAgB,CAAC,GAAG;wBACrB,MAAc,QAAQ,GAAG;wBACzB,MAAc,KAAK,GAAG,GAAG,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC;wBACtD,MAAc,GAAG,GAAG;wBACpB,MAAc,eAAe,GAAG;wBACjC,cAAc,IAAA,qHAAE,EAAC,aAAa;oBAChC;gBACF;gBAEA,IAAI;oBAAC;oBAAW;oBAAU;oBAAY;iBAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG;oBACpE,cAAc,IAAA,qHAAE,EAAC,aAAa;gBAChC;gBAEA,qBACE,6LAAC,0IAAS;oBAER,OAAO;oBACP,WAAW,IAAA,qHAAE,EAAC,aAAa;wBACzB,YAAY,YAAY;oBAC1B;8BAEC,OAAO,OAAO,MAAM,KAAK,aAEtB,OAAO,MAAM,CAAC;wBACZ;wBACA;wBACA,aAAa;wBACb;wBACA;oBACF,KACA,OAAO,MAAM;mBAfZ,OAAO,EAAE;;;;;YAkBpB;;;;;;IAIJ,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,wBAAwB;;YACxC,wBACC;;kCACE,6LAAC;wBACC,KAAK;wBACL,UAAU,IAAM,WAAW;wBAC3B,WAAU;kCAEV,cAAA,6LAAC,sIAAK;4BAAC,KAAK;sCACV,cAAA,6LAAC,4IAAW;gCAAC,WAAU;;oCACpB,cAAc,mBACb,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC;gDAAG,WAAU;0DACX,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,aAC1B,OAAO,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,UAAW,MAAM,KAAK,cACxD,aAAa;gDACb,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,UAAW,MAAM,CAAC;oDAC3C;oDACA;oDACA,aAAa;gDACf;;;;;;0DAGJ,6LAAC;gDAAG,WAAU;0DACZ,cAAA,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAK,WAAU;;gEAAuB;gEAAY;;;;;;;wDAClD,eAAe,YAAY,MAAM,GAAG,mBACnC,6LAAC,wJAAY;;8EACX,6LAAC,+JAAmB;oEAAC,OAAO;8EAC1B,cAAA,6LAAC,wIAAM;wEAAC,SAAQ;wEAAU,MAAK;;4EAAK;0FAElC,6LAAC,sOAAW;gFAAC,WAAU;;;;;;;;;;;;;;;;;8EAG3B,6LAAC,+JAAmB;oEAAC,OAAM;8EACxB,YAAY,GAAG,CAAC,CAAC,QAAQ,sBACxB,6LAAC,4JAAgB;4EAEf,UAAU,IAAM,OAAO,QAAQ,CAAC;4EAChC,UAAU,AAAC,OAAe,QAAQ;;gFAEjC,OAAO,IAAI,kBAAI,6LAAC,OAAO,IAAI;oFAAC,WAAU;;;;;;gFACtC,OAAO,KAAK;;2EALR;;;;;;;;;;;;;;;;wDAWd,mBAAmB,gBAAgB,MAAM,GAAG,mBAC3C,6LAAC,wJAAY;;8EACX,6LAAC,+JAAmB;oEAAC,OAAO;8EAC1B,cAAA,6LAAC,wIAAM;wEAAC,SAAQ;wEAAU,MAAK;;4EAAK;0FAElC,6LAAC,sOAAW;gFAAC,WAAU;;;;;;;;;;;;;;;;;8EAG3B,6LAAC,+JAAmB;oEAAC,OAAM;8EACxB,gBAAgB,GAAG,CAAC,CAAC,QAAQ,sBAC5B,6LAAC,4JAAgB;4EAEf,UAAU,IAAM,OAAO,QAAQ,CAAC;4EAChC,UAAU,AAAC,OAAe,QAAQ;4EAClC,WAAW,AAAC,OAAe,OAAO,KAAK,gBAAgB,4CAA4C;;gFAElG,OAAO,IAAI,kBAAI,6LAAC,OAAO,IAAI;oFAAC,WAAU;;;;;;gFACtC,OAAO,KAAK;;2EANR;;;;;;;;;;;;;;;;wDAYd;;;;;;;;;;;;;;;;;;oCAKR,gBAAgB;;;;;;;;;;;;;;;;;kCAKvB,6LAAC;wBACC,KAAK;wBACL,UAAU,IAAM,WAAW;wBAC3B,WAAU;kCAEV,cAAA,6LAAC,sIAAK;4BAAC,KAAK;sCACV,cAAA,6LAAC,0IAAS;0CACP,KAAK,GAAG,CAAC,CAAC,KAAK,yBACd,6LAAC,yKAAc;;0DACb,6LAAC,yIAAQ;gDACP,cAAY,YAAY,CAAC,IAAI,QAAQ,CAAC,IAAI;gDAC1C,SAAS,IAAM,aAAa;gDAC5B,WAAW,IAAA,qHAAE,EAAC,SAAS,cAAc;gDACrC,OAAO,cAAc;0DAEpB,eAAe,GAAG,CAAC,CAAC,QAAQ;oDAC3B,MAAM,sBAAsB;wDAAC;wDAAU;wDAAW;wDAAW;qDAAW,CAAC,QAAQ,CAAC,OAAO,EAAE;oDAE3F,MAAM,aAAc,OAAO,IAAI,EAAU;oDACzC,MAAM,eAAe,OAAO,IAAI,KAAK;oDACrC,MAAM,mBAAmB,AAAC,OAAO,IAAI,EAAU,YAAY;oDAE3D,MAAM,QAA6B,CAAC;oDAEpC,IAAI,cAAc;wDAChB,MAAM,KAAK,GAAG,OAAO,IAAI;wDACzB,MAAM,QAAQ,GAAG,OAAO,IAAI;wDAC5B,MAAM,QAAQ,GAAG,OAAO,IAAI;oDAC9B,OAAO;wDACL,MAAM,QAAQ,GAAG;oDACnB;oDAEA,IAAI,cAAc;oDAElB,MAAM,mBAAmB,eAAe,UAAU,aAAa,kBAAkB,MAAM,GAAG;oDAE1F,IAAI,eAAe,QAAQ;wDACzB,MAAM,cAAc,kBAAkB,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO,EAAE;wDACvE,IAAI,gBAAgB,CAAC,GAAG;4DACrB,MAAc,QAAQ,GAAG;4DACzB,MAAc,IAAI,GAAG,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC;4DACrD,MAAM,aAAa,cAAc,MAAM;4DACtC,MAAc,eAAe,GAAG,cAAc;4DAC/C,cAAc,IAAA,qHAAE,EACd,4CACA;wDAEJ;oDACF,OAAO,IAAI,eAAe,SAAS;wDACjC,MAAM,cAAc,mBAAmB,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO,EAAE;wDACxE,IAAI,gBAAgB,CAAC,GAAG;4DACrB,MAAc,QAAQ,GAAG;4DACzB,MAAc,KAAK,GAAG,GAAG,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC;4DACvD,MAAM,aAAa,cAAc,MAAM;4DACtC,MAAc,eAAe,GAAG,cAAc;4DAC/C,cAAc,IAAA,qHAAE,EACd,QACA;wDAEJ;oDACF;oDAEA,IAAI;wDAAC;wDAAW;wDAAU;wDAAY;qDAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG;wDACpE,cAAc,IAAA,qHAAE,EAAC,aAAa;oDAChC;oDAEA,qBACE,6LAAC,0IAAS;wDAER,OAAO;wDACP,WAAW,IAAA,qHAAE,EAAC,aAAa;4DACzB,YAAY;wDACd;wDACA,SAAS,sBAAsB,CAAC,IAAM,EAAE,eAAe,KAAK;kEAE3D,OAAO,IAAI,CAAC;4DACX;4DACA,YAAY,CAAC,CAAC,YAAY,CAAC,IAAI,QAAQ,CAAC;4DACxC,YAAY,CAAC,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC;4DACpC,gBAAgB,CAAC;gEACf,gBAAgB,CAAA;oEACd,MAAM,eAAe;wEAAE,GAAG,IAAI;oEAAC;oEAC/B,IAAI,OAAO;wEACT,YAAY,CAAC,IAAI,QAAQ,CAAC,GAAG;oEAC/B,OAAO;wEACL,OAAO,YAAY,CAAC,IAAI,QAAQ,CAAC;oEACnC;oEACA,OAAO;gEACT;4DACF;4DACA,gBAAgB,IAAM,YAAY,CAAA,OAAQ,CAAC;wEAAE,GAAG,IAAI;wEAAE,CAAC,IAAI,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC;oEAAC,CAAC;wDAC7F;uDAvBK,OAAO,EAAE;;;;;gDA0BpB;;;;;;4CAED,QAAQ,CAAC,IAAI,QAAQ,CAAC,IAAI,oCACzB,6LAAC,yIAAQ;0DACP,cAAA,6LAAC,0IAAS;oDAAC,SAAS,eAAe,MAAM;oDAAE,WAAU;8DAClD,mBAAmB;;;;;;;;;;;;uCA3FP,GAAG,IAAI,QAAQ,CAAC,CAAC,EAAE,UAAU;;;;;;;;;;;;;;;;;;;;;6CAsG5D,6LAAC;gBACC,KAAK;gBACL,WAAU;0BAEV,cAAA,6LAAC,sIAAK;oBAAC,KAAK;;sCACV,6LAAC,4IAAW;4BAAC,WAAU;sCACpB,gBAAgB;;;;;;sCAEnB,6LAAC,0IAAS;sCACR,cAAA,6LAAC,yIAAQ;0CACP,cAAA,6LAAC,0IAAS;oCAAC,SAAS,eAAe,MAAM;oCAAE,WAAU;8CAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASlF,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,qLAAmB;oBAClB,WAAW,WAAW,SAAS;oBAC/B,UAAU,WAAW,QAAQ;oBAC7B,WAAW;oBACX,cAAc,CAAC,QAAU,cAAc,CAAA,IAAK,CAAC;gCAAE,GAAG,CAAC;gCAAE,WAAW;4BAAM,CAAC;oBACvE,aAAa,CAAC,OAAS,cAAc;4BAAE,WAAW;4BAAG,UAAU;wBAAK;oBACpE,iBAAiB,WAAW,SAAS,GAAG;oBACxC,aAAa,WAAW,SAAS,GAAG,YAAY;oBAChD,UAAU;oBACV,kBAAkB;;;;;;;;;;;0BAItB,6LAAC,yKAAe;gBAAC,WAAW;;;;;;;;;;;;AAGlC;IAhiBS;MAAA;AAqiBF,SAAS,kBAAkB,EAChC,QAAQ,EACR,OAAO,EACP,SAAS,EAKV;IACC,qBACE,6LAAC,oIAAI;QACH,WAAW,IAAA,qHAAE,EACX,qCACA,WAAW,kBACX;QAEF,SAAS;kBAET,cAAA,6LAAC,2IAAW;YAAC,WAAU;sBACpB;;;;;;;;;;;AAIT;MAvBgB"}},
    {"offset": {"line": 7219, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\n// Use the original Dialog component\r\nconst Dialog = DialogPrimitive.Root\r\n\r\n// Create a Context to pass ID through the Dialog component tree\r\nconst DialogContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst DialogProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <DialogContext.Provider value={id}>{children}</DialogContext.Provider>;\r\n};\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> & { \r\n    id?: string;\r\n    open?: boolean;\r\n  }\r\n>(({ className, children, id: propId, open, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(DialogContext);\r\n  const id = propId || contextId || `dialog-${React.useId()}`;\r\n  \r\n  // Register with our modal context using the open prop\r\n  const { zIndex } = useModal(id, !!open, 'dialog');\r\n  \r\n  return (\r\n    <DialogPortal>\r\n      {/* S·ª≠ d·ª•ng overlay ch·ªâ d√†nh cho Dialog */}\r\n      <DialogOverlay style={{ zIndex: zIndex - 1 }} />\r\n      <DialogPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"dialog-content fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <DialogProvider id={id}>\r\n          {children}\r\n          <DialogPrimitive.Close\r\n            aria-label=\"ƒê√≥ng\"\r\n            className=\"absolute right-4 top-4 flex h-9 w-9 items-center justify-center rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">ƒê√≥ng</span>\r\n          </DialogPrimitive.Close>\r\n        </DialogProvider>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n})\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n  DialogProvider,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;;;;;;;;AAEA,oCAAoC;AACpC,MAAM,SAAS,6KAAoB;AAEnC,gEAAgE;AAChE,MAAM,8BAAgB,8KAAmB,CAAS;AAElD,wCAAwC;AACxC,MAAM,iBAAiB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IACjF,qBAAO,6LAAC,cAAc,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC7C;KAFM;AAIN,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;MAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,GAAA,2KAAgB,UAMpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;;IACtD,gDAAgD;IAChD,MAAM,YAAY,2KAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,OAAO,EAAE,sKAAW,IAAI;IAE3D,sDAAsD;IACtD,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAQ,EAAC,IAAI,CAAC,CAAC,MAAM;IAExC,qBACE,6LAAC;;0BAEC,6LAAC;gBAAc,OAAO;oBAAE,QAAQ,SAAS;gBAAE;;;;;;0BAC3C,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,oKACA;gBAEF,OAAO;oBAAE;gBAAO;gBACf,GAAG,KAAK;0BAET,cAAA,6LAAC;oBAAe,IAAI;;wBACjB;sCACD,6LAAC,8KAAqB;4BACpB,cAAW;4BACX,WAAU;;8CAEV,6LAAC,oMAAC;oCAAC,WAAU;;;;;;8CACb,6LAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;;QA5BqB,4IAAQ;;;;QAAR,4IAAQ;;;;AA6B7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 7429, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/command.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\r\nimport { Command as CommandPrimitive } from \"cmdk\"\r\nimport { Search } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Dialog, DialogContent } from \"./dialog\"\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCommand.displayName = CommandPrimitive.displayName\r\n\r\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => (\r\n  <CommandPrimitive.Empty\r\n    ref={ref}\r\n    className=\"py-6 text-center text-sm\"\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 h-px bg-border\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName\r\n\r\nconst CommandShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCommandShortcut.displayName = \"CommandShortcut\"\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AACA;;;;;;;AAEA,MAAM,wBAAU,2KAAgB,CAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB;QACf,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,QAAQ,WAAW,GAAG,oJAAgB,CAAC,WAAW;AAElD,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,GAAG,OAAoB;IACxD,qBACE,6LAAC,wIAAM;QAAE,GAAG,KAAK;kBACf,cAAA,6LAAC,+IAAa;YAAC,WAAU;sBACvB,cAAA,6LAAC;gBAAQ,WAAU;0BAChB;;;;;;;;;;;;;;;;AAKX;MAVM;AAYN,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;QAAkC,sBAAmB;;0BAClE,6LAAC,mNAAM;gBAAC,WAAU;;;;;;0BAClB,6LAAC,oJAAgB,CAAC,KAAK;gBACrB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,0JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAKf,aAAa,WAAW,GAAG,oJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,mDAAmD;QAChE,GAAG,KAAK;;;;;;;AAIb,YAAY,WAAW,GAAG,oJAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,OAAO,oBACR,6LAAC,oJAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;;;;;;;AAIb,aAAa,WAAW,GAAG,oJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,6BAAe,2KAAgB,OAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;;AAIb,aAAa,WAAW,GAAG,oJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,iCAAmB,2KAAgB,QAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,SAAS;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,wBAAwB;QACrC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,oJAAgB,CAAC,SAAS,CAAC,WAAW;AAErE,MAAM,4BAAc,2KAAgB,QAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oJAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6TACA;QAED,GAAG,KAAK;;;;;;;AAIb,YAAY,WAAW,GAAG,oJAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,kBAAkB,CAAC,EACvB,SAAS,EACT,GAAG,OACmC;IACtC,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf;OAbM;AAcN,gBAAgB,WAAW,GAAG"}},
    {"offset": {"line": 7616, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\n// Context to pass popover ID through the component tree\r\nconst PopoverContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst PopoverProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <PopoverContext.Provider value={id}>{children}</PopoverContext.Provider>;\r\n};\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content> & {\r\n    id?: string;\r\n  }\r\n>(({ className, align = \"center\", sideOffset = 4, id: propId, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(PopoverContext);\r\n  const id = propId || contextId || `popover-${React.useId()}`;\r\n  \r\n  // Get open state from props\r\n  const [open, setOpen] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (props[\"data-state\"] === \"open\") {\r\n      setOpen(true);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n  }, [props[\"data-state\"]]);\r\n  \r\n  // Register with our modal context\r\n  const { zIndex } = useModal(id, open, 'popover');\r\n  \r\n  return (\r\n    <PopoverPrimitive.Portal>\r\n      <PopoverPrimitive.Content\r\n        ref={ref}\r\n        align={align}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <PopoverProvider id={id}>\r\n          {props.children}\r\n        </PopoverProvider>\r\n      </PopoverPrimitive.Content>\r\n    </PopoverPrimitive.Portal>\r\n  );\r\n})\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverProvider }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AACA;;;AANA;;;;;AAQA,MAAM,UAAU,8KAAqB;AAErC,MAAM,iBAAiB,iLAAwB;AAE/C,wDAAwD;AACxD,MAAM,+BAAiB,8KAAmB,CAAS;AAEnD,wCAAwC;AACxC,MAAM,kBAAkB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IAClF,qBAAO,6LAAC,eAAe,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC9C;KAFM;AAIN,MAAM,+BAAiB,GAAA,2KAAgB,UAKrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,IAAI,MAAM,EAAE,GAAG,OAAO,EAAE;;IACxE,gDAAgD;IAChD,MAAM,YAAY,2KAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,QAAQ,EAAE,sKAAW,IAAI;IAE5D,4BAA4B;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,yKAAc,CAAC;IACvC,0KAAe;oCAAC;YACd,IAAI,KAAK,CAAC,aAAa,KAAK,QAAQ;gBAClC,QAAQ;YACV,OAAO;gBACL,QAAQ;YACV;QACF;mCAAG;QAAC,KAAK,CAAC,aAAa;KAAC;IAExB,kCAAkC;IAClC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAQ,EAAC,IAAI,MAAM;IAEtC,qBACE,6LAAC,gLAAuB;kBACtB,cAAA,6LAAC,iLAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,qHAAE,EACX,8LACA;YAEF,OAAO;gBAAE;YAAO;YACf,GAAG,KAAK;sBAET,cAAA,6LAAC;gBAAgB,IAAI;0BAClB,MAAM,QAAQ;;;;;;;;;;;;;;;;AAKzB;;QArBqB,4IAAQ;;;;QAAR,4IAAQ;;;;AAsB7B,eAAe,WAAW,GAAG,iLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 7725, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,2KAAgB,MAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6LAAC,gLAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,qHAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,gLAAuB,CAAC,WAAW"}},
    {"offset": {"line": 7762, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-faceted-filter.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Check, PlusCircle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Badge } from \"../ui/badge\"\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n} from \"../ui/command\"\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"../ui/popover\"\r\nimport { Separator } from \"../ui/separator\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\ninterface DataTableFacetedFilterProps {\r\n  title?: string\r\n  options: {\r\n    label: string\r\n    value: string\r\n    icon?: React.ComponentType<{ className?: string }>\r\n  }[]\r\n  selectedValues: Set<string>\r\n  onSelectedValuesChange: (values: Set<string>) => void\r\n}\r\n\r\nexport function DataTableFacetedFilter({\r\n  title,\r\n  options,\r\n  selectedValues,\r\n  onSelectedValuesChange\r\n}: DataTableFacetedFilterProps) {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const modalId = React.useId();\r\n  useModal(modalId, isOpen);\r\n\r\n  return (\r\n    <Popover open={isOpen} onOpenChange={setIsOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Button \r\n          variant=\"outline\" \r\n          size=\"sm\" \r\n          className=\"border-dashed flex items-center px-3 text-sm w-full sm:w-auto justify-start\"\r\n        >\r\n          <PlusCircle className=\"mr-1.5 h-3.5 w-3.5 flex-shrink-0\" />\r\n          <span className=\"truncate\">{title}</span>\r\n          {selectedValues.size > 0 && (\r\n            <>\r\n              <Separator orientation=\"vertical\" className=\"mx-1.5 h-3.5\" />\r\n              <Badge\r\n                variant=\"secondary\"\r\n                className=\"rounded-sm px-1 font-normal text-xs sm:hidden ml-auto\"\r\n              >\r\n                {selectedValues.size}\r\n              </Badge>\r\n              <div className=\"hidden space-x-1 sm:flex\">\r\n                {selectedValues.size > 2 ? (\r\n                  <Badge\r\n                    variant=\"secondary\"\r\n                    className=\"rounded-sm px-1 font-normal text-xs\"\r\n                  >\r\n                    {selectedValues.size} selected\r\n                  </Badge>\r\n                ) : (\r\n                  options\r\n                    .filter((option) => selectedValues.has(option.value))\r\n                    .map((option) => (\r\n                      <Badge\r\n                        variant=\"secondary\"\r\n                        key={option.value}\r\n                        className=\"rounded-sm px-1 font-normal text-xs\"\r\n                      >\r\n                        {option.label}\r\n                      </Badge>\r\n                    ))\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      {/* FIX: Removed unsupported `align` prop. */}\r\n      <PopoverContent className=\"w-[200px] p-0\">\r\n        <Command>\r\n          <CommandInput placeholder={title} />\r\n          <CommandList>\r\n            <CommandEmpty>No results found.</CommandEmpty>\r\n            <CommandGroup>\r\n              {options.map((option) => {\r\n                const isSelected = selectedValues.has(option.value)\r\n                return (\r\n                  <CommandItem\r\n                    key={option.value}\r\n                    onSelect={() => {\r\n                      const newSelectedValues = new Set(selectedValues)\r\n                      if (isSelected) {\r\n                        newSelectedValues.delete(option.value)\r\n                      } else {\r\n                        newSelectedValues.add(option.value)\r\n                      }\r\n                      onSelectedValuesChange(newSelectedValues)\r\n                    }}\r\n                  >\r\n                    <div\r\n                      className={cn(\r\n                        \"mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary\",\r\n                        isSelected\r\n                          ? \"bg-primary text-primary-foreground\"\r\n                          : \"opacity-50 [&_svg]:invisible\"\r\n                      )}\r\n                    >\r\n                      <Check className={cn(\"h-4 w-4\")} />\r\n                    </div>\r\n                    {option.icon && (\r\n                      <option.icon className=\"mr-2 h-4 w-4 text-muted-foreground\" />\r\n                    )}\r\n                    <span>{option.label}</span>\r\n                  </CommandItem>\r\n                )\r\n              })}\r\n            </CommandGroup>\r\n            {selectedValues.size > 0 && (\r\n              <>\r\n                <CommandSeparator />\r\n                <CommandGroup>\r\n                  <CommandItem\r\n                    onSelect={() => onSelectedValuesChange(new Set())}\r\n                    className=\"justify-center text-center\"\r\n                  >\r\n                    Clear filters\r\n                  </CommandItem>\r\n                </CommandGroup>\r\n              </>\r\n            )}\r\n          </CommandList>\r\n        </Command>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AASA;AAKA;AACA;;;;;;;;;;;;AAaO,SAAS,uBAAuB,EACrC,KAAK,EACL,OAAO,EACP,cAAc,EACd,sBAAsB,EACM;;IAC5B,MAAM,CAAC,QAAQ,UAAU,GAAG,yKAAc,CAAC;IAC3C,MAAM,UAAU,sKAAW;IAC3B,IAAA,4IAAQ,EAAC,SAAS;IAElB,qBACE,6LAAC,0IAAO;QAAC,MAAM;QAAQ,cAAc;;0BACnC,6LAAC,iJAAc;gBAAC,OAAO;0BACrB,cAAA,6LAAC,wIAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAU;;sCAEV,6LAAC,mOAAU;4BAAC,WAAU;;;;;;sCACtB,6LAAC;4BAAK,WAAU;sCAAY;;;;;;wBAC3B,eAAe,IAAI,GAAG,mBACrB;;8CACE,6LAAC,8IAAS;oCAAC,aAAY;oCAAW,WAAU;;;;;;8CAC5C,6LAAC,sIAAK;oCACJ,SAAQ;oCACR,WAAU;8CAET,eAAe,IAAI;;;;;;8CAEtB,6LAAC;oCAAI,WAAU;8CACZ,eAAe,IAAI,GAAG,kBACrB,6LAAC,sIAAK;wCACJ,SAAQ;wCACR,WAAU;;4CAET,eAAe,IAAI;4CAAC;;;;;;+CAGvB,QACG,MAAM,CAAC,CAAC,SAAW,eAAe,GAAG,CAAC,OAAO,KAAK,GAClD,GAAG,CAAC,CAAC,uBACJ,6LAAC,sIAAK;4CACJ,SAAQ;4CAER,WAAU;sDAET,OAAO,KAAK;2CAHR,OAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;0BAanC,6LAAC,iJAAc;gBAAC,WAAU;0BACxB,cAAA,6LAAC,0IAAO;;sCACN,6LAAC,+IAAY;4BAAC,aAAa;;;;;;sCAC3B,6LAAC,8IAAW;;8CACV,6LAAC,+IAAY;8CAAC;;;;;;8CACd,6LAAC,+IAAY;8CACV,QAAQ,GAAG,CAAC,CAAC;wCACZ,MAAM,aAAa,eAAe,GAAG,CAAC,OAAO,KAAK;wCAClD,qBACE,6LAAC,8IAAW;4CAEV,UAAU;gDACR,MAAM,oBAAoB,IAAI,IAAI;gDAClC,IAAI,YAAY;oDACd,kBAAkB,MAAM,CAAC,OAAO,KAAK;gDACvC,OAAO;oDACL,kBAAkB,GAAG,CAAC,OAAO,KAAK;gDACpC;gDACA,uBAAuB;4CACzB;;8DAEA,6LAAC;oDACC,WAAW,IAAA,qHAAE,EACX,kFACA,aACI,uCACA;8DAGN,cAAA,6LAAC,gNAAK;wDAAC,WAAW,IAAA,qHAAE,EAAC;;;;;;;;;;;gDAEtB,OAAO,IAAI,kBACV,6LAAC,OAAO,IAAI;oDAAC,WAAU;;;;;;8DAEzB,6LAAC;8DAAM,OAAO,KAAK;;;;;;;2CAxBd,OAAO,KAAK;;;;;oCA2BvB;;;;;;gCAED,eAAe,IAAI,GAAG,mBACrB;;sDACE,6LAAC,mJAAgB;;;;;sDACjB,6LAAC,+IAAY;sDACX,cAAA,6LAAC,8IAAW;gDACV,UAAU,IAAM,uBAAuB,IAAI;gDAC3C,WAAU;0DACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWnB;GAjHgB;;QAQd,4IAAQ;;;KARM"}},
    {"offset": {"line": 8015, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/calendar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport {\r\n  ChevronDownIcon,\r\n  ChevronLeftIcon,\r\n  ChevronRightIcon,\r\n} from \"lucide-react\"\r\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Button, buttonVariants } from \"./button\"\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  captionLayout = \"label\",\r\n  buttonVariant = \"ghost\",\r\n  formatters,\r\n  components,\r\n  ...props\r\n}: React.ComponentProps<typeof DayPicker> & {\r\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\r\n}) {\r\n  const defaultClassNames = getDefaultClassNames()\r\n\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\r\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\r\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\r\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\r\n        className\r\n      )}\r\n      captionLayout={captionLayout}\r\n      formatters={{\r\n        formatMonthDropdown: (date) =>\r\n          date.toLocaleString(\"default\", { month: \"short\" }),\r\n        ...formatters,\r\n      }}\r\n      classNames={{\r\n        root: cn(\"w-fit\", defaultClassNames.root),\r\n        months: cn(\r\n          \"relative flex flex-col gap-4 md:flex-row\",\r\n          defaultClassNames.months\r\n        ),\r\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\r\n        nav: cn(\r\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\r\n          defaultClassNames.nav\r\n        ),\r\n        button_previous: cn(\r\n          buttonVariants({ variant: buttonVariant }),\r\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\r\n          defaultClassNames.button_previous\r\n        ),\r\n        button_next: cn(\r\n          buttonVariants({ variant: buttonVariant }),\r\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\r\n          defaultClassNames.button_next\r\n        ),\r\n        month_caption: cn(\r\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\r\n          defaultClassNames.month_caption\r\n        ),\r\n        dropdowns: cn(\r\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\r\n          defaultClassNames.dropdowns\r\n        ),\r\n        dropdown_root: cn(\r\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\r\n          defaultClassNames.dropdown_root\r\n        ),\r\n        dropdown: cn(\"absolute inset-0 opacity-0\", defaultClassNames.dropdown),\r\n        caption_label: cn(\r\n          \"select-none font-medium\",\r\n          captionLayout === \"label\"\r\n            ? \"text-sm\"\r\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\r\n          defaultClassNames.caption_label\r\n        ),\r\n        table: \"w-full border-collapse\",\r\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\r\n        weekday: cn(\r\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\r\n          defaultClassNames.weekday\r\n        ),\r\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\r\n        week_number_header: cn(\r\n          \"w-[--cell-size] select-none\",\r\n          defaultClassNames.week_number_header\r\n        ),\r\n        week_number: cn(\r\n          \"text-muted-foreground select-none text-[0.8rem]\",\r\n          defaultClassNames.week_number\r\n        ),\r\n        day: cn(\r\n          \"relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none\",\r\n          props.showWeekNumber\r\n            ? \"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md\"\r\n            : \"[&:first-child[data-selected=true]_button]:rounded-l-md\",\r\n          defaultClassNames.day\r\n        ),\r\n        range_start: cn(\r\n          \"bg-accent rounded-l-md\",\r\n          defaultClassNames.range_start\r\n        ),\r\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\r\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\r\n        today: cn(\r\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\r\n          defaultClassNames.today\r\n        ),\r\n        outside: cn(\r\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\r\n          defaultClassNames.outside\r\n        ),\r\n        disabled: cn(\r\n          \"text-muted-foreground opacity-50\",\r\n          defaultClassNames.disabled\r\n        ),\r\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        Root: ({ className, rootRef, ...props }) => {\r\n          return (\r\n            <div\r\n              data-slot=\"calendar\"\r\n              ref={rootRef}\r\n              className={cn(className)}\r\n              {...props}\r\n            />\r\n          )\r\n        },\r\n        Chevron: ({ className, orientation, ...props }) => {\r\n          if (orientation === \"left\") {\r\n            return (\r\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\r\n            )\r\n          }\r\n\r\n          if (orientation === \"right\") {\r\n            return (\r\n              <ChevronRightIcon\r\n                className={cn(\"size-4\", className)}\r\n                {...props}\r\n              />\r\n            )\r\n          }\r\n\r\n          return (\r\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\r\n          )\r\n        },\r\n        DayButton: CalendarDayButton,\r\n        WeekNumber: ({ children, ...props }) => {\r\n          return (\r\n            <td {...props}>\r\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\r\n                {children}\r\n              </div>\r\n            </td>\r\n          )\r\n        },\r\n        ...components,\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CalendarDayButton({\r\n  className,\r\n  day,\r\n  modifiers,\r\n  ...props\r\n}: React.ComponentProps<typeof DayButton>) {\r\n  const defaultClassNames = getDefaultClassNames()\r\n\r\n  const ref = React.useRef<HTMLButtonElement>(null)\r\n  React.useEffect(() => {\r\n    if (modifiers.focused) ref.current?.focus()\r\n  }, [modifiers.focused])\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      data-day={day.date.toLocaleDateString()}\r\n      data-selected-single={\r\n        modifiers.selected &&\r\n        !modifiers.range_start &&\r\n        !modifiers.range_end &&\r\n        !modifiers.range_middle\r\n      }\r\n      data-range-start={modifiers.range_start}\r\n      data-range-end={modifiers.range_end}\r\n      data-range-middle={modifiers.range_middle}\r\n      className={cn(\r\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\r\n        defaultClassNames.day,\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Calendar, CalendarDayButton }\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8194, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-date-filter.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Calendar as CalendarIcon, X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuTrigger,\r\n} from \"../ui/dropdown-menu\"\r\nimport { Calendar } from \"../ui/calendar\"\r\nimport { Input } from \"../ui/input\"\r\nimport { formatDate, formatDateTime, formatDateTimeSeconds, formatDateCustom, getCurrentDate, isDateSame, isDateBetween, isDateAfter, isDateBefore, getDaysDiff, getMonthsDiff, addDays, addMonths, subtractDays, subtractMonths, getStartOfDay, getEndOfDay, getStartOfMonth, getEndOfMonth, getStartOfWeek, getEndOfWeek, toISODate, toISODateTime, isValidDate } from '../../lib/date-utils';\r\nconst presets = [\r\n    { key: 'today', label: 'H√¥m nay', getRange: () => [getStartOfDay(getCurrentDate()), getEndOfDay(getCurrentDate())] },\r\n    { key: 'yesterday', label: 'H√¥m qua', getRange: () => [getStartOfDay(subtractDays(getCurrentDate(), 1)), getEndOfDay(subtractDays(getCurrentDate(), 1))] },\r\n    { key: 'this_week', label: 'Tu·∫ßn n√†y', getRange: () => [getStartOfWeek(getCurrentDate()), getEndOfWeek(getCurrentDate())] },\r\n    { key: 'last_week', label: 'Tu·∫ßn tr∆∞·ªõc', getRange: () => [getStartOfWeek(subtractDays(getCurrentDate(), 7)), getEndOfWeek(subtractDays(getCurrentDate(), 7))] },\r\n    { key: 'this_month', label: 'Th√°ng n√†y', getRange: () => [getStartOfMonth(getCurrentDate()), getEndOfMonth(getCurrentDate())] },\r\n    { key: 'last_month', label: 'Th√°ng tr∆∞·ªõc', getRange: () => [getStartOfMonth(subtractMonths(getCurrentDate(), 1)), getEndOfMonth(subtractMonths(getCurrentDate(), 1))] },\r\n]\r\n\r\nfunction DateFilterContent({ value, onChange }: { value?: [string | undefined, string | undefined] | undefined; onChange: (value: [string | undefined, string | undefined] | undefined) => void }) {\r\n    // const { setOpen } = React.useContext(DropdownMenuContext);\r\n    const [initialFrom, initialTo] = value ?? [undefined, undefined];\r\n    \r\n    const [from, setFrom] = React.useState<Date | undefined>(initialFrom ? new Date(initialFrom) : undefined);\r\n    const [to, setTo] = React.useState<Date | undefined>(initialTo ? new Date(initialTo) : undefined);\r\n    \r\n    const [fromInput, setFromInput] = React.useState<string>(initialFrom ? formatDate(initialFrom) : '');\r\n    const [toInput, setToInput] = React.useState<string>(initialTo ? formatDate(initialTo) : '');\r\n    \r\n    const [calendarMonth, setCalendarMonth] = React.useState<Date>(\r\n      from ?? to ?? new Date()\r\n    );\r\n\r\n    React.useEffect(() => {\r\n        if (from && to && isDateAfter(new Date(from), new Date(to))) {\r\n            const tempFrom = from;\r\n            setFrom(to);\r\n            setTo(tempFrom);\r\n        }\r\n    }, [from, to]);\r\n\r\n\r\n    React.useEffect(() => {\r\n        setFromInput(from ? formatDate(from) : '');\r\n    }, [from]);\r\n\r\n    React.useEffect(() => {\r\n        setToInput(to ? formatDate(to) : '');\r\n    }, [to]);\r\n\r\n    const calculateActivePreset = (fromVal: Date | undefined, toVal: Date | undefined) => {\r\n        if (!fromVal || !toVal) return null;\r\n        for (const preset of presets) {\r\n            const [start, end] = preset.getRange();\r\n            if (fromVal && isDateSame(fromVal, start) && toVal && isDateSame(toVal, end)) {\r\n                return preset.key;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    const [activePreset, setActivePreset] = React.useState<string | null>(() => calculateActivePreset(from, to));\r\n\r\n    const [showCustom, setShowCustom] = React.useState(() => {\r\n        return (!!initialFrom || !!initialTo) && activePreset === null;\r\n    });\r\n\r\n    const handlePresetClick = (preset: typeof presets[0]) => {\r\n        const [newFrom, newTo] = preset.getRange();\r\n        setFrom(newFrom ?? undefined);\r\n        setTo(newTo ?? undefined);\r\n        setActivePreset(preset.key);\r\n        setShowCustom(false);\r\n        if (newFrom) setCalendarMonth(newFrom);\r\n    };\r\n\r\n    const handleCustomClick = () => {\r\n        setShowCustom(prev => !prev);\r\n        setActivePreset(null);\r\n    }\r\n\r\n    const handleDateSelect = (range: { from?: Date | undefined; to?: Date | undefined } | undefined) => {\r\n        setActivePreset(null);\r\n        if (!range) {\r\n            setFrom(undefined);\r\n            setTo(undefined);\r\n            return;\r\n        }\r\n        setFrom(range.from);\r\n        setTo(range.to);\r\n    }\r\n    \r\n    const handleDateInputChange = (e: React.ChangeEvent<HTMLInputElement>, type: 'from' | 'to') => {\r\n        const setInput = type === 'from' ? setFromInput : setToInput;\r\n        const setDate = type === 'from' ? setFrom : setTo;\r\n    \r\n        const value = e.target.value;\r\n        const digits = value.replace(/\\D/g, '');\r\n    \r\n        if (digits.length > 8) {\r\n            return;\r\n        }\r\n    \r\n        let dayStr = digits.slice(0, 2);\r\n        let monthStr = digits.slice(2, 4);\r\n        let yearStr = digits.slice(4, 8);\r\n    \r\n        if (dayStr.length === 2) {\r\n            let day = parseInt(dayStr, 10);\r\n            if (day > 31) dayStr = '31';\r\n            if (day === 0) dayStr = '01';\r\n        }\r\n        \r\n        if (monthStr.length === 2) {\r\n            let month = parseInt(monthStr, 10);\r\n            if (month > 12) monthStr = '12';\r\n            if (month === 0) monthStr = '01';\r\n        }\r\n    \r\n        if (dayStr.length === 2 && monthStr.length === 2) {\r\n            const month = parseInt(monthStr, 10);\r\n            const year = yearStr.length === 4 ? parseInt(yearStr, 10) : getCurrentDate().getFullYear();\r\n            \r\n            if (month >= 1 && month <= 12) {\r\n                const tempDate = new Date(year, month - 1);\r\n                if (tempDate && isValidDate(tempDate)) {\r\n                    const daysInMonth = new Date(tempDate.getFullYear(), tempDate.getMonth() + 1, 0).getDate();\r\n                    let day = parseInt(dayStr, 10);\r\n                    if (day > daysInMonth) {\r\n                        dayStr = String(daysInMonth);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        const newDigits = dayStr + monthStr + yearStr;\r\n        let formattedValue = dayStr;\r\n        if (newDigits.length > 2) {\r\n            formattedValue += '/' + monthStr;\r\n        }\r\n        if (newDigits.length > 4) {\r\n            formattedValue += '/' + yearStr;\r\n        }\r\n        \r\n        setInput(formattedValue);\r\n    \r\n        const finalDateStr = `${dayStr}/${monthStr}/${yearStr}`;\r\n        const parsedDate = finalDateStr.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/) ? new Date(finalDateStr.split('/').reverse().join('-')) : null;\r\n    \r\n        if (parsedDate && isValidDate(parsedDate)) {\r\n            setDate(parsedDate);\r\n            setCalendarMonth(parsedDate);\r\n            setActivePreset(null);\r\n        } else {\r\n            setDate(undefined);\r\n        }\r\n    };\r\n\r\n\r\n    const handleApply = () => {\r\n        if (from || to) {\r\n            onChange([\r\n                from ? toISODate(from) : undefined, \r\n                to ? toISODate(to) : undefined\r\n            ]);\r\n        } else {\r\n            onChange(undefined);\r\n        }\r\n        // setOpen(false);\r\n    };\r\n    \r\n    const isCustomActive = showCustom || (activePreset === null && (!!from || !!to));\r\n\r\n    return (\r\n        <div className=\"p-3 space-y-3\">\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n                {presets.map(preset => (\r\n                    <Button\r\n                        key={preset.key}\r\n                        variant={activePreset === preset.key ? \"secondary\" : \"outline\"}\r\n                        size=\"sm\"\r\n                        className=\"h-8 justify-center\"\r\n                        onClick={() => handlePresetClick(preset)}\r\n                    >\r\n                        {preset.label}\r\n                    </Button>\r\n                ))}\r\n            </div>\r\n            \r\n            <Button\r\n                variant={isCustomActive ? \"secondary\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"h-9 w-full justify-center\"\r\n                onClick={handleCustomClick}\r\n            >\r\n                T√πy ch·ªçn\r\n            </Button>\r\n            \r\n            {showCustom && (\r\n                <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center justify-center space-x-2\">\r\n                         <div className=\"relative\">\r\n                            <CalendarIcon className=\"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"dd/mm/yyyy\"\r\n                                value={fromInput}\r\n                                onChange={(e) => handleDateInputChange(e, 'from')}\r\n                                className=\"pl-8 h-9 text-sm\"\r\n                            />\r\n                        </div>\r\n                        <span className=\"text-muted-foreground\">-</span>\r\n                        <div className=\"relative\">\r\n                            <CalendarIcon className=\"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"dd/mm/yyyy\"\r\n                                value={toInput}\r\n                                onChange={(e) => handleDateInputChange(e, 'to')}\r\n                                className=\"pl-8 h-9 text-sm\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-center\">\r\n                        <Calendar\r\n                            mode=\"range\"\r\n                            selected={{ from: from, to: to }}\r\n                            onSelect={handleDateSelect}\r\n                            month={calendarMonth}\r\n                            onMonthChange={setCalendarMonth}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )}\r\n            \r\n            <Button size=\"sm\" onClick={handleApply} className=\"w-full h-9\">L·ªçc</Button>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface DataTableDateFilterProps {\r\n    value?: [string | undefined, string | undefined] | undefined;\r\n    onChange: (value: [string | undefined, string | undefined] | undefined) => void;\r\n    title?: string | undefined;\r\n}\r\n\r\nexport function DataTableDateFilter({\r\n  value,\r\n  onChange,\r\n  title = \"Ng√†y\",\r\n}: DataTableDateFilterProps) {\r\n    const [from, to] = value ?? [\"\", \"\"];\r\n    const isFiltered = !!(from || to);\r\n\r\n    let buttonText = title;\r\n    if (isFiltered) {\r\n        let presetLabel = '';\r\n        for (const preset of presets) {\r\n            const [start, end] = preset.getRange();\r\n            if (isDateSame(from, start) && isDateSame(to, end)) {\r\n                presetLabel = preset.label;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (presetLabel) {\r\n            buttonText = presetLabel;\r\n        } else {\r\n            const fromFormatted = from ? formatDate(from) : '...';\r\n            const toFormatted = to ? formatDate(to) : '...';\r\n            if (from && to) {\r\n                 buttonText = `${fromFormatted} - ${toFormatted}`;\r\n            } else if (from) {\r\n                buttonText = `T·ª´ ${fromFormatted}`;\r\n            } else if (to) {\r\n                buttonText = `ƒê·∫øn ${toFormatted}`;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // Use state to track if the dropdown is open\r\n    const [isOpen, setIsOpen] = React.useState(false);\r\n  \r\n    return (\r\n    <div className=\"relative inline-flex w-full sm:w-auto h-9\">\r\n      <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className={cn(\r\n                \"h-9 w-full sm:w-[180px] lg:w-[220px] justify-start text-left font-normal flex items-center\",\r\n                !isFiltered && \"text-muted-foreground\",\r\n                isFiltered && \"pr-8\"\r\n            )}\r\n          >\r\n            <CalendarIcon className=\"mr-2 h-4 w-4 flex-shrink-0\" />\r\n            <span className=\"truncate flex-1\">{buttonText}</span>\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent className=\"w-[300px] p-0\" align=\"start\" id=\"date-range-filter\">\r\n          {/* B·ªè overlay t·ªëi ·ªü ƒë√¢y */}\r\n          <DateFilterContent value={value} onChange={(val) => {\r\n            onChange(val);\r\n            setIsOpen(false);\r\n          }} />\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n      {isFiltered && (\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            onChange(undefined);\r\n          }}\r\n          className=\"absolute right-0 top-0 h-9 w-8 p-0 hover:bg-transparent opacity-50 hover:opacity-100\"\r\n          aria-label=\"X√≥a b·ªô l·ªçc\"\r\n        >\r\n          <X className=\"h-4 w-4\"/>\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8702, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 8739, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-column-toggle.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Settings2, Search, X, Pin, GripVertical } from \"lucide-react\"\r\n\r\nimport { Button } from \"../ui/button\"\r\nimport { Checkbox } from \"../ui/checkbox\"\r\nimport { Input } from \"../ui/input\"\r\nimport { Label } from \"../ui/label\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"../ui/dialog\"\r\nimport { ScrollArea } from \"../ui/scroll-area\"\r\nimport { cn } from \"../../lib/utils\"\r\nimport type { ColumnDef } from './types'\r\nimport { Separator } from \"../ui/separator\"\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n} from '@dnd-kit/core'\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  useSortable,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\n\r\ninterface DataTableColumnCustomizerProps<TData> {\r\n  children?: React.ReactNode;\r\n  columns: ColumnDef<TData>[];\r\n  columnVisibility: Record<string, boolean>;\r\n  setColumnVisibility: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\r\n  columnOrder: string[];\r\n  setColumnOrder: React.Dispatch<React.SetStateAction<string[]>>;\r\n  pinnedColumns: string[];\r\n  setPinnedColumns: React.Dispatch<React.SetStateAction<string[]>>;\r\n  onResetToDefault?: () => void;\r\n}\r\n\r\nexport function DataTableColumnCustomizer<TData>({\r\n  children,\r\n  columns,\r\n  columnVisibility,\r\n  setColumnVisibility,\r\n  columnOrder,\r\n  setColumnOrder,\r\n  pinnedColumns,\r\n  setPinnedColumns,\r\n  onResetToDefault,\r\n}: DataTableColumnCustomizerProps<TData>) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  // Local state for changes within the dialog\r\n  const [localVisibility, setLocalVisibility] = React.useState<Record<string, boolean>>({});\r\n  const [localOrder, setLocalOrder] = React.useState<string[]>([]);\r\n  const [localPinned, setLocalPinned] = React.useState<string[]>([]);\r\n  const [search, setSearch] = React.useState('');\r\n  \r\n  // @dnd-kit sensors\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8, // 8px movement to start drag (prevents accidental drags)\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n  \r\n  const allConfigurableColumns = React.useMemo(() => \r\n    columns.filter(c => c.id !== 'select' && c.id !== 'actions' && c.id !== 'control' && c.id !== 'expander'),\r\n    [columns]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      // On open, sync local state with props\r\n      // ‚úÖ FIX: ƒê·∫£m b·∫£o T·∫§T C·∫¢ columns c√≥ trong localVisibility (kh√¥ng b·ªã undefined)\r\n      const fullVisibility: Record<string, boolean> = {};\r\n      allConfigurableColumns.forEach(col => {\r\n        // N·∫øu columnVisibility c√≥ gi√° tr·ªã ‚Üí d√πng gi√° tr·ªã ƒë√≥\r\n        // N·∫øu kh√¥ng ‚Üí m·∫∑c ƒë·ªãnh false (·∫©n)\r\n        fullVisibility[col.id] = columnVisibility[col.id] ?? false;\r\n      });\r\n      \r\n      setLocalVisibility(fullVisibility);\r\n      setLocalPinned(pinnedColumns);\r\n      \r\n      const allIds = allConfigurableColumns.map(c => c.id);\r\n      const currentOrder = columnOrder.filter(id => allIds.includes(id));\r\n      const newIds = allIds.filter(id => !currentOrder.includes(id));\r\n      setLocalOrder([...currentOrder, ...newIds]);\r\n\r\n      setSearch('');\r\n    }\r\n  }, [open, columnVisibility, columnOrder, pinnedColumns, allConfigurableColumns]);\r\n\r\n\r\n  const handleSave = () => {\r\n    // ‚úÖ FIX: Merge localVisibility v·ªõi columnVisibility, gi·ªØ nguy√™n select & actions\r\n    setColumnVisibility(prev => ({\r\n      ...localVisibility,\r\n      select: true,      // Lu√¥n gi·ªØ select visible\r\n      actions: true,     // Lu√¥n gi·ªØ actions visible\r\n    }));\r\n    setColumnOrder(localOrder);\r\n    setPinnedColumns(localPinned);\r\n    setOpen(false);\r\n  };\r\n  \r\n  const handleReset = () => {\r\n    if (onResetToDefault) {\r\n      onResetToDefault();\r\n      return;\r\n    }\r\n\r\n    const defaultVisibleColumns = [\r\n      'id', 'fullName', 'workEmail', 'phone', 'department', \r\n      'jobTitle', 'hireDate', 'employmentStatus'\r\n    ];\r\n    \r\n    const initialVisibility: Record<string, boolean> = {};\r\n    allConfigurableColumns.forEach(c => {\r\n      initialVisibility[c.id] = defaultVisibleColumns.includes(c.id);\r\n    });\r\n\r\n    setLocalVisibility(initialVisibility);\r\n    setLocalOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n    setLocalPinned(['id']);\r\n  }\r\n\r\n  const toggleColumnVisibility = (colId: string, checked: boolean) => {\r\n    setLocalVisibility(prev => ({ ...prev, [colId]: checked }));\r\n  };\r\n  \r\n  const togglePin = (colId: string) => {\r\n    setLocalPinned(prev => \r\n        prev.includes(colId) \r\n        ? prev.filter(id => id !== colId) \r\n        : [...prev, colId]\r\n    );\r\n  };\r\n\r\n  const availableColumns = React.useMemo(() => \r\n    allConfigurableColumns.filter(c => !localVisibility[c.id] && ((c.meta as any)?.displayName ?? c.id).toLowerCase().includes(search.toLowerCase())),\r\n    [allConfigurableColumns, localVisibility, search]\r\n  );\r\n  \r\n  const { pinnedVisibleColumns, unpinnedVisibleColumns } = React.useMemo(() => {\r\n    const visibleCols = localOrder\r\n      .map(id => allConfigurableColumns.find(c => c.id === id))\r\n      .filter((c): c is ColumnDef<TData> => !!c && localVisibility[c.id]);\r\n\r\n    const pinned = visibleCols.filter(c => localPinned.includes(c.id));\r\n    const unpinned = visibleCols.filter(c => !localPinned.includes(c.id));\r\n    \r\n    return { pinnedVisibleColumns: pinned, unpinnedVisibleColumns: unpinned };\r\n  }, [localOrder, localPinned, localVisibility, allConfigurableColumns]);\r\n\r\n  const groupedAvailableColumns = React.useMemo(() => {\r\n    return availableColumns.reduce((groups, col) => {\r\n        const groupName = (col.meta as any)?.group || 'Th√¥ng tin kh√°c';\r\n        if (!groups[groupName]) {\r\n            groups[groupName] = [];\r\n        }\r\n        groups[groupName].push(col);\r\n        return groups;\r\n    }, {} as Record<string, ColumnDef<TData>[]>);\r\n  }, [availableColumns]);\r\n\r\n  const handleDragEnd = (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n    \r\n    if (!over || active.id === over.id) return;\r\n    \r\n    const activeId = active.id as string;\r\n    const overId = over.id as string;\r\n    \r\n    // Check if both are in same group (pinned or unpinned)\r\n    const isActivePinned = localPinned.includes(activeId);\r\n    const isOverPinned = localPinned.includes(overId);\r\n    if (isActivePinned !== isOverPinned) return;\r\n\r\n    setLocalOrder((items) => {\r\n      const oldIndex = items.indexOf(activeId);\r\n      const newIndex = items.indexOf(overId);\r\n      \r\n      if (oldIndex === -1 || newIndex === -1) return items;\r\n      \r\n      return arrayMove(items, oldIndex, newIndex);\r\n    });\r\n  };\r\n  \r\n  const SortableColumnItem = ({ col }: { col: ColumnDef<TData> }) => {\r\n    const {\r\n      attributes,\r\n      listeners,\r\n      setNodeRef,\r\n      transform,\r\n      transition,\r\n      isDragging,\r\n    } = useSortable({ id: col.id });\r\n\r\n    const style = {\r\n      transform: CSS.Transform.toString(transform),\r\n      transition,\r\n    };\r\n\r\n    return (\r\n      <div\r\n        ref={setNodeRef}\r\n        style={style}\r\n        className={cn(\r\n          \"flex items-center p-2 rounded-md group\",\r\n          isDragging ? 'opacity-50' : 'hover:bg-muted/50'\r\n        )}\r\n      >\r\n        <div\r\n          {...attributes}\r\n          {...listeners}\r\n          className=\"cursor-grab active:cursor-grabbing touch-none\"\r\n        >\r\n          <GripVertical className=\"h-5 w-5 mr-2 text-muted-foreground\" />\r\n        </div>\r\n        <span className=\"flex-grow text-sm\">{ (col.meta as any)?.displayName ?? col.id }</span>\r\n        \r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className=\"h-7 w-7\"\r\n          onClick={() => togglePin(col.id)}\r\n        >\r\n          <Pin className={cn(\"h-4 w-4\", localPinned.includes(col.id) ? \"text-primary fill-current\" : \"text-muted-foreground\")} />\r\n        </Button>\r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className=\"h-7 w-7 text-muted-foreground hover:text-destructive\"\r\n          onClick={() => toggleColumnVisibility(col.id, false)}\r\n        >\r\n          <X className=\"h-4 w-4\" />\r\n        </Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        {children || (\r\n          <Button variant=\"outline\" size=\"sm\">\r\n            <Settings2 className=\"mr-2 h-4 w-4\" />\r\n            ƒêi·ªÅu ch·ªânh c·ªôt\r\n          </Button>\r\n        )}\r\n      </DialogTrigger>\r\n      <DialogContent className=\"max-w-3xl h-[75vh] flex flex-col\" open={open}>\r\n        <DialogHeader>\r\n          <DialogTitle>ƒêi·ªÅu ch·ªânh c·ªôt hi·ªÉn th·ªã</DialogTitle>\r\n          <DialogDescription>\r\n            Ch·ªçn, s·∫Øp x·∫øp v√† ghim c√°c c·ªôt ƒë·ªÉ t√πy ch·ªânh giao di·ªán b·∫£ng c·ªßa b·∫°n.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div className=\"flex flex-col md:flex-row gap-6 flex-grow min-h-0\">\r\n            {/* Left Panel: Available Columns */}\r\n            <div className=\"flex flex-col border rounded-lg flex-1 min-h-0\">\r\n                <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold mb-2\">Th√™m c·ªôt hi·ªÉn th·ªã</h3>\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"T√¨m ki·∫øm c·ªôt...\"\r\n                            className=\"w-full pl-8 h-9\"\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <ScrollArea className=\"flex-grow p-4\">\r\n                    <div className=\"space-y-4\">\r\n                        {Object.keys(groupedAvailableColumns).map((groupName) => {\r\n                            const cols = groupedAvailableColumns[groupName];\r\n                            if (!Array.isArray(cols) || cols.length === 0) return null;\r\n                            return (\r\n                                <div key={groupName}>\r\n                                    <h4 className=\"text-sm font-semibold mb-2 text-muted-foreground\">{groupName}</h4>\r\n                                    <div className=\"space-y-2\">\r\n                                    {cols.map(col => (\r\n                                        <div key={col.id} className=\"flex items-center space-x-2\">\r\n                                            <Checkbox \r\n                                                id={`add-${col.id}`}\r\n                                                checked={localVisibility[col.id] || false}\r\n                                                onCheckedChange={(checked) => toggleColumnVisibility(col.id, !!checked)}\r\n                                            />\r\n                                            <Label htmlFor={`add-${col.id}`} className=\"font-normal text-sm\">{ (col.meta as any)?.displayName ?? col.id }</Label>\r\n                                        </div>\r\n                                    ))}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                         {availableColumns.length === 0 && (\r\n                            <p className=\"text-sm text-muted-foreground text-center py-4\">Kh√¥ng c√≥ c·ªôt n√†o.</p>\r\n                        )}\r\n                    </div>\r\n                </ScrollArea>\r\n            </div>\r\n            {/* Right Panel: Visible Columns */}\r\n            <div className=\"flex flex-col border rounded-lg flex-1 min-h-0\">\r\n                 <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold\">C·ªôt hi·ªÉn th·ªã</h3>\r\n                 </div>\r\n                 <ScrollArea className=\"flex-grow p-2\">\r\n                    <DndContext\r\n                      sensors={sensors}\r\n                      collisionDetection={closestCenter}\r\n                      onDragEnd={handleDragEnd}\r\n                    >\r\n                      <div className=\"space-y-1\">\r\n                        {/* Pinned columns - sortable among themselves */}\r\n                        {pinnedVisibleColumns.length > 0 && (\r\n                          <SortableContext\r\n                            items={pinnedVisibleColumns.map(c => c.id)}\r\n                            strategy={verticalListSortingStrategy}\r\n                          >\r\n                            {pinnedVisibleColumns.map((col) => (\r\n                              <SortableColumnItem key={col.id} col={col} />\r\n                            ))}\r\n                          </SortableContext>\r\n                        )}\r\n                        \r\n                        {pinnedVisibleColumns.length > 0 && unpinnedVisibleColumns.length > 0 && (\r\n                            <div className=\"relative my-2 mx-2\">\r\n                                <Separator />\r\n                                <span className=\"absolute left-1/2 -translate-x-1/2 -top-2 text-xs bg-popover px-2 text-muted-foreground\">Ghim</span>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {/* Unpinned columns - sortable among themselves */}\r\n                        {unpinnedVisibleColumns.length > 0 && (\r\n                          <SortableContext\r\n                            items={unpinnedVisibleColumns.map(c => c.id)}\r\n                            strategy={verticalListSortingStrategy}\r\n                          >\r\n                            {unpinnedVisibleColumns.map((col) => (\r\n                              <SortableColumnItem key={col.id} col={col} />\r\n                            ))}\r\n                          </SortableContext>\r\n                        )}\r\n                        \r\n                        {(pinnedVisibleColumns.length + unpinnedVisibleColumns.length) === 0 && (\r\n                            <p className=\"text-sm text-muted-foreground text-center py-4\">Kh√¥ng c√≥ c·ªôt n√†o ƒë∆∞·ª£c hi·ªÉn th·ªã.</p>\r\n                        )}\r\n                      </div>\r\n                    </DndContext>\r\n                 </ScrollArea>\r\n            </div>\r\n        </div>\r\n        <DialogFooter className=\"pt-6 mt-auto flex-shrink-0\">\r\n          <Button type=\"button\" variant=\"ghost\" size=\"sm\" onClick={handleReset}>\r\n            Quay v·ªÅ m·∫∑c ƒë·ªãnh\r\n          </Button>\r\n          <div className=\"flex-grow\" />\r\n          <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => setOpen(false)}>\r\n            Tho√°t\r\n          </Button>\r\n          <Button type=\"button\" size=\"sm\" onClick={handleSave}>\r\n            L∆∞u\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9416, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/radio-group.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\n// --- Context ---\r\ntype RadioGroupContextType = {\r\n  value: string | number | undefined;\r\n  onValueChange: (value: string | number) => void;\r\n  name?: string | undefined;\r\n};\r\n\r\nconst RadioGroupContext = React.createContext<RadioGroupContextType | undefined>(undefined);\r\n\r\nconst useRadioGroup = () => {\r\n  const context = React.useContext(RadioGroupContext);\r\n  if (!context) {\r\n    throw new Error(\"useRadioGroup must be used within a RadioGroup\");\r\n  }\r\n  return context;\r\n};\r\n\r\n// --- RadioGroup ---\r\nconst RadioGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & {\r\n    value?: string | number | undefined;\r\n    defaultValue?: string | number | undefined;\r\n    onValueChange?: ((value: string | number) => void) | undefined;\r\n    name?: string | undefined;\r\n  }\r\n>(({ className, children, value, defaultValue, onValueChange, name, ...props }, ref) => {\r\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\r\n  const isControlled = value !== undefined;\r\n  const currentValue = isControlled ? value : internalValue;\r\n\r\n  const handleValueChange = (newValue: string | number) => {\r\n    if (!isControlled) {\r\n      setInternalValue(newValue);\r\n    }\r\n    if (onValueChange) {\r\n      onValueChange(newValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <RadioGroupContext.Provider value={{ value: currentValue, onValueChange: handleValueChange, name }}>\r\n      <div ref={ref} role=\"radiogroup\" className={cn(\"grid gap-2\", className)} {...props}>\r\n        {children}\r\n      </div>\r\n    </RadioGroupContext.Provider>\r\n  );\r\n});\r\nRadioGroup.displayName = \"RadioGroup\";\r\n\r\n// --- RadioGroupItem ---\r\nconst RadioGroupItem = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ButtonHTMLAttributes<HTMLButtonElement> & { value: string | number }\r\n>(({ className, value, children, ...props }, ref) => {\r\n  const { value: selectedValue, onValueChange, name } = useRadioGroup();\r\n  const isChecked = selectedValue === value;\r\n  const id = React.useId();\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      id={id}\r\n      type=\"button\"\r\n      role=\"radio\"\r\n      aria-checked={isChecked}\r\n      data-state={isChecked ? \"checked\" : \"unchecked\"}\r\n      onClick={() => onValueChange(value)}\r\n      name={name}\r\n      value={value}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {isChecked && (\r\n        <div className=\"flex items-center justify-center\">\r\n          <div className=\"h-2.5 w-2.5 rounded-full bg-current text-current\" />\r\n        </div>\r\n      )}\r\n    </button>\r\n  );\r\n});\r\nRadioGroupItem.displayName = \"RadioGroupItem\";\r\n\r\n\r\nexport { RadioGroup, RadioGroupItem };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;AASA,MAAM,kCAAoB,8KAAmB,CAAoC;AAEjF,MAAM,gBAAgB;;IACpB,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANM;AAQN,qBAAqB;AACrB,MAAM,2BAAa,IAAA,2KAAgB,UAQjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;;IAC9E,MAAM,CAAC,eAAe,iBAAiB,GAAG,yKAAc,CAAC;IACzD,MAAM,eAAe,UAAU;IAC/B,MAAM,eAAe,eAAe,QAAQ;IAE5C,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,cAAc;YACjB,iBAAiB;QACnB;QACA,IAAI,eAAe;YACjB,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE,OAAO;YAAc,eAAe;YAAmB;QAAK;kBAC/F,cAAA,6LAAC;YAAI,KAAK;YAAK,MAAK;YAAa,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAa,GAAG,KAAK;sBAC/E;;;;;;;;;;;AAIT;;AACA,WAAW,WAAW,GAAG;AAEzB,yBAAyB;AACzB,MAAM,+BAAiB,IAAA,2KAAgB,WAGrC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IAC3C,MAAM,EAAE,OAAO,aAAa,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG;IACtD,MAAM,YAAY,kBAAkB;IACpC,MAAM,KAAK,sKAAW;IAEtB,qBACE,6LAAC;QACC,KAAK;QACL,IAAI;QACJ,MAAK;QACL,MAAK;QACL,gBAAc;QACd,cAAY,YAAY,YAAY;QACpC,SAAS,IAAM,cAAc;QAC7B,MAAM;QACN,OAAO;QACP,WAAW,IAAA,qHAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAER,2BACC,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKzB;;QA5BwD;;;;QAAA;;;;AA6BxD,eAAe,WAAW,GAAG"}},
    {"offset": {"line": 9539, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-export-dialog.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Download, ArrowLeft } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport { Button } from '../ui/button';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from '../ui/dialog';\r\nimport { RadioGroup, RadioGroupItem } from '../ui/radio-group';\r\nimport { Label } from '../ui/label';\r\nimport { Checkbox } from '../ui/checkbox';\r\nimport type { ColumnDef } from './types';\r\n\r\nexport type ExportConfig<TData> = {\r\n  fileName: string;\r\n  columns: ColumnDef<TData>[];\r\n};\r\n\r\ninterface DataTableExportDialogProps<TData> {\r\n  children?: React.ReactNode;\r\n  allData: TData[];\r\n  filteredData: TData[];\r\n  pageData: TData[];\r\n  config: ExportConfig<TData>;\r\n}\r\n\r\nexport function DataTableExportDialog<TData>({ \r\n  children,\r\n  allData, \r\n  filteredData,\r\n  pageData,\r\n  config \r\n}: DataTableExportDialogProps<TData>) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [view, setView] = React.useState<'scope' | 'columns'>('scope');\r\n  const [exportScope, setExportScope] = React.useState<'all' | 'filtered' | 'page'>('filtered');\r\n  const [selectedColumns, setSelectedColumns] = React.useState<Record<string, boolean>>({});\r\n\r\n  const exportableColumns = React.useMemo(\r\n    () => config.columns.filter(c => c.id !== 'select' && c.id !== 'actions' && c.id !== 'expander' && c.id !== 'settings'),\r\n    [config.columns]\r\n  );\r\n  \r\n  React.useEffect(() => {\r\n    if (open) {\r\n      const initialSelection = Object.fromEntries(\r\n        exportableColumns.map(c => [c.id, true])\r\n      );\r\n      setSelectedColumns(initialSelection);\r\n    }\r\n  }, [open, exportableColumns]);\r\n\r\n  const handleExport = () => {\r\n    let dataToExport: TData[];\r\n    switch (exportScope) {\r\n      case 'all':\r\n        dataToExport = allData;\r\n        break;\r\n      case 'page':\r\n        dataToExport = pageData;\r\n        break;\r\n      case 'filtered':\r\n      default:\r\n        dataToExport = filteredData;\r\n        break;\r\n    }\r\n\r\n    const columnsToExport = exportableColumns.filter(c => selectedColumns[c.id]);\r\n    \r\n    const headers = columnsToExport.map(col => col.meta?.displayName ?? col.id);\r\n    \r\n    const mappedData = dataToExport.map(row => {\r\n        const rowData: Record<string, any> = {};\r\n        columnsToExport.forEach(col => {\r\n            const key = col.accessorKey as keyof TData;\r\n            rowData[col.meta?.displayName ?? col.id] = (row as any)[key as string];\r\n        });\r\n        return rowData;\r\n    });\r\n\r\n    const worksheet = XLSX.utils.json_to_sheet(mappedData, { header: headers });\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Sheet1\");\r\n    XLSX.writeFile(workbook, `${config.fileName}.xlsx`);\r\n\r\n    setOpen(false);\r\n  };\r\n  \r\n  const toggleSelectAll = (checked: boolean) => {\r\n    const newSelection = Object.fromEntries(exportableColumns.map(c => [c.id, checked]));\r\n    setSelectedColumns(newSelection);\r\n  }\r\n  \r\n  const areAllSelected = exportableColumns.every(c => selectedColumns[c.id]);\r\n  const isSomeSelected = exportableColumns.some(c => selectedColumns[c.id]);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        {children || (\r\n          <Button variant=\"outline\" size=\"sm\" className=\"ml-auto gap-1\">\r\n            <Download className=\"h-3.5 w-3.5\" />\r\n            <span>Xu·∫•t file</span>\r\n          </Button>\r\n        )}\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        {view === 'scope' ? (\r\n          <>\r\n            <DialogHeader>\r\n              <DialogTitle>Xu·∫•t file danh s√°ch</DialogTitle>\r\n              <DialogDescription>\r\n                Ch·ªçn ph·∫°m vi v√† t√πy ch·ªçn c√°c tr∆∞·ªùng d·ªØ li·ªáu b·∫°n mu·ªën xu·∫•t ra file Excel.\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n            <div className=\"space-y-4 py-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label>Gi·ªõi h·∫°n k·∫øt qu·∫£ xu·∫•t</Label>\r\n                <RadioGroup value={exportScope} onValueChange={(v) => setExportScope(v as any)}>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"filtered\" id=\"filtered\" />\r\n                    <Label htmlFor=\"filtered\">K·∫øt qu·∫£ ƒë√£ l·ªçc ({filteredData.length} d√≤ng)</Label>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"page\" id=\"page\" />\r\n                    <Label htmlFor=\"page\">Ch·ªâ trang n√†y ({pageData.length} d√≤ng)</Label>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"all\" id=\"all\" />\r\n                    <Label htmlFor=\"all\">T·∫•t c·∫£ ({allData.length} d√≤ng)</Label>\r\n                  </div>\r\n                </RadioGroup>\r\n              </div>\r\n              <Button variant=\"link\" className=\"p-0 h-auto\" onClick={() => setView('columns')}>\r\n                T√πy ch·ªçn tr∆∞·ªùng hi·ªÉn th·ªã\r\n              </Button>\r\n            </div>\r\n            <DialogFooter className=\"sm:justify-end\">\r\n              <Button type=\"button\" variant=\"secondary\" onClick={() => setOpen(false)}>\r\n                Tho√°t\r\n              </Button>\r\n              <Button type=\"button\" onClick={handleExport}>\r\n                Xu·∫•t file\r\n              </Button>\r\n            </DialogFooter>\r\n          </>\r\n        ) : (\r\n           <>\r\n            <DialogHeader>\r\n              <div className=\"flex items-center -ml-4\">\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\" onClick={() => setView('scope')}>\r\n                    <ArrowLeft className=\"h-4 w-4\" />\r\n                </Button>\r\n                <DialogTitle>T√πy ch·ªçn tr∆∞·ªùng hi·ªÉn th·ªã</DialogTitle>\r\n              </div>\r\n              <DialogDescription>\r\n                Ch·ªçn c√°c c·ªôt b·∫°n mu·ªën ƒë∆∞a v√†o file xu·∫•t.\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n            <div className=\"py-4 space-y-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <Checkbox\r\n                        id=\"select-all-columns\"\r\n                        checked={areAllSelected ? true : isSomeSelected ? \"indeterminate\" : false}\r\n                        onCheckedChange={(value) => toggleSelectAll(!!value)}\r\n                    />\r\n                    <Label htmlFor=\"select-all-columns\" className=\"font-semibold\">Ch·ªçn t·∫•t c·∫£</Label>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 max-h-64 overflow-y-auto pr-2\">\r\n                    {exportableColumns.map(col => (\r\n                        <div key={col.id} className=\"flex items-center space-x-2\">\r\n                            <Checkbox\r\n                                id={`col-${col.id}`}\r\n                                checked={selectedColumns[col.id] || false}\r\n                                onCheckedChange={(checked) => setSelectedColumns(prev => ({...prev, [col.id]: !!checked}))}\r\n                            />\r\n                            <Label htmlFor={`col-${col.id}`} className=\"text-sm font-normal\">\r\n                                {col.meta?.displayName ?? col.id}\r\n                            </Label>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <DialogFooter className=\"sm:justify-end\">\r\n              <Button type=\"button\" variant=\"secondary\" onClick={() => setView('scope')}>\r\n                Quay l·∫°i\r\n              </Button>\r\n              <Button type=\"button\" onClick={handleExport}>\r\n                Xu·∫•t file\r\n              </Button>\r\n            </DialogFooter>\r\n           </>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AASA;AACA;AACA;;;;;;;;;;;AAgBO,SAAS,sBAA6B,EAC3C,QAAQ,EACR,OAAO,EACP,YAAY,EACZ,QAAQ,EACR,MAAM,EAC4B;;IAClC,MAAM,CAAC,MAAM,QAAQ,GAAG,yKAAc,CAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,yKAAc,CAAsB;IAC5D,MAAM,CAAC,aAAa,eAAe,GAAG,yKAAc,CAA8B;IAClF,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,yKAAc,CAA0B,CAAC;IAEvF,MAAM,oBAAoB,wKAAa;4DACrC,IAAM,OAAO,OAAO,CAAC,MAAM;oEAAC,CAAA,IAAK,EAAE,EAAE,KAAK,YAAY,EAAE,EAAE,KAAK,aAAa,EAAE,EAAE,KAAK,cAAc,EAAE,EAAE,KAAK;;2DAC5G;QAAC,OAAO,OAAO;KAAC;IAGlB,0KAAe;2CAAC;YACd,IAAI,MAAM;gBACR,MAAM,mBAAmB,OAAO,WAAW,CACzC,kBAAkB,GAAG;wEAAC,CAAA,IAAK;4BAAC,EAAE,EAAE;4BAAE;yBAAK;;gBAEzC,mBAAmB;YACrB;QACF;0CAAG;QAAC;QAAM;KAAkB;IAE5B,MAAM,eAAe;QACnB,IAAI;QACJ,OAAQ;YACN,KAAK;gBACH,eAAe;gBACf;YACF,KAAK;gBACH,eAAe;gBACf;YACF,KAAK;YACL;gBACE,eAAe;gBACf;QACJ;QAEA,MAAM,kBAAkB,kBAAkB,MAAM,CAAC,CAAA,IAAK,eAAe,CAAC,EAAE,EAAE,CAAC;QAE3E,MAAM,UAAU,gBAAgB,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,EAAE,eAAe,IAAI,EAAE;QAE1E,MAAM,aAAa,aAAa,GAAG,CAAC,CAAA;YAChC,MAAM,UAA+B,CAAC;YACtC,gBAAgB,OAAO,CAAC,CAAA;gBACpB,MAAM,MAAM,IAAI,WAAW;gBAC3B,OAAO,CAAC,IAAI,IAAI,EAAE,eAAe,IAAI,EAAE,CAAC,GAAG,AAAC,GAAW,CAAC,IAAc;YAC1E;YACA,OAAO;QACX;QAEA,MAAM,YAAY,yIAAU,CAAC,aAAa,CAAC,YAAY;YAAE,QAAQ;QAAQ;QACzE,MAAM,WAAW,yIAAU,CAAC,QAAQ;QACpC,yIAAU,CAAC,iBAAiB,CAAC,UAAU,WAAW;QAClD,6IAAc,CAAC,UAAU,GAAG,OAAO,QAAQ,CAAC,KAAK,CAAC;QAElD,QAAQ;IACV;IAEA,MAAM,kBAAkB,CAAC;QACvB,MAAM,eAAe,OAAO,WAAW,CAAC,kBAAkB,GAAG,CAAC,CAAA,IAAK;gBAAC,EAAE,EAAE;gBAAE;aAAQ;QAClF,mBAAmB;IACrB;IAEA,MAAM,iBAAiB,kBAAkB,KAAK,CAAC,CAAA,IAAK,eAAe,CAAC,EAAE,EAAE,CAAC;IACzE,MAAM,iBAAiB,kBAAkB,IAAI,CAAC,CAAA,IAAK,eAAe,CAAC,EAAE,EAAE,CAAC;IAExE,qBACE,6LAAC,wIAAM;QAAC,MAAM;QAAM,cAAc;;0BAChC,6LAAC,+IAAa;gBAAC,OAAO;0BACnB,0BACC,6LAAC,wIAAM;oBAAC,SAAQ;oBAAU,MAAK;oBAAK,WAAU;;sCAC5C,6LAAC,yNAAQ;4BAAC,WAAU;;;;;;sCACpB,6LAAC;sCAAK;;;;;;;;;;;;;;;;;0BAIZ,6LAAC,+IAAa;gBAAC,WAAU;0BACtB,SAAS,wBACR;;sCACE,6LAAC,8IAAY;;8CACX,6LAAC,6IAAW;8CAAC;;;;;;8CACb,6LAAC,mJAAiB;8CAAC;;;;;;;;;;;;sCAIrB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;sDAAC;;;;;;sDACP,6LAAC,oJAAU;4CAAC,OAAO;4CAAa,eAAe,CAAC,IAAM,eAAe;;8DACnE,6LAAC;oDAAI,WAAU;;sEACb,6LAAC,wJAAc;4DAAC,OAAM;4DAAW,IAAG;;;;;;sEACpC,6LAAC,sIAAK;4DAAC,SAAQ;;gEAAW;gEAAiB,aAAa,MAAM;gEAAC;;;;;;;;;;;;;8DAEjE,6LAAC;oDAAI,WAAU;;sEACb,6LAAC,wJAAc;4DAAC,OAAM;4DAAO,IAAG;;;;;;sEAChC,6LAAC,sIAAK;4DAAC,SAAQ;;gEAAO;gEAAgB,SAAS,MAAM;gEAAC;;;;;;;;;;;;;8DAExD,6LAAC;oDAAI,WAAU;;sEACb,6LAAC,wJAAc;4DAAC,OAAM;4DAAM,IAAG;;;;;;sEAC/B,6LAAC,sIAAK;4DAAC,SAAQ;;gEAAM;gEAAS,QAAQ,MAAM;gEAAC;;;;;;;;;;;;;;;;;;;;;;;;;8CAInD,6LAAC,wIAAM;oCAAC,SAAQ;oCAAO,WAAU;oCAAa,SAAS,IAAM,QAAQ;8CAAY;;;;;;;;;;;;sCAInF,6LAAC,8IAAY;4BAAC,WAAU;;8CACtB,6LAAC,wIAAM;oCAAC,MAAK;oCAAS,SAAQ;oCAAY,SAAS,IAAM,QAAQ;8CAAQ;;;;;;8CAGzE,6LAAC,wIAAM;oCAAC,MAAK;oCAAS,SAAS;8CAAc;;;;;;;;;;;;;iDAMhD;;sCACC,6LAAC,8IAAY;;8CACX,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,wIAAM;4CAAC,SAAQ;4CAAQ,MAAK;4CAAO,WAAU;4CAAU,SAAS,IAAM,QAAQ;sDAC3E,cAAA,6LAAC,gOAAS;gDAAC,WAAU;;;;;;;;;;;sDAEzB,6LAAC,6IAAW;sDAAC;;;;;;;;;;;;8CAEf,6LAAC,mJAAiB;8CAAC;;;;;;;;;;;;sCAIrB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC,4IAAQ;4CACL,IAAG;4CACH,SAAS,iBAAiB,OAAO,iBAAiB,kBAAkB;4CACpE,iBAAiB,CAAC,QAAU,gBAAgB,CAAC,CAAC;;;;;;sDAElD,6LAAC,sIAAK;4CAAC,SAAQ;4CAAqB,WAAU;sDAAgB;;;;;;;;;;;;8CAElE,6LAAC;oCAAI,WAAU;8CACV,kBAAkB,GAAG,CAAC,CAAA,oBACnB,6LAAC;4CAAiB,WAAU;;8DACxB,6LAAC,4IAAQ;oDACL,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE;oDACnB,SAAS,eAAe,CAAC,IAAI,EAAE,CAAC,IAAI;oDACpC,iBAAiB,CAAC,UAAY,mBAAmB,CAAA,OAAQ,CAAC;gEAAC,GAAG,IAAI;gEAAE,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;4DAAO,CAAC;;;;;;8DAE5F,6LAAC,sIAAK;oDAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE;oDAAE,WAAU;8DACtC,IAAI,IAAI,EAAE,eAAe,IAAI,EAAE;;;;;;;2CAP9B,IAAI,EAAE;;;;;;;;;;;;;;;;sCAa5B,6LAAC,8IAAY;4BAAC,WAAU;;8CACtB,6LAAC,wIAAM;oCAAC,MAAK;oCAAS,SAAQ;oCAAY,SAAS,IAAM,QAAQ;8CAAU;;;;;;8CAG3E,6LAAC,wIAAM;oCAAC,MAAK;oCAAS,SAAS;8CAAc;;;;;;;;;;;;;;;;;;;;;;;;;AAS3D;GA1KgB;KAAA"}},
    {"offset": {"line": 10032, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0 sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,qHAAE,EACX,wIACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,2PACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,IAAA,gJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,IAAA,gJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 10192, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/layout/page-toolbar.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Button } from '../ui/button';\r\nimport { cn } from '../../lib/utils';\r\n\r\n/**\r\n * Page Toolbar Component\r\n * Mobile-first toolbar for common actions (Import, Export, Column Toggle)\r\n * H√†ng 2 trong layout 3 t·∫ßng\r\n * \r\n * Layout: Import/Export b√™n tr√°i, Settings (Column toggle) b√™n ph·∫£i\r\n */\r\nexport interface PageToolbarProps {\r\n  /** Left side actions (Import, Export) */\r\n  leftActions?: React.ReactNode;\r\n  /** Right side actions (Column toggle, Settings) */\r\n  rightActions?: React.ReactNode;\r\n  /** Deprecated: Use leftActions and rightActions instead */\r\n  children?: React.ReactNode;\r\n  /** Additional CSS classes */\r\n  className?: string;\r\n}\r\n\r\nexport function PageToolbar({ leftActions, rightActions, children, className }: PageToolbarProps) {\r\n  // Backward compatibility: if children is provided, render old way\r\n  if (children && !leftActions && !rightActions) {\r\n    return (\r\n      <div \r\n        className={cn(\r\n          \"flex flex-wrap items-center gap-2 py-3 bg-background\",\r\n          className\r\n        )}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!leftActions && !rightActions) return null;\r\n\r\n  return (\r\n    <div \r\n      className={cn(\r\n        \"flex items-center justify-between py-3 bg-background\",\r\n        className\r\n      )}\r\n    >\r\n      {/* Left: Import, Export - S√ÅT M√âP TR√ÅI */}\r\n      <div className=\"flex items-center gap-2\">\r\n        {leftActions}\r\n      </div>\r\n      \r\n      {/* Right: Trash & Column Toggle - S√ÅT M√âP PH·∫¢I */}\r\n      <div className=\"flex items-center gap-2\">\r\n        {rightActions}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAoBO,SAAS,YAAY,EAAE,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAoB;IAC9F,kEAAkE;IAClE,IAAI,YAAY,CAAC,eAAe,CAAC,cAAc;QAC7C,qBACE,6LAAC;YACC,WAAW,IAAA,qHAAE,EACX,wDACA;sBAGD;;;;;;IAGP;IAEA,IAAI,CAAC,eAAe,CAAC,cAAc,OAAO;IAE1C,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,wDACA;;0BAIF,6LAAC;gBAAI,WAAU;0BACZ;;;;;;0BAIH,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;KAnCgB"}},
    {"offset": {"line": 10249, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/layout/page-filters.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Input } from '../ui/input';\r\nimport { cn } from '../../lib/utils';\r\n\r\n/**\r\n * Page Filters Component\r\n * Mobile-first filters bar for search and custom filters\r\n * H√†ng 3 trong layout 3 t·∫ßng\r\n * Layout: Search + leftFilters b√™n TR√ÅI | rightFilters b√™n PH·∫¢I\r\n */\r\nexport interface PageFiltersProps {\r\n  /** Search input props */\r\n  searchValue?: string;\r\n  onSearchChange?: (value: string) => void;\r\n  searchPlaceholder?: string;\r\n  /** Deprecated: Use children for backward compatibility, or use leftFilters + rightFilters for new layout */\r\n  children?: React.ReactNode;\r\n  /** Filters to show next to search (left side) */\r\n  leftFilters?: React.ReactNode;\r\n  /** Filters to show on right side */\r\n  rightFilters?: React.ReactNode;\r\n  /** Additional CSS classes */\r\n  className?: string;\r\n}\r\n\r\nexport function PageFilters({ \r\n  searchValue = '',\r\n  onSearchChange,\r\n  searchPlaceholder = 'T√¨m ki·∫øm...',\r\n  children,\r\n  leftFilters,\r\n  rightFilters,\r\n  className \r\n}: PageFiltersProps) {\r\n  // Backward compatibility: if children is provided without leftFilters/rightFilters, use old layout\r\n  const useNewLayout = (leftFilters !== undefined || rightFilters !== undefined);\r\n  \r\n  if (!useNewLayout && children) {\r\n    return (\r\n      <div \r\n        className={cn(\r\n          \"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 py-3 bg-muted/20\",\r\n          className\r\n        )}\r\n      >\r\n        {/* Search bar - Full width on mobile, auto on desktop */}\r\n        {onSearchChange && (\r\n          <Input\r\n            type=\"search\"\r\n            placeholder={searchPlaceholder}\r\n            value={searchValue}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n            className=\"h-9 w-full sm:w-[280px] md:w-[360px] lg:w-[420px]\"\r\n          />\r\n        )}\r\n        \r\n        {/* Custom filters - Wrap on mobile */}\r\n        <div className=\"flex flex-wrap items-center gap-2\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // New layout: Search + leftFilters | rightFilters\r\n  return (\r\n    <div \r\n      className={cn(\r\n        \"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 py-3 bg-muted/20\",\r\n        className\r\n      )}\r\n    >\r\n      {/* Left side: Search + leftFilters */}\r\n      <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-1\">\r\n        {onSearchChange && (\r\n          <Input\r\n            type=\"search\"\r\n            placeholder={searchPlaceholder}\r\n            value={searchValue}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n            className=\"h-9 w-full sm:w-[280px] md:w-[360px] lg:w-[420px]\"\r\n          />\r\n        )}\r\n        {leftFilters && (\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            {leftFilters}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Right side: rightFilters */}\r\n      {rightFilters && (\r\n        <div className=\"flex flex-wrap items-center gap-2\">\r\n          {rightFilters}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAuBO,SAAS,YAAY,EAC1B,cAAc,EAAE,EAChB,cAAc,EACd,oBAAoB,aAAa,EACjC,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,SAAS,EACQ;IACjB,mGAAmG;IACnG,MAAM,eAAgB,gBAAgB,aAAa,iBAAiB;IAEpE,IAAI,CAAC,gBAAgB,UAAU;QAC7B,qBACE,6LAAC;YACC,WAAW,IAAA,qHAAE,EACX,kGACA;;gBAID,gCACC,6LAAC,sIAAK;oBACJ,MAAK;oBACL,aAAa;oBACb,OAAO;oBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oBAC9C,WAAU;;;;;;8BAKd,6LAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;IAIT;IAEA,kDAAkD;IAClD,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,kGACA;;0BAIF,6LAAC;gBAAI,WAAU;;oBACZ,gCACC,6LAAC,sIAAK;wBACJ,MAAK;wBACL,aAAa;wBACb,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;;;;;;oBAGb,6BACC,6LAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;YAMN,8BACC,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAKX;KAzEgB"}},
    {"offset": {"line": 10349, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/cashbook/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { useColumnVisibility } from '@/hooks/use-column-visibility';\r\nimport { ROUTES, generatePath } from '../../lib/router';\r\nimport { asSystemId, type SystemId } from '../../lib/id-types';\r\nimport { formatDate, formatDateCustom, toISODate, toISODateTime } from '../../lib/date-utils';\r\nimport { isAfter, isBefore, isSameDay, differenceInMilliseconds } from 'date-fns';\r\nimport { useReceiptStore } from '../receipts/store';\r\nimport { usePaymentStore } from '../payments/store';\r\nimport { useCashbookStore } from './store';\r\nimport { useBranchStore } from \"../settings/branches/store\";\r\nimport { useReceiptTypeStore } from \"../settings/receipt-types/store\";\r\nimport { usePaymentTypeStore } from \"../settings/payments/types/store\";\r\nimport { getColumns } from \"./columns\";\r\nimport type { CashbookTransaction } from \"./columns\";\r\nimport type { Receipt } from \"../receipts/types\";\r\nimport type { Payment } from \"../payments/types\";\r\nimport { ResponsiveDataTable } from \"../../components/data-table/responsive-data-table\";\r\nimport { DataTableFacetedFilter } from \"../../components/data-table/data-table-faceted-filter\";\r\nimport { DataTableDateFilter } from \"../../components/data-table/data-table-date-filter\";\r\nimport { DataTableColumnCustomizer } from \"../../components/data-table/data-table-column-toggle\";\r\nimport { DataTableExportDialog } from \"../../components/data-table/data-table-export-dialog\";\r\nimport { toast } from \"sonner\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardTitle,\r\n} from \"../../components/ui/card\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"../../components/ui/alert-dialog\";\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Plus, Minus, DollarSign, CreditCard, Calendar, User, Building2, FileText, MoreHorizontal, Trash, Edit, Eye, BarChart3, Download, Upload } from \"lucide-react\";\r\n// REMOVED: Voucher type no longer exists\r\n// import type { Voucher } from \"../vouchers/types\";\r\nimport Fuse from \"fuse.js\";\r\nimport { usePageHeader } from \"../../contexts/page-header-context\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"../../components/ui/select\";\r\nimport { MobileSearchBar } from \"../../components/mobile/mobile-search-bar\";\r\nimport { TouchButton } from \"../../components/mobile/touch-button\";\r\nimport { Badge } from \"../../components/ui/badge\";\r\nimport { Avatar, AvatarFallback } from \"../../components/ui/avatar\";\r\nimport { useMediaQuery } from \"../../lib/use-media-query\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"../../components/ui/dropdown-menu\";\r\nimport { PageToolbar } from \"../../components/layout/page-toolbar\";\r\nimport { PageFilters } from \"../../components/layout/page-filters\";\r\n\r\nconst formatCurrency = (value: number) => new Intl.NumberFormat('vi-VN').format(value);\r\n\r\ntype CashbookTransactionWithBalance = CashbookTransaction & { runningBalance?: number };\r\n\r\nexport function CashbookPage() {\r\n  const { data: receipts } = useReceiptStore();\r\n  const { data: payments, remove: removePayment } = usePaymentStore();\r\n  const transactions = React.useMemo<CashbookTransaction[]>(() => {\r\n    const validReceipts = (receipts || [])\r\n      .filter(r => r && r.systemId && r.id && r.date && r.accountSystemId && r.status !== 'cancelled')\r\n      .map(r => ({ ...r, type: 'receipt' as const }));\r\n    const validPayments = (payments || [])\r\n      .filter(p => p && p.systemId && p.id && p.date && p.accountSystemId && p.status !== 'cancelled')\r\n      .map(p => ({ ...p, type: 'payment' as const }));\r\n    return [...validReceipts, ...validPayments];\r\n  }, [receipts, payments]);\r\n  const remove = (systemId: SystemId) => {\r\n    const isReceipt = receipts.some(r => r.systemId === systemId);\r\n    if (isReceipt) {\r\n      useReceiptStore.getState().remove(systemId);\r\n    } else {\r\n      removePayment(systemId);\r\n    }\r\n  };\r\n  const { accounts } = useCashbookStore();\r\n  const { data: branches } = useBranchStore();\r\n  const { data: receiptTypes } = useReceiptTypeStore();\r\n  const { data: paymentTypes } = usePaymentTypeStore();\r\n  const router = useRouter();\r\n  const isMobile = useMediaQuery(\"(max-width: 768px)\");\r\n\r\n  const [rowSelection, setRowSelection] = React.useState<Record<string, boolean>>({});\r\n  const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n  const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n  const [isBulkDeleteAlertOpen, setIsBulkDeleteAlertOpen] = React.useState(false);\r\n\r\n  // Table state\r\n  const [sorting, setSorting] = React.useState<{ id: string, desc: boolean }>({ id: 'createdAt', desc: true });\r\n  const [globalFilter, setGlobalFilter] = React.useState('');\r\n  const [debouncedGlobalFilter, setDebouncedGlobalFilter] = React.useState('');\r\n  const [branchFilter, setBranchFilter] = React.useState('all');\r\n  const [accountFilter, setAccountFilter] = React.useState('all');\r\n  const [typeFilter, setTypeFilter] = React.useState<Set<string>>(new Set());\r\n  const [dateRange, setDateRange] = React.useState<[string | undefined, string | undefined] | undefined>(undefined);\r\n  const [columnVisibility, setColumnVisibility] = useColumnVisibility('cashbook', {});\r\n  const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\r\n  const [pinnedColumns, setPinnedColumns] = React.useState<string[]>(['select', 'type', 'id']);\r\n  const [expanded, setExpanded] = React.useState<Record<string, boolean>>({});\r\n  const [pagination, setPagination] = React.useState({ pageIndex: 0, pageSize: 50 });\r\n\r\n  // ‚úÖ Mobile infinite scroll state\r\n  const [mobileLoadedCount, setMobileLoadedCount] = React.useState(20);\r\n\r\n  // ‚úÖ Debounce search\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedGlobalFilter(globalFilter);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [globalFilter]);\r\n\r\n  const handleCancel = React.useCallback((systemId: SystemId) => {\r\n    setIdToDelete(systemId);\r\n    setIsAlertOpen(true);\r\n  }, []);\r\n  \r\n  const handleEdit = React.useCallback((transaction: Receipt | Payment) => {\r\n    const isReceipt = 'payerType' in transaction;\r\n    const editRoute = isReceipt ? ROUTES.FINANCE.RECEIPT_EDIT : ROUTES.FINANCE.PAYMENT_EDIT;\r\n    router.push(generatePath(editRoute, { systemId: transaction.systemId }));\r\n  }, [router]);\r\n\r\n  const columns = React.useMemo(() => getColumns(accounts, handleCancel, (path: string) => router.push(path)), [accounts, handleCancel, router]);\r\n\r\n  // ‚úÖ Set default column visibility - Run ONCE on mount\r\n  React.useEffect(() => {\r\n    const defaultVisibleColumns = [\r\n      'type', 'id', 'date', 'amount', 'targetName', 'paymentMethodName',\r\n      'accountSystemId', 'paymentReceiptTypeName', 'status', 'branchName',\r\n      'description', 'runningBalance', 'createdBy', 'createdAt'\r\n    ];\r\n    const initialVisibility: Record<string, boolean> = {};\r\n    columns.forEach(c => {\r\n      if (c.id === 'select' || c.id === 'actions') {\r\n        initialVisibility[c.id!] = true;\r\n      } else {\r\n        initialVisibility[c.id!] = defaultVisibleColumns.includes(c.id!);\r\n      }\r\n    });\r\n    setColumnVisibility(initialVisibility);\r\n    setColumnOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n  }, [columns]); // ‚úÖ Depends on columns\r\n\r\n  const fuse = React.useMemo(() => new Fuse(transactions, {\r\n    keys: [\"id\", \"description\", \"targetName\", \"originalDocumentId\", \"createdBy\"],\r\n    threshold: 0.3,\r\n    ignoreLocation: true\r\n  }), [transactions]);\r\n\r\n  const confirmCancel = () => {\r\n    if (idToDelete) {\r\n      const isReceipt = receipts.some(r => r.systemId === idToDelete);\r\n      if (isReceipt) {\r\n        useReceiptStore.getState().cancel(idToDelete);\r\n      } else {\r\n        usePaymentStore.getState().cancel(idToDelete);\r\n      }\r\n      toast.success(\"ƒê√£ h·ªßy giao d·ªãch\");\r\n    }\r\n    setIsAlertOpen(false);\r\n  };\r\n\r\n  const confirmBulkCancel = () => {\r\n    const idsToCancel = Object.keys(rowSelection);\r\n    idsToCancel.forEach(systemId => {\r\n      const sysId = asSystemId(systemId);\r\n      const isReceipt = receipts.some(r => r.systemId === sysId);\r\n      if (isReceipt) {\r\n        useReceiptStore.getState().cancel(sysId);\r\n      } else {\r\n        usePaymentStore.getState().cancel(sysId);\r\n      }\r\n    });\r\n    toast.success(`ƒê√£ h·ªßy ${idsToCancel.length} giao d·ªãch`);\r\n    setRowSelection({});\r\n    setIsBulkDeleteAlertOpen(false);\r\n  };\r\n\r\n  // ‚úÖ Filter options\r\n  const typeOptions = React.useMemo(() => [\r\n    { value: 'receipt', label: 'Phi·∫øu thu' },\r\n    { value: 'payment', label: 'Phi·∫øu chi' }\r\n  ], []);\r\n\r\n  const accountOptions = React.useMemo(() =>\r\n    accounts.map(acc => ({ value: acc.systemId, label: acc.name }))\r\n  , [accounts]);\r\n\r\n  const filteredAccounts = React.useMemo(() => {\r\n    const byAccount = accountFilter === 'all'\r\n      ? accounts\r\n      : accounts.filter(acc => acc.systemId === accountFilter);\r\n\r\n    if (branchFilter === 'all') {\r\n      return byAccount;\r\n    }\r\n\r\n    return byAccount.filter(acc => acc.branchSystemId === branchFilter);\r\n  }, [accounts, accountFilter, branchFilter]);\r\n\r\n  const filteredAccountIds = React.useMemo(\r\n    () => filteredAccounts.map(acc => acc.systemId),\r\n    [filteredAccounts]\r\n  );\r\n\r\n  // Calculate summary stats\r\n  const { openingBalance, totalReceipts, totalPayments, closingBalance, filteredTransactions } = React.useMemo(() => {\r\n    if (filteredAccounts.length === 0 || filteredAccountIds.length === 0) {\r\n      return {\r\n        openingBalance: 0,\r\n        totalReceipts: 0,\r\n        totalPayments: 0,\r\n        closingBalance: 0,\r\n        filteredTransactions: [] as CashbookTransactionWithBalance[]\r\n      };\r\n    }\r\n\r\n    const startDate = dateRange?.[0] ? new Date(dateRange[0]) : null;\r\n    const endDate = dateRange?.[1] ? new Date(dateRange[1]) : null;\r\n\r\n    const openingBalancesByAccount = new Map<string, number>();\r\n    filteredAccounts.forEach(acc => {\r\n      openingBalancesByAccount.set(acc.systemId, acc.initialBalance);\r\n    });\r\n\r\n    const branchAwareTransactions = transactions\r\n      .filter(t => filteredAccountIds.includes(t.accountSystemId))\r\n      .filter(t => branchFilter === 'all' || t.branchSystemId === branchFilter)\r\n      .sort((a, b) => differenceInMilliseconds(new Date(a.date), new Date(b.date)));\r\n\r\n    // Bring balances forward with transactions before the selected period\r\n    if (startDate) {\r\n      branchAwareTransactions.forEach(t => {\r\n        if (isBefore(new Date(t.date), startDate)) {\r\n          const delta = t.type === 'receipt' ? t.amount : -t.amount;\r\n          const current = openingBalancesByAccount.get(t.accountSystemId) ?? 0;\r\n          openingBalancesByAccount.set(t.accountSystemId, current + delta);\r\n        }\r\n      });\r\n    }\r\n\r\n    const aggregateOpeningBalance = Array.from(openingBalancesByAccount.values()).reduce((sum, value) => sum + value, 0);\r\n\r\n    let periodTransactions = branchAwareTransactions.filter(t => {\r\n      const tDate = new Date(t.date);\r\n      const matchesStart = startDate ? isSameDay(tDate, startDate) || isAfter(tDate, startDate) : true;\r\n      const matchesEnd = endDate ? isSameDay(tDate, endDate) || isBefore(tDate, endDate) : true;\r\n      return matchesStart && matchesEnd;\r\n    });\r\n\r\n    if (typeFilter.size > 0) {\r\n      periodTransactions = periodTransactions.filter(t => typeFilter.has(t.type));\r\n    }\r\n\r\n    if (debouncedGlobalFilter) {\r\n      const searchResults = fuse.search(debouncedGlobalFilter);\r\n      const searchIds = new Set(searchResults.map(r => r.item.systemId));\r\n      periodTransactions = periodTransactions.filter(t => searchIds.has(t.systemId));\r\n    }\r\n\r\n    let totalReceipts = 0;\r\n    let totalPayments = 0;\r\n\r\n    periodTransactions.forEach(t => {\r\n      if (t.type === 'receipt') {\r\n        totalReceipts += t.amount;\r\n      } else {\r\n        totalPayments += t.amount;\r\n      }\r\n    });\r\n\r\n    const runningBalancesByAccount = new Map(openingBalancesByAccount);\r\n    let aggregateRunningBalance = aggregateOpeningBalance;\r\n    const runningBalanceByTransaction = new Map<string, number>();\r\n\r\n    const chronologicalTransactions = [...periodTransactions].sort((a, b) =>\r\n      differenceInMilliseconds(new Date(a.date), new Date(b.date))\r\n    );\r\n\r\n    chronologicalTransactions.forEach(t => {\r\n      const delta = t.type === 'receipt' ? t.amount : -t.amount;\r\n      const currentAccountBalance = runningBalancesByAccount.get(t.accountSystemId) ?? 0;\r\n      const updatedAccountBalance = currentAccountBalance + delta;\r\n      runningBalancesByAccount.set(t.accountSystemId, updatedAccountBalance);\r\n      aggregateRunningBalance += delta;\r\n      runningBalanceByTransaction.set(\r\n        t.systemId,\r\n        accountFilter === 'all' ? aggregateRunningBalance : updatedAccountBalance\r\n      );\r\n    });\r\n\r\n    const enhancedTransactions: CashbookTransactionWithBalance[] = periodTransactions.map(t => ({\r\n      ...t,\r\n      runningBalance: runningBalanceByTransaction.get(t.systemId) ?? (accountFilter === 'all'\r\n        ? aggregateOpeningBalance\r\n        : openingBalancesByAccount.get(t.accountSystemId) ?? 0)\r\n    }));\r\n\r\n    return {\r\n      openingBalance: aggregateOpeningBalance,\r\n      totalReceipts,\r\n      totalPayments,\r\n      closingBalance: aggregateRunningBalance,\r\n      filteredTransactions: enhancedTransactions\r\n    };\r\n  }, [filteredAccounts, filteredAccountIds, branchFilter, transactions, dateRange, typeFilter, debouncedGlobalFilter, fuse, accountFilter]);\r\n\r\n  // ‚úÖ Reset mobile loaded count when filters change\r\n  React.useEffect(() => {\r\n    setMobileLoadedCount(20);\r\n  }, [debouncedGlobalFilter, branchFilter, accountFilter, typeFilter, dateRange]);\r\n\r\n  // ‚úÖ Mobile infinite scroll listener\r\n  React.useEffect(() => {\r\n    if (!isMobile) return;\r\n\r\n    const handleScroll = () => {\r\n      const scrollPosition = window.scrollY + window.innerHeight;\r\n      const documentHeight = document.documentElement.scrollHeight;\r\n      const scrollPercentage = (scrollPosition / documentHeight) * 100;\r\n\r\n      // Load more when scroll 80%\r\n      if (scrollPercentage > 80 && mobileLoadedCount < filteredTransactions.length) {\r\n        setMobileLoadedCount(prev => Math.min(prev + 20, filteredTransactions.length));\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [isMobile, mobileLoadedCount, filteredTransactions.length]);\r\n\r\n  // ‚úÖ Sort data\r\n  const sortedData = React.useMemo(() => {\r\n    const sorted = [...filteredTransactions];\r\n    if (sorting.id) {\r\n      sorted.sort((a, b) => {\r\n        const aValue = (a as any)[sorting.id];\r\n        const bValue = (b as any)[sorting.id];\r\n        // Special handling for date columns - parse as Date for proper comparison\r\n        if (sorting.id === 'createdAt' || sorting.id === 'date') {\r\n          const aTime = aValue ? new Date(aValue).getTime() : 0;\r\n          const bTime = bValue ? new Date(bValue).getTime() : 0;\r\n          // N·∫øu th·ªùi gian b·∫±ng nhau, sort theo systemId (ID m·ªõi h∆°n = s·ªë l·ªõn h∆°n)\r\n          if (aTime === bTime) {\r\n            const aNum = parseInt(a.systemId.replace(/\\D/g, '')) || 0;\r\n            const bNum = parseInt(b.systemId.replace(/\\D/g, '')) || 0;\r\n            return sorting.desc ? bNum - aNum : aNum - bNum;\r\n          }\r\n          return sorting.desc ? bTime - aTime : aTime - bTime;\r\n        }\r\n        if (aValue < bValue) return sorting.desc ? 1 : -1;\r\n        if (aValue > bValue) return sorting.desc ? -1 : 1;\r\n        return 0;\r\n      });\r\n    }\r\n    return sorted;\r\n  }, [filteredTransactions, sorting]);\r\n\r\n  // ‚úÖ Paginate data for desktop\r\n  const pageCount = Math.ceil(sortedData.length / pagination.pageSize);\r\n  const paginatedData = React.useMemo(() => \r\n    sortedData.slice(pagination.pageIndex * pagination.pageSize, (pagination.pageIndex + 1) * pagination.pageSize),\r\n    [sortedData, pagination]\r\n  );\r\n\r\n  // ‚úÖ Export configuration\r\n  const exportConfig = React.useMemo(() => ({\r\n    fileName: 'So_quy',\r\n    columns: columns as any,\r\n  }), [columns]);\r\n\r\n  // ‚úÖ Memoize header actions - CH·ªà action ch√≠nh (t·∫°o phi·∫øu)\r\n  const headerActions = React.useMemo(() => [\r\n    <Button key=\"payment\" variant=\"outline\" size=\"sm\" className=\"h-9\" onClick={() => router.push(ROUTES.FINANCE.PAYMENT_NEW)}>\r\n      <Minus className=\"mr-2 h-4 w-4\" />\r\n      L·∫≠p Phi·∫øu Chi\r\n    </Button>,\r\n    <Button key=\"receipt\" size=\"sm\" className=\"h-9\" onClick={() => router.push(ROUTES.FINANCE.RECEIPT_NEW)}>\r\n      <Plus className=\"mr-2 h-4 w-4\" />\r\n      L·∫≠p Phi·∫øu Thu\r\n    </Button>\r\n  ], [router]);\r\n\r\n  const breadcrumb = React.useMemo(() => ([\r\n    { label: 'Trang ch·ªß', href: ROUTES.ROOT },\r\n    { label: 'S·ªï qu·ªπ', href: ROUTES.FINANCE.CASHBOOK },\r\n  ]), []);\r\n\r\n  // Set page header with actions - B·ªè subtitle v√† docLink theo guidelines\r\n  usePageHeader({\r\n    title: 'S·ªï qu·ªπ',\r\n    showBackButton: false,\r\n    breadcrumb,\r\n    actions: headerActions\r\n  });\r\n\r\n  // ‚úÖ Mobile card component\r\n  const MobileTransactionCard = ({ transaction }: { transaction: CashbookTransactionWithBalance }) => {\r\n    const branch = branches.find(b => b.systemId === transaction.branchSystemId);\r\n    const isReceipt = transaction.type === 'receipt';\r\n    const voucherType = isReceipt\r\n      ? receiptTypes.find(rt => rt.systemId === (transaction as Receipt).paymentReceiptTypeSystemId)\r\n      : paymentTypes.find(pt => pt.systemId === (transaction as Payment).paymentReceiptTypeSystemId);\r\n\r\n    const viewRoute = isReceipt ? ROUTES.FINANCE.RECEIPT_VIEW : ROUTES.FINANCE.PAYMENT_VIEW;\r\n\r\n    return (\r\n      <Card\r\n        className=\"hover:shadow-md transition-shadow cursor-pointer\"\r\n        onClick={() => router.push(generatePath(viewRoute, { systemId: transaction.systemId }))}\r\n      >\r\n        <CardContent className=\"p-4\">\r\n          {/* Header: Icon + ID + Type + Menu */}\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n              <Avatar className={`h-8 w-8 flex-shrink-0 ${isReceipt ? 'bg-emerald-500/10' : 'bg-destructive/10'}`}>\r\n                <AvatarFallback className={isReceipt ? 'bg-emerald-500/10 text-emerald-600' : 'bg-destructive/10 text-destructive'}>\r\n                  {isReceipt ? <DollarSign className=\"h-4 w-4\" /> : <CreditCard className=\"h-4 w-4\" />}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n              <div className=\"flex items-center gap-1.5 min-w-0 flex-1\">\r\n                <CardTitle className=\"font-semibold text-sm\">{transaction?.id || 'N/A'}</CardTitle>\r\n                <Badge variant={isReceipt ? \"default\" : \"destructive\"} className=\"text-xs\">\r\n                  {isReceipt ? 'Thu' : 'Chi'}\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n            <DropdownMenu>\r\n              <DropdownMenuTrigger asChild>\r\n                <TouchButton\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  className=\"h-8 w-8 p-0 flex-shrink-0\"\r\n                  onClick={(e) => e.stopPropagation()}\r\n                >\r\n                  <MoreHorizontal className=\"h-4 w-4\" />\r\n                </TouchButton>\r\n              </DropdownMenuTrigger>\r\n              <DropdownMenuContent align=\"end\">\r\n                <DropdownMenuItem onClick={(e) => { e.stopPropagation(); router.push(generatePath(viewRoute, { systemId: transaction.systemId })); }}>\r\n                  <Eye className=\"mr-2 h-4 w-4\" />\r\n                  Xem chi ti·∫øt\r\n                </DropdownMenuItem>\r\n                <DropdownMenuItem onClick={(e) => { e.stopPropagation(); handleEdit(transaction); }}>\r\n                  <Edit className=\"mr-2 h-4 w-4\" />\r\n                  Ch·ªânh s·ª≠a\r\n                </DropdownMenuItem>\r\n                <DropdownMenuSeparator />\r\n                <DropdownMenuItem onClick={(e) => { e.stopPropagation(); handleCancel(transaction.systemId); }} className=\"text-red-600\">\r\n                  <Trash className=\"mr-2 h-4 w-4\" />\r\n                  H·ªßy giao d·ªãch\r\n                </DropdownMenuItem>\r\n              </DropdownMenuContent>\r\n            </DropdownMenu>\r\n          </div>\r\n\r\n          {/* Amount + Date */}\r\n          <div className=\"mb-3\">\r\n            <div className={`text-lg font-bold ${isReceipt ? 'text-emerald-600' : 'text-destructive'}`}>\r\n              {isReceipt ? '+' : '-'}{formatCurrency(transaction.amount)}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground flex items-center mt-1\">\r\n              <Calendar className=\"h-3 w-3 mr-1.5\" />\r\n              {formatDateCustom(new Date(transaction.date), 'dd/MM/yyyy')}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Divider */}\r\n          <div className=\"border-t mb-3\" />\r\n\r\n          {/* Details */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center text-xs text-muted-foreground\">\r\n              <User className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\r\n              <span className=\"truncate\">{isReceipt ? (transaction as Receipt).payerName : (transaction as Payment).recipientName}</span>\r\n            </div>\r\n            {voucherType && (\r\n              <div className=\"flex items-center text-xs text-muted-foreground\">\r\n                <FileText className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\r\n                <span className=\"truncate\">{voucherType.name}</span>\r\n              </div>\r\n            )}\r\n            {branch && (\r\n              <div className=\"flex items-center text-xs text-muted-foreground\">\r\n                <Building2 className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\r\n                <span className=\"truncate\">{branch.name}</span>\r\n              </div>\r\n            )}\r\n            {transaction.originalDocumentId && (\r\n              <div className=\"text-xs text-muted-foreground\">\r\n                CT: <span className=\"font-mono font-medium\">{transaction.originalDocumentId}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 flex flex-col h-full\">\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <p className=\"text-sm text-muted-foreground\">S·ªë d∆∞ ƒë·∫ßu k·ª≥</p>\r\n            <p className=\"text-h5 font-semibold\">{formatCurrency(openingBalance)}</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <p className=\"text-sm text-muted-foreground\">T·ªïng thu</p>\r\n            <p className=\"text-h5 font-semibold text-emerald-600\">{formatCurrency(totalReceipts)}</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <p className=\"text-sm text-muted-foreground\">T·ªïng chi</p>\r\n            <p className=\"text-h5 font-semibold text-destructive\">{formatCurrency(totalPayments)}</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <p className=\"text-h5 font-bold\">{formatCurrency(closingBalance)}</p>\r\n            <p className=\"text-sm text-muted-foreground\">T·ªìn cu·ªëi k·ª≥</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Toolbar - Action ph·ª• (Desktop only) */}\r\n      {!isMobile && (\r\n        <PageToolbar\r\n          leftActions={\r\n            <>\r\n              <DataTableExportDialog\r\n                allData={transactions}\r\n                filteredData={sortedData}\r\n                pageData={paginatedData}\r\n                config={exportConfig}\r\n              />\r\n              <Button variant=\"outline\" size=\"sm\" className=\"h-9\" onClick={() => router.push(ROUTES.FINANCE.CASHBOOK_REPORTS)}>\r\n                <BarChart3 className=\"mr-2 h-4 w-4\" />\r\n                B√°o c√°o\r\n              </Button>\r\n            </>\r\n          }\r\n          rightActions={\r\n            <DataTableColumnCustomizer\r\n              columns={columns as any}\r\n              columnVisibility={columnVisibility}\r\n              setColumnVisibility={setColumnVisibility}\r\n              columnOrder={columnOrder}\r\n              setColumnOrder={setColumnOrder}\r\n              pinnedColumns={pinnedColumns}\r\n              setPinnedColumns={setPinnedColumns}\r\n            />\r\n          }\r\n        />\r\n      )}\r\n\r\n      {/* Filters */}\r\n      <PageFilters\r\n        searchValue={globalFilter}\r\n        onSearchChange={setGlobalFilter}\r\n        searchPlaceholder=\"T√¨m theo m√£ phi·∫øu, ng∆∞·ªùi nh·∫≠n/chi, ch·ª©ng t·ª´...\"\r\n      >\r\n        <Select value={branchFilter} onValueChange={setBranchFilter}>\r\n          <SelectTrigger className=\"h-9 w-full sm:w-[180px]\">\r\n            <SelectValue placeholder=\"Chi nh√°nh\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"all\">T·∫•t c·∫£ chi nh√°nh</SelectItem>\r\n            {branches.map(b => (\r\n              <SelectItem key={b.systemId} value={b.systemId}>{b.name}</SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        <Select value={accountFilter} onValueChange={setAccountFilter}>\r\n          <SelectTrigger className=\"h-9 w-full sm:w-[180px]\">\r\n            <SelectValue placeholder=\"T√†i kho·∫£n qu·ªπ\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"all\">T·∫•t c·∫£ t√†i kho·∫£n</SelectItem>\r\n            {accounts.map(acc => (\r\n              <SelectItem key={acc.systemId} value={acc.systemId}>{acc.name}</SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        <DataTableFacetedFilter\r\n          title=\"Lo·∫°i phi·∫øu\"\r\n          options={typeOptions}\r\n          selectedValues={typeFilter}\r\n          onSelectedValuesChange={setTypeFilter}\r\n        />\r\n\r\n        <DataTableDateFilter\r\n          value={dateRange}\r\n          onChange={setDateRange}\r\n          title=\"Kho·∫£ng th·ªùi gian\"\r\n        />\r\n      </PageFilters>\r\n\r\n      {/* Mobile View - Cards with Infinite Scroll */}\r\n      {isMobile ? (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"space-y-2\">\r\n            {filteredTransactions.length === 0 ? (\r\n              <Card>\r\n                <CardContent className=\"p-8 text-center text-muted-foreground\">\r\n                  Kh√¥ng t√¨m th·∫•y giao d·ªãch n√†o.\r\n                </CardContent>\r\n              </Card>\r\n            ) : (\r\n              filteredTransactions.slice(0, mobileLoadedCount).map((transaction) => (\r\n                <MobileTransactionCard key={transaction.systemId} transaction={transaction} />\r\n              ))\r\n            )}\r\n          </div>\r\n\r\n          {/* Loading indicator & End message */}\r\n          {filteredTransactions.length > 0 && (\r\n            <div className=\"py-6 text-center\">\r\n              {mobileLoadedCount < filteredTransactions.length ? (\r\n                <div className=\"flex items-center justify-center gap-2 text-muted-foreground\">\r\n                  <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent\" />\r\n                  <span className=\"text-sm\">ƒêang t·∫£i th√™m...</span>\r\n                </div>\r\n              ) : filteredTransactions.length > 20 ? (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  ƒê√£ hi·ªÉn th·ªã t·∫•t c·∫£ {filteredTransactions.length} giao d·ªãch\r\n                </p>\r\n              ) : null}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        /* Desktop View - ResponsiveDataTable */\r\n        <ResponsiveDataTable\r\n          columns={columns as any}\r\n          data={paginatedData}\r\n          pageCount={pageCount}\r\n          pagination={pagination}\r\n          setPagination={setPagination}\r\n          rowCount={sortedData.length}\r\n          rowSelection={rowSelection}\r\n          setRowSelection={setRowSelection}\r\n          onBulkDelete={() => setIsBulkDeleteAlertOpen(true)}\r\n          sorting={sorting}\r\n          setSorting={setSorting as React.Dispatch<React.SetStateAction<{ id: string; desc: boolean; }>>}\r\n          allSelectedRows={sortedData.filter(v => rowSelection[v.systemId])}\r\n          expanded={{}}\r\n          setExpanded={() => {}}\r\n          columnVisibility={columnVisibility}\r\n          setColumnVisibility={setColumnVisibility}\r\n          columnOrder={columnOrder}\r\n          setColumnOrder={setColumnOrder}\r\n          pinnedColumns={pinnedColumns}\r\n          setPinnedColumns={setPinnedColumns}\r\n          onRowClick={(row) => {\r\n            const viewRoute = row.type === 'receipt' ? ROUTES.FINANCE.RECEIPT_VIEW : ROUTES.FINANCE.PAYMENT_VIEW;\r\n            router.push(generatePath(viewRoute, { systemId: row.systemId }));\r\n          }}\r\n          renderMobileCard={(row) => <MobileTransactionCard transaction={row} />}\r\n        />\r\n      )}\r\n\r\n      {/* Delete Single Alert */}\r\n      <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>H·ªßy giao d·ªãch n√†y?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Giao d·ªãch s·∫Ω ƒë∆∞·ª£c chuy·ªÉn sang tr·∫°ng th√°i \"ƒê√£ h·ªßy\". B·∫°n c√≥ th·ªÉ xem l·∫°i giao d·ªãch ƒë√£ h·ªßy trong danh s√°ch.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel className=\"h-9\">ƒê√≥ng</AlertDialogCancel>\r\n            <AlertDialogAction className=\"h-9\" onClick={confirmCancel}>H·ªßy giao d·ªãch</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Bulk Delete Alert */}\r\n      <AlertDialog open={isBulkDeleteAlertOpen} onOpenChange={setIsBulkDeleteAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>H·ªßy {Object.keys(rowSelection).length} giao d·ªãch?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              C√°c giao d·ªãch s·∫Ω ƒë∆∞·ª£c chuy·ªÉn sang tr·∫°ng th√°i \"ƒê√£ h·ªßy\".\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel className=\"h-9\">ƒê√≥ng</AlertDialogCancel>\r\n            <AlertDialogAction className=\"h-9\" onClick={confirmBulkCancel}>H·ªßy t·∫•t c·∫£</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11903, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/app/%28authenticated%29/cashbook/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { CashbookPage } from '@/features/cashbook/page'\r\nexport default CashbookPage\r\n"],"names":[],"mappings":";;;;AACA;AADA;;uCAEe,gJAAY"}}]
}