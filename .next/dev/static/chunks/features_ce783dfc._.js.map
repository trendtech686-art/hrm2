{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/api/complaints-api.ts"],"sourcesContent":["/**\r\n * Complaints API - Isolated API functions\r\n */\r\n\r\nimport type { Complaint } from '../types';\r\n\r\nconst API_BASE = '/api/complaints';\r\n\r\nexport interface ComplaintsParams {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  status?: string;\r\n  customerId?: string;\r\n  orderId?: string;\r\n  startDate?: string;\r\n  endDate?: string;\r\n  sortBy?: string;\r\n  sortOrder?: 'asc' | 'desc';\r\n}\r\n\r\nexport interface PaginatedResponse<T> {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport async function fetchComplaints(params: ComplaintsParams = {}): Promise<PaginatedResponse<Complaint>> {\r\n  const { page = 1, limit = 50, ...rest } = params;\r\n  \r\n  const searchParams = new URLSearchParams({\r\n    page: String(page),\r\n    limit: String(limit),\r\n  });\r\n  \r\n  Object.entries(rest).forEach(([key, value]) => {\r\n    if (value != null && value !== '') {\r\n      searchParams.set(key, String(value));\r\n    }\r\n  });\r\n  \r\n  const res = await fetch(`${API_BASE}?${searchParams}`, { credentials: 'include' });\r\n  if (!res.ok) throw new Error(`Failed to fetch complaints: ${res.statusText}`);\r\n  return res.json();\r\n}\r\n\r\nexport async function fetchComplaint(id: string): Promise<Complaint> {\r\n  const res = await fetch(`${API_BASE}/${id}`, { credentials: 'include' });\r\n  if (!res.ok) throw new Error(`Failed to fetch complaint: ${res.statusText}`);\r\n  return res.json();\r\n}\r\n\r\nexport async function createComplaint(data: Partial<Complaint>): Promise<Complaint> {\r\n  const res = await fetch(API_BASE, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to create complaint`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport async function updateComplaint(systemId: string, data: Partial<Complaint>): Promise<Complaint> {\r\n  const res = await fetch(`${API_BASE}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to update complaint`);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteComplaint(id: string): Promise<void> {\r\n  const res = await fetch(`${API_BASE}/${id}`, { method: 'DELETE', credentials: 'include' });\r\n  if (!res.ok) throw new Error(`Failed to delete complaint`);\r\n}\r\n\r\nexport async function fetchComplaintStats(): Promise<{\r\n  total: number;\r\n  pending: number;\r\n  inProgress: number;\r\n  resolved: number;\r\n}> {\r\n  const res = await fetch(`${API_BASE}/stats`, { credentials: 'include' });\r\n  if (!res.ok) throw new Error(`Failed to fetch complaint stats`);\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;AAID,MAAM,WAAW;AAyBV,eAAe,gBAAgB,SAA2B,CAAC,CAAC;IACjE,MAAM,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,EAAE,GAAG,MAAM,GAAG;IAE1C,MAAM,eAAe,IAAI,gBAAgB;QACvC,MAAM,OAAO;QACb,OAAO,OAAO;IAChB;IAEA,OAAO,OAAO,CAAC,MAAM,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACxC,IAAI,SAAS,QAAQ,UAAU,IAAI;YACjC,aAAa,GAAG,CAAC,KAAK,OAAO;QAC/B;IACF;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,cAAc,EAAE;QAAE,aAAa;IAAU;IAChF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,IAAI,UAAU,EAAE;IAC5E,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,eAAe,EAAU;IAC7C,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,IAAI,EAAE;QAAE,aAAa;IAAU;IACtE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,IAAI,UAAU,EAAE;IAC3E,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,gBAAgB,IAAwB;IAC5D,MAAM,MAAM,MAAM,MAAM,UAAU;QAChC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC9C,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI,CAAC,0BAA0B,CAAC;IAC/D;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,gBAAgB,QAAgB,EAAE,IAAwB;IAC9E,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC9C,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI,CAAC,0BAA0B,CAAC;IAC/D;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,gBAAgB,EAAU;IAC9C,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,IAAI,EAAE;QAAE,QAAQ;QAAU,aAAa;IAAU;IACxF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,0BAA0B,CAAC;AAC3D;AAEO,eAAe;IAMpB,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,MAAM,CAAC,EAAE;QAAE,aAAa;IAAU;IACtE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,+BAA+B,CAAC;IAC9D,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/hooks/use-complaints.ts"],"sourcesContent":["/**\r\n * useComplaints - React Query hooks\r\n * \r\n * ⚠️ Direct import: import { useComplaints } from '@/features/complaints/hooks/use-complaints'\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\r\nimport {\r\n  fetchComplaints,\r\n  fetchComplaint,\r\n  createComplaint,\r\n  updateComplaint,\r\n  deleteComplaint,\r\n  fetchComplaintStats,\r\n  type ComplaintsParams,\r\n} from '../api/complaints-api';\r\nimport type { Complaint } from '../types';\r\n\r\nexport const complaintKeys = {\r\n  all: ['complaints'] as const,\r\n  lists: () => [...complaintKeys.all, 'list'] as const,\r\n  list: (params: ComplaintsParams) => [...complaintKeys.lists(), params] as const,\r\n  details: () => [...complaintKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...complaintKeys.details(), id] as const,\r\n  stats: () => [...complaintKeys.all, 'stats'] as const,\r\n};\r\n\r\nexport function useComplaints(params: ComplaintsParams = {}) {\r\n  return useQuery({\r\n    queryKey: complaintKeys.list(params),\r\n    queryFn: () => fetchComplaints(params),\r\n    staleTime: 30_000,\r\n    gcTime: 5 * 60 * 1000,\r\n    placeholderData: keepPreviousData,\r\n  });\r\n}\r\n\r\nexport function useComplaint(id: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: complaintKeys.detail(id!),\r\n    queryFn: () => fetchComplaint(id!),\r\n    enabled: !!id,\r\n    staleTime: 60_000,\r\n  });\r\n}\r\n\r\nexport function useComplaintStats() {\r\n  return useQuery({\r\n    queryKey: complaintKeys.stats(),\r\n    queryFn: fetchComplaintStats,\r\n    staleTime: 60_000,\r\n  });\r\n}\r\n\r\ninterface UseComplaintMutationsOptions {\r\n  onCreateSuccess?: (complaint: Complaint) => void;\r\n  onUpdateSuccess?: (complaint: Complaint) => void;\r\n  onDeleteSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useComplaintMutations(options: UseComplaintMutationsOptions = {}) {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const create = useMutation({\r\n    mutationFn: createComplaint,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: complaintKeys.lists() });\r\n      queryClient.invalidateQueries({ queryKey: complaintKeys.stats() });\r\n      options.onCreateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: Partial<Complaint> }) => \r\n      updateComplaint(systemId, data),\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: complaintKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: complaintKeys.lists() });\r\n      queryClient.invalidateQueries({ queryKey: complaintKeys.stats() });\r\n      options.onUpdateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: deleteComplaint,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: complaintKeys.all });\r\n      options.onDeleteSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  return { create, update, remove };\r\n}\r\n\r\nexport function usePendingComplaints() {\r\n  return useComplaints({ status: 'pending' });\r\n}\r\n\r\nexport function useComplaintsByCustomer(customerId: string | null | undefined) {\r\n  return useComplaints({ customerId: customerId || undefined, limit: 50 });\r\n}\r\n\r\nexport function useComplaintsByOrder(orderId: string | null | undefined) {\r\n  return useComplaints({ orderId: orderId || undefined, limit: 20 });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;CAIC,GAED;AAAA;AAAA;AAAA;AACA;;;;AAWO,MAAM,gBAAgB;IAC3B,KAAK;QAAC;KAAa;IACnB,OAAO,IAAM;eAAI,cAAc,GAAG;YAAE;SAAO;IAC3C,MAAM,CAAC,SAA6B;eAAI,cAAc,KAAK;YAAI;SAAO;IACtE,SAAS,IAAM;eAAI,cAAc,GAAG;YAAE;SAAS;IAC/C,QAAQ,CAAC,KAAe;eAAI,cAAc,OAAO;YAAI;SAAG;IACxD,OAAO,IAAM;eAAI,cAAc,GAAG;YAAE;SAAQ;AAC9C;AAEO,SAAS,cAAc,SAA2B,CAAC,CAAC;;IACzD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,cAAc,IAAI,CAAC;QAC7B,OAAO;sCAAE,IAAM,IAAA,wKAAe,EAAC;;QAC/B,WAAW;QACX,QAAQ,IAAI,KAAK;QACjB,iBAAiB,8LAAgB;IACnC;AACF;GARgB;;QACP,0LAAQ;;;AASV,SAAS,aAAa,EAA6B;;IACxD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,cAAc,MAAM,CAAC;QAC/B,OAAO;qCAAE,IAAM,IAAA,uKAAc,EAAC;;QAC9B,SAAS,CAAC,CAAC;QACX,WAAW;IACb;AACF;IAPgB;;QACP,0LAAQ;;;AAQV,SAAS;;IACd,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,cAAc,KAAK;QAC7B,SAAS,4KAAmB;QAC5B,WAAW;IACb;AACF;IANgB;;QACP,0LAAQ;;;AAcV,SAAS,sBAAsB,UAAwC,CAAC,CAAC;;IAC9E,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,wKAAe;QAC3B,SAAS;yDAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,cAAc,KAAK;gBAAG;gBAChE,YAAY,iBAAiB,CAAC;oBAAE,UAAU,cAAc,KAAK;gBAAG;gBAChE,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;yDAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAkD,GAC7E,IAAA,wKAAe,EAAC,UAAU;;QAC5B,SAAS;yDAAE,CAAC,MAAM;gBAChB,YAAY,iBAAiB,CAAC;oBAAE,UAAU,cAAc,MAAM,CAAC,UAAU,QAAQ;gBAAE;gBACnF,YAAY,iBAAiB,CAAC;oBAAE,UAAU,cAAc,KAAK;gBAAG;gBAChE,YAAY,iBAAiB,CAAC;oBAAE,UAAU,cAAc,KAAK;gBAAG;gBAChE,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,wKAAe;QAC3B,SAAS;yDAAE;gBACT,YAAY,iBAAiB,CAAC;oBAAE,UAAU,cAAc,GAAG;gBAAC;gBAC5D,QAAQ,eAAe;YACzB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QAAE;QAAQ;QAAQ;IAAO;AAClC;IAnCgB;;QACM,2MAAc;QAEnB,gMAAW;QAUX,gMAAW;QAYX,gMAAW;;;AAYrB,SAAS;;IACd,OAAO,cAAc;QAAE,QAAQ;IAAU;AAC3C;IAFgB;;QACP;;;AAGF,SAAS,wBAAwB,UAAqC;;IAC3E,OAAO,cAAc;QAAE,YAAY,cAAc;QAAW,OAAO;IAAG;AACxE;IAFgB;;QACP;;;AAGF,SAAS,qBAAqB,OAAkC;;IACrE,OAAO,cAAc;QAAE,SAAS,WAAW;QAAW,OAAO;IAAG;AAClE;IAFgB;;QACP"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/employees/api/employees-api.ts"],"sourcesContent":["/**\r\n * Employees API - Isolated API functions\r\n * \r\n * ⚠️ IMPORTANT: This file should ONLY contain:\r\n * - Fetch functions\r\n * - Type imports from ../types\r\n * - NO store imports\r\n * - NO cross-feature imports\r\n */\r\n\r\nimport type { Employee } from '../types';\r\n\r\nconst API_BASE = '/api/employees';\r\n\r\nexport interface EmployeesParams {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  departmentId?: string;\r\n  branchId?: string;\r\n  jobTitleId?: string;\r\n  status?: string;\r\n  sortBy?: string;\r\n  sortOrder?: 'asc' | 'desc';\r\n}\r\n\r\nexport interface PaginatedResponse<T> {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface CreateEmployeeInput {\r\n  fullName: string;\r\n  email?: string;\r\n  phone?: string;\r\n  departmentId?: string;\r\n  branchId?: string;\r\n  jobTitleId?: string;\r\n  hireDate?: string;\r\n  // Optional fields for updates\r\n  isDeleted?: boolean;\r\n  employmentStatus?: string;\r\n}\r\n\r\nexport interface UpdateEmployeeInput extends Partial<CreateEmployeeInput> {\r\n  systemId: string;\r\n}\r\n\r\n/**\r\n * Fetch paginated employees list\r\n */\r\nexport async function fetchEmployees(params: EmployeesParams = {}): Promise<PaginatedResponse<Employee>> {\r\n  const { page = 1, limit = 50, ...rest } = params;\r\n  \r\n  const searchParams = new URLSearchParams({\r\n    page: String(page),\r\n    limit: String(limit),\r\n  });\r\n  \r\n  // Add optional params\r\n  Object.entries(rest).forEach(([key, value]) => {\r\n    if (value != null && value !== '') {\r\n      searchParams.set(key, String(value));\r\n    }\r\n  });\r\n  \r\n  const res = await fetch(`${API_BASE}?${searchParams}`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to fetch employees: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Fetch single employee by ID\r\n */\r\nexport async function fetchEmployee(id: string): Promise<Employee> {\r\n  const res = await fetch(`${API_BASE}/${id}`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to fetch employee ${id}: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Create new employee\r\n */\r\nexport async function createEmployee(data: CreateEmployeeInput): Promise<Employee> {\r\n  const res = await fetch(API_BASE, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to create employee: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Update existing employee\r\n */\r\nexport async function updateEmployee({ systemId, ...data }: UpdateEmployeeInput): Promise<Employee> {\r\n  const res = await fetch(`${API_BASE}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to update employee: ${res.statusText}`);\r\n  }\r\n  \r\n  return res.json();\r\n}\r\n\r\n/**\r\n * Delete employee (soft delete)\r\n */\r\nexport async function deleteEmployee(id: string): Promise<void> {\r\n  const res = await fetch(`${API_BASE}/${id}`, {\r\n    method: 'DELETE',\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}));\r\n    throw new Error(error.message || `Failed to delete employee: ${res.statusText}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Search employees for autocomplete\r\n */\r\nexport async function searchEmployees(query: string, limit = 20): Promise<Employee[]> {\r\n  const res = await fetch(`${API_BASE}?search=${encodeURIComponent(query)}&limit=${limit}`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to search employees: ${res.statusText}`);\r\n  }\r\n  \r\n  const json = await res.json();\r\n  return json.data || [];\r\n}\r\n\r\n/**\r\n * Fetch employees by department\r\n */\r\nexport async function fetchEmployeesByDepartment(departmentId: string): Promise<Employee[]> {\r\n  const res = await fetch(`${API_BASE}?departmentId=${departmentId}&limit=100`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to fetch employees by department: ${res.statusText}`);\r\n  }\r\n  \r\n  const json = await res.json();\r\n  return json.data || [];\r\n}\r\n\r\n/**\r\n * Fetch employees by branch\r\n */\r\nexport async function fetchEmployeesByBranch(branchId: string): Promise<Employee[]> {\r\n  const res = await fetch(`${API_BASE}?branchId=${branchId}&limit=100`, {\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!res.ok) {\r\n    throw new Error(`Failed to fetch employees by branch: ${res.statusText}`);\r\n  }\r\n  \r\n  const json = await res.json();\r\n  return json.data || [];\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/employees/hooks/use-all-employees.ts"],"sourcesContent":["/**\r\n * useAllEmployees - Convenience hook for components needing all employees as flat array\r\n * \r\n * Use case: Dropdowns, selects, comboboxes that need all employees for selection\r\n * \r\n * ⚠️ For paginated views, use useEmployees() instead\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useEmployees } from './use-employees';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\n/**\r\n * Returns all employees as a flat array\r\n * Compatible with legacy store pattern: { data: employees }\r\n */\r\nexport function useAllEmployees() {\r\n  const query = useEmployees({ limit: 30 });\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns employees formatted as options for Select/Combobox\r\n */\r\nexport function useEmployeeOptions() {\r\n  const { data, isLoading } = useAllEmployees();\r\n  \r\n  const options = data.map(e => ({\r\n    value: e.systemId,\r\n    label: e.fullName,\r\n  }));\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Helper hook to find an employee by ID from cached data\r\n * Replaces legacy findById() method\r\n */\r\nexport function useEmployeeFinder() {\r\n  const { data } = useAllEmployees();\r\n  \r\n  const findById = React.useCallback(\r\n    (systemId: SystemId | string | undefined) => {\r\n      if (!systemId) return undefined;\r\n      return data.find(e => e.systemId === systemId);\r\n    },\r\n    [data]\r\n  );\r\n  \r\n  return { findById };\r\n}\r\n\r\n/**\r\n * Helper hook for searching employees (for Combobox async search)\r\n * Returns a search function that filters cached employees\r\n */\r\nexport function useEmployeeSearcher() {\r\n  const { data } = useAllEmployees();\r\n  \r\n  const searchEmployees = React.useCallback(\r\n    async (query: string, _page = 0, limit = 100) => {\r\n      const lowerQuery = query.toLowerCase();\r\n      const filtered = data.filter(e => \r\n        e.fullName?.toLowerCase().includes(lowerQuery) ||\r\n        e.id?.toLowerCase().includes(lowerQuery) ||\r\n        e.phone?.includes(query)\r\n      );\r\n      \r\n      return {\r\n        items: filtered.slice(0, limit).map(e => ({\r\n          value: e.systemId,\r\n          label: e.fullName || e.id || 'N/A',\r\n        })),\r\n        total: filtered.length,\r\n      };\r\n    },\r\n    [data]\r\n  );\r\n  \r\n  return { searchEmployees };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;CAMC,GAED;AACA;;;;AAOO,SAAS;;IACd,MAAM,QAAQ,IAAA,qLAAY,EAAC;QAAE,OAAO;IAAG;IAEvC,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GATgB;;QACA,qLAAY;;;AAarB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YAC7B,OAAO,EAAE,QAAQ;YACjB,OAAO,EAAE,QAAQ;QACnB,CAAC;IAED,OAAO;QAAE;QAAS;IAAU;AAC9B;IATgB;;QACc;;;AAcvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,4KAAiB;mDAChC,CAAC;YACC,IAAI,CAAC,UAAU,OAAO;YACtB,OAAO,KAAK,IAAI;2DAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;kDACA;QAAC;KAAK;IAGR,OAAO;QAAE;IAAS;AACpB;IAZgB;;QACG;;;AAiBZ,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,kBAAkB,4KAAiB;4DACvC,OAAO,OAAe,QAAQ,CAAC,EAAE,QAAQ,GAAG;YAC1C,MAAM,aAAa,MAAM,WAAW;YACpC,MAAM,WAAW,KAAK,MAAM;6EAAC,CAAA,IAC3B,EAAE,QAAQ,EAAE,cAAc,SAAS,eACnC,EAAE,EAAE,EAAE,cAAc,SAAS,eAC7B,EAAE,KAAK,EAAE,SAAS;;YAGpB,OAAO;gBACL,OAAO,SAAS,KAAK,CAAC,GAAG,OAAO,GAAG;wEAAC,CAAA,IAAK,CAAC;4BACxC,OAAO,EAAE,QAAQ;4BACjB,OAAO,EAAE,QAAQ,IAAI,EAAE,EAAE,IAAI;wBAC/B,CAAC;;gBACD,OAAO,SAAS,MAAM;YACxB;QACF;2DACA;QAAC;KAAK;IAGR,OAAO;QAAE;IAAgB;AAC3B;IAxBgB;;QACG"}},
    {"offset": {"line": 551, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/employees/hooks/use-employees.ts"],"sourcesContent":["/**\r\n * useEmployees - React Query hooks for employees\r\n * \r\n * ⚠️ IMPORTANT: Direct import pattern\r\n * - Import this file directly: import { useEmployees } from '@/features/employees/hooks/use-employees'\r\n * - NEVER import from '@/features/employees' or '@/features/employees/store'\r\n * \r\n * This hook is ISOLATED - it only depends on:\r\n * - @tanstack/react-query\r\n * - Local API functions\r\n * - Local types\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\r\nimport {\r\n  fetchEmployees,\r\n  fetchEmployee,\r\n  createEmployee,\r\n  updateEmployee,\r\n  deleteEmployee,\r\n  searchEmployees,\r\n  fetchEmployeesByDepartment,\r\n  fetchEmployeesByBranch,\r\n  type EmployeesParams,\r\n  type CreateEmployeeInput,\r\n  type UpdateEmployeeInput,\r\n} from '../api/employees-api';\r\n\r\n// Query keys - exported for invalidation\r\nexport const employeeKeys = {\r\n  all: ['employees'] as const,\r\n  lists: () => [...employeeKeys.all, 'list'] as const,\r\n  list: (params: EmployeesParams) => [...employeeKeys.lists(), params] as const,\r\n  details: () => [...employeeKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...employeeKeys.details(), id] as const,\r\n  search: (query: string) => [...employeeKeys.all, 'search', query] as const,\r\n  byDepartment: (id: string) => [...employeeKeys.all, 'department', id] as const,\r\n  byBranch: (id: string) => [...employeeKeys.all, 'branch', id] as const,\r\n};\r\n\r\n/**\r\n * Hook for fetching paginated employees list\r\n * \r\n * @example\r\n * ```tsx\r\n * function EmployeesPage() {\r\n *   const [page, setPage] = useState(1);\r\n *   const { data, isLoading } = useEmployees({ page, limit: 50 });\r\n *   \r\n *   return (\r\n *     <DataTable \r\n *       data={data?.data || []} \r\n *       pagination={data?.pagination}\r\n *       onPageChange={setPage}\r\n *     />\r\n *   );\r\n * }\r\n * ```\r\n */\r\nexport function useEmployees(params: EmployeesParams = {}) {\r\n  return useQuery({\r\n    queryKey: employeeKeys.list(params),\r\n    queryFn: () => fetchEmployees(params),\r\n    staleTime: 60_000, // 1 minute - employees don't change frequently\r\n    gcTime: 10 * 60 * 1000, // 10 minutes\r\n    placeholderData: keepPreviousData,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for fetching single employee by ID\r\n */\r\nexport function useEmployee(id: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: employeeKeys.detail(id!),\r\n    queryFn: () => fetchEmployee(id!),\r\n    enabled: !!id,\r\n    staleTime: 60_000,\r\n    gcTime: 10 * 60 * 1000,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for searching employees (autocomplete)\r\n */\r\nexport function useEmployeeSearch(query: string, limit = 20) {\r\n  return useQuery({\r\n    queryKey: employeeKeys.search(query),\r\n    queryFn: () => searchEmployees(query, limit),\r\n    enabled: query.length >= 2,\r\n    staleTime: 30_000,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for fetching employees by department\r\n */\r\nexport function useEmployeesByDepartment(departmentId: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: employeeKeys.byDepartment(departmentId!),\r\n    queryFn: () => fetchEmployeesByDepartment(departmentId!),\r\n    enabled: !!departmentId,\r\n    staleTime: 60_000,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for fetching employees by branch\r\n */\r\nexport function useEmployeesByBranch(branchId: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: employeeKeys.byBranch(branchId!),\r\n    queryFn: () => fetchEmployeesByBranch(branchId!),\r\n    enabled: !!branchId,\r\n    staleTime: 60_000,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for employee mutations (create/update/delete)\r\n */\r\ninterface UseEmployeeMutationsOptions {\r\n  onCreateSuccess?: (employee: unknown) => void;\r\n  onUpdateSuccess?: (employee: unknown) => void;\r\n  onDeleteSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useEmployeeMutations(options: UseEmployeeMutationsOptions = {}) {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const create = useMutation({\r\n    mutationFn: createEmployee,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: employeeKeys.lists() });\r\n      options.onCreateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: updateEmployee,\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: employeeKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: employeeKeys.lists() });\r\n      options.onUpdateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: deleteEmployee,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: employeeKeys.all });\r\n      options.onDeleteSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  return {\r\n    create,\r\n    update,\r\n    remove,\r\n    isCreating: create.isPending,\r\n    isUpdating: update.isPending,\r\n    isDeleting: remove.isPending,\r\n    isMutating: create.isPending || update.isPending || remove.isPending,\r\n  };\r\n}\r\n\r\n/**\r\n * Hook for getting active employees\r\n */\r\nexport function useActiveEmployees(params: Omit<EmployeesParams, 'status'> = {}) {\r\n  return useEmployees({ ...params, status: 'active' });\r\n}\r\n\r\n/**\r\n * Prefetch employee for faster navigation\r\n */\r\nexport function usePrefetchEmployee() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return (id: string) => {\r\n    queryClient.prefetchQuery({\r\n      queryKey: employeeKeys.detail(id),\r\n      queryFn: () => fetchEmployee(id),\r\n      staleTime: 60_000,\r\n    });\r\n  };\r\n}\r\n\r\n// Re-export from use-all-employees for backward compatibility\r\nexport { useAllEmployees, useEmployeeOptions, useEmployeeFinder, useEmployeeSearcher } from './use-all-employees';\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 806, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/api/branches-api.ts"],"sourcesContent":["/**\r\n * Branches API functions\r\n * \r\n * ⚠️ Direct import: import { fetchBranches } from '@/features/settings/branches/api/branches-api'\r\n */\r\n\r\nimport type { BranchModel as Branch } from '@/generated/prisma/models/Branch';\r\n\r\nconst BASE_URL = '/api/branches';\r\n\r\nexport interface BranchesParams {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  isDefault?: boolean;\r\n  sortBy?: string;\r\n  sortOrder?: 'asc' | 'desc';\r\n}\r\n\r\nexport interface BranchesResponse {\r\n  data: Branch[];\r\n  total: number;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nexport async function fetchBranches(params: BranchesParams = {}): Promise<BranchesResponse> {\r\n  const searchParams = new URLSearchParams();\r\n  \r\n  if (params.page) searchParams.set('page', String(params.page));\r\n  if (params.limit) searchParams.set('limit', String(params.limit));\r\n  if (params.search) searchParams.set('search', params.search);\r\n  if (params.isDefault !== undefined) searchParams.set('isDefault', String(params.isDefault));\r\n  if (params.sortBy) searchParams.set('sortBy', params.sortBy);\r\n  if (params.sortOrder) searchParams.set('sortOrder', params.sortOrder);\r\n  \r\n  const url = searchParams.toString() ? `${BASE_URL}?${searchParams}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch branches: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function fetchBranch(systemId: string): Promise<Branch> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch branch: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function createBranch(data: Omit<Branch, 'systemId' | 'createdAt' | 'updatedAt'>): Promise<Branch> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to create branch');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function updateBranch(systemId: string, data: Partial<Branch>): Promise<Branch> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to update branch');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function deleteBranch(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to delete branch: ${response.statusText}`);\r\n  }\r\n}\r\n\r\nexport async function setDefaultBranch(systemId: string): Promise<Branch> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to set default branch');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport type { Branch };\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;;;;;;;AAID,MAAM,WAAW;AAkBV,eAAe,cAAc,SAAyB,CAAC,CAAC;IAC7D,MAAM,eAAe,IAAI;IAEzB,IAAI,OAAO,IAAI,EAAE,aAAa,GAAG,CAAC,QAAQ,OAAO,OAAO,IAAI;IAC5D,IAAI,OAAO,KAAK,EAAE,aAAa,GAAG,CAAC,SAAS,OAAO,OAAO,KAAK;IAC/D,IAAI,OAAO,MAAM,EAAE,aAAa,GAAG,CAAC,UAAU,OAAO,MAAM;IAC3D,IAAI,OAAO,SAAS,KAAK,WAAW,aAAa,GAAG,CAAC,aAAa,OAAO,OAAO,SAAS;IACzF,IAAI,OAAO,MAAM,EAAE,aAAa,GAAG,CAAC,UAAU,OAAO,MAAM;IAC3D,IAAI,OAAO,SAAS,EAAE,aAAa,GAAG,CAAC,aAAa,OAAO,SAAS;IAEpE,MAAM,MAAM,aAAa,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,cAAc,GAAG;IACtE,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,SAAS,UAAU,EAAE;IACpE;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,YAAY,QAAgB;IAChD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IAEtD,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,SAAS,UAAU,EAAE;IAClE;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,aAAa,IAA0D;IAC3F,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,aAAa,QAAgB,EAAE,IAAqB;IACxE,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,aAAa,QAAgB;IACjD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,SAAS,UAAU,EAAE;IACnE;AACF;AAEO,eAAe,iBAAiB,QAAgB;IACrD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAClE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;IAChD;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 903, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/hooks/use-branches.ts"],"sourcesContent":["/**\r\n * useBranches - React Query hooks\r\n * \r\n * ⚠️ Direct import: import { useBranches } from '@/features/settings/branches/hooks/use-branches'\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\r\nimport {\r\n  fetchBranches,\r\n  fetchBranch,\r\n  createBranch,\r\n  updateBranch,\r\n  deleteBranch,\r\n  setDefaultBranch,\r\n  type BranchesParams,\r\n  type Branch,\r\n} from '../api/branches-api';\r\n\r\nexport const branchKeys = {\r\n  all: ['branches'] as const,\r\n  lists: () => [...branchKeys.all, 'list'] as const,\r\n  list: (params: BranchesParams) => [...branchKeys.lists(), params] as const,\r\n  details: () => [...branchKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...branchKeys.details(), id] as const,\r\n};\r\n\r\nexport function useBranches(params: BranchesParams = {}) {\r\n  return useQuery({\r\n    queryKey: branchKeys.list(params),\r\n    queryFn: () => fetchBranches(params),\r\n    staleTime: 10 * 60 * 1000, // Branches rarely change\r\n    gcTime: 60 * 60 * 1000,\r\n    placeholderData: keepPreviousData,\r\n  });\r\n}\r\n\r\nexport function useBranch(id: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: branchKeys.detail(id!),\r\n    queryFn: () => fetchBranch(id!),\r\n    enabled: !!id,\r\n    staleTime: 10 * 60 * 1000,\r\n  });\r\n}\r\n\r\ninterface UseBranchMutationsOptions {\r\n  onCreateSuccess?: (branch: Branch) => void;\r\n  onUpdateSuccess?: (branch: Branch) => void;\r\n  onDeleteSuccess?: () => void;\r\n  onSetDefaultSuccess?: (branch: Branch) => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useBranchMutations(options: UseBranchMutationsOptions = {}) {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const create = useMutation({\r\n    mutationFn: createBranch,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.all });\r\n      options.onCreateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: Partial<Branch> }) => \r\n      updateBranch(systemId, data),\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.lists() });\r\n      options.onUpdateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: deleteBranch,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.all });\r\n      options.onDeleteSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const makeDefault = useMutation({\r\n    mutationFn: setDefaultBranch,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.all });\r\n      options.onSetDefaultSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  return { create, update, remove, makeDefault };\r\n}\r\n\r\nexport function useAllBranches() {\r\n  return useBranches({ limit: 100 });\r\n}\r\n\r\nexport function useDefaultBranch() {\r\n  const { data, ...rest } = useBranches({ isDefault: true, limit: 1 });\r\n  return {\r\n    ...rest,\r\n    data: data?.data?.[0] ?? null,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;CAIC,GAED;AAAA;AAAA;AAAA;AACA;;;;AAWO,MAAM,aAAa;IACxB,KAAK;QAAC;KAAW;IACjB,OAAO,IAAM;eAAI,WAAW,GAAG;YAAE;SAAO;IACxC,MAAM,CAAC,SAA2B;eAAI,WAAW,KAAK;YAAI;SAAO;IACjE,SAAS,IAAM;eAAI,WAAW,GAAG;YAAE;SAAS;IAC5C,QAAQ,CAAC,KAAe;eAAI,WAAW,OAAO;YAAI;SAAG;AACvD;AAEO,SAAS,YAAY,SAAyB,CAAC,CAAC;;IACrD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,WAAW,IAAI,CAAC;QAC1B,OAAO;oCAAE,IAAM,IAAA,8KAAa,EAAC;;QAC7B,WAAW,KAAK,KAAK;QACrB,QAAQ,KAAK,KAAK;QAClB,iBAAiB,8LAAgB;IACnC;AACF;GARgB;;QACP,0LAAQ;;;AASV,SAAS,UAAU,EAA6B;;IACrD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,WAAW,MAAM,CAAC;QAC5B,OAAO;kCAAE,IAAM,IAAA,4KAAW,EAAC;;QAC3B,SAAS,CAAC,CAAC;QACX,WAAW,KAAK,KAAK;IACvB;AACF;IAPgB;;QACP,0LAAQ;;;AAgBV,SAAS,mBAAmB,UAAqC,CAAC,CAAC;;IACxE,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,6KAAY;QACxB,SAAS;sDAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,GAAG;gBAAC;gBACzD,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;sDAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAA+C,GAC1E,IAAA,6KAAY,EAAC,UAAU;;QACzB,SAAS;sDAAE,CAAC,MAAM;gBAChB,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,MAAM,CAAC,UAAU,QAAQ;gBAAE;gBAChF,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,KAAK;gBAAG;gBAC7D,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,6KAAY;QACxB,SAAS;sDAAE;gBACT,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,GAAG;gBAAC;gBACzD,QAAQ,eAAe;YACzB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,cAAc,IAAA,gMAAW,EAAC;QAC9B,YAAY,iLAAgB;QAC5B,SAAS;2DAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,GAAG;gBAAC;gBACzD,QAAQ,mBAAmB,GAAG;YAChC;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QAAE;QAAQ;QAAQ;QAAQ;IAAY;AAC/C;IA1CgB;;QACM,2MAAc;QAEnB,gMAAW;QASX,gMAAW;QAWX,gMAAW;QASN,gMAAW;;;AAY1B,SAAS;;IACd,OAAO,YAAY;QAAE,OAAO;IAAI;AAClC;IAFgB;;QACP;;;AAGF,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,GAAG,YAAY;QAAE,WAAW;QAAM,OAAO;IAAE;IAClE,OAAO;QACL,GAAG,IAAI;QACP,MAAM,MAAM,MAAM,CAAC,EAAE,IAAI;IAC3B;AACF;IANgB;;QACY"}},
    {"offset": {"line": 1089, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/store-info/api/store-info-api.ts"],"sourcesContent":["/**\r\n * Store Info Settings API Layer\r\n * Handles all store information settings API calls\r\n */\r\n\r\nimport type { StoreGeneralInfo, StoreGeneralInfoInput } from '../store-info-store';\r\n\r\nconst BASE_URL = '/api/settings/store-info';\r\n\r\n/**\r\n * Fetch store information\r\n */\r\nexport async function fetchStoreInfo(): Promise<StoreGeneralInfo> {\r\n  const response = await fetch(BASE_URL);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch store info');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Update store information\r\n */\r\nexport async function updateStoreInfo(\r\n  data: StoreGeneralInfoInput,\r\n  metadata?: { updatedBySystemId?: string; updatedByName?: string }\r\n): Promise<StoreGeneralInfo> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ ...data, ...metadata }),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to update store info');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Reset store info to defaults\r\n */\r\nexport async function resetStoreInfo(): Promise<StoreGeneralInfo> {\r\n  const response = await fetch(`${BASE_URL}/reset`, {\r\n    method: 'POST',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to reset store info');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Upload store logo\r\n */\r\nexport async function uploadStoreLogo(file: File): Promise<{ url: string }> {\r\n  const formData = new FormData();\r\n  formData.append('logo', file);\r\n  \r\n  const response = await fetch(`${BASE_URL}/logo`, {\r\n    method: 'POST',\r\n    body: formData,\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to upload logo');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;AAID,MAAM,WAAW;AAKV,eAAe;IACpB,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,gBACpB,IAA2B,EAC3B,QAAiE;IAEjE,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,GAAG,IAAI;YAAE,GAAG,QAAQ;QAAC;IAC9C;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,MAAM,CAAC,EAAE;QAChD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,gBAAgB,IAAU;IAC9C,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,QAAQ;IAExB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,KAAK,CAAC,EAAE;QAC/C,QAAQ;QACR,MAAM;IACR;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 1155, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/store-info/hooks/use-store-info.ts"],"sourcesContent":["/**\r\n * Store Info Settings React Query Hooks\r\n * Provides data fetching and mutations for store information\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchStoreInfo,\r\n  updateStoreInfo,\r\n  resetStoreInfo,\r\n  uploadStoreLogo,\r\n} from '../api/store-info-api';\r\nimport type { StoreGeneralInfoInput } from '../store-info-store';\r\n\r\n// Query keys factory\r\nexport const storeInfoKeys = {\r\n  all: ['store-info'] as const,\r\n  info: () => [...storeInfoKeys.all, 'current'] as const,\r\n};\r\n\r\n/**\r\n * Hook to fetch store information\r\n */\r\nexport function useStoreInfo() {\r\n  return useQuery({\r\n    queryKey: storeInfoKeys.info(),\r\n    queryFn: fetchStoreInfo,\r\n    staleTime: 1000 * 60 * 30, // 30 minutes - info rarely changes\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * Hook providing store info mutations\r\n */\r\nexport function useStoreInfoMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const invalidateInfo = () => {\r\n    queryClient.invalidateQueries({ queryKey: storeInfoKeys.all });\r\n  };\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ \r\n      data, \r\n      metadata \r\n    }: { \r\n      data: StoreGeneralInfoInput; \r\n      metadata?: { updatedBySystemId?: string; updatedByName?: string };\r\n    }) => updateStoreInfo(data, metadata),\r\n    onSuccess: () => {\r\n      invalidateInfo();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const reset = useMutation({\r\n    mutationFn: () => resetStoreInfo(),\r\n    onSuccess: () => {\r\n      invalidateInfo();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const uploadLogo = useMutation({\r\n    mutationFn: (file: File) => uploadStoreLogo(file),\r\n    onSuccess: () => {\r\n      invalidateInfo();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    update,\r\n    reset,\r\n    uploadLogo,\r\n    isLoading: update.isPending || reset.isPending || uploadLogo.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;CAGC,GAED;AAAA;AAAA;AACA;;;;AASO,MAAM,gBAAgB;IAC3B,KAAK;QAAC;KAAa;IACnB,MAAM,IAAM;eAAI,cAAc,GAAG;YAAE;SAAU;AAC/C;AAKO,SAAS;;IACd,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,cAAc,IAAI;QAC5B,SAAS,yLAAc;QACvB,WAAW,OAAO,KAAK;IACzB;AACF;GANgB;;QACP,0LAAQ;;;AAeV,SAAS,sBAAsB,UAA6B,CAAC,CAAC;;IACnE,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,iBAAiB;QACrB,YAAY,iBAAiB,CAAC;YAAE,UAAU,cAAc,GAAG;QAAC;IAC9D;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;yDAAE,CAAC,EACX,IAAI,EACJ,QAAQ,EAIT,GAAK,IAAA,0LAAe,EAAC,MAAM;;QAC5B,SAAS;yDAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,QAAQ,IAAA,gMAAW,EAAC;QACxB,UAAU;wDAAE,IAAM,IAAA,yLAAc;;QAChC,SAAS;wDAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,aAAa,IAAA,gMAAW,EAAC;QAC7B,UAAU;6DAAE,CAAC,OAAe,IAAA,0LAAe,EAAC;;QAC5C,SAAS;6DAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QACA;QACA;QACA,WAAW,OAAO,SAAS,IAAI,MAAM,SAAS,IAAI,WAAW,SAAS;IACxE;AACF;IA9CgB;;QACM,2MAAc;QAMnB,gMAAW;QAeZ,gMAAW;QASN,gMAAW"}},
    {"offset": {"line": 1261, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/types.ts"],"sourcesContent":["// =============================================\r\n// COMPLAINT TYPES & INTERFACES\r\n// =============================================\r\n\r\nimport type { Subtask } from '../../components/shared/subtask-list';\r\nimport { type SystemId, type BusinessId } from '../../lib/id-types';\r\n\r\nexport type ComplaintType =\r\n  | \"wrong-product\" // Sai hàng\r\n  | \"missing-items\" // Thiếu hàng\r\n  | \"wrong-packaging\" // Đóng gói sai quy cách\r\n  | \"warehouse-defect\" // Trả hàng lỗi do kho\r\n  | \"product-condition\"; // Khách phàn nàn về tình trạng hàng\r\n\r\nexport type ComplaintStatus =\r\n  | \"pending\" // Chờ xử lý\r\n  | \"investigating\" // Đang kiểm tra\r\n  | \"resolved\" // Đã giải quyết\r\n  | \"cancelled\" // Đã hủy\r\n  | \"ended\"; // Kết thúc\r\n\r\nexport type ComplaintResolution =\r\n  | \"refund\" // Trừ tiền vào đơn hàng\r\n  | \"return-shipping\" // Gửi trả hàng (shop chịu phí)\r\n  | \"advice-only\" // Tư vấn/hỗ trợ\r\n  | \"replacement\" // Đổi sản phẩm\r\n  | \"rejected\"; // Không chấp nhận\r\n\r\nexport type ComplaintVerification =\r\n  | \"verified-correct\" // Xác nhận đúng\r\n  | \"verified-incorrect\" // Xác nhận sai\r\n  | \"pending-verification\"; // Chưa xác minh\r\n\r\nexport interface ComplaintImage {\r\n  id: SystemId;\r\n  url: string;\r\n  uploadedBy: SystemId; // userId (branded)\r\n  uploadedAt: Date;\r\n  description?: string;\r\n  type: \"initial\" | \"evidence\"; // initial = từ khách, evidence = bằng chứng từ nhân viên\r\n}\r\n\r\nexport interface ComplaintAction {\r\n  id: SystemId;\r\n  actionType: \r\n    | \"created\" \r\n    | \"assigned\" \r\n    | \"investigated\" \r\n    | \"verified\" \r\n    | \"verified-correct\"\r\n    | \"verified-incorrect\"\r\n    | \"resolved\" \r\n    | \"rejected\" \r\n    | \"cancelled\"\r\n    | \"ended\"\r\n    | \"reopened\"\r\n    | \"status-changed\"\r\n    | \"commented\";\r\n  performedBy: SystemId; // userId (branded)\r\n  performedAt: Date;\r\n  note?: string;\r\n  images?: string[]; // image ids\r\n  metadata?: Record<string, any>; // Additional data for specific actions\r\n}\r\n\r\nexport interface Complaint {\r\n  systemId: SystemId; // System-generated, immutable - dùng trong code (branded)\r\n  id: BusinessId; // User-facing, auto-generated từ systemId - dùng hiển thị (VD: COM001) (branded)\r\n  publicTrackingCode?: string; // Mã tracking công khai random (VD: rb5n8xzhrm) - cho khách hàng tra cứu\r\n  \r\n  // Thông tin đơn hàng liên quan\r\n  orderSystemId: SystemId; // SystemId của đơn hàng (ORD00000001) - dùng để query (branded)\r\n  orderCode?: string; // Mã đơn hàng hiển thị (ORD001) - chỉ để hiển thị, có thể lấy từ order\r\n  orderValue?: number; // Giá trị đơn hàng\r\n  \r\n  // Thông tin chi nhánh (lấy từ đơn hàng)\r\n  branchSystemId: SystemId; // SystemId của chi nhánh (từ order.branchSystemId) (branded)\r\n  branchName: string; // Tên chi nhánh (từ order.branchName)\r\n  \r\n  // Thông tin khách hàng\r\n  customerSystemId: SystemId; // SystemId của khách hàng (CUS00000001) - dùng để query (branded)\r\n  customerId?: string; // Mã khách hàng hiển thị (CUS001) - chỉ để hiển thị\r\n  customerName: string;\r\n  customerPhone: string;\r\n\r\n  // Thông tin khiếu nại\r\n  type: ComplaintType;\r\n  description: string; // Mô tả ban đầu từ manager/khách\r\n  images: ComplaintImage[]; // Hình ảnh từ khách (type: 'initial')\r\n  employeeImages?: Array<{  // Hình ảnh từ nhân viên kiểm tra (field riêng)\r\n    id: SystemId;\r\n    url: string;\r\n    uploadedBy: SystemId;  // (branded)\r\n    uploadedAt: Date;\r\n  }>;\r\n\r\n  // Trạng thái\r\n  status: ComplaintStatus;\r\n  verification: ComplaintVerification;\r\n  resolution?: ComplaintResolution;\r\n\r\n  // Người xử lý\r\n  createdBy: SystemId; // userId - Manager tạo (branded)\r\n  createdAt: Date;\r\n  assignedTo?: SystemId; // userId - Nhân viên được giao xử lý (branded)\r\n  assigneeName?: string; // Tên nhân viên xử lý (denormalized for display)\r\n  assignedAt?: Date;\r\n\r\n  // Xử lý\r\n  investigationNote?: string; // Ghi chú kiểm tra từ nhân viên\r\n  evidenceImages?: string[]; // Hình ảnh camera, bằng chứng\r\n  proposedSolution?: string; // Đề xuất giải pháp từ nhân viên\r\n  resolutionNote?: string; // Ghi chú cách xử lý cuối cùng\r\n\r\n  // KPI\r\n  isVerifiedCorrect?: boolean; // true = lỗi thật, false = khách sai\r\n  responsibleUserId?: SystemId; // Người chịu trách nhiệm (nếu lỗi đúng) (branded)\r\n  \r\n  // NEW: Quản lý sản phẩm thiếu/lỗi từ đơn hàng\r\n  affectedProducts?: Array<{\r\n      productSystemId: SystemId;\r\n    productId: string;           // SKU\r\n    productName: string;\r\n    unitPrice: number;           // NEW: Giá đơn vị\r\n    quantityOrdered: number;     // Số lượng trên đơn\r\n    quantityReceived: number;    // Số lượng khách nhận được\r\n    quantityMissing: number;     // Số lượng thiếu\r\n    quantityDefective: number;   // Số lượng hỏng/lỗi\r\n    quantityExcess: number;      // NEW: Số lượng thừa\r\n    issueType: 'excess' | 'missing' | 'defective' | 'other'; // NEW: Loại vấn đề\r\n    note?: string;               // Ghi chú chung\r\n    resolutionType?: 'refund' | 'replacement' | 'ignore'; // Cách xử lý\r\n  }>;\r\n  \r\n  // NEW: Theo dõi điều chỉnh kho\r\n  inventoryAdjustment?: {\r\n    adjusted: boolean;           // Đã điều chỉnh kho chưa\r\n    adjustedBy: SystemId;  // (branded)\r\n    adjustedAt: Date;\r\n    adjustmentNote: string;\r\n    inventoryCheckSystemId?: SystemId;  // ✅ Foreign Key - Link to Inventory Check (branded)\r\n    items: Array<{\r\n      productSystemId: SystemId;  // (branded)\r\n      productId: string;\r\n      productName: string;\r\n      quantityAdjusted: number;  // Số lượng cộng lại (+) hoặc trừ (-)\r\n      reason: string;\r\n      branchSystemId: SystemId;  // (branded)\r\n    }>;\r\n  };\r\n  \r\n  // NEW: Lịch sử phiếu chi/thu đã hủy (khi reopen/cancel/change verification)\r\n  cancelledPaymentsReceipts?: Array<{\r\n    paymentReceiptSystemId: SystemId;\r\n    paymentReceiptId: BusinessId;    // PC001, PT001\r\n    type: 'payment' | 'receipt';\r\n    amount: number;\r\n    cancelledAt: Date;\r\n    cancelledBy: SystemId;  // (branded)\r\n    cancelledReason: string;     // \"Mở lại khiếu nại\", \"Hủy khiếu nại\", \"Đổi verification\"\r\n  }>;\r\n  \r\n  // NEW: Lịch sử thay đổi kho (tracking mọi lần điều chỉnh và reverse)\r\n  inventoryHistory?: Array<{\r\n    adjustedAt: Date;\r\n    adjustedBy: SystemId;  // (branded)\r\n    adjustmentType: 'initial' | 'reversed';  // initial = điều chỉnh lần đầu, reversed = khôi phục\r\n    reason: string;                          // \"Xác nhận đúng - điều chỉnh kho\", \"Mở lại - khôi phục kho\"\r\n    items: Array<{\r\n      productSystemId: SystemId;  // (branded)\r\n      productId: string;\r\n      productName: string;\r\n      quantityAdjusted: number;              // Số lượng đã thay đổi (+/-)\r\n      branchSystemId: SystemId;  // (branded)\r\n    }>;\r\n  }>;\r\n  \r\n  // Metadata\r\n  resolvedBy?: SystemId; // userId - Người giải quyết (branded)\r\n  resolvedAt?: Date;\r\n  cancelledBy?: SystemId; // userId - Người hủy (branded)\r\n  cancelledAt?: Date;\r\n  endedBy?: SystemId; // userId - Người kết thúc (branded)\r\n  endedAt?: Date;\r\n  updatedAt: Date;\r\n  priority: \"low\" | \"medium\" | \"high\" | \"urgent\";\r\n  tags?: string[];\r\n\r\n  // Timeline\r\n  timeline: ComplaintAction[];\r\n\r\n  // Workflow\r\n  subtasks?: Subtask[]; // Quy trình xử lý khiếu nại\r\n}\r\n\r\n// =============================================\r\n// CONSTANTS\r\n// =============================================\r\n\r\nexport const complaintTypeLabels: Record<ComplaintType, string> = {\r\n  \"wrong-product\": \"Sai hàng\",\r\n  \"missing-items\": \"Thiếu hàng\",\r\n  \"wrong-packaging\": \"Đóng gói sai quy cách\",\r\n  \"warehouse-defect\": \"Trả hàng lỗi do kho\",\r\n  \"product-condition\": \"Phàn nàn về tình trạng hàng\",\r\n};\r\n\r\nexport const complaintTypeColors: Record<ComplaintType, string> = {\r\n  \"wrong-product\": \"bg-red-500/10 text-red-700 border-red-200\",\r\n  \"missing-items\": \"bg-orange-500/10 text-orange-700 border-orange-200\",\r\n  \"wrong-packaging\": \"bg-yellow-500/10 text-yellow-700 border-yellow-200\",\r\n  \"warehouse-defect\": \"bg-purple-500/10 text-purple-700 border-purple-200\",\r\n  \"product-condition\": \"bg-pink-500/10 text-pink-700 border-pink-200\",\r\n};\r\n\r\nexport const complaintStatusLabels: Record<ComplaintStatus, string> = {\r\n  pending: \"Chờ xử lý\",\r\n  investigating: \"Đang kiểm tra\",\r\n  resolved: \"Đã giải quyết\",\r\n  cancelled: \"Đã hủy\",\r\n  ended: \"Kết thúc\",\r\n};\r\n\r\nexport const complaintStatusColors: Record<ComplaintStatus, string> = {\r\n  pending: \"bg-gray-500/10 text-gray-700 border-gray-200\",\r\n  investigating: \"bg-blue-500/10 text-blue-700 border-blue-200\",\r\n  resolved: \"bg-green-500/10 text-green-700 border-green-200\",\r\n  cancelled: \"bg-red-500/10 text-red-700 border-red-200\",\r\n  ended: \"bg-purple-500/10 text-purple-700 border-purple-200\",\r\n};\r\n\r\nexport const complaintResolutionLabels: Record<ComplaintResolution, string> = {\r\n  refund: \"Trừ tiền vào đơn hàng\",\r\n  \"return-shipping\": \"Gửi trả hàng (shop chịu phí)\",\r\n  \"advice-only\": \"Tư vấn/Hỗ trợ\",\r\n  replacement: \"Đổi sản phẩm\",\r\n  rejected: \"Từ chối khiếu nại\",\r\n};\r\n\r\nexport const complaintVerificationLabels: Record<ComplaintVerification, string> = {\r\n  \"verified-correct\": \"Xác nhận đúng\",\r\n  \"verified-incorrect\": \"Xác nhận sai\",\r\n  \"pending-verification\": \"Chưa xác minh\",\r\n};\r\n\r\nexport const complaintVerificationColors: Record<ComplaintVerification, string> = {\r\n  \"verified-correct\": \"bg-red-500/10 text-red-700 border-red-200\",\r\n  \"verified-incorrect\": \"bg-green-500/10 text-green-700 border-green-200\",\r\n  \"pending-verification\": \"bg-gray-500/10 text-gray-700 border-gray-200\",\r\n};\r\n\r\nexport const complaintPriorityLabels = {\r\n  low: \"Thấp\",\r\n  medium: \"Trung bình\",\r\n  high: \"Cao\",\r\n  urgent: \"Khẩn cấp\",\r\n};\r\n\r\nexport const complaintPriorityColors = {\r\n  low: \"bg-gray-500/10 text-gray-700 border-gray-200\",\r\n  medium: \"bg-blue-500/10 text-blue-700 border-blue-200\",\r\n  high: \"bg-orange-500/10 text-orange-700 border-orange-200\",\r\n  urgent: \"bg-red-500/10 text-red-700 border-red-200\",\r\n};\r\n\r\n// =============================================\r\n// HELPER FUNCTIONS\r\n// =============================================\r\n\r\nexport function getComplaintTypeLabel(type: ComplaintType): string {\r\n  return complaintTypeLabels[type];\r\n}\r\n\r\nexport function getComplaintStatusLabel(status: ComplaintStatus): string {\r\n  return complaintStatusLabels[status];\r\n}\r\n\r\nexport function getComplaintResolutionLabel(resolution: ComplaintResolution): string {\r\n  return complaintResolutionLabels[resolution];\r\n}\r\n"],"names":[],"mappings":"AAAA,gDAAgD;AAChD,+BAA+B;AAC/B,gDAAgD;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqMzC,MAAM,sBAAqD;IAChE,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;IACnB,oBAAoB;IACpB,qBAAqB;AACvB;AAEO,MAAM,sBAAqD;IAChE,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;IACnB,oBAAoB;IACpB,qBAAqB;AACvB;AAEO,MAAM,wBAAyD;IACpE,SAAS;IACT,eAAe;IACf,UAAU;IACV,WAAW;IACX,OAAO;AACT;AAEO,MAAM,wBAAyD;IACpE,SAAS;IACT,eAAe;IACf,UAAU;IACV,WAAW;IACX,OAAO;AACT;AAEO,MAAM,4BAAiE;IAC5E,QAAQ;IACR,mBAAmB;IACnB,eAAe;IACf,aAAa;IACb,UAAU;AACZ;AAEO,MAAM,8BAAqE;IAChF,oBAAoB;IACpB,sBAAsB;IACtB,wBAAwB;AAC1B;AAEO,MAAM,8BAAqE;IAChF,oBAAoB;IACpB,sBAAsB;IACtB,wBAAwB;AAC1B;AAEO,MAAM,0BAA0B;IACrC,KAAK;IACL,QAAQ;IACR,MAAM;IACN,QAAQ;AACV;AAEO,MAAM,0BAA0B;IACrC,KAAK;IACL,QAAQ;IACR,MAAM;IACN,QAAQ;AACV;AAMO,SAAS,sBAAsB,IAAmB;IACvD,OAAO,mBAAmB,CAAC,KAAK;AAClC;AAEO,SAAS,wBAAwB,MAAuB;IAC7D,OAAO,qBAAqB,CAAC,OAAO;AACtC;AAEO,SAAS,4BAA4B,UAA+B;IACzE,OAAO,yBAAyB,CAAC,WAAW;AAC9C"}},
    {"offset": {"line": 1363, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/sla-utils.ts"],"sourcesContent":["/**\r\n * Complaints SLA Utilities\r\n * \r\n * NOTE: SLA settings are now synced with database via complaints-settings-sync.ts\r\n */\r\n\r\nimport type { Complaint } from './types';\r\nimport { getComplaintsSLASync } from '@/lib/complaints-settings-sync';\r\n\r\n// Default SLA settings (for backwards compatibility)\r\nexport const defaultSLA = {\r\n  low: { responseTime: 240, resolveTime: 48 },\r\n  medium: { responseTime: 120, resolveTime: 24 },\r\n  high: { responseTime: 60, resolveTime: 12 },\r\n  urgent: { responseTime: 30, resolveTime: 4 },\r\n};\r\n\r\nexport interface OverdueStatus {\r\n  isOverdueResponse: boolean;\r\n  isOverdueResolve: boolean;\r\n  responseTimeLeft: number;\r\n  resolveTimeLeft: number;\r\n}\r\n\r\n/**\r\n * Load SLA settings from database (sync version)\r\n */\r\nfunction loadSLASettings() {\r\n  return getComplaintsSLASync();\r\n}\r\n\r\nexport function checkOverdue(complaint: Complaint): OverdueStatus {\r\n  const now = new Date();\r\n  const createdAt = new Date(complaint.createdAt);\r\n  const priority = (complaint as any).priority || 'medium';\r\n  \r\n  // Load SLA from localStorage\r\n  const slaSettings = loadSLASettings();\r\n  const sla = slaSettings[priority as keyof typeof defaultSLA] || slaSettings.medium;\r\n\r\n  const minutesElapsed = (now.getTime() - createdAt.getTime()) / (1000 * 60);\r\n  const hoursElapsed = minutesElapsed / 60;\r\n\r\n  const hasResponse = complaint.timeline?.some(\r\n    (action) => action.actionType === 'commented' || action.actionType === 'investigated'\r\n  ) || false;\r\n\r\n  const responseTimeLeft = sla.responseTime - minutesElapsed;\r\n  const isOverdueResponse = !hasResponse && responseTimeLeft < 0;\r\n\r\n  const isResolved = complaint.status === 'resolved' || complaint.status === 'ended';\r\n  const resolveTimeLeft = sla.resolveTime - hoursElapsed;\r\n  const isOverdueResolve = !isResolved && resolveTimeLeft < 0;\r\n\r\n  return {\r\n    isOverdueResponse,\r\n    isOverdueResolve,\r\n    responseTimeLeft,\r\n    resolveTimeLeft,\r\n  };\r\n}\r\n\r\nexport function formatTimeLeft(minutes: number): string {\r\n  const abs = Math.abs(minutes);\r\n  if (abs < 60) return `${Math.floor(abs)} phút`;\r\n  if (abs < 1440) return `${Math.floor(abs / 60)} giờ`;\r\n  return `${Math.floor(abs / 1440)} ngày`;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;AAGD;;AAGO,MAAM,aAAa;IACxB,KAAK;QAAE,cAAc;QAAK,aAAa;IAAG;IAC1C,QAAQ;QAAE,cAAc;QAAK,aAAa;IAAG;IAC7C,MAAM;QAAE,cAAc;QAAI,aAAa;IAAG;IAC1C,QAAQ;QAAE,cAAc;QAAI,aAAa;IAAE;AAC7C;AASA;;CAEC,GACD,SAAS;IACP,OAAO,IAAA,gKAAoB;AAC7B;AAEO,SAAS,aAAa,SAAoB;IAC/C,MAAM,MAAM,IAAI;IAChB,MAAM,YAAY,IAAI,KAAK,UAAU,SAAS;IAC9C,MAAM,WAAW,AAAC,UAAkB,QAAQ,IAAI;IAEhD,6BAA6B;IAC7B,MAAM,cAAc;IACpB,MAAM,MAAM,WAAW,CAAC,SAAoC,IAAI,YAAY,MAAM;IAElF,MAAM,iBAAiB,CAAC,IAAI,OAAO,KAAK,UAAU,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE;IACzE,MAAM,eAAe,iBAAiB;IAEtC,MAAM,cAAc,UAAU,QAAQ,EAAE,KACtC,CAAC,SAAW,OAAO,UAAU,KAAK,eAAe,OAAO,UAAU,KAAK,mBACpE;IAEL,MAAM,mBAAmB,IAAI,YAAY,GAAG;IAC5C,MAAM,oBAAoB,CAAC,eAAe,mBAAmB;IAE7D,MAAM,aAAa,UAAU,MAAM,KAAK,cAAc,UAAU,MAAM,KAAK;IAC3E,MAAM,kBAAkB,IAAI,WAAW,GAAG;IAC1C,MAAM,mBAAmB,CAAC,cAAc,kBAAkB;IAE1D,OAAO;QACL;QACA;QACA;QACA;IACF;AACF;AAEO,SAAS,eAAe,OAAe;IAC5C,MAAM,MAAM,KAAK,GAAG,CAAC;IACrB,IAAI,MAAM,IAAI,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,KAAK,CAAC;IAC9C,IAAI,MAAM,MAAM,OAAO,GAAG,KAAK,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC;IACpD,OAAO,GAAG,KAAK,KAAK,CAAC,MAAM,MAAM,KAAK,CAAC;AACzC"}},
    {"offset": {"line": 1435, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/order.ts"],"sourcesContent":["/**\r\n * Mẫu in Đơn bán hàng - TipTap compatible\r\n * \r\n * QUAN TRỌNG - Quy tắc template:\r\n * 1. Bảng chứa {line_stt} là bảng line items - sẽ được lặp theo số sản phẩm\r\n * 2. Các bảng khác là bảng thông tin - không lặp\r\n * 3. Sử dụng inline styles để đảm bảo hiển thị đúng khi in\r\n * \r\n * CHUẨN TEMPLATE v2 (2025-12-08):\r\n * - Header: Logo trái + Store info phải (dạng table)\r\n * - Title: Căn giữa, border-bottom\r\n * - Info table: Label 22% nền xám\r\n * - Product table: table-layout fixed, responsive\r\n * - Summary: 250px căn phải\r\n * - Footer: border-top dashed, font nhỏ\r\n */\r\nexport const ORDER_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER: Logo trái + Thông tin cửa hàng phải -->\r\n<table style=\"width: 100%; margin-bottom: 12px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"width: 70px; vertical-align: top; padding-right: 10px;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">{store_address}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">ĐT: {store_phone_number} | Email: {store_email}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 12px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 8px;\">HÓA ĐƠN BÁN HÀNG</h2>\r\n<div style=\"text-align: center; margin-bottom: 12px; font-size: 11px;\">\r\n  <div>Số: <strong>{order_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Khách hàng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 4px 6px; width: 18%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Mã KH:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{customer_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Điện thoại:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{customer_phone_number}</td>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Nhóm KH:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{customer_group}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Địa chỉ:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\" colspan=\"3\">{billing_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">ĐC giao hàng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\" colspan=\"3\">{shipping_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">NV bán:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{account_name}</td>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Trạng thái:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{order_status}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM - Responsive với table-layout fixed -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 28px; font-size: 10px;\">STT</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: left; font-size: 10px;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 32px; font-size: 10px;\">ĐVT</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 28px; font-size: 10px;\">SL</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 65px; font-size: 10px;\">Đơn giá</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 50px; font-size: 10px;\">VAT</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 45px; font-size: 10px;\">CK</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 70px; font-size: 10px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px;\">{line_stt}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; font-size: 10px; word-wrap: break-word;\">{line_product_name}<br><small style=\"color: #666;\">{line_variant}</small></td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px;\">{line_unit}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px; font-weight: bold;\">{line_quantity}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{line_price}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{line_tax_amount}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{line_discount_amount}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{line_amount}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG TỔNG GIÁ TRỊ -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng số lượng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; width: 85px; font-size: 11px;\"><strong>{total_quantity}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng tiền hàng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Chiết khấu:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total_discount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Thuế:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total_tax}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Phí giao hàng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{delivery_fee}</td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; font-size: 11px;\"><strong>TỔNG CỘNG:</strong></td>\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\"><strong>{total_amount}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẰNG CHỮ -->\r\n<p style=\"margin: 8px 0; font-size: 11px;\"><strong>Bằng chữ:</strong> <em>{total_text}</em></p>\r\n\r\n<!-- THANH TOÁN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Phương thức TT:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{payment_name}</td>\r\n      <td style=\"padding: 4px 6px; width: 18%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">TT thanh toán:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{payment_status}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Khách đưa:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{payment_customer}</td>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Tiền thừa:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{money_return}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 8px 0; padding: 8px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">\r\n  <strong>Ghi chú:</strong> {order_note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 25px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 8px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; font-size: 11px;\">Người mua hàng</div>\r\n        <div style=\"color: #888; font-size: 10px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div style=\"font-size: 11px;\">{customer_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 8px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; font-size: 11px;\">Người bán hàng</div>\r\n        <div style=\"color: #888; font-size: 10px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div style=\"font-size: 11px;\">{account_name}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 10px; color: #666;\">\r\n  <div>Cảm ơn quý khách đã mua hàng!</div>\r\n  <div>Hotline: {store_phone_number} | In lúc: {print_date} {print_time}</div>\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;CAeC;;;;AACM,MAAM,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqK/B,CAAC"}},
    {"offset": {"line": 1627, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/quote.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu báo giá / Đơn tạm tính - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const QUOTE_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n      <div>ĐT: {store_phone_number} | Email: {store_email}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU BÁO GIÁ</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Số: <strong>{order_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n  <div style=\"font-style: italic;\">Hiệu lực đến: {issued_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Khách hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">Mã KH:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{customer_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Điện thoại:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{customer_phone_number}</td>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Email:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{customer_email}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\">{billing_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Nhân viên:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{account_name}</td>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Chính sách giá:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{price_list_name}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">ĐVT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 50px;\">SL</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 100px;\">Đơn giá</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 80px;\">CK</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 110px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333;\">{line_product_name}<br><small>{line_variant}</small></td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_price}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_discount_amount}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_amount}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG GIÁ TRỊ -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Tổng tiền hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right; width: 120px;\">{total}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Chiết khấu:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{total_discount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Thuế VAT:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{total_tax}</td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>TỔNG CỘNG:</strong></td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{total_amount}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<p style=\"margin: 10px 0;\"><strong>Bằng chữ:</strong> <em>{total_text}</em></p>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {order_note}\r\n</div>\r\n\r\n<!-- ĐIỀU KHOẢN -->\r\n<div style=\"margin-bottom: 10px; padding: 10px; border: 1px solid #333; font-size: 11px;\">\r\n  <strong>Điều khoản:</strong>\r\n  <ul style=\"margin: 5px 0 0 15px; padding: 0;\">\r\n    <li>Báo giá có hiệu lực trong 7 ngày kể từ ngày lập</li>\r\n    <li>Giá trên chưa bao gồm phí vận chuyển (nếu có)</li>\r\n    <li>Thanh toán: Theo thỏa thuận</li>\r\n  </ul>\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Khách hàng</strong><br>\r\n        <em>(Ký xác nhận đồng ý)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {customer_name}\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Nhân viên báo giá</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333;\">\r\n  <p style=\"margin: 5px 0;\">Cảm ơn Quý khách đã quan tâm!</p>\r\n  <p style=\"margin: 5px 0;\">Liên hệ: {store_phone_number}</p>\r\n\n  <div style=\"font-size: 10px; color: #666; margin-top: 5px;\">In lúc: {print_date} {print_time}</div></div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJ/B,CAAC"}},
    {"offset": {"line": 1786, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/receipt.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu thu - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const RECEIPT_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU THU</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Số: <strong>{receipt_voucher_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- MÃ VẠCH -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"text-align: center; padding: 10px; border: 1px solid #333; background: #f5f5f5;\">\r\n      <div style=\"margin-bottom: 8px;\">{receipt_barcode}</div>\r\n      <div style=\"font-family: monospace;\">{receipt_voucher_code}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- THÔNG TIN PHIẾU THU -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Người nộp tiền:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{object_name}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{object_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Lý do nộp:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{description}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Hình thức thanh toán:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{payment_method}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- SỐ TIỀN -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"text-align: center; padding: 15px; border: 2px solid #333;\">\r\n      <div style=\"margin-bottom: 8px;\">Số tiền</div>\r\n      <div style=\"font-size: 24px; font-weight: bold;\">{amount}</div>\r\n      <div style=\"font-style: italic; margin-top: 8px;\">({amount_text})</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người nộp tiền</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {object_name}\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Thủ quỹ</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người lập phiếu</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGjC,CAAC"}},
    {"offset": {"line": 1901, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/payment.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu chi - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const PAYMENT_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU CHI</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Số: <strong>{payment_voucher_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- MÃ VẠCH -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"text-align: center; padding: 10px; border: 1px solid #333; background: #f5f5f5;\">\r\n      <div style=\"margin-bottom: 8px;\">{payment_barcode}</div>\r\n      <div style=\"font-family: monospace;\">{payment_voucher_code}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- THÔNG TIN PHIẾU CHI -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Người nhận tiền:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{object_name}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{object_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Lý do chi:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{description}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Hình thức thanh toán:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{payment_method}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- SỐ TIỀN -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"text-align: center; padding: 15px; border: 2px solid #333;\">\r\n      <div style=\"margin-bottom: 8px;\">Số tiền</div>\r\n      <div style=\"font-size: 24px; font-weight: bold;\">{amount}</div>\r\n      <div style=\"font-style: italic; margin-top: 8px;\">({amount_text})</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người nhận tiền</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {object_name}\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Thủ quỹ</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người lập phiếu</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGjC,CAAC"}},
    {"offset": {"line": 2016, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/warranty.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu bảo hành - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const WARRANTY_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n      <div>Hotline: <strong>{store_phone_number}</strong></div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU BẢO HÀNH</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Mã phiếu: <strong>{warranty_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Khách hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">SĐT:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{customer_phone_number}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\">{customer_address}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- THÔNG TIN SẢN PHẨM BẢO HÀNH -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed; border: 2px solid #333;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333;\">Sản phẩm:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{product_name}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">Serial/IMEI:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; font-family: monospace; font-size: 14px;\">{serial_number}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">Thời hạn BH:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{warranty_duration}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">Ngày hết hạn:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{warranty_expired_on}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- QUY ĐỊNH BẢO HÀNH -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tr>\r\n    <td style=\"width: 50%; padding: 10px; border: 1px solid #333; vertical-align: top;\">\r\n      <strong>ĐƯỢC BẢO HÀNH:</strong>\r\n      <div style=\"padding-left: 10px; margin-top: 5px;\">\r\n        <div>- Còn trong thời hạn bảo hành</div>\r\n        <div>- Tem bảo hành còn nguyên vẹn</div>\r\n        <div>- Hư hỏng do lỗi kỹ thuật từ NSX</div>\r\n      </div>\r\n    </td>\r\n    <td style=\"width: 50%; padding: 10px; border: 1px solid #333; vertical-align: top;\">\r\n      <strong>TỪ CHỐI BẢO HÀNH:</strong>\r\n      <div style=\"padding-left: 10px; margin-top: 5px;\">\r\n        <div>- Rơi vỡ, trầy xước, biến dạng</div>\r\n        <div>- Vào nước, ẩm, cháy, nổ</div>\r\n        <div>- Tự ý tháo lắp, sửa chữa</div>\r\n        <div>- Sử dụng sai cách, cố ý làm hư</div>\r\n      </div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Khách hàng</strong><br>\r\n        <em>(Ký xác nhận)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {customer_name}\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Nhân viên</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  Cảm ơn quý khách đã tin tưởng sử dụng dịch vụ của chúng tôi!\r\n\n  <div style=\"font-size: 10px; color: #666; margin-top: 5px;\">In lúc: {print_date} {print_time}</div></div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GlC,CAAC"}},
    {"offset": {"line": 2141, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/inventory-check.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu kiểm kho - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const INVENTORY_CHECK_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU KIỂM KHO</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Mã phiếu: <strong>{inventory_code}</strong></div>\r\n  <div>Ngày kiểm: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHO -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Kho kiểm:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{location_name}</strong></td>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Trạng thái:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{inventory_status}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Người kiểm:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\">{account_name}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 70px;\">Tồn kho</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 70px;\">Thực tế</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">Lệch</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left; width: 100px;\">Ghi chú</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333;\">{line_product_name}<br><small>{line_variant}</small></td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_on_hand}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_real_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_difference}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; font-size: 11px;\">{line_note}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG KẾT -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Tổng số SP kiểm:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right; width: 80px;\"><strong>{total_items}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Chênh lệch (thừa):</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>+{total_surplus}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Chênh lệch (thiếu):</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>-{total_shortage}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Người kiểm kho</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Thủ kho</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,2BAA2B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GzC,CAAC"}},
    {"offset": {"line": 2267, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/stock-transfer.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu chuyển kho - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const STOCK_TRANSFER_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU CHUYỂN KHO</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Mã phiếu: <strong>{transfer_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN CHUYỂN KHO -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 10px; width: 45%; border: 2px solid #333; text-align: center;\">\r\n        <div style=\"font-size: 12px;\">KHO XUẤT</div>\r\n        <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{source_location_name}</div>\r\n      </td>\r\n      <td style=\"padding: 10px; text-align: center; font-size: 20px; width: 10%;\">--&gt;</td>\r\n      <td style=\"padding: 10px; width: 45%; border: 2px solid #333; text-align: center;\">\r\n        <div style=\"font-size: 12px;\">KHO NHẬP</div>\r\n        <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{target_location_name}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Trạng thái:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{status}</strong></td>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Người tạo:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{account_name}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">ĐVT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 80px;\">Số lượng</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 40px;\">OK</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333;\">{line_product_name}<br><small>{line_variant}</small></td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\"><div style=\"width: 16px; height: 16px; border: 1px solid #333; margin: 0 auto;\"></div></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG CỘNG -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>Tổng số lượng:</strong></td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{total_quantity}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người lập phiếu</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Thủ kho xuất</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Thủ kho nhập</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,0BAA0B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHxC,CAAC"}},
    {"offset": {"line": 2400, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/sales-return.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu trả hàng - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const SALES_RETURN_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU TRẢ HÀNG</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Số: <strong>{order_return_code}</strong></div>\r\n  <div>Đơn hàng gốc: <strong>{order_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Khách hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">SĐT:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{customer_phone_number}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Lý do trả:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\"><strong>{reason_return}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM TRẢ -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">ĐVT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">SL Trả</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 100px;\">Đơn giá</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 110px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333;\">{line_product_name}<br><small>{line_variant}</small></td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_price}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_total}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG TIỀN HOÀN -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Tổng số lượng trả:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right; width: 100px;\"><strong>{total_quantity}</strong></td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>TỔNG TIỀN HOÀN:</strong></td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{total}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Trạng thái hoàn:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{refund_status}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Khách hàng</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {customer_name}\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Người nhận hàng trả</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  Hotline: {store_phone_number}\r\n\n  <div style=\"font-size: 10px; color: #666; margin-top: 5px;\">In lúc: {print_date} {print_time}</div></div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,wBAAwB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHtC,CAAC"}},
    {"offset": {"line": 2529, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/purchase-order.ts"],"sourcesContent":["/**\r\n * Mẫu in Đơn đặt hàng nhập - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const PURCHASE_ORDER_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">ĐƠN ĐẶT HÀNG NHẬP</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Số: <strong>{order_supplier_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN NHÀ CUNG CẤP -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Nhà cung cấp:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{supplier_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">Mã NCC:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; font-family: monospace;\">{supplier_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Điện thoại:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{supplier_phone_number}</td>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Email:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{supplier_email}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\">{supplier_address}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">ĐVT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">SL Đặt</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 100px;\">Đơn giá</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 110px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333;\">{line_product_name}<br><small>{line_variant}</small></td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_ordered_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_price}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_total}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG TIỀN -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Tổng tiền hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right; width: 100px;\">{total}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Chiết khấu:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{discount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Thuế VAT:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{tax_vat}</td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>TỔNG CỘNG:</strong></td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{total_order}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Người lập đơn</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px;\">\r\n        <strong>Duyệt đơn</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,0BAA0B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHxC,CAAC"}},
    {"offset": {"line": 2665, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/packing.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu đóng gói - TipTap compatible\r\n * Cập nhật: 2025-12-08 - Responsive + Chuẩn hóa\r\n */\r\nexport const PACKING_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 12px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"width: 70px; vertical-align: top; padding-right: 10px;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 12px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 8px;\">PHIẾU ĐÓNG GÓI</h2>\r\n<div style=\"text-align: center; margin-bottom: 12px; font-size: 11px;\">\r\n  <div>Mã: <strong>{fulfillment_code}</strong> | Đơn hàng: <strong>{order_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Khách hàng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 4px 6px; width: 15%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">SĐT:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{customer_phone_number}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Địa chỉ giao:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\" colspan=\"3\">{shipping_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">NV được gán:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\" colspan=\"3\">{assigned_employee}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM - Responsive -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 28px; font-size: 10px;\">STT</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 70px; font-size: 10px;\">Mã SP</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: left; font-size: 10px;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 35px; font-size: 10px;\">SL</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 55px; font-size: 10px;\">Vị trí</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: left; width: 70px; font-size: 10px;\">Ghi chú</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 28px; font-size: 10px;\">OK</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px;\">{line_stt}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-family: monospace; font-size: 9px;\">{line_variant_code}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; font-size: 10px; word-wrap: break-word;\">{line_product_name}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-weight: bold; font-size: 11px;\">{line_quantity}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px;\">{bin_location}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; font-size: 9px;\">{line_note}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center;\"><div style=\"width: 14px; height: 14px; border: 1px solid #333; margin: 0 auto;\"></div></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG CỘNG VÀ COD -->\r\n<table style=\"width: 220px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng số lượng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; width: 75px; font-size: 11px;\"><strong>{total_quantity}</strong></td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; font-size: 11px;\"><strong>COD - THU HỘ:</strong></td>\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\"><strong>{cod}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 8px 0; padding: 8px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">\r\n  <strong>Ghi chú đóng gói:</strong> {packing_note}\r\n</div>\r\n<div style=\"margin: 8px 0; padding: 8px; border: 1px solid #333; font-size: 11px;\">\r\n  <strong>Ghi chú đơn hàng:</strong> {order_note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 25px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 8px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; font-size: 11px;\">Người đóng gói</div>\r\n        <div style=\"color: #888; font-size: 10px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div style=\"font-size: 11px;\">{account_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 8px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; font-size: 11px;\">Kiểm tra</div>\r\n        <div style=\"color: #888; font-size: 10px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 10px; color: #666;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHjC,CAAC"}},
    {"offset": {"line": 2794, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/delivery.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu giao hàng - TipTap compatible\r\n * Cập nhật: 2025-12-08 - Responsive + Chuẩn hóa\r\n */\r\nexport const DELIVERY_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 12px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"width: 70px; vertical-align: top; padding-right: 10px;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">{store_address}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">ĐT: {store_phone_number}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 12px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 8px;\">PHIẾU GIAO HÀNG</h2>\r\n<div style=\"text-align: center; margin-bottom: 12px; font-size: 11px;\">\r\n  <div>Mã: <strong>{delivery_code}</strong> | Đơn hàng: <strong>{order_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- MÃ VẠCH VẬN ĐƠN -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"text-align: center; padding: 8px; border: 1px solid #333; background: #f5f5f5;\">\r\n      <div style=\"margin-bottom: 5px;\">{shipment_barcode}</div>\r\n      <div style=\"font-size: 14px; font-weight: bold; font-family: monospace;\">{tracking_number}</div>\r\n      <div style=\"font-size: 10px;\">Đối tác: {carrier_name}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- THÔNG TIN NGƯỜI NHẬN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Người nhận:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\"><strong>{receiver_name}</strong></td>\r\n      <td style=\"padding: 4px 6px; width: 15%; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">SĐT:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{receiver_phone}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Địa chỉ giao:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\" colspan=\"3\">{shipping_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">NV giao hàng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{shipper_name}</td>\r\n      <td style=\"padding: 4px 6px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">Trạng thái:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{delivery_status}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM - Responsive -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 28px; font-size: 10px;\">STT</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 70px; font-size: 10px;\">Mã SP</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: left; font-size: 10px;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 32px; font-size: 10px;\">ĐVT</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 30px; font-size: 10px;\">SL</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 60px; font-size: 10px;\">Đơn giá</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 70px; font-size: 10px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px;\">{line_stt}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-family: monospace; font-size: 9px;\">{line_variant_code}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; font-size: 10px; word-wrap: break-word;\">{line_product_name}<br><small style=\"color: #666;\">{line_variant}</small></td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px;\">{line_unit}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-weight: bold; font-size: 11px;\">{line_quantity}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{line_price}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{line_amount}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG GIÁ TRỊ -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng số lượng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; width: 85px; font-size: 11px;\"><strong>{total_quantity}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng tiền hàng:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Phí vận chuyển:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{delivery_fee}</td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; font-size: 11px;\"><strong>COD - THU HỘ:</strong></td>\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\"><strong>{cod_amount}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 8px 0; padding: 8px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 25px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 8px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; font-size: 11px;\">Người giao</div>\r\n        <div style=\"color: #888; font-size: 10px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div style=\"font-size: 11px;\">{shipper_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 8px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; font-size: 11px;\">Người nhận</div>\r\n        <div style=\"color: #888; font-size: 10px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div style=\"font-size: 11px;\">{receiver_name}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 10px; color: #666;\">\r\n  <div>Cảm ơn quý khách!</div>\r\n  <div>Hotline: {store_phone_number} | In lúc: {print_date} {print_time}</div>\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIlC,CAAC"}},
    {"offset": {"line": 2944, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/shipping-label.ts"],"sourcesContent":["/**\r\n * Mẫu in Nhãn giao hàng - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const SHIPPING_LABEL_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 13px; line-height: 1.4; max-width: 400px; margin: 0 auto; border: 2px solid #333; padding: 15px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 2px dashed #333;\">\r\n  <div style=\"font-size: 14px; font-weight: bold;\">{store_name}</div>\r\n  <div style=\"font-size: 12px;\">{store_phone_number}</div>\r\n</div>\r\n\r\n<!-- MÃ VẬN ĐƠN -->\r\n<div style=\"text-align: center; margin-bottom: 10px; padding: 10px; background: #f5f5f5;\">\r\n  <div style=\"margin-bottom: 8px;\">{shipment_barcode}</div>\r\n  <div style=\"font-size: 18px; font-weight: bold; font-family: monospace;\">{shipment_code}</div>\r\n  <div style=\"font-size: 12px;\">Đơn: {order_code}</div>\r\n</div>\r\n\r\n<!-- NGƯỜI GỬI -->\r\n<div style=\"margin-bottom: 10px; padding: 8px; background: #f5f5f5;\">\r\n  <div style=\"font-weight: bold; font-size: 11px;\">Gửi:</div>\r\n  <div><strong>{store_name}</strong></div>\r\n  <div style=\"font-size: 11px;\">{store_address}</div>\r\n</div>\r\n\r\n<!-- NGƯỜI NHẬN -->\r\n<div style=\"margin-bottom: 10px; padding: 10px; border: 1px solid #333;\">\r\n  <div style=\"font-weight: bold; font-size: 11px;\">Nhận:</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{customer_name}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold;\">{customer_phone_number}</div>\r\n  <div style=\"font-size: 12px;\">{shipping_address}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KIỆN -->\r\n<table style=\"width: 100%; margin-bottom: 10px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"text-align: center; padding: 8px; background: #f5f5f5; width: 50%; border: 1px solid #333;\">\r\n      <div style=\"font-size: 11px;\">Số lượng</div>\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{total_quantity}</div>\r\n    </td>\r\n    <td style=\"text-align: center; padding: 8px; background: #f5f5f5; width: 50%; border: 1px solid #333;\">\r\n      <div style=\"font-size: 11px;\">Khối lượng</div>\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{total_weight_g}g</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- COD -->\r\n<div style=\"text-align: center; padding: 12px; border: 2px solid #333; margin-bottom: 10px;\">\r\n  <div style=\"font-size: 12px; font-weight: bold;\">THU HỘ (COD)</div>\r\n  <div style=\"font-size: 22px; font-weight: bold;\">{cod}</div>\r\n</div>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"font-size: 11px;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n</div>\r\n`;\r\n\r\n/**\r\n * Mẫu nhãn nhỏ - compact\r\n */\r\nexport const SHIPPING_LABEL_TEMPLATE_SMALL = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 11px; line-height: 1.3; max-width: 300px; padding: 10px; border: 1px solid #333;\">\r\n  <div style=\"text-align: center; margin-bottom: 8px;\">{shipment_barcode}</div>\r\n  <div style=\"text-align: center; font-weight: bold; font-family: monospace; margin-bottom: 10px;\">{shipment_code}</div>\r\n  <div style=\"border-top: 1px dashed #333; padding-top: 8px;\">\r\n    <div><strong>{customer_name}</strong></div>\r\n    <div>{customer_phone_number}</div>\r\n    <div style=\"font-size: 10px;\">{shipping_address}</div>\r\n  </div>\r\n  <div style=\"text-align: center; margin-top: 10px; padding: 5px; background: #f5f5f5; font-weight: bold;\">\r\n    COD: {cod}\r\n  </div>\r\n</div>\r\n`;\r\n\r\n/**\r\n * Mẫu nhãn lớn - đầy đủ thông tin\r\n */\r\nexport const SHIPPING_LABEL_TEMPLATE_LARGE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 13px; line-height: 1.4; max-width: 500px; margin: 0 auto; border: 3px solid #333; padding: 20px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px; padding-bottom: 15px; border-bottom: 2px solid #333;\">\r\n  <div style=\"font-size: 18px; font-weight: bold;\">{store_name}</div>\r\n  <div>{store_phone_number}</div>\r\n</div>\r\n\r\n<!-- MÃ VẠCH + QR -->\r\n<table style=\"width: 100%; margin-bottom: 20px;\">\r\n  <tr>\r\n    <td style=\"text-align: center; width: 60%;\">{shipment_barcode}</td>\r\n    <td style=\"text-align: center; width: 40%;\">{shipment_qrcode}</td>\r\n  </tr>\r\n</table>\r\n\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 28px; font-weight: bold; font-family: monospace;\">{shipment_code}</div>\r\n  <div>Đơn: {order_code}</div>\r\n</div>\r\n\r\n<!-- NGƯỜI GỬI / NHẬN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tr>\r\n    <td style=\"padding: 15px; background: #f5f5f5; border: 1px solid #333; vertical-align: top; width: 50%;\">\r\n      <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI GỬI</div>\r\n      <div><strong>{store_name}</strong></div>\r\n      <div>{store_phone_number}</div>\r\n      <div style=\"font-size: 11px;\">{store_address}</div>\r\n    </td>\r\n    <td style=\"padding: 15px; border: 2px solid #333; vertical-align: top; width: 50%;\">\r\n      <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI NHẬN</div>\r\n      <div style=\"font-size: 16px;\"><strong>{customer_name}</strong></div>\r\n      <div style=\"font-size: 15px; font-weight: bold;\">{customer_phone_number}</div>\r\n      <div style=\"font-size: 12px;\">{shipping_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- THÔNG TIN KIỆN -->\r\n<table style=\"width: 100%; margin-bottom: 10px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"text-align: center; padding: 15px; background: #f5f5f5; width: 50%; border: 1px solid #333;\">\r\n      <div style=\"font-size: 12px;\">Số lượng</div>\r\n      <div style=\"font-size: 24px; font-weight: bold;\">{total_quantity}</div>\r\n    </td>\r\n    <td style=\"text-align: center; padding: 15px; background: #f5f5f5; width: 50%; border: 1px solid #333;\">\r\n      <div style=\"font-size: 12px;\">Khối lượng</div>\r\n      <div style=\"font-size: 24px; font-weight: bold;\">{total_weight_kg} kg</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- COD -->\r\n<div style=\"text-align: center; padding: 20px; border: 3px solid #333; margin-bottom: 10px;\">\r\n  <div style=\"font-size: 14px; font-weight: bold;\">THU HỘ (COD)</div>\r\n  <div style=\"font-size: 32px; font-weight: bold;\">{cod}</div>\r\n</div>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AACM,MAAM,0BAA0B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDxC,CAAC;AAKM,MAAM,gCAAgC,CAAC;;;;;;;;;;;;;AAa9C,CAAC;AAKM,MAAM,gCAAgC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkE9C,CAAC"}},
    {"offset": {"line": 3101, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/product-label.ts"],"sourcesContent":["/**\r\n * Mẫu in Tem phụ sản phẩm (product label)\r\n * Thiết kế theo mẫu tem phụ nhập khẩu chuẩn\r\n */\r\nexport const PRODUCT_LABEL_TEMPLATE = `\r\n<div style=\"font-family: 'Inter', Arial, sans-serif; width: 320px; background: #fff; padding: 16px; line-height: 1.5; font-size: 13px; color: #111;\">\r\n  <!-- TÊN SẢN PHẨM -->\r\n  <div style=\"margin-bottom: 12px;\">\r\n    <span style=\"font-weight: 700;\">TÊN SẢN PHẨM:</span> {product_name_vat}\r\n  </div>\r\n\r\n  <!-- THƯƠNG HIỆU & ĐỊA CHỈ SẢN XUẤT -->\r\n  <div style=\"margin-bottom: 8px;\">\r\n    <span style=\"font-weight: 700;\">Thương Hiệu:</span> {product_brand}. <span style=\"font-weight: 700;\">Địa chỉ sản xuất:</span> {product_origin}\r\n  </div>\r\n\r\n  <!-- HƯỚNG DẪN SỬ DỤNG -->\r\n  <div style=\"margin-bottom: 8px;\">\r\n    <span style=\"font-weight: 700;\">Hướng Dẫn sử dụng:</span> {product_usage_guide}\r\n  </div>\r\n\r\n  <!-- ĐƠN VỊ NHẬP KHẨU -->\r\n  <div style=\"margin-bottom: 8px;\">\r\n    <span style=\"font-weight: 700;\">ĐƠN VỊ NHẬP KHẨU:</span> {product_importer_name}\r\n  </div>\r\n\r\n  <!-- ĐỊA CHỈ NHẬP KHẨU -->\r\n  <div style=\"margin-bottom: 12px;\">\r\n    <span style=\"font-weight: 700;\">Địa chỉ:</span> {product_importer_address}\r\n  </div>\r\n\r\n  <!-- BARCODE -->\r\n  <div style=\"display: flex; align-items: center; gap: 12px; padding-top: 8px; border-top: 1px dashed #ccc;\">\r\n    <div style=\"flex: 1;\">\r\n      {product_barcode_image}\r\n      <div style=\"font-size: 11px; margin-top: 2px;\">{product_barcode}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,yBAAyB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCvC,CAAC"}},
    {"offset": {"line": 3151, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/stock-in.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu nhập kho - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const STOCK_IN_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU NHẬP KHO</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Mã: <strong>{stock_in_code}</strong></div>\r\n  <div>Đơn đặt hàng: <strong>{order_supplier_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN NHẬP KHO -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Kho nhập:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{location_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">Trạng thái:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{stock_in_status}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Nhà cung cấp:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{supplier_name}</strong></td>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Mã NCC:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; font-family: monospace;\">{supplier_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Người tạo:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\">{account_name}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 35px;\">STT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 90px;\">Mã SP</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 50px;\">ĐVT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 55px;\">SL Đặt</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 55px;\">SL Nhập</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 90px;\">Đơn giá</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 100px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333;\">{line_product_name}<br><small>{line_variant}</small></td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_ordered_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_received_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_price}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_total}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG TIỀN -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Tổng tiền hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right; width: 100px;\">{total}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Chiết khấu:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{discount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Thuế VAT:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{tax_vat}</td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>TỔNG CỘNG:</strong></td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{total_order}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Đã thanh toán:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{paid}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Còn phải trả:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{remaining}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người giao</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Thủ kho</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người lập</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIlC,CAAC"}},
    {"offset": {"line": 3303, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/supplier-return.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu trả hàng NCC - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const SUPPLIER_RETURN_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU TRẢ HÀNG NHÀ CUNG CẤP</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Mã: <strong>{return_supplier_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN NHÀ CUNG CẤP -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Nhà cung cấp:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{supplier_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">Mã NCC:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; font-family: monospace;\">{supplier_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Điện thoại:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{supplier_phone_number}</td>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Email:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{supplier_email}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\">{supplier_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Lý do trả:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\" colspan=\"3\"><strong>{reason_return}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM TRẢ -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">ĐVT</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: center; width: 60px;\">SL Trả</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 100px;\">Đơn giá</th>\r\n      <th style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 110px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333;\">{line_product_name}<br><small>{line_variant}</small></td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_quantity}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_price}</td>\r\n      <td style=\"padding: 6px; border: 1px solid #333; text-align: right;\">{line_total}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG GIÁ TRỊ -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>TỔNG GIÁ TRỊ TRẢ:</strong></td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 100px;\"><strong>{total_order}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Đã nhận hoàn:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{refunded}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">Còn phải nhận:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{remaining}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Đại diện NCC</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Thủ kho</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người lập</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {account_name}\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,2BAA2B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HzC,CAAC"}},
    {"offset": {"line": 3444, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/complaint.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu khiếu nại - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const COMPLAINT_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n      <div>Hotline: <strong>{store_phone_number}</strong></div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU KHIẾU NẠI</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Mã phiếu: <strong>{complaint_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Khách hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">SĐT:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{customer_phone_number}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Email:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{customer_email}</td>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{customer_address}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- THÔNG TIN ĐƠN HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Mã đơn hàng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{order_code}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">Ngày mua:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{order_date}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- NỘI DUNG KHIẾU NẠI -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed; border: 2px solid #333;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333;\">Loại khiếu nại:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{complaint_type}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">Sản phẩm:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{line_product_name} - <small>{line_variant}</small></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">Mô tả vấn đề:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{complaint_description}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">Yêu cầu của KH:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{customer_request}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- XỬ LÝ KHIẾU NẠI -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Trạng thái:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{complaint_status}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Phương án xử lý:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{resolution}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Người xử lý:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{assignee_name}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Ngày hoàn thành:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{resolved_on}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {complaint_note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Khách hàng</strong><br>\r\n        <em>(Ký xác nhận)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {customer_name}\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người xử lý</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {assignee_name}\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Quản lý</strong><br>\r\n        <em>(Ký duyệt)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  Cảm ơn quý khách đã phản hồi. Chúng tôi sẽ xử lý trong thời gian sớm nhất!\r\n\n  <div style=\"font-size: 10px; color: #666; margin-top: 5px;\">In lúc: {print_date} {print_time}</div></div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqInC,CAAC"}},
    {"offset": {"line": 3592, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/penalty.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu phạt - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const PENALTY_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 14px; font-weight: bold; margin-bottom: 2px; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU XỬ PHẠT</h2>\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div>Số: <strong>{penalty_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN NGƯỜI BỊ PHẠT -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Họ và tên:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{employee_name}</strong></td>\r\n      <td style=\"padding: 5px; width: 15%; background: #f5f5f5; border: 1px solid #333;\">Mã NV:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; font-family: monospace;\">{employee_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Bộ phận:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{department_name}</td>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Chức vụ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{position_name}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- NỘI DUNG VI PHẠM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; background: #f5f5f5; border: 1px solid #333;\">Loại vi phạm:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{violation_type}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Ngày vi phạm:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{violation_date}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Mô tả vi phạm:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{violation_description}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Bằng chứng:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{evidence}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- HÌNH THỨC XỬ PHẠT -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed; border: 2px solid #333;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 30%; background: #f5f5f5; border: 1px solid #333;\">Hình thức:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{penalty_type}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">Lần vi phạm:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Lần thứ <strong>{violation_count}</strong></td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 12px; border: 1px solid #333;\"><strong>SỐ TIỀN PHẠT:</strong></td>\r\n      <td style=\"padding: 12px; border: 1px solid #333; font-size: 18px; font-weight: bold;\">{penalty_amount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Bằng chữ:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; font-style: italic;\">{penalty_amount_text}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 10px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {penalty_note}\r\n</div>\r\n\r\n<!-- CĂN CỨ PHÁP LÝ -->\r\n<div style=\"margin: 10px 0; padding: 10px; border: 1px solid #333; font-size: 12px;\">\r\n  <strong>Căn cứ pháp lý:</strong> Theo quy định nội bộ công ty và Bộ luật Lao động Việt Nam.\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Người vi phạm</strong><br>\r\n        <em>(Ký xác nhận)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n        {employee_name}\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Trưởng bộ phận</strong><br>\r\n        <em>(Ký, ghi rõ họ tên)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px;\">\r\n        <strong>Giám đốc</strong><br>\r\n        <em>(Ký duyệt)</em><br>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 11px;\">\r\n  Phiếu này được lập thành 02 bản, mỗi bên giữ 01 bản có giá trị như nhau.\r\n\n  <div style=\"font-size: 10px; color: #666; margin-top: 5px;\">In lúc: {print_date} {print_time}</div></div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HjC,CAAC"}},
    {"offset": {"line": 3731, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/cost-adjustment.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu điều chỉnh giá vốn - TipTap compatible\r\n * Cập nhật: Thiết kế đen trắng cho máy in\r\n */\r\nexport const COST_ADJUSTMENT_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<table style=\"width: 100%; margin-bottom: 10px;\">\r\n  <tr>\r\n    <td style=\"width: 80px; vertical-align: top;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div>{store_address}</div>\r\n      <div>ĐT: {store_phone}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 15px 0 5px 0; font-size: 16px; font-weight: bold; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU ĐIỀU CHỈNH GIÁ VỐN</h2>\r\n<div style=\"text-align: center; margin-bottom: 15px;\">\r\n  <div>Số: <strong>{adjustment_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN CHI NHÁNH -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 15px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 5px; width: 25%; background: #f5f5f5; border: 1px solid #333;\">Chi nhánh:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{location_name}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Địa chỉ:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{location_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Lý do điều chỉnh:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\"><strong>{reason}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Trạng thái:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{status}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- DANH SÁCH SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 11px;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 6px; border: 1px solid #333; text-align: center; width: 30px;\">STT</th>\r\n      <th style=\"padding: 6px; border: 1px solid #333; text-align: left;\">Mã SP</th>\r\n      <th style=\"padding: 6px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 6px; border: 1px solid #333; text-align: center; width: 50px;\">ĐVT</th>\r\n      <th style=\"padding: 6px; border: 1px solid #333; text-align: right;\">Giá vốn cũ</th>\r\n      <th style=\"padding: 6px; border: 1px solid #333; text-align: right;\">Giá vốn mới</th>\r\n      <th style=\"padding: 6px; border: 1px solid #333; text-align: right;\">Chênh lệch</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr data-line-item>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333;\">{line_product_name}</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{line_old_price}</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{line_new_price}</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\">{line_difference}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG KẾT -->\r\n<table style=\"width: 50%; margin-left: auto; border-collapse: collapse; margin-bottom: 15px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Tổng số sản phẩm:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right;\"><strong>{total_items}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Tổng tăng giá vốn:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right; color: green;\">{total_increase}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px; background: #f5f5f5; border: 1px solid #333;\">Tổng giảm giá vốn:</td>\r\n      <td style=\"padding: 5px; border: 1px solid #333; text-align: right; color: red;\">{total_decrease}</td>\r\n    </tr>\r\n    <tr style=\"font-weight: bold; font-size: 13px;\">\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333;\">CHÊNH LỆCH:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{total_difference}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin: 15px 0; padding: 10px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center;\">\r\n        <strong>Người lập phiếu</strong>\r\n        <div style=\"margin-top: 50px; font-style: italic;\">{account_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center;\">\r\n        <strong>Người xác nhận</strong>\r\n        <div style=\"margin-top: 50px; font-style: italic;\">{confirmed_by}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- NGÀY IN -->\r\n<div style=\"text-align: right; margin-top: 20px; font-size: 10px; color: #666;\">\r\n  In ngày: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,MAAM,2BAA2B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHzC,CAAC"}},
    {"offset": {"line": 3865, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/payroll.ts"],"sourcesContent":["/**\r\n * Payroll Template - Bảng lương\r\n * Mẫu in mặc định theo chuẩn TEMPLATE v2\r\n * \r\n * QUAN TRỌNG - Quy tắc template:\r\n * 1. Bảng chứa {line_stt} hoặc {line_index} là bảng line items - sẽ được lặp theo số nhân viên\r\n * 2. Các bảng khác là bảng thông tin - không lặp\r\n * 3. Sử dụng inline styles để đảm bảo hiển thị đúng khi in\r\n * \r\n * CHUẨN TEMPLATE v2 (2025-12-08):\r\n * - Header: Logo trái + Store info phải (dạng table)\r\n * - Title: Căn giữa, border-bottom\r\n * - Info table: Label 22% nền xám\r\n * - Product table: table-layout fixed, responsive\r\n * - Summary: 280px căn phải\r\n * - Footer: border-top dashed, font nhỏ\r\n */\r\nexport const PAYROLL_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 900px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER: Logo trái + Thông tin cửa hàng phải -->\r\n<table style=\"width: 100%; margin-bottom: 12px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"width: 70px; vertical-align: top; padding-right: 10px;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">{store_address}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">ĐT: {store_phone_number} | Email: {store_email}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 12px 0 5px 0; font-size: 16px; font-weight: bold; border-bottom: 2px solid #333; padding-bottom: 8px;\">BẢNG LƯƠNG TỔNG HỢP</h2>\r\n<div style=\"text-align: center; margin-bottom: 12px; font-size: 12px;\">\r\n  <div><strong>{batch_title}</strong></div>\r\n  <div>Mã: <strong>{batch_code}</strong> | Kỳ lương: <strong>{pay_period}</strong></div>\r\n</div>\r\n\r\n<!-- THÔNG TIN BẢNG LƯƠNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 20%; border: 1px solid #333; font-size: 11px;\">Trạng thái:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\"><strong>{batch_status}</strong></td>\r\n      <td style=\"padding: 4px 6px; width: 20%; border: 1px solid #333; font-size: 11px;\">Ngày thanh toán:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{payroll_date}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tháng chấm công:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{reference_months}</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Số nhân viên:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\"><strong>{total_employees}</strong> người</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Người lập:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{created_by}</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Ngày lập:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{created_on}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Ghi chú:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\" colspan=\"3\">{notes}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG CHI TIẾT LƯƠNG TỪNG NHÂN VIÊN - Table layout fixed -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: center; width: 28px; font-size: 10px;\">STT</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: left; width: 58px; font-size: 10px;\">Mã NV</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: left; font-size: 10px;\">Họ tên</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: left; width: 80px; font-size: 10px;\">Phòng ban</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 72px; font-size: 10px;\">Thu nhập</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 55px; font-size: 10px;\">Bảo hiểm</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 60px; font-size: 10px;\">Thuế TNCN</th>\r\n      <th style=\"padding: 5px 3px; border: 1px solid #333; text-align: right; width: 72px; font-size: 10px; font-weight: bold;\">Thực lĩnh</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: center; font-size: 10px;\">{line_stt}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; font-size: 10px;\">{employee_code}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; font-size: 10px; word-wrap: break-word;\">{employee_name}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; font-size: 10px; word-wrap: break-word;\">{department_name}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{earnings}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{total_insurance}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px;\">{personal_income_tax}</td>\r\n      <td style=\"padding: 4px 3px; border: 1px solid #333; text-align: right; font-size: 10px; font-weight: bold;\">{net_pay}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG TỔNG KẾT -->\r\n<table style=\"width: 300px; margin-left: auto; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng thu nhập:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; width: 120px; font-size: 11px;\">{total_earnings}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng bảo hiểm (NV):</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total_insurance}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng thuế TNCN:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total_tax}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Tổng khấu trừ:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total_deductions}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Đóng góp (DN):</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px;\">{total_contributions}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; font-size: 12px; font-weight: bold; background: #f0f0f0;\">TỔNG THỰC LĨNH:</td>\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 12px; font-weight: bold; background: #f0f0f0;\">{total_net}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẰNG CHỮ -->\r\n<p style=\"font-style: italic; margin: 10px 0; font-size: 11px;\">\r\n  <strong>Bằng chữ:</strong> {total_net_text}\r\n</p>\r\n\r\n<!-- FOOTER: Chữ ký -->\r\n<table style=\"width: 100%; margin-top: 25px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"width: 33%; text-align: center; padding: 5px; vertical-align: top;\">\r\n      <div style=\"font-weight: bold; margin-bottom: 50px; font-size: 11px;\">Người lập</div>\r\n      <div style=\"font-size: 11px;\">{created_by}</div>\r\n    </td>\r\n    <td style=\"width: 33%; text-align: center; padding: 5px; vertical-align: top;\">\r\n      <div style=\"font-weight: bold; margin-bottom: 50px; font-size: 11px;\">Kế toán trưởng</div>\r\n      <div style=\"font-size: 11px;\"></div>\r\n    </td>\r\n    <td style=\"width: 33%; text-align: center; padding: 5px; vertical-align: top;\">\r\n      <div style=\"font-weight: bold; margin-bottom: 50px; font-size: 11px;\">Giám đốc</div>\r\n      <div style=\"font-size: 11px;\"></div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- NGÀY IN -->\r\n<div style=\"margin-top: 15px; padding-top: 8px; border-top: 1px dashed #ccc; font-size: 10px; color: #666; text-align: right;\">\r\n  Ngày in: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;CAgBC;;;;AACM,MAAM,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIjC,CAAC"}},
    {"offset": {"line": 4030, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/payslip.ts"],"sourcesContent":["/**\r\n * Payslip Template - Phiếu lương cá nhân\r\n * Mẫu in mặc định theo chuẩn TEMPLATE v2\r\n * \r\n * QUAN TRỌNG - Quy tắc template:\r\n * 1. Bảng chứa {line_stt} là bảng line items - sẽ được lặp theo số components\r\n * 2. Các bảng khác là bảng thông tin - không lặp\r\n * 3. Sử dụng inline styles để đảm bảo hiển thị đúng khi in\r\n * \r\n * CHUẨN TEMPLATE v2 (2025-12-08):\r\n * - Header: Logo trái + Store info phải (dạng table)\r\n * - Title: Căn giữa, border-bottom\r\n * - Info table: Label 22% nền xám\r\n * - Component table: table-layout fixed, responsive\r\n * - Summary: 280px căn phải\r\n * - Footer: border-top dashed, font nhỏ\r\n */\r\nexport const PAYSLIP_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 700px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER: Logo trái + Thông tin cửa hàng phải -->\r\n<table style=\"width: 100%; margin-bottom: 12px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"width: 70px; vertical-align: top; padding-right: 10px;\">{store_logo}</td>\r\n    <td style=\"vertical-align: top;\">\r\n      <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">{store_address}</div>\r\n      <div style=\"font-size: 11px; color: #333;\">ĐT: {store_phone_number} | Email: {store_email}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 12px 0 5px 0; font-size: 16px; font-weight: bold; border-bottom: 2px solid #333; padding-bottom: 8px;\">PHIẾU LƯƠNG</h2>\r\n<div style=\"text-align: center; margin-bottom: 12px; font-size: 12px;\">\r\n  <div>Kỳ lương: <strong>{pay_period}</strong></div>\r\n  <div>Mã phiếu: <strong>{payslip_code}</strong></div>\r\n</div>\r\n\r\n<!-- THÔNG TIN NHÂN VIÊN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; width: 22%; border: 1px solid #333; font-size: 11px; background: #f5f5f5;\">Mã nhân viên:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\"><strong>{employee_code}</strong></td>\r\n      <td style=\"padding: 4px 6px; width: 22%; border: 1px solid #333; font-size: 11px; background: #f5f5f5;\">Họ và tên:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\"><strong>{employee_name}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; background: #f5f5f5;\">Phòng ban:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{department_name}</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; background: #f5f5f5;\">Chức vụ:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{position}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; background: #f5f5f5;\">Bảng lương:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\" colspan=\"3\">{batch_title} ({batch_code})</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; background: #f5f5f5;\">Ngày thanh toán:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{payroll_date}</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; background: #f5f5f5;\">Kỳ lương:</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">{pay_period}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- THÔNG TIN CHẤM CÔNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; background: #f8f9fa;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; width: 25%; background: #e8e8e8; font-weight: bold;\">Ngày công</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; width: 25%; text-align: center;\"><strong>{work_days}</strong> / {standard_work_days}</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; width: 25%; background: #e8e8e8; font-weight: bold;\">Nghỉ phép</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; width: 25%; text-align: center;\">{leave_days} ngày</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; background: #e8e8e8; font-weight: bold;\">Tổng giờ OT</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; text-align: center; color: #0066cc;\"><strong>{ot_hours}h</strong></td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; background: #e8e8e8; font-weight: bold;\">Vắng không phép</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; text-align: center;\">{absent_days} ngày</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; background: #e8e8e8;\">OT ngày thường</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; text-align: center;\">{ot_hours_weekday}h</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; background: #e8e8e8;\">Đi trễ/Về sớm</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; text-align: center;\">{late_arrivals} lần / {early_departures} lần</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; background: #e8e8e8;\">OT cuối tuần</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; text-align: center;\">{ot_hours_weekend}h</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; background: #e8e8e8;\">OT ngày lễ</td>\r\n      <td style=\"padding: 6px 8px; border: 1px solid #333; font-size: 11px; text-align: center;\">{ot_hours_holiday}h</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- CHI TIẾT CÁC THÀNH PHẦN LƯƠNG (LINE ITEMS) -->\r\n<h4 style=\"margin: 15px 0 8px 0; font-size: 12px; font-weight: bold; border-bottom: 1px solid #333; padding-bottom: 4px;\">I. CHI TIẾT THU NHẬP</h4>\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <thead>\r\n    <tr style=\"background: #e8e8e8;\">\r\n      <th style=\"padding: 5px 6px; border: 1px solid #333; text-align: center; font-size: 11px; width: 30px;\">STT</th>\r\n      <th style=\"padding: 5px 6px; border: 1px solid #333; text-align: left; font-size: 11px; width: 140px;\">Tên thành phần</th>\r\n      <th style=\"padding: 5px 6px; border: 1px solid #333; text-align: left; font-size: 11px;\">Chi tiết tính</th>\r\n      <th style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 11px; width: 110px;\">Số tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: center; font-size: 10px;\">{line_stt}</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 10px;\">{component_name}</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 10px; color: #555;\">{component_formula}</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 10px; font-weight: bold;\">{component_amount}</td>\r\n    </tr>\r\n  </tbody>\r\n  <tfoot>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td colspan=\"3\" style=\"padding: 5px 6px; border: 1px solid #333; font-size: 11px; font-weight: bold;\">Tổng thu nhập (Gross)</td>\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 11px; font-weight: bold;\">{total_earnings}</td>\r\n    </tr>\r\n  </tfoot>\r\n</table>\r\n\r\n<!-- CÁC KHOẢN KHẤU TRỪ -->\r\n<h4 style=\"margin: 15px 0 8px 0; font-size: 12px; font-weight: bold; border-bottom: 1px solid #333; padding-bottom: 4px;\">II. CÁC KHOẢN KHẤU TRỪ</h4>\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <thead>\r\n    <tr style=\"background: #e8e8e8;\">\r\n      <th style=\"padding: 5px 6px; border: 1px solid #333; text-align: left; font-size: 11px;\">Khoản mục</th>\r\n      <th style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 11px; width: 120px;\">Số tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; padding-left: 10px;\">BHXH (8%)</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #c00;\">{bhxh_amount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; padding-left: 10px;\">BHYT (1.5%)</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #c00;\">{bhyt_amount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; padding-left: 10px;\">BHTN (1%)</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #c00;\">{bhtn_amount}</td>\r\n    </tr>\r\n    <tr style=\"background: #fff5f5;\">\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; font-weight: bold;\">Tổng bảo hiểm (10.5%)</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; font-weight: bold; color: #c00;\">{total_insurance}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; padding-left: 10px;\">Thuế TNCN</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #c00;\">{personal_income_tax}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; padding-left: 10px;\">Khấu trừ phạt</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #c00;\">{penalty_deductions}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; padding-left: 10px;\">Khấu trừ khác</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #c00;\">{other_deductions}</td>\r\n    </tr>\r\n  </tbody>\r\n  <tfoot>\r\n    <tr style=\"background: #fff5f5;\">\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; font-size: 11px; font-weight: bold;\">Tổng khấu trừ</td>\r\n      <td style=\"padding: 5px 6px; border: 1px solid #333; text-align: right; font-size: 11px; font-weight: bold; color: #c00;\">{total_deductions}</td>\r\n    </tr>\r\n  </tfoot>\r\n</table>\r\n\r\n<!-- TÍNH THUẾ TNCN (Tham khảo) -->\r\n<h4 style=\"margin: 15px 0 8px 0; font-size: 12px; font-weight: bold; border-bottom: 1px solid #333; padding-bottom: 4px;\">III. TÍNH THUẾ TNCN</h4>\r\n<p style=\"font-size: 10px; color: #666; margin: 0 0 8px 0; font-style: italic;\">Công thức: Thu nhập chịu thuế = Tổng thu nhập - BH (NV đóng) - Giảm trừ gia cảnh</p>\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; width: 60%;\">Mức giảm trừ bản thân (theo luật thuế TNCN)</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #666;\">{personal_deduction}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px;\">Mức giảm trừ người phụ thuộc ({dependents_count} người × 4.400.000)</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; color: #666;\">{dependent_deduction}</td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; font-weight: bold;\">→ Thu nhập chịu thuế</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; font-weight: bold;\">{taxable_income}</td>\r\n    </tr>\r\n    <tr style=\"background: #fff5f5;\">\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; font-size: 11px; font-weight: bold;\">→ Thuế TNCN phải nộp</td>\r\n      <td style=\"padding: 4px 6px; border: 1px solid #333; text-align: right; font-size: 11px; font-weight: bold; color: #c00;\">{personal_income_tax}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- THỰC LĨNH -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px;\">\r\n  <tbody>\r\n    <tr style=\"background: #d4edda;\">\r\n      <td style=\"padding: 8px 10px; border: 2px solid #333; font-size: 14px; font-weight: bold; width: 50%;\">THỰC LĨNH</td>\r\n      <td style=\"padding: 8px 10px; border: 2px solid #333; text-align: right; font-size: 14px; font-weight: bold; color: #155724;\">{net_pay}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẰNG CHỮ -->\r\n<p style=\"font-style: italic; margin: 10px 0; font-size: 11px; padding: 8px; border: 1px solid #333; background: #fffde7;\">\r\n  <strong>Số tiền bằng chữ:</strong> {net_pay_text}\r\n</p>\r\n\r\n<!-- FOOTER: Chữ ký -->\r\n<table style=\"width: 100%; margin-top: 25px; border-collapse: collapse;\">\r\n  <tr>\r\n    <td style=\"width: 50%; text-align: center; padding: 5px; vertical-align: top;\">\r\n      <div style=\"font-weight: bold; margin-bottom: 50px; font-size: 11px;\">Người lập phiếu</div>\r\n      <div style=\"font-size: 11px;\"></div>\r\n    </td>\r\n    <td style=\"width: 50%; text-align: center; padding: 5px; vertical-align: top;\">\r\n      <div style=\"font-weight: bold; margin-bottom: 50px; font-size: 11px;\">Người nhận</div>\r\n      <div style=\"font-size: 11px;\">{employee_name}</div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n\r\n<!-- NGÀY IN -->\r\n<div style=\"margin-top: 15px; padding-top: 8px; border-top: 1px dashed #ccc; font-size: 10px; color: #666; text-align: right;\">\r\n  Ngày in: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;CAgBC;;;;AACM,MAAM,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNjC,CAAC"}},
    {"offset": {"line": 4271, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/supplier-order.ts"],"sourcesContent":["/**\r\n * Mẫu in Đơn đặt hàng nhập (Extended) - TipTap compatible\r\n */\r\nexport const SUPPLIER_ORDER_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n  <div style=\"color: #666;\">{store_address}</div>\r\n  <div style=\"color: #666;\">ĐT: {store_phone_number}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">ĐƠN ĐẶT HÀNG NHẬP</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Số: <strong>{order_supplier_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN NHÀ CUNG CẤP -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #ddd; font-weight: bold;\">Nhà cung cấp:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #ddd;\"><strong>{supplier_name}</strong></td>\r\n      <td style=\"padding: 8px; width: 15%; background: #f5f5f5; border: 1px solid #ddd; font-weight: bold;\">Mã NCC:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #ddd;\">{supplier_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #ddd; font-weight: bold;\">Điện thoại:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #ddd;\">{supplier_phone_number}</td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #ddd; font-weight: bold;\">Email:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #ddd;\">{supplier_email}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #ddd; font-weight: bold;\">Địa chỉ:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #ddd;\" colspan=\"3\">{supplier_address}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #ddd; font-weight: bold;\">Kho nhập:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #ddd;\">{location_name}</td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #ddd; font-weight: bold;\">Ngày giao dự kiến:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #ddd;\">{expected_on}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">ĐVT</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">SL Đặt</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: right; width: 100px;\">Đơn giá</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: right; width: 110px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{line_product_name}<br><small style=\"color: #666;\">{line_variant}</small></td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_quantity}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{line_price}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{line_amount}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG GIÁ TRỊ -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Tổng tiền hàng:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 120px;\">{total}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Chiết khấu:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{total_discount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Thuế VAT:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{total_tax}</td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 10px; border: 1px solid #333; font-weight: bold; font-size: 14px;\">TỔNG CỘNG:</td>\r\n      <td style=\"padding: 10px; border: 1px solid #333; text-align: right; font-weight: bold; font-size: 14px;\">{total_amount}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 40px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI LẬP ĐƠN</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{account_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">PHÊ DUYỆT</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"margin-top: 15px; padding-top: 8px; border-top: 1px dashed #ccc; font-size: 10px; color: #666; text-align: center;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,0BAA0B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HxC,CAAC"}},
    {"offset": {"line": 4409, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/return-order.ts"],"sourcesContent":["/**\r\n * Mẫu in Đơn trả hàng (Extended) - TipTap compatible\r\n */\r\nexport const RETURN_ORDER_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n  <div style=\"color: #666;\">{store_address}</div>\r\n  <div style=\"color: #666;\">ĐT: {store_phone_number}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU TRẢ HÀNG</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Số: <strong>{return_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n  <div>Đơn hàng gốc: <strong>{order_code}</strong></div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Khách hàng:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 8px; width: 15%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Mã KH:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{customer_code}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Điện thoại:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{customer_phone_number}</td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Email:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{customer_email}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Lý do trả:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\" colspan=\"3\"><strong>{reason}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG SẢN PHẨM TRẢ -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">ĐVT</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">SL Trả</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: right; width: 100px;\">Đơn giá</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: right; width: 110px;\">Thành tiền</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{line_product_name}<br><small style=\"color: #666;\">{line_variant}</small></td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_unit}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_quantity}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{line_price}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{line_amount}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG GIÁ TRỊ HOÀN -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Tổng số lượng trả:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right; width: 120px;\"><strong>{total_quantity}</strong></td>\r\n    </tr>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 10px; border: 1px solid #333; font-weight: bold; font-size: 14px;\">TỔNG TIỀN HOÀN:</td>\r\n      <td style=\"padding: 10px; border: 1px solid #333; text-align: right; font-weight: bold; font-size: 14px;\">{total_amount}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Bằng chữ:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right; font-style: italic;\">{total_text}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">Trạng thái hoàn tiền:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\"><strong>{refund_status}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 40px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">KHÁCH HÀNG</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{customer_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI NHẬN HÀNG</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{account_name}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"margin-top: 15px; padding-top: 8px; border-top: 1px dashed #ccc; font-size: 10px; color: #666; text-align: center;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,wBAAwB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHtC,CAAC"}},
    {"offset": {"line": 4543, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/handover.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu bàn giao (Extended) - TipTap compatible\r\n */\r\nexport const HANDOVER_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n  <div style=\"color: #666;\">{store_address}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU BÀN GIAO</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Số: <strong>{handover_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN BÀN GIAO -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Người bàn giao:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{from_employee}</strong></td>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Bộ phận:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{from_department}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Người nhận:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{to_employee}</strong></td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Bộ phận:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{to_department}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Loại bàn giao:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{handover_type}</td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Trạng thái:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{status}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- BẢNG NỘI DUNG BÀN GIAO -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: left;\">Nội dung bàn giao</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 80px;\">Số lượng</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 100px;\">Tình trạng</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: left; width: 150px;\">Ghi chú</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{line_description}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_quantity}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_condition}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{line_note}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ CHUNG -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CAM KẾT -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Cam kết:</strong> Hai bên đã kiểm tra và xác nhận đầy đủ các nội dung bàn giao trên. Người nhận cam kết bảo quản và sử dụng đúng mục đích.\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 40px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI BÀN GIAO</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{from_employee}</div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI NHẬN</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{to_employee}</div>\r\n      </td>\r\n      <td style=\"width: 33%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">XÁC NHẬN</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; color: #666; font-size: 11px;\">\r\n  Phiếu này được lập thành 02 bản, mỗi bên giữ 01 bản có giá trị như nhau.\r\n\n  <div style=\"font-size: 10px; color: #666; margin-top: 5px;\">In lúc: {print_date} {print_time}</div></div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGlC,CAAC"}},
    {"offset": {"line": 4662, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/refund-confirmation.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu xác nhận hoàn (Extended) - TipTap compatible\r\n */\r\nexport const REFUND_CONFIRMATION_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n  <div style=\"color: #666;\">{store_address}</div>\r\n  <div style=\"color: #666;\">ĐT: {store_phone_number}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU XÁC NHẬN HOÀN TIỀN</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Số: <strong>{refund_code}</strong></div>\r\n  <div>Ngày: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN HOÀN TIỀN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Mã đơn hàng gốc:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{order_code}</strong></td>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Ngày đặt:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{order_date}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Mã phiếu trả:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{return_code}</strong></td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Ngày trả:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{return_date}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Khách hàng:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{customer_name}</strong></td>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Điện thoại:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{customer_phone_number}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Lý do hoàn:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\" colspan=\"3\">{refund_reason}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- CHI TIẾT HOÀN TIỀN -->\r\n<div style=\"background: #f5f5f5; border: 2px solid #333; padding: 20px; margin-bottom: 20px; text-align: center;\">\r\n  <div style=\"font-size: 14px; color: #666; margin-bottom: 10px;\">SỐ TIỀN HOÀN</div>\r\n  <div style=\"font-size: 28px; font-weight: bold;\">{refund_amount}</div>\r\n  <div style=\"font-style: italic; color: #666; margin-top: 5px;\">({refund_amount_text})</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN HOÀN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Hình thức hoàn:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{refund_method}</strong></td>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Trạng thái:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{refund_status}</strong></td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Ngày hoàn tiền:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{refunded_on}</td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Người xử lý:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{account_name}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- THÔNG TIN TÀI KHOẢN (nếu chuyển khoản) -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Ngân hàng:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{bank_name}</td>\r\n      <td style=\"padding: 8px; width: 20%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Chi nhánh:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{bank_branch}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Số tài khoản:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{bank_account}</strong></td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Chủ tài khoản:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{bank_account_name}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 40px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">KHÁCH HÀNG</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký xác nhận đã nhận tiền)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{customer_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI XỬ LÝ</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{account_name}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"margin-top: 15px; padding-top: 8px; border-top: 1px dashed #ccc; font-size: 10px; color: #666; text-align: center;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,+BAA+B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8H7C,CAAC"}},
    {"offset": {"line": 4802, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/packing-guide.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu hướng dẫn đóng gói (Extended) - TipTap compatible\r\n */\r\nexport const PACKING_GUIDE_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">HƯỚNG DẪN ĐÓNG GÓI</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Đơn hàng: <strong>{order_code}</strong></div>\r\n  <div>Ngày: {created_on}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN NGƯỜI NHẬN -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">THÔNG TIN GIAO HÀNG</div>\r\n  <table style=\"width: 100%;\">\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 5px 0; width: 120px;\"><strong>Người nhận:</strong></td>\r\n        <td>{customer_name}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Điện thoại:</strong></td>\r\n        <td>{customer_phone_number}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Địa chỉ:</strong></td>\r\n        <td>{shipping_address}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- CHECKLIST ĐÓNG GÓI -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">CHECKLIST ĐÓNG GÓI</div>\r\n  <table style=\"width: 100%;\">\r\n    <tbody>\r\n      <tr><td style=\"padding: 5px 0;\">[ ] Kiểm tra đầy đủ sản phẩm theo danh sách</td></tr>\r\n      <tr><td style=\"padding: 5px 0;\">[ ] Kiểm tra tình trạng sản phẩm</td></tr>\r\n      <tr><td style=\"padding: 5px 0;\">[ ] Bọc chống sốc cho sản phẩm dễ vỡ</td></tr>\r\n      <tr><td style=\"padding: 5px 0;\">[ ] Đóng gói chắc chắn, dán kín</td></tr>\r\n      <tr><td style=\"padding: 5px 0;\">[ ] Dán nhãn giao hàng</td></tr>\r\n      <tr><td style=\"padding: 5px 0;\">[ ] Kèm hóa đơn/phiếu giao hàng</td></tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- DANH SÁCH SẢN PHẨM -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">SL</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 100px;\">Vị trí kho</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">Đã lấy</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{line_product_name}<br><small style=\"color: #666;\">{line_variant}</small></td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-weight: bold; font-size: 16px;\">{line_quantity}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{bin_location}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-size: 20px;\">[ ]</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- TỔNG QUAN -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tbody>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <td style=\"padding: 10px; border: 1px solid #333; font-weight: bold;\">Tổng số lượng:</td>\r\n      <td style=\"padding: 10px; border: 1px solid #333; text-align: right; font-weight: bold; font-size: 16px;\">{total_quantity}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 10px; border: 1px solid #333;\">COD thu hộ:</td>\r\n      <td style=\"padding: 10px; border: 1px solid #333; text-align: right; font-weight: bold;\">{cod}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- LƯU Ý ĐẶC BIỆT -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">LƯU Ý ĐẶC BIỆT</div>\r\n  <div>{packing_note}</div>\r\n  <div style=\"margin-top: 10px; padding-top: 10px; border-top: 1px dashed #333;\">\r\n    <strong>Ghi chú đơn hàng:</strong> {order_note}\r\n  </div>\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI ĐÓNG GÓI</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div>{account_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">KIỂM TRA</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 10px; color: #666;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,yBAAyB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HvC,CAAC"}},
    {"offset": {"line": 4940, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/sales-summary.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu tổng kết bán hàng (Extended) - TipTap compatible\r\n */\r\nexport const SALES_SUMMARY_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n  <div style=\"color: #666;\">Chi nhánh: {location_name}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">BÁO CÁO TỔNG KẾT BÁN HÀNG</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Kỳ báo cáo: <strong>{period}</strong></div>\r\n  <div>Từ ngày: {from_date} - Đến ngày: {to_date}</div>\r\n  <div>Người lập: {account_name} | Ngày lập: {created_on}</div>\r\n</div>\r\n\r\n<!-- THỐNG KÊ TỔNG QUAN -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 25%; padding: 15px; text-align: center; background: #f5f5f5; border: 1px solid #333;\">\r\n        <div style=\"font-size: 12px; color: #666;\">Tổng đơn hàng</div>\r\n        <div style=\"font-size: 24px; font-weight: bold;\">{total_orders}</div>\r\n      </td>\r\n      <td style=\"width: 25%; padding: 15px; text-align: center; background: #f5f5f5; border: 1px solid #333;\">\r\n        <div style=\"font-size: 12px; color: #666;\">Doanh thu</div>\r\n        <div style=\"font-size: 24px; font-weight: bold;\">{total_revenue}</div>\r\n      </td>\r\n      <td style=\"width: 25%; padding: 15px; text-align: center; background: #f5f5f5; border: 1px solid #333;\">\r\n        <div style=\"font-size: 12px; color: #666;\">Chiết khấu</div>\r\n        <div style=\"font-size: 24px; font-weight: bold;\">{total_discount}</div>\r\n      </td>\r\n      <td style=\"width: 25%; padding: 15px; text-align: center; background: #f5f5f5; border: 1px solid #333;\">\r\n        <div style=\"font-size: 12px; color: #666;\">Trả hàng</div>\r\n        <div style=\"font-size: 24px; font-weight: bold;\">{total_returns}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- CHI TIẾT DOANH THU -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px; font-size: 14px;\">CHI TIẾT DOANH THU</div>\r\n  <table style=\"width: 100%; border-collapse: collapse;\">\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">Doanh thu bán hàng:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right; font-weight: bold;\">{sales_revenue}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">Phí giao hàng thu được:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right;\">{delivery_revenue}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">Thuế VAT:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right;\">{total_tax}</td>\r\n      </tr>\r\n      <tr style=\"background: #f5f5f5;\">\r\n        <td style=\"padding: 10px; font-weight: bold; font-size: 14px;\">TỔNG DOANH THU:</td>\r\n        <td style=\"padding: 10px; text-align: right; font-weight: bold; font-size: 16px;\">{total_revenue}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- THỐNG KÊ THANH TOÁN -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px; font-size: 14px;\">THỐNG KÊ THANH TOÁN</div>\r\n  <table style=\"width: 100%; border-collapse: collapse;\">\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">Tiền mặt:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right; font-weight: bold;\">{cash_amount}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">Chuyển khoản:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right;\">{bank_transfer_amount}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">Thẻ tín dụng:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right;\">{card_amount}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">Ví điện tử:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right;\">{ewallet_amount}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333;\">COD:</td>\r\n        <td style=\"padding: 8px; border-bottom: 1px solid #333; text-align: right;\">{cod_amount}</td>\r\n      </tr>\r\n      <tr style=\"background: #f5f5f5;\">\r\n        <td style=\"padding: 10px; font-weight: bold;\">TỔNG THU:</td>\r\n        <td style=\"padding: 10px; text-align: right; font-weight: bold; font-size: 14px;\">{total_collected}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- TOP SẢN PHẨM BÁN CHẠY -->\r\n<div style=\"margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px; color: #333; font-size: 14px;\">TOP SẢN PHẨM BÁN CHẠY</div>\r\n  <table style=\"width: 100%; border-collapse: collapse;\">\r\n    <thead>\r\n      <tr style=\"background: #f5f5f5;\">\r\n        <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n        <th style=\"padding: 10px; border: 1px solid #333; text-align: left;\">Sản phẩm</th>\r\n        <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 80px;\">SL bán</th>\r\n        <th style=\"padding: 10px; border: 1px solid #333; text-align: right; width: 120px;\">Doanh thu</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n        <td style=\"padding: 8px; border: 1px solid #333;\">{line_product_name}</td>\r\n        <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-weight: bold;\">{line_quantity}</td>\r\n        <td style=\"padding: 8px; border: 1px solid #333; text-align: right;\">{line_amount}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 40px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI LẬP BÁO CÁO</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n        <div>{account_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">QUẢN LÝ XÁC NHẬN</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 60px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"margin-top: 15px; padding-top: 8px; border-top: 1px dashed #ccc; font-size: 10px; color: #666; text-align: center;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,yBAAyB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJvC,CAAC"}},
    {"offset": {"line": 5107, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/warranty-request.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu yêu cầu bảo hành (Extended) - TipTap compatible\r\n */\r\nexport const WARRANTY_REQUEST_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n  <div style=\"color: #666;\">{store_address}</div>\r\n  <div style=\"color: #666;\">Hotline: {store_phone_number}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU YÊU CẦU BẢO HÀNH</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Số: <strong>{warranty_request_code}</strong></div>\r\n  <div>Ngày tiếp nhận: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- THÔNG TIN KHÁCH HÀNG -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">THÔNG TIN KHÁCH HÀNG</div>\r\n  <table style=\"width: 100%;\">\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 5px 0; width: 25%;\"><strong>Họ tên:</strong></td>\r\n        <td style=\"padding: 5px 0;\"><strong>{customer_name}</strong></td>\r\n        <td style=\"padding: 5px 0; width: 20%;\"><strong>Mã KH:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{customer_code}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Điện thoại:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{customer_phone_number}</td>\r\n        <td style=\"padding: 5px 0;\"><strong>Email:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{customer_email}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Địa chỉ:</strong></td>\r\n        <td style=\"padding: 5px 0;\" colspan=\"3\">{customer_address}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- THÔNG TIN SẢN PHẨM -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">THÔNG TIN SẢN PHẨM BẢO HÀNH</div>\r\n  <table style=\"width: 100%;\">\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 5px 0; width: 25%;\"><strong>Sản phẩm:</strong></td>\r\n        <td style=\"padding: 5px 0;\"><strong>{product_name}</strong></td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Mã SP:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{product_code}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Serial/IMEI:</strong></td>\r\n        <td style=\"padding: 5px 0;\"><strong>{serial_number}</strong></td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Mã đơn hàng gốc:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{order_code}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Ngày mua:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{purchase_date}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Thời hạn BH:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{warranty_duration}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Hết hạn BH:</strong></td>\r\n        <td style=\"padding: 5px 0;\"><strong>{warranty_expired_on}</strong></td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- TÌNH TRẠNG LỖI -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">TÌNH TRẠNG LỖI</div>\r\n  <table style=\"width: 100%;\">\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 5px 0; width: 25%;\"><strong>Loại lỗi:</strong></td>\r\n        <td style=\"padding: 5px 0;\"><strong>{issue_type}</strong></td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0; vertical-align: top;\"><strong>Mô tả lỗi:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{issue_description}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Tình trạng máy:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{device_condition}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Phụ kiện kèm:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{accessories}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- TRẠNG THÁI XỬ LÝ -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #d9d9d9; font-weight: bold;\">Trạng thái:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #d9d9d9;\"><strong style=\"color: #eb2f96;\">{status}</strong></td>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #d9d9d9; font-weight: bold;\">Ưu tiên:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #d9d9d9;\">{priority}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #d9d9d9; font-weight: bold;\">Người tiếp nhận:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #d9d9d9;\">{received_by}</td>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #d9d9d9; font-weight: bold;\">Kỹ thuật viên:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #d9d9d9;\">{technician_name}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #d9d9d9; font-weight: bold;\">Dự kiến hoàn thành:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #d9d9d9;\" colspan=\"3\">{expected_completion_date}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú:</strong> {note}\r\n</div>\r\n\r\n<!-- QUY ĐỊNH BẢO HÀNH -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333; font-size: 11px;\">\r\n  <strong>QUY ĐỊNH BẢO HÀNH:</strong>\r\n  <ul style=\"margin: 5px 0 0 15px; padding: 0;\">\r\n    <li>Thời gian xử lý: 7-14 ngày làm việc (tùy mức độ lỗi)</li>\r\n    <li>Khách hàng vui lòng mang theo phiếu này khi nhận máy</li>\r\n    <li>Cửa hàng không chịu trách nhiệm nếu máy không được nhận trong 30 ngày</li>\r\n    <li>Hotline hỗ trợ: {store_phone_number}</li>\r\n  </ul>\r\n</div>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">KHÁCH HÀNG</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký xác nhận)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div>{customer_name}</div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NHÂN VIÊN TIẾP NHẬN</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n        <div>{received_by}</div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"margin-top: 15px; padding-top: 8px; border-top: 1px dashed #ccc; font-size: 10px; color: #666; text-align: center;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,4BAA4B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyK1C,CAAC"}},
    {"offset": {"line": 5290, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/packing-request.ts"],"sourcesContent":["/**\r\n * Mẫu in Phiếu yêu cầu đóng gói (Extended) - TipTap compatible\r\n */\r\nexport const PACKING_REQUEST_TEMPLATE = `\r\n<div style=\"font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; max-width: 800px; margin: 0 auto; padding: 10px;\">\r\n\r\n<!-- HEADER -->\r\n<div style=\"text-align: center; margin-bottom: 10px;\">\r\n  <div style=\"margin-bottom: 5px;\">{store_logo}</div>\r\n  <div style=\"font-size: 14px; font-weight: bold; margin-bottom: 2px;\">{store_name}</div>\r\n  <div style=\"color: #666;\">Kho: {location_name}</div>\r\n</div>\r\n\r\n<!-- TIÊU ĐỀ -->\r\n<h2 style=\"text-align: center; margin: 20px 0 10px 0; font-size: 18px; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;\">PHIẾU YÊU CẦU ĐÓNG GÓI</h2>\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <div style=\"font-size: 14px;\">Mã yêu cầu: <strong>{packing_request_code}</strong></div>\r\n  <div>Đơn hàng: <strong>{order_code}</strong></div>\r\n  <div>Ngày tạo: {created_on} {created_on_time}</div>\r\n</div>\r\n\r\n<!-- ĐỘ ƯU TIÊN -->\r\n<div style=\"text-align: center; margin-bottom: 20px;\">\r\n  <span style=\"background: #f5f5f5; border: 1px solid #333; padding: 8px 20px; font-weight: bold; font-size: 14px;\">\r\n    ĐỘ ƯU TIÊN: {priority}\r\n  </span>\r\n</div>\r\n\r\n<!-- THÔNG TIN GIAO HÀNG -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">THÔNG TIN GIAO HÀNG</div>\r\n  <table style=\"width: 100%;\">\r\n    <tbody>\r\n      <tr>\r\n        <td style=\"padding: 5px 0; width: 25%;\"><strong>Người nhận:</strong></td>\r\n        <td style=\"padding: 5px 0;\"><strong>{customer_name}</strong></td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Điện thoại:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{customer_phone_number}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Địa chỉ:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{shipping_address}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Đơn vị VC:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{carrier_name}</td>\r\n      </tr>\r\n      <tr>\r\n        <td style=\"padding: 5px 0;\"><strong>Dịch vụ:</strong></td>\r\n        <td style=\"padding: 5px 0;\">{service_name}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- DANH SÁCH SẢN PHẨM CẦN ĐÓNG GÓI -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 10px; table-layout: fixed;\">\r\n  <thead>\r\n    <tr style=\"background: #f5f5f5;\">\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 40px;\">STT</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 100px;\">Mã SP</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: left;\">Tên sản phẩm</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">SL</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 100px;\">Vị trí kho</th>\r\n      <th style=\"padding: 10px; border: 1px solid #333; text-align: center; width: 60px;\">Lấy</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center;\">{line_stt}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-family: monospace;\">{line_variant_code}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{line_product_name}<br><small style=\"color: #666;\">{line_variant}</small></td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-weight: bold; font-size: 16px;\">{line_quantity}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-weight: bold;\">{bin_location}</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333; text-align: center; font-size: 20px;\">[ ]</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- THỐNG KÊ -->\r\n<table style=\"width: 250px; margin-left: auto; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 10px; border: 1px solid #333; background: #f5f5f5; font-weight: bold;\">Tổng số lượng:</td>\r\n      <td style=\"padding: 10px; border: 1px solid #333; text-align: right; font-weight: bold; font-size: 16px;\">{total_quantity}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 10px; border: 1px solid #333;\">Tổng khối lượng:</td>\r\n      <td style=\"padding: 10px; border: 1px solid #333; text-align: right;\">{total_weight} g</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 10px; border: 1px solid #333;\">COD thu hộ:</td>\r\n      <td style=\"padding: 10px; border: 1px solid #333; text-align: right; font-weight: bold;\">{cod}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- YÊU CẦU ĐẶC BIỆT -->\r\n<div style=\"background: #f5f5f5; border: 1px solid #333; padding: 15px; margin-bottom: 20px;\">\r\n  <div style=\"font-weight: bold; margin-bottom: 10px;\">YÊU CẦU ĐẶC BIỆT</div>\r\n  <div>{special_request}</div>\r\n</div>\r\n\r\n<!-- GHI CHÚ -->\r\n<div style=\"margin-bottom: 20px; padding: 12px; background: #f5f5f5; border: 1px solid #333;\">\r\n  <strong>Ghi chú đóng gói:</strong> {packing_note}\r\n</div>\r\n\r\n<!-- TRẠNG THÁI -->\r\n<table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Trạng thái:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\"><strong>{status}</strong></td>\r\n      <td style=\"padding: 8px; width: 25%; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Người được gán:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\">{assigned_employee}</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"padding: 8px; background: #f5f5f5; border: 1px solid #333; font-weight: bold;\">Thời hạn:</td>\r\n      <td style=\"padding: 8px; border: 1px solid #333;\" colspan=\"3\"><strong>{deadline}</strong></td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- CHỮ KÝ -->\r\n<table style=\"width: 100%; margin-top: 30px;\">\r\n  <tbody>\r\n    <tr>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">NGƯỜI ĐÓNG GÓI</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n      <td style=\"width: 50%; text-align: center; padding: 10px; vertical-align: top;\">\r\n        <div style=\"font-weight: bold; margin-bottom: 5px;\">KIỂM TRA</div>\r\n        <div style=\"color: #888; font-size: 12px; font-style: italic;\">(Ký, ghi rõ họ tên)</div>\r\n        <div style=\"height: 50px;\"></div>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<!-- FOOTER -->\r\n<div style=\"text-align: center; margin-top: 15px; padding-top: 8px; border-top: 1px dashed #333; font-size: 10px; color: #666;\">\r\n  In lúc: {print_date} {print_time}\r\n</div>\r\n\r\n</div>\r\n`;\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,MAAM,2BAA2B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJzC,CAAC"}},
    {"offset": {"line": 5451, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/attendance.ts"],"sourcesContent":["/**\r\n * Attendance Template - Bảng chấm công\r\n * Mẫu in mặc định cho bảng chấm công\r\n * \r\n * CHUẨN TEMPLATE v3 (2025-12-10):\r\n * - Dạng DỌC (portrait) - mỗi nhân viên 1 tờ A4\r\n * - Compact: Chia 2 nửa tháng theo chiều ngang\r\n * - Font nhỏ gọn, vừa 1 trang\r\n */\r\n\r\n// Template cho BÁO CÁO CÁ NHÂN (mỗi nhân viên 1 trang)\r\nexport const ATTENDANCE_TEMPLATE = `<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <style>\r\n    * { margin: 0; padding: 0; box-sizing: border-box; }\r\n    body { \r\n      font-family: Arial, sans-serif; \r\n      font-size: 9px; \r\n      line-height: 1.2;\r\n      padding: 8mm;\r\n    }\r\n    @page { size: A4 portrait; margin: 8mm; }\r\n    .page-break { page-break-after: always; }\r\n    \r\n    .header { \r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 8px;\r\n      gap: 10px;\r\n    }\r\n    .store-logo {\r\n      max-width: 40px;\r\n      max-height: 40px;\r\n    }\r\n    .store-info-container { flex: 1; }\r\n    .store-name { \r\n      font-size: 11px; \r\n      font-weight: bold; \r\n    }\r\n    .store-info { \r\n      font-size: 8px; \r\n      color: #333;\r\n    }\r\n    \r\n    .title { \r\n      font-size: 13px; \r\n      font-weight: bold; \r\n      text-align: center;\r\n      margin: 8px 0 4px 0;\r\n      text-transform: uppercase;\r\n    }\r\n    .subtitle {\r\n      font-size: 11px;\r\n      text-align: center;\r\n      margin-bottom: 8px;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    .employee-info {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      margin-bottom: 8px;\r\n      padding: 6px 10px;\r\n      background: #f0f0f0;\r\n      border-radius: 3px;\r\n      font-size: 9px;\r\n    }\r\n    .info-group { display: flex; gap: 20px; }\r\n    .info-item strong { font-weight: bold; }\r\n    \r\n    .legend {\r\n      margin: 6px 0;\r\n      font-size: 8px;\r\n      color: #666;\r\n    }\r\n    .legend span { margin-right: 10px; }\r\n    \r\n    .tables-container {\r\n      display: flex;\r\n      gap: 8px;\r\n    }\r\n    .half-month {\r\n      flex: 1;\r\n    }\r\n    .half-month h4 {\r\n      font-size: 9px;\r\n      text-align: center;\r\n      margin-bottom: 4px;\r\n      background: #333;\r\n      color: white;\r\n      padding: 3px;\r\n    }\r\n    \r\n    table { \r\n      width: 100%; \r\n      border-collapse: collapse; \r\n      font-size: 8px;\r\n    }\r\n    th, td { \r\n      border: 1px solid #999; \r\n      padding: 2px 3px; \r\n      text-align: center;\r\n    }\r\n    th { \r\n      background: #e0e0e0; \r\n      font-weight: bold;\r\n      font-size: 7px;\r\n    }\r\n    .col-day { width: 22px; }\r\n    .col-dow { width: 22px; }\r\n    .col-status { width: 28px; }\r\n    .col-time { width: 38px; font-size: 7px; }\r\n    \r\n    .summary-section {\r\n      margin: 10px 0;\r\n      display: flex;\r\n      gap: 10px;\r\n    }\r\n    .summary-box {\r\n      flex: 1;\r\n      padding: 6px 10px;\r\n      background: #f5f5f5;\r\n      border-radius: 3px;\r\n      border: 1px solid #ddd;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      font-size: 9px;\r\n    }\r\n    .summary-box strong {\r\n      font-size: 11px;\r\n    }\r\n    \r\n    .footer { \r\n      margin-top: 15px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n    }\r\n    .signature-box {\r\n      width: 30%;\r\n      text-align: center;\r\n    }\r\n    .signature-title {\r\n      font-weight: bold;\r\n      font-size: 9px;\r\n      margin-bottom: 35px;\r\n    }\r\n    .signature-line {\r\n      border-top: 1px dotted #333;\r\n      padding-top: 3px;\r\n      font-size: 8px;\r\n    }\r\n    \r\n    .print-date {\r\n      font-size: 8px;\r\n      color: #666;\r\n      text-align: right;\r\n      margin-top: 10px;\r\n    }\r\n    \r\n    @media print {\r\n      body { padding: 5mm; }\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  {{#line_items}}\r\n  <div class=\"employee-page\">\r\n    <!-- Header -->\r\n    <div class=\"header\">\r\n      <img src=\"{store_logo}\" class=\"store-logo\" onerror=\"this.style.display='none'\">\r\n      <div class=\"store-info-container\">\r\n        <div class=\"store-name\">{store_name}</div>\r\n        <div class=\"store-info\">{store_address} | ĐT: {store_phone_number}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"title\">BẢNG CHẤM CÔNG CÁ NHÂN</div>\r\n    <div class=\"subtitle\">Tháng {month_year}</div>\r\n\r\n    <!-- Thông tin nhân viên -->\r\n    <div class=\"employee-info\">\r\n      <div class=\"info-group\">\r\n        <div class=\"info-item\"><strong>Mã NV:</strong> {employee_code}</div>\r\n        <div class=\"info-item\"><strong>Họ tên:</strong> {employee_name}</div>\r\n      </div>\r\n      <div class=\"info-group\">\r\n        <div class=\"info-item\"><strong>Phòng ban:</strong> {department_name}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Chú thích -->\r\n    <div class=\"legend\">\r\n      <span>✓ Có mặt</span>\r\n      <span>X Vắng</span>\r\n      <span>P Nghỉ phép</span>\r\n      <span>½ Nửa ngày</span>\r\n      <span>L Nghỉ lễ</span>\r\n      <span>- Cuối tuần/Chưa đến</span>\r\n    </div>\r\n\r\n    <!-- 2 bảng song song: Nửa đầu + Nửa cuối tháng -->\r\n    <div class=\"tables-container\">\r\n      <!-- Nửa đầu tháng (1-15) -->\r\n      <div class=\"half-month\">\r\n        <h4>Ngày 1 - 15</h4>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th class=\"col-day\">Ngày</th>\r\n              <th class=\"col-dow\">Thứ</th>\r\n              <th class=\"col-status\">TT</th>\r\n              <th class=\"col-time\">Vào</th>\r\n              <th class=\"col-time\">Ra</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr><td>1</td><td>{dow_1}</td><td>{day_1}</td><td>{checkin_1}</td><td>{checkout_1}</td></tr>\r\n            <tr><td>2</td><td>{dow_2}</td><td>{day_2}</td><td>{checkin_2}</td><td>{checkout_2}</td></tr>\r\n            <tr><td>3</td><td>{dow_3}</td><td>{day_3}</td><td>{checkin_3}</td><td>{checkout_3}</td></tr>\r\n            <tr><td>4</td><td>{dow_4}</td><td>{day_4}</td><td>{checkin_4}</td><td>{checkout_4}</td></tr>\r\n            <tr><td>5</td><td>{dow_5}</td><td>{day_5}</td><td>{checkin_5}</td><td>{checkout_5}</td></tr>\r\n            <tr><td>6</td><td>{dow_6}</td><td>{day_6}</td><td>{checkin_6}</td><td>{checkout_6}</td></tr>\r\n            <tr><td>7</td><td>{dow_7}</td><td>{day_7}</td><td>{checkin_7}</td><td>{checkout_7}</td></tr>\r\n            <tr><td>8</td><td>{dow_8}</td><td>{day_8}</td><td>{checkin_8}</td><td>{checkout_8}</td></tr>\r\n            <tr><td>9</td><td>{dow_9}</td><td>{day_9}</td><td>{checkin_9}</td><td>{checkout_9}</td></tr>\r\n            <tr><td>10</td><td>{dow_10}</td><td>{day_10}</td><td>{checkin_10}</td><td>{checkout_10}</td></tr>\r\n            <tr><td>11</td><td>{dow_11}</td><td>{day_11}</td><td>{checkin_11}</td><td>{checkout_11}</td></tr>\r\n            <tr><td>12</td><td>{dow_12}</td><td>{day_12}</td><td>{checkin_12}</td><td>{checkout_12}</td></tr>\r\n            <tr><td>13</td><td>{dow_13}</td><td>{day_13}</td><td>{checkin_13}</td><td>{checkout_13}</td></tr>\r\n            <tr><td>14</td><td>{dow_14}</td><td>{day_14}</td><td>{checkin_14}</td><td>{checkout_14}</td></tr>\r\n            <tr><td>15</td><td>{dow_15}</td><td>{day_15}</td><td>{checkin_15}</td><td>{checkout_15}</td></tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <!-- Nửa cuối tháng (16-31) -->\r\n      <div class=\"half-month\">\r\n        <h4>Ngày 16 - 31</h4>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th class=\"col-day\">Ngày</th>\r\n              <th class=\"col-dow\">Thứ</th>\r\n              <th class=\"col-status\">TT</th>\r\n              <th class=\"col-time\">Vào</th>\r\n              <th class=\"col-time\">Ra</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr><td>16</td><td>{dow_16}</td><td>{day_16}</td><td>{checkin_16}</td><td>{checkout_16}</td></tr>\r\n            <tr><td>17</td><td>{dow_17}</td><td>{day_17}</td><td>{checkin_17}</td><td>{checkout_17}</td></tr>\r\n            <tr><td>18</td><td>{dow_18}</td><td>{day_18}</td><td>{checkin_18}</td><td>{checkout_18}</td></tr>\r\n            <tr><td>19</td><td>{dow_19}</td><td>{day_19}</td><td>{checkin_19}</td><td>{checkout_19}</td></tr>\r\n            <tr><td>20</td><td>{dow_20}</td><td>{day_20}</td><td>{checkin_20}</td><td>{checkout_20}</td></tr>\r\n            <tr><td>21</td><td>{dow_21}</td><td>{day_21}</td><td>{checkin_21}</td><td>{checkout_21}</td></tr>\r\n            <tr><td>22</td><td>{dow_22}</td><td>{day_22}</td><td>{checkin_22}</td><td>{checkout_22}</td></tr>\r\n            <tr><td>23</td><td>{dow_23}</td><td>{day_23}</td><td>{checkin_23}</td><td>{checkout_23}</td></tr>\r\n            <tr><td>24</td><td>{dow_24}</td><td>{day_24}</td><td>{checkin_24}</td><td>{checkout_24}</td></tr>\r\n            <tr><td>25</td><td>{dow_25}</td><td>{day_25}</td><td>{checkin_25}</td><td>{checkout_25}</td></tr>\r\n            <tr><td>26</td><td>{dow_26}</td><td>{day_26}</td><td>{checkin_26}</td><td>{checkout_26}</td></tr>\r\n            <tr><td>27</td><td>{dow_27}</td><td>{day_27}</td><td>{checkin_27}</td><td>{checkout_27}</td></tr>\r\n            <tr><td>28</td><td>{dow_28}</td><td>{day_28}</td><td>{checkin_28}</td><td>{checkout_28}</td></tr>\r\n            <tr><td>29</td><td>{dow_29}</td><td>{day_29}</td><td>{checkin_29}</td><td>{checkout_29}</td></tr>\r\n            <tr><td>30</td><td>{dow_30}</td><td>{day_30}</td><td>{checkin_30}</td><td>{checkout_30}</td></tr>\r\n            <tr><td>31</td><td>{dow_31}</td><td>{day_31}</td><td>{checkin_31}</td><td>{checkout_31}</td></tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Tổng kết -->\r\n    <div class=\"summary-section\">\r\n      <div class=\"summary-box\"><span>Ngày công:</span> <strong>{work_days}</strong></div>\r\n      <div class=\"summary-box\"><span>Nghỉ phép:</span> <strong>{leave_days}</strong></div>\r\n      <div class=\"summary-box\"><span>Vắng mặt:</span> <strong>{absent_days}</strong></div>\r\n      <div class=\"summary-box\"><span>Đi trễ:</span> <strong>{late_arrivals}</strong></div>\r\n      <div class=\"summary-box\"><span>Về sớm:</span> <strong>{early_departures}</strong></div>\r\n      <div class=\"summary-box\"><span>Giờ làm thêm:</span> <strong>{ot_hours}h</strong></div>\r\n    </div>\r\n\r\n    <!-- Chữ ký -->\r\n    <div class=\"footer\">\r\n      <div class=\"signature-box\">\r\n        <div class=\"signature-title\">Nhân viên</div>\r\n        <div class=\"signature-line\">(Ký, ghi rõ họ tên)</div>\r\n      </div>\r\n      <div class=\"signature-box\">\r\n        <div class=\"signature-title\">Trưởng phòng</div>\r\n        <div class=\"signature-line\">(Ký, ghi rõ họ tên)</div>\r\n      </div>\r\n      <div class=\"signature-box\">\r\n        <div class=\"signature-title\">Giám đốc</div>\r\n        <div class=\"signature-line\">(Ký, đóng dấu)</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"print-date\">Ngày in: {print_date}</div>\r\n  </div>\r\n  <div class=\"page-break\"></div>\r\n  {{/line_items}}\r\n</body>\r\n</html>`;\r\n\r\n\r\n// ============================================\r\n// Template cho BÁO CÁO TỔNG HỢP (nhiều nhân viên - dạng ngang)\r\n// ============================================\r\nexport const ATTENDANCE_SUMMARY_TEMPLATE = `<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <style>\r\n    * { margin: 0; padding: 0; box-sizing: border-box; }\r\n    body { \r\n      font-family: Arial, sans-serif; \r\n      font-size: 8px; \r\n      line-height: 1.2;\r\n      padding: 5mm;\r\n    }\r\n    @page { size: A4 landscape; margin: 5mm; }\r\n    \r\n    .header { \r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 8px;\r\n      gap: 10px;\r\n    }\r\n    .store-logo {\r\n      max-width: 40px;\r\n      max-height: 40px;\r\n    }\r\n    .store-name { \r\n      font-size: 11px; \r\n      font-weight: bold; \r\n    }\r\n    .store-info { \r\n      font-size: 8px; \r\n      color: #333;\r\n    }\r\n    \r\n    .title { \r\n      font-size: 14px; \r\n      font-weight: bold; \r\n      text-align: center;\r\n      margin: 5px 0;\r\n      text-transform: uppercase;\r\n    }\r\n    .subtitle {\r\n      font-size: 10px;\r\n      text-align: center;\r\n      margin-bottom: 8px;\r\n    }\r\n    \r\n    .legend {\r\n      font-size: 7px;\r\n      margin-bottom: 5px;\r\n      color: #666;\r\n    }\r\n    \r\n    table { \r\n      width: 100%; \r\n      border-collapse: collapse; \r\n      font-size: 7px;\r\n    }\r\n    th, td { \r\n      border: 1px solid #999; \r\n      padding: 2px; \r\n      text-align: center;\r\n    }\r\n    th { \r\n      background: #e0e0e0; \r\n      font-weight: bold;\r\n    }\r\n    .col-name { \r\n      text-align: left; \r\n      padding-left: 3px !important;\r\n      min-width: 80px;\r\n    }\r\n    \r\n    .summary {\r\n      margin-top: 8px;\r\n      font-size: 9px;\r\n    }\r\n    \r\n    .footer { \r\n      margin-top: 15px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n    }\r\n    .signature-box {\r\n      width: 25%;\r\n      text-align: center;\r\n    }\r\n    .signature-title {\r\n      font-weight: bold;\r\n      font-size: 9px;\r\n      margin-bottom: 30px;\r\n    }\r\n    \r\n    .print-date {\r\n      font-size: 7px;\r\n      color: #666;\r\n      text-align: right;\r\n      margin-top: 8px;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"header\">\r\n    <img src=\"{store_logo}\" class=\"store-logo\" onerror=\"this.style.display='none'\">\r\n    <div>\r\n      <div class=\"store-name\">{store_name}</div>\r\n      <div class=\"store-info\">{store_address}</div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"title\">BẢNG CHẤM CÔNG TỔNG HỢP</div>\r\n  <div class=\"subtitle\">Tháng {month_year} | Phòng ban: {department_name}</div>\r\n\r\n  <div class=\"legend\">\r\n    ✓ = Có mặt | X = Vắng | P = Nghỉ phép | ½ = Nửa ngày | L = Nghỉ lễ | - = Cuối tuần\r\n  </div>\r\n\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        <th rowspan=\"2\">STT</th>\r\n        <th rowspan=\"2\">Mã NV</th>\r\n        <th rowspan=\"2\" class=\"col-name\">Họ và tên</th>\r\n        <th colspan=\"4\">Tổng kết</th>\r\n        <th colspan=\"31\">Ngày trong tháng</th>\r\n      </tr>\r\n      <tr>\r\n        <th>Công</th>\r\n        <th>Phép</th>\r\n        <th>Vắng</th>\r\n        <th>OT</th>\r\n        <th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th>\r\n        <th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th>\r\n        <th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th>\r\n        <th>23</th><th>24</th><th>25</th><th>26</th><th>27</th><th>28</th><th>29</th><th>30</th><th>31</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {{#line_items}}\r\n      <tr>\r\n        <td>{line_index}</td>\r\n        <td>{employee_code}</td>\r\n        <td class=\"col-name\">{employee_name}</td>\r\n        <td>{work_days}</td>\r\n        <td>{leave_days}</td>\r\n        <td>{absent_days}</td>\r\n        <td>{ot_hours}</td>\r\n        <td>{day_1}</td><td>{day_2}</td><td>{day_3}</td><td>{day_4}</td><td>{day_5}</td><td>{day_6}</td><td>{day_7}</td>\r\n        <td>{day_8}</td><td>{day_9}</td><td>{day_10}</td><td>{day_11}</td><td>{day_12}</td><td>{day_13}</td><td>{day_14}</td><td>{day_15}</td>\r\n        <td>{day_16}</td><td>{day_17}</td><td>{day_18}</td><td>{day_19}</td><td>{day_20}</td><td>{day_21}</td><td>{day_22}</td>\r\n        <td>{day_23}</td><td>{day_24}</td><td>{day_25}</td><td>{day_26}</td><td>{day_27}</td><td>{day_28}</td><td>{day_29}</td><td>{day_30}</td><td>{day_31}</td>\r\n      </tr>\r\n      {{/line_items}}\r\n    </tbody>\r\n  </table>\r\n\r\n  <div class=\"summary\">\r\n    <strong>Tổng cộng:</strong> {total_employees} nhân viên | \r\n    {total_work_days} công | {total_leave_days} phép | {total_absent_days} vắng | {total_ot_hours}h OT\r\n  </div>\r\n\r\n  <div class=\"footer\">\r\n    <div class=\"signature-box\">\r\n      <div class=\"signature-title\">Người lập</div>\r\n    </div>\r\n    <div class=\"signature-box\">\r\n      <div class=\"signature-title\">Kế toán</div>\r\n    </div>\r\n    <div class=\"signature-box\">\r\n      <div class=\"signature-title\">Trưởng phòng</div>\r\n    </div>\r\n    <div class=\"signature-box\">\r\n      <div class=\"signature-title\">Giám đốc</div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"print-date\">Ngày in: {print_date}</div>\r\n</body>\r\n</html>`;\r\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GAED,uDAAuD;;;;;;;AAChD,MAAM,sBAAsB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAoS7B,CAAC;AAMD,MAAM,8BAA8B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAiLrC,CAAC"}},
    {"offset": {"line": 5944, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/templates/index.ts"],"sourcesContent":["// =============================================\r\n// EXPORT ALL DEFAULT TEMPLATES\r\n// =============================================\r\n\r\n// MAIN TEMPLATES (16 loại chính)\r\nexport { ORDER_TEMPLATE } from './order';\r\nexport { QUOTE_TEMPLATE } from './quote';\r\nexport { RECEIPT_TEMPLATE } from './receipt';\r\nexport { PAYMENT_TEMPLATE } from './payment';\r\nexport { WARRANTY_TEMPLATE } from './warranty';\r\nexport { INVENTORY_CHECK_TEMPLATE } from './inventory-check';\r\nexport { STOCK_TRANSFER_TEMPLATE } from './stock-transfer';\r\nexport { SALES_RETURN_TEMPLATE } from './sales-return';\r\nexport { PURCHASE_ORDER_TEMPLATE } from './purchase-order';\r\nexport { PACKING_TEMPLATE } from './packing';\r\nexport { DELIVERY_TEMPLATE } from './delivery';\r\nexport { SHIPPING_LABEL_TEMPLATE } from './shipping-label';\r\nexport { PRODUCT_LABEL_TEMPLATE } from './product-label';\r\nexport { STOCK_IN_TEMPLATE } from './stock-in';\r\nexport { SUPPLIER_RETURN_TEMPLATE } from './supplier-return';\r\nexport { COMPLAINT_TEMPLATE } from './complaint';\r\nexport { PENALTY_TEMPLATE } from './penalty';\r\nexport { COST_ADJUSTMENT_TEMPLATE } from './cost-adjustment';\r\nexport { PAYROLL_TEMPLATE } from './payroll';\r\nexport { PAYSLIP_TEMPLATE } from './payslip';\r\n\r\n// EXTENDED TEMPLATES (8 loại mở rộng - MỚI)\r\nexport { SUPPLIER_ORDER_TEMPLATE } from './supplier-order';\r\nexport { RETURN_ORDER_TEMPLATE } from './return-order';\r\nexport { HANDOVER_TEMPLATE } from './handover';\r\nexport { REFUND_CONFIRMATION_TEMPLATE } from './refund-confirmation';\r\nexport { PACKING_GUIDE_TEMPLATE } from './packing-guide';\r\nexport { SALES_SUMMARY_TEMPLATE } from './sales-summary';\r\nexport { WARRANTY_REQUEST_TEMPLATE } from './warranty-request';\r\nexport { PACKING_REQUEST_TEMPLATE } from './packing-request';\r\n\r\nimport { TemplateType } from '../types';\r\n\r\n// =============================================\r\n// IMPORT ALL TEMPLATES\r\n// =============================================\r\n\r\n// Main Templates\r\nimport { ORDER_TEMPLATE } from './order';\r\nimport { QUOTE_TEMPLATE } from './quote';\r\nimport { RECEIPT_TEMPLATE } from './receipt';\r\nimport { PAYMENT_TEMPLATE } from './payment';\r\nimport { WARRANTY_TEMPLATE } from './warranty';\r\nimport { INVENTORY_CHECK_TEMPLATE } from './inventory-check';\r\nimport { STOCK_TRANSFER_TEMPLATE } from './stock-transfer';\r\nimport { SALES_RETURN_TEMPLATE } from './sales-return';\r\nimport { PURCHASE_ORDER_TEMPLATE } from './purchase-order';\r\nimport { PACKING_TEMPLATE } from './packing';\r\nimport { DELIVERY_TEMPLATE } from './delivery';\r\nimport { SHIPPING_LABEL_TEMPLATE } from './shipping-label';\r\nimport { PRODUCT_LABEL_TEMPLATE } from './product-label';\r\nimport { STOCK_IN_TEMPLATE } from './stock-in';\r\nimport { SUPPLIER_RETURN_TEMPLATE } from './supplier-return';\r\nimport { COMPLAINT_TEMPLATE } from './complaint';\r\nimport { PENALTY_TEMPLATE } from './penalty';\r\nimport { COST_ADJUSTMENT_TEMPLATE } from './cost-adjustment';\r\nimport { PAYROLL_TEMPLATE } from './payroll';\r\nimport { PAYSLIP_TEMPLATE } from './payslip';\r\nimport { ATTENDANCE_TEMPLATE } from './attendance';\r\n\r\n// Extended Templates\r\nimport { SUPPLIER_ORDER_TEMPLATE } from './supplier-order';\r\nimport { RETURN_ORDER_TEMPLATE } from './return-order';\r\nimport { HANDOVER_TEMPLATE } from './handover';\r\nimport { REFUND_CONFIRMATION_TEMPLATE } from './refund-confirmation';\r\nimport { PACKING_GUIDE_TEMPLATE } from './packing-guide';\r\nimport { SALES_SUMMARY_TEMPLATE } from './sales-summary';\r\nimport { WARRANTY_REQUEST_TEMPLATE } from './warranty-request';\r\nimport { PACKING_REQUEST_TEMPLATE } from './packing-request';\r\n\r\n// =============================================\r\n// MAP TEMPLATE TYPE TO DEFAULT TEMPLATE CONTENT\r\n// =============================================\r\n\r\n// Main Templates (16 loại trong TEMPLATE_TYPES)\r\nexport const DEFAULT_TEMPLATES: Record<TemplateType, string> = {\r\n  'order': ORDER_TEMPLATE,\r\n  'quote': QUOTE_TEMPLATE,\r\n  'receipt': RECEIPT_TEMPLATE,\r\n  'payment': PAYMENT_TEMPLATE,\r\n  'warranty': WARRANTY_TEMPLATE,\r\n  'inventory-check': INVENTORY_CHECK_TEMPLATE,\r\n  'stock-transfer': STOCK_TRANSFER_TEMPLATE,\r\n  'sales-return': SALES_RETURN_TEMPLATE,\r\n  'purchase-order': PURCHASE_ORDER_TEMPLATE,\r\n  'packing': PACKING_TEMPLATE,\r\n  'delivery': DELIVERY_TEMPLATE,\r\n  'shipping-label': SHIPPING_LABEL_TEMPLATE,\r\n  'product-label': PRODUCT_LABEL_TEMPLATE,\r\n  'stock-in': STOCK_IN_TEMPLATE,\r\n  'supplier-return': SUPPLIER_RETURN_TEMPLATE,\r\n  'complaint': COMPLAINT_TEMPLATE,\r\n  'penalty': PENALTY_TEMPLATE,\r\n  'leave': PENALTY_TEMPLATE, // TODO: Create dedicated LEAVE_TEMPLATE\r\n  'cost-adjustment': COST_ADJUSTMENT_TEMPLATE,\r\n  'handover': HANDOVER_TEMPLATE,\r\n  'payroll': PAYROLL_TEMPLATE,\r\n  'payslip': PAYSLIP_TEMPLATE,\r\n  'attendance': ATTENDANCE_TEMPLATE,\r\n};\r\n\r\n// Extended Templates (8 loại mở rộng)\r\nexport const EXTENDED_TEMPLATES: Record<string, string> = {\r\n  'supplier-order': SUPPLIER_ORDER_TEMPLATE,\r\n  'return-order': RETURN_ORDER_TEMPLATE,\r\n  'refund-confirmation': REFUND_CONFIRMATION_TEMPLATE,\r\n  'packing-guide': PACKING_GUIDE_TEMPLATE,\r\n  'sales-summary': SALES_SUMMARY_TEMPLATE,\r\n  'warranty-request': WARRANTY_REQUEST_TEMPLATE,\r\n  'packing-request': PACKING_REQUEST_TEMPLATE,\r\n};\r\n\r\n// Get default template by type (includes extended types)\r\nexport function getDefaultTemplate(type: TemplateType | string): string {\r\n  if (type in DEFAULT_TEMPLATES) {\r\n    return DEFAULT_TEMPLATES[type as TemplateType];\r\n  }\r\n  if (type in EXTENDED_TEMPLATES) {\r\n    return EXTENDED_TEMPLATES[type];\r\n  }\r\n  return '';\r\n}\r\n\r\n// Get all template types\r\nexport function getAllTemplateTypes(): string[] {\r\n  return [\r\n    ...Object.keys(DEFAULT_TEMPLATES),\r\n    ...Object.keys(EXTENDED_TEMPLATES),\r\n  ];\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA,gDAAgD;AAChD,+BAA+B;AAC/B,gDAAgD;AAEhD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA6BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBO,MAAM,oBAAkD;IAC7D,SAAS,0KAAc;IACvB,SAAS,0KAAc;IACvB,WAAW,8KAAgB;IAC3B,WAAW,8KAAgB;IAC3B,YAAY,gLAAiB;IAC7B,mBAAmB,iMAAwB;IAC3C,kBAAkB,+LAAuB;IACzC,gBAAgB,2LAAqB;IACrC,kBAAkB,+LAAuB;IACzC,WAAW,8KAAgB;IAC3B,YAAY,gLAAiB;IAC7B,kBAAkB,+LAAuB;IACzC,iBAAiB,6LAAsB;IACvC,YAAY,mLAAiB;IAC7B,mBAAmB,iMAAwB;IAC3C,aAAa,kLAAkB;IAC/B,WAAW,8KAAgB;IAC3B,SAAS,8KAAgB;IACzB,mBAAmB,iMAAwB;IAC3C,YAAY,gLAAiB;IAC7B,WAAW,8KAAgB;IAC3B,WAAW,8KAAgB;IAC3B,cAAc,oLAAmB;AACnC;AAGO,MAAM,qBAA6C;IACxD,kBAAkB,+LAAuB;IACzC,gBAAgB,2LAAqB;IACrC,uBAAuB,yMAA4B;IACnD,iBAAiB,6LAAsB;IACvC,iBAAiB,6LAAsB;IACvC,oBAAoB,mMAAyB;IAC7C,mBAAmB,iMAAwB;AAC7C;AAGO,SAAS,mBAAmB,IAA2B;IAC5D,IAAI,QAAQ,mBAAmB;QAC7B,OAAO,iBAAiB,CAAC,KAAqB;IAChD;IACA,IAAI,QAAQ,oBAAoB;QAC9B,OAAO,kBAAkB,CAAC,KAAK;IACjC;IACA,OAAO;AACT;AAGO,SAAS;IACd,OAAO;WACF,OAAO,IAAI,CAAC;WACZ,OAAO,IAAI,CAAC;KAChB;AACH"}},
    {"offset": {"line": 6101, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/default-templates.ts"],"sourcesContent":["// Re-export từ templates/index.ts - các template mới đã được tối ưu với inline styles\r\n// Các template này tương thích với TipTap editor và preview\r\nexport { DEFAULT_TEMPLATES, getDefaultTemplate } from './templates';\r\n"],"names":[],"mappings":";AAAA,sFAAsF;AACtF,4DAA4D;AAC5D"}},
    {"offset": {"line": 6113, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/printer/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { PrintTemplate, TemplateType, PaperSize } from './types';\r\nimport { getDefaultTemplate } from './default-templates';\r\n\r\n// Key format: \"type-size-branchId\" e.g. \"order-A4-branch1\" or \"type-size\" for all branches\r\ntype TemplateKey = string;\r\n\r\ninterface PrintTemplateState {\r\n  templates: Record<TemplateKey, PrintTemplate>;\r\n  defaultSizes: Record<TemplateType, PaperSize>; // Khổ in mặc định cho mỗi loại mẫu\r\n  initialized: boolean;\r\n  \r\n  // Actions\r\n  getTemplate: (type: TemplateType, size: PaperSize, branchId?: string) => PrintTemplate;\r\n  updateTemplate: (type: TemplateType, size: PaperSize, content: string, branchId?: string) => void;\r\n  updateTemplateAllBranches: (type: TemplateType, size: PaperSize, content: string) => void;\r\n  resetTemplate: (type: TemplateType, size: PaperSize, branchId?: string) => void;\r\n  setDefaultSize: (type: TemplateType, size: PaperSize) => void;\r\n  getDefaultSize: (type: TemplateType) => PaperSize;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst getTemplateKey = (type: TemplateType, size: PaperSize, branchId?: string): TemplateKey => \r\n  branchId ? `${type}-${size}-${branchId}` : `${type}-${size}`;\r\n\r\n// API sync helper\r\nasync function syncTemplateToAPI(template: PrintTemplate, action: 'create' | 'update' | 'delete'): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/settings/print-templates', {\r\n      method: action === 'create' ? 'POST' : action === 'delete' ? 'DELETE' : 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(template),\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('syncTemplateToAPI error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const usePrintTemplateStore = create<PrintTemplateState>()(\r\n  (set, get) => ({\r\n    templates: {} as Record<TemplateKey, PrintTemplate>,\r\n    defaultSizes: {} as Record<TemplateType, PaperSize>,\r\n    initialized: false,\r\n\r\n      getTemplate: (type: TemplateType, size: PaperSize, branchId?: string) => {\r\n        const state = get();\r\n        const key = getTemplateKey(type, size, branchId);\r\n        \r\n        // Thử tìm template cho branch cụ thể\r\n        const branchTemplate = state.templates[key];\r\n        if (branchTemplate && branchTemplate.content && branchTemplate.content.trim() !== '') {\r\n          // Auto-reset payroll templates nếu phát hiện dùng syntax cũ\r\n          // - {{#line_items}} : Mustache syntax không được hỗ trợ\r\n          // - {line_index} : biến cũ, phải dùng {line_stt}\r\n          if ((type === 'payroll' || type === 'payslip') && \r\n              (branchTemplate.content.includes('{{#line_items}}') || branchTemplate.content.includes('{line_index}'))) {\r\n            // Template đang dùng syntax cũ không được hỗ trợ -> reset về mặc định\r\n            return {\r\n              id: `template-${key}`,\r\n              type,\r\n              name: type === 'payroll' ? 'Bảng lương' : 'Phiếu lương',\r\n              content: getDefaultTemplate(type),\r\n              paperSize: size,\r\n              isActive: true,\r\n              updatedAt: new Date().toISOString(),\r\n            };\r\n          }\r\n          return branchTemplate;\r\n        }\r\n        \r\n        // Nếu không có template cho branch, tìm template chung\r\n        const generalKey = getTemplateKey(type, size);\r\n        const generalTemplate = state.templates[generalKey];\r\n        if (branchId && generalTemplate && generalTemplate.content && generalTemplate.content.trim() !== '') {\r\n          // Auto-reset payroll templates nếu phát hiện dùng syntax cũ\r\n          if ((type === 'payroll' || type === 'payslip') && \r\n              (generalTemplate.content.includes('{{#line_items}}') || generalTemplate.content.includes('{line_index}'))) {\r\n            return {\r\n              id: `template-${key}`,\r\n              type,\r\n              name: type === 'payroll' ? 'Bảng lương' : 'Phiếu lương',\r\n              content: getDefaultTemplate(type),\r\n              paperSize: size,\r\n              isActive: true,\r\n              updatedAt: new Date().toISOString(),\r\n            };\r\n          }\r\n          return generalTemplate;\r\n        }\r\n        \r\n        // Return default template if not exists or empty\r\n        // Đây là điểm quan trọng: nếu chưa có template hoặc template trống\r\n        // thì sử dụng mẫu mặc định của hệ thống\r\n        return {\r\n          id: `template-${key}`,\r\n          type,\r\n          name: type === 'order' ? 'Mẫu hóa đơn bán hàng' : 'Mẫu in',\r\n          content: getDefaultTemplate(type),\r\n          paperSize: size,\r\n          isActive: true,\r\n          updatedAt: new Date().toISOString(),\r\n        };\r\n      },\r\n\r\n      updateTemplate: (type, size, content, branchId?) => {\r\n        const key = getTemplateKey(type, size, branchId);\r\n        set((state) => {\r\n          const current = state.templates[key] || {\r\n            id: `template-${key}`,\r\n            type,\r\n            name: 'Mẫu in',\r\n            content: getDefaultTemplate(type),\r\n            paperSize: size,\r\n            isActive: true,\r\n            updatedAt: new Date().toISOString(),\r\n          };\r\n\r\n          return {\r\n            templates: {\r\n              ...state.templates,\r\n              [key]: {\r\n                ...current,\r\n                content,\r\n                updatedAt: new Date().toISOString(),\r\n              },\r\n            },\r\n          };\r\n        });\r\n      },\r\n\r\n      updateTemplateAllBranches: (type, size, content) => {\r\n        // Lưu template chung (không có branchId) - sẽ áp dụng cho tất cả chi nhánh\r\n        const key = getTemplateKey(type, size);\r\n        set((state) => {\r\n          // Xóa tất cả template cụ thể của các branch cho type và size này\r\n          const newTemplates = { ...state.templates };\r\n          Object.keys(newTemplates).forEach((k) => {\r\n            if (k.startsWith(`${type}-${size}-`)) {\r\n              delete newTemplates[k];\r\n            }\r\n          });\r\n\r\n          return {\r\n            templates: {\r\n              ...newTemplates,\r\n              [key]: {\r\n                id: `template-${key}`,\r\n                type,\r\n                name: 'Mẫu in',\r\n                content,\r\n                paperSize: size,\r\n                isActive: true,\r\n                updatedAt: new Date().toISOString(),\r\n              },\r\n            },\r\n          };\r\n        });\r\n      },\r\n\r\n      resetTemplate: (type, size, branchId?) => {\r\n        const key = getTemplateKey(type, size, branchId);\r\n        set((state) => ({\r\n          templates: {\r\n            ...state.templates,\r\n            [key]: {\r\n              id: `template-${key}`,\r\n              type,\r\n              name: 'Mẫu mặc định',\r\n              content: getDefaultTemplate(type),\r\n              paperSize: size,\r\n              isActive: true,\r\n              updatedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n        }));\r\n      },\r\n\r\n      setDefaultSize: (type: TemplateType, size: PaperSize) => {\r\n        set((state) => ({\r\n          defaultSizes: {\r\n            ...state.defaultSizes,\r\n            [type]: size,\r\n          },\r\n        }));\r\n      },\r\n\r\n      getDefaultSize: (type: TemplateType) => {\r\n        const state = get();\r\n        return state.defaultSizes[type] || 'A4';\r\n      },\r\n\r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        try {\r\n          const response = await fetch('/api/settings/print-templates');\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            if (json.data) {\r\n              set({ \r\n                templates: json.data.templates || {},\r\n                defaultSizes: json.data.defaultSizes || {},\r\n                initialized: true,\r\n              });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('loadFromAPI error:', error);\r\n        }\r\n        set({ initialized: true });\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6308, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/hooks/use-all-branches.ts"],"sourcesContent":["/**\r\n * useAllBranches - Convenience hook for components needing all branches as flat array\r\n * \r\n * Use case: Dropdowns, selects that need branch options\r\n * \r\n * ⚠️ For paginated views, use useBranches() instead\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useBranches } from './use-branches';\r\nimport type { Branch } from '../types';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\n/**\r\n * Returns all branches as a flat array\r\n * Compatible with legacy store pattern: { data: branches }\r\n * \r\n * Note: API returns string systemIds, but we cast to Branch[] for internal use\r\n */\r\nexport function useAllBranches() {\r\n  const query = useBranches({ limit: 100 });\r\n  \r\n  return {\r\n    // Cast to Branch[] - API returns string systemId, but we trust the data structure\r\n    data: (query.data?.data || []) as unknown as Branch[],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns branches formatted as options for Select/Combobox\r\n */\r\nexport function useBranchOptions() {\r\n  const { data, isLoading } = useAllBranches();\r\n  \r\n  const options = data.map(b => ({\r\n    value: b.systemId,\r\n    label: b.name,\r\n  }));\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Returns the default branch\r\n */\r\nexport function useDefaultBranch() {\r\n  const { data, isLoading } = useAllBranches();\r\n  const defaultBranch = data.find(b => b.isDefault) || data[0];\r\n  \r\n  return { defaultBranch, isLoading };\r\n}\r\n\r\n/**\r\n * Helper hook to find a branch by ID from cached data\r\n * Replaces legacy findById() method\r\n */\r\nexport function useBranchFinder() {\r\n  const { data } = useAllBranches();\r\n  \r\n  const findById = React.useCallback(\r\n    (systemId: SystemId | string | undefined) => {\r\n      if (!systemId) return undefined;\r\n      return data.find(b => b.systemId === systemId);\r\n    },\r\n    [data]\r\n  );\r\n  \r\n  return { findById };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;CAMC,GAED;AACA;;;;AAUO,SAAS;;IACd,MAAM,QAAQ,IAAA,8KAAW,EAAC;QAAE,OAAO;IAAI;IAEvC,OAAO;QACL,kFAAkF;QAClF,MAAO,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC7B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GAVgB;;QACA,8KAAW;;;AAcpB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YAC7B,OAAO,EAAE,QAAQ;YACjB,OAAO,EAAE,IAAI;QACf,CAAC;IAED,OAAO;QAAE;QAAS;IAAU;AAC9B;IATgB;;QACc;;;AAavB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAC5B,MAAM,gBAAgB,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,SAAS,KAAK,IAAI,CAAC,EAAE;IAE5D,OAAO;QAAE;QAAe;IAAU;AACpC;IALgB;;QACc;;;AAUvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,4KAAiB;iDAChC,CAAC;YACC,IAAI,CAAC,UAAU,OAAO;YACtB,OAAO,KAAK,IAAI;yDAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;gDACA;QAAC;KAAK;IAGR,OAAO;QAAE;IAAS;AACpB;IAZgB;;QACG"}},
    {"offset": {"line": 6407, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/tracking-utils.ts"],"sourcesContent":["import type { SystemId, BusinessId } from \"@/lib/id-types\";\r\nimport { getComplaintsTrackingSync, type ComplaintsTrackingSettings } from '@/lib/complaints-settings-sync';\r\n\r\n/**\r\n * Public Tracking Utilities for Complaints\r\n * Handles tracking URL generation and settings\r\n * \r\n * NOTE: Settings are now synced with database via complaints-settings-sync.ts\r\n */\r\n\r\n// Re-export for backwards compatibility\r\ntype PublicTrackingSettings = ComplaintsTrackingSettings;\r\n\r\n// Default tracking settings\r\nconst defaultSettings: PublicTrackingSettings = {\r\n  enabled: false,\r\n  allowCustomerComments: false,\r\n  showEmployeeName: true,\r\n  showTimeline: true,\r\n};\r\n\r\n/**\r\n * Load public tracking settings from database (sync version)\r\n */\r\nexport function loadTrackingSettings(): PublicTrackingSettings {\r\n  return getComplaintsTrackingSync();\r\n}\r\n\r\n/**\r\n * Check if tracking is enabled\r\n */\r\nexport function isTrackingEnabled(): boolean {\r\n  const settings = loadTrackingSettings();\r\n  return settings.enabled;\r\n}\r\n\r\n/**\r\n * Generate tracking URL cho khiếu nại\r\n * Format: /complaint-tracking/{publicTrackingCode}\r\n */\r\nexport function generateTrackingUrl(complaint: { publicTrackingCode?: string; systemId: SystemId; id: BusinessId }): string {\r\n  const baseUrl = window.location.origin;\r\n  const trackingCode = complaint.publicTrackingCode || complaint.systemId; // Fallback SystemId nếu chưa có code riêng\r\n  return `${baseUrl}/complaint-tracking/${trackingCode}`;\r\n}\r\n\r\n/**\r\n * Get tracking code (short ID for customer)\r\n * Format: First 8 chars of complaintId or custom format\r\n */\r\nexport function getTrackingCode(complaintId: BusinessId | undefined): string {\r\n  // Handle undefined/null\r\n  if (!complaintId) {\r\n    return 'N/A';\r\n  }\r\n  \r\n  // If ID format is COM00000003, extract the number part\r\n  const match = complaintId.match(/COM(\\d+)/);\r\n  if (match) {\r\n    return `KN-${match[1]}`;\r\n  }\r\n  // Fallback: use first 8 chars\r\n  return complaintId.substring(0, 8).toUpperCase();\r\n}\r\n\r\n/**\r\n * Check if customer comments are allowed\r\n */\r\nexport function canCustomerComment(): boolean {\r\n  const settings = loadTrackingSettings();\r\n  return settings.enabled && settings.allowCustomerComments;\r\n}\r\n\r\n/**\r\n * Check if employee names should be shown\r\n */\r\nexport function shouldShowEmployeeName(): boolean {\r\n  const settings = loadTrackingSettings();\r\n  return settings.showEmployeeName;\r\n}\r\n\r\n/**\r\n * Check if timeline should be shown\r\n */\r\nexport function shouldShowTimeline(): boolean {\r\n  const settings = loadTrackingSettings();\r\n  return settings.showTimeline;\r\n}\r\n\r\n/**\r\n * Format tracking info for display\r\n */\r\nexport function formatTrackingInfo(complaint: { publicTrackingCode?: string; systemId: SystemId; id: BusinessId }): {\r\n  code: string;\r\n  url: string;\r\n  enabled: boolean;\r\n} {\r\n  return {\r\n    code: getTrackingCode(complaint.id),\r\n    url: generateTrackingUrl(complaint),\r\n    enabled: isTrackingEnabled(),\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AACA;;AAYA,4BAA4B;AAC5B,MAAM,kBAA0C;IAC9C,SAAS;IACT,uBAAuB;IACvB,kBAAkB;IAClB,cAAc;AAChB;AAKO,SAAS;IACd,OAAO,IAAA,qKAAyB;AAClC;AAKO,SAAS;IACd,MAAM,WAAW;IACjB,OAAO,SAAS,OAAO;AACzB;AAMO,SAAS,oBAAoB,SAA8E;IAChH,MAAM,UAAU,OAAO,QAAQ,CAAC,MAAM;IACtC,MAAM,eAAe,UAAU,kBAAkB,IAAI,UAAU,QAAQ,EAAE,2CAA2C;IACpH,OAAO,GAAG,QAAQ,oBAAoB,EAAE,cAAc;AACxD;AAMO,SAAS,gBAAgB,WAAmC;IACjE,wBAAwB;IACxB,IAAI,CAAC,aAAa;QAChB,OAAO;IACT;IAEA,uDAAuD;IACvD,MAAM,QAAQ,YAAY,KAAK,CAAC;IAChC,IAAI,OAAO;QACT,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE;IACzB;IACA,8BAA8B;IAC9B,OAAO,YAAY,SAAS,CAAC,GAAG,GAAG,WAAW;AAChD;AAKO,SAAS;IACd,MAAM,WAAW;IACjB,OAAO,SAAS,OAAO,IAAI,SAAS,qBAAqB;AAC3D;AAKO,SAAS;IACd,MAAM,WAAW;IACjB,OAAO,SAAS,gBAAgB;AAClC;AAKO,SAAS;IACd,MAAM,WAAW;IACjB,OAAO,SAAS,YAAY;AAC9B;AAKO,SAAS,mBAAmB,SAA8E;IAK/G,OAAO;QACL,MAAM,gBAAgB,UAAU,EAAE;QAClC,KAAK,oBAAoB;QACzB,SAAS;IACX;AACF"}},
    {"offset": {"line": 6485, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/columns.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react';\r\nimport type { AppRouterInstance } from 'next/dist/shared/lib/app-router-context.shared-runtime';\r\nimport { ColumnDef } from '../../components/data-table/types';\r\nimport { Checkbox } from '../../components/ui/checkbox';\r\nimport { Badge } from '../../components/ui/badge';\r\nimport { Button } from '../../components/ui/button';\r\nimport { \r\n  Clock,\r\n  AlertCircle,\r\n  CheckCircle2,\r\n  XCircle,\r\n  AlertTriangle,\r\n  Phone,\r\n  Package,\r\n  Calendar,\r\n  User,\r\n  MoreHorizontal\r\n} from 'lucide-react';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '../../components/ui/dropdown-menu';\r\nimport { formatDate } from '../../lib/date-utils';\r\nimport { Complaint, complaintStatusLabels, complaintStatusColors, complaintTypeLabels, complaintTypeColors } from './types';\r\nimport { checkOverdue, formatTimeLeft } from './sla-utils';\r\nimport { generateTrackingUrl, getTrackingCode, isTrackingEnabled } from './tracking-utils';\r\nimport { toast } from 'sonner';\r\n\r\nexport const getColumns = (\r\n  onView: (systemId: string) => void,\r\n  onEdit: (systemId: string) => void,\r\n  onFinish: (systemId: string) => void,\r\n  onOpen: (systemId: string) => void,\r\n  onCancel: (systemId: string) => void,\r\n  onGetLink: (systemId: string) => void,\r\n  employees: Array<{ systemId: string; fullName: string }>,\r\n  router: AppRouterInstance\r\n): ColumnDef<Complaint>[] => [\r\n  // Select column\r\n  {\r\n    id: 'select',\r\n    header: ({ isAllPageRowsSelected, isSomePageRowsSelected, onToggleAll }) => (\r\n      <Checkbox\r\n        checked={isAllPageRowsSelected ? true : isSomePageRowsSelected ? \"indeterminate\" : false}\r\n        onCheckedChange={(value) => onToggleAll?.(!!value)}\r\n        aria-label=\"Select all\"\r\n      />\r\n    ),\r\n    cell: ({ onToggleSelect, isSelected }) => (\r\n      <Checkbox\r\n        checked={isSelected}\r\n        onCheckedChange={onToggleSelect}\r\n        aria-label=\"Select row\"\r\n      />\r\n    ),\r\n    size: 48,\r\n    meta: {\r\n      sticky: 'left',\r\n      displayName: 'Chọn',\r\n    },\r\n  },\r\n\r\n  // ID column - Clickable\r\n  {\r\n    id: 'complaintId',\r\n    accessorKey: 'id',\r\n    header: 'Mã khiếu nại',\r\n    cell: ({ row }) => (\r\n      <button\r\n        onClick={() => onView(row.systemId)}\r\n        className=\"text-primary hover:underline font-medium\"\r\n      >\r\n        {row.id}\r\n      </button>\r\n    ),\r\n    size: 140,\r\n    meta: {\r\n      displayName: 'Mã khiếu nại',\r\n    },\r\n  },\r\n\r\n  // Order Code\r\n  {\r\n    id: 'orderCode',\r\n    accessorKey: 'orderCode',\r\n    header: 'Mã đơn hàng',\r\n    cell: ({ row }) => (\r\n      <div className=\"flex items-center gap-2\">\r\n        <Package className=\"h-4 w-4 text-muted-foreground\" />\r\n        <button\r\n          onClick={() => router.push(`/orders/${row.orderSystemId}`)}\r\n          className=\"font-medium text-primary hover:underline\"\r\n        >\r\n          {row.orderCode || row.orderSystemId}\r\n        </button>\r\n      </div>\r\n    ),\r\n    size: 140,\r\n    meta: {\r\n      displayName: 'Mã đơn hàng',\r\n    },\r\n  },\r\n\r\n  // Customer Name\r\n  {\r\n    id: 'customerName',\r\n    accessorKey: 'customerName',\r\n    header: 'Khách hàng',\r\n    cell: ({ row }) => (\r\n      <div className=\"flex flex-col\">\r\n        <button\r\n          onClick={() => router.push(`/customers/${row.customerSystemId}`)}\r\n          className=\"font-medium text-primary hover:underline text-left\"\r\n        >\r\n          {row.customerName}\r\n        </button>\r\n        <span className=\"text-body-xs text-muted-foreground flex items-center gap-1\">\r\n          <Phone className=\"h-3 w-3\" />\r\n          {row.customerPhone}\r\n        </span>\r\n      </div>\r\n    ),\r\n    size: 180,\r\n    meta: {\r\n      displayName: 'Khách hàng',\r\n    },\r\n  },\r\n\r\n  // Type\r\n  {\r\n    id: 'type',\r\n    accessorKey: 'type',\r\n    header: 'Loại khiếu nại',\r\n    cell: ({ row }) => {\r\n      const type = row.type;\r\n      const typeLabels = {\r\n        'wrong-product': 'Sai hàng',\r\n        'missing-items': 'Thiếu hàng',\r\n        'wrong-packaging': 'Đóng gói sai quy cách',\r\n        'warehouse-defect': 'Trả hàng lỗi do kho',\r\n        'product-condition': 'Khách phàn nàn về tình trạng hàng',\r\n      };\r\n      return <span>{typeLabels[type as keyof typeof typeLabels] || complaintTypeLabels[type]}</span>;\r\n    },\r\n    size: 180,\r\n    meta: {\r\n      displayName: 'Loại khiếu nại',\r\n    },\r\n  },\r\n\r\n  // Priority\r\n  {\r\n    id: 'priority',\r\n    accessorKey: 'priority',\r\n    header: 'Mức độ',\r\n    cell: ({ row }) => {\r\n      const priority = row.priority;\r\n      const priorityLabels = {\r\n        low: 'Thấp',\r\n        medium: 'Trung bình',\r\n        high: 'Cao',\r\n        urgent: 'Khẩn cấp',\r\n      };\r\n      return <span>{priorityLabels[priority as keyof typeof priorityLabels] || 'Trung bình'}</span>;\r\n    },\r\n    size: 130,\r\n    meta: {\r\n      displayName: 'Mức độ',\r\n    },\r\n  },\r\n\r\n  // Status\r\n  {\r\n    id: 'status',\r\n    accessorKey: 'status',\r\n    header: 'Trạng thái',\r\n    cell: ({ row }) => {\r\n      const status = row.status;\r\n      const statusLabels = {\r\n        pending: 'Chờ xử lý',\r\n        investigating: 'Đang kiểm tra',\r\n        resolved: 'Đã giải quyết',\r\n        cancelled: 'Đã hủy',\r\n        ended: 'Kết thúc',\r\n      };\r\n      return <span>{statusLabels[status as keyof typeof statusLabels] || status}</span>;\r\n    },\r\n    size: 140,\r\n    meta: {\r\n      displayName: 'Trạng thái',\r\n    },\r\n  },\r\n\r\n  // SLA Status\r\n  {\r\n    id: 'slaStatus',\r\n    header: 'SLA',\r\n    cell: ({ row }) => {\r\n      const overdueStatus = checkOverdue(row);\r\n      \r\n      if (!overdueStatus.isOverdueResponse && !overdueStatus.isOverdueResolve) {\r\n        return <span>Trong hạn</span>;\r\n      }\r\n\r\n      if (row.status === 'resolved') {\r\n        const hours = Math.abs(overdueStatus.resolveTimeLeft);\r\n        return <span>Quá {Math.floor(hours)}h</span>;\r\n      }\r\n\r\n      const hours = Math.abs(overdueStatus.resolveTimeLeft);\r\n      return <span>Quá {Math.floor(hours)}h</span>;\r\n    },\r\n    size: 140,\r\n    meta: {\r\n      displayName: 'SLA',\r\n    },\r\n  },\r\n\r\n  // Assigned To\r\n  {\r\n    id: 'assignedTo',\r\n    accessorKey: 'assignedTo',\r\n    header: 'Người xử lý',\r\n    cell: ({ row }) => {\r\n      const assignedTo = row.assignedTo;\r\n      if (!assignedTo) {\r\n        return <span className=\"text-muted-foreground italic\">Chưa phân công</span>;\r\n      }\r\n      const employee = employees.find(e => e.systemId === assignedTo);\r\n      return (\r\n        <div className=\"flex items-center gap-2\">\r\n          <User className=\"h-4 w-4 text-muted-foreground\" />\r\n          <span>{employee?.fullName || 'Không xác định'}</span>\r\n        </div>\r\n      );\r\n    },\r\n    size: 160,\r\n    meta: {\r\n      displayName: 'Người xử lý',\r\n    },\r\n  },\r\n\r\n  // Created At\r\n  {\r\n    id: 'createdAt',\r\n    accessorKey: 'createdAt',\r\n    header: 'Ngày tạo',\r\n    cell: ({ row }) => (\r\n      <div className=\"flex items-center gap-2\">\r\n        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n        <span className=\"text-body-sm\">{formatDate(row.createdAt)}</span>\r\n      </div>\r\n    ),\r\n    size: 140,\r\n    meta: {\r\n      displayName: 'Ngày tạo',\r\n    },\r\n  },\r\n\r\n  // Updated At\r\n  {\r\n    id: 'updatedAt',\r\n    accessorKey: 'updatedAt',\r\n    header: 'Cập nhật',\r\n    cell: ({ row }) => (\r\n      <div className=\"flex items-center gap-2\">\r\n        <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n        {formatDate(row.updatedAt)}\r\n      </div>\r\n    ),\r\n    size: 140,\r\n    meta: {\r\n      displayName: 'Cập nhật',\r\n    },\r\n  },\r\n\r\n  // Verification Status\r\n  {\r\n    id: 'verification',\r\n    accessorKey: 'verification',\r\n    header: 'Xác minh',\r\n    cell: ({ row }) => {\r\n      const verification = row.verification;\r\n      const verificationLabels = {\r\n        'verified-correct': 'Đúng',\r\n        'verified-incorrect': 'Sai',\r\n        'pending-verification': 'Chưa xác minh',\r\n      };\r\n      return <span>{verificationLabels[verification as keyof typeof verificationLabels] || 'Chưa xác minh'}</span>;\r\n    },\r\n    size: 130,\r\n    meta: {\r\n      displayName: 'Xác minh',\r\n    },\r\n  },\r\n\r\n  // Branch\r\n  {\r\n    id: 'branch',\r\n    accessorKey: 'branchName',\r\n    header: 'Chi nhánh',\r\n    cell: ({ row }) => {\r\n      const branchName = row.branchName;\r\n      if (!branchName) {\r\n        return <span className=\"text-muted-foreground italic\">Chưa có</span>;\r\n      }\r\n      return <span>{branchName}</span>;\r\n    },\r\n    size: 150,\r\n    meta: {\r\n      displayName: 'Chi nhánh',\r\n    },\r\n  },\r\n\r\n  // Affected Products Count\r\n  {\r\n    id: 'affectedProducts',\r\n    header: 'SP ảnh hưởng',\r\n    cell: ({ row }) => {\r\n      const products = (row as any).affectedProducts || [];\r\n      if (products.length === 0) {\r\n        return <span className=\"text-muted-foreground\">0</span>;\r\n      }\r\n      return (\r\n        <div className=\"flex items-center gap-1\">\r\n          <Package className=\"h-4 w-4 text-orange-600\" />\r\n          <span className=\"font-medium\">{products.length}</span>\r\n        </div>\r\n      );\r\n    },\r\n    size: 110,\r\n    meta: {\r\n      displayName: 'SP ảnh hưởng',\r\n    },\r\n  },\r\n\r\n  // Resolved At\r\n  {\r\n    id: 'resolvedAt',\r\n    accessorKey: 'resolvedAt',\r\n    header: 'Ngày giải quyết',\r\n    cell: ({ row }) => {\r\n      if (!row.resolvedAt) {\r\n        return <span className=\"text-muted-foreground italic\">Chưa giải quyết</span>;\r\n      }\r\n      return (\r\n        <div className=\"flex items-center gap-2\">\r\n          <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\r\n          <span className=\"text-body-sm\">{formatDate(row.resolvedAt)}</span>\r\n        </div>\r\n      );\r\n    },\r\n    size: 160,\r\n    meta: {\r\n      displayName: 'Ngày giải quyết',\r\n    },\r\n  },\r\n\r\n  // Cancelled At\r\n  {\r\n    id: 'cancelledAt',\r\n    accessorKey: 'cancelledAt',\r\n    header: 'Ngày hủy',\r\n    cell: ({ row }) => {\r\n      if (!row.cancelledAt) {\r\n        return <span className=\"text-muted-foreground\">-</span>;\r\n      }\r\n      return (\r\n        <div className=\"flex items-center gap-2\">\r\n          <XCircle className=\"h-4 w-4 text-destructive\" />\r\n          <span className=\"text-body-sm\">{formatDate(row.cancelledAt)}</span>\r\n        </div>\r\n      );\r\n    },\r\n    size: 160,\r\n    meta: {\r\n      displayName: 'Ngày hủy',\r\n    },\r\n  },\r\n\r\n  // Description\r\n  {\r\n    id: 'description',\r\n    accessorKey: 'description',\r\n    header: 'Mô tả',\r\n    cell: ({ row }) => (\r\n      <div className=\"max-w-[300px] line-clamp-2\" title={row.description}>\r\n        {row.description}\r\n      </div>\r\n    ),\r\n    size: 300,\r\n    meta: {\r\n      displayName: 'Mô tả',\r\n    },\r\n  },\r\n\r\n  // Resolution\r\n  {\r\n    id: 'resolution',\r\n    accessorKey: 'resolutionNote',\r\n    header: 'Giải pháp',\r\n    cell: ({ row }) => {\r\n      const resolutionNote = row.resolutionNote;\r\n      if (!resolutionNote) {\r\n        return <span className=\"text-muted-foreground italic\">Chưa có</span>;\r\n      }\r\n      return (\r\n        <div className=\"max-w-[300px] line-clamp-2\" title={resolutionNote}>\r\n          {resolutionNote}\r\n        </div>\r\n      );\r\n    },\r\n    size: 300,\r\n    meta: {\r\n      displayName: 'Giải pháp',\r\n    },\r\n  },\r\n\r\n  // Actions column - sticky right\r\n  {\r\n    id: 'actions',\r\n    header: () => <div className=\"text-right\">Thao tác</div>,\r\n    cell: ({ row }) => {\r\n      const complaint = row;\r\n      const isResolved = complaint.status === 'resolved';\r\n      \r\n      return (\r\n        <div className=\"flex justify-end\">\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                <span className=\"sr-only\">Mở menu</span>\r\n                <MoreHorizontal className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"end\">\r\n              <DropdownMenuLabel>Thao tác</DropdownMenuLabel>\r\n              <DropdownMenuSeparator />\r\n              <DropdownMenuItem onClick={() => onEdit(complaint.systemId)}>\r\n                Sửa\r\n              </DropdownMenuItem>\r\n              <DropdownMenuItem \r\n                onClick={() => {\r\n                  // Check if tracking is enabled\r\n                  if (!isTrackingEnabled()) {\r\n                    toast.error('Chức năng tracking chưa được bật. Vui lòng bật trong Cài đặt.');\r\n                    return;\r\n                  }\r\n                  onGetLink(complaint.systemId);\r\n                }}\r\n              >\r\n                Get Tracking\r\n              </DropdownMenuItem>\r\n              <DropdownMenuSeparator />\r\n              {!isResolved && (\r\n                <DropdownMenuItem onClick={() => onFinish(complaint.systemId)}>\r\n                  Kết thúc\r\n                </DropdownMenuItem>\r\n              )}\r\n              {isResolved && (\r\n                <DropdownMenuItem onClick={() => onOpen(complaint.systemId)}>\r\n                  Mở\r\n                </DropdownMenuItem>\r\n              )}\r\n              <DropdownMenuSeparator />\r\n              <DropdownMenuItem \r\n                onClick={() => onCancel(complaint.systemId)}\r\n                className=\"text-destructive focus:text-destructive\"\r\n              >\r\n                Hủy\r\n              </DropdownMenuItem>\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n        </div>\r\n      );\r\n    },\r\n    size: 90,\r\n    meta: {\r\n      sticky: 'right',\r\n      displayName: 'Thao tác',\r\n    },\r\n  },\r\n];\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7278, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/complaint-card.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Phone, Package, Calendar, User, Clock, AlertCircle, CheckCircle2, XCircle, AlertTriangle } from 'lucide-react';\r\nimport { Badge } from '../../components/ui/badge';\r\nimport { StatusBadge, COMPLAINT_STATUS_MAP } from '../../components/StatusBadge';\r\nimport { Card } from '../../components/ui/card';\r\nimport { cn } from '../../lib/utils';\r\nimport { formatDate } from '../../lib/date-utils';\r\nimport { Complaint, complaintStatusLabels, complaintStatusColors, complaintTypeLabels, complaintTypeColors } from './types';\r\nimport { checkOverdue } from './sla-utils';\r\n\r\ninterface ComplaintCardProps {\r\n  complaint: Complaint;\r\n  onClick: () => void;\r\n  employees: Array<{ systemId: string; fullName: string }>;\r\n}\r\n\r\nexport function ComplaintCard({ complaint, onClick, employees }: ComplaintCardProps) {\r\n  const overdueStatus = checkOverdue(complaint);\r\n  const isOverdue = overdueStatus.isOverdueResponse || overdueStatus.isOverdueResolve;\r\n  \r\n  const statusConfig = {\r\n    pending: { icon: Clock, color: 'text-yellow-600' },\r\n    investigating: { icon: AlertCircle, color: 'text-blue-600' },\r\n    resolved: { icon: CheckCircle2, color: 'text-green-600' },\r\n    rejected: { icon: XCircle, color: 'text-gray-600' },\r\n  };\r\n  \r\n  const StatusIcon = statusConfig[complaint.status].icon;\r\n  \r\n  const priorityConfig = {\r\n    low: { label: 'Thấp', color: 'bg-slate-100 text-slate-800' },\r\n    medium: { label: 'Trung bình', color: 'bg-amber-100 text-amber-800' },\r\n    high: { label: 'Cao', color: 'bg-orange-100 text-orange-800' },\r\n    urgent: { label: 'Khẩn cấp', color: 'bg-red-100 text-red-800' },\r\n  };\r\n  \r\n  const assignedEmployee = complaint.assignedTo \r\n    ? employees.find(e => e.systemId === complaint.assignedTo)\r\n    : null;\r\n\r\n  return (\r\n    <Card\r\n      onClick={onClick}\r\n      className={cn(\r\n        \"p-4 cursor-pointer transition-all hover:shadow-md\",\r\n        \"border-l-4\",\r\n        isOverdue && \"border-l-red-500 bg-red-50\",\r\n        !isOverdue && complaint.priority === 'urgent' && \"border-l-red-400 bg-red-50\",\r\n        !isOverdue && complaint.priority === 'high' && \"border-l-orange-400 bg-orange-50\",\r\n        !isOverdue && complaint.priority === 'medium' && \"border-l-amber-400 bg-amber-50\",\r\n        !isOverdue && complaint.priority === 'low' && \"border-l-slate-400 bg-slate-50\"\r\n      )}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <span className=\"font-semibold text-body-sm text-primary\">{complaint.id}</span>\r\n            <Badge variant=\"outline\" className={cn(\"text-body-xs\", complaintTypeColors[complaint.type])}>\r\n              {complaintTypeLabels[complaint.type]}\r\n            </Badge>\r\n          </div>\r\n          <div className=\"flex items-center gap-2 text-body-xs text-muted-foreground\">\r\n            <Package className=\"h-3.5 w-3.5 shrink-0\" />\r\n            <span className=\"truncate\">{complaint.orderCode}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex flex-col items-end gap-1\">\r\n          <StatusBadge status={complaint.status} statusMap={COMPLAINT_STATUS_MAP} />\r\n          \r\n          {isOverdue && (\r\n            <Badge variant=\"outline\" className=\"text-body-xs bg-red-100 text-red-800 whitespace-nowrap\">\r\n              <AlertTriangle className=\"h-3 w-3 mr-1\" />\r\n              Quá hạn\r\n            </Badge>\r\n          )}\r\n          \r\n          <Badge \r\n            variant=\"outline\" \r\n            className={cn(\"text-body-xs\", priorityConfig[complaint.priority].color, \"whitespace-nowrap\")}\r\n          >\r\n            {priorityConfig[complaint.priority].label}\r\n          </Badge>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Customer Info */}\r\n      <div className=\"space-y-2 mb-3\">\r\n        <div className=\"flex items-center gap-2 text-body-sm\">\r\n          <User className=\"h-3.5 w-3.5 text-muted-foreground shrink-0\" />\r\n          <span className=\"font-medium truncate\">{complaint.customerName}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 text-body-sm text-muted-foreground\">\r\n          <Phone className=\"h-3.5 w-3.5 shrink-0\" />\r\n          <span>{complaint.customerPhone}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Description */}\r\n      <p className=\"text-body-sm text-muted-foreground line-clamp-2 mb-3\">\r\n        {complaint.description}\r\n      </p>\r\n\r\n      {/* Footer */}\r\n      <div className=\"flex items-center justify-between text-body-xs text-muted-foreground pt-3 border-t\">\r\n        <div className=\"flex items-center gap-1\">\r\n          <Calendar className=\"h-3.5 w-3.5\" />\r\n          <span>{formatDate(complaint.createdAt)}</span>\r\n        </div>\r\n        \r\n        {assignedEmployee ? (\r\n          <div className=\"flex items-center gap-1\">\r\n            <User className=\"h-3.5 w-3.5\" />\r\n            <span className=\"truncate max-w-[120px]\">{assignedEmployee.fullName}</span>\r\n          </div>\r\n        ) : (\r\n          <span className=\"text-muted-foreground\">Chưa phân công</span>\r\n        )}\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7609, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/complaint-card-context-menu.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport {\r\n  ContextMenu,\r\n  ContextMenuContent,\r\n  ContextMenuItem,\r\n  ContextMenuSeparator,\r\n  ContextMenuTrigger,\r\n} from '../../components/ui/context-menu';\r\nimport { Complaint } from './types';\r\nimport { isTrackingEnabled } from './tracking-utils';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ComplaintCardContextMenuProps {\r\n  complaint: Complaint;\r\n  onEdit: (systemId: string) => void;\r\n  onGetLink: (systemId: string) => void;\r\n  onStartInvestigation: (systemId: string) => void;\r\n  onFinish: (systemId: string) => void;\r\n  onOpen: (systemId: string) => void;\r\n  onReject: (systemId: string) => void;\r\n  onRemind: (systemId: string) => void;\r\n  children: React.ReactNode;\r\n}\r\n\r\n/**\r\n * Context Menu for Complaint Card - Status-based actions (no icons)\r\n */\r\nexport function ComplaintCardContextMenu({\r\n  complaint,\r\n  onEdit,\r\n  onGetLink,\r\n  onStartInvestigation,\r\n  onFinish,\r\n  onOpen,\r\n  onReject,\r\n  onRemind,\r\n  children,\r\n}: ComplaintCardContextMenuProps) {\r\n  const { status } = complaint;\r\n\r\n  return (\r\n    <ContextMenu>\r\n      <ContextMenuTrigger asChild>\r\n        {children}\r\n      </ContextMenuTrigger>\r\n      <ContextMenuContent className=\"w-56\">\r\n        {/* PENDING: Chờ xử lý */}\r\n        {status === 'pending' && (\r\n          <>\r\n            <ContextMenuItem onSelect={() => onEdit(complaint.systemId)}>\r\n              Sửa thông tin\r\n            </ContextMenuItem>\r\n            <ContextMenuItem onSelect={() => onStartInvestigation(complaint.systemId)}>\r\n              Bắt đầu xử lý\r\n            </ContextMenuItem>\r\n            <ContextMenuItem\r\n              onSelect={() => {\r\n                if (!isTrackingEnabled()) {\r\n                  toast.error('Chức năng tracking chưa được bật. Vui lòng bật trong Cài đặt.');\r\n                  return;\r\n                }\r\n                onGetLink(complaint.systemId);\r\n              }}\r\n            >\r\n              Copy link tracking\r\n            </ContextMenuItem>\r\n            <ContextMenuItem onSelect={() => onRemind(complaint.systemId)}>\r\n              Gửi thông báo nhắc nhở\r\n            </ContextMenuItem>\r\n            <ContextMenuSeparator />\r\n            <ContextMenuItem onSelect={() => onFinish(complaint.systemId)}>\r\n              Kết thúc\r\n            </ContextMenuItem>\r\n            <ContextMenuItem\r\n              onSelect={() => onReject(complaint.systemId)}\r\n              className=\"text-destructive focus:text-destructive\"\r\n            >\r\n              Hủy khiếu nại\r\n            </ContextMenuItem>\r\n          </>\r\n        )}\r\n\r\n        {/* INVESTIGATING: Đang điều tra */}\r\n        {status === 'investigating' && (\r\n          <>\r\n            <ContextMenuItem onSelect={() => onEdit(complaint.systemId)}>\r\n              Sửa thông tin\r\n            </ContextMenuItem>\r\n            <ContextMenuItem onSelect={() => onFinish(complaint.systemId)}>\r\n              Hoàn thành\r\n            </ContextMenuItem>\r\n            <ContextMenuItem\r\n              onSelect={() => {\r\n                if (!isTrackingEnabled()) {\r\n                  toast.error('Chức năng tracking chưa được bật. Vui lòng bật trong Cài đặt.');\r\n                  return;\r\n                }\r\n                onGetLink(complaint.systemId);\r\n              }}\r\n            >\r\n              Copy link tracking\r\n            </ContextMenuItem>\r\n            <ContextMenuItem onSelect={() => onRemind(complaint.systemId)}>\r\n              Gửi thông báo nhắc nhở\r\n            </ContextMenuItem>\r\n            <ContextMenuSeparator />\r\n            <ContextMenuItem\r\n              onSelect={() => onReject(complaint.systemId)}\r\n              className=\"text-destructive focus:text-destructive\"\r\n            >\r\n              Từ chối khiếu nại\r\n            </ContextMenuItem>\r\n          </>\r\n        )}\r\n\r\n        {/* RESOLVED: Đã giải quyết */}\r\n        {status === 'resolved' && (\r\n          <>\r\n            <ContextMenuItem\r\n              onSelect={() => {\r\n                if (!isTrackingEnabled()) {\r\n                  toast.error('Chức năng tracking chưa được bật. Vui lòng bật trong Cài đặt.');\r\n                  return;\r\n                }\r\n                onGetLink(complaint.systemId);\r\n              }}\r\n            >\r\n              Copy link tracking\r\n            </ContextMenuItem>\r\n            <ContextMenuItem onSelect={() => onOpen(complaint.systemId)}>\r\n              Mở lại\r\n            </ContextMenuItem>\r\n          </>\r\n        )}\r\n\r\n        {/* CANCELLED: Đã hủy */}\r\n        {status === 'cancelled' && (\r\n          <>\r\n            <ContextMenuItem\r\n              onSelect={() => {\r\n                if (!isTrackingEnabled()) {\r\n                  toast.error('Chức năng tracking chưa được bật. Vui lòng bật trong Cài đặt.');\r\n                  return;\r\n                }\r\n                onGetLink(complaint.systemId);\r\n              }}\r\n            >\r\n              Copy link tracking\r\n            </ContextMenuItem>\r\n            <ContextMenuItem onSelect={() => onOpen(complaint.systemId)}>\r\n              Mở lại\r\n            </ContextMenuItem>\r\n          </>\r\n        )}\r\n      </ContextMenuContent>\r\n    </ContextMenu>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAQA;AACA;;;;;AAiBO,SAAS,yBAAyB,EACvC,SAAS,EACT,MAAM,EACN,SAAS,EACT,oBAAoB,EACpB,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,QAAQ,EACR,QAAQ,EACsB;IAC9B,MAAM,EAAE,MAAM,EAAE,GAAG;IAEnB,qBACE,6LAAC,sJAAW;;0BACV,6LAAC,6JAAkB;gBAAC,OAAO;0BACxB;;;;;;0BAEH,6LAAC,6JAAkB;gBAAC,WAAU;;oBAE3B,WAAW,2BACV;;0CACE,6LAAC,0JAAe;gCAAC,UAAU,IAAM,OAAO,UAAU,QAAQ;0CAAG;;;;;;0CAG7D,6LAAC,0JAAe;gCAAC,UAAU,IAAM,qBAAqB,UAAU,QAAQ;0CAAG;;;;;;0CAG3E,6LAAC,0JAAe;gCACd,UAAU;oCACR,IAAI,CAAC,IAAA,mKAAiB,KAAI;wCACxB,oJAAK,CAAC,KAAK,CAAC;wCACZ;oCACF;oCACA,UAAU,UAAU,QAAQ;gCAC9B;0CACD;;;;;;0CAGD,6LAAC,0JAAe;gCAAC,UAAU,IAAM,SAAS,UAAU,QAAQ;0CAAG;;;;;;0CAG/D,6LAAC,+JAAoB;;;;;0CACrB,6LAAC,0JAAe;gCAAC,UAAU,IAAM,SAAS,UAAU,QAAQ;0CAAG;;;;;;0CAG/D,6LAAC,0JAAe;gCACd,UAAU,IAAM,SAAS,UAAU,QAAQ;gCAC3C,WAAU;0CACX;;;;;;;;oBAOJ,WAAW,iCACV;;0CACE,6LAAC,0JAAe;gCAAC,UAAU,IAAM,OAAO,UAAU,QAAQ;0CAAG;;;;;;0CAG7D,6LAAC,0JAAe;gCAAC,UAAU,IAAM,SAAS,UAAU,QAAQ;0CAAG;;;;;;0CAG/D,6LAAC,0JAAe;gCACd,UAAU;oCACR,IAAI,CAAC,IAAA,mKAAiB,KAAI;wCACxB,oJAAK,CAAC,KAAK,CAAC;wCACZ;oCACF;oCACA,UAAU,UAAU,QAAQ;gCAC9B;0CACD;;;;;;0CAGD,6LAAC,0JAAe;gCAAC,UAAU,IAAM,SAAS,UAAU,QAAQ;0CAAG;;;;;;0CAG/D,6LAAC,+JAAoB;;;;;0CACrB,6LAAC,0JAAe;gCACd,UAAU,IAAM,SAAS,UAAU,QAAQ;gCAC3C,WAAU;0CACX;;;;;;;;oBAOJ,WAAW,4BACV;;0CACE,6LAAC,0JAAe;gCACd,UAAU;oCACR,IAAI,CAAC,IAAA,mKAAiB,KAAI;wCACxB,oJAAK,CAAC,KAAK,CAAC;wCACZ;oCACF;oCACA,UAAU,UAAU,QAAQ;gCAC9B;0CACD;;;;;;0CAGD,6LAAC,0JAAe;gCAAC,UAAU,IAAM,OAAO,UAAU,QAAQ;0CAAG;;;;;;;;oBAOhE,WAAW,6BACV;;0CACE,6LAAC,0JAAe;gCACd,UAAU;oCACR,IAAI,CAAC,IAAA,mKAAiB,KAAI;wCACxB,oJAAK,CAAC,KAAK,CAAC;wCACZ;oCACF;oCACA,UAAU,UAAU,QAAQ;gCAC9B;0CACD;;;;;;0CAGD,6LAAC,0JAAe;gCAAC,UAAU,IAAM,OAAO,UAAU,QAAQ;0CAAG;;;;;;;;;;;;;;;;;;;;AAQzE;KAlIgB"}},
    {"offset": {"line": 7831, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-settings-page-header.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Settings2 } from 'lucide-react';\r\nimport { usePageHeader, type PageHeaderState, type PageHeaderDocLink } from '../../contexts/page-header-context';\r\nimport type { BreadcrumbItem } from '../../lib/breadcrumb-system';\r\n\r\nexport type SettingsPageHeaderOptions = Omit<PageHeaderState, 'title' | 'docLink'> & {\r\n  title: string;\r\n  icon?: React.ReactNode;\r\n  docLink?: string | PageHeaderDocLink;\r\n};\r\n\r\nconst defaultDocLabel = 'Xem hướng dẫn';\r\nconst baseBreadcrumb: BreadcrumbItem[] = [\r\n  { label: 'Trang chủ', href: '/', isCurrent: false },\r\n  { label: 'Cài đặt', href: '/settings', isCurrent: false },\r\n];\r\n\r\nconst normalizeLabel = (label?: string) => label?.trim().toLocaleLowerCase('vi');\r\nconst isHomeCrumb = (item: BreadcrumbItem) => item.href === '/' || normalizeLabel(item.label) === 'trang chủ';\r\nconst isSettingsCrumb = (item: BreadcrumbItem) => item.href === '/settings' || normalizeLabel(item.label) === 'cài đặt';\r\n\r\nexport function useSettingsPageHeader(options: SettingsPageHeaderOptions) {\r\n  const pathname = usePathname();\r\n  const { title, icon, docLink, breadcrumb, ...rest } = options;\r\n\r\n  const normalizedDocLink = React.useMemo<PageHeaderDocLink | undefined>(() => {\r\n    if (!docLink) return undefined;\r\n    if (typeof docLink === 'string') {\r\n      return { href: docLink, label: defaultDocLabel };\r\n    }\r\n    return {\r\n      href: docLink.href,\r\n      label: docLink.label ?? defaultDocLabel,\r\n    };\r\n  }, [docLink]);\r\n\r\n  const decoratedTitle = React.useMemo(() => (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      {(icon ?? <Settings2 className=\"h-5 w-5 text-muted-foreground\" aria-hidden=\"true\" />)}\r\n      <span>{title}</span>\r\n    </span>\r\n  ), [icon, title]);\r\n\r\n  const normalizedBreadcrumb = React.useMemo(() => {\r\n    const custom = (breadcrumb ?? []).map((item) => ({\r\n      ...item,\r\n      href: item.href || pathname,\r\n    }));\r\n\r\n    let merged: BreadcrumbItem[] = custom.length\r\n      ? [...custom]\r\n      : [{ label: title, href: pathname, isCurrent: true }];\r\n\r\n    if (!merged.some(isHomeCrumb)) {\r\n      merged = [{ ...baseBreadcrumb[0] }, ...merged];\r\n    }\r\n\r\n    if (!merged.some(isSettingsCrumb)) {\r\n      const homeIndex = merged.findIndex(isHomeCrumb);\r\n      const insertionIndex = homeIndex >= 0 ? homeIndex + 1 : 0;\r\n      merged = [\r\n        ...merged.slice(0, insertionIndex),\r\n        { ...baseBreadcrumb[1] },\r\n        ...merged.slice(insertionIndex),\r\n      ];\r\n    }\r\n\r\n    return merged.map((item, index) => ({\r\n      ...item,\r\n      isCurrent: index === merged.length - 1,\r\n    }));\r\n  }, [breadcrumb, pathname, title]);\r\n\r\n  return usePageHeader({\r\n    ...rest,\r\n    breadcrumb: normalizedBreadcrumb,\r\n    title: decoratedTitle,\r\n    docLink: normalizedDocLink,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;AASA,MAAM,kBAAkB;AACxB,MAAM,iBAAmC;IACvC;QAAE,OAAO;QAAa,MAAM;QAAK,WAAW;IAAM;IAClD;QAAE,OAAO;QAAW,MAAM;QAAa,WAAW;IAAM;CACzD;AAED,MAAM,iBAAiB,CAAC,QAAmB,OAAO,OAAO,kBAAkB;AAC3E,MAAM,cAAc,CAAC,OAAyB,KAAK,IAAI,KAAK,OAAO,eAAe,KAAK,KAAK,MAAM;AAClG,MAAM,kBAAkB,CAAC,OAAyB,KAAK,IAAI,KAAK,eAAe,eAAe,KAAK,KAAK,MAAM;AAEvG,SAAS,sBAAsB,OAAkC;;IACtE,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;IAEtD,MAAM,oBAAoB,wKAAa;4DAAgC;YACrE,IAAI,CAAC,SAAS,OAAO;YACrB,IAAI,OAAO,YAAY,UAAU;gBAC/B,OAAO;oBAAE,MAAM;oBAAS,OAAO;gBAAgB;YACjD;YACA,OAAO;gBACL,MAAM,QAAQ,IAAI;gBAClB,OAAO,QAAQ,KAAK,IAAI;YAC1B;QACF;2DAAG;QAAC;KAAQ;IAEZ,MAAM,iBAAiB,wKAAa;yDAAC,kBACnC,6LAAC;gBAAK,WAAU;;oBACZ,sBAAQ,6LAAC,gOAAS;wBAAC,WAAU;wBAAgC,eAAY;;;;;;kCAC3E,6LAAC;kCAAM;;;;;;;;;;;;wDAER;QAAC;QAAM;KAAM;IAEhB,MAAM,uBAAuB,wKAAa;+DAAC;YACzC,MAAM,SAAS,CAAC,cAAc,EAAE,EAAE,GAAG;8EAAC,CAAC,OAAS,CAAC;wBAC/C,GAAG,IAAI;wBACP,MAAM,KAAK,IAAI,IAAI;oBACrB,CAAC;;YAED,IAAI,SAA2B,OAAO,MAAM,GACxC;mBAAI;aAAO,GACX;gBAAC;oBAAE,OAAO;oBAAO,MAAM;oBAAU,WAAW;gBAAK;aAAE;YAEvD,IAAI,CAAC,OAAO,IAAI,CAAC,cAAc;gBAC7B,SAAS;oBAAC;wBAAE,GAAG,cAAc,CAAC,EAAE;oBAAC;uBAAM;iBAAO;YAChD;YAEA,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB;gBACjC,MAAM,YAAY,OAAO,SAAS,CAAC;gBACnC,MAAM,iBAAiB,aAAa,IAAI,YAAY,IAAI;gBACxD,SAAS;uBACJ,OAAO,KAAK,CAAC,GAAG;oBACnB;wBAAE,GAAG,cAAc,CAAC,EAAE;oBAAC;uBACpB,OAAO,KAAK,CAAC;iBACjB;YACH;YAEA,OAAO,OAAO,GAAG;uEAAC,CAAC,MAAM,QAAU,CAAC;wBAClC,GAAG,IAAI;wBACP,WAAW,UAAU,OAAO,MAAM,GAAG;oBACvC,CAAC;;QACH;8DAAG;QAAC;QAAY;QAAU;KAAM;IAEhC,OAAO,IAAA,0JAAa,EAAC;QACnB,GAAG,IAAI;QACP,YAAY;QACZ,OAAO;QACP,SAAS;IACX;AACF;GA1DgB;;QACG,oJAAW;QAmDrB,0JAAa"}},
    {"offset": {"line": 7980, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/settings-config-store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n\r\n// API sync helper\r\nasync function syncSettingsToAPI<TState>(\r\n  apiEndpoint: string | undefined, \r\n  data: TState\r\n): Promise<boolean> {\r\n  if (!apiEndpoint) return true;\r\n  \r\n  try {\r\n    const response = await fetch(apiEndpoint, {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n      body: JSON.stringify(data),\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Settings Config API] sync error for ${apiEndpoint}:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport type SettingsConfigStoreState<TState> = {\r\n  data: TState;\r\n  initialized: boolean;\r\n  setSection: <K extends keyof TState>(\r\n    key: K,\r\n    value: TState[K] | ((previous: TState[K]) => TState[K])\r\n  ) => void;\r\n  setData: (updater: (previous: TState) => TState) => void;\r\n  resetSection: <K extends keyof TState>(key: K) => void;\r\n  resetAll: () => void;\r\n  loadFromAPI: () => Promise<void>;\r\n};\r\n\r\nexport type SettingsConfigStore<TState> = ReturnType<typeof createSettingsConfigStore<TState>>;\r\n\r\ninterface SettingsConfigStoreOptions<TState> {\r\n  storageKey: string;\r\n  getDefaultState: () => TState;\r\n  apiEndpoint?: string; // ✅ API endpoint for database sync\r\n}\r\n\r\nexport function createSettingsConfigStore<TState>({\r\n  storageKey,\r\n  getDefaultState,\r\n  apiEndpoint,\r\n}: SettingsConfigStoreOptions<TState>) {\r\n  return create<SettingsConfigStoreState<TState>>()(\r\n    (set, get) => ({\r\n        data: getDefaultState(),\r\n        initialized: false,\r\n        setSection: (key, value) => {\r\n          const current = get().data;\r\n          const nextValue =\r\n            typeof value === 'function'\r\n              ? (value as (previous: TState[typeof key]) => TState[typeof key])(current[key])\r\n              : value;\r\n\r\n          const newData = {\r\n            ...current,\r\n            [key]: nextValue,\r\n          };\r\n          \r\n          set({ data: newData });\r\n          \r\n          // Sync to API in background\r\n          syncSettingsToAPI(apiEndpoint, newData).catch(console.error);\r\n        },\r\n        setData: (updater) => {\r\n          const newData = updater(get().data);\r\n          set({ data: newData });\r\n          \r\n          // Sync to API in background\r\n          syncSettingsToAPI(apiEndpoint, newData).catch(console.error);\r\n        },\r\n        resetSection: (key) => {\r\n          const defaults = getDefaultState();\r\n          const newData = {\r\n            ...get().data,\r\n            [key]: defaults[key],\r\n          };\r\n          \r\n          set({ data: newData });\r\n          \r\n          // Sync to API in background\r\n          syncSettingsToAPI(apiEndpoint, newData).catch(console.error);\r\n        },\r\n        resetAll: () => {\r\n          const defaults = getDefaultState();\r\n          set({ data: defaults });\r\n          \r\n          // Sync to API in background\r\n          syncSettingsToAPI(apiEndpoint, defaults).catch(console.error);\r\n        },\r\n        \r\n        loadFromAPI: async () => {\r\n          if (!apiEndpoint) return;\r\n          if (get().initialized) return;\r\n          \r\n          try {\r\n            const response = await fetch(apiEndpoint, {\r\n              credentials: 'include',\r\n            });\r\n            if (response.ok) {\r\n              const json = await response.json();\r\n              const data = json.data || json;\r\n              if (data && Object.keys(data).length > 0) {\r\n                set({ \r\n                  data: { ...getDefaultState(), ...data },\r\n                  initialized: true \r\n                });\r\n              } else {\r\n                set({ initialized: true });\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.error(`[Settings Config Store] loadFromAPI error for ${apiEndpoint}:`, error);\r\n          }\r\n        },\r\n      })\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,kBAAkB;AAClB,eAAe,kBACb,WAA+B,EAC/B,IAAY;IAEZ,IAAI,CAAC,aAAa,OAAO;IAEzB,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,aAAa;YACxC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,aAAa;YACb,MAAM,KAAK,SAAS,CAAC;QACvB;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,qCAAqC,EAAE,YAAY,CAAC,CAAC,EAAE;QACtE,OAAO;IACT;AACF;AAuBO,SAAS,0BAAkC,EAChD,UAAU,EACV,eAAe,EACf,WAAW,EACwB;IACnC,OAAO,IAAA,qJAAM,IACX,CAAC,KAAK,MAAQ,CAAC;YACX,MAAM;YACN,aAAa;YACb,YAAY,CAAC,KAAK;gBAChB,MAAM,UAAU,MAAM,IAAI;gBAC1B,MAAM,YACJ,OAAO,UAAU,aACb,AAAC,MAA+D,OAAO,CAAC,IAAI,IAC5E;gBAEN,MAAM,UAAU;oBACd,GAAG,OAAO;oBACV,CAAC,IAAI,EAAE;gBACT;gBAEA,IAAI;oBAAE,MAAM;gBAAQ;gBAEpB,4BAA4B;gBAC5B,kBAAkB,aAAa,SAAS,KAAK,CAAC,QAAQ,KAAK;YAC7D;YACA,SAAS,CAAC;gBACR,MAAM,UAAU,QAAQ,MAAM,IAAI;gBAClC,IAAI;oBAAE,MAAM;gBAAQ;gBAEpB,4BAA4B;gBAC5B,kBAAkB,aAAa,SAAS,KAAK,CAAC,QAAQ,KAAK;YAC7D;YACA,cAAc,CAAC;gBACb,MAAM,WAAW;gBACjB,MAAM,UAAU;oBACd,GAAG,MAAM,IAAI;oBACb,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI;gBACtB;gBAEA,IAAI;oBAAE,MAAM;gBAAQ;gBAEpB,4BAA4B;gBAC5B,kBAAkB,aAAa,SAAS,KAAK,CAAC,QAAQ,KAAK;YAC7D;YACA,UAAU;gBACR,MAAM,WAAW;gBACjB,IAAI;oBAAE,MAAM;gBAAS;gBAErB,4BAA4B;gBAC5B,kBAAkB,aAAa,UAAU,KAAK,CAAC,QAAQ,KAAK;YAC9D;YAEA,aAAa;gBACX,IAAI,CAAC,aAAa;gBAClB,IAAI,MAAM,WAAW,EAAE;gBAEvB,IAAI;oBACF,MAAM,WAAW,MAAM,MAAM,aAAa;wBACxC,aAAa;oBACf;oBACA,IAAI,SAAS,EAAE,EAAE;wBACf,MAAM,OAAO,MAAM,SAAS,IAAI;wBAChC,MAAM,OAAO,KAAK,IAAI,IAAI;wBAC1B,IAAI,QAAQ,OAAO,IAAI,CAAC,MAAM,MAAM,GAAG,GAAG;4BACxC,IAAI;gCACF,MAAM;oCAAE,GAAG,iBAAiB;oCAAE,GAAG,IAAI;gCAAC;gCACtC,aAAa;4BACf;wBACF,OAAO;4BACL,IAAI;gCAAE,aAAa;4BAAK;wBAC1B;oBACF;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,CAAC,8CAA8C,EAAE,YAAY,CAAC,CAAC,EAAE;gBACjF;YACF;QACF,CAAC;AAEP"}},
    {"offset": {"line": 8086, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-tab-action-registry.ts"],"sourcesContent":["import * as React from 'react';\r\n\r\nexport type RegisterTabActions = (actions?: React.ReactNode[]) => void;\r\n\r\nexport type TabActionRegistry = {\r\n  headerActions: React.ReactNode[];\r\n  registerActions: (tabValue: string) => RegisterTabActions;\r\n  setHeaderActions: React.Dispatch<React.SetStateAction<React.ReactNode[]>>;\r\n};\r\n\r\nexport function useTabActionRegistry(activeTab: string): TabActionRegistry {\r\n  const [headerActions, setHeaderActions] = React.useState<React.ReactNode[]>([]);\r\n\r\n  const registerActions = React.useCallback(\r\n    (tabValue: string) => (actions?: React.ReactNode[]) => {\r\n      if (tabValue === activeTab) {\r\n        setHeaderActions(actions ?? []);\r\n      }\r\n    },\r\n    [activeTab],\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setHeaderActions([]);\r\n  }, [activeTab]);\r\n\r\n  return {\r\n    headerActions,\r\n    registerActions,\r\n    setHeaderActions,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAUO,SAAS,qBAAqB,SAAiB;;IACpD,MAAM,CAAC,eAAe,iBAAiB,GAAG,yKAAc,CAAoB,EAAE;IAE9E,MAAM,kBAAkB,4KAAiB;6DACvC,CAAC;qEAAqB,CAAC;oBACrB,IAAI,aAAa,WAAW;wBAC1B,iBAAiB,WAAW,EAAE;oBAChC;gBACF;;4DACA;QAAC;KAAU;IAGb,0KAAe;0CAAC;YACd,iBAAiB,EAAE;QACrB;yCAAG;QAAC;KAAU;IAEd,OAAO;QACL;QACA;QACA;IACF;AACF;GArBgB"}},
    {"offset": {"line": 8128, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/complaints/complaints-settings-page.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../../../components/ui/card';\r\nimport { TabsContent } from '../../../components/ui/tabs';\r\nimport { Label } from '../../../components/ui/label';\r\nimport { Input } from '../../../components/ui/input';\r\nimport { SettingsFormGrid } from '../../../components/settings/forms/SettingsFormGrid';\r\nimport { SettingsFormSection } from '../../../components/settings/forms/SettingsFormSection';\r\nimport { Button } from '../../../components/ui/button';\r\nimport { Switch } from '../../../components/ui/switch';\r\nimport { Textarea } from '../../../components/ui/textarea';\r\nimport { TailwindColorPicker } from '../../../components/ui/tailwind-color-picker';\r\nimport { cn } from '../../../lib/utils';\r\nimport { SettingsActionButton } from '../../../components/settings/SettingsActionButton';\r\nimport { SettingsVerticalTabs } from '../../../components/settings/SettingsVerticalTabs';\r\nimport { \r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '../../../components/ui/select';\r\nimport { \r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '../../../components/ui/table';\r\nimport { \r\n  AlertCircle,\r\n  Bell,\r\n  Clock,\r\n  MoreHorizontal,\r\n  Plus,\r\n  Save,\r\n} from 'lucide-react';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '../../../components/ui/dialog';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '../../../components/ui/dropdown-menu';\r\nimport { ConfirmDialog } from '../../../components/ui/confirm-dialog';\r\nimport { toast } from 'sonner';\r\nimport { useSettingsPageHeader } from '../use-settings-page-header';\r\nimport { createSettingsConfigStore } from '../settings-config-store';\r\nimport { useTabActionRegistry } from '../use-tab-action-registry';\r\n\r\n// ============================================\r\n// INTERFACES\r\n// ============================================\r\n\r\nexport interface CardColorSettings {\r\n  // Màu theo trạng thái\r\n  statusColors: {\r\n    pending: string;\r\n    investigating: string;\r\n    resolved: string;\r\n    rejected: string;\r\n  };\r\n  // Màu theo độ ưu tiên (override statusColors nếu có)\r\n  priorityColors: {\r\n    low: string;\r\n    medium: string;\r\n    high: string;\r\n    urgent: string;\r\n  };\r\n  // Màu quá hạn (override tất cả)\r\n  overdueColor: string;\r\n  // Enable/disable coloring\r\n  enableStatusColors: boolean;\r\n  enablePriorityColors: boolean;\r\n  enableOverdueColor: boolean;\r\n}\r\n\r\ninterface SLASettings {\r\n  low: { responseTime: number; resolveTime: number };\r\n  medium: { responseTime: number; resolveTime: number };\r\n  high: { responseTime: number; resolveTime: number };\r\n  urgent: { responseTime: number; resolveTime: number };\r\n}\r\n\r\ninterface ResponseTemplate {\r\n  id: string;\r\n  name: string;\r\n  content: string;\r\n  category: 'general' | 'product-defect' | 'shipping-delay' | 'wrong-item' | 'customer-service';\r\n  order: number;\r\n}\r\n\r\ninterface NotificationSettings {\r\n  emailOnCreate: boolean;\r\n  emailOnAssign: boolean;\r\n  emailOnVerified: boolean;\r\n  emailOnResolved: boolean;\r\n  emailOnOverdue: boolean;\r\n  smsOnOverdue: boolean;\r\n  inAppNotifications: boolean;\r\n}\r\n\r\ninterface PublicTrackingSettings {\r\n  enabled: boolean;\r\n  allowCustomerComments: boolean;\r\n  showEmployeeName: boolean;\r\n  showTimeline: boolean;\r\n}\r\n\r\ninterface ReminderSettings {\r\n  enabled: boolean;\r\n  firstReminderHours: number;\r\n  secondReminderHours: number;\r\n  escalationHours: number;\r\n}\r\n\r\ninterface ComplaintType {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  order: number;\r\n  isActive: boolean;\r\n}\r\n\r\n// ============================================\r\n// DEFAULT VALUES\r\n// ============================================\r\n\r\nconst defaultSLA: SLASettings = {\r\n  low: { responseTime: 240, resolveTime: 48 }, // 4h response, 48h resolve\r\n  medium: { responseTime: 120, resolveTime: 24 }, // 2h response, 24h resolve\r\n  high: { responseTime: 60, resolveTime: 12 }, // 1h response, 12h resolve\r\n  urgent: { responseTime: 30, resolveTime: 4 }, // 30m response, 4h resolve\r\n};\r\n\r\nconst defaultReminders: ReminderSettings = {\r\n  enabled: true,\r\n  firstReminderHours: 4,\r\n  secondReminderHours: 8,\r\n  escalationHours: 24,\r\n};\r\n\r\nconst defaultNotifications: NotificationSettings = {\r\n  emailOnCreate: true,\r\n  emailOnAssign: true,\r\n  emailOnVerified: false,\r\n  emailOnResolved: true,\r\n  emailOnOverdue: true,\r\n  smsOnOverdue: false,\r\n  inAppNotifications: true,\r\n};\r\n\r\nconst defaultPublicTracking: PublicTrackingSettings = {\r\n  enabled: false,\r\n  allowCustomerComments: false,\r\n  showEmployeeName: true,\r\n  showTimeline: true,\r\n};\r\n\r\nconst defaultCardColors: CardColorSettings = {\r\n  statusColors: {\r\n    pending: 'bg-yellow-50 border-yellow-200',\r\n    investigating: 'bg-blue-50 border-blue-200',\r\n    resolved: 'bg-green-50 border-green-200',\r\n    rejected: 'bg-gray-50 border-gray-200',\r\n  },\r\n  priorityColors: {\r\n    low: 'bg-slate-50 border-slate-200',\r\n    medium: 'bg-amber-50 border-amber-200',\r\n    high: 'bg-orange-50 border-orange-300',\r\n    urgent: 'bg-red-100 border-red-300',\r\n  },\r\n  overdueColor: 'bg-red-50 border-red-400',\r\n  enableStatusColors: false,\r\n  enablePriorityColors: true,\r\n  enableOverdueColor: true,\r\n};\r\n\r\nconst defaultComplaintTypes: ComplaintType[] = [\r\n  { id: '1', name: 'Sản phẩm lỗi', description: 'Sản phẩm có lỗi kỹ thuật hoặc hỏng hóc', order: 1, isActive: true },\r\n  { id: '2', name: 'Giao hàng chậm', description: 'Đơn hàng giao chậm so với thời gian cam kết', order: 2, isActive: true },\r\n  { id: '3', name: 'Sai sản phẩm', description: 'Giao sai sản phẩm so với đơn hàng', order: 3, isActive: true },\r\n  { id: '4', name: 'Dịch vụ chăm sóc', description: 'Khiếu nại về thái độ hoặc dịch vụ nhân viên', order: 4, isActive: true },\r\n  { id: '5', name: 'Khác', description: 'Các loại khiếu nại khác', order: 5, isActive: true },\r\n];\r\n\r\nconst SLA_PRIORITY_CONFIGS: Array<{\r\n  key: keyof SLASettings;\r\n  label: string;\r\n  description: string;\r\n  indicatorClass: string;\r\n}> = [\r\n  {\r\n    key: 'low',\r\n    label: 'Ưu tiên thấp',\r\n    description: 'Ví dụ: các lỗi nhỏ hoặc yêu cầu tham khảo thông tin',\r\n    indicatorClass: 'bg-green-500',\r\n  },\r\n  {\r\n    key: 'medium',\r\n    label: 'Ưu tiên trung bình',\r\n    description: 'Ảnh hưởng vừa phải tới khách hàng, cần theo dõi trong ngày',\r\n    indicatorClass: 'bg-yellow-500',\r\n  },\r\n  {\r\n    key: 'high',\r\n    label: 'Ưu tiên cao',\r\n    description: 'Các vấn đề ảnh hưởng trực tiếp đến trải nghiệm khách hàng',\r\n    indicatorClass: 'bg-orange-500',\r\n  },\r\n  {\r\n    key: 'urgent',\r\n    label: 'Ưu tiên khẩn cấp',\r\n    description: 'Khiếu nại nghiêm trọng cần phản hồi ngay (ví dụ sự cố truyền thông)',\r\n    indicatorClass: 'bg-red-500',\r\n  },\r\n];\r\n\r\n\r\nconst defaultTemplates: ResponseTemplate[] = [\r\n  {\r\n    id: '1',\r\n    name: 'Xin lỗi - Lỗi sản phẩm',\r\n    content: 'Kính chào Anh/Chị,\\n\\nChúng tôi xin chân thành xin lỗi về sản phẩm bị lỗi mà Anh/Chị đã nhận được. Đây là sự cố đáng tiếc và chúng tôi hiểu sự bất tiện mà điều này gây ra.\\n\\nChúng tôi đang xử lý khiếu nại của Anh/Chị và sẽ sớm có phương án giải quyết hợp lý nhất.\\n\\nTrân trọng,',\r\n    category: 'product-defect',\r\n    order: 1,\r\n  },\r\n  {\r\n    id: '2',\r\n    name: 'Xin lỗi - Giao hàng chậm',\r\n    content: 'Kính chào Anh/Chị,\\n\\nChúng tôi xin lỗi vì đơn hàng của Anh/Chị đã bị giao chậm hơn so với dự kiến. Chúng tôi đã liên hệ với đơn vị vận chuyển để làm rõ nguyên nhân.\\n\\nChúng tôi sẽ có phương án bù trừ hợp lý cho sự chậm trễ này.\\n\\nTrân trọng,',\r\n    category: 'shipping-delay',\r\n    order: 2,\r\n  },\r\n  {\r\n    id: '3',\r\n    name: 'Xác nhận đang xử lý',\r\n    content: 'Kính chào Anh/Chị,\\n\\nChúng tôi đã nhận được khiếu nại của Anh/Chị và đang tiến hành xác minh thông tin.\\n\\nChúng tôi sẽ phản hồi lại trong thời gian sớm nhất. Xin Anh/Chị vui lòng theo dõi.\\n\\nTrân trọng,',\r\n    category: 'general',\r\n    order: 3,\r\n  },\r\n];\r\n\r\n// ============================================\r\n// SETTINGS STORE\r\n// ============================================\r\n\r\ntype ComplaintsSettingsState = {\r\n  sla: SLASettings;\r\n  templates: ResponseTemplate[];\r\n  notifications: NotificationSettings;\r\n  publicTracking: PublicTrackingSettings;\r\n  reminders: ReminderSettings;\r\n  cardColors: CardColorSettings;\r\n  complaintTypes: ComplaintType[];\r\n};\r\n\r\nconst clone = <T,>(value: T): T => {\r\n  if (typeof structuredClone === 'function') {\r\n    return structuredClone(value);\r\n  }\r\n  return JSON.parse(JSON.stringify(value));\r\n};\r\n\r\nconst createDefaultComplaintsSettings = (): ComplaintsSettingsState => ({\r\n  sla: clone(defaultSLA),\r\n  templates: clone(defaultTemplates),\r\n  notifications: clone(defaultNotifications),\r\n  publicTracking: clone(defaultPublicTracking),\r\n  reminders: clone(defaultReminders),\r\n  cardColors: clone(defaultCardColors),\r\n  complaintTypes: clone(defaultComplaintTypes),\r\n});\r\n\r\nconst useComplaintsSettingsStore = createSettingsConfigStore<ComplaintsSettingsState>({\r\n  storageKey: 'settings-complaints',\r\n  getDefaultState: createDefaultComplaintsSettings,\r\n});\r\n\r\n// Validation helper for Tailwind classes\r\nfunction validateTailwindClasses(value: string): boolean {\r\n  if (!value || !value.trim()) return false;\r\n  \r\n  // Pattern: bg-color-shade or border-color-shade, can have multiple classes\r\n  const tailwindPattern = /^(bg|border|text|shadow|ring)-[\\w-]+(\\/\\d+)?(\\s+(bg|border|text|shadow|ring)-[\\w-]+(\\/\\d+)?)*$/;\r\n  return tailwindPattern.test(value.trim());\r\n}\r\n\r\n// Export function to load card colors from other components\r\nexport function loadCardColorSettings(): CardColorSettings {\r\n  return clone(useComplaintsSettingsStore.getState().data.cardColors);\r\n}\r\n\r\n// Export function to load complaint types from other components\r\nexport function loadComplaintTypes(): ComplaintType[] {\r\n  return clone(useComplaintsSettingsStore.getState().data.complaintTypes);\r\n}\r\n\r\n// Export the ComplaintType interface for use in other components\r\nexport type { ComplaintType };\r\n\r\n// ============================================\r\n// MAIN COMPONENT\r\n// ============================================\r\n\r\nexport function ComplaintsSettingsPage() {\r\n  const [activeTab, setActiveTab] = React.useState('sla');\r\n  const { headerActions, registerActions } = useTabActionRegistry(activeTab);\r\n  const registerSlaActions = React.useMemo(() => registerActions('sla'), [registerActions]);\r\n  const registerComplaintTypeActions = React.useMemo(() => registerActions('complaint-types'), [registerActions]);\r\n  const registerCardColorActions = React.useMemo(() => registerActions('card-colors'), [registerActions]);\r\n  const registerTemplateActions = React.useMemo(() => registerActions('templates'), [registerActions]);\r\n  const registerNotificationActions = React.useMemo(() => registerActions('notifications'), [registerActions]);\r\n  const registerPublicTrackingActions = React.useMemo(() => registerActions('public-tracking'), [registerActions]);\r\n\r\n  const storedSla = useComplaintsSettingsStore((state) => state.data.sla);\r\n  const storedTemplates = useComplaintsSettingsStore((state) => state.data.templates);\r\n  const storedNotifications = useComplaintsSettingsStore((state) => state.data.notifications);\r\n  const storedPublicTracking = useComplaintsSettingsStore((state) => state.data.publicTracking);\r\n  const storedReminders = useComplaintsSettingsStore((state) => state.data.reminders);\r\n  const storedCardColors = useComplaintsSettingsStore((state) => state.data.cardColors);\r\n  const storedComplaintTypes = useComplaintsSettingsStore((state) => state.data.complaintTypes);\r\n  const setStoreSection = useComplaintsSettingsStore((state) => state.setSection);\r\n\r\n  // SLA State\r\n  const [sla, setSLA] = React.useState<SLASettings>(storedSla);\r\n\r\n  // Templates State\r\n  const [templates, setTemplates] = React.useState<ResponseTemplate[]>(storedTemplates);\r\n  const [editingTemplate, setEditingTemplate] = React.useState<ResponseTemplate | null>(null);\r\n  const [isAddingTemplate, setIsAddingTemplate] = React.useState(false);\r\n\r\n  // Notifications State\r\n  const [notifications, setNotifications] = React.useState<NotificationSettings>(storedNotifications);\r\n\r\n  // Public Tracking State\r\n  const [publicTracking, setPublicTracking] = React.useState<PublicTrackingSettings>(storedPublicTracking);\r\n\r\n  // Reminders State\r\n  const [reminders, setReminders] = React.useState<ReminderSettings>(storedReminders);\r\n\r\n  // Card Colors State\r\n  const [cardColors, setCardColors] = React.useState<CardColorSettings>(storedCardColors);\r\n\r\n  // Complaint Types State\r\n  const [complaintTypes, setComplaintTypes] = React.useState<ComplaintType[]>(storedComplaintTypes);\r\n  const [editingType, setEditingType] = React.useState<ComplaintType | null>(null);\r\n  const [isAddingType, setIsAddingType] = React.useState(false);\r\n  const [typeDialogOpen, setTypeDialogOpen] = React.useState(false);\r\n  const [deleteTypeId, setDeleteTypeId] = React.useState<string | null>(null);\r\n\r\n  // Template Dialog State\r\n  const [templateDialogOpen, setTemplateDialogOpen] = React.useState(false);\r\n  const [deleteTemplateId, setDeleteTemplateId] = React.useState<string | null>(null);\r\n\r\n  React.useEffect(() => {\r\n    setSLA(storedSla);\r\n  }, [storedSla]);\r\n\r\n  React.useEffect(() => {\r\n    setTemplates(storedTemplates);\r\n  }, [storedTemplates]);\r\n\r\n  React.useEffect(() => {\r\n    setNotifications(storedNotifications);\r\n  }, [storedNotifications]);\r\n\r\n  React.useEffect(() => {\r\n    setPublicTracking(storedPublicTracking);\r\n  }, [storedPublicTracking]);\r\n\r\n  React.useEffect(() => {\r\n    setReminders(storedReminders);\r\n  }, [storedReminders]);\r\n\r\n  React.useEffect(() => {\r\n    setCardColors(storedCardColors);\r\n  }, [storedCardColors]);\r\n\r\n  React.useEffect(() => {\r\n    setComplaintTypes(storedComplaintTypes);\r\n  }, [storedComplaintTypes]);\r\n\r\n  useSettingsPageHeader({\r\n    title: 'Cài đặt khiếu nại',\r\n    subtitle: 'Thiết lập SLA, tự động hóa và template phản hồi khiếu nại',\r\n    actions: headerActions,\r\n  });\r\n\r\n  // ============================================\r\n  // SLA HANDLERS\r\n  // ============================================\r\n\r\n  const handleSLAChange = (priority: keyof SLASettings, field: 'responseTime' | 'resolveTime', value: string) => {\r\n    const numValue = parseInt(value) || 0;\r\n    setSLA(prev => ({\r\n      ...prev,\r\n      [priority]: {\r\n        ...prev[priority],\r\n        [field]: numValue,\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleSaveSLA = () => {\r\n    // Validation for each priority level\r\n    const priorities = ['low', 'medium', 'high', 'urgent'] as const;\r\n    const errors: string[] = [];\r\n\r\n    priorities.forEach(priority => {\r\n      const settings = sla[priority];\r\n      const priorityLabel = {\r\n        low: 'Thấp',\r\n        medium: 'Trung bình',\r\n        high: 'Cao',\r\n        urgent: 'Khẩn cấp'\r\n      }[priority];\r\n\r\n      if (settings.responseTime <= 0) {\r\n        errors.push(`Thời gian phản hồi của mức độ ${priorityLabel} phải lớn hơn 0`);\r\n      }\r\n      \r\n      if (settings.resolveTime <= 0) {\r\n        errors.push(`Thời gian giải quyết của mức độ ${priorityLabel} phải lớn hơn 0`);\r\n      }\r\n\r\n      // Convert response time from minutes to hours for comparison\r\n      const responseHours = settings.responseTime / 60;\r\n      if (settings.resolveTime <= responseHours) {\r\n        errors.push(`Thời gian giải quyết của mức độ ${priorityLabel} phải lớn hơn thời gian phản hồi`);\r\n      }\r\n    });\r\n\r\n    if (errors.length > 0) {\r\n      toast.error('Lỗi xác thực', {\r\n        description: errors.join('\\n'),\r\n      });\r\n      return;\r\n    }\r\n\r\n    setStoreSection('sla', sla);\r\n    toast.success('Đã lưu cài đặt SLA', {\r\n      description: 'Thời gian phản hồi và giải quyết đã được cập nhật thành công.',\r\n    });\r\n  };\r\n\r\n  const handleResetSLA = () => {\r\n    const nextDefaults = clone(defaultSLA);\r\n    setSLA(nextDefaults);\r\n    setStoreSection('sla', nextDefaults);\r\n    toast.info('Đã khôi phục cài đặt mặc định', {\r\n      description: 'Cài đặt SLA đã được reset về giá trị mặc định của hệ thống.',\r\n    });\r\n  };\r\n\r\n  // ============================================\r\n  // TEMPLATE HANDLERS\r\n  // ============================================\r\n\r\n  const handleAddTemplate = () => {\r\n    setEditingTemplate({\r\n      id: Date.now().toString(),\r\n      name: '',\r\n      content: '',\r\n      category: 'general',\r\n      order: templates.length + 1,\r\n    });\r\n    setIsAddingTemplate(true);\r\n    setTemplateDialogOpen(true);\r\n  };\r\n\r\n  const handleEditTemplate = (template: ResponseTemplate) => {\r\n    setEditingTemplate({ ...template });\r\n    setIsAddingTemplate(false);\r\n    setTemplateDialogOpen(true);\r\n  };\r\n\r\n  const handleSaveTemplate = () => {\r\n    if (!editingTemplate) return;\r\n\r\n    if (!editingTemplate.name.trim() || !editingTemplate.content.trim()) {\r\n      toast.error('Lỗi xác thực', {\r\n        description: 'Vui lòng điền đầy đủ tên và nội dung mẫu.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    let updatedTemplates: ResponseTemplate[];\r\n    \r\n    if (isAddingTemplate) {\r\n      updatedTemplates = [...templates, editingTemplate];\r\n    } else {\r\n      updatedTemplates = templates.map(t => \r\n        t.id === editingTemplate.id ? editingTemplate : t\r\n      );\r\n    }\r\n\r\n    setTemplates(updatedTemplates);\r\n    setStoreSection('templates', updatedTemplates);\r\n    \r\n    toast.success(isAddingTemplate ? 'Đã thêm mẫu' : 'Đã cập nhật mẫu', {\r\n      description: `Mẫu \"${editingTemplate.name}\" đã được lưu thành công.`,\r\n    });\r\n\r\n    setEditingTemplate(null);\r\n    setIsAddingTemplate(false);\r\n    setTemplateDialogOpen(false);\r\n  };\r\n\r\n  const handleConfirmDeleteTemplate = () => {\r\n    if (!deleteTemplateId) return;\r\n    const updatedTemplates = templates.filter(t => t.id !== deleteTemplateId);\r\n    setTemplates(updatedTemplates);\r\n    setStoreSection('templates', updatedTemplates);\r\n    \r\n    toast.success('Đã xóa mẫu', {\r\n      description: 'Mẫu phản hồi đã được xóa thành công.',\r\n    });\r\n    setDeleteTemplateId(null);\r\n  };\r\n\r\n  const handleResetTemplates = () => {\r\n    const defaults = clone(defaultTemplates);\r\n    setTemplates(defaults);\r\n    setStoreSection('templates', defaults);\r\n    toast.info('Đã khôi phục mẫu mặc định', {\r\n      description: 'Tất cả mẫu phản hồi đã được reset về giá trị mặc định của hệ thống.',\r\n    });\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingTemplate(null);\r\n    setIsAddingTemplate(false);\r\n    setTemplateDialogOpen(false);\r\n  };\r\n\r\n  // ============================================\r\n  // NOTIFICATION HANDLERS\r\n  // ============================================\r\n\r\n  const handleNotificationChange = (key: keyof NotificationSettings) => {\r\n    setNotifications(prev => ({\r\n      ...prev,\r\n      [key]: !prev[key],\r\n    }));\r\n  };\r\n\r\n  const handleSaveNotifications = () => {\r\n    setStoreSection('notifications', notifications);\r\n    toast.success('Đã lưu cài đặt thông báo', {\r\n      description: 'Các tùy chọn thông báo đã được cập nhật thành công.',\r\n    });\r\n  };\r\n\r\n  const handleResetNotifications = () => {\r\n    const defaults = clone(defaultNotifications);\r\n    setNotifications(defaults);\r\n    setStoreSection('notifications', defaults);\r\n    toast.info('Đã khôi phục cài đặt mặc định', {\r\n      description: 'Cài đặt thông báo đã được reset về giá trị mặc định của hệ thống.',\r\n    });\r\n  };\r\n\r\n  // ============================================\r\n  // PUBLIC TRACKING HANDLERS\r\n  // ============================================\r\n\r\n  const handlePublicTrackingChange = (key: keyof PublicTrackingSettings) => {\r\n    setPublicTracking(prev => ({\r\n      ...prev,\r\n      [key]: !prev[key],\r\n    }));\r\n  };\r\n\r\n  const handleSavePublicTracking = () => {\r\n    setStoreSection('publicTracking', publicTracking);\r\n    toast.success('Đã lưu cài đặt tracking công khai', {\r\n      description: 'Các tùy chọn liên kết công khai đã được cập nhật thành công.',\r\n    });\r\n  };\r\n\r\n  const handleResetPublicTracking = () => {\r\n    const defaults = clone(defaultPublicTracking);\r\n    setPublicTracking(defaults);\r\n    setStoreSection('publicTracking', defaults);\r\n    toast.info('Đã khôi phục cài đặt mặc định', {\r\n      description: 'Cài đặt tracking công khai đã được reset về giá trị mặc định của hệ thống.',\r\n    });\r\n  };\r\n\r\n  // ============================================\r\n  // REMINDERS HANDLERS\r\n  // ============================================\r\n\r\n  const handleReminderChange = (field: keyof ReminderSettings, value: boolean | number) => {\r\n    setReminders(prev => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSaveReminders = () => {\r\n    setStoreSection('reminders', reminders);\r\n    toast.success('Đã lưu cài đặt nhắc nhở', {\r\n      description: 'Các tùy chọn nhắc nhở khiếu nại đã được cập nhật thành công.',\r\n    });\r\n  };\r\n\r\n  const handleResetReminders = () => {\r\n    const defaults = clone(defaultReminders);\r\n    setReminders(defaults);\r\n    setStoreSection('reminders', defaults);\r\n    toast.info('Đã khôi phục cài đặt mặc định', {\r\n      description: 'Cài đặt nhắc nhở đã được reset về giá trị mặc định của hệ thống.',\r\n    });\r\n  };\r\n\r\n  // ============================================\r\n  // CARD COLORS HANDLERS\r\n  // ============================================\r\n\r\n  const handleCardColorToggle = (key: 'enableStatusColors' | 'enablePriorityColors' | 'enableOverdueColor') => {\r\n    setCardColors(prev => ({\r\n      ...prev,\r\n      [key]: !prev[key],\r\n    }));\r\n  };\r\n\r\n  const handleStatusColorChange = (status: keyof CardColorSettings['statusColors'], value: string) => {\r\n    setCardColors(prev => ({\r\n      ...prev,\r\n      statusColors: {\r\n        ...prev.statusColors,\r\n        [status]: value,\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handlePriorityColorChange = (priority: keyof CardColorSettings['priorityColors'], value: string) => {\r\n    setCardColors(prev => ({\r\n      ...prev,\r\n      priorityColors: {\r\n        ...prev.priorityColors,\r\n        [priority]: value,\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleOverdueColorChange = (value: string) => {\r\n    setCardColors(prev => ({\r\n      ...prev,\r\n      overdueColor: value,\r\n    }));\r\n  };\r\n\r\n  const handleSaveCardColors = () => {\r\n    // Validate all enabled color settings\r\n    const errors: string[] = [];\r\n\r\n    if (cardColors.enableOverdueColor) {\r\n      if (!cardColors.overdueColor.trim()) {\r\n        errors.push('Màu quá hạn không được để trống');\r\n      } else if (!validateTailwindClasses(cardColors.overdueColor)) {\r\n        errors.push('Màu quá hạn không đúng định dạng Tailwind (ví dụ: bg-red-50 border-red-400)');\r\n      }\r\n    }\r\n\r\n    if (cardColors.enablePriorityColors) {\r\n      const priorities = [\r\n        { key: 'low', label: 'Thấp' },\r\n        { key: 'medium', label: 'Trung bình' },\r\n        { key: 'high', label: 'Cao' },\r\n        { key: 'urgent', label: 'Khẩn cấp' },\r\n      ];\r\n      \r\n      priorities.forEach(({ key, label }) => {\r\n        const value = cardColors.priorityColors[key as keyof typeof cardColors.priorityColors];\r\n        if (!value.trim()) {\r\n          errors.push(`Màu mức độ ${label} không được để trống`);\r\n        } else if (!validateTailwindClasses(value)) {\r\n          errors.push(`Màu mức độ ${label} không đúng định dạng Tailwind`);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (cardColors.enableStatusColors) {\r\n      const statuses = [\r\n        { key: 'pending', label: 'Chờ xử lý' },\r\n        { key: 'investigating', label: 'Đang xử lý' },\r\n        { key: 'resolved', label: 'Đã giải quyết' },\r\n        { key: 'rejected', label: 'Từ chối' },\r\n      ];\r\n      \r\n      statuses.forEach(({ key, label }) => {\r\n        const value = cardColors.statusColors[key as keyof typeof cardColors.statusColors];\r\n        if (!value.trim()) {\r\n          errors.push(`Màu trạng thái ${label} không được để trống`);\r\n        } else if (!validateTailwindClasses(value)) {\r\n          errors.push(`Màu trạng thái ${label} không đúng định dạng Tailwind`);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (errors.length > 0) {\r\n      toast.error('Lỗi xác thực', {\r\n        description: errors.join('\\n'),\r\n      });\r\n      return;\r\n    }\r\n\r\n    setStoreSection('cardColors', cardColors);\r\n    toast.success('Đã lưu cài đặt màu card', {\r\n      description: 'Màu sắc hiển thị card đã được cập nhật thành công.',\r\n    });\r\n  };\r\n\r\n  const handleResetCardColors = () => {\r\n    const defaults = clone(defaultCardColors);\r\n    setCardColors(defaults);\r\n    setStoreSection('cardColors', defaults);\r\n    toast.info('Đã khôi phục cài đặt mặc định', {\r\n      description: 'Màu card đã được reset về giá trị mặc định của hệ thống.',\r\n    });\r\n  };\r\n\r\n  // ============================================\r\n  // COMPLAINT TYPES HANDLERS\r\n  // ============================================\r\n\r\n  const handleAddType = () => {\r\n    const newType: ComplaintType = {\r\n      id: Date.now().toString(),\r\n      name: '',\r\n      description: '',\r\n      order: complaintTypes.length + 1,\r\n      isActive: true,\r\n    };\r\n    setEditingType(newType);\r\n    setIsAddingType(true);\r\n    setTypeDialogOpen(true);\r\n  };\r\n\r\n  const handleEditType = (type: ComplaintType) => {\r\n    setEditingType({ ...type });\r\n    setIsAddingType(false);\r\n    setTypeDialogOpen(true);\r\n  };\r\n\r\n  const handleSaveType = () => {\r\n    if (!editingType) return;\r\n\r\n    if (!editingType.name.trim()) {\r\n      toast.error('Tên loại khiếu nại không được để trống');\r\n      return;\r\n    }\r\n\r\n    const nextTypes = isAddingType\r\n      ? [...complaintTypes, editingType]\r\n      : complaintTypes.map(t => (t.id === editingType.id ? editingType : t));\r\n\r\n    setComplaintTypes(nextTypes);\r\n    setStoreSection('complaintTypes', nextTypes);\r\n    toast.success(isAddingType ? 'Đã thêm loại khiếu nại mới' : 'Đã cập nhật loại khiếu nại');\r\n\r\n    setEditingType(null);\r\n    setIsAddingType(false);\r\n    setTypeDialogOpen(false);\r\n  };\r\n\r\n  const handleConfirmDeleteType = () => {\r\n    if (!deleteTypeId) return;\r\n    const updated = complaintTypes.filter(t => t.id !== deleteTypeId);\r\n    setComplaintTypes(updated);\r\n    setStoreSection('complaintTypes', updated);\r\n    toast.success('Đã xóa loại khiếu nại');\r\n    setDeleteTypeId(null);\r\n  };\r\n\r\n  const handleToggleTypeActive = (id: string) => {\r\n    const updated = complaintTypes.map(t =>\r\n      t.id === id ? { ...t, isActive: !t.isActive } : t\r\n    );\r\n    setComplaintTypes(updated);\r\n    setStoreSection('complaintTypes', updated);\r\n    toast.success('Đã cập nhật trạng thái');\r\n  };\r\n\r\n  const handleResetTypes = () => {\r\n    const defaults = clone(defaultComplaintTypes);\r\n    setComplaintTypes(defaults);\r\n    setStoreSection('complaintTypes', defaults);\r\n    toast.info('Đã khôi phục cài đặt mặc định');\r\n  };\r\n\r\n  // ============================================\r\n  // RENDER\r\n  // ============================================\r\n\r\n    React.useEffect(() => {\r\n      if (activeTab !== 'sla') {\r\n        return;\r\n      }\r\n\r\n      registerSlaActions([\r\n        <SettingsActionButton key=\"save\" onClick={handleSaveSLA}>\r\n          <Save className=\"h-4 w-4\" /> Lưu cài đặt\r\n        </SettingsActionButton>,\r\n      ]);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [activeTab, registerSlaActions]);\r\n\r\n    React.useEffect(() => {\r\n      if (activeTab !== 'complaint-types') {\r\n        return;\r\n      }\r\n\r\n      registerComplaintTypeActions([\r\n        <SettingsActionButton key=\"add\" onClick={handleAddType}>\r\n          <Plus className=\"h-4 w-4\" /> Thêm loại mới\r\n        </SettingsActionButton>,\r\n      ]);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [activeTab, registerComplaintTypeActions]);\r\n\r\n    React.useEffect(() => {\r\n      if (activeTab !== 'card-colors') {\r\n        return;\r\n      }\r\n\r\n      registerCardColorActions([\r\n        <SettingsActionButton key=\"save\" onClick={handleSaveCardColors}>\r\n          <Save className=\"h-4 w-4\" /> Lưu cài đặt\r\n        </SettingsActionButton>,\r\n      ]);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [activeTab, registerCardColorActions]);\r\n\r\n    React.useEffect(() => {\r\n      if (activeTab !== 'templates') {\r\n        return;\r\n      }\r\n\r\n      registerTemplateActions([\r\n        <SettingsActionButton key=\"add\" onClick={handleAddTemplate}>\r\n          <Plus className=\"h-4 w-4\" /> Thêm mẫu\r\n        </SettingsActionButton>,\r\n      ]);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [activeTab, registerTemplateActions]);\r\n\r\n    React.useEffect(() => {\r\n      if (activeTab !== 'notifications') {\r\n        return;\r\n      }\r\n\r\n      registerNotificationActions([\r\n        <SettingsActionButton key=\"save\" onClick={() => {\r\n          handleSaveNotifications();\r\n          handleSaveReminders();\r\n        }}>\r\n          <Save className=\"h-4 w-4\" /> Lưu cài đặt\r\n        </SettingsActionButton>,\r\n      ]);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [activeTab, registerNotificationActions]);\r\n\r\n    React.useEffect(() => {\r\n      if (activeTab !== 'public-tracking') {\r\n        return;\r\n      }\r\n\r\n      registerPublicTrackingActions([\r\n        <SettingsActionButton key=\"save\" onClick={handleSavePublicTracking}>\r\n          <Save className=\"h-4 w-4\" /> Lưu cài đặt\r\n        </SettingsActionButton>,\r\n      ]);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [activeTab, registerPublicTrackingActions]);\r\n\r\n  const tabs = React.useMemo(\r\n    () => [\r\n      { value: 'sla', label: 'SLA' },\r\n      { value: 'complaint-types', label: 'Loại KN' },\r\n      { value: 'card-colors', label: 'Màu card' },\r\n      { value: 'templates', label: 'Mẫu phản hồi' },\r\n      { value: 'notifications', label: 'Thông báo' },\r\n      { value: 'public-tracking', label: 'Tracking' },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  return (\r\n      <div className=\"space-y-6\">\r\n        <SettingsVerticalTabs value={activeTab} onValueChange={setActiveTab} tabs={tabs}>\r\n\r\n        {/* ============================================ */}\r\n        {/* TAB 1: SLA SETTINGS */}\r\n        {/* ============================================ */}\r\n        <TabsContent value=\"sla\" className=\"mt-0 space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Cài đặt SLA (Service Level Agreement)</CardTitle>\r\n              <CardDescription>\r\n                Thiết lập thời gian phản hồi và giải quyết khiếu nại theo mức độ ưu tiên\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              {SLA_PRIORITY_CONFIGS.map(({ key, label, description, indicatorClass }) => (\r\n                <SettingsFormSection\r\n                  key={key}\r\n                  title={label}\r\n                  description={description}\r\n                  badge={(\r\n                    <span className=\"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-medium\">\r\n                      <span className={cn('h-2 w-2 rounded-full', indicatorClass)} />\r\n                      SLA\r\n                    </span>\r\n                  )}\r\n                >\r\n                  <SettingsFormGrid>\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor={`${key}-response`}>Thời gian phản hồi tối đa (phút)</Label>\r\n                      <Input\r\n                        id={`${key}-response`}\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        value={sla[key].responseTime}\r\n                        onChange={(e) => handleSLAChange(key, 'responseTime', e.target.value)}\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor={`${key}-resolve`}>Thời gian giải quyết tối đa (giờ)</Label>\r\n                      <Input\r\n                        id={`${key}-resolve`}\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        value={sla[key].resolveTime}\r\n                        onChange={(e) => handleSLAChange(key, 'resolveTime', e.target.value)}\r\n                      />\r\n                    </div>\r\n                  </SettingsFormGrid>\r\n                </SettingsFormSection>\r\n              ))}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* ============================================ */}\r\n        {/* TAB 2: COMPLAINT TYPES */}\r\n        {/* ============================================ */}\r\n        <TabsContent value=\"complaint-types\" className=\"mt-0 space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Loại khiếu nại</CardTitle>\r\n              <CardDescription>\r\n                Quản lý các loại khiếu nại có thể sử dụng khi tạo khiếu nại mới\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n\r\n              {/* Types Table */}\r\n              <div className=\"border border-border rounded-lg\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead className=\"w-[50px]\">STT</TableHead>\r\n                      <TableHead>Tên loại</TableHead>\r\n                      <TableHead>Mô tả</TableHead>\r\n                      <TableHead className=\"w-[100px]\">Trạng thái</TableHead>\r\n                      <TableHead className=\"w-[80px] text-right\">Thao tác</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {complaintTypes.length === 0 ? (\r\n                      <TableRow>\r\n                        <TableCell colSpan={5} className=\"text-center text-muted-foreground\">\r\n                          Chưa có loại khiếu nại nào\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ) : (\r\n                      complaintTypes.map((type, index) => (\r\n                        <TableRow key={type.id}>\r\n                          <TableCell>{index + 1}</TableCell>\r\n                          <TableCell className=\"font-medium\">{type.name}</TableCell>\r\n                          <TableCell className=\"text-sm text-muted-foreground\">\r\n                            {type.description}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Switch\r\n                              checked={type.isActive}\r\n                              onCheckedChange={() => handleToggleTypeActive(type.id)}\r\n                            />\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <DropdownMenu>\r\n                              <DropdownMenuTrigger asChild>\r\n                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                                  <MoreHorizontal className=\"h-4 w-4\" />\r\n                                </Button>\r\n                              </DropdownMenuTrigger>\r\n                              <DropdownMenuContent align=\"end\">\r\n                                <DropdownMenuItem onClick={() => handleEditType(type)}>\r\n                                  Sửa\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuSeparator />\r\n                                <DropdownMenuItem \r\n                                  onClick={() => setDeleteTypeId(type.id)}\r\n                                  className=\"text-destructive focus:text-destructive\"\r\n                                >\r\n                                  Xóa\r\n                                </DropdownMenuItem>\r\n                              </DropdownMenuContent>\r\n                            </DropdownMenu>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Edit/Add Type Dialog */}\r\n          <Dialog open={typeDialogOpen} onOpenChange={(open) => {\r\n            setTypeDialogOpen(open);\r\n            if (!open) {\r\n              setEditingType(null);\r\n              setIsAddingType(false);\r\n            }\r\n          }}>\r\n            <DialogContent>\r\n              <DialogHeader>\r\n                <DialogTitle>\r\n                  {isAddingType ? 'Thêm loại khiếu nại mới' : 'Chỉnh sửa loại khiếu nại'}\r\n                </DialogTitle>\r\n                <DialogDescription>\r\n                  {isAddingType \r\n                    ? 'Điền thông tin để tạo loại khiếu nại mới' \r\n                    : 'Cập nhật thông tin loại khiếu nại'}\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n              \r\n              {editingType && (\r\n                <div className=\"space-y-4 py-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"type-name\">Tên loại khiếu nại *</Label>\r\n                    <Input\r\n                      id=\"type-name\"\r\n                      value={editingType.name}\r\n                      onChange={(e) => setEditingType({ ...editingType, name: e.target.value })}\r\n                      placeholder=\"VD: Sản phẩm lỗi\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"type-description\">Mô tả</Label>\r\n                    <Textarea\r\n                      id=\"type-description\"\r\n                      value={editingType.description}\r\n                      onChange={(e) => setEditingType({ ...editingType, description: e.target.value })}\r\n                      placeholder=\"VD: Sản phẩm có lỗi kỹ thuật hoặc hỏng hóc\"\r\n                      rows={3}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Switch\r\n                      id=\"type-active\"\r\n                      checked={editingType.isActive}\r\n                      onCheckedChange={(checked) => setEditingType({ ...editingType, isActive: checked })}\r\n                    />\r\n                    <Label htmlFor=\"type-active\" className=\"cursor-pointer\">\r\n                      Kích hoạt\r\n                    </Label>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <DialogFooter>\r\n                <Button variant=\"outline\" onClick={() => {\r\n                  setTypeDialogOpen(false);\r\n                  setEditingType(null);\r\n                  setIsAddingType(false);\r\n                }}>\r\n                  Hủy\r\n                </Button>\r\n                <Button onClick={handleSaveType}>\r\n                  <Save className=\"h-4 w-4 mr-2\" />\r\n                  {isAddingType ? 'Thêm loại' : 'Lưu thay đổi'}\r\n                </Button>\r\n              </DialogFooter>\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {/* Delete Type Confirm Dialog */}\r\n          <ConfirmDialog\r\n            open={!!deleteTypeId}\r\n            onOpenChange={(open) => !open && setDeleteTypeId(null)}\r\n            title=\"Xóa loại khiếu nại\"\r\n            description=\"Bạn có chắc chắn muốn xóa loại khiếu nại này? Hành động này không thể hoàn tác.\"\r\n            confirmText=\"Xóa\"\r\n            cancelText=\"Hủy\"\r\n            variant=\"destructive\"\r\n            onConfirm={handleConfirmDeleteType}\r\n          />\r\n        </TabsContent>\r\n\r\n        {/* ============================================ */}\r\n        {/* TAB 3: CARD COLORS */}\r\n        {/* ============================================ */}\r\n        <TabsContent value=\"card-colors\" className=\"mt-0 space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Màu sắc card khiếu nại</CardTitle>\r\n              <CardDescription>\r\n                Tùy chỉnh màu hiển thị card theo trạng thái, độ ưu tiên và quá hạn\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <SettingsFormSection\r\n                title=\"Hướng dẫn nhập màu Tailwind\"\r\n                description=\"Áp dụng đồng nhất giữa màu nền (bg-*) và viền (border-*) để card trông hài hòa.\"\r\n                className=\"bg-blue-50/80 border-blue-200\"\r\n                contentClassName=\"space-y-3\"\r\n              >\r\n                <p className=\"text-sm text-blue-900 font-medium\">💡 Gợi ý:</p>\r\n                <ul className=\"list-inside list-disc text-sm text-blue-800 space-y-1\">\r\n                  <li>Sử dụng định dạng <code className=\"bg-blue-100 px-1 rounded\">bg-[màu]-[độ đậm]</code> và <code className=\"bg-blue-100 px-1 rounded\">border-[màu]-[độ đậm]</code>.</li>\r\n                  <li>Ví dụ: <code className=\"bg-blue-100 px-1 rounded\">bg-red-50 border-red-400</code></li>\r\n                  <li>Dãy màu hợp lệ: red, blue, green, yellow, amber, slate, gray,...</li>\r\n                  <li>Độ đậm phổ biến: 50 → 900</li>\r\n                </ul>\r\n              </SettingsFormSection>\r\n\r\n              <SettingsFormSection\r\n                title=\"Bật/Tắt hiển thị màu\"\r\n                description=\"Tùy chọn ưu tiên hiển thị: quá hạn → độ ưu tiên → trạng thái.\"\r\n              >\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                      <Label htmlFor=\"enable-overdue\">Màu quá hạn</Label>\r\n                      <p className=\"text-sm text-muted-foreground\">Nhấn mạnh các khiếu nại vượt SLA.</p>\r\n                    </div>\r\n                    <Switch\r\n                      id=\"enable-overdue\"\r\n                      checked={cardColors.enableOverdueColor}\r\n                      onCheckedChange={() => handleCardColorToggle('enableOverdueColor')}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                      <Label htmlFor=\"enable-priority\">Màu theo độ ưu tiên</Label>\r\n                      <p className=\"text-sm text-muted-foreground\">Thể hiện mức độ ảnh hưởng của khiếu nại.</p>\r\n                    </div>\r\n                    <Switch\r\n                      id=\"enable-priority\"\r\n                      checked={cardColors.enablePriorityColors}\r\n                      onCheckedChange={() => handleCardColorToggle('enablePriorityColors')}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                      <Label htmlFor=\"enable-status\">Màu theo trạng thái</Label>\r\n                      <p className=\"text-sm text-muted-foreground\">Phân loại theo tiến trình xử lý.</p>\r\n                    </div>\r\n                    <Switch\r\n                      id=\"enable-status\"\r\n                      checked={cardColors.enableStatusColors}\r\n                      onCheckedChange={() => handleCardColorToggle('enableStatusColors')}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </SettingsFormSection>\r\n\r\n              {cardColors.enableOverdueColor && (\r\n                <SettingsFormSection\r\n                  title=\"Màu quá hạn SLA\"\r\n                  description=\"Áp dụng cho các khiếu nại vượt SLA, hiển thị trước các màu khác.\"\r\n                  className=\"border border-destructive/30\"\r\n                >\r\n                  <TailwindColorPicker\r\n                    value={cardColors.overdueColor}\r\n                    onChange={handleOverdueColorChange}\r\n                    label=\"Màu nền và viền\"\r\n                    placeholder=\"Ví dụ: bg-red-50 border-red-400\"\r\n                  />\r\n                </SettingsFormSection>\r\n              )}\r\n\r\n              {cardColors.enablePriorityColors && (\r\n                <SettingsFormSection\r\n                  title=\"Màu theo độ ưu tiên\"\r\n                  description=\"Sử dụng dải màu ấm từ thấp → khẩn cấp để dễ phân biệt.\"\r\n                >\r\n                  <div className=\"space-y-4\">\r\n                    <TailwindColorPicker\r\n                      value={cardColors.priorityColors.low}\r\n                      onChange={(value) => handlePriorityColorChange('low', value)}\r\n                      label=\"Ưu tiên thấp\"\r\n                      placeholder=\"Ví dụ: bg-slate-50 border-slate-200\"\r\n                    />\r\n\r\n                    <TailwindColorPicker\r\n                      value={cardColors.priorityColors.medium}\r\n                      onChange={(value) => handlePriorityColorChange('medium', value)}\r\n                      label=\"Ưu tiên trung bình\"\r\n                      placeholder=\"Ví dụ: bg-amber-50 border-amber-200\"\r\n                    />\r\n\r\n                    <TailwindColorPicker\r\n                      value={cardColors.priorityColors.high}\r\n                      onChange={(value) => handlePriorityColorChange('high', value)}\r\n                      label=\"Ưu tiên cao\"\r\n                      placeholder=\"Ví dụ: bg-orange-50 border-orange-300\"\r\n                    />\r\n\r\n                    <TailwindColorPicker\r\n                      value={cardColors.priorityColors.urgent}\r\n                      onChange={(value) => handlePriorityColorChange('urgent', value)}\r\n                      label=\"Khẩn cấp\"\r\n                      placeholder=\"Ví dụ: bg-red-100 border-red-300\"\r\n                    />\r\n                  </div>\r\n                </SettingsFormSection>\r\n              )}\r\n\r\n              {cardColors.enableStatusColors && (\r\n                <SettingsFormSection\r\n                  title=\"Màu theo trạng thái\"\r\n                  description=\"Dùng tông màu lạnh để thể hiện tiến trình xử lý.\"\r\n                >\r\n                  <div className=\"space-y-4\">\r\n                    <TailwindColorPicker\r\n                      value={cardColors.statusColors.pending}\r\n                      onChange={(value) => handleStatusColorChange('pending', value)}\r\n                      label=\"Chờ xử lý\"\r\n                      placeholder=\"Ví dụ: bg-yellow-50 border-yellow-200\"\r\n                    />\r\n\r\n                    <TailwindColorPicker\r\n                      value={cardColors.statusColors.investigating}\r\n                      onChange={(value) => handleStatusColorChange('investigating', value)}\r\n                      label=\"Đang kiểm tra\"\r\n                      placeholder=\"Ví dụ: bg-blue-50 border-blue-200\"\r\n                    />\r\n\r\n                    <TailwindColorPicker\r\n                      value={cardColors.statusColors.resolved}\r\n                      onChange={(value) => handleStatusColorChange('resolved', value)}\r\n                      label=\"Đã giải quyết\"\r\n                      placeholder=\"Ví dụ: bg-green-50 border-green-200\"\r\n                    />\r\n\r\n                    <TailwindColorPicker\r\n                      value={cardColors.statusColors.rejected}\r\n                      onChange={(value) => handleStatusColorChange('rejected', value)}\r\n                      label=\"Từ chối\"\r\n                      placeholder=\"Ví dụ: bg-gray-50 border-gray-200\"\r\n                    />\r\n                  </div>\r\n                </SettingsFormSection>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* ============================================ */}\r\n        {/* TAB 3: RESPONSE TEMPLATES */}\r\n        {/* ============================================ */}\r\n        <TabsContent value=\"templates\" className=\"mt-0 space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Mẫu phản hồi</CardTitle>\r\n              <CardDescription>\r\n                Tạo và quản lý các mẫu phản hồi nhanh cho khiếu nại\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {templates.length === 0 ? (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  Chưa có mẫu phản hồi nào. Nhấn \"Thêm mẫu\" để tạo mẫu mới.\r\n                </div>\r\n              ) : (\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Tên mẫu</TableHead>\r\n                      <TableHead>Danh mục</TableHead>\r\n                      <TableHead className=\"w-[80px] text-right\">Thao tác</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {templates.map(template => (\r\n                      <TableRow key={template.id}>\r\n                        <TableCell className=\"font-medium\">{template.name}</TableCell>\r\n                        <TableCell>\r\n                          <span className=\"text-xs px-2 py-1 rounded-md bg-muted\">\r\n                            {template.category === 'general' && 'Chung'}\r\n                            {template.category === 'product-defect' && 'Lỗi sản phẩm'}\r\n                            {template.category === 'shipping-delay' && 'Giao hàng chậm'}\r\n                            {template.category === 'wrong-item' && 'Sai hàng'}\r\n                            {template.category === 'customer-service' && 'Dịch vụ KH'}\r\n                          </span>\r\n                        </TableCell>\r\n                        <TableCell className=\"text-right\">\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\">\r\n                              <DropdownMenuItem onClick={() => handleEditTemplate(template)}>\r\n                                Sửa\r\n                              </DropdownMenuItem>\r\n                              <DropdownMenuSeparator />\r\n                              <DropdownMenuItem \r\n                                onClick={() => setDeleteTemplateId(template.id)}\r\n                                className=\"text-destructive focus:text-destructive\"\r\n                              >\r\n                                Xóa\r\n                              </DropdownMenuItem>\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Edit/Add Template Dialog */}\r\n          <Dialog open={templateDialogOpen} onOpenChange={(open) => {\r\n            setTemplateDialogOpen(open);\r\n            if (!open) {\r\n              setEditingTemplate(null);\r\n              setIsAddingTemplate(false);\r\n            }\r\n          }}>\r\n            <DialogContent className=\"max-w-lg\">\r\n              <DialogHeader>\r\n                <DialogTitle>\r\n                  {isAddingTemplate ? 'Thêm mẫu phản hồi mới' : 'Chỉnh sửa mẫu phản hồi'}\r\n                </DialogTitle>\r\n                <DialogDescription>\r\n                  {isAddingTemplate \r\n                    ? 'Điền thông tin để tạo mẫu phản hồi mới' \r\n                    : 'Cập nhật thông tin mẫu phản hồi'}\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n              \r\n              {editingTemplate && (\r\n                <div className=\"space-y-4 py-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"template-name\">Tên mẫu *</Label>\r\n                    <Input\r\n                      id=\"template-name\"\r\n                      value={editingTemplate.name}\r\n                      onChange={(e) => setEditingTemplate({ ...editingTemplate, name: e.target.value })}\r\n                      placeholder=\"VD: Xin lỗi - Lỗi sản phẩm\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"template-category\">Danh mục</Label>\r\n                    <Select\r\n                      value={editingTemplate.category}\r\n                      onValueChange={(value) => setEditingTemplate({ \r\n                        ...editingTemplate, \r\n                        category: value as ResponseTemplate['category']\r\n                      })}\r\n                    >\r\n                      <SelectTrigger id=\"template-category\">\r\n                        <SelectValue />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"general\">Chung</SelectItem>\r\n                        <SelectItem value=\"product-defect\">Lỗi sản phẩm</SelectItem>\r\n                        <SelectItem value=\"shipping-delay\">Giao hàng chậm</SelectItem>\r\n                        <SelectItem value=\"wrong-item\">Sai hàng</SelectItem>\r\n                        <SelectItem value=\"customer-service\">Dịch vụ khách hàng</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"template-content\">Nội dung mẫu *</Label>\r\n                    <Textarea\r\n                      id=\"template-content\"\r\n                      value={editingTemplate.content}\r\n                      onChange={(e) => setEditingTemplate({ ...editingTemplate, content: e.target.value })}\r\n                      placeholder=\"Nhập nội dung phản hồi...\"\r\n                      rows={8}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <DialogFooter>\r\n                <Button variant=\"outline\" onClick={handleCancelEdit}>\r\n                  Hủy\r\n                </Button>\r\n                <Button onClick={handleSaveTemplate}>\r\n                  <Save className=\"h-4 w-4 mr-2\" />\r\n                  {isAddingTemplate ? 'Thêm mẫu' : 'Lưu thay đổi'}\r\n                </Button>\r\n              </DialogFooter>\r\n            </DialogContent>\r\n          </Dialog>\r\n\r\n          {/* Delete Template Confirm Dialog */}\r\n          <ConfirmDialog\r\n            open={!!deleteTemplateId}\r\n            onOpenChange={(open) => !open && setDeleteTemplateId(null)}\r\n            title=\"Xóa mẫu phản hồi\"\r\n            description=\"Bạn có chắc chắn muốn xóa mẫu phản hồi này? Hành động này không thể hoàn tác.\"\r\n            confirmText=\"Xóa\"\r\n            cancelText=\"Hủy\"\r\n            variant=\"destructive\"\r\n            onConfirm={handleConfirmDeleteTemplate}\r\n          />\r\n        </TabsContent>\r\n\r\n        {/* ============================================ */}\r\n        {/* TAB 3: NOTIFICATIONS */}\r\n        {/* ============================================ */}\r\n        <TabsContent value=\"notifications\" className=\"mt-0 space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Cài đặt thông báo</CardTitle>\r\n              <CardDescription>\r\n                Quản lý thông báo qua email, SMS và in-app cho các sự kiện khiếu nại\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <SettingsFormSection\r\n                title=\"Thông báo Email\"\r\n                description=\"Gửi mail tới nhân viên phụ trách và người tạo khiếu nại.\"\r\n                badge={<Bell className=\"h-4 w-4 text-muted-foreground\" />}\r\n                contentClassName=\"space-y-3\"\r\n              >\r\n                <div className=\"space-y-3\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"email-create\" className=\"cursor-pointer\">\r\n                      Khi khiếu nại mới được tạo\r\n                    </Label>\r\n                    <Switch\r\n                      id=\"email-create\"\r\n                      checked={notifications.emailOnCreate}\r\n                      onCheckedChange={() => handleNotificationChange('emailOnCreate')}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"email-assign\" className=\"cursor-pointer\">\r\n                      Khi được phân công xử lý\r\n                    </Label>\r\n                    <Switch\r\n                      id=\"email-assign\"\r\n                      checked={notifications.emailOnAssign}\r\n                      onCheckedChange={() => handleNotificationChange('emailOnAssign')}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"email-verified\" className=\"cursor-pointer\">\r\n                      Khi khiếu nại được xác minh\r\n                    </Label>\r\n                    <Switch\r\n                      id=\"email-verified\"\r\n                      checked={notifications.emailOnVerified}\r\n                      onCheckedChange={() => handleNotificationChange('emailOnVerified')}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"email-resolved\" className=\"cursor-pointer\">\r\n                      Khi khiếu nại được giải quyết\r\n                    </Label>\r\n                    <Switch\r\n                      id=\"email-resolved\"\r\n                      checked={notifications.emailOnResolved}\r\n                      onCheckedChange={() => handleNotificationChange('emailOnResolved')}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"email-overdue\" className=\"cursor-pointer\">\r\n                      Khi khiếu nại quá hạn SLA\r\n                    </Label>\r\n                    <Switch\r\n                      id=\"email-overdue\"\r\n                      checked={notifications.emailOnOverdue}\r\n                      onCheckedChange={() => handleNotificationChange('emailOnOverdue')}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </SettingsFormSection>\r\n\r\n              <SettingsFormSection\r\n                title=\"Thông báo SMS\"\r\n                description=\"Dùng cho các cảnh báo quan trọng, tránh gửi quá nhiều.\"\r\n                badge={<AlertCircle className=\"h-4 w-4 text-muted-foreground\" />}\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <Label htmlFor=\"sms-overdue\" className=\"cursor-pointer\">\r\n                    Cảnh báo quá hạn SLA\r\n                  </Label>\r\n                  <Switch\r\n                    id=\"sms-overdue\"\r\n                    checked={notifications.smsOnOverdue}\r\n                    onCheckedChange={() => handleNotificationChange('smsOnOverdue')}\r\n                  />\r\n                </div>\r\n              </SettingsFormSection>\r\n\r\n              <SettingsFormSection\r\n                title=\"Thông báo trong ứng dụng\"\r\n                description=\"Hiển thị tại biểu tượng chuông của HRM giúp đội xử lý không bỏ sót.\"\r\n                badge={<Bell className=\"h-4 w-4 text-muted-foreground\" />}\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <Label htmlFor=\"inapp\" className=\"cursor-pointer\">\r\n                    Bật thông báo in-app (bell icon)\r\n                  </Label>\r\n                  <Switch\r\n                    id=\"inapp\"\r\n                    checked={notifications.inAppNotifications}\r\n                    onCheckedChange={() => handleNotificationChange('inAppNotifications')}\r\n                  />\r\n                </div>\r\n              </SettingsFormSection>\r\n\r\n              <SettingsFormSection\r\n                title=\"Nhắc nhở tự động\"\r\n                description=\"Gửi cảnh báo nếu ticket không được cập nhật trong thời gian quy định.\"\r\n                badge={<Clock className=\"h-4 w-4 text-muted-foreground\" />}\r\n              >\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"reminders-enabled\" className=\"cursor-pointer\">\r\n                        Bật tính năng nhắc nhở tự động\r\n                      </Label>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Tự động gửi thông báo khi khiếu nại bị bỏ quên\r\n                      </p>\r\n                    </div>\r\n                    <Switch\r\n                      id=\"reminders-enabled\"\r\n                      checked={reminders.enabled}\r\n                      onCheckedChange={(checked) => handleReminderChange('enabled', checked)}\r\n                    />\r\n                  </div>\r\n\r\n                  {reminders.enabled && (\r\n                    <div className=\"space-y-4\">\r\n                      <SettingsFormGrid columns={3} className=\"items-start\">\r\n                        <div className=\"space-y-2\">\r\n                          <Label htmlFor=\"first-reminder\">Nhắc nhở lần 1 (giờ)</Label>\r\n                          <Input\r\n                            id=\"first-reminder\"\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            value={reminders.firstReminderHours}\r\n                            onChange={(e) => handleReminderChange('firstReminderHours', parseInt(e.target.value) || 1)}\r\n                          />\r\n                          <p className=\"text-xs text-muted-foreground\">Mặc định: 4 giờ</p>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                          <Label htmlFor=\"second-reminder\">Nhắc nhở lần 2 (giờ)</Label>\r\n                          <Input\r\n                            id=\"second-reminder\"\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            value={reminders.secondReminderHours}\r\n                            onChange={(e) => handleReminderChange('secondReminderHours', parseInt(e.target.value) || 1)}\r\n                          />\r\n                          <p className=\"text-xs text-muted-foreground\">Mặc định: 8 giờ</p>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                          <Label htmlFor=\"escalation\" className=\"flex items-center gap-1\">\r\n                            <AlertCircle className=\"h-3 w-3 text-destructive\" />\r\n                            Báo động leo thang (giờ)\r\n                          </Label>\r\n                          <Input\r\n                            id=\"escalation\"\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            value={reminders.escalationHours}\r\n                            onChange={(e) => handleReminderChange('escalationHours', parseInt(e.target.value) || 1)}\r\n                          />\r\n                          <p className=\"text-xs text-muted-foreground\">Mặc định: 24 giờ</p>\r\n                        </div>\r\n                      </SettingsFormGrid>\r\n\r\n                      <div className=\"text-xs text-muted-foreground space-y-1 bg-muted/50 p-3 rounded\">\r\n                        <p>• Áp dụng cho trạng thái Pending/Investigating.</p>\r\n                        <p>• Thời gian tính từ hành động gần nhất.</p>\r\n                        <p>• Gửi cho người phụ trách và người tạo ticket.</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </SettingsFormSection>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* ============================================ */}\r\n        {/* TAB 4: PUBLIC TRACKING */}\r\n        {/* ============================================ */}\r\n        <TabsContent value=\"public-tracking\" className=\"mt-0 space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Liên kết theo dõi công khai</CardTitle>\r\n              <CardDescription>\r\n                Cho phép khách hàng theo dõi tiến độ xử lý khiếu nại qua link công khai\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <SettingsFormSection\r\n                title=\"Cấu hình truy cập công khai\"\r\n                description=\"Kiểm soát thông tin nào được chia sẻ cho khách hàng qua đường link.\"\r\n              >\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-1\">\r\n                      <Label htmlFor=\"tracking-enabled\" className=\"cursor-pointer\">\r\n                        Bật tính năng tracking công khai\r\n                      </Label>\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Tạo link để khách hàng tự tra cứu tiến độ\r\n                      </p>\r\n                    </div>\r\n                    <Switch\r\n                      id=\"tracking-enabled\"\r\n                      checked={publicTracking.enabled}\r\n                      onCheckedChange={() => handlePublicTrackingChange('enabled')}\r\n                    />\r\n                  </div>\r\n\r\n                  {publicTracking.enabled && (\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"space-y-1\">\r\n                          <Label htmlFor=\"allow-comments\" className=\"cursor-pointer\">\r\n                            Cho phép khách hàng comment\r\n                          </Label>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            Thu thập thêm dữ liệu và bằng chứng trực tiếp từ khách hàng\r\n                          </p>\r\n                        </div>\r\n                        <Switch\r\n                          id=\"allow-comments\"\r\n                          checked={publicTracking.allowCustomerComments}\r\n                          onCheckedChange={() => handlePublicTrackingChange('allowCustomerComments')}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"space-y-1\">\r\n                          <Label htmlFor=\"show-employee\" className=\"cursor-pointer\">\r\n                            Hiển thị tên nhân viên xử lý\r\n                          </Label>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            Tăng tính minh bạch với khách hàng\r\n                          </p>\r\n                        </div>\r\n                        <Switch\r\n                          id=\"show-employee\"\r\n                          checked={publicTracking.showEmployeeName}\r\n                          onCheckedChange={() => handlePublicTrackingChange('showEmployeeName')}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"space-y-1\">\r\n                          <Label htmlFor=\"show-timeline\" className=\"cursor-pointer\">\r\n                            Hiển thị timeline xử lý\r\n                          </Label>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            Cho phép khách hàng xem toàn bộ lịch sử hành động\r\n                          </p>\r\n                        </div>\r\n                        <Switch\r\n                          id=\"show-timeline\"\r\n                          checked={publicTracking.showTimeline}\r\n                          onCheckedChange={() => handlePublicTrackingChange('showTimeline')}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </SettingsFormSection>\r\n\r\n              {/* Example */}\r\n              {publicTracking.enabled && (\r\n                <div className=\"p-4 bg-muted rounded-lg space-y-2\">\r\n                  <p className=\"text-sm font-medium\">Ví dụ link tracking:</p>\r\n                  <code className=\"text-xs bg-background px-2 py-1 rounded block\">\r\n                    https://yoursite.com/complaint-tracking/abc123xyz\r\n                  </code>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Link này sẽ được tạo tự động khi tạo khiếu nại mới\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n        </SettingsVerticalTabs>\r\n      </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11404, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/use-realtime-updates.ts"],"sourcesContent":["/**\r\n * Realtime Updates Hook for Complaints Module\r\n * Uses in-memory versioning - localStorage has been removed\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { toast } from 'sonner';\r\n\r\n// In-memory version tracking\r\nlet complaintsDataVersion = 0;\r\nconst versionListeners = new Set<() => void>();\r\n\r\ninterface UseRealtimeUpdatesOptions {\r\n  onRefresh: () => void;\r\n  dataVersion: number;\r\n  interval?: number;\r\n}\r\n\r\n/**\r\n * Hook for realtime updates with polling\r\n * Shows notification when data changes\r\n */\r\nexport function useRealtimeUpdates({\r\n  onRefresh,\r\n  dataVersion,\r\n  interval = 30000,\r\n}: UseRealtimeUpdatesOptions) {\r\n  const [hasUpdates, setHasUpdates] = React.useState(false);\r\n  const [isPolling, setIsPolling] = React.useState(true);\r\n  const [lastVersion, setLastVersion] = React.useState(dataVersion);\r\n\r\n  // Subscribe to version changes\r\n  React.useEffect(() => {\r\n    const listener = () => {\r\n      setHasUpdates(true);\r\n    };\r\n    versionListeners.add(listener);\r\n    return () => {\r\n      versionListeners.delete(listener);\r\n    };\r\n  }, []);\r\n\r\n  // Polling effect\r\n  React.useEffect(() => {\r\n    if (!isPolling) return;\r\n\r\n    const timer = setInterval(() => {\r\n      if (complaintsDataVersion > lastVersion) {\r\n        setHasUpdates(true);\r\n        showUpdateNotification();\r\n      }\r\n    }, interval);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [isPolling, interval, lastVersion]);\r\n\r\n  // Check if data version changed\r\n  React.useEffect(() => {\r\n    if (dataVersion !== lastVersion) {\r\n      setHasUpdates(true);\r\n    }\r\n  }, [dataVersion, lastVersion]);\r\n\r\n  const showUpdateNotification = () => {\r\n    toast.info('Có cập nhật mới từ hệ thống', {\r\n      duration: 10000,\r\n      position: 'top-right',\r\n      action: {\r\n        label: 'Làm mới',\r\n        onClick: () => {\r\n          handleRefresh();\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleRefresh = React.useCallback(() => {\r\n    setLastVersion(complaintsDataVersion);\r\n    setHasUpdates(false);\r\n    onRefresh();\r\n    toast.success('Đã làm mới dữ liệu');\r\n  }, [onRefresh]);\r\n\r\n  const togglePolling = () => {\r\n    setIsPolling(prev => !prev);\r\n  };\r\n\r\n  return {\r\n    hasUpdates,\r\n    isPolling,\r\n    refresh: handleRefresh,\r\n    togglePolling,\r\n  };\r\n}\r\n\r\n/**\r\n * Manual trigger for simulating data updates\r\n * Call this when data changes (e.g., after create/update/delete)\r\n */\r\nexport function triggerDataUpdate() {\r\n  complaintsDataVersion++;\r\n  versionListeners.forEach(listener => listener());\r\n}\r\n\r\n/**\r\n * Get current data version\r\n */\r\nexport function getDataVersion(): number {\r\n  return complaintsDataVersion;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;CAGC,GAED;AACA;;;;AAEA,6BAA6B;AAC7B,IAAI,wBAAwB;AAC5B,MAAM,mBAAmB,IAAI;AAYtB,SAAS,mBAAmB,EACjC,SAAS,EACT,WAAW,EACX,WAAW,KAAK,EACU;;IAC1B,MAAM,CAAC,YAAY,cAAc,GAAG,yKAAc,CAAC;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,yKAAc,CAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,yKAAc,CAAC;IAErD,+BAA+B;IAC/B,0KAAe;wCAAC;YACd,MAAM;yDAAW;oBACf,cAAc;gBAChB;;YACA,iBAAiB,GAAG,CAAC;YACrB;gDAAO;oBACL,iBAAiB,MAAM,CAAC;gBAC1B;;QACF;uCAAG,EAAE;IAEL,iBAAiB;IACjB,0KAAe;wCAAC;YACd,IAAI,CAAC,WAAW;YAEhB,MAAM,QAAQ;sDAAY;oBACxB,IAAI,wBAAwB,aAAa;wBACvC,cAAc;wBACd;oBACF;gBACF;qDAAG;YAEH;gDAAO,IAAM,cAAc;;QAC7B;uCAAG;QAAC;QAAW;QAAU;KAAY;IAErC,gCAAgC;IAChC,0KAAe;wCAAC;YACd,IAAI,gBAAgB,aAAa;gBAC/B,cAAc;YAChB;QACF;uCAAG;QAAC;QAAa;KAAY;IAE7B,MAAM,yBAAyB;QAC7B,oJAAK,CAAC,IAAI,CAAC,+BAA+B;YACxC,UAAU;YACV,UAAU;YACV,QAAQ;gBACN,OAAO;gBACP,SAAS;oBACP;gBACF;YACF;QACF;IACF;IAEA,MAAM,gBAAgB,4KAAiB;yDAAC;YACtC,eAAe;YACf,cAAc;YACd;YACA,oJAAK,CAAC,OAAO,CAAC;QAChB;wDAAG;QAAC;KAAU;IAEd,MAAM,gBAAgB;QACpB,aAAa,CAAA,OAAQ,CAAC;IACxB;IAEA,OAAO;QACL;QACA;QACA,SAAS;QACT;IACF;AACF;GAvEgB;AA6ET,SAAS;IACd;IACA,iBAAiB,OAAO,CAAC,CAAA,WAAY;AACvC;AAKO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 11523, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/complaints/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from 'next/navigation';\r\nimport { Plus, Filter, X, LayoutGrid, Table, AlertCircle, CheckCircle2, Clock, XCircle, AlertTriangle, Settings, Settings2, BarChart3, CheckCircle, FolderOpen, Ban, Link2, RefreshCw, Printer } from \"lucide-react\";\r\nimport Fuse from \"fuse.js\";\r\nimport { useVirtualizer } from '@tanstack/react-virtual';\r\nimport { cn } from \"../../lib/utils\";\r\nimport { toast } from \"sonner\";\r\nimport { asSystemId } from '@/lib/id-types';\r\nimport { formatDateForDisplay } from '@/lib/date-utils';\r\n\r\n// Types & Store\r\nimport type { Complaint, ComplaintStatus } from \"./types\";\r\nimport { useComplaints, useComplaintMutations, useComplaintStats } from \"./hooks/use-complaints\";\r\nimport { useAllEmployees } from \"../employees/hooks/use-employees\";\r\nimport { useAllBranches } from \"../settings/branches/hooks/use-branches\";\r\nimport { useStoreInfo } from \"../settings/store-info/hooks/use-store-info\";\r\nimport {\r\n  complaintStatusLabels,\r\n  complaintStatusColors,\r\n  complaintTypeLabels,\r\n  complaintTypeColors,\r\n} from \"./types\";\r\nimport { checkOverdue, formatTimeLeft } from \"./sla-utils\";\r\n\r\n// Print\r\nimport { usePrint } from \"../../lib/use-print\";\r\nimport { \r\n  convertComplaintForPrint,\r\n  mapComplaintToPrintData,\r\n  mapComplaintLineItems,\r\n  createStoreSettings,\r\n} from \"../../lib/print/complaint-print-helper\";\r\nimport { SimplePrintOptionsDialog, type SimplePrintOptionsResult } from \"../../components/shared/simple-print-options-dialog\";\r\n\r\n// UI Components\r\nimport { Button } from \"../../components/ui/button\";\r\nimport { Input } from \"../../components/ui/input\";\r\nimport { Badge } from \"../../components/ui/badge\";\r\nimport { Card } from \"../../components/ui/card\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  } from \"../../components/ui/dialog\";\r\nimport { PageFilters } from \"../../components/layout/page-filters\";\r\nimport { DataTableFacetedFilter } from \"../../components/data-table/data-table-faceted-filter\";\r\nimport { DataTableColumnCustomizer } from \"../../components/data-table/data-table-column-toggle\";\r\nimport { DataTableToolbar } from \"../../components/data-table/data-table-toolbar\";\r\nimport { ResponsiveDataTable, type BulkAction } from \"../../components/data-table/responsive-data-table\";\r\nimport { SlaTimer } from \"../../components/SlaTimer\";\r\nimport { getColumns } from \"./columns\";\r\nimport { ComplaintCard } from \"./complaint-card\";\r\nimport { ComplaintCardContextMenu } from \"./complaint-card-context-menu\";// Hooks\r\nimport { usePageHeader } from \"../../contexts/page-header-context\";\r\nimport { useBreakpoint } from \"../../contexts/breakpoint-context\";\r\n\r\nimport { loadCardColorSettings } from \"../settings/complaints/complaints-settings-page\";\r\nimport { useRealtimeUpdates, getDataVersion, triggerDataUpdate } from \"./use-realtime-updates\";\r\nimport { generateTrackingUrl, getTrackingCode, isTrackingEnabled } from \"./tracking-utils\";\r\nimport { ROUTES } from \"../../lib/router\";\r\nimport type { BreadcrumbItem } from \"../../lib/breadcrumb-system\";\r\n\r\n/**\r\n * Kanban Column Component - Unified neutral header with search\r\n */\r\nfunction KanbanColumn({\r\n  status,\r\n  complaints,\r\n  onComplaintClick,\r\n  employees,\r\n  onEdit,\r\n  onGetLink,\r\n  onStartInvestigation,\r\n  onFinish,\r\n  onOpen,\r\n  onCancel,\r\n  onRemind,\r\n}: {\r\n  status: ComplaintStatus;\r\n  complaints: Complaint[];\r\n  onComplaintClick: (complaint: Complaint) => void;\r\n  employees: Array<{ systemId: string; fullName: string }>;\r\n  onEdit: (systemId: string) => void;\r\n  onGetLink: (systemId: string) => void;\r\n  onStartInvestigation: (systemId: string) => void;\r\n  onFinish: (systemId: string) => void;\r\n  onOpen: (systemId: string) => void;\r\n  onCancel: (systemId: string) => void;\r\n  onRemind: (systemId: string) => void;\r\n}) {\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n  \r\n  // ⚡ VIRTUAL SCROLLING: Ref cho container\r\n  const parentRef = React.useRef<HTMLDivElement>(null);\r\n  \r\n  const statusIcons: Record<ComplaintStatus, React.ElementType> = {\r\n    pending: Clock,\r\n    investigating: AlertCircle,\r\n    resolved: CheckCircle2,\r\n    cancelled: XCircle,\r\n    ended: CheckCircle2, // ✅ FIXED: Thêm icon cho status \"ended\"\r\n  };\r\n\r\n  const StatusIcon = statusIcons[status];\r\n  \r\n  // Filter complaints based on local search\r\n  const filteredComplaints = React.useMemo(() => {\r\n    if (!searchQuery.trim()) return complaints;\r\n    \r\n    const query = searchQuery.toLowerCase();\r\n    return complaints.filter(c => \r\n      (c.orderCode || c.orderSystemId).toLowerCase().includes(query) || // ⭐ Fallback to systemId\r\n      c.customerName.toLowerCase().includes(query) ||\r\n      c.customerPhone.includes(query) ||\r\n      c.description.toLowerCase().includes(query)\r\n    );\r\n  }, [complaints, searchQuery]);\r\n  \r\n  // ⚡ VIRTUAL SCROLLING: Setup virtualizer\r\n  const virtualizer = useVirtualizer({\r\n    count: filteredComplaints.length,\r\n    getScrollElement: () => parentRef.current,\r\n    estimateSize: () => 200, // Estimated card height in pixels\r\n    overscan: 5, // Render 5 extra items above/below viewport\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex-1 min-w-[300px] flex flex-col max-h-[calc(100vh-320px)]\">\r\n      {/* Header - Shadcn style with darker background */}\r\n      <div className=\"text-body-sm font-semibold px-4 py-3 mb-2 rounded-lg border bg-muted flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <StatusIcon className=\"h-4 w-4\" />\r\n          {complaintStatusLabels[status]}\r\n        </div>\r\n        <span className=\"text-body-sm font-normal bg-background h-6 w-6 flex items-center justify-center rounded-full\">\r\n          {filteredComplaints.length}\r\n        </span>\r\n      </div>\r\n      \r\n      {/* Search Input - h-9 */}\r\n      <div className=\"mb-2\">\r\n        <Input\r\n          placeholder=\"Tìm kiếm...\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          className=\"h-9\"\r\n        />\r\n      </div>\r\n\r\n      {/* Scrollable Cards Area - Virtual Scrolling */}\r\n      <div \r\n        ref={parentRef}\r\n        className=\"flex-1 overflow-y-auto pb-2\"\r\n        style={{ \r\n          height: '100%',\r\n          overflow: 'auto',\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            height: `${virtualizer.getTotalSize()}px`,\r\n            width: '100%',\r\n            position: 'relative',\r\n          }}\r\n        >\r\n          {virtualizer.getVirtualItems().map((virtualItem) => {\r\n            const complaint = filteredComplaints[virtualItem.index];\r\n            const overdueStatus = checkOverdue(complaint);\r\n            const isOverdue = overdueStatus.isOverdueResponse || overdueStatus.isOverdueResolve;\r\n            \r\n            // Load card color settings\r\n            const colorSettings = loadCardColorSettings();\r\n            \r\n            // Determine card color (priority order: overdue > priority > status)\r\n            let cardColorClass = \"\";\r\n            if (colorSettings.enableOverdueColor && isOverdue) {\r\n              cardColorClass = colorSettings.overdueColor;\r\n            } else if (colorSettings.enablePriorityColors && (complaint as any).priority) {\r\n              const priority = (complaint as any).priority as 'low' | 'medium' | 'high' | 'urgent';\r\n              cardColorClass = colorSettings.priorityColors[priority] || \"\";\r\n            } else if (colorSettings.enableStatusColors) {\r\n              cardColorClass = colorSettings.statusColors[complaint.status] || \"\";\r\n            }\r\n            \r\n            return (\r\n              <div\r\n                key={complaint.systemId}\r\n                style={{\r\n                  position: 'absolute',\r\n                  top: 0,\r\n                  left: 0,\r\n                  width: '100%',\r\n                  transform: `translateY(${virtualItem.start}px)`,\r\n                }}\r\n              >\r\n                <div className=\"pb-3\">\r\n                  <ComplaintCardContextMenu\r\n                    complaint={complaint}\r\n                    onEdit={onEdit}\r\n                    onGetLink={onGetLink}\r\n                    onStartInvestigation={onStartInvestigation}\r\n                    onFinish={onFinish}\r\n                    onOpen={onOpen}\r\n                    onReject={onCancel}\r\n                    onRemind={onRemind}\r\n                  >\r\n                    <Card\r\n                      onClick={() => onComplaintClick(complaint)}\r\n                      className={cn(\r\n                        \"p-4 cursor-pointer transition-colors hover:bg-accent\",\r\n                        cardColorClass\r\n                      )}\r\n                    >\r\n                      {/* Header */}\r\n                      <div className=\"flex items-start justify-between mb-2\">\r\n                        <div className=\"text-body-sm font-semibold\">\r\n                          {complaint.id}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 flex-wrap justify-end\">\r\n                          <Badge\r\n                            variant=\"outline\"\r\n                            className={cn(\"text-body-xs\", complaintTypeColors[complaint.type])}\r\n                          >\r\n                            {complaintTypeLabels[complaint.type]}\r\n                          </Badge>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Order Info */}\r\n                      <div className=\"mb-2\">\r\n                        <div className=\"text-body-sm font-medium text-foreground mb-1\">\r\n                          Đơn hàng: #{complaint.orderCode || complaint.orderSystemId}\r\n                        </div>\r\n                        <div className=\"flex items-center justify-between gap-2 text-body-xs text-muted-foreground\">\r\n                          <span className=\"truncate\">{complaint.customerName}</span>\r\n                          <span className=\"flex-shrink-0\">{complaint.customerPhone}</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Description Preview */}\r\n                      <div className=\"text-body-xs text-muted-foreground mb-2 line-clamp-2\">\r\n                        {complaint.description}\r\n                      </div>\r\n\r\n                      {/* SLA Timer - Live Countdown */}\r\n                      <SlaTimer\r\n                        startTime={complaint.createdAt}\r\n                        targetMinutes={120} // 2 hours default for complaints\r\n                        isCompleted={complaint.status === 'resolved' || complaint.status === 'cancelled'}\r\n                        completedLabel=\"Đã giải quyết\"\r\n                        className=\"mb-2\"\r\n                      />\r\n\r\n                      {/* Footer */}\r\n                      <div className=\"flex items-center justify-between text-body-xs\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          {complaint.assignedTo && (() => {\r\n                            const assignedEmployee = employees.find(e => e.systemId === complaint.assignedTo);\r\n                            if (!assignedEmployee) return <span className=\"text-muted-foreground\">Chưa giao</span>;\r\n                            \r\n                            // Get initials from full name (e.g. \"Nguyễn Văn A\" -> \"NVA\")\r\n                            const initials = assignedEmployee.fullName\r\n                              .split(' ')\r\n                              .map(word => word[0])\r\n                              .join('')\r\n                              .toUpperCase()\r\n                              .slice(0, 3);\r\n                            \r\n                            return (\r\n                              <div className=\"flex items-center gap-1.5\">\r\n                                <div className=\"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary text-[10px] font-semibold\">\r\n                                  {initials}\r\n                                </div>\r\n                                <span className=\"text-muted-foreground max-w-[80px] truncate\">\r\n                                  {assignedEmployee.fullName}\r\n                                </span>\r\n                              </div>\r\n                            );\r\n                          })()}\r\n                        </div>\r\n                        <div className=\"text-muted-foreground\">\r\n                          {formatDateForDisplay(complaint.createdAt)}\r\n                        </div>\r\n                      </div>\r\n                    </Card>\r\n                  </ComplaintCardContextMenu>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {filteredComplaints.length === 0 && (\r\n          <div className=\"flex items-center justify-center h-40 text-body-sm text-muted-foreground border-2 border-dashed rounded-lg\">\r\n            Không có khiếu nại nào\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * =============================================\r\n * MAIN PAGE COMPONENT - Complaints Kanban View\r\n * =============================================\r\n */\r\nexport function ComplaintsPage() {\r\n  const router = useRouter();\r\n  const { isMobile } = useBreakpoint();\r\n  const { setPageHeader } = usePageHeader();\r\n\r\n  // React Query hooks\r\n  const { data: complaintsData } = useComplaints();\r\n  const complaints = complaintsData?.data || [];\r\n  const { data: statsData } = useComplaintStats();\r\n  const { update: updateComplaintMutation } = useComplaintMutations();\r\n  \r\n  const { data: employeesData } = useAllEmployees();\r\n  const employees = employeesData || [];\r\n  const { data: branchesData } = useAllBranches();\r\n  const branches = branchesData?.data || [];\r\n  const { data: storeInfoData } = useStoreInfo();\r\n  const storeInfo = storeInfoData || null;\r\n  const { print, printMultiple } = usePrint();\r\n\r\n  // Local search state\r\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\r\n  \r\n  // Helper function to get complaints by status\r\n  const getComplaintsByStatus = React.useCallback((status: ComplaintStatus) => {\r\n    return complaints.filter(c => c.status === status);\r\n  }, [complaints]);\r\n  \r\n  // Helper function to get stats\r\n  const getStats = React.useCallback(() => {\r\n    if (statsData) return statsData;\r\n    return {\r\n      total: complaints.length,\r\n      pending: complaints.filter(c => c.status === 'pending').length,\r\n      inProgress: complaints.filter(c => c.status === 'investigating').length,\r\n      resolved: complaints.filter(c => c.status === 'resolved').length,\r\n      rejected: complaints.filter(c => c.status === 'cancelled').length,\r\n    };\r\n  }, [complaints, statsData]);\r\n  \r\n  // Wrapper for updateComplaint\r\n  const updateComplaint = React.useCallback((systemId: string, updates: Partial<Complaint>) => {\r\n    updateComplaintMutation.mutate({ systemId, data: updates });\r\n  }, [updateComplaintMutation]);\r\n\r\n  // Print dialog state\r\n  const [printDialogOpen, setPrintDialogOpen] = React.useState(false);\r\n  const [itemsToPrint, setItemsToPrint] = React.useState<Complaint[]>([]);\r\n\r\n  // ==========================================\r\n  // State Management\r\n  // ==========================================\r\n  const [viewMode, setViewMode] = React.useState<\"kanban\" | \"table\">(\"kanban\");\r\n  const [debouncedSearch, setDebouncedSearch] = React.useState(\"\");\r\n  \r\n  // Filter states - giống Employees (dùng Set)\r\n  const [statusFilter, setStatusFilter] = React.useState<Set<string>>(new Set());\r\n  const [typeFilter, setTypeFilter] = React.useState<Set<string>>(new Set());\r\n  const [assignedToFilter, setAssignedToFilter] = React.useState<Set<string>>(new Set());\r\n\r\n  // Table view states\r\n  const [rowSelection, setRowSelection] = React.useState<Record<string, boolean>>({});\r\n  // Column visibility - Initialize with all columns visible (like Employees)\r\n  const [columnVisibility, setColumnVisibility] = React.useState<Record<string, boolean>>(() => {\r\n    const defaultVisibleColumns = [\r\n      'complaintId', 'orderCode', 'customerName', 'type', 'priority', 'status',\r\n      'verification', 'slaStatus', 'assignedTo', 'affectedProducts',\r\n      'createdAt', 'resolvedAt'\r\n    ];\r\n    const initial: Record<string, boolean> = {};\r\n    const cols = getColumns(\r\n      () => {}, () => {}, () => {}, () => {}, () => {}, () => {}, employees, router\r\n    );\r\n    cols.forEach((col) => {\r\n      const colId = col.id || '';\r\n      // select and actions are ALWAYS visible\r\n      if (colId === 'select' || colId === 'actions') {\r\n        initial[colId] = true;\r\n      } else {\r\n        initial[colId] = defaultVisibleColumns.includes(colId);\r\n      }\r\n    });\r\n    return initial;\r\n  });\r\n  const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\r\n  const [sorting, setSorting] = React.useState<{ id: string; desc: boolean }>({ id: 'createdAt', desc: true });\r\n  const [pagination, setPagination] = React.useState({ pageIndex: 0, pageSize: 20 });\r\n  const [pinnedColumns, setPinnedColumns] = React.useState<string[]>(['select', 'complaintId']);\r\n\r\n  // Mobile infinite scroll\r\n  const [mobileLoadedCount, setMobileLoadedCount] = React.useState(20);\r\n\r\n  // Realtime updates\r\n  const [dataVersion, setDataVersion] = React.useState(() => getDataVersion());\r\n  const { hasUpdates, isPolling, refresh, togglePolling } = useRealtimeUpdates({\r\n    dataVersion,\r\n    onRefresh: () => {\r\n      // Refresh data when updates available\r\n      setDataVersion(getDataVersion());\r\n      // Force re-render by updating state\r\n      const newVersion = Date.now();\r\n      setDataVersion(newVersion);\r\n    },\r\n    interval: 30000 // Check every 30 seconds\r\n  });\r\n\r\n  // Load card color settings\r\n  const cardColors = React.useMemo(() => loadCardColorSettings(), []);\r\n\r\n  // Get row style based on priority/status/overdue (same logic as card)\r\n  const getRowStyle = React.useCallback((complaint: Complaint): React.CSSProperties => {\r\n    // Check if overdue and overdue color is enabled\r\n    const overdueStatus = checkOverdue(complaint);\r\n    if (cardColors.enableOverdueColor && (overdueStatus.isOverdueResponse || overdueStatus.isOverdueResolve)) {\r\n      const colorClass = cardColors.overdueColor;\r\n      return parseColorClass(colorClass);\r\n    }\r\n    \r\n    // Check priority color if enabled\r\n    if (cardColors.enablePriorityColors && complaint.priority) {\r\n      const colorClass = cardColors.priorityColors[complaint.priority];\r\n      if (colorClass) {\r\n        return parseColorClass(colorClass);\r\n      }\r\n    }\r\n    \r\n    // Check status color if enabled\r\n    if (cardColors.enableStatusColors) {\r\n      const colorClass = cardColors.statusColors[complaint.status];\r\n      if (colorClass) {\r\n        return parseColorClass(colorClass);\r\n      }\r\n    }\r\n    \r\n    return {};\r\n  }, [cardColors]);\r\n\r\n  // Helper function to parse Tailwind color classes to CSS\r\n  function parseColorClass(colorClass: string): React.CSSProperties {\r\n    if (!colorClass || typeof colorClass !== 'string') {\r\n      return {};\r\n    }\r\n    \r\n    // Extract Tailwind color from class (e.g., 'bg-yellow-50 border-yellow-200')\r\n    const colorMap: Record<string, string> = {\r\n      'bg-yellow-50': '#fefce8',\r\n      'bg-blue-50': '#eff6ff',\r\n      'bg-green-50': '#f0fdf4',\r\n      'bg-gray-50': '#f9fafb',\r\n      'bg-amber-50': '#fffbeb',\r\n      'bg-orange-50': '#fff7ed',\r\n      'bg-red-50': '#fef2f2',\r\n      'bg-red-100': '#fee2e2',\r\n      'bg-slate-50': '#f8fafc',\r\n    };\r\n    \r\n    // Find the bg color class\r\n    const bgClass = colorClass.split(' ').find(c => c.startsWith('bg-'));\r\n    const hexColor = bgClass ? colorMap[bgClass] : null;\r\n    \r\n    if (!hexColor) return {};\r\n    \r\n    return {\r\n      backgroundColor: hexColor,\r\n    };\r\n  }\r\n\r\n  // Dialog confirm states\r\n  const [confirmDialog, setConfirmDialog] = React.useState<{\r\n    open: boolean;\r\n    title: string;\r\n    description: string;\r\n    onConfirm: () => void;\r\n  }>({\r\n    open: false,\r\n    title: '',\r\n    description: '',\r\n    onConfirm: () => {},\r\n  });\r\n\r\n  // Debounced search (300ms)\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearch(searchQuery);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [searchQuery]);\r\n  \r\n  // Filter options - giống Employees\r\n  const statusOptions = React.useMemo(() => [\r\n    { label: \"Chờ xử lý\", value: \"pending\" },\r\n    { label: \"Đang kiểm tra\", value: \"investigating\" },\r\n    { label: \"Đã giải quyết\", value: \"resolved\" },\r\n    { label: \"Đã hủy\", value: \"cancelled\" },\r\n  ], []);\r\n\r\n  const typeOptions = React.useMemo(() => [\r\n    { label: \"Sai hàng\", value: \"wrong-product\" },\r\n    { label: \"Thiếu hàng\", value: \"missing-items\" },\r\n    { label: \"Đóng gói sai\", value: \"wrong-packaging\" },\r\n    { label: \"Lỗi do kho\", value: \"warehouse-defect\" },\r\n    { label: \"Tình trạng hàng\", value: \"product-condition\" },\r\n  ], []);\r\n\r\n  const employeeOptions = React.useMemo(() => {\r\n    return employees.map((emp) => ({\r\n      label: emp.fullName,\r\n      value: emp.systemId,\r\n    }));\r\n  }, [employees]);\r\n\r\n  // ==========================================\r\n  // Data Processing\r\n  // ==========================================\r\n  const stats = React.useMemo(() => getStats(), [complaints, getStats]);\r\n\r\n  // Memoize Fuse instance\r\n  const fuseInstance = React.useMemo(() => {\r\n    return new Fuse(complaints, {\r\n      keys: [\"orderCode\", \"customerName\", \"customerPhone\", \"description\"],\r\n      threshold: 0.3,\r\n    });\r\n  }, [complaints]);\r\n\r\n  const filteredComplaints = React.useMemo(() => {\r\n    let result = [...complaints];\r\n\r\n    // Apply status filter\r\n    if (statusFilter.size > 0) {\r\n      result = result.filter((c) => statusFilter.has(c.status));\r\n    }\r\n\r\n    // Apply type filter\r\n    if (typeFilter.size > 0) {\r\n      result = result.filter((c) => typeFilter.has(c.type));\r\n    }\r\n\r\n    // Apply employee filter\r\n    if (assignedToFilter.size > 0) {\r\n      result = result.filter((c) => c.assignedTo && assignedToFilter.has(c.assignedTo));\r\n    }\r\n\r\n    // Apply search with Fuse.js\r\n    if (debouncedSearch) {\r\n      result = fuseInstance.search(debouncedSearch).map((item) => item.item);\r\n    }\r\n\r\n    return result;\r\n  }, [complaints, statusFilter, typeFilter, assignedToFilter, debouncedSearch, fuseInstance]);\r\n\r\n  const complaintsByStatus = React.useMemo(() => {\r\n    return {\r\n      pending: filteredComplaints.filter((c) => c.status === \"pending\"),\r\n      investigating: filteredComplaints.filter((c) => c.status === \"investigating\"),\r\n      resolved: filteredComplaints.filter((c) => c.status === \"resolved\"),\r\n      cancelled: filteredComplaints.filter((c) => c.status === \"cancelled\"),\r\n    };\r\n  }, [filteredComplaints]);\r\n\r\n  // ==========================================\r\n  // Event Handlers\r\n  // ==========================================\r\n  const handleComplaintClick = (complaint: Complaint) => {\r\n    router.push(`/complaints/${complaint.systemId}`);\r\n  };\r\n\r\n  const handleCreateComplaint = () => {\r\n    router.push(\"/complaints/new\");\r\n  };\r\n\r\n  // Table view handlers\r\n  const handleView = React.useCallback((systemId: string) => {\r\n    router.push(`/complaints/${systemId}`);\r\n  }, [router]);\r\n\r\n  const handleEdit = React.useCallback((systemId: string) => {\r\n    router.push(`/complaints/${systemId}/edit`);\r\n  }, [router]);\r\n\r\n  const handleFinish = React.useCallback((systemId: string) => {\r\n    const complaint = complaints.find(c => c.systemId === systemId);\r\n    if (!complaint) {\r\n      toast.error('Không tìm thấy khiếu nại');\r\n      return;\r\n    }\r\n    \r\n    setConfirmDialog({\r\n      open: true,\r\n      title: 'Kết thúc khiếu nại',\r\n      description: 'Bạn có chắc muốn kết thúc khiếu nại này?',\r\n      onConfirm: () => {\r\n        try {\r\n          updateComplaint(asSystemId(systemId), {\r\n            status: 'resolved',\r\n            updatedAt: new Date(),\r\n            resolvedAt: new Date(),\r\n            timeline: [\r\n              ...complaint.timeline,\r\n              {\r\n                id: asSystemId(`action_${Date.now()}`),\r\n                actionType: 'resolved',\r\n                performedBy: asSystemId('Admin'), // TODO: Get from auth\r\n                performedAt: new Date(),\r\n                note: 'Kết thúc khiếu nại từ Kanban view',\r\n              },\r\n            ],\r\n          } as any);\r\n          toast.success('Đã kết thúc khiếu nại thành công');\r\n          triggerDataUpdate();\r\n        } catch (error) {\r\n          toast.error('Không thể kết thúc khiếu nại');\r\n        }\r\n        setConfirmDialog(prev => ({ ...prev, open: false }));\r\n      },\r\n    });\r\n  }, [complaints, updateComplaint]);\r\n\r\n  const handleOpen = React.useCallback((systemId: string) => {\r\n    const complaint = complaints.find(c => c.systemId === systemId);\r\n    if (!complaint) {\r\n      toast.error('Không tìm thấy khiếu nại');\r\n      return;\r\n    }\r\n    \r\n    setConfirmDialog({\r\n      open: true,\r\n      title: 'Mở lại khiếu nại',\r\n      description: 'Bạn có chắc muốn mở lại khiếu nại này?',\r\n      onConfirm: () => {\r\n        try {\r\n          updateComplaint(asSystemId(systemId), {\r\n            status: 'investigating',\r\n            // ⭐ Xóa các trường ended/resolved để về trạng thái mở\r\n            endedBy: undefined,\r\n            endedAt: undefined,\r\n            resolvedBy: undefined,\r\n            resolvedAt: undefined,\r\n            cancelledBy: undefined,\r\n            cancelledAt: undefined,\r\n            updatedAt: new Date(),\r\n            timeline: [\r\n              ...complaint.timeline,\r\n              {\r\n                id: asSystemId(`action_${Date.now()}`),\r\n                actionType: 'reopened',\r\n                performedBy: asSystemId('Admin'), // TODO: Get from auth\r\n                performedAt: new Date(),\r\n                note: 'Mở lại khiếu nại từ Kanban view',\r\n              },\r\n            ],\r\n          } as any);\r\n          toast.success('Đã mở lại khiếu nại thành công');\r\n          triggerDataUpdate();\r\n        } catch (error) {\r\n          toast.error('Không thể mở lại khiếu nại');\r\n        }\r\n        setConfirmDialog(prev => ({ ...prev, open: false }));\r\n      },\r\n    });\r\n  }, [complaints, updateComplaint]);\r\n\r\n  const handleCancel = React.useCallback((systemId: string) => {\r\n    const complaint = complaints.find(c => c.systemId === systemId);\r\n    if (!complaint) {\r\n      toast.error('Không tìm thấy khiếu nại');\r\n      return;\r\n    }\r\n    \r\n    setConfirmDialog({\r\n      open: true,\r\n      title: 'Hủy khiếu nại',\r\n      description: 'Bạn có chắc muốn hủy khiếu nại này?',\r\n      onConfirm: () => {\r\n        try {\r\n          updateComplaint(asSystemId(systemId), {\r\n            status: 'cancelled',\r\n            updatedAt: new Date(),\r\n            cancelledAt: new Date(),\r\n            timeline: [\r\n              ...complaint.timeline,\r\n              {\r\n                id: asSystemId(`action_${Date.now()}`),\r\n                actionType: 'cancelled',\r\n                performedBy: asSystemId('Admin'), // TODO: Get from auth\r\n                performedAt: new Date(),\r\n                note: 'Hủy khiếu nại từ Kanban view',\r\n              },\r\n            ],\r\n          } as any);\r\n          toast.success('Đã hủy khiếu nại thành công');\r\n          triggerDataUpdate();\r\n        } catch (error) {\r\n          toast.error('Không thể hủy khiếu nại');\r\n        }\r\n        setConfirmDialog(prev => ({ ...prev, open: false }));\r\n      },\r\n    });\r\n  }, [complaints, updateComplaint]);\r\n\r\n  const handleStartInvestigation = React.useCallback((systemId: string) => {\r\n    const complaint = complaints.find(c => c.systemId === systemId);\r\n    if (!complaint) {\r\n      toast.error('Không tìm thấy khiếu nại');\r\n      return;\r\n    }\r\n    \r\n    setConfirmDialog({\r\n      open: true,\r\n      title: 'Bắt đầu xử lý',\r\n      description: 'Bạn có chắc muốn bắt đầu xử lý khiếu nại này?',\r\n      onConfirm: () => {\r\n        try {\r\n          updateComplaint(asSystemId(systemId), {\r\n            status: 'investigating',\r\n            updatedAt: new Date(),\r\n            timeline: [\r\n              ...complaint.timeline,\r\n              {\r\n                id: asSystemId(`action_${Date.now()}`),\r\n                actionType: 'investigating',\r\n                performedBy: asSystemId('Admin'), // TODO: Get from auth\r\n                performedAt: new Date(),\r\n                note: 'Bắt đầu xử lý khiếu nại từ Kanban view',\r\n              },\r\n            ],\r\n          } as any);\r\n          toast.success('Đã bắt đầu xử lý khiếu nại');\r\n          triggerDataUpdate();\r\n        } catch (error) {\r\n          toast.error('Không thể bắt đầu xử lý khiếu nại');\r\n        }\r\n        setConfirmDialog(prev => ({ ...prev, open: false }));\r\n      },\r\n    });\r\n  }, [complaints, updateComplaint]);\r\n\r\n  const handleGetLink = React.useCallback((systemId: string) => {\r\n    try {\r\n      const complaint = complaints.find(c => c.systemId === systemId);\r\n      if (!complaint) {\r\n        toast.error('Không tìm thấy khiếu nại');\r\n        return;\r\n      }\r\n\r\n      // Check if tracking is enabled\r\n      if (!isTrackingEnabled()) {\r\n        toast.error('Chức năng tracking chưa được bật. Vui lòng bật trong Cài đặt.');\r\n        return;\r\n      }\r\n\r\n      // Generate tracking URL and code\r\n      const trackingUrl = generateTrackingUrl(complaint);\r\n      const trackingCode = getTrackingCode(complaint.id);\r\n      \r\n      // Copy to clipboard\r\n      navigator.clipboard.writeText(trackingUrl);\r\n      \r\n      // Show success with tracking code\r\n      toast.success(\r\n        <div className=\"flex flex-col gap-1\">\r\n          <div className=\"font-semibold\">Đã copy link tracking</div>\r\n          <div className=\"text-sm text-muted-foreground\">Mã theo dõi: {trackingCode}</div>\r\n        </div>,\r\n        { duration: 5000 }\r\n      );\r\n    } catch (error) {\r\n      toast.error('Không thể copy link tracking');\r\n    }\r\n  }, [complaints]);\r\n\r\n  const handleRemind = React.useCallback((systemId: string) => {\r\n    const complaint = complaints.find(c => c.systemId === systemId);\r\n    if (!complaint) {\r\n      toast.error('Không tìm thấy khiếu nại');\r\n      return;\r\n    }\r\n    \r\n    toast.success(\r\n      <div className=\"flex flex-col gap-1\">\r\n        <div className=\"font-semibold\">Đã gửi thông báo nhắc nhở</div>\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          Khiếu nại: {complaint.id}\r\n        </div>\r\n      </div>,\r\n      { duration: 3000 }\r\n    );\r\n  }, [complaints]);\r\n\r\n  const handleRowClick = React.useCallback((complaint: Complaint) => {\r\n    router.push(`/complaints/${complaint.systemId}`);\r\n  }, [router]);\r\n\r\n  // Get columns\r\n  const columns = React.useMemo(\r\n    () => getColumns(\r\n      handleView, \r\n      handleEdit, \r\n      handleFinish, \r\n      handleOpen, \r\n      handleCancel, \r\n      handleGetLink, \r\n      employees,\r\n      router\r\n    ),\r\n    [handleView, handleEdit, handleFinish, handleOpen, handleCancel, handleGetLink, employees, router]\r\n  );\r\n\r\n  // Set page header - CHỈ truyền actions (title & breadcrumb tự động generate)\r\n  const actions = React.useMemo(() => [\r\n    <Button\r\n      key=\"live-toggle\"\r\n      variant={isPolling ? \"default\" : \"outline\"}\r\n      size=\"sm\"\r\n      className=\"h-9\"\r\n      onClick={togglePolling}\r\n      title={isPolling ? \"Tắt cập nhật tự động\" : \"Bật cập nhật tự động\"}\r\n    >\r\n      <RefreshCw className={cn(\"h-4 w-4 mr-2\", isPolling && \"animate-spin\")} />\r\n      {isPolling ? \"Live\" : \"Cài đặt\"}\r\n    </Button>,\r\n    <Button\r\n      key=\"view-toggle\"\r\n      onClick={() => setViewMode(viewMode === 'kanban' ? 'table' : 'kanban')}\r\n      variant=\"outline\"\r\n      size=\"sm\"\r\n      className=\"h-9\"\r\n    >\r\n      {viewMode === 'kanban' ? (\r\n        <>\r\n          <Table className=\"h-4 w-4 mr-2\" />\r\n          Chế độ bảng\r\n        </>\r\n      ) : (\r\n        <>\r\n          <LayoutGrid className=\"h-4 w-4 mr-2\" />\r\n          Chế độ Kanban\r\n        </>\r\n      )}\r\n    </Button>,\r\n    <Button\r\n      key=\"statistics\"\r\n      variant=\"outline\"\r\n      onClick={() => router.push(\"/complaints/statistics\")}\r\n      className=\"h-9\"\r\n    >\r\n      <BarChart3 className=\"h-4 w-4 mr-2\" />\r\n      Thống kê\r\n    </Button>,\r\n    <Button\r\n      key=\"create\"\r\n      onClick={() => router.push(\"/complaints/new\")}\r\n      className=\"h-9\"\r\n    >\r\n      <Plus className=\"h-4 w-4 mr-2\" />\r\n      Tạo khiếu nại\r\n    </Button>,\r\n  ], [router, viewMode, isPolling, togglePolling]);\r\n\r\n  const breadcrumb = React.useMemo<BreadcrumbItem[]>(() => [\r\n    { label: \"Trang chủ\", href: ROUTES.ROOT },\r\n    { label: \"Quản lý Khiếu nại\", href: ROUTES.INTERNAL.COMPLAINTS, isCurrent: true },\r\n  ], []);\r\n\r\n  usePageHeader({\r\n    title: \"Quản lý Khiếu nại\",\r\n    breadcrumb,\r\n    showBackButton: false,\r\n    actions,\r\n  });\r\n\r\n  // Set column order on mount\r\n  React.useEffect(() => {\r\n    if (columnOrder.length === 0) {\r\n      setColumnOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n    }\r\n  }, []);  // Empty deps - run once\r\n\r\n  // Calculate pagination\r\n  const pageCount = Math.ceil(filteredComplaints.length / pagination.pageSize);\r\n  const paginatedData = React.useMemo(() => {\r\n    const start = pagination.pageIndex * pagination.pageSize;\r\n    const end = start + pagination.pageSize;\r\n    return filteredComplaints.slice(start, end);\r\n  }, [filteredComplaints, pagination.pageIndex, pagination.pageSize]);\r\n\r\n  // Mobile display data\r\n  const displayData = isMobile \r\n    ? filteredComplaints.slice(0, mobileLoadedCount)\r\n    : paginatedData;\r\n\r\n  // Selected rows\r\n  const allSelectedRows = React.useMemo(() => \r\n    Object.keys(rowSelection)\r\n      .filter(key => rowSelection[key])\r\n      .map(systemId => filteredComplaints.find(c => c.systemId === systemId))\r\n      .filter(Boolean) as Complaint[],\r\n    [rowSelection, filteredComplaints]\r\n  );\r\n\r\n  // Bulk actions\r\n  const handleBulkFinish = React.useCallback(() => {\r\n    if (allSelectedRows.length === 0) {\r\n      toast.error('Vui lòng chọn ít nhất một khiếu nại');\r\n      return;\r\n    }\r\n    setConfirmDialog({\r\n      open: true,\r\n      title: 'Kết thúc khiếu nại',\r\n      description: `Bạn có chắc muốn kết thúc ${allSelectedRows.length} khiếu nại đã chọn?`,\r\n      onConfirm: () => {\r\n        try {\r\n          allSelectedRows.forEach(complaint => {\r\n            // TODO: Implement bulk finish logic\r\n            console.log('Kết thúc khiếu nại:', complaint.systemId);\r\n          });\r\n          toast.success(`Đã kết thúc ${allSelectedRows.length} khiếu nại`);\r\n          setRowSelection({});\r\n        } catch (error) {\r\n          toast.error('Không thể kết thúc khiếu nại');\r\n        }\r\n        setConfirmDialog(prev => ({ ...prev, open: false }));\r\n      },\r\n    });\r\n  }, [allSelectedRows]);\r\n\r\n  const handleBulkOpen = React.useCallback(() => {\r\n    if (allSelectedRows.length === 0) {\r\n      toast.error('Vui lòng chọn ít nhất một khiếu nại');\r\n      return;\r\n    }\r\n    setConfirmDialog({\r\n      open: true,\r\n      title: 'Mở lại khiếu nại',\r\n      description: `Bạn có chắc muốn mở ${allSelectedRows.length} khiếu nại đã chọn?`,\r\n      onConfirm: () => {\r\n        try {\r\n          allSelectedRows.forEach(complaint => {\r\n            // TODO: Implement bulk open logic\r\n            console.log('Mở khiếu nại:', complaint.systemId);\r\n          });\r\n          toast.success(`Đã mở lại ${allSelectedRows.length} khiếu nại`);\r\n          setRowSelection({});\r\n        } catch (error) {\r\n          toast.error('Không thể mở lại khiếu nại');\r\n        }\r\n        setConfirmDialog(prev => ({ ...prev, open: false }));\r\n      },\r\n    });\r\n  }, [allSelectedRows]);\r\n\r\n  const handleBulkCancel = React.useCallback(() => {\r\n    if (allSelectedRows.length === 0) {\r\n      toast.error('Vui lòng chọn ít nhất một khiếu nại');\r\n      return;\r\n    }\r\n    setConfirmDialog({\r\n      open: true,\r\n      title: 'Hủy khiếu nại',\r\n      description: `Bạn có chắc muốn hủy ${allSelectedRows.length} khiếu nại đã chọn?`,\r\n      onConfirm: () => {\r\n        try {\r\n          allSelectedRows.forEach(complaint => {\r\n            // TODO: Implement bulk cancel logic\r\n            console.log('Hủy khiếu nại:', complaint.systemId);\r\n          });\r\n          toast.success(`Đã hủy ${allSelectedRows.length} khiếu nại`);\r\n          setRowSelection({});\r\n        } catch (error) {\r\n          toast.error('Không thể hủy khiếu nại');\r\n        }\r\n        setConfirmDialog(prev => ({ ...prev, open: false }));\r\n      },\r\n    });\r\n  }, [allSelectedRows]);\r\n\r\n  const handleBulkGetLink = React.useCallback(() => {\r\n    if (allSelectedRows.length === 0) {\r\n      toast.error('Vui lòng chọn ít nhất một khiếu nại');\r\n      return;\r\n    }\r\n\r\n    // Check if tracking is enabled\r\n    if (!isTrackingEnabled()) {\r\n      toast.error('Chức năng tracking chưa được bật. Vui lòng bật trong Cài đặt.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const trackingLinks = allSelectedRows.map(c => {\r\n        const trackingUrl = generateTrackingUrl(c);\r\n        const trackingCode = getTrackingCode(c.id);\r\n        return `${trackingCode}: ${trackingUrl}`;\r\n      });\r\n      \r\n      navigator.clipboard.writeText(trackingLinks.join('\\n'));\r\n      toast.success(`Đã copy ${allSelectedRows.length} link tracking vào clipboard`);\r\n    } catch (error) {\r\n      toast.error('Không thể copy link tracking');\r\n    }\r\n  }, [allSelectedRows]);\r\n\r\n  // Bulk print handlers\r\n  const handleBulkPrint = React.useCallback((rows: Complaint[]) => {\r\n    setItemsToPrint(rows);\r\n    setPrintDialogOpen(true);\r\n  }, []);\r\n\r\n  const handlePrintConfirm = React.useCallback((options: SimplePrintOptionsResult) => {\r\n    if (itemsToPrint.length === 0) return;\r\n    \r\n    const printItems = itemsToPrint.map(complaint => {\r\n      const selectedBranch = options.branchSystemId \r\n        ? branches.find(b => b.systemId === options.branchSystemId)\r\n        : branches.find(b => b.systemId === complaint.branchSystemId);\r\n      const storeSettings = selectedBranch \r\n        ? createStoreSettings(selectedBranch)\r\n        : createStoreSettings(storeInfo);\r\n      const complaintData = convertComplaintForPrint(complaint, {});\r\n      \r\n      return {\r\n        data: mapComplaintToPrintData(complaintData, storeSettings),\r\n        lineItems: mapComplaintLineItems(complaintData.items || []),\r\n        paperSize: options.paperSize,\r\n      };\r\n    });\r\n\r\n    printMultiple('complaint', printItems);\r\n    toast.success(`Đang in ${itemsToPrint.length} phiếu khiếu nại`);\r\n    setItemsToPrint([]);\r\n    setPrintDialogOpen(false);\r\n  }, [itemsToPrint, branches, storeInfo, printMultiple]);\r\n\r\n  const bulkActions: BulkAction<Complaint>[] = React.useMemo(() => [\r\n    {\r\n      label: 'In phiếu',\r\n      icon: Printer,\r\n      onSelect: handleBulkPrint,\r\n    },\r\n    {\r\n      label: 'Kết thúc',\r\n      onSelect: handleBulkFinish\r\n    },\r\n    {\r\n      label: 'Mở',\r\n      onSelect: handleBulkOpen\r\n    },\r\n    {\r\n      label: 'Get Link',\r\n      onSelect: handleBulkGetLink\r\n    },\r\n    {\r\n      label: 'Hủy',\r\n      onSelect: handleBulkCancel\r\n    }\r\n  ], [handleBulkPrint, handleBulkFinish, handleBulkOpen, handleBulkGetLink, handleBulkCancel]);\r\n\r\n  // Reset mobile loaded count when filters change\r\n  React.useEffect(() => {\r\n    setMobileLoadedCount(20);\r\n  }, [searchQuery, statusFilter, typeFilter, assignedToFilter]);\r\n\r\n  // Mobile infinite scroll\r\n  React.useEffect(() => {\r\n    if (!isMobile || viewMode !== 'table') return;\r\n\r\n    const handleScroll = () => {\r\n      const scrollPosition = window.scrollY + window.innerHeight;\r\n      const documentHeight = document.documentElement.scrollHeight;\r\n      \r\n      if (scrollPosition >= documentHeight * 0.8) {\r\n        setMobileLoadedCount(prev => Math.min(prev + 20, filteredComplaints.length));\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [isMobile, mobileLoadedCount, filteredComplaints.length, viewMode]);\r\n\r\n  const handleClearFilters = () => {\r\n    setStatusFilter(new Set());\r\n    setTypeFilter(new Set());\r\n    setAssignedToFilter(new Set());\r\n    setSearchQuery(\"\");\r\n  };\r\n\r\n  const hasActiveFilters =\r\n    statusFilter.size > 0 ||\r\n    typeFilter.size > 0 ||\r\n    assignedToFilter.size > 0 ||\r\n    searchQuery !== \"\";\r\n\r\n  // ==========================================\r\n  // Render\r\n  // ==========================================\r\n  return (\r\n    <div className=\"flex flex-col w-full h-full\">\r\n      {/* Kanban View */}\r\n      {viewMode === \"kanban\" && (\r\n        <div className=\"space-y-4\">\r\n          {/* Kanban Toolbar - Filters */}\r\n          <div className=\"space-y-2\">\r\n            {/* Filters */}\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              <Input\r\n                placeholder=\"Tìm theo mã, đơn hàng, khách hàng...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"h-9 max-w-xs\"\r\n              />\r\n              \r\n              <DataTableFacetedFilter\r\n                title=\"Trạng thái\"\r\n                options={statusOptions}\r\n                selectedValues={statusFilter}\r\n                onSelectedValuesChange={setStatusFilter}\r\n              />\r\n              \r\n              <DataTableFacetedFilter\r\n                title=\"Loại khiếu nại\"\r\n                options={typeOptions}\r\n                selectedValues={typeFilter}\r\n                onSelectedValuesChange={setTypeFilter}\r\n              />\r\n              \r\n              <DataTableFacetedFilter\r\n                title=\"Người xử lý\"\r\n                options={employeeOptions}\r\n                selectedValues={assignedToFilter}\r\n                onSelectedValuesChange={setAssignedToFilter}\r\n              />\r\n              \r\n              {hasActiveFilters && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={handleClearFilters}\r\n                  className=\"h-9 px-2 lg:px-3\"\r\n                >\r\n                  Xóa lọc\r\n                  <X className=\"ml-2 h-4 w-4\" />\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Kanban Columns */}\r\n          <div className=\"flex gap-4 overflow-x-auto pb-4\">\r\n            <KanbanColumn\r\n              status=\"pending\"\r\n              complaints={complaintsByStatus.pending}\r\n              onComplaintClick={handleComplaintClick}\r\n              employees={employees}\r\n              onEdit={handleEdit}\r\n              onGetLink={handleGetLink}\r\n              onStartInvestigation={handleStartInvestigation}\r\n              onFinish={handleFinish}\r\n              onOpen={handleOpen}\r\n              onCancel={handleCancel}\r\n              onRemind={handleRemind}\r\n            />\r\n            <KanbanColumn\r\n              status=\"investigating\"\r\n              complaints={complaintsByStatus.investigating}\r\n              onComplaintClick={handleComplaintClick}\r\n              employees={employees}\r\n              onEdit={handleEdit}\r\n              onGetLink={handleGetLink}\r\n              onStartInvestigation={handleStartInvestigation}\r\n              onFinish={handleFinish}\r\n              onOpen={handleOpen}\r\n              onCancel={handleCancel}\r\n              onRemind={handleRemind}\r\n            />\r\n            <KanbanColumn\r\n              status=\"resolved\"\r\n              complaints={complaintsByStatus.resolved}\r\n              onComplaintClick={handleComplaintClick}\r\n              employees={employees}\r\n              onEdit={handleEdit}\r\n              onGetLink={handleGetLink}\r\n              onStartInvestigation={handleStartInvestigation}\r\n              onFinish={handleFinish}\r\n              onOpen={handleOpen}\r\n              onCancel={handleCancel}\r\n              onRemind={handleRemind}\r\n            />\r\n            <KanbanColumn\r\n              status=\"cancelled\"\r\n              complaints={complaintsByStatus.cancelled}\r\n              onComplaintClick={handleComplaintClick}\r\n              employees={employees}\r\n              onEdit={handleEdit}\r\n              onGetLink={handleGetLink}\r\n              onStartInvestigation={handleStartInvestigation}\r\n              onFinish={handleFinish}\r\n              onOpen={handleOpen}\r\n              onCancel={handleCancel}\r\n              onRemind={handleRemind}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Table View */}\r\n      {viewMode === \"table\" && (\r\n        <>\r\n          {/* Toolbar - Hàng 1: Cài đặt + Điều chỉnh cột */}\r\n          <div className=\"flex items-center justify-end gap-2 mb-3\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"h-9\"\r\n              onClick={() => router.push(\"/settings/complaints\")}\r\n            >\r\n              <Settings className=\"h-4 w-4 mr-2\" />\r\n              Cài đặt\r\n            </Button>\r\n            <DataTableColumnCustomizer<Complaint>\r\n              columns={columns}\r\n              columnVisibility={columnVisibility}\r\n              setColumnVisibility={setColumnVisibility}\r\n              columnOrder={columnOrder}\r\n              setColumnOrder={setColumnOrder}\r\n              pinnedColumns={pinnedColumns}\r\n              setPinnedColumns={setPinnedColumns}\r\n            />\r\n          </div>\r\n\r\n          {/* Filters - Hàng 2: Search + Filters */}\r\n          <PageFilters\r\n            searchValue={searchQuery}\r\n            onSearchChange={setSearchQuery}\r\n            searchPlaceholder=\"Tìm theo đơn hàng, khách hàng, SĐT...\"\r\n          >\r\n            <DataTableFacetedFilter\r\n              title=\"Trạng thái\"\r\n              options={statusOptions}\r\n              selectedValues={statusFilter}\r\n              onSelectedValuesChange={setStatusFilter}\r\n            />\r\n            <DataTableFacetedFilter\r\n              title=\"Loại khiếu nại\"\r\n              options={typeOptions}\r\n              selectedValues={typeFilter}\r\n              onSelectedValuesChange={setTypeFilter}\r\n            />\r\n            {employeeOptions.length > 0 && (\r\n              <DataTableFacetedFilter\r\n                title=\"Nhân viên xử lý\"\r\n                options={employeeOptions}\r\n                selectedValues={assignedToFilter}\r\n                onSelectedValuesChange={setAssignedToFilter}\r\n              />\r\n            )}\r\n            {hasActiveFilters && (\r\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleClearFilters} className=\"h-9\">\r\n                <X className=\"h-4 w-4 mr-1\" />\r\n                Xóa lọc\r\n              </Button>\r\n            )}\r\n          </PageFilters>\r\n\r\n          {/* Data Table */}\r\n          <ResponsiveDataTable\r\n            data={displayData}\r\n            columns={columns}\r\n            rowSelection={rowSelection}\r\n            setRowSelection={setRowSelection}\r\n            allSelectedRows={allSelectedRows}\r\n            columnVisibility={columnVisibility}\r\n            setColumnVisibility={setColumnVisibility}\r\n            columnOrder={columnOrder}\r\n            setColumnOrder={setColumnOrder}\r\n            sorting={sorting ?? { id: 'createdAt', desc: true }}\r\n            setSorting={setSorting}\r\n            pagination={pagination}\r\n            setPagination={setPagination}\r\n            pageCount={pageCount}\r\n            rowCount={filteredComplaints.length}\r\n            pinnedColumns={pinnedColumns}\r\n            setPinnedColumns={setPinnedColumns}\r\n            onRowClick={handleRowClick}\r\n            getRowStyle={getRowStyle}\r\n            bulkActions={bulkActions}\r\n            renderMobileCard={(complaint) => (\r\n              <ComplaintCard\r\n                key={complaint.systemId}\r\n                complaint={complaint}\r\n                onClick={() => handleComplaintClick(complaint)}\r\n                employees={employees}\r\n              />\r\n            )}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* Mobile loading indicator */}\r\n      {isMobile && viewMode === 'table' && (\r\n        <div className=\"py-6 text-center\">\r\n          {mobileLoadedCount < filteredComplaints.length ? (\r\n            <div className=\"flex items-center justify-center gap-2 text-muted-foreground\">\r\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary\"></div>\r\n              <span className=\"text-body-sm\">Đang tải thêm...</span>\r\n            </div>\r\n          ) : filteredComplaints.length > 0 ? (\r\n            <p className=\"text-body-sm text-muted-foreground\">\r\n              Đã hiển thị tất cả {filteredComplaints.length} khiếu nại\r\n            </p>\r\n          ) : null}\r\n        </div>\r\n      )}\r\n\r\n      {/* Empty State */}\r\n      {filteredComplaints.length === 0 && (\r\n        <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n          <AlertCircle className=\"h-12 w-12 text-muted-foreground mb-4\" />\r\n          <h3 className=\"text-h4 font-semibold mb-2\">Chưa có khiếu nại nào</h3>\r\n          <p className=\"text-muted-foreground mb-4\">\r\n            {hasActiveFilters\r\n              ? \"Không tìm thấy khiếu nại phù hợp với bộ lọc\"\r\n              : \"Bắt đầu bằng cách tạo khiếu nại mới\"}\r\n          </p>\r\n          {!hasActiveFilters && (\r\n            <Button onClick={handleCreateComplaint} className=\"h-9\">\r\n              <Plus className=\"h-4 w-4 mr-2\" />\r\n              Tạo khiếu nại đầu tiên\r\n            </Button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Confirm Dialog */}\r\n      <Dialog open={confirmDialog.open} onOpenChange={(open) => setConfirmDialog(prev => ({ ...prev, open }))}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{confirmDialog.title}</DialogTitle>\r\n            <DialogDescription>{confirmDialog.description}</DialogDescription>\r\n          </DialogHeader>\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"h-9\"\r\n              onClick={() => setConfirmDialog(prev => ({ ...prev, open: false }))}\r\n            >\r\n              Hủy\r\n            </Button>\r\n            <Button className=\"h-9\" onClick={confirmDialog.onConfirm}>\r\n              Xác nhận\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Print Options Dialog */}\r\n      <SimplePrintOptionsDialog\r\n        open={printDialogOpen}\r\n        onOpenChange={setPrintDialogOpen}\r\n        onConfirm={handlePrintConfirm}\r\n        selectedCount={itemsToPrint.length}\r\n        title=\"In phiếu khiếu nại\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}