{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { ReceiptType } from './types';\r\nimport { toISODate, getCurrentDate } from '../../../lib/date-utils';\r\n\r\nconst baseStore = createCrudStore<ReceiptType>([], 'receipt-types', {\r\n  businessIdField: 'id',\r\n  apiEndpoint: '/api/settings/data?type=receipt-type',\r\n});\r\n\r\nconst originalAdd = baseStore.getState().add;\r\n\r\nbaseStore.setState((state) => ({\r\n  ...state,\r\n  add: (item) => {\r\n    const newItem = {\r\n      ...item,\r\n      createdAt: item.createdAt ?? toISODate(getCurrentDate()),\r\n    } satisfies Omit<ReceiptType, 'systemId'>;\r\n    return originalAdd(newItem);\r\n  },\r\n}));\r\n\r\nexport const useReceiptTypeStore = baseStore;\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,MAAM,YAAY,IAAA,6IAAe,EAAc,EAAE,EAAE,iBAAiB;IAClE,iBAAiB;IACjB,aAAa;AACf;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAE5C,UAAU,QAAQ,CAAC,CAAC,QAAU,CAAC;QAC7B,GAAG,KAAK;QACR,KAAK,CAAC;YACJ,MAAM,UAAU;gBACd,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,IAAI,IAAA,oIAAS,EAAC,IAAA,yIAAc;YACvD;YACA,OAAO,YAAY;QACrB;IACF,CAAC;AAEM,MAAM,sBAAsB"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/target-groups/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { TargetGroup } from './types';\r\n\r\nexport const useTargetGroupStore = createCrudStore<TargetGroup>([], 'target-groups', {\r\n  apiEndpoint: '/api/settings/data?type=target-group',\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM,sBAAsB,IAAA,6IAAe,EAAc,EAAE,EAAE,iBAAiB;IACnF,aAAa;AACf"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/methods/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { PaymentMethod } from './types';\r\nimport { asSystemId, type SystemId } from '@/lib/id-types';\r\n\r\n// API sync helper\r\nasync function syncToAPI(\r\n  action: 'create' | 'update' | 'delete',\r\n  data: Partial<PaymentMethod>\r\n): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create'\r\n      ? '/api/settings/payment-methods'\r\n      : `/api/settings/payment-methods/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Payment Methods API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\ninterface PaymentMethodState {\r\n  data: PaymentMethod[];\r\n  initialized: boolean;\r\n  add: (item: Omit<PaymentMethod, 'systemId' | 'isDefault'>) => void;\r\n  update: (systemId: SystemId, updatedPolicy: Omit<PaymentMethod, 'isDefault' | 'systemId'>) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  setDefault: (systemId: SystemId) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nexport const usePaymentMethodStore = create<PaymentMethodState>()(\r\n  (set, get) => ({\r\n      data: [],\r\n      initialized: false,\r\n      add: (item) => {\r\n        const newItem: PaymentMethod = { \r\n          ...item, \r\n          systemId: asSystemId(`PM_${Date.now()}`),\r\n          isDefault: get().data.length === 0,\r\n        };\r\n        set((state) => ({ data: [...state.data, newItem] }));\r\n        \r\n        // Sync to API\r\n        syncToAPI('create', newItem).catch(console.error);\r\n      },\r\n      update: (systemId, updatedFields) => {\r\n        set((state) => ({\r\n          data: state.data.map(p => p.systemId === systemId ? { ...p, ...updatedFields } : p),\r\n        }));\r\n        \r\n        // Sync to API\r\n        const updated = get().data.find(p => p.systemId === systemId);\r\n        if (updated) {\r\n          syncToAPI('update', updated).catch(console.error);\r\n        }\r\n      },\r\n      remove: (systemId) => {\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n        set((state) => ({\r\n          data: state.data.filter((p) => p.systemId !== systemId),\r\n        }));\r\n      },\r\n      setDefault: (systemId) => {\r\n        set((state) => ({\r\n          data: state.data.map(p => ({ ...p, isDefault: p.systemId === systemId })),\r\n        }));\r\n        \r\n        // Sync all to API (update default status)\r\n        const data = get().data;\r\n        for (const item of data) {\r\n          syncToAPI('update', item).catch(console.error);\r\n        }\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        \r\n        try {\r\n          // NOTE: Settings data is typically small, but using limit for consistency\r\n          const response = await fetch('/api/settings/payment-methods?limit=30');\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            const data = json.data || json.methods || [];\r\n            if (data.length > 0) {\r\n              set({ data, initialized: true });\r\n            } else {\r\n              set({ initialized: true });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('[Payment Methods Store] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,kBAAkB;AAClB,eAAe,UACb,MAAsC,EACtC,IAA4B;IAE5B,IAAI;QACF,MAAM,WAAW,WAAW,WACxB,kCACA,CAAC,8BAA8B,EAAE,KAAK,QAAQ,EAAE;QACpD,MAAM,SAAS,WAAW,WAAW,SAAS,WAAW,WAAW,UAAU;QAE9E,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC;YACA,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,WAAW,WAAW,KAAK,SAAS,CAAC,QAAQ;QACrD;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,OAAO,OAAO,CAAC,EAAE;QACxD,OAAO;IACT;AACF;AAYO,MAAM,wBAAwB,IAAA,qJAAM,IACzC,CAAC,KAAK,MAAQ,CAAC;QACX,MAAM,EAAE;QACR,aAAa;QACb,KAAK,CAAC;YACJ,MAAM,UAAyB;gBAC7B,GAAG,IAAI;gBACP,UAAU,IAAA,mIAAU,EAAC,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI;gBACvC,WAAW,MAAM,IAAI,CAAC,MAAM,KAAK;YACnC;YACA,IAAI,CAAC,QAAU,CAAC;oBAAE,MAAM;2BAAI,MAAM,IAAI;wBAAE;qBAAQ;gBAAC,CAAC;YAElD,cAAc;YACd,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;QAClD;QACA,QAAQ,CAAC,UAAU;YACjB,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,WAAW;4BAAE,GAAG,CAAC;4BAAE,GAAG,aAAa;wBAAC,IAAI;gBACnF,CAAC;YAED,cAAc;YACd,MAAM,UAAU,MAAM,IAAI,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;YACpD,IAAI,SAAS;gBACX,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;YAClD;QACF;QACA,QAAQ,CAAC;YACP,UAAU,UAAU;gBAAE;YAAS,GAAG,KAAK,CAAC,QAAQ,KAAK;YACrD,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;gBAChD,CAAC;QACH;QACA,YAAY,CAAC;YACX,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;4BAAE,GAAG,CAAC;4BAAE,WAAW,EAAE,QAAQ,KAAK;wBAAS,CAAC;gBACzE,CAAC;YAED,0CAA0C;YAC1C,MAAM,OAAO,MAAM,IAAI;YACvB,KAAK,MAAM,QAAQ,KAAM;gBACvB,UAAU,UAAU,MAAM,KAAK,CAAC,QAAQ,KAAK;YAC/C;QACF;QAEA,aAAa;YACX,IAAI,MAAM,WAAW,EAAE;YAEvB,IAAI;gBACF,0EAA0E;gBAC1E,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,MAAM,OAAO,KAAK,IAAI,IAAI,KAAK,OAAO,IAAI,EAAE;oBAC5C,IAAI,KAAK,MAAM,GAAG,GAAG;wBACnB,IAAI;4BAAE;4BAAM,aAAa;wBAAK;oBAChC,OAAO;wBACL,IAAI;4BAAE,aAAa;wBAAK;oBAC1B;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8CAA8C;YAC9D;QACF;IACF,CAAC"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/types/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { PaymentType } from './types';\r\nimport { toISODate, getCurrentDate } from '../../../../lib/date-utils';\r\n\r\nconst baseStore = createCrudStore<PaymentType>([], 'payment-types', {\r\n  businessIdField: 'id',\r\n  apiEndpoint: '/api/settings/data?type=payment-type',\r\n});\r\n\r\nconst originalAdd = baseStore.getState().add;\r\n\r\nbaseStore.setState((state) => ({\r\n  ...state,\r\n  add: (item) => {\r\n    const newItem = {\r\n      ...item,\r\n      createdAt: item.createdAt ?? toISODate(getCurrentDate()),\r\n    } satisfies Omit<PaymentType, 'systemId'>;\r\n    return originalAdd(newItem);\r\n  },\r\n}));\r\n\r\nexport const usePaymentTypeStore = baseStore;\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,MAAM,YAAY,IAAA,6IAAe,EAAc,EAAE,EAAE,iBAAiB;IAClE,iBAAiB;IACjB,aAAa;AACf;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAE5C,UAAU,QAAQ,CAAC,CAAC,QAAU,CAAC;QAC7B,GAAG,KAAK;QACR,KAAK,CAAC;YACJ,MAAM,UAAU;gBACd,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,IAAI,IAAA,oIAAS,EAAC,IAAA,yIAAc;YACvD;YACA,OAAO,YAAY;QACrB;IACF,CAAC;AAEM,MAAM,sBAAsB"}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/api/payment-methods-api.ts"],"sourcesContent":["/**\r\n * Payment Methods API functions\r\n * \r\n * ‚ö†Ô∏è Direct import: import { fetchPaymentMethods } from '@/features/settings/payments/api/payment-methods-api'\r\n */\r\n\r\n// PaymentMethod type matching API response (includes isDefault from API transformation)\r\nexport interface PaymentMethod {\r\n  systemId: string;\r\n  id: string;\r\n  name: string;\r\n  code?: string;\r\n  type?: string;\r\n  isActive: boolean;\r\n  isDefault: boolean;\r\n  // Bank account info (for transfer methods)\r\n  accountNumber?: string;\r\n  accountName?: string;\r\n  bankName?: string;\r\n  createdAt?: Date;\r\n  updatedAt?: Date;\r\n}\r\n\r\nconst BASE_URL = '/api/settings/payment-methods';\r\n\r\nexport interface PaymentMethodsParams {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  isActive?: boolean;\r\n  type?: string;\r\n  sortBy?: string;\r\n  sortOrder?: 'asc' | 'desc';\r\n}\r\n\r\nexport interface PaymentMethodsResponse {\r\n  data: PaymentMethod[];\r\n  total: number;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nexport async function fetchPaymentMethods(params: PaymentMethodsParams = {}): Promise<PaymentMethodsResponse> {\r\n  const searchParams = new URLSearchParams();\r\n  \r\n  if (params.page) searchParams.set('page', String(params.page));\r\n  if (params.limit) searchParams.set('limit', String(params.limit));\r\n  if (params.search) searchParams.set('search', params.search);\r\n  if (params.isActive !== undefined) searchParams.set('isActive', String(params.isActive));\r\n  if (params.type) searchParams.set('type', params.type);\r\n  if (params.sortBy) searchParams.set('sortBy', params.sortBy);\r\n  if (params.sortOrder) searchParams.set('sortOrder', params.sortOrder);\r\n  \r\n  const url = searchParams.toString() ? `${BASE_URL}?${searchParams}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch payment methods: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function fetchPaymentMethod(systemId: string): Promise<PaymentMethod> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch payment method: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function createPaymentMethod(data: Omit<PaymentMethod, 'systemId' | 'createdAt' | 'updatedAt'>): Promise<PaymentMethod> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to create payment method');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function updatePaymentMethod(systemId: string, data: Partial<PaymentMethod>): Promise<PaymentMethod> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to update payment method');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function deletePaymentMethod(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to delete payment method: ${response.statusText}`);\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC,GAED,wFAAwF;;;;;;;;;;;;;AAiBxF,MAAM,WAAW;AAmBV,eAAe,oBAAoB,SAA+B,CAAC,CAAC;IACzE,MAAM,eAAe,IAAI;IAEzB,IAAI,OAAO,IAAI,EAAE,aAAa,GAAG,CAAC,QAAQ,OAAO,OAAO,IAAI;IAC5D,IAAI,OAAO,KAAK,EAAE,aAAa,GAAG,CAAC,SAAS,OAAO,OAAO,KAAK;IAC/D,IAAI,OAAO,MAAM,EAAE,aAAa,GAAG,CAAC,UAAU,OAAO,MAAM;IAC3D,IAAI,OAAO,QAAQ,KAAK,WAAW,aAAa,GAAG,CAAC,YAAY,OAAO,OAAO,QAAQ;IACtF,IAAI,OAAO,IAAI,EAAE,aAAa,GAAG,CAAC,QAAQ,OAAO,IAAI;IACrD,IAAI,OAAO,MAAM,EAAE,aAAa,GAAG,CAAC,UAAU,OAAO,MAAM;IAC3D,IAAI,OAAO,SAAS,EAAE,aAAa,GAAG,CAAC,aAAa,OAAO,SAAS;IAEpE,MAAM,MAAM,aAAa,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,cAAc,GAAG;IACtE,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,iCAAiC,EAAE,SAAS,UAAU,EAAE;IAC3E;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,mBAAmB,QAAgB;IACvD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IAEtD,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,gCAAgC,EAAE,SAAS,UAAU,EAAE;IAC1E;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,oBAAoB,IAAiE;IACzG,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,oBAAoB,QAAgB,EAAE,IAA4B;IACtF,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,oBAAoB,QAAgB;IACxD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,iCAAiC,EAAE,SAAS,UAAU,EAAE;IAC3E;AACF"}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/hooks/use-payment-methods.ts"],"sourcesContent":["/**\r\n * usePaymentMethods - React Query hooks\r\n * \r\n * ‚ö†Ô∏è Direct import: import { usePaymentMethods } from '@/features/settings/payments/hooks/use-payment-methods'\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\r\nimport {\r\n  fetchPaymentMethods,\r\n  fetchPaymentMethod,\r\n  createPaymentMethod,\r\n  updatePaymentMethod,\r\n  deletePaymentMethod,\r\n  type PaymentMethodsParams,\r\n  type PaymentMethod,\r\n} from '../api/payment-methods-api';\r\n\r\nexport const paymentMethodKeys = {\r\n  all: ['payment-methods'] as const,\r\n  lists: () => [...paymentMethodKeys.all, 'list'] as const,\r\n  list: (params: PaymentMethodsParams) => [...paymentMethodKeys.lists(), params] as const,\r\n  details: () => [...paymentMethodKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...paymentMethodKeys.details(), id] as const,\r\n};\r\n\r\nexport function usePaymentMethods(params: PaymentMethodsParams = {}) {\r\n  return useQuery({\r\n    queryKey: paymentMethodKeys.list(params),\r\n    queryFn: () => fetchPaymentMethods(params),\r\n    staleTime: 10 * 60 * 1000,\r\n    gcTime: 60 * 60 * 1000,\r\n    placeholderData: keepPreviousData,\r\n  });\r\n}\r\n\r\nexport function usePaymentMethod(id: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: paymentMethodKeys.detail(id!),\r\n    queryFn: () => fetchPaymentMethod(id!),\r\n    enabled: !!id,\r\n    staleTime: 10 * 60 * 1000,\r\n  });\r\n}\r\n\r\ninterface UsePaymentMethodMutationsOptions {\r\n  onCreateSuccess?: (method: PaymentMethod) => void;\r\n  onUpdateSuccess?: (method: PaymentMethod) => void;\r\n  onDeleteSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function usePaymentMethodMutations(options: UsePaymentMethodMutationsOptions = {}) {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const create = useMutation({\r\n    mutationFn: createPaymentMethod,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: paymentMethodKeys.all });\r\n      options.onCreateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: Partial<PaymentMethod> }) => \r\n      updatePaymentMethod(systemId, data),\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: paymentMethodKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: paymentMethodKeys.lists() });\r\n      options.onUpdateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: deletePaymentMethod,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: paymentMethodKeys.all });\r\n      options.onDeleteSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  return { create, update, remove };\r\n}\r\n\r\nexport function useActivePaymentMethods() {\r\n  return usePaymentMethods({ isActive: true, limit: 50 });\r\n}\r\n\r\nexport function useAllPaymentMethods() {\r\n  return usePaymentMethods({ limit: 50 });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;CAIC,GAED;AAAA;AAAA;AAAA;AACA;;;;AAUO,MAAM,oBAAoB;IAC/B,KAAK;QAAC;KAAkB;IACxB,OAAO,IAAM;eAAI,kBAAkB,GAAG;YAAE;SAAO;IAC/C,MAAM,CAAC,SAAiC;eAAI,kBAAkB,KAAK;YAAI;SAAO;IAC9E,SAAS,IAAM;eAAI,kBAAkB,GAAG;YAAE;SAAS;IACnD,QAAQ,CAAC,KAAe;eAAI,kBAAkB,OAAO;YAAI;SAAG;AAC9D;AAEO,SAAS,kBAAkB,SAA+B,CAAC,CAAC;;IACjE,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,kBAAkB,IAAI,CAAC;QACjC,OAAO;0CAAE,IAAM,IAAA,8LAAmB,EAAC;;QACnC,WAAW,KAAK,KAAK;QACrB,QAAQ,KAAK,KAAK;QAClB,iBAAiB,8LAAgB;IACnC;AACF;GARgB;;QACP,0LAAQ;;;AASV,SAAS,iBAAiB,EAA6B;;IAC5D,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,kBAAkB,MAAM,CAAC;QACnC,OAAO;yCAAE,IAAM,IAAA,6LAAkB,EAAC;;QAClC,SAAS,CAAC,CAAC;QACX,WAAW,KAAK,KAAK;IACvB;AACF;IAPgB;;QACP,0LAAQ;;;AAeV,SAAS,0BAA0B,UAA4C,CAAC,CAAC;;IACtF,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,8LAAmB;QAC/B,SAAS;6DAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,kBAAkB,GAAG;gBAAC;gBAChE,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;6DAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAsD,GACjF,IAAA,8LAAmB,EAAC,UAAU;;QAChC,SAAS;6DAAE,CAAC,MAAM;gBAChB,YAAY,iBAAiB,CAAC;oBAAE,UAAU,kBAAkB,MAAM,CAAC,UAAU,QAAQ;gBAAE;gBACvF,YAAY,iBAAiB,CAAC;oBAAE,UAAU,kBAAkB,KAAK;gBAAG;gBACpE,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,8LAAmB;QAC/B,SAAS;6DAAE;gBACT,YAAY,iBAAiB,CAAC;oBAAE,UAAU,kBAAkB,GAAG;gBAAC;gBAChE,QAAQ,eAAe;YACzB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QAAE;QAAQ;QAAQ;IAAO;AAClC;IAjCgB;;QACM,2MAAc;QAEnB,gMAAW;QASX,gMAAW;QAWX,gMAAW;;;AAYrB,SAAS;;IACd,OAAO,kBAAkB;QAAE,UAAU;QAAM,OAAO;IAAG;AACvD;IAFgB;;QACP;;;AAGF,SAAS;;IACd,OAAO,kBAAkB;QAAE,OAAO;IAAG;AACvC;IAFgB;;QACP"}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/hooks/use-all-payment-methods.ts"],"sourcesContent":["/**\r\n * useAllPaymentMethods - Convenience hook for components needing all methods as flat array\r\n */\r\n\r\nimport { usePaymentMethods } from './use-payment-methods';\r\n\r\nexport function useAllPaymentMethods() {\r\n  const query = usePaymentMethods({});\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\nexport function useDefaultPaymentMethod() {\r\n  const { data, isLoading } = useAllPaymentMethods();\r\n  const defaultMethod = data.find(pm => (pm as any).isDefault);\r\n  \r\n  return { defaultMethod, isLoading };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;CAEC,GAED;;;AAEO,SAAS;;IACd,MAAM,QAAQ,IAAA,8LAAiB,EAAC,CAAC;IAEjC,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GATgB;;QACA,8LAAiB;;;AAU1B,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAC5B,MAAM,gBAAgB,KAAK,IAAI,CAAC,CAAA,KAAM,AAAC,GAAW,SAAS;IAE3D,OAAO;QAAE;QAAe;IAAU;AACpC;IALgB;;QACc"}},
    {"offset": {"line": 490, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/shipping/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { ShippingPartner } from './types';\r\nimport Fuse from 'fuse.js';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\n// FIX: Replaced import from a non-existent module and replaced it with a mock function.\r\nconst connectPartner = async (partnerId: string, credentials: any): Promise<{ success: boolean; message: string }> => {\r\n    console.log(`Connecting to ${partnerId} with`, credentials);\r\n    // Simulate success for known partners if they have credentials.\r\n    if (credentials && Object.values(credentials).every(v => v)) {\r\n        return { success: true, message: 'K·∫øt n·ªëi th√†nh c√¥ng.' };\r\n    }\r\n    return { success: false, message: 'Th√¥ng tin k·∫øt n·ªëi kh√¥ng h·ª£p l·ªá.' };\r\n};\r\n\r\ntype ShippingPartnerStoreExtension = {\r\n    searchShippingPartners: (query: string, page: number, limit?: number | undefined) => Promise<{ items: { value: string; label: string }[], hasNextPage: boolean }>;\r\n    connect: (systemId: SystemId, credentials: Record<string, any>) => Promise<{ success: boolean; message: string }>;\r\n    disconnect: (systemId: SystemId) => void;\r\n};\r\n\r\nconst baseStore = createCrudStore<ShippingPartner>([], 'shipping-partners', {\r\n  // ‚ö†Ô∏è DEPRECATED: Store n√†y kh√¥ng c√≤n d√πng ƒë·ªÉ l∆∞u credentials n·ªØa\r\n  // Credentials gi·ªù ƒë∆∞·ª£c l∆∞u trong database\r\n  apiEndpoint: '/api/settings/data?type=shipping-partner',\r\n});\r\n\r\nconst fuse = new Fuse(baseStore.getState().data, {\r\n    keys: ['name', 'id', 'phone'],\r\n    threshold: 0.3,\r\n});\r\n\r\nconst storeExtension: ShippingPartnerStoreExtension = {\r\n    searchShippingPartners: async (query: string, page: number, limit: number = 20) => {\r\n        return new Promise(resolve => {\r\n            setTimeout(() => {\r\n                const allPartners = baseStore.getState().data;\r\n                const results = query ? fuse.search(query).map(r => r.item) : allPartners;\r\n                \r\n                const start = (page - 1) * limit;\r\n                const end = start + limit;\r\n                const paginatedItems = results.slice(start, end);\r\n\r\n                resolve({\r\n                    items: paginatedItems.map(p => ({ value: p.systemId, label: p.name })),\r\n                    hasNextPage: end < results.length,\r\n                });\r\n            }, 300);\r\n        });\r\n    },\r\n    connect: async (systemId: SystemId, credentials: Record<string, any>) => {\r\n        // ‚ö†Ô∏è DEPRECATED: Kh√¥ng n√™n d√πng h√†m n√†y n·ªØa\r\n        // Vui l√≤ng c·∫•u h√¨nh trong Settings ‚Üí ƒê·ªëi t√°c v·∫≠n chuy·ªÉn\r\n        // Credentials s·∫Ω ƒë∆∞·ª£c l∆∞u v√†o shipping_partners_config\r\n        console.warn('[ShippingPartnerStore] connect() is deprecated. Use shipping_partners_config instead.');\r\n        \r\n        const partner = baseStore.getState().findById(systemId);\r\n        if (!partner) return { success: false, message: 'Kh√¥ng t√¨m th·∫•y ƒë·ªëi t√°c v·∫≠n chuy·ªÉn.' };\r\n        \r\n        console.log('[ShippingPartnerStore] Connecting partner:', { systemId, credentials });\r\n        \r\n        const result = { success: true, message: 'K·∫øt n·ªëi th√†nh c√¥ng.' };\r\n        \r\n        if (result.success) {\r\n            baseStore.setState(state => {\r\n                const newData = state.data.map(p => \r\n                    p.systemId === systemId \r\n                    ? { ...p, isConnected: true, status: 'ƒêang h·ª£p t√°c' as const, credentials } \r\n                    : p\r\n                );\r\n                \r\n                console.log('[ShippingPartnerStore] Updated partner:', newData.find(p => p.systemId === systemId));\r\n                \r\n                return { data: newData };\r\n            });\r\n        }\r\n        return result;\r\n    },\r\n    disconnect: (systemId: SystemId) => {\r\n        // ‚ö†Ô∏è DEPRECATED: Kh√¥ng n√™n d√πng h√†m n√†y n·ªØa\r\n        console.warn('[ShippingPartnerStore] disconnect() is deprecated. Use shipping_partners_config instead.');\r\n        \r\n        baseStore.setState(state => ({\r\n            data: state.data.map(p => \r\n                p.systemId === systemId \r\n                ? { ...p, isConnected: false, status: 'Ng·ª´ng h·ª£p t√°c', credentials: {}, configuration: {} } \r\n                : p\r\n            )\r\n        }));\r\n    },\r\n};\r\n\r\nbaseStore.setState(storeExtension as any);\r\n\r\ntype ShippingPartnerStoreState = ReturnType<typeof baseStore.getState> & ShippingPartnerStoreExtension;\r\n\r\n// Export with proper Zustand hook typing\r\nexport const useShippingPartnerStore: {\r\n  (): ShippingPartnerStoreState;\r\n  <U>(selector: (state: ShippingPartnerStoreState) => U): U;\r\n  getState: () => ShippingPartnerStoreState;\r\n  setState: typeof baseStore.setState;\r\n  subscribe: typeof baseStore.subscribe;\r\n} = baseStore as any;\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAGA,wFAAwF;AACxF,MAAM,iBAAiB,OAAO,WAAmB;IAC7C,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,UAAU,KAAK,CAAC,EAAE;IAC/C,gEAAgE;IAChE,IAAI,eAAe,OAAO,MAAM,CAAC,aAAa,KAAK,CAAC,CAAA,IAAK,IAAI;QACzD,OAAO;YAAE,SAAS;YAAM,SAAS;QAAsB;IAC3D;IACA,OAAO;QAAE,SAAS;QAAO,SAAS;IAAkC;AACxE;AAQA,MAAM,YAAY,IAAA,6IAAe,EAAkB,EAAE,EAAE,qBAAqB;IAC1E,iEAAiE;IACjE,0CAA0C;IAC1C,aAAa;AACf;AAEA,MAAM,OAAO,IAAI,yJAAI,CAAC,UAAU,QAAQ,GAAG,IAAI,EAAE;IAC7C,MAAM;QAAC;QAAQ;QAAM;KAAQ;IAC7B,WAAW;AACf;AAEA,MAAM,iBAAgD;IAClD,wBAAwB,OAAO,OAAe,MAAc,QAAgB,EAAE;QAC1E,OAAO,IAAI,QAAQ,CAAA;YACf,WAAW;gBACP,MAAM,cAAc,UAAU,QAAQ,GAAG,IAAI;gBAC7C,MAAM,UAAU,QAAQ,KAAK,MAAM,CAAC,OAAO,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI;gBAE9D,MAAM,QAAQ,CAAC,OAAO,CAAC,IAAI;gBAC3B,MAAM,MAAM,QAAQ;gBACpB,MAAM,iBAAiB,QAAQ,KAAK,CAAC,OAAO;gBAE5C,QAAQ;oBACJ,OAAO,eAAe,GAAG,CAAC,CAAA,IAAK,CAAC;4BAAE,OAAO,EAAE,QAAQ;4BAAE,OAAO,EAAE,IAAI;wBAAC,CAAC;oBACpE,aAAa,MAAM,QAAQ,MAAM;gBACrC;YACJ,GAAG;QACP;IACJ;IACA,SAAS,OAAO,UAAoB;QAChC,4CAA4C;QAC5C,wDAAwD;QACxD,uDAAuD;QACvD,QAAQ,IAAI,CAAC;QAEb,MAAM,UAAU,UAAU,QAAQ,GAAG,QAAQ,CAAC;QAC9C,IAAI,CAAC,SAAS,OAAO;YAAE,SAAS;YAAO,SAAS;QAAqC;QAErF,QAAQ,GAAG,CAAC,8CAA8C;YAAE;YAAU;QAAY;QAElF,MAAM,SAAS;YAAE,SAAS;YAAM,SAAS;QAAsB;QAE/D,IAAI,OAAO,OAAO,EAAE;YAChB,UAAU,QAAQ,CAAC,CAAA;gBACf,MAAM,UAAU,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAC3B,EAAE,QAAQ,KAAK,WACb;wBAAE,GAAG,CAAC;wBAAE,aAAa;wBAAM,QAAQ;wBAAyB;oBAAY,IACxE;gBAGN,QAAQ,GAAG,CAAC,2CAA2C,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;gBAExF,OAAO;oBAAE,MAAM;gBAAQ;YAC3B;QACJ;QACA,OAAO;IACX;IACA,YAAY,CAAC;QACT,4CAA4C;QAC5C,QAAQ,IAAI,CAAC;QAEb,UAAU,QAAQ,CAAC,CAAA,QAAS,CAAC;gBACzB,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IACjB,EAAE,QAAQ,KAAK,WACb;wBAAE,GAAG,CAAC;wBAAE,aAAa;wBAAO,QAAQ;wBAAiB,aAAa,CAAC;wBAAG,eAAe,CAAC;oBAAE,IACxF;YAEV,CAAC;IACL;AACJ;AAEA,UAAU,QAAQ,CAAC;AAKZ,MAAM,0BAMT"}},
    {"offset": {"line": 602, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/shipping/integrations/ghtk-service.ts"],"sourcesContent":["/**\r\n * GHTK (Giao H√†ng Ti·∫øt Ki·ªám) API Integration Service\r\n * Documentation: https://api.ghtk.vn/\r\n */\r\n\r\nimport { getBaseUrl } from '@/lib/api-config';\r\n\r\n// ‚úÖ Use local proxy server to avoid CORS\r\nconst GHTK_BASE_URL = `${getBaseUrl()}/api/shipping/ghtk`;\r\n\r\n// GHTK API Response types\r\nexport type GHTKShippingFeeResponse = {\r\n  success: boolean;\r\n  message: string;\r\n  fee: {\r\n    name: string; // area1, area2, area3\r\n    fee: number; // Ph√≠ v·∫≠n chuy·ªÉn (VNƒê)\r\n    insurance_fee: number; // Ph√≠ khai gi√° (VNƒê)\r\n    delivery: boolean; // H·ªó tr·ª£ giao h√†ng\r\n    delivery_type?: string | undefined;\r\n    extFees?: Array<{\r\n      display: string;\r\n      title: string;\r\n      amount: number;\r\n      type: string;\r\n    }> | undefined;\r\n  };\r\n};\r\n\r\nexport type GHTKCreateOrderResponse = {\r\n  success: boolean;\r\n  message: string;\r\n  order?: {\r\n    partner_id: string;\r\n    label: string; // M√£ v·∫≠n ƒë∆°n GHTK\r\n    area: string;\r\n    fee: string;\r\n    insurance_fee: string;\r\n    tracking_id: number;\r\n    estimated_pick_time: string;\r\n    estimated_deliver_time: string;\r\n    status_id: number;\r\n  } | undefined;\r\n  error?: {\r\n    code: string;\r\n    partner_id?: string | undefined;\r\n    ghtk_label?: string | undefined;\r\n    created?: string | undefined;\r\n    status?: number | undefined;\r\n  } | undefined;\r\n};\r\n\r\nexport type GHTKOrderStatusResponse = {\r\n  success: boolean;\r\n  message: string;\r\n  order?: {\r\n    label_id: string; // M√£ GHTK\r\n    partner_id: string; // M√£ ƒë·ªëi t√°c\r\n    status: string; // M√£ tr·∫°ng th√°i\r\n    status_text: string;\r\n    created: string;\r\n    modified: string;\r\n    message: string;\r\n    pick_date: string;\r\n    deliver_date: string;\r\n    customer_fullname: string;\r\n    customer_tel: string;\r\n    address: string;\r\n    storage_day: number;\r\n    ship_money: number;\r\n    insurance: number;\r\n    value: number;\r\n    weight: number;\r\n    pick_money: number;\r\n    is_freeship: number;\r\n  } | undefined;\r\n};\r\n\r\nexport type GHTKCreateOrderParams = {\r\n  // Th√¥ng tin ƒë∆°n h√†ng\r\n  orderId: string; // M√£ ƒë∆°n h√†ng c·ªßa shop\r\n  \r\n  // ƒêi·ªÉm l·∫•y h√†ng\r\n  pickAddressId?: string | undefined; // ID kho l·∫•y h√†ng t·ª´ GHTK (n·∫øu c√≥ - ∆∞u ti√™n d√πng)\r\n  pickName?: string | undefined; // ‚ö†Ô∏è REQUIRED - T√™n ng∆∞·ªùi g·ª≠i (c·∫ßn c·∫£ khi c√≥ pickAddressId)\r\n  pickAddress?: string | undefined; // ‚ö†Ô∏è REQUIRED - ƒê·ªãa ch·ªâ l·∫•y h√†ng (c·∫ßn c·∫£ khi c√≥ pickAddressId!)\r\n  pickTel?: string | undefined; // ‚ö†Ô∏è REQUIRED - SƒêT ng∆∞·ªùi g·ª≠i (c·∫ßn c·∫£ khi c√≥ pickAddressId)\r\n  pickProvince?: string | undefined; // Ch·ªâ c·∫ßn khi KH√îNG c√≥ pickAddressId\r\n  pickDistrict?: string | undefined; // Ch·ªâ c·∫ßn khi KH√îNG c√≥ pickAddressId\r\n  pickWard?: string | undefined; // Ch·ªâ c·∫ßn khi KH√îNG c√≥ pickAddressId\r\n  pickStreet?: string | undefined; // Ch·ªâ c·∫ßn khi KH√îNG c√≥ pickAddressId\r\n  \r\n  // ƒêi·ªÉm giao h√†ng\r\n  customerName: string;\r\n  customerAddress: string;\r\n  customerProvince: string;\r\n  customerDistrict: string;\r\n  customerWard: string;\r\n  customerStreet?: string | undefined;\r\n  customerTel: string;\r\n  customerHamlet?: string | undefined; // Th√¥n/·∫•p (n·∫øu kh√¥ng c√≥ street)\r\n  \r\n  // Th√¥ng tin h√†ng h√≥a\r\n  products: Array<{\r\n    name: string;\r\n    weight: number; // KG\r\n    quantity: number;\r\n    price?: number | undefined;\r\n    productCode?: string | undefined;\r\n    height?: number | undefined; // cm\r\n    width?: number | undefined; // cm\r\n    length?: number | undefined; // cm\r\n  }>;\r\n  \r\n  // Th√¥ng tin thanh to√°n\r\n  pickMoney: number; // Ti·ªÅn CoD\r\n  value: number; // Gi√° tr·ªã khai gi√°\r\n  isFreeship?: number | boolean | undefined; // Shop tr·∫£ ship hay kh√¥ng (0/1 or false/true)\r\n  failedDeliveryFee?: number | undefined; // ‚úÖ S·ªë ti·ªÅn thu khi kh√¥ng giao ƒë∆∞·ª£c (tag 19) - S·∫Ω map sang not_delivered_fee\r\n  \r\n  // Th√¥ng tin b·ªï sung\r\n  note?: string | undefined;\r\n  transport?: 'road' | 'fly' | undefined; // ƒê∆∞·ªùng b·ªô ho·∫∑c bay\r\n  tags?: number[] | undefined; // Nh√£n ƒë∆°n h√†ng\r\n  weightOption?: 'gram' | 'kilogram' | undefined; // ƒê∆°n v·ªã kh·ªëi l∆∞·ª£ng\r\n  totalWeight?: number | undefined; // T·ªïng kh·ªëi l∆∞·ª£ng (theo weightOption)\r\n  totalBox?: number | undefined; // ‚úÖ T·ªïng s·ªë ki·ªán h√†ng\r\n  \r\n  // Ng√†y gi·ªù\r\n  pickDate?: string | undefined; // YYYY/MM/DD (format: YYYY-MM-DD)\r\n  deliverDate?: string | undefined; // YYYY/MM/DD\r\n  pickWorkShift?: 1 | 2 | undefined; // 1=s√°ng, 2=chi·ªÅu\r\n  deliverWorkShift?: 1 | 2 | undefined; // 1=s√°ng, 2=chi·ªÅu\r\n};\r\n\r\nexport type GHTKCalculateFeeParams = {\r\n  // ƒêi·ªÉm l·∫•y h√†ng\r\n  pickProvince: string;\r\n  pickDistrict: string;\r\n  pickWard?: string | undefined;\r\n  \r\n  // ƒêi·ªÉm giao h√†ng\r\n  province: string;\r\n  district: string;\r\n  ward?: string | undefined;\r\n  address?: string | undefined;\r\n  \r\n  // Th√¥ng tin h√†ng h√≥a\r\n  weight: number; // KG (not gram!) - GHTK API uses KG\r\n  value?: number | undefined; // Gi√° tr·ªã khai gi√° (VNƒê)\r\n  transport?: 'road' | 'fly' | undefined;\r\n  tags?: number[] | undefined;\r\n};\r\n\r\n/**\r\n * GHTK Service Class\r\n */\r\nexport class GHTKService {\r\n  private apiToken: string;\r\n  private partnerCode: string;\r\n\r\n  constructor(apiToken: string, partnerCode: string = '') {\r\n    this.apiToken = apiToken;\r\n    this.partnerCode = partnerCode;\r\n  }\r\n\r\n  /**\r\n   * T√≠nh ph√≠ v·∫≠n chuy·ªÉn\r\n   */\r\n  async calculateShippingFee(\r\n    params: GHTKCalculateFeeParams\r\n  ): Promise<GHTKShippingFeeResponse> {\r\n    // ‚úÖ Call through proxy server\r\n    const payload = {\r\n      apiToken: this.apiToken,\r\n      partnerCode: this.partnerCode,\r\n      pick_province: params.pickProvince,\r\n      pick_district: params.pickDistrict,\r\n      pick_ward: params.pickWard,\r\n      province: params.province,\r\n      district: params.district,\r\n      ward: params.ward,\r\n      address: params.address,\r\n      weight: params.weight * 1000, // ‚úÖ Convert KG to GRAM for fee API\r\n      value: params.value,\r\n      transport: params.transport,\r\n      tags: params.tags,\r\n    };\r\n\r\n    const response = await fetch(`${GHTK_BASE_URL}/calculate-fee`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      throw new Error(errorData.error || `GHTK API Error: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    return await response.json();\r\n  }\r\n\r\n  /**\r\n   * T·∫°o ƒë∆°n h√†ng m·ªõi\r\n   */\r\n  async createOrder(\r\n    params: GHTKCreateOrderParams\r\n  ): Promise<GHTKCreateOrderResponse> {\r\n    // ‚ö†Ô∏è GHTK limitation: Cannot create orders >= 20,000 gram (20kg)\r\n    const totalWeightGram = params.totalWeight || params.products.reduce((sum, p) => sum + (p.weight * p.quantity), 0);\r\n    \r\n    if (totalWeightGram >= 20000) {\r\n      throw new Error(`GHTK kh√¥ng h·ªó tr·ª£ ƒë∆°n h√†ng ‚â•20kg (${totalWeightGram}g). Vui l√≤ng li√™n h·ªá GHTK ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ d·ªãch v·ª• BBS cho h√†ng n·∫∑ng.`);\r\n    }\r\n    \r\n    // ‚úÖ Call through proxy server\r\n    console.log('[GHTKService.createOrder] pickAddressId:', params.pickAddressId, 'type:', typeof params.pickAddressId);\r\n    \r\n    const payload: any = {\r\n      apiToken: this.apiToken,\r\n      partnerCode: this.partnerCode,\r\n      \r\n      // ‚ö†Ô∏è CRITICAL GHTK API STRUCTURE - UPDATED:\r\n      // According to GHTK API behavior (error 30207 testing):\r\n      // \r\n      // pick_address_id = ID c·ªßa KHO GHTK (t·ª´ API /services/shipment/list_pick_address_id)\r\n      // \r\n      // ‚ö†Ô∏è IMPORTANT: Ngay c·∫£ khi c√≥ pick_address_id, GHTK V·∫™N Y√äU C·∫¶U ƒë·∫ßy ƒë·ªß th√¥ng tin ƒë·ªãa ch·ªâ!\r\n      //    - Ph·∫£i g·ª≠i: pick_name, pick_address, pick_province, pick_district, pick_tel\r\n      //    - pick_address_id CH·ªà d√πng ƒë·ªÉ x√°c ƒë·ªãnh kho ∆∞u ti√™n, KH√îNG thay th·∫ø ƒë·ªãa ch·ªâ chi ti·∫øt\r\n      //    - N·∫øu thi·∫øu pick_address ‚Üí Error 30207 \"Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ l·∫•y h√†ng h√≥a\"\r\n      \r\n      // ‚úÖ Pickup info - ALWAYS send full address details\r\n      pick_name: params.pickName || 'Ng∆∞·ªùi g·ª≠i', // ‚ö†Ô∏è REQUIRED\r\n      pick_address: params.pickAddress || '', // ‚ö†Ô∏è REQUIRED - ƒë·ªãa ch·ªâ chi ti·∫øt kho\r\n      pick_province: params.pickProvince || '', // ‚ö†Ô∏è REQUIRED\r\n      pick_district: params.pickDistrict || '', // ‚ö†Ô∏è REQUIRED\r\n      pick_ward: params.pickWard || '',\r\n      pick_tel: params.pickTel || '', // ‚ö†Ô∏è REQUIRED\r\n      \r\n      // ‚úÖ pick_address_id is OPTIONAL, only add if available\r\n      ...(params.pickAddressId ? {\r\n        pick_address_id: params.pickAddressId, // ID kho GHTK (optional but recommended)\r\n      } : {}),\r\n      \r\n      // ‚úÖ Customer/Recipient info (always use generic field names)\r\n      name: params.customerName,\r\n      address: params.customerAddress,\r\n      province: params.customerProvince,\r\n      district: params.customerDistrict,\r\n      ward: params.customerWard,\r\n      street: params.customerStreet,\r\n      hamlet: params.customerHamlet || 'Kh√°c',\r\n      tel: params.customerTel,\r\n      \r\n      // Order info\r\n      id: params.orderId,\r\n      products: params.products.map(p => ({\r\n        name: p.name,\r\n        weight: p.weight, // ‚úÖ Already in GRAM from order-form-page\r\n        quantity: p.quantity,\r\n        product_code: p.productCode || 'DEFAULT',\r\n        price: p.price || 0, // ‚úÖ Add price\r\n      })),\r\n      total_weight: params.totalWeight, // ‚úÖ Already in GRAM\r\n      weight_option: 'gram', // ‚úÖ GHTK requires this\r\n      total_box: params.totalBox, // ‚úÖ Total number of boxes\r\n      value: params.value,\r\n      transport: params.transport || 'road',\r\n      pick_option: 'cod', // ‚úÖ GHTK requires this\r\n      note: params.note,\r\n      \r\n      // Payment\r\n      is_freeship: params.isFreeship === 1 || params.isFreeship === true ? 1 : 0, // ‚úÖ Force convert to 0 or 1\r\n      pick_money: params.pickMoney || 0,  // ‚úÖ ALWAYS use pickMoney for COD\r\n      \r\n      // ‚úÖ NEW: not_delivered_fee field for tag 19 (Kh√¥ng giao ƒë∆∞·ª£c thu ph√≠)\r\n      // According to GHTK docs: Must pass not_delivered_fee when using tag 19\r\n      // Range: 0 < not_delivered_fee <= 20,000,000\r\n      ...(params.tags?.includes(19) && params.failedDeliveryFee ? {\r\n        not_delivered_fee: params.failedDeliveryFee\r\n      } : {}),\r\n      \r\n      // ‚úÖ Dates & shifts\r\n      pick_date: params.pickDate, // YYYY-MM-DD format\r\n      deliver_date: params.deliverDate, // YYYY-MM-DD format\r\n      pick_work_shift: params.pickWorkShift, // 1=s√°ng, 2=chi·ªÅu\r\n      deliver_work_shift: params.deliverWorkShift, // 1=s√°ng, 2=chi·ªÅu\r\n      \r\n      // Tags\r\n      tags: params.tags,\r\n    };\r\n\r\n    console.log('üì§ [GHTKService] FINAL payload before sending to GHTK:', JSON.stringify(payload, null, 2));\r\n\r\n    const response = await fetch(`${GHTK_BASE_URL}/submit-order`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    console.log('üì° [GHTKService] Response status:', response.status);\r\n    console.log('üì° [GHTKService] Response ok:', response.ok);\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      console.error('üì° [GHTKService] Error data:', errorData);\r\n      throw new Error(errorData.error || errorData.message || `GHTK API Error: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('üì° [GHTKService] Response data:', data);\r\n    \r\n    // ‚úÖ Handle GHTK error response (success: false)\r\n    if (!data.success) {\r\n      console.error('üì° [GHTKService] API returned error:', data.message);\r\n      throw new Error(data.message || 'GHTK API returned error');\r\n    }\r\n    \r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Ki·ªÉm tra tr·∫°ng th√°i ƒë∆°n h√†ng\r\n   */\r\n  async getOrderStatus(\r\n    trackingCode: string\r\n  ): Promise<GHTKOrderStatusResponse> {\r\n    const url = `${GHTK_BASE_URL}/services/shipment/v2/${trackingCode}`;\r\n\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Token': this.apiToken,\r\n        'X-Client-Source': this.partnerCode,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`GHTK API Error: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    return await response.json();\r\n  }\r\n\r\n  /**\r\n   * In nh√£n ƒë∆°n h√†ng (shipping label)\r\n   */\r\n  async printLabel(trackingCode: string): Promise<{ success: boolean; label?: string; message: string }> {\r\n    const url = `${GHTK_BASE_URL}/services/label/${trackingCode}`;\r\n\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Token': this.apiToken,\r\n        'X-Client-Source': this.partnerCode,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`GHTK API Error: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    return await response.json();\r\n  }\r\n\r\n  /**\r\n   * H·ªßy ƒë∆°n h√†ng\r\n   */\r\n  async cancelOrder(trackingCode: string): Promise<{ success: boolean; message: string }> {\r\n    const url = `${GHTK_BASE_URL}/services/shipment/cancel/${trackingCode}`;\r\n\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Token': this.apiToken,\r\n        'X-Client-Source': this.partnerCode,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`GHTK API Error: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    return await response.json();\r\n  }\r\n}\r\n\r\n/**\r\n * GHTK Status Code Mapping\r\n * https://api.ghtk.vn/docs/submit-order/webhook\r\n */\r\nexport const GHTK_STATUS_MAP: Record<string, { text: string; color: string }> = {\r\n  '-1': { text: 'H·ªßy ƒë∆°n h√†ng', color: 'destructive' },\r\n  '1': { text: 'Ch∆∞a ti·∫øp nh·∫≠n', color: 'secondary' },\r\n  '2': { text: 'ƒê√£ ti·∫øp nh·∫≠n', color: 'info' },\r\n  '3': { text: 'ƒê√£ l·∫•y h√†ng/ƒê√£ nh·∫≠p kho', color: 'warning' },\r\n  '4': { text: 'ƒê√£ ƒëi·ªÅu ph·ªëi giao h√†ng/ƒêang giao h√†ng', color: 'warning' },\r\n  '5': { text: 'ƒê√£ giao h√†ng/Ch∆∞a ƒë·ªëi so√°t', color: 'success' },\r\n  '6': { text: 'ƒê√£ ƒë·ªëi so√°t', color: 'success' },\r\n  '7': { text: 'Kh√¥ng l·∫•y ƒë∆∞·ª£c h√†ng', color: 'destructive' },\r\n  '8': { text: 'Ho√£n l·∫•y h√†ng', color: 'warning' },\r\n  '9': { text: 'Kh√¥ng giao ƒë∆∞·ª£c h√†ng', color: 'destructive' },\r\n  '10': { text: 'Delay giao h√†ng', color: 'warning' },\r\n  '11': { text: 'ƒê√£ ƒë·ªëi so√°t c√¥ng n·ª£ tr·∫£ h√†ng', color: 'secondary' },\r\n  '12': { text: 'ƒê√£ ƒëi·ªÅu ph·ªëi l·∫•y h√†ng/ƒêang l·∫•y h√†ng', color: 'warning' },\r\n  '13': { text: 'ƒê∆°n h√†ng b·ªìi ho√†n', color: 'destructive' },\r\n  '20': { text: 'ƒêang tr·∫£ h√†ng (COD c·∫ßm h√†ng ƒëi tr·∫£)', color: 'warning' },\r\n  '21': { text: 'ƒê√£ tr·∫£ h√†ng', color: 'secondary' },\r\n  '123': { text: 'Shipper b√°o ƒë√£ l·∫•y h√†ng', color: 'info' },\r\n  '127': { text: 'Shipper (nh√¢n vi√™n l·∫•y/giao h√†ng) b√°o kh√¥ng l·∫•y ƒë∆∞·ª£c h√†ng', color: 'destructive' },\r\n  '128': { text: 'Shipper b√°o delay l·∫•y h√†ng', color: 'warning' },\r\n  '45': { text: 'Shipper b√°o ƒë√£ giao h√†ng', color: 'success' },\r\n  '49': { text: 'Shipper b√°o kh√¥ng giao ƒë∆∞·ª£c giao h√†ng', color: 'destructive' },\r\n  '410': { text: 'Shipper b√°o delay giao h√†ng', color: 'warning' },\r\n};\r\n\r\n/**\r\n * GHTK Tags (Nh√£n ƒë∆°n h√†ng)\r\n */\r\nexport const GHTK_TAGS = {\r\n  FRAGILE: 1, // H√†ng d·ªÖ v·ª°\r\n  HIGH_VALUE: 2, // Gi√° tr·ªã cao (>3M)\r\n  BULKY: 3, // H√†ng c·ªìng k·ªÅnh\r\n  DOCUMENT: 4, // Ch·ª©ng t·ª´\r\n  FOOD: 5, // N√¥ng s·∫£n/Th·ª±c ph·∫©m\r\n  TRY_BEFORE_BUY: 10, // Cho xem h√†ng\r\n  CALL_SHOP: 13, // G·ªçi shop khi kh√°ch kh√¥ng nh·∫≠n\r\n  PARTIAL_DELIVERY_SELECT: 17, // Giao 1 ph·∫ßn ch·ªçn s·∫£n ph·∫©m\r\n  PARTIAL_DELIVERY_EXCHANGE: 18, // Giao 1 ph·∫ßn ƒë·ªïi tr·∫£\r\n  NO_DELIVERY_FEE: 19, // Kh√¥ng giao ƒë∆∞·ª£c thu ph√≠\r\n} as const;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 913, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/shipping/api/shipping-api.ts"],"sourcesContent":["/**\r\n * Shipping Partners API Layer\r\n * Handles all shipping partner-related API calls\r\n */\r\n\r\nimport type { ShippingPartner, ShippingPartnerStatus } from '../types';\r\n\r\nexport interface ShippingPartnerFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  status?: ShippingPartnerStatus;\r\n  isConnected?: boolean;\r\n}\r\n\r\nexport interface ShippingPartnerResponse {\r\n  data: ShippingPartner[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface ShippingPartnerCreateInput {\r\n  systemId?: string;\r\n  id: string;\r\n  name: string;\r\n  logoUrl?: string;\r\n  description?: string;\r\n  phone?: string;\r\n  address?: string;\r\n  contactPerson?: string;\r\n  status?: ShippingPartnerStatus;\r\n}\r\n\r\nexport interface ShippingPartnerUpdateInput extends Partial<ShippingPartnerCreateInput> {\r\n  credentials?: Record<string, any>;\r\n  configuration?: Record<string, any>;\r\n}\r\n\r\nconst BASE_URL = '/api/settings/shipping-partners';\r\n\r\nexport async function fetchShippingPartners(\r\n  filters: ShippingPartnerFilters = {}\r\n): Promise<ShippingPartnerResponse> {\r\n  const params = new URLSearchParams();\r\n  if (filters.page) params.set('page', String(filters.page));\r\n  if (filters.limit) params.set('limit', String(filters.limit));\r\n  if (filters.status) params.set('status', filters.status);\r\n  if (filters.isConnected !== undefined) params.set('isConnected', String(filters.isConnected));\r\n\r\n  const url = params.toString() ? `${BASE_URL}?${params}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) throw new Error('Failed to fetch shipping partners');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchShippingPartnerById(systemId: string): Promise<ShippingPartner> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  if (!response.ok) throw new Error('Failed to fetch shipping partner');\r\n  return response.json();\r\n}\r\n\r\nexport async function createShippingPartner(data: ShippingPartnerCreateInput): Promise<ShippingPartner> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to create shipping partner');\r\n  return response.json();\r\n}\r\n\r\nexport async function updateShippingPartner(\r\n  systemId: string,\r\n  data: ShippingPartnerUpdateInput\r\n): Promise<ShippingPartner> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update shipping partner');\r\n  return response.json();\r\n}\r\n\r\nexport async function deleteShippingPartner(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, { method: 'DELETE' });\r\n  if (!response.ok) throw new Error('Failed to delete shipping partner');\r\n}\r\n\r\nexport async function connectShippingPartner(\r\n  systemId: string,\r\n  credentials: Record<string, any>\r\n): Promise<ShippingPartner> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/connect`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ credentials }),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to connect shipping partner');\r\n  return response.json();\r\n}\r\n\r\nexport async function disconnectShippingPartner(systemId: string): Promise<ShippingPartner> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/disconnect`, { method: 'POST' });\r\n  if (!response.ok) throw new Error('Failed to disconnect shipping partner');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchActiveShippingPartners(): Promise<ShippingPartner[]> {\r\n  const response = await fetchShippingPartners({ status: 'ƒêang h·ª£p t√°c', limit: 100 });\r\n  return response.data;\r\n}\r\n\r\nexport async function fetchConnectedShippingPartners(): Promise<ShippingPartner[]> {\r\n  const response = await fetchShippingPartners({ isConnected: true, limit: 100 });\r\n  return response.data;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;;;;;AAsCD,MAAM,WAAW;AAEV,eAAe,sBACpB,UAAkC,CAAC,CAAC;IAEpC,MAAM,SAAS,IAAI;IACnB,IAAI,QAAQ,IAAI,EAAE,OAAO,GAAG,CAAC,QAAQ,OAAO,QAAQ,IAAI;IACxD,IAAI,QAAQ,KAAK,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO,QAAQ,KAAK;IAC3D,IAAI,QAAQ,MAAM,EAAE,OAAO,GAAG,CAAC,UAAU,QAAQ,MAAM;IACvD,IAAI,QAAQ,WAAW,KAAK,WAAW,OAAO,GAAG,CAAC,eAAe,OAAO,QAAQ,WAAW;IAE3F,MAAM,MAAM,OAAO,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,QAAQ,GAAG;IAC1D,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,yBAAyB,QAAgB;IAC7D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IACtD,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,sBAAsB,IAAgC;IAC1E,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,sBACpB,QAAgB,EAChB,IAAgC;IAEhC,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,sBAAsB,QAAgB;IAC1D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QAAE,QAAQ;IAAS;IAC3E,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;AACpC;AAEO,eAAe,uBACpB,QAAgB,EAChB,WAAgC;IAEhC,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,QAAQ,CAAC,EAAE;QAC9D,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAY;IACrC;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,0BAA0B,QAAgB;IAC9D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,WAAW,CAAC,EAAE;QAAE,QAAQ;IAAO;IACpF,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,sBAAsB;QAAE,QAAQ;QAAgB,OAAO;IAAI;IAClF,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,sBAAsB;QAAE,aAAa;QAAM,OAAO;IAAI;IAC7E,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 1022, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/shipping/hooks/use-shipping.ts"],"sourcesContent":["/**\r\n * Shipping Partners React Query Hooks\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchShippingPartners,\r\n  fetchShippingPartnerById,\r\n  createShippingPartner,\r\n  updateShippingPartner,\r\n  deleteShippingPartner,\r\n  connectShippingPartner,\r\n  disconnectShippingPartner,\r\n  fetchActiveShippingPartners,\r\n  fetchConnectedShippingPartners,\r\n  type ShippingPartnerFilters,\r\n  type ShippingPartnerCreateInput,\r\n  type ShippingPartnerUpdateInput,\r\n} from '../api/shipping-api';\r\n\r\nexport const shippingPartnerKeys = {\r\n  all: ['shipping-partners'] as const,\r\n  lists: () => [...shippingPartnerKeys.all, 'list'] as const,\r\n  list: (filters: ShippingPartnerFilters) => [...shippingPartnerKeys.lists(), filters] as const,\r\n  details: () => [...shippingPartnerKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...shippingPartnerKeys.details(), id] as const,\r\n  active: () => [...shippingPartnerKeys.all, 'active'] as const,\r\n  connected: () => [...shippingPartnerKeys.all, 'connected'] as const,\r\n};\r\n\r\nexport function useShippingPartners(filters: ShippingPartnerFilters = {}) {\r\n  return useQuery({\r\n    queryKey: shippingPartnerKeys.list(filters),\r\n    queryFn: () => fetchShippingPartners(filters),\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n}\r\n\r\nexport function useShippingPartnerById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: shippingPartnerKeys.detail(systemId!),\r\n    queryFn: () => fetchShippingPartnerById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n}\r\n\r\nexport function useActiveShippingPartners() {\r\n  return useQuery({\r\n    queryKey: shippingPartnerKeys.active(),\r\n    queryFn: fetchActiveShippingPartners,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useConnectedShippingPartners() {\r\n  return useQuery({\r\n    queryKey: shippingPartnerKeys.connected(),\r\n    queryFn: fetchConnectedShippingPartners,\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useShippingPartnerMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n  const invalidate = () => queryClient.invalidateQueries({ queryKey: shippingPartnerKeys.all });\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: ShippingPartnerCreateInput) => createShippingPartner(data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: ShippingPartnerUpdateInput }) =>\r\n      updateShippingPartner(systemId, data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deleteShippingPartner(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const connect = useMutation({\r\n    mutationFn: ({ systemId, credentials }: { systemId: string; credentials: Record<string, any> }) =>\r\n      connectShippingPartner(systemId, credentials),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const disconnect = useMutation({\r\n    mutationFn: (systemId: string) => disconnectShippingPartner(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create, update, remove, connect, disconnect,\r\n    isLoading: create.isPending || update.isPending || remove.isPending || connect.isPending || disconnect.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1223, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/shipping/hooks/use-all-shipping-partners.ts"],"sourcesContent":["/**\r\n * useAllShippingPartners - Convenience hook for components needing all partners as flat array\r\n */\r\n\r\nimport { useShippingPartners } from './use-shipping';\r\n\r\nexport function useAllShippingPartners() {\r\n  const query = useShippingPartners({});\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;CAEC,GAED;;;AAEO,SAAS;;IACd,MAAM,QAAQ,IAAA,sLAAmB,EAAC,CAAC;IAEnC,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GATgB;;QACA,sLAAmB"}},
    {"offset": {"line": 1254, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/shipping/shipping-settings-store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n\r\nexport type ShippingSettings = {\r\n    weightSource: 'product' | 'custom';\r\n    customWeight: number;\r\n    weightUnit: 'gram' | 'kilogram'; // ƒê∆°n v·ªã kh·ªëi l∆∞·ª£ng\r\n    length: number;\r\n    width: number;\r\n    height: number;\r\n    deliveryRequirement: string;\r\n    shippingNote: string;\r\n    autoSyncStatus: boolean;\r\n    autoCancelOrder: boolean;\r\n    autoSyncCod: boolean;\r\n    latePickupWarningDays: number;\r\n    lateDeliveryWarningDays: number;\r\n};\r\n\r\nconst defaultSettings: ShippingSettings = {\r\n    weightSource: 'product',\r\n    customWeight: 100, // default to 100g\r\n    weightUnit: 'gram', // M·∫∑c ƒë·ªãnh l√† gram\r\n    length: 10,\r\n    width: 10,\r\n    height: 10,\r\n    deliveryRequirement: 'CHOXEMHANGKHONGTHU',\r\n    shippingNote: '',\r\n    autoSyncStatus: true,\r\n    autoCancelOrder: false,\r\n    autoSyncCod: true,\r\n    latePickupWarningDays: 1,\r\n    lateDeliveryWarningDays: 1,\r\n};\r\n\r\n// API sync helper\r\nasync function syncToAPI(settings: ShippingSettings): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/settings/shipping', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(settings),\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('[Shipping Settings API] sync error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\ntype ShippingSettingsState = {\r\n  settings: ShippingSettings;\r\n  initialized: boolean;\r\n  setSettings: (newSettings: Partial<ShippingSettings>) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n};\r\n\r\nexport const useShippingSettingsStore = create<ShippingSettingsState>()(\r\n  (set, get) => ({\r\n      settings: defaultSettings,\r\n      initialized: false,\r\n      setSettings: (newSettings) => {\r\n        const updatedSettings = { ...get().settings, ...newSettings };\r\n        set({ settings: updatedSettings });\r\n        \r\n        // Sync to API\r\n        syncToAPI(updatedSettings).catch(console.error);\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        \r\n        try {\r\n          const response = await fetch('/api/settings/shipping');\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            const settings = json.data || json.settings;\r\n            if (settings) {\r\n              set({ settings: { ...defaultSettings, ...settings }, initialized: true });\r\n            } else {\r\n              set({ initialized: true });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('[Shipping Settings Store] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;;AAkBA,MAAM,kBAAoC;IACtC,cAAc;IACd,cAAc;IACd,YAAY;IACZ,QAAQ;IACR,OAAO;IACP,QAAQ;IACR,qBAAqB;IACrB,cAAc;IACd,gBAAgB;IAChB,iBAAiB;IACjB,aAAa;IACb,uBAAuB;IACvB,yBAAyB;AAC7B;AAEA,kBAAkB;AAClB,eAAe,UAAU,QAA0B;IACjD,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,0BAA0B;YACrD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uCAAuC;QACrD,OAAO;IACT;AACF;AASO,MAAM,2BAA2B,IAAA,qJAAM,IAC5C,CAAC,KAAK,MAAQ,CAAC;QACX,UAAU;QACV,aAAa;QACb,aAAa,CAAC;YACZ,MAAM,kBAAkB;gBAAE,GAAG,MAAM,QAAQ;gBAAE,GAAG,WAAW;YAAC;YAC5D,IAAI;gBAAE,UAAU;YAAgB;YAEhC,cAAc;YACd,UAAU,iBAAiB,KAAK,CAAC,QAAQ,KAAK;QAChD;QAEA,aAAa;YACX,IAAI,MAAM,WAAW,EAAE;YAEvB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,MAAM,WAAW,KAAK,IAAI,IAAI,KAAK,QAAQ;oBAC3C,IAAI,UAAU;wBACZ,IAAI;4BAAE,UAAU;gCAAE,GAAG,eAAe;gCAAE,GAAG,QAAQ;4BAAC;4BAAG,aAAa;wBAAK;oBACzE,OAAO;wBACL,IAAI;4BAAE,aAAa;wBAAK;oBAC1B;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gDAAgD;YAChE;QACF;IACF,CAAC"}},
    {"offset": {"line": 1338, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/sales/sales-management-store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n\r\nexport type PrintCopiesOption = '1' | '2' | '3';\r\n\r\nexport type SalesManagementSettingsValues = {\r\n  allowCancelAfterExport: boolean;\r\n  allowNegativeOrder: boolean;\r\n  allowNegativeApproval: boolean;\r\n  allowNegativePacking: boolean;\r\n  allowNegativeStockOut: boolean;\r\n  printCopies: PrintCopiesOption;\r\n};\r\n\r\ninterface SalesManagementSettingsState extends SalesManagementSettingsValues {\r\n  initialized: boolean;\r\n  updateSetting: <K extends keyof SalesManagementSettingsValues>(key: K, value: SalesManagementSettingsValues[K]) => void;\r\n  reset: () => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst defaultSettings: SalesManagementSettingsValues = {\r\n  allowCancelAfterExport: true,\r\n  allowNegativeOrder: true,\r\n  allowNegativeApproval: true,\r\n  allowNegativePacking: true,\r\n  allowNegativeStockOut: true,\r\n  printCopies: '1',\r\n};\r\n\r\n// API sync helper\r\nasync function syncToAPI(settings: Partial<SalesManagementSettingsValues>): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/settings/sales', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(settings),\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('[Sales Management Settings API] sync error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const useSalesManagementSettingsStore = create<SalesManagementSettingsState>()(\r\n  (set, get) => ({\r\n    ...defaultSettings,\r\n    initialized: false,\r\n    updateSetting: (key, value) => {\r\n      set((state) => ({ ...state, [key]: value }));\r\n      syncToAPI({ [key]: value }).catch(console.error);\r\n    },\r\n    reset: () => {\r\n      set(() => ({ ...defaultSettings }));\r\n      syncToAPI(defaultSettings).catch(console.error);\r\n    },\r\n    loadFromAPI: async () => {\r\n      if (get().initialized) return;\r\n      try {\r\n        const response = await fetch('/api/settings/sales');\r\n        if (response.ok) {\r\n          const json = await response.json();\r\n          const data = json.data || json;\r\n          if (data) {\r\n            set({ ...defaultSettings, ...data, initialized: true });\r\n          } else {\r\n            set({ initialized: true });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('[Sales Management Settings Store] loadFromAPI error:', error);\r\n      }\r\n    },\r\n  })\r\n);\r\n\r\nexport const salesManagementDefaultSettings = defaultSettings;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAoBA,MAAM,kBAAiD;IACrD,wBAAwB;IACxB,oBAAoB;IACpB,uBAAuB;IACvB,sBAAsB;IACtB,uBAAuB;IACvB,aAAa;AACf;AAEA,kBAAkB;AAClB,eAAe,UAAU,QAAgD;IACvE,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,uBAAuB;YAClD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+CAA+C;QAC7D,OAAO;IACT;AACF;AAEO,MAAM,kCAAkC,IAAA,qJAAM,IACnD,CAAC,KAAK,MAAQ,CAAC;QACb,GAAG,eAAe;QAClB,aAAa;QACb,eAAe,CAAC,KAAK;YACnB,IAAI,CAAC,QAAU,CAAC;oBAAE,GAAG,KAAK;oBAAE,CAAC,IAAI,EAAE;gBAAM,CAAC;YAC1C,UAAU;gBAAE,CAAC,IAAI,EAAE;YAAM,GAAG,KAAK,CAAC,QAAQ,KAAK;QACjD;QACA,OAAO;YACL,IAAI,IAAM,CAAC;oBAAE,GAAG,eAAe;gBAAC,CAAC;YACjC,UAAU,iBAAiB,KAAK,CAAC,QAAQ,KAAK;QAChD;QACA,aAAa;YACX,IAAI,MAAM,WAAW,EAAE;YACvB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,MAAM,OAAO,KAAK,IAAI,IAAI;oBAC1B,IAAI,MAAM;wBACR,IAAI;4BAAE,GAAG,eAAe;4BAAE,GAAG,IAAI;4BAAE,aAAa;wBAAK;oBACvD,OAAO;wBACL,IAAI;4BAAE,aAAa;wBAAK;oBAC1B;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wDAAwD;YACxE;QACF;IACF,CAAC;AAGI,MAAM,iCAAiC"}},
    {"offset": {"line": 1420, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/customers/api/customer-settings-api.ts"],"sourcesContent":["/**\r\n * Customer Settings API Layer\r\n * Handles customer types, groups, sources, payment terms, credit ratings, lifecycle stages\r\n */\r\n\r\nimport type {\r\n  CustomerType,\r\n  CustomerGroup,\r\n  CustomerSource,\r\n  PaymentTerm,\r\n  CreditRating,\r\n  LifecycleStage,\r\n  CustomerSlaSetting,\r\n} from '../types';\r\n\r\nconst BASE_URL = '/api/settings/customers';\r\n\r\n// ============== Customer Types ==============\r\nexport async function fetchCustomerTypes(): Promise<CustomerType[]> {\r\n  const res = await fetch(`${BASE_URL}/types`);\r\n  if (!res.ok) throw new Error('Failed to fetch customer types');\r\n  return res.json();\r\n}\r\n\r\nexport async function createCustomerType(data: Partial<CustomerType>): Promise<CustomerType> {\r\n  const res = await fetch(`${BASE_URL}/types`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to create');\r\n  return res.json();\r\n}\r\n\r\nexport async function updateCustomerType(systemId: string, data: Partial<CustomerType>): Promise<CustomerType> {\r\n  const res = await fetch(`${BASE_URL}/types/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to update');\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteCustomerType(systemId: string): Promise<void> {\r\n  const res = await fetch(`${BASE_URL}/types/${systemId}`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Failed to delete');\r\n}\r\n\r\n// ============== Customer Groups ==============\r\nexport async function fetchCustomerGroups(): Promise<CustomerGroup[]> {\r\n  const res = await fetch(`${BASE_URL}/groups`);\r\n  if (!res.ok) throw new Error('Failed to fetch');\r\n  return res.json();\r\n}\r\n\r\nexport async function createCustomerGroup(data: Partial<CustomerGroup>): Promise<CustomerGroup> {\r\n  const res = await fetch(`${BASE_URL}/groups`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to create');\r\n  return res.json();\r\n}\r\n\r\nexport async function updateCustomerGroup(systemId: string, data: Partial<CustomerGroup>): Promise<CustomerGroup> {\r\n  const res = await fetch(`${BASE_URL}/groups/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to update');\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteCustomerGroup(systemId: string): Promise<void> {\r\n  const res = await fetch(`${BASE_URL}/groups/${systemId}`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Failed to delete');\r\n}\r\n\r\n// ============== Customer Sources ==============\r\nexport async function fetchCustomerSources(): Promise<CustomerSource[]> {\r\n  const res = await fetch(`${BASE_URL}/sources`);\r\n  if (!res.ok) throw new Error('Failed to fetch');\r\n  return res.json();\r\n}\r\n\r\nexport async function createCustomerSource(data: Partial<CustomerSource>): Promise<CustomerSource> {\r\n  const res = await fetch(`${BASE_URL}/sources`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to create');\r\n  return res.json();\r\n}\r\n\r\nexport async function updateCustomerSource(systemId: string, data: Partial<CustomerSource>): Promise<CustomerSource> {\r\n  const res = await fetch(`${BASE_URL}/sources/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to update');\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteCustomerSource(systemId: string): Promise<void> {\r\n  const res = await fetch(`${BASE_URL}/sources/${systemId}`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Failed to delete');\r\n}\r\n\r\n// ============== Payment Terms ==============\r\nexport async function fetchPaymentTerms(): Promise<PaymentTerm[]> {\r\n  const res = await fetch(`${BASE_URL}/payment-terms`);\r\n  if (!res.ok) throw new Error('Failed to fetch');\r\n  return res.json();\r\n}\r\n\r\nexport async function createPaymentTerm(data: Partial<PaymentTerm>): Promise<PaymentTerm> {\r\n  const res = await fetch(`${BASE_URL}/payment-terms`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to create');\r\n  return res.json();\r\n}\r\n\r\nexport async function updatePaymentTerm(systemId: string, data: Partial<PaymentTerm>): Promise<PaymentTerm> {\r\n  const res = await fetch(`${BASE_URL}/payment-terms/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to update');\r\n  return res.json();\r\n}\r\n\r\nexport async function deletePaymentTerm(systemId: string): Promise<void> {\r\n  const res = await fetch(`${BASE_URL}/payment-terms/${systemId}`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Failed to delete');\r\n}\r\n\r\n// ============== Credit Ratings ==============\r\nexport async function fetchCreditRatings(): Promise<CreditRating[]> {\r\n  const res = await fetch(`${BASE_URL}/credit-ratings`);\r\n  if (!res.ok) throw new Error('Failed to fetch');\r\n  return res.json();\r\n}\r\n\r\nexport async function createCreditRating(data: Partial<CreditRating>): Promise<CreditRating> {\r\n  const res = await fetch(`${BASE_URL}/credit-ratings`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to create');\r\n  return res.json();\r\n}\r\n\r\nexport async function updateCreditRating(systemId: string, data: Partial<CreditRating>): Promise<CreditRating> {\r\n  const res = await fetch(`${BASE_URL}/credit-ratings/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to update');\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteCreditRating(systemId: string): Promise<void> {\r\n  const res = await fetch(`${BASE_URL}/credit-ratings/${systemId}`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Failed to delete');\r\n}\r\n\r\n// ============== Lifecycle Stages ==============\r\nexport async function fetchLifecycleStages(): Promise<LifecycleStage[]> {\r\n  const res = await fetch(`${BASE_URL}/lifecycle-stages`);\r\n  if (!res.ok) throw new Error('Failed to fetch');\r\n  return res.json();\r\n}\r\n\r\nexport async function createLifecycleStage(data: Partial<LifecycleStage>): Promise<LifecycleStage> {\r\n  const res = await fetch(`${BASE_URL}/lifecycle-stages`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to create');\r\n  return res.json();\r\n}\r\n\r\nexport async function updateLifecycleStage(systemId: string, data: Partial<LifecycleStage>): Promise<LifecycleStage> {\r\n  const res = await fetch(`${BASE_URL}/lifecycle-stages/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to update');\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteLifecycleStage(systemId: string): Promise<void> {\r\n  const res = await fetch(`${BASE_URL}/lifecycle-stages/${systemId}`, { method: 'DELETE' });\r\n  if (!res.ok) throw new Error('Failed to delete');\r\n}\r\n\r\n// ============== SLA Settings ==============\r\nexport async function fetchCustomerSlaSettings(): Promise<CustomerSlaSetting[]> {\r\n  const res = await fetch(`${BASE_URL}/sla-settings`);\r\n  if (!res.ok) throw new Error('Failed to fetch');\r\n  return res.json();\r\n}\r\n\r\nexport async function updateCustomerSlaSetting(systemId: string, data: Partial<CustomerSlaSetting>): Promise<CustomerSlaSetting> {\r\n  const res = await fetch(`${BASE_URL}/sla-settings/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!res.ok) throw new Error('Failed to update');\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1699, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/customers/hooks/use-customer-settings.ts"],"sourcesContent":["/**\r\n * Customer Settings React Query Hooks\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport * as api from '../api/customer-settings-api';\r\nimport type { CustomerType, CustomerGroup, CustomerSource, PaymentTerm, CreditRating, LifecycleStage, CustomerSlaSetting } from '../types';\r\n\r\nexport const customerSettingsKeys = {\r\n  all: ['customer-settings'] as const,\r\n  types: () => [...customerSettingsKeys.all, 'types'] as const,\r\n  groups: () => [...customerSettingsKeys.all, 'groups'] as const,\r\n  sources: () => [...customerSettingsKeys.all, 'sources'] as const,\r\n  paymentTerms: () => [...customerSettingsKeys.all, 'payment-terms'] as const,\r\n  creditRatings: () => [...customerSettingsKeys.all, 'credit-ratings'] as const,\r\n  lifecycleStages: () => [...customerSettingsKeys.all, 'lifecycle-stages'] as const,\r\n  slaSettings: () => [...customerSettingsKeys.all, 'sla-settings'] as const,\r\n};\r\n\r\n// Customer Types\r\nexport function useCustomerTypes() {\r\n  return useQuery({ queryKey: customerSettingsKeys.types(), queryFn: api.fetchCustomerTypes, staleTime: 1000 * 60 * 10 });\r\n}\r\n\r\nexport function useCustomerTypeMutations(opts?: { onSuccess?: () => void }) {\r\n  const qc = useQueryClient();\r\n  const invalidate = () => qc.invalidateQueries({ queryKey: customerSettingsKeys.types() });\r\n  return {\r\n    create: useMutation({ mutationFn: api.createCustomerType, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    update: useMutation({ mutationFn: ({ systemId, data }: { systemId: string; data: Partial<CustomerType> }) => api.updateCustomerType(systemId, data), onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    remove: useMutation({ mutationFn: api.deleteCustomerType, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n  };\r\n}\r\n\r\n// Customer Groups\r\nexport function useCustomerGroups() {\r\n  return useQuery({ queryKey: customerSettingsKeys.groups(), queryFn: api.fetchCustomerGroups, staleTime: 1000 * 60 * 10 });\r\n}\r\n\r\nexport function useCustomerGroupMutations(opts?: { onSuccess?: () => void }) {\r\n  const qc = useQueryClient();\r\n  const invalidate = () => qc.invalidateQueries({ queryKey: customerSettingsKeys.groups() });\r\n  return {\r\n    create: useMutation({ mutationFn: api.createCustomerGroup, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    update: useMutation({ mutationFn: ({ systemId, data }: { systemId: string; data: Partial<CustomerGroup> }) => api.updateCustomerGroup(systemId, data), onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    remove: useMutation({ mutationFn: api.deleteCustomerGroup, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n  };\r\n}\r\n\r\n// Customer Sources\r\nexport function useCustomerSources() {\r\n  return useQuery({ queryKey: customerSettingsKeys.sources(), queryFn: api.fetchCustomerSources, staleTime: 1000 * 60 * 10 });\r\n}\r\n\r\nexport function useCustomerSourceMutations(opts?: { onSuccess?: () => void }) {\r\n  const qc = useQueryClient();\r\n  const invalidate = () => qc.invalidateQueries({ queryKey: customerSettingsKeys.sources() });\r\n  return {\r\n    create: useMutation({ mutationFn: api.createCustomerSource, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    update: useMutation({ mutationFn: ({ systemId, data }: { systemId: string; data: Partial<CustomerSource> }) => api.updateCustomerSource(systemId, data), onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    remove: useMutation({ mutationFn: api.deleteCustomerSource, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n  };\r\n}\r\n\r\n// Payment Terms\r\nexport function usePaymentTerms() {\r\n  return useQuery({ queryKey: customerSettingsKeys.paymentTerms(), queryFn: api.fetchPaymentTerms, staleTime: 1000 * 60 * 10 });\r\n}\r\n\r\nexport function usePaymentTermMutations(opts?: { onSuccess?: () => void }) {\r\n  const qc = useQueryClient();\r\n  const invalidate = () => qc.invalidateQueries({ queryKey: customerSettingsKeys.paymentTerms() });\r\n  return {\r\n    create: useMutation({ mutationFn: api.createPaymentTerm, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    update: useMutation({ mutationFn: ({ systemId, data }: { systemId: string; data: Partial<PaymentTerm> }) => api.updatePaymentTerm(systemId, data), onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    remove: useMutation({ mutationFn: api.deletePaymentTerm, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n  };\r\n}\r\n\r\n// Credit Ratings\r\nexport function useCreditRatings() {\r\n  return useQuery({ queryKey: customerSettingsKeys.creditRatings(), queryFn: api.fetchCreditRatings, staleTime: 1000 * 60 * 10 });\r\n}\r\n\r\nexport function useCreditRatingMutations(opts?: { onSuccess?: () => void }) {\r\n  const qc = useQueryClient();\r\n  const invalidate = () => qc.invalidateQueries({ queryKey: customerSettingsKeys.creditRatings() });\r\n  return {\r\n    create: useMutation({ mutationFn: api.createCreditRating, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    update: useMutation({ mutationFn: ({ systemId, data }: { systemId: string; data: Partial<CreditRating> }) => api.updateCreditRating(systemId, data), onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    remove: useMutation({ mutationFn: api.deleteCreditRating, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n  };\r\n}\r\n\r\n// Lifecycle Stages\r\nexport function useLifecycleStages() {\r\n  return useQuery({ queryKey: customerSettingsKeys.lifecycleStages(), queryFn: api.fetchLifecycleStages, staleTime: 1000 * 60 * 10 });\r\n}\r\n\r\nexport function useLifecycleStageMutations(opts?: { onSuccess?: () => void }) {\r\n  const qc = useQueryClient();\r\n  const invalidate = () => qc.invalidateQueries({ queryKey: customerSettingsKeys.lifecycleStages() });\r\n  return {\r\n    create: useMutation({ mutationFn: api.createLifecycleStage, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    update: useMutation({ mutationFn: ({ systemId, data }: { systemId: string; data: Partial<LifecycleStage> }) => api.updateLifecycleStage(systemId, data), onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n    remove: useMutation({ mutationFn: api.deleteLifecycleStage, onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n  };\r\n}\r\n\r\n// SLA Settings\r\nexport function useCustomerSlaSettings() {\r\n  return useQuery({ queryKey: customerSettingsKeys.slaSettings(), queryFn: api.fetchCustomerSlaSettings, staleTime: 1000 * 60 * 10 });\r\n}\r\n\r\nexport function useCustomerSlaSettingMutations(opts?: { onSuccess?: () => void }) {\r\n  const qc = useQueryClient();\r\n  const invalidate = () => qc.invalidateQueries({ queryKey: customerSettingsKeys.slaSettings() });\r\n  return {\r\n    update: useMutation({ mutationFn: ({ systemId, data }: { systemId: string; data: Partial<CustomerSlaSetting> }) => api.updateCustomerSlaSetting(systemId, data), onSuccess: () => { invalidate(); opts?.onSuccess?.(); } }),\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2173, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/customers/hooks/use-all-customer-settings.ts"],"sourcesContent":["/**\r\n * Convenience hooks for customer settings - flat array access\r\n */\r\n\r\nimport { useCallback } from 'react';\r\nimport { \r\n  useCustomerTypes, \r\n  useCustomerGroups, \r\n  useCustomerSources \r\n} from './use-customer-settings';\r\nimport type { CustomerType, CustomerGroup, CustomerSource } from '../types';\r\n\r\n/**\r\n * Returns all customer types as a flat array\r\n */\r\nexport function useAllCustomerTypes() {\r\n  const query = useCustomerTypes();\r\n  \r\n  return {\r\n    data: query.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns customer types formatted as options\r\n */\r\nexport function useCustomerTypeOptions() {\r\n  const { data, isLoading } = useAllCustomerTypes();\r\n  \r\n  const options = data.map(t => ({\r\n    value: t.systemId,\r\n    label: t.name,\r\n  }));\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Hook for finding customer type by systemId\r\n */\r\nexport function useCustomerTypeFinder() {\r\n  const { data } = useAllCustomerTypes();\r\n  \r\n  const findById = useCallback((systemId: string): CustomerType | undefined => {\r\n    return data.find(t => t.systemId === systemId);\r\n  }, [data]);\r\n  \r\n  return { findById };\r\n}\r\n\r\n/**\r\n * Returns all customer groups as a flat array\r\n */\r\nexport function useAllCustomerGroups() {\r\n  const query = useCustomerGroups();\r\n  \r\n  return {\r\n    data: query.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns customer groups formatted as options\r\n */\r\nexport function useCustomerGroupOptions() {\r\n  const { data, isLoading } = useAllCustomerGroups();\r\n  \r\n  const options = data.map(g => ({\r\n    value: g.systemId,\r\n    label: g.name,\r\n  }));\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Returns all customer sources as a flat array\r\n */\r\nexport function useAllCustomerSources() {\r\n  const query = useCustomerSources();\r\n  \r\n  return {\r\n    data: query.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns customer sources formatted as options\r\n */\r\nexport function useCustomerSourceOptions() {\r\n  const { data, isLoading } = useAllCustomerSources();\r\n  \r\n  const options = data.map(s => ({\r\n    value: s.systemId,\r\n    label: s.name,\r\n  }));\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Hook for finding customer group by systemId\r\n */\r\nexport function useCustomerGroupFinder() {\r\n  const { data } = useAllCustomerGroups();\r\n  \r\n  const findById = useCallback((systemId: string): CustomerGroup | undefined => {\r\n    return data.find(g => g.systemId === systemId);\r\n  }, [data]);\r\n  \r\n  return { findById };\r\n}\r\n\r\n/**\r\n * Hook for finding customer source by systemId\r\n */\r\nexport function useCustomerSourceFinder() {\r\n  const { data } = useAllCustomerSources();\r\n  \r\n  const findById = useCallback((systemId: string): CustomerSource | undefined => {\r\n    return data.find(s => s.systemId === systemId);\r\n  }, [data]);\r\n  \r\n  return { findById };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;;CAEC,GAED;AACA;;;;AAUO,SAAS;;IACd,MAAM,QAAQ,IAAA,gMAAgB;IAE9B,OAAO;QACL,MAAM,MAAM,IAAI,IAAI,EAAE;QACtB,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GATgB;;QACA,gMAAgB;;;AAazB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YAC7B,OAAO,EAAE,QAAQ;YACjB,OAAO,EAAE,IAAI;QACf,CAAC;IAED,OAAO;QAAE;QAAS;IAAU;AAC9B;IATgB;;QACc;;;AAavB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,IAAA,4KAAW;uDAAC,CAAC;YAC5B,OAAO,KAAK,IAAI;+DAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;sDAAG;QAAC;KAAK;IAET,OAAO;QAAE;IAAS;AACpB;IARgB;;QACG;;;AAYZ,SAAS;;IACd,MAAM,QAAQ,IAAA,iMAAiB;IAE/B,OAAO;QACL,MAAM,MAAM,IAAI,IAAI,EAAE;QACtB,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;IATgB;;QACA,iMAAiB;;;AAa1B,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YAC7B,OAAO,EAAE,QAAQ;YACjB,OAAO,EAAE,IAAI;QACf,CAAC;IAED,OAAO;QAAE;QAAS;IAAU;AAC9B;IATgB;;QACc;;;AAavB,SAAS;;IACd,MAAM,QAAQ,IAAA,kMAAkB;IAEhC,OAAO;QACL,MAAM,MAAM,IAAI,IAAI,EAAE;QACtB,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;IATgB;;QACA,kMAAkB;;;AAa3B,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YAC7B,OAAO,EAAE,QAAQ;YACjB,OAAO,EAAE,IAAI;QACf,CAAC;IAED,OAAO;QAAE;QAAS;IAAU;AAC9B;IATgB;;QACc;;;AAavB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,IAAA,4KAAW;wDAAC,CAAC;YAC5B,OAAO,KAAK,IAAI;gEAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;uDAAG;QAAC;KAAK;IAET,OAAO;QAAE;IAAS;AACpB;IARgB;;QACG;;;AAYZ,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,IAAA,4KAAW;yDAAC,CAAC;YAC5B,OAAO,KAAK,IAAI;iEAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;wDAAG;QAAC;KAAK;IAET,OAAO;QAAE;IAAS;AACpB;IARgB;;QACG"}},
    {"offset": {"line": 2366, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/customers/sla-settings-data.ts"],"sourcesContent":["import { asSystemId, asBusinessId } from '../../../lib/id-types';\r\nimport type { CustomerSlaSetting } from './types';\r\nimport { buildSeedAuditFields } from '@/lib/seed-audit';\r\n\r\n// ƒê∆°n gi·∫£n h√≥a: M·ªói lo·∫°i SLA ch·ªâ c√≥ 1 record, user edit tr·ª±c ti·∫øp s·ªë ng√†y\r\nexport const defaultCustomerSlaSettings: CustomerSlaSetting[] = [\r\n  // Follow-up SLA - Nh·∫Øc li√™n h·ªá ƒë·ªãnh k·ª≥\r\n  {\r\n    systemId: asSystemId('CUSTSLA0000001'),\r\n    id: asBusinessId('SLA-FOLLOWUP'),\r\n    name: 'Li√™n h·ªá ƒë·ªãnh k·ª≥',\r\n    description: 'Nh·∫Øc nh·ªü li√™n h·ªá kh√°ch h√†ng sau m·ªôt th·ªùi gian kh√¥ng t∆∞∆°ng t√°c',\r\n    slaType: 'follow-up',\r\n    targetDays: 14,      // M·ª•c ti√™u: li√™n h·ªá trong v√≤ng 14 ng√†y\r\n    warningDays: 3,      // C·∫£nh b√°o khi c√≤n 3 ng√†y\r\n    criticalDays: 7,     // Nghi√™m tr·ªçng khi qu√° h·∫°n 7 ng√†y\r\n    color: '#2196F3',    // Blue\r\n    isActive: true,\r\n    ...buildSeedAuditFields({ createdAt: '2024-01-01T08:00:00Z' }),\r\n  },\r\n\r\n  // Re-engagement SLA - K√≠ch ho·∫°t l·∫°i kh√°ch h√†ng kh√¥ng ho·∫°t ƒë·ªông\r\n  {\r\n    systemId: asSystemId('CUSTSLA0000002'),\r\n    id: asBusinessId('SLA-REENGAGEMENT'),\r\n    name: 'K√≠ch ho·∫°t l·∫°i',\r\n    description: 'Kh√°ch h√†ng kh√¥ng mua h√†ng c·∫ßn ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i',\r\n    slaType: 're-engagement',\r\n    targetDays: 60,      // M·ª•c ti√™u: k√≠ch ho·∫°t trong v√≤ng 60 ng√†y\r\n    warningDays: 10,     // C·∫£nh b√°o khi c√≤n 10 ng√†y\r\n    criticalDays: 14,    // Nghi√™m tr·ªçng khi qu√° h·∫°n 14 ng√†y\r\n    color: '#FF9800',    // Orange\r\n    isActive: true,\r\n    ...buildSeedAuditFields({ createdAt: '2024-01-02T08:00:00Z' }),\r\n  },\r\n\r\n  // Debt Payment SLA - Nh·∫Øc thanh to√°n c√¥ng n·ª£\r\n  {\r\n    systemId: asSystemId('CUSTSLA0000003'),\r\n    id: asBusinessId('SLA-DEBT'),\r\n    name: 'Nh·∫Øc c√¥ng n·ª£',\r\n    description: 'Nh·∫Øc thanh to√°n c√¥ng n·ª£ qu√° h·∫°n',\r\n    slaType: 'debt-payment',\r\n    targetDays: 7,       // M·ª•c ti√™u: thanh to√°n trong v√≤ng 7 ng√†y sau h·∫°n\r\n    warningDays: 2,      // C·∫£nh b√°o khi c√≤n 2 ng√†y\r\n    criticalDays: 7,     // Nghi√™m tr·ªçng khi qu√° h·∫°n 7 ng√†y\r\n    color: '#E91E63',    // Pink\r\n    isActive: true,\r\n    ...buildSeedAuditFields({ createdAt: '2024-01-03T08:00:00Z' }),\r\n  },\r\n];\r\n\r\n// Helper to get SLA labels\r\nexport const SLA_TYPE_LABELS: Record<string, string> = {\r\n  'follow-up': 'Li√™n h·ªá ƒë·ªãnh k·ª≥',\r\n  're-engagement': 'K√≠ch ho·∫°t l·∫°i',\r\n  'debt-payment': 'Nh·∫Øc c√¥ng n·ª£',\r\n};\r\n\r\n// Helper to get SLA descriptions\r\nexport const SLA_TYPE_DESCRIPTIONS: Record<string, string> = {\r\n  'follow-up': 'Nh·∫Øc nh·ªü li√™n h·ªá kh√°ch h√†ng theo chu k·ª≥ ƒë·ªãnh k·ª≥',\r\n  're-engagement': 'K√≠ch ho·∫°t kh√°ch h√†ng kh√¥ng ho·∫°t ƒë·ªông trong th·ªùi gian d√†i',\r\n  'debt-payment': 'Nh·∫Øc thanh to√°n c√¥ng n·ª£ qu√° h·∫°n',\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;;;AAGO,MAAM,6BAAmD;IAC9D,uCAAuC;IACvC;QACE,UAAU,IAAA,mIAAU,EAAC;QACrB,IAAI,IAAA,qIAAY,EAAC;QACjB,MAAM;QACN,aAAa;QACb,SAAS;QACT,YAAY;QACZ,aAAa;QACb,cAAc;QACd,OAAO;QACP,UAAU;QACV,GAAG,IAAA,+IAAoB,EAAC;YAAE,WAAW;QAAuB,EAAE;IAChE;IAEA,+DAA+D;IAC/D;QACE,UAAU,IAAA,mIAAU,EAAC;QACrB,IAAI,IAAA,qIAAY,EAAC;QACjB,MAAM;QACN,aAAa;QACb,SAAS;QACT,YAAY;QACZ,aAAa;QACb,cAAc;QACd,OAAO;QACP,UAAU;QACV,GAAG,IAAA,+IAAoB,EAAC;YAAE,WAAW;QAAuB,EAAE;IAChE;IAEA,6CAA6C;IAC7C;QACE,UAAU,IAAA,mIAAU,EAAC;QACrB,IAAI,IAAA,qIAAY,EAAC;QACjB,MAAM;QACN,aAAa;QACb,SAAS;QACT,YAAY;QACZ,aAAa;QACb,cAAc;QACd,OAAO;QACP,UAAU;QACV,GAAG,IAAA,+IAAoB,EAAC;YAAE,WAAW;QAAuB,EAAE;IAChE;CACD;AAGM,MAAM,kBAA0C;IACrD,aAAa;IACb,iBAAiB;IACjB,gBAAgB;AAClB;AAGO,MAAM,wBAAgD;IAC3D,aAAa;IACb,iBAAiB;IACjB,gBAAgB;AAClB"}},
    {"offset": {"line": 2445, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/customers/sla-settings-store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\nimport type { CustomerSlaSetting, CustomerSlaType } from './types';\r\nimport { defaultCustomerSlaSettings } from './sla-settings-data';\r\n\r\nexport const useCustomerSlaStore = createCrudStore<CustomerSlaSetting>(\r\n  defaultCustomerSlaSettings, 'sla-settings',\r\n  {\r\n    apiEndpoint: '/api/settings/customers?type=sla-setting',\r\n  }\r\n);\r\n\r\n// Helper function to get SLA by type (simplified - only 1 per type)\r\nexport function getSlaBySlaType(slaType: CustomerSlaType): CustomerSlaSetting | undefined {\r\n  return useCustomerSlaStore.getState().data.find(\r\n    (sla) => sla.slaType === slaType && sla.isActive\r\n  );\r\n}\r\n\r\n// Helper to load all active SLA settings\r\nexport function loadCustomerSlaSettings() {\r\n  return useCustomerSlaStore.getState().data.filter((sla) => sla.isActive);\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;;;AAEO,MAAM,sBAAsB,IAAA,6IAAe,EAChD,6LAA0B,EAAE,gBAC5B;IACE,aAAa;AACf;AAIK,SAAS,gBAAgB,OAAwB;IACtD,OAAO,oBAAoB,QAAQ,GAAG,IAAI,CAAC,IAAI,CAC7C,CAAC,MAAQ,IAAI,OAAO,KAAK,WAAW,IAAI,QAAQ;AAEpD;AAGO,SAAS;IACd,OAAO,oBAAoB,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,MAAQ,IAAI,QAAQ;AACzE"}},
    {"offset": {"line": 2473, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/api/branches-api.ts"],"sourcesContent":["/**\r\n * Branches API functions\r\n * \r\n * ‚ö†Ô∏è Direct import: import { fetchBranches } from '@/features/settings/branches/api/branches-api'\r\n */\r\n\r\nimport type { BranchModel as Branch } from '@/generated/prisma/models/Branch';\r\n\r\nconst BASE_URL = '/api/branches';\r\n\r\nexport interface BranchesParams {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  isDefault?: boolean;\r\n  sortBy?: string;\r\n  sortOrder?: 'asc' | 'desc';\r\n}\r\n\r\nexport interface BranchesResponse {\r\n  data: Branch[];\r\n  total: number;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nexport async function fetchBranches(params: BranchesParams = {}): Promise<BranchesResponse> {\r\n  const searchParams = new URLSearchParams();\r\n  \r\n  if (params.page) searchParams.set('page', String(params.page));\r\n  if (params.limit) searchParams.set('limit', String(params.limit));\r\n  if (params.search) searchParams.set('search', params.search);\r\n  if (params.isDefault !== undefined) searchParams.set('isDefault', String(params.isDefault));\r\n  if (params.sortBy) searchParams.set('sortBy', params.sortBy);\r\n  if (params.sortOrder) searchParams.set('sortOrder', params.sortOrder);\r\n  \r\n  const url = searchParams.toString() ? `${BASE_URL}?${searchParams}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch branches: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function fetchBranch(systemId: string): Promise<Branch> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch branch: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function createBranch(data: Omit<Branch, 'systemId' | 'createdAt' | 'updatedAt'>): Promise<Branch> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to create branch');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function updateBranch(systemId: string, data: Partial<Branch>): Promise<Branch> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to update branch');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function deleteBranch(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to delete branch: ${response.statusText}`);\r\n  }\r\n}\r\n\r\nexport async function setDefaultBranch(systemId: string): Promise<Branch> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to set default branch');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport type { Branch };\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;;;;;;;AAID,MAAM,WAAW;AAkBV,eAAe,cAAc,SAAyB,CAAC,CAAC;IAC7D,MAAM,eAAe,IAAI;IAEzB,IAAI,OAAO,IAAI,EAAE,aAAa,GAAG,CAAC,QAAQ,OAAO,OAAO,IAAI;IAC5D,IAAI,OAAO,KAAK,EAAE,aAAa,GAAG,CAAC,SAAS,OAAO,OAAO,KAAK;IAC/D,IAAI,OAAO,MAAM,EAAE,aAAa,GAAG,CAAC,UAAU,OAAO,MAAM;IAC3D,IAAI,OAAO,SAAS,KAAK,WAAW,aAAa,GAAG,CAAC,aAAa,OAAO,OAAO,SAAS;IACzF,IAAI,OAAO,MAAM,EAAE,aAAa,GAAG,CAAC,UAAU,OAAO,MAAM;IAC3D,IAAI,OAAO,SAAS,EAAE,aAAa,GAAG,CAAC,aAAa,OAAO,SAAS;IAEpE,MAAM,MAAM,aAAa,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,cAAc,GAAG;IACtE,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,SAAS,UAAU,EAAE;IACpE;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,YAAY,QAAgB;IAChD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IAEtD,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,SAAS,UAAU,EAAE;IAClE;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,aAAa,IAA0D;IAC3F,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,aAAa,QAAgB,EAAE,IAAqB;IACxE,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,aAAa,QAAgB;IACjD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,SAAS,UAAU,EAAE;IACnE;AACF;AAEO,eAAe,iBAAiB,QAAgB;IACrD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAClE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;IAChD;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 2570, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/hooks/use-branches.ts"],"sourcesContent":["/**\r\n * useBranches - React Query hooks\r\n * \r\n * ‚ö†Ô∏è Direct import: import { useBranches } from '@/features/settings/branches/hooks/use-branches'\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\r\nimport {\r\n  fetchBranches,\r\n  fetchBranch,\r\n  createBranch,\r\n  updateBranch,\r\n  deleteBranch,\r\n  setDefaultBranch,\r\n  type BranchesParams,\r\n  type Branch,\r\n} from '../api/branches-api';\r\n\r\nexport const branchKeys = {\r\n  all: ['branches'] as const,\r\n  lists: () => [...branchKeys.all, 'list'] as const,\r\n  list: (params: BranchesParams) => [...branchKeys.lists(), params] as const,\r\n  details: () => [...branchKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...branchKeys.details(), id] as const,\r\n};\r\n\r\nexport function useBranches(params: BranchesParams = {}) {\r\n  return useQuery({\r\n    queryKey: branchKeys.list(params),\r\n    queryFn: () => fetchBranches(params),\r\n    staleTime: 10 * 60 * 1000, // Branches rarely change\r\n    gcTime: 60 * 60 * 1000,\r\n    placeholderData: keepPreviousData,\r\n  });\r\n}\r\n\r\nexport function useBranch(id: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: branchKeys.detail(id!),\r\n    queryFn: () => fetchBranch(id!),\r\n    enabled: !!id,\r\n    staleTime: 10 * 60 * 1000,\r\n  });\r\n}\r\n\r\ninterface UseBranchMutationsOptions {\r\n  onCreateSuccess?: (branch: Branch) => void;\r\n  onUpdateSuccess?: (branch: Branch) => void;\r\n  onDeleteSuccess?: () => void;\r\n  onSetDefaultSuccess?: (branch: Branch) => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useBranchMutations(options: UseBranchMutationsOptions = {}) {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const create = useMutation({\r\n    mutationFn: createBranch,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.all });\r\n      options.onCreateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: Partial<Branch> }) => \r\n      updateBranch(systemId, data),\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.lists() });\r\n      options.onUpdateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: deleteBranch,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.all });\r\n      options.onDeleteSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const makeDefault = useMutation({\r\n    mutationFn: setDefaultBranch,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: branchKeys.all });\r\n      options.onSetDefaultSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  return { create, update, remove, makeDefault };\r\n}\r\n\r\nexport function useAllBranches() {\r\n  return useBranches({ limit: 100 });\r\n}\r\n\r\nexport function useDefaultBranch() {\r\n  const { data, ...rest } = useBranches({ isDefault: true, limit: 1 });\r\n  return {\r\n    ...rest,\r\n    data: data?.data?.[0] ?? null,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;CAIC,GAED;AAAA;AAAA;AAAA;AACA;;;;AAWO,MAAM,aAAa;IACxB,KAAK;QAAC;KAAW;IACjB,OAAO,IAAM;eAAI,WAAW,GAAG;YAAE;SAAO;IACxC,MAAM,CAAC,SAA2B;eAAI,WAAW,KAAK;YAAI;SAAO;IACjE,SAAS,IAAM;eAAI,WAAW,GAAG;YAAE;SAAS;IAC5C,QAAQ,CAAC,KAAe;eAAI,WAAW,OAAO;YAAI;SAAG;AACvD;AAEO,SAAS,YAAY,SAAyB,CAAC,CAAC;;IACrD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,WAAW,IAAI,CAAC;QAC1B,OAAO;oCAAE,IAAM,IAAA,8KAAa,EAAC;;QAC7B,WAAW,KAAK,KAAK;QACrB,QAAQ,KAAK,KAAK;QAClB,iBAAiB,8LAAgB;IACnC;AACF;GARgB;;QACP,0LAAQ;;;AASV,SAAS,UAAU,EAA6B;;IACrD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,WAAW,MAAM,CAAC;QAC5B,OAAO;kCAAE,IAAM,IAAA,4KAAW,EAAC;;QAC3B,SAAS,CAAC,CAAC;QACX,WAAW,KAAK,KAAK;IACvB;AACF;IAPgB;;QACP,0LAAQ;;;AAgBV,SAAS,mBAAmB,UAAqC,CAAC,CAAC;;IACxE,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,6KAAY;QACxB,SAAS;sDAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,GAAG;gBAAC;gBACzD,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;sDAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAA+C,GAC1E,IAAA,6KAAY,EAAC,UAAU;;QACzB,SAAS;sDAAE,CAAC,MAAM;gBAChB,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,MAAM,CAAC,UAAU,QAAQ;gBAAE;gBAChF,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,KAAK;gBAAG;gBAC7D,QAAQ,eAAe,GAAG;YAC5B;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,6KAAY;QACxB,SAAS;sDAAE;gBACT,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,GAAG;gBAAC;gBACzD,QAAQ,eAAe;YACzB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,cAAc,IAAA,gMAAW,EAAC;QAC9B,YAAY,iLAAgB;QAC5B,SAAS;2DAAE,CAAC;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,WAAW,GAAG;gBAAC;gBACzD,QAAQ,mBAAmB,GAAG;YAChC;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QAAE;QAAQ;QAAQ;QAAQ;IAAY;AAC/C;IA1CgB;;QACM,2MAAc;QAEnB,gMAAW;QASX,gMAAW;QAWX,gMAAW;QASN,gMAAW;;;AAY1B,SAAS;;IACd,OAAO,YAAY;QAAE,OAAO;IAAI;AAClC;IAFgB;;QACP;;;AAGF,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,GAAG,YAAY;QAAE,WAAW;QAAM,OAAO;IAAE;IAClE,OAAO;QACL,GAAG,IAAI;QACP,MAAM,MAAM,MAAM,CAAC,EAAE,IAAI;IAC3B;AACF;IANgB;;QACY"}},
    {"offset": {"line": 2756, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/hooks/use-all-branches.ts"],"sourcesContent":["/**\r\n * useAllBranches - Convenience hook for components needing all branches as flat array\r\n * \r\n * Use case: Dropdowns, selects that need branch options\r\n * \r\n * ‚ö†Ô∏è For paginated views, use useBranches() instead\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useBranches } from './use-branches';\r\nimport type { Branch } from '../types';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\n/**\r\n * Returns all branches as a flat array\r\n * Compatible with legacy store pattern: { data: branches }\r\n * \r\n * Note: API returns string systemIds, but we cast to Branch[] for internal use\r\n */\r\nexport function useAllBranches() {\r\n  const query = useBranches({ limit: 100 });\r\n  \r\n  return {\r\n    // Cast to Branch[] - API returns string systemId, but we trust the data structure\r\n    data: (query.data?.data || []) as unknown as Branch[],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns branches formatted as options for Select/Combobox\r\n */\r\nexport function useBranchOptions() {\r\n  const { data, isLoading } = useAllBranches();\r\n  \r\n  const options = data.map(b => ({\r\n    value: b.systemId,\r\n    label: b.name,\r\n  }));\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Returns the default branch\r\n */\r\nexport function useDefaultBranch() {\r\n  const { data, isLoading } = useAllBranches();\r\n  const defaultBranch = data.find(b => b.isDefault) || data[0];\r\n  \r\n  return { defaultBranch, isLoading };\r\n}\r\n\r\n/**\r\n * Helper hook to find a branch by ID from cached data\r\n * Replaces legacy findById() method\r\n */\r\nexport function useBranchFinder() {\r\n  const { data } = useAllBranches();\r\n  \r\n  const findById = React.useCallback(\r\n    (systemId: SystemId | string | undefined) => {\r\n      if (!systemId) return undefined;\r\n      return data.find(b => b.systemId === systemId);\r\n    },\r\n    [data]\r\n  );\r\n  \r\n  return { findById };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;CAMC,GAED;AACA;;;;AAUO,SAAS;;IACd,MAAM,QAAQ,IAAA,8KAAW,EAAC;QAAE,OAAO;IAAI;IAEvC,OAAO;QACL,kFAAkF;QAClF,MAAO,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC7B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GAVgB;;QACA,8KAAW;;;AAcpB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YAC7B,OAAO,EAAE,QAAQ;YACjB,OAAO,EAAE,IAAI;QACf,CAAC;IAED,OAAO;QAAE;QAAS;IAAU;AAC9B;IATgB;;QACc;;;AAavB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAC5B,MAAM,gBAAgB,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,SAAS,KAAK,IAAI,CAAC,EAAE;IAE5D,OAAO;QAAE;QAAe;IAAU;AACpC;IALgB;;QACc;;;AAUvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,4KAAiB;iDAChC,CAAC;YACC,IAAI,CAAC,UAAU,OAAO;YACtB,OAAO,KAAK,IAAI;yDAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;gDACA;QAAC;KAAK;IAGR,OAAO;QAAE;IAAS;AACpB;IAZgB;;QACG"}},
    {"offset": {"line": 2855, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/store-info/api/store-info-api.ts"],"sourcesContent":["/**\r\n * Store Info Settings API Layer\r\n * Handles all store information settings API calls\r\n */\r\n\r\nimport type { StoreGeneralInfo, StoreGeneralInfoInput } from '../store-info-store';\r\n\r\nconst BASE_URL = '/api/settings/store-info';\r\n\r\n/**\r\n * Fetch store information\r\n */\r\nexport async function fetchStoreInfo(): Promise<StoreGeneralInfo> {\r\n  const response = await fetch(BASE_URL);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch store info');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Update store information\r\n */\r\nexport async function updateStoreInfo(\r\n  data: StoreGeneralInfoInput,\r\n  metadata?: { updatedBySystemId?: string; updatedByName?: string }\r\n): Promise<StoreGeneralInfo> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ ...data, ...metadata }),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to update store info');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Reset store info to defaults\r\n */\r\nexport async function resetStoreInfo(): Promise<StoreGeneralInfo> {\r\n  const response = await fetch(`${BASE_URL}/reset`, {\r\n    method: 'POST',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to reset store info');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Upload store logo\r\n */\r\nexport async function uploadStoreLogo(file: File): Promise<{ url: string }> {\r\n  const formData = new FormData();\r\n  formData.append('logo', file);\r\n  \r\n  const response = await fetch(`${BASE_URL}/logo`, {\r\n    method: 'POST',\r\n    body: formData,\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to upload logo');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;AAID,MAAM,WAAW;AAKV,eAAe;IACpB,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,gBACpB,IAA2B,EAC3B,QAAiE;IAEjE,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,GAAG,IAAI;YAAE,GAAG,QAAQ;QAAC;IAC9C;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,MAAM,CAAC,EAAE;QAChD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,gBAAgB,IAAU;IAC9C,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,QAAQ;IAExB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,KAAK,CAAC,EAAE;QAC/C,QAAQ;QACR,MAAM;IACR;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 2921, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/store-info/hooks/use-store-info.ts"],"sourcesContent":["/**\r\n * Store Info Settings React Query Hooks\r\n * Provides data fetching and mutations for store information\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchStoreInfo,\r\n  updateStoreInfo,\r\n  resetStoreInfo,\r\n  uploadStoreLogo,\r\n} from '../api/store-info-api';\r\nimport type { StoreGeneralInfoInput } from '../store-info-store';\r\n\r\n// Query keys factory\r\nexport const storeInfoKeys = {\r\n  all: ['store-info'] as const,\r\n  info: () => [...storeInfoKeys.all, 'current'] as const,\r\n};\r\n\r\n/**\r\n * Hook to fetch store information\r\n */\r\nexport function useStoreInfo() {\r\n  return useQuery({\r\n    queryKey: storeInfoKeys.info(),\r\n    queryFn: fetchStoreInfo,\r\n    staleTime: 1000 * 60 * 30, // 30 minutes - info rarely changes\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * Hook providing store info mutations\r\n */\r\nexport function useStoreInfoMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const invalidateInfo = () => {\r\n    queryClient.invalidateQueries({ queryKey: storeInfoKeys.all });\r\n  };\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ \r\n      data, \r\n      metadata \r\n    }: { \r\n      data: StoreGeneralInfoInput; \r\n      metadata?: { updatedBySystemId?: string; updatedByName?: string };\r\n    }) => updateStoreInfo(data, metadata),\r\n    onSuccess: () => {\r\n      invalidateInfo();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const reset = useMutation({\r\n    mutationFn: () => resetStoreInfo(),\r\n    onSuccess: () => {\r\n      invalidateInfo();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const uploadLogo = useMutation({\r\n    mutationFn: (file: File) => uploadStoreLogo(file),\r\n    onSuccess: () => {\r\n      invalidateInfo();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    update,\r\n    reset,\r\n    uploadLogo,\r\n    isLoading: update.isPending || reset.isPending || uploadLogo.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;CAGC,GAED;AAAA;AAAA;AACA;;;;AASO,MAAM,gBAAgB;IAC3B,KAAK;QAAC;KAAa;IACnB,MAAM,IAAM;eAAI,cAAc,GAAG;YAAE;SAAU;AAC/C;AAKO,SAAS;;IACd,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,cAAc,IAAI;QAC5B,SAAS,yLAAc;QACvB,WAAW,OAAO,KAAK;IACzB;AACF;GANgB;;QACP,0LAAQ;;;AAeV,SAAS,sBAAsB,UAA6B,CAAC,CAAC;;IACnE,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,iBAAiB;QACrB,YAAY,iBAAiB,CAAC;YAAE,UAAU,cAAc,GAAG;QAAC;IAC9D;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;yDAAE,CAAC,EACX,IAAI,EACJ,QAAQ,EAIT,GAAK,IAAA,0LAAe,EAAC,MAAM;;QAC5B,SAAS;yDAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,QAAQ,IAAA,gMAAW,EAAC;QACxB,UAAU;wDAAE,IAAM,IAAA,yLAAc;;QAChC,SAAS;wDAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,aAAa,IAAA,gMAAW,EAAC;QAC7B,UAAU;6DAAE,CAAC,OAAe,IAAA,0LAAe,EAAC;;QAC5C,SAAS;6DAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QACA;QACA;QACA,WAAW,OAAO,SAAS,IAAI,MAAM,SAAS,IAAI,WAAW,SAAS;IACxE;AACF;IA9CgB;;QACM,2MAAc;QAMnB,gMAAW;QAeZ,gMAAW;QASN,gMAAW"}},
    {"offset": {"line": 3027, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-settings-page-header.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Settings2 } from 'lucide-react';\r\nimport { usePageHeader, type PageHeaderState, type PageHeaderDocLink } from '../../contexts/page-header-context';\r\nimport type { BreadcrumbItem } from '../../lib/breadcrumb-system';\r\n\r\nexport type SettingsPageHeaderOptions = Omit<PageHeaderState, 'title' | 'docLink'> & {\r\n  title: string;\r\n  icon?: React.ReactNode;\r\n  docLink?: string | PageHeaderDocLink;\r\n};\r\n\r\nconst defaultDocLabel = 'Xem h∆∞·ªõng d·∫´n';\r\nconst baseBreadcrumb: BreadcrumbItem[] = [\r\n  { label: 'Trang ch·ªß', href: '/', isCurrent: false },\r\n  { label: 'C√†i ƒë·∫∑t', href: '/settings', isCurrent: false },\r\n];\r\n\r\nconst normalizeLabel = (label?: string) => label?.trim().toLocaleLowerCase('vi');\r\nconst isHomeCrumb = (item: BreadcrumbItem) => item.href === '/' || normalizeLabel(item.label) === 'trang ch·ªß';\r\nconst isSettingsCrumb = (item: BreadcrumbItem) => item.href === '/settings' || normalizeLabel(item.label) === 'c√†i ƒë·∫∑t';\r\n\r\nexport function useSettingsPageHeader(options: SettingsPageHeaderOptions) {\r\n  const pathname = usePathname();\r\n  const { title, icon, docLink, breadcrumb, ...rest } = options;\r\n\r\n  const normalizedDocLink = React.useMemo<PageHeaderDocLink | undefined>(() => {\r\n    if (!docLink) return undefined;\r\n    if (typeof docLink === 'string') {\r\n      return { href: docLink, label: defaultDocLabel };\r\n    }\r\n    return {\r\n      href: docLink.href,\r\n      label: docLink.label ?? defaultDocLabel,\r\n    };\r\n  }, [docLink]);\r\n\r\n  const decoratedTitle = React.useMemo(() => (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      {(icon ?? <Settings2 className=\"h-5 w-5 text-muted-foreground\" aria-hidden=\"true\" />)}\r\n      <span>{title}</span>\r\n    </span>\r\n  ), [icon, title]);\r\n\r\n  const normalizedBreadcrumb = React.useMemo(() => {\r\n    const custom = (breadcrumb ?? []).map((item) => ({\r\n      ...item,\r\n      href: item.href || pathname,\r\n    }));\r\n\r\n    let merged: BreadcrumbItem[] = custom.length\r\n      ? [...custom]\r\n      : [{ label: title, href: pathname, isCurrent: true }];\r\n\r\n    if (!merged.some(isHomeCrumb)) {\r\n      merged = [{ ...baseBreadcrumb[0] }, ...merged];\r\n    }\r\n\r\n    if (!merged.some(isSettingsCrumb)) {\r\n      const homeIndex = merged.findIndex(isHomeCrumb);\r\n      const insertionIndex = homeIndex >= 0 ? homeIndex + 1 : 0;\r\n      merged = [\r\n        ...merged.slice(0, insertionIndex),\r\n        { ...baseBreadcrumb[1] },\r\n        ...merged.slice(insertionIndex),\r\n      ];\r\n    }\r\n\r\n    return merged.map((item, index) => ({\r\n      ...item,\r\n      isCurrent: index === merged.length - 1,\r\n    }));\r\n  }, [breadcrumb, pathname, title]);\r\n\r\n  return usePageHeader({\r\n    ...rest,\r\n    breadcrumb: normalizedBreadcrumb,\r\n    title: decoratedTitle,\r\n    docLink: normalizedDocLink,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;AASA,MAAM,kBAAkB;AACxB,MAAM,iBAAmC;IACvC;QAAE,OAAO;QAAa,MAAM;QAAK,WAAW;IAAM;IAClD;QAAE,OAAO;QAAW,MAAM;QAAa,WAAW;IAAM;CACzD;AAED,MAAM,iBAAiB,CAAC,QAAmB,OAAO,OAAO,kBAAkB;AAC3E,MAAM,cAAc,CAAC,OAAyB,KAAK,IAAI,KAAK,OAAO,eAAe,KAAK,KAAK,MAAM;AAClG,MAAM,kBAAkB,CAAC,OAAyB,KAAK,IAAI,KAAK,eAAe,eAAe,KAAK,KAAK,MAAM;AAEvG,SAAS,sBAAsB,OAAkC;;IACtE,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;IAEtD,MAAM,oBAAoB,wKAAa;4DAAgC;YACrE,IAAI,CAAC,SAAS,OAAO;YACrB,IAAI,OAAO,YAAY,UAAU;gBAC/B,OAAO;oBAAE,MAAM;oBAAS,OAAO;gBAAgB;YACjD;YACA,OAAO;gBACL,MAAM,QAAQ,IAAI;gBAClB,OAAO,QAAQ,KAAK,IAAI;YAC1B;QACF;2DAAG;QAAC;KAAQ;IAEZ,MAAM,iBAAiB,wKAAa;yDAAC,kBACnC,6LAAC;gBAAK,WAAU;;oBACZ,sBAAQ,6LAAC,gOAAS;wBAAC,WAAU;wBAAgC,eAAY;;;;;;kCAC3E,6LAAC;kCAAM;;;;;;;;;;;;wDAER;QAAC;QAAM;KAAM;IAEhB,MAAM,uBAAuB,wKAAa;+DAAC;YACzC,MAAM,SAAS,CAAC,cAAc,EAAE,EAAE,GAAG;8EAAC,CAAC,OAAS,CAAC;wBAC/C,GAAG,IAAI;wBACP,MAAM,KAAK,IAAI,IAAI;oBACrB,CAAC;;YAED,IAAI,SAA2B,OAAO,MAAM,GACxC;mBAAI;aAAO,GACX;gBAAC;oBAAE,OAAO;oBAAO,MAAM;oBAAU,WAAW;gBAAK;aAAE;YAEvD,IAAI,CAAC,OAAO,IAAI,CAAC,cAAc;gBAC7B,SAAS;oBAAC;wBAAE,GAAG,cAAc,CAAC,EAAE;oBAAC;uBAAM;iBAAO;YAChD;YAEA,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB;gBACjC,MAAM,YAAY,OAAO,SAAS,CAAC;gBACnC,MAAM,iBAAiB,aAAa,IAAI,YAAY,IAAI;gBACxD,SAAS;uBACJ,OAAO,KAAK,CAAC,GAAG;oBACnB;wBAAE,GAAG,cAAc,CAAC,EAAE;oBAAC;uBACpB,OAAO,KAAK,CAAC;iBACjB;YACH;YAEA,OAAO,OAAO,GAAG;uEAAC,CAAC,MAAM,QAAU,CAAC;wBAClC,GAAG,IAAI;wBACP,WAAW,UAAU,OAAO,MAAM,GAAG;oBACvC,CAAC;;QACH;8DAAG;QAAC;QAAY;QAAU;KAAM;IAEhC,OAAO,IAAA,0JAAa,EAAC;QACnB,GAAG,IAAI;QACP,YAAY;QACZ,OAAO;QACP,SAAS;IACX;AACF;GA1DgB;;QACG,oJAAW;QAmDrB,0JAAa"}},
    {"offset": {"line": 3176, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/inventory/api/product-types-api.ts"],"sourcesContent":["/**\r\n * Product Types API service\r\n */\r\n\r\nimport type { ProductType } from '../types';\r\n\r\nconst API_ENDPOINT = '/api/settings/product-types';\r\n\r\nexport interface ProductTypesResponse {\r\n  data: ProductType[];\r\n  pagination?: {\r\n    total: number;\r\n    page: number;\r\n    limit: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport async function fetchProductTypes(\r\n  params?: { limit?: number; page?: number }\r\n): Promise<ProductTypesResponse> {\r\n  const queryParams = new URLSearchParams();\r\n  if (params?.limit) queryParams.set('limit', String(params.limit));\r\n  if (params?.page) queryParams.set('page', String(params.page));\r\n  \r\n  const url = queryParams.toString() \r\n    ? `${API_ENDPOINT}?${queryParams}` \r\n    : API_ENDPOINT;\r\n    \r\n  const response = await fetch(url, { credentials: 'include' });\r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch product types');\r\n  }\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchProductTypeById(systemId: string): Promise<ProductType> {\r\n  const response = await fetch(`${API_ENDPOINT}/${systemId}`, { \r\n    credentials: 'include' \r\n  });\r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch product type');\r\n  }\r\n  const json = await response.json();\r\n  return json.data || json;\r\n}\r\n\r\nexport async function createProductType(\r\n  data: Omit<ProductType, 'systemId' | 'createdAt' | 'updatedAt'>\r\n): Promise<ProductType> {\r\n  const response = await fetch(API_ENDPOINT, {\r\n    method: 'POST',\r\n    credentials: 'include',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error('Failed to create product type');\r\n  }\r\n  const json = await response.json();\r\n  return json.data || json;\r\n}\r\n\r\nexport async function updateProductType(\r\n  systemId: string,\r\n  data: Partial<ProductType>\r\n): Promise<ProductType> {\r\n  const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n    method: 'PATCH',\r\n    credentials: 'include',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error('Failed to update product type');\r\n  }\r\n  const json = await response.json();\r\n  return json.data || json;\r\n}\r\n\r\nexport async function deleteProductType(systemId: string): Promise<void> {\r\n  const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n    method: 'DELETE',\r\n    credentials: 'include',\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error('Failed to delete product type');\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;AAID,MAAM,eAAe;AAYd,eAAe,kBACpB,MAA0C;IAE1C,MAAM,cAAc,IAAI;IACxB,IAAI,QAAQ,OAAO,YAAY,GAAG,CAAC,SAAS,OAAO,OAAO,KAAK;IAC/D,IAAI,QAAQ,MAAM,YAAY,GAAG,CAAC,QAAQ,OAAO,OAAO,IAAI;IAE5D,MAAM,MAAM,YAAY,QAAQ,KAC5B,GAAG,aAAa,CAAC,EAAE,aAAa,GAChC;IAEJ,MAAM,WAAW,MAAM,MAAM,KAAK;QAAE,aAAa;IAAU;IAC3D,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,qBAAqB,QAAgB;IACzD,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,UAAU,EAAE;QAC1D,aAAa;IACf;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,IAAI,IAAI;AACtB;AAEO,eAAe,kBACpB,IAA+D;IAE/D,MAAM,WAAW,MAAM,MAAM,cAAc;QACzC,QAAQ;QACR,aAAa;QACb,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,IAAI,IAAI;AACtB;AAEO,eAAe,kBACpB,QAAgB,EAChB,IAA0B;IAE1B,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,UAAU,EAAE;QAC1D,QAAQ;QACR,aAAa;QACb,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,IAAI,IAAI;AACtB;AAEO,eAAe,kBAAkB,QAAgB;IACtD,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,UAAU,EAAE;QAC1D,QAAQ;QACR,aAAa;IACf;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 3260, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/inventory/hooks/use-product-types.ts"],"sourcesContent":["/**\r\n * useProductTypes - React Query hooks for product types\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport * as api from '../api/product-types-api';\r\nimport type { ProductType } from '../types';\r\n\r\nexport const productTypeKeys = {\r\n  all: ['product-types'] as const,\r\n  lists: () => [...productTypeKeys.all, 'list'] as const,\r\n  list: (params?: { limit?: number; page?: number }) => \r\n    [...productTypeKeys.lists(), params] as const,\r\n  details: () => [...productTypeKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...productTypeKeys.details(), id] as const,\r\n};\r\n\r\nexport function useProductTypes(params?: { limit?: number; page?: number }) {\r\n  return useQuery({\r\n    queryKey: productTypeKeys.list(params),\r\n    queryFn: () => api.fetchProductTypes(params),\r\n    staleTime: 1000 * 60 * 10, // 10 minutes - settings don't change often\r\n  });\r\n}\r\n\r\nexport function useProductType(systemId: string) {\r\n  return useQuery({\r\n    queryKey: productTypeKeys.detail(systemId),\r\n    queryFn: () => api.fetchProductTypeById(systemId),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useProductTypeMutations() {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const invalidateProductTypes = () => {\r\n    queryClient.invalidateQueries({ queryKey: productTypeKeys.all });\r\n  };\r\n  \r\n  const create = useMutation({\r\n    mutationFn: api.createProductType,\r\n    onSuccess: invalidateProductTypes,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: Partial<ProductType> }) =>\r\n      api.updateProductType(systemId, data),\r\n    onSuccess: invalidateProductTypes,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: api.deleteProductType,\r\n    onSuccess: invalidateProductTypes,\r\n  });\r\n  \r\n  return { create, update, remove };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;CAEC,GAED;AAAA;AAAA;AACA;;;;AAGO,MAAM,kBAAkB;IAC7B,KAAK;QAAC;KAAgB;IACtB,OAAO,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAO;IAC7C,MAAM,CAAC,SACL;eAAI,gBAAgB,KAAK;YAAI;SAAO;IACtC,SAAS,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAS;IACjD,QAAQ,CAAC,KAAe;eAAI,gBAAgB,OAAO;YAAI;SAAG;AAC5D;AAEO,SAAS,gBAAgB,MAA0C;;IACxE,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,gBAAgB,IAAI,CAAC;QAC/B,OAAO;wCAAE,IAAM,2LAAqB,CAAC;;QACrC,WAAW,OAAO,KAAK;IACzB;AACF;GANgB;;QACP,0LAAQ;;;AAOV,SAAS,eAAe,QAAgB;;IAC7C,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,gBAAgB,MAAM,CAAC;QACjC,OAAO;uCAAE,IAAM,8LAAwB,CAAC;;QACxC,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IACzB;AACF;IAPgB;;QACP,0LAAQ;;;AAQV,SAAS;;IACd,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,yBAAyB;QAC7B,YAAY,iBAAiB,CAAC;YAAE,UAAU,gBAAgB,GAAG;QAAC;IAChE;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,2LAAqB;QACjC,WAAW;IACb;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;2DAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAoD,GAC/E,2LAAqB,CAAC,UAAU;;QAClC,WAAW;IACb;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,YAAY,2LAAqB;QACjC,WAAW;IACb;IAEA,OAAO;QAAE;QAAQ;QAAQ;IAAO;AAClC;IAxBgB;;QACM,2MAAc;QAMnB,gMAAW;QAKX,gMAAW;QAMX,gMAAW"}},
    {"offset": {"line": 3374, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/inventory/hooks/use-all-product-types.ts"],"sourcesContent":["/**\r\n * useAllProductTypes - Convenience hook for components needing all product types as flat array\r\n * \r\n * Replaces legacy useProductTypeStore().data pattern\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useProductTypes } from './use-product-types';\r\nimport type { ProductType } from '../types';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\n/**\r\n * Returns all product types as a flat array\r\n * Compatible with legacy store pattern: { data: productTypes }\r\n */\r\nexport function useAllProductTypes() {\r\n  const query = useProductTypes({ limit: 50 });\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns only active product types\r\n * Replaces legacy getActive() method\r\n */\r\nexport function useActiveProductTypes() {\r\n  const { data, isLoading, isError, error } = useAllProductTypes();\r\n  \r\n  const activeTypes = React.useMemo(\r\n    () => data.filter(pt => !pt.isDeleted && pt.isActive !== false),\r\n    [data]\r\n  );\r\n  \r\n  return { data: activeTypes, isLoading, isError, error };\r\n}\r\n\r\n/**\r\n * Returns product types formatted as options for Select/Combobox\r\n */\r\nexport function useProductTypeOptions() {\r\n  const { data, isLoading } = useActiveProductTypes();\r\n  \r\n  const options = React.useMemo(\r\n    () => data.map(pt => ({\r\n      value: pt.systemId,\r\n      label: pt.name,\r\n    })),\r\n    [data]\r\n  );\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Returns the default product type\r\n */\r\nexport function useDefaultProductType() {\r\n  const { data, isLoading } = useActiveProductTypes();\r\n  const defaultType = data.find(pt => pt.isDefault) || data[0];\r\n  \r\n  return { defaultType, isLoading };\r\n}\r\n\r\n/**\r\n * Helper hook to find a product type by ID from cached data\r\n * Replaces legacy findById() method\r\n * \r\n * Usage:\r\n *   const { findById } = useProductTypeFinder();\r\n *   const productType = findById(someSystemId);\r\n */\r\nexport function useProductTypeFinder() {\r\n  const { data } = useAllProductTypes();\r\n  \r\n  const findById = React.useCallback(\r\n    (systemId: SystemId | string | undefined): ProductType | undefined => {\r\n      if (!systemId) return undefined;\r\n      return data.find(pt => pt.systemId === systemId && !pt.isDeleted);\r\n    },\r\n    [data]\r\n  );\r\n  \r\n  return { findById };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;CAIC,GAED;AACA;;;;AAQO,SAAS;;IACd,MAAM,QAAQ,IAAA,2LAAe,EAAC;QAAE,OAAO;IAAG;IAE1C,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GATgB;;QACA,2LAAe;;;AAcxB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG;IAE5C,MAAM,cAAc,wKAAa;sDAC/B,IAAM,KAAK,MAAM;8DAAC,CAAA,KAAM,CAAC,GAAG,SAAS,IAAI,GAAG,QAAQ,KAAK;;qDACzD;QAAC;KAAK;IAGR,OAAO;QAAE,MAAM;QAAa;QAAW;QAAS;IAAM;AACxD;IATgB;;QAC8B;;;AAavC,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,wKAAa;kDAC3B,IAAM,KAAK,GAAG;0DAAC,CAAA,KAAM,CAAC;wBACpB,OAAO,GAAG,QAAQ;wBAClB,OAAO,GAAG,IAAI;oBAChB,CAAC;;iDACD;QAAC;KAAK;IAGR,OAAO;QAAE;QAAS;IAAU;AAC9B;IAZgB;;QACc;;;AAgBvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAC5B,MAAM,cAAc,KAAK,IAAI,CAAC,CAAA,KAAM,GAAG,SAAS,KAAK,IAAI,CAAC,EAAE;IAE5D,OAAO;QAAE;QAAa;IAAU;AAClC;IALgB;;QACc;;;AAcvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,4KAAiB;sDAChC,CAAC;YACC,IAAI,CAAC,UAAU,OAAO;YACtB,OAAO,KAAK,IAAI;8DAAC,CAAA,KAAM,GAAG,QAAQ,KAAK,YAAY,CAAC,GAAG,SAAS;;QAClE;qDACA;QAAC;KAAK;IAGR,OAAO;QAAE;IAAS;AACpB;IAZgB;;QACG"}},
    {"offset": {"line": 3500, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/api/pricing-api.ts"],"sourcesContent":["/**\r\n * Pricing Settings API Layer\r\n * Handles all pricing policy-related API calls\r\n */\r\n\r\nimport type { PricingPolicy } from '../types';\r\n\r\nexport interface PricingPolicyFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  type?: 'Nh·∫≠p h√†ng' | 'B√°n h√†ng';\r\n  isActive?: boolean;\r\n}\r\n\r\nexport interface PricingPolicyResponse {\r\n  data: PricingPolicy[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface PricingPolicyCreateInput {\r\n  systemId?: string;\r\n  id?: string;\r\n  name: string;\r\n  description?: string;\r\n  type: 'Nh·∫≠p h√†ng' | 'B√°n h√†ng';\r\n  isDefault?: boolean;\r\n  isActive?: boolean;\r\n}\r\n\r\nexport interface PricingPolicyUpdateInput extends Partial<PricingPolicyCreateInput> {}\r\n\r\nconst BASE_URL = '/api/settings/pricing-policies';\r\nconst LEGACY_URL = '/api/settings/data?type=pricing-policy';\r\n\r\n/**\r\n * Fetch pricing policies with filters\r\n */\r\nexport async function fetchPricingPolicies(\r\n  filters: PricingPolicyFilters = {}\r\n): Promise<PricingPolicyResponse> {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (filters.page) params.set('page', String(filters.page));\r\n  if (filters.limit) params.set('limit', String(filters.limit));\r\n  if (filters.type) params.set('type', filters.type);\r\n  if (filters.isActive !== undefined) params.set('isActive', String(filters.isActive));\r\n\r\n  // Try new endpoint first, fallback to legacy\r\n  let url = params.toString() ? `${BASE_URL}?${params}` : BASE_URL;\r\n  let response = await fetch(url);\r\n  \r\n  // Fallback to legacy endpoint\r\n  if (!response.ok && response.status === 404) {\r\n    url = `${LEGACY_URL}${params.toString() ? '&' + params : ''}`;\r\n    response = await fetch(url);\r\n  }\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch pricing policies');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Fetch single pricing policy by ID\r\n */\r\nexport async function fetchPricingPolicyById(\r\n  systemId: string\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Create new pricing policy\r\n */\r\nexport async function createPricingPolicy(\r\n  data: PricingPolicyCreateInput\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to create pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Update pricing policy\r\n */\r\nexport async function updatePricingPolicy(\r\n  systemId: string,\r\n  data: PricingPolicyUpdateInput\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to update pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Delete pricing policy\r\n */\r\nexport async function deletePricingPolicy(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to delete pricing policy');\r\n  }\r\n}\r\n\r\n/**\r\n * Set default pricing policy for type\r\n */\r\nexport async function setDefaultPricingPolicy(\r\n  systemId: string\r\n): Promise<PricingPolicy> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default`, {\r\n    method: 'POST',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to set default pricing policy');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Get active pricing policies\r\n */\r\nexport async function fetchActivePricingPolicies(): Promise<PricingPolicy[]> {\r\n  const response = await fetchPricingPolicies({ isActive: true, limit: 100 });\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Get pricing policies by type\r\n */\r\nexport async function fetchPricingPoliciesByType(\r\n  type: 'Nh·∫≠p h√†ng' | 'B√°n h√†ng'\r\n): Promise<PricingPolicy[]> {\r\n  const response = await fetchPricingPolicies({ type, isActive: true, limit: 100 });\r\n  return response.data;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;;;AAiCD,MAAM,WAAW;AACjB,MAAM,aAAa;AAKZ,eAAe,qBACpB,UAAgC,CAAC,CAAC;IAElC,MAAM,SAAS,IAAI;IAEnB,IAAI,QAAQ,IAAI,EAAE,OAAO,GAAG,CAAC,QAAQ,OAAO,QAAQ,IAAI;IACxD,IAAI,QAAQ,KAAK,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO,QAAQ,KAAK;IAC3D,IAAI,QAAQ,IAAI,EAAE,OAAO,GAAG,CAAC,QAAQ,QAAQ,IAAI;IACjD,IAAI,QAAQ,QAAQ,KAAK,WAAW,OAAO,GAAG,CAAC,YAAY,OAAO,QAAQ,QAAQ;IAElF,6CAA6C;IAC7C,IAAI,MAAM,OAAO,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,QAAQ,GAAG;IACxD,IAAI,WAAW,MAAM,MAAM;IAE3B,8BAA8B;IAC9B,IAAI,CAAC,SAAS,EAAE,IAAI,SAAS,MAAM,KAAK,KAAK;QAC3C,MAAM,GAAG,aAAa,OAAO,QAAQ,KAAK,MAAM,SAAS,IAAI;QAC7D,WAAW,MAAM,MAAM;IACzB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,uBACpB,QAAgB;IAEhB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IAEtD,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBACpB,IAA8B;IAE9B,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBACpB,QAAgB,EAChB,IAA8B;IAE9B,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,oBAAoB,QAAgB;IACxD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;AACF;AAKO,eAAe,wBACpB,QAAgB;IAEhB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAClE,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM,qBAAqB;QAAE,UAAU;QAAM,OAAO;IAAI;IACzE,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,2BACpB,IAA8B;IAE9B,MAAM,WAAW,MAAM,qBAAqB;QAAE;QAAM,UAAU;QAAM,OAAO;IAAI;IAC/E,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 3616, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/hooks/use-pricing.ts"],"sourcesContent":["/**\r\n * Pricing Settings React Query Hooks\r\n * Provides data fetching and mutations for pricing policies\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchPricingPolicies,\r\n  fetchPricingPolicyById,\r\n  createPricingPolicy,\r\n  updatePricingPolicy,\r\n  deletePricingPolicy,\r\n  setDefaultPricingPolicy,\r\n  fetchActivePricingPolicies,\r\n  fetchPricingPoliciesByType,\r\n  type PricingPolicyFilters,\r\n  type PricingPolicyCreateInput,\r\n  type PricingPolicyUpdateInput,\r\n} from '../api/pricing-api';\r\n\r\n// Query keys factory\r\nexport const pricingPolicyKeys = {\r\n  all: ['pricing-policies'] as const,\r\n  lists: () => [...pricingPolicyKeys.all, 'list'] as const,\r\n  list: (filters: PricingPolicyFilters) => [...pricingPolicyKeys.lists(), filters] as const,\r\n  details: () => [...pricingPolicyKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...pricingPolicyKeys.details(), id] as const,\r\n  active: () => [...pricingPolicyKeys.all, 'active'] as const,\r\n  byType: (type: string) => [...pricingPolicyKeys.all, 'type', type] as const,\r\n};\r\n\r\n/**\r\n * Hook to fetch pricing policies with filters\r\n */\r\nexport function usePricingPolicies(filters: PricingPolicyFilters = {}) {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.list(filters),\r\n    queryFn: () => fetchPricingPolicies(filters),\r\n    staleTime: 1000 * 60 * 10, // 10 minutes - rarely changes\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch active pricing policies\r\n */\r\nexport function useActivePricingPolicies() {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.active(),\r\n    queryFn: fetchActivePricingPolicies,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch pricing policies by type\r\n */\r\nexport function usePricingPoliciesByType(type: 'Nh·∫≠p h√†ng' | 'B√°n h√†ng') {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.byType(type),\r\n    queryFn: () => fetchPricingPoliciesByType(type),\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch single pricing policy\r\n */\r\nexport function usePricingPolicyById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: pricingPolicyKeys.detail(systemId!),\r\n    queryFn: () => fetchPricingPolicyById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * Hook providing pricing policy mutations\r\n */\r\nexport function usePricingPolicyMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const invalidatePolicies = () => {\r\n    queryClient.invalidateQueries({ queryKey: pricingPolicyKeys.all });\r\n  };\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: PricingPolicyCreateInput) => createPricingPolicy(data),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: PricingPolicyUpdateInput }) =>\r\n      updatePricingPolicy(systemId, data),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deletePricingPolicy(systemId),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefault = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultPricingPolicy(systemId),\r\n    onSuccess: () => {\r\n      invalidatePolicies();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create,\r\n    update,\r\n    remove,\r\n    setDefault,\r\n    isLoading:\r\n      create.isPending || update.isPending || remove.isPending || setDefault.isPending,\r\n  };\r\n}\r\n\r\n/**\r\n * Hook to get sale pricing policies\r\n */\r\nexport function useSalePricingPolicies() {\r\n  return usePricingPoliciesByType('B√°n h√†ng');\r\n}\r\n\r\n/**\r\n * Hook to get purchase pricing policies\r\n */\r\nexport function usePurchasePricingPolicies() {\r\n  return usePricingPoliciesByType('Nh·∫≠p h√†ng');\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3831, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pricing/hooks/use-all-pricing-policies.ts"],"sourcesContent":["/**\r\n * useAllPricingPolicies - Convenience hook for components needing all policies as flat array\r\n */\r\n\r\nimport { usePricingPolicies as usePricingPoliciesQuery } from './use-pricing';\r\n\r\n// Re-export for backward compatibility\r\nexport { usePricingPolicies } from './use-pricing';\r\n\r\nexport function useAllPricingPolicies() {\r\n  const query = usePricingPoliciesQuery({});\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\nexport function useDefaultSellingPolicy() {\r\n  const { data, isLoading } = useAllPricingPolicies();\r\n  const defaultPolicy = data.find(p => p.type === 'B√°n h√†ng' && p.isDefault);\r\n  \r\n  return { defaultPolicy, isLoading };\r\n}\r\n\r\nexport function useSellingPolicies() {\r\n  const { data, isLoading } = useAllPricingPolicies();\r\n  const sellingPolicies = data.filter(p => p.type === 'B√°n h√†ng');\r\n  \r\n  return { data: sellingPolicies, isLoading };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;CAEC,GAED;;;;AAKO,SAAS;;IACd,MAAM,QAAQ,IAAA,mLAAuB,EAAC,CAAC;IAEvC,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GATgB;;QACA,mLAAuB;;;AAUhC,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAC5B,MAAM,gBAAgB,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,cAAc,EAAE,SAAS;IAEzE,OAAO;QAAE;QAAe;IAAU;AACpC;IALgB;;QACc;;;AAMvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAC5B,MAAM,kBAAkB,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;IAEpD,OAAO;QAAE,MAAM;QAAiB;IAAU;AAC5C;IALgB;;QACc"}},
    {"offset": {"line": 3895, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/taxes/api/taxes-api.ts"],"sourcesContent":["/**\r\n * Taxes Settings API Layer\r\n * Handles all tax-related API calls\r\n */\r\n\r\nimport type { Tax } from '../types';\r\n\r\nexport interface TaxFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  isDefaultSale?: boolean;\r\n  isDefaultPurchase?: boolean;\r\n}\r\n\r\nexport interface TaxResponse {\r\n  data: Tax[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface TaxCreateInput {\r\n  systemId?: string;\r\n  id?: string;\r\n  name: string;\r\n  rate: number;\r\n  description?: string;\r\n  isDefaultSale?: boolean;\r\n  isDefaultPurchase?: boolean;\r\n}\r\n\r\nexport interface TaxUpdateInput extends Partial<TaxCreateInput> {}\r\n\r\nconst BASE_URL = '/api/settings/taxes';\r\nconst LEGACY_URL = '/api/settings/data?type=tax';\r\n\r\n/**\r\n * Fetch taxes with filters\r\n */\r\nexport async function fetchTaxes(\r\n  filters: TaxFilters = {}\r\n): Promise<TaxResponse> {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (filters.page) params.set('page', String(filters.page));\r\n  if (filters.limit) params.set('limit', String(filters.limit));\r\n  if (filters.isDefaultSale !== undefined) params.set('isDefaultSale', String(filters.isDefaultSale));\r\n  if (filters.isDefaultPurchase !== undefined) params.set('isDefaultPurchase', String(filters.isDefaultPurchase));\r\n\r\n  // Try new endpoint first, fallback to legacy\r\n  let url = params.toString() ? `${BASE_URL}?${params}` : BASE_URL;\r\n  let response = await fetch(url);\r\n  \r\n  // Fallback to legacy endpoint\r\n  if (!response.ok && response.status === 404) {\r\n    url = `${LEGACY_URL}${params.toString() ? '&' + params : ''}`;\r\n    response = await fetch(url);\r\n  }\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch taxes');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Fetch single tax by ID\r\n */\r\nexport async function fetchTaxById(\r\n  systemId: string\r\n): Promise<Tax> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch tax');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Create new tax\r\n */\r\nexport async function createTax(\r\n  data: TaxCreateInput\r\n): Promise<Tax> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to create tax');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Update tax\r\n */\r\nexport async function updateTax(\r\n  systemId: string,\r\n  data: TaxUpdateInput\r\n): Promise<Tax> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to update tax');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Delete tax\r\n */\r\nexport async function deleteTax(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to delete tax');\r\n  }\r\n}\r\n\r\n/**\r\n * Set default tax for sales\r\n */\r\nexport async function setDefaultSaleTax(\r\n  systemId: string\r\n): Promise<Tax> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default-sale`, {\r\n    method: 'POST',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to set default sale tax');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Set default tax for purchases\r\n */\r\nexport async function setDefaultPurchaseTax(\r\n  systemId: string\r\n): Promise<Tax> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default-purchase`, {\r\n    method: 'POST',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to set default purchase tax');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Get all taxes\r\n */\r\nexport async function fetchAllTaxes(): Promise<Tax[]> {\r\n  const response = await fetchTaxes({ limit: 100 });\r\n  return response.data;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4011, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/taxes/hooks/use-taxes.ts"],"sourcesContent":["/**\r\n * Taxes Settings React Query Hooks\r\n * Provides data fetching and mutations for taxes\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchTaxes,\r\n  fetchTaxById,\r\n  createTax,\r\n  updateTax,\r\n  deleteTax,\r\n  setDefaultSaleTax,\r\n  setDefaultPurchaseTax,\r\n  fetchAllTaxes,\r\n  type TaxFilters,\r\n  type TaxCreateInput,\r\n  type TaxUpdateInput,\r\n} from '../api/taxes-api';\r\n\r\n// Query keys factory\r\nexport const taxKeys = {\r\n  all: ['taxes'] as const,\r\n  lists: () => [...taxKeys.all, 'list'] as const,\r\n  list: (filters: TaxFilters) => [...taxKeys.lists(), filters] as const,\r\n  details: () => [...taxKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...taxKeys.details(), id] as const,\r\n};\r\n\r\n/**\r\n * Hook to fetch taxes with filters\r\n */\r\nexport function useTaxes(filters: TaxFilters = {}) {\r\n  return useQuery({\r\n    queryKey: taxKeys.list(filters),\r\n    queryFn: () => fetchTaxes(filters),\r\n    staleTime: 1000 * 60 * 10, // 10 minutes - rarely changes\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch all taxes\r\n */\r\nexport function useAllTaxes() {\r\n  return useQuery({\r\n    queryKey: taxKeys.lists(),\r\n    queryFn: fetchAllTaxes,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch single tax\r\n */\r\nexport function useTaxById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: taxKeys.detail(systemId!),\r\n    queryFn: () => fetchTaxById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * Hook providing tax mutations\r\n */\r\nexport function useTaxMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const invalidateTaxes = () => {\r\n    queryClient.invalidateQueries({ queryKey: taxKeys.all });\r\n  };\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: TaxCreateInput) => createTax(data),\r\n    onSuccess: () => {\r\n      invalidateTaxes();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: TaxUpdateInput }) =>\r\n      updateTax(systemId, data),\r\n    onSuccess: () => {\r\n      invalidateTaxes();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deleteTax(systemId),\r\n    onSuccess: () => {\r\n      invalidateTaxes();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefaultSale = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultSaleTax(systemId),\r\n    onSuccess: () => {\r\n      invalidateTaxes();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefaultPurchase = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultPurchaseTax(systemId),\r\n    onSuccess: () => {\r\n      invalidateTaxes();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create,\r\n    update,\r\n    remove,\r\n    setDefaultSale,\r\n    setDefaultPurchase,\r\n    isLoading:\r\n      create.isPending ||\r\n      update.isPending ||\r\n      remove.isPending ||\r\n      setDefaultSale.isPending ||\r\n      setDefaultPurchase.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;CAGC,GAED;AAAA;AAAA;AACA;;;;AAeO,MAAM,UAAU;IACrB,KAAK;QAAC;KAAQ;IACd,OAAO,IAAM;eAAI,QAAQ,GAAG;YAAE;SAAO;IACrC,MAAM,CAAC,UAAwB;eAAI,QAAQ,KAAK;YAAI;SAAQ;IAC5D,SAAS,IAAM;eAAI,QAAQ,GAAG;YAAE;SAAS;IACzC,QAAQ,CAAC,KAAe;eAAI,QAAQ,OAAO;YAAI;SAAG;AACpD;AAKO,SAAS,SAAS,UAAsB,CAAC,CAAC;;IAC/C,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,QAAQ,IAAI,CAAC;QACvB,OAAO;iCAAE,IAAM,IAAA,qKAAU,EAAC;;QAC1B,WAAW,OAAO,KAAK;IACzB;AACF;GANgB;;QACP,0LAAQ;;;AAUV,SAAS;;IACd,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,QAAQ,KAAK;QACvB,SAAS,wKAAa;QACtB,WAAW,OAAO,KAAK;IACzB;AACF;IANgB;;QACP,0LAAQ;;;AAUV,SAAS,WAAW,QAA4B;;IACrD,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,QAAQ,MAAM,CAAC;QACzB,OAAO;mCAAE,IAAM,IAAA,uKAAY,EAAC;;QAC5B,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IACzB;AACF;IAPgB;;QACP,0LAAQ;;;AAgBV,SAAS,gBAAgB,UAA6B,CAAC,CAAC;;IAC7D,MAAM,cAAc,IAAA,2MAAc;IAElC,MAAM,kBAAkB;QACtB,YAAY,iBAAiB,CAAC;YAAE,UAAU,QAAQ,GAAG;QAAC;IACxD;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;mDAAE,CAAC,OAAyB,IAAA,oKAAS,EAAC;;QAChD,SAAS;mDAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;mDAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAA8C,GACzE,IAAA,oKAAS,EAAC,UAAU;;QACtB,SAAS;mDAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,gMAAW,EAAC;QACzB,UAAU;mDAAE,CAAC,WAAqB,IAAA,oKAAS,EAAC;;QAC5C,SAAS;mDAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,iBAAiB,IAAA,gMAAW,EAAC;QACjC,UAAU;2DAAE,CAAC,WAAqB,IAAA,4KAAiB,EAAC;;QACpD,SAAS;2DAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,qBAAqB,IAAA,gMAAW,EAAC;QACrC,UAAU;+DAAE,CAAC,WAAqB,IAAA,gLAAqB,EAAC;;QACxD,SAAS;+DAAE;gBACT;gBACA,QAAQ,SAAS;YACnB;;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA,WACE,OAAO,SAAS,IAChB,OAAO,SAAS,IAChB,OAAO,SAAS,IAChB,eAAe,SAAS,IACxB,mBAAmB,SAAS;IAChC;AACF;IAlEgB;;QACM,2MAAc;QAMnB,gMAAW;QASX,gMAAW;QAUX,gMAAW;QASH,gMAAW;QASP,gMAAW"}},
    {"offset": {"line": 4192, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/taxes/hooks/use-all-taxes.ts"],"sourcesContent":["/**\r\n * useAllTaxes - Convenience hook for components needing all taxes as flat array\r\n * \r\n * Replaces legacy useTaxStore().data pattern\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useAllTaxes as useAllTaxesQuery } from './use-taxes';\r\nimport type { Tax } from '../types';\r\n\r\n/**\r\n * Returns all taxes as a flat array with helper functions\r\n * Compatible with legacy store pattern: { data: taxes }\r\n */\r\nexport function useAllTaxesData() {\r\n  const query = useAllTaxesQuery();\r\n  \r\n  const data = query.data || [];\r\n  \r\n  // Helper to get default sale tax\r\n  const getDefaultSale = React.useCallback((): Tax | undefined => {\r\n    return data.find(tax => tax.isDefaultSale);\r\n  }, [data]);\r\n  \r\n  // Helper to get default purchase tax\r\n  const getDefaultPurchase = React.useCallback((): Tax | undefined => {\r\n    return data.find(tax => tax.isDefaultPurchase);\r\n  }, [data]);\r\n  \r\n  return {\r\n    data,\r\n    getDefaultSale,\r\n    getDefaultPurchase,\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Returns taxes formatted as options for Select/Combobox\r\n */\r\nexport function useTaxOptions() {\r\n  const { data, isLoading } = useAllTaxesData();\r\n  \r\n  const options = data.map(t => ({\r\n    value: t.systemId,\r\n    label: `${t.name} (${t.rate}%)`,\r\n    rate: t.rate,\r\n  }));\r\n  \r\n  return { options, isLoading };\r\n}\r\n\r\n/**\r\n * Helper hook to find a tax by ID from cached data\r\n */\r\nexport function useTaxFinder() {\r\n  const { data } = useAllTaxesData();\r\n  \r\n  const findById = React.useCallback(\r\n    (systemId: string | undefined) => {\r\n      if (!systemId) return undefined;\r\n      return data.find(t => t.systemId === systemId);\r\n    },\r\n    [data]\r\n  );\r\n  \r\n  return { findById };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;CAIC,GAED;AACA;;;;AAOO,SAAS;;IACd,MAAM,QAAQ,IAAA,wKAAgB;IAE9B,MAAM,OAAO,MAAM,IAAI,IAAI,EAAE;IAE7B,iCAAiC;IACjC,MAAM,iBAAiB,4KAAiB;uDAAC;YACvC,OAAO,KAAK,IAAI;+DAAC,CAAA,MAAO,IAAI,aAAa;;QAC3C;sDAAG;QAAC;KAAK;IAET,qCAAqC;IACrC,MAAM,qBAAqB,4KAAiB;2DAAC;YAC3C,OAAO,KAAK,IAAI;mEAAC,CAAA,MAAO,IAAI,iBAAiB;;QAC/C;0DAAG;QAAC;KAAK;IAET,OAAO;QACL;QACA;QACA;QACA,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;GAvBgB;;QACA,wKAAgB;;;AA2BzB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,MAAM,UAAU,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;YAC7B,OAAO,EAAE,QAAQ;YACjB,OAAO,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC;YAC/B,MAAM,EAAE,IAAI;QACd,CAAC;IAED,OAAO;QAAE;QAAS;IAAU;AAC9B;IAVgB;;QACc;;;AAcvB,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjB,MAAM,WAAW,4KAAiB;8CAChC,CAAC;YACC,IAAI,CAAC,UAAU,OAAO;YACtB,OAAO,KAAK,IAAI;sDAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;;QACvC;6CACA;QAAC;KAAK;IAGR,OAAO;QAAE;IAAS;AACpB;IAZgB;;QACG"}}]
}