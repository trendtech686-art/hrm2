"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(authenticated)/customers/page",{

/***/ "(app-pages-browser)/./features/orders/store.ts":
/*!**********************************!*\
  !*** ./features/orders/store.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useOrderStore: () => (/* binding */ useOrderStore)\n/* harmony export */ });\n/* harmony import */ var _lib_date_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/date-utils */ \"(app-pages-browser)/./lib/date-utils.ts\");\n/* harmony import */ var _lib_api_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/api-config */ \"(app-pages-browser)/./lib/api-config.ts\");\n/* harmony import */ var _lib_store_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/store-factory */ \"(app-pages-browser)/./lib/store-factory.ts\");\n/* harmony import */ var _lib_id_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/id-types */ \"(app-pages-browser)/./lib/id-types.ts\");\n/* harmony import */ var _lib_id_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/id-utils */ \"(app-pages-browser)/./lib/id-utils.ts\");\n/* harmony import */ var _employees_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../employees/store */ \"(app-pages-browser)/./features/employees/store.ts\");\n/* harmony import */ var _products_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../products/store */ \"(app-pages-browser)/./features/products/store.ts\");\n/* harmony import */ var _products_combo_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../products/combo-utils */ \"(app-pages-browser)/./features/products/combo-utils.ts\");\n/* harmony import */ var _stock_history_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../stock-history/store */ \"(app-pages-browser)/./features/stock-history/store.ts\");\n/* harmony import */ var _customers_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../customers/store */ \"(app-pages-browser)/./features/customers/store.ts\");\n/* harmony import */ var _settings_receipt_types_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../settings/receipt-types/store */ \"(app-pages-browser)/./features/settings/receipt-types/store.ts\");\n/* harmony import */ var _cashbook_store__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../cashbook/store */ \"(app-pages-browser)/./features/cashbook/store.ts\");\n/* harmony import */ var _receipts_store__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../receipts/store */ \"(app-pages-browser)/./features/receipts/store.ts\");\n/* harmony import */ var _sales_returns_store__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../sales-returns/store */ \"(app-pages-browser)/./features/sales-returns/store.ts\");\n/* harmony import */ var _finance_document_helpers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../finance/document-helpers */ \"(app-pages-browser)/./features/finance/document-helpers.ts\");\n/* harmony import */ var _shipments_store__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../shipments/store */ \"(app-pages-browser)/./features/shipments/store.ts\");\n/* harmony import */ var _contexts_auth_context__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../contexts/auth-context */ \"(app-pages-browser)/./contexts/auth-context.tsx\");\n/* harmony import */ var _settings_sales_sales_management_store__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../settings/sales/sales-management-store */ \"(app-pages-browser)/./features/settings/sales/sales-management-store.ts\");\n/* harmony import */ var _lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../lib/activity-history-helper */ \"(app-pages-browser)/./lib/activity-history-helper.ts\");\n// persist middleware removed - database is now source of truth\n\n\n\n\n\n\n// REMOVED: Voucher store no longer exists - using Payment/Receipt stores instead\n\n\n\n\n\n// REMOVED: import type { Voucher } from '../vouchers/types';\n\n\n\n\n\n\n\n\n// ✅ Helper to get branch systemId\nconst getBranchId = (order)=>order.branchSystemId;\nconst deliveryStatusesBlockedForCancellation = [\n    'Đang giao hàng',\n    'Đã giao hàng',\n    'Chờ giao lại'\n];\nconst IN_STORE_PICKUP_PREFIX = 'INSTORE';\nconst PACKAGING_CODE_PREFIX = 'DG';\nconst PACKAGING_SYSTEM_ID_PREFIX = 'PACKAGE';\n// ✅ Track packaging systemId counter globally\nlet packagingSystemIdCounter = 0;\n// ✅ Initialize counter from all existing packagings across all orders\nconst initPackagingCounter = (orders)=>{\n    const allPackagings = orders.flatMap((o)=>o.packagings || []);\n    packagingSystemIdCounter = (0,_lib_id_utils__WEBPACK_IMPORTED_MODULE_4__.getMaxSystemIdCounter)(allPackagings, PACKAGING_SYSTEM_ID_PREFIX);\n};\n// ✅ Generate next packaging systemId\nconst getNextPackagingSystemId = ()=>{\n    packagingSystemIdCounter++;\n    return (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)((0,_lib_id_utils__WEBPACK_IMPORTED_MODULE_4__.generateSystemId)('packaging', packagingSystemIdCounter));\n};\nconst getPackagingSuffixFromOrderId = (orderId)=>{\n    if (!orderId) return '';\n    const rawValue = `${orderId}`;\n    const suffix = rawValue.replace(/^[A-Z-]+/, '');\n    return suffix || rawValue;\n};\n// Count only active packagings (not cancelled) for numbering\nconst getActivePackagingCount = (packagings)=>{\n    return packagings.filter((p)=>p.status !== 'Hủy đóng gói').length;\n};\nconst buildPackagingBusinessId = (orderId, activeIndex, activeCount)=>{\n    const suffix = getPackagingSuffixFromOrderId(orderId);\n    const baseCode = `${PACKAGING_CODE_PREFIX}${suffix || '000000'}`;\n    // Only add suffix if there are multiple active packagings\n    if (activeCount > 1 && activeIndex > 0) {\n        const paddedIndex = String(activeIndex + 1).padStart(2, '0');\n        return (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asBusinessId)(`${baseCode}-${paddedIndex}`);\n    }\n    return (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asBusinessId)(baseCode);\n};\nconst getReturnedValueForOrder = (orderSystemId)=>{\n    return _sales_returns_store__WEBPACK_IMPORTED_MODULE_13__.useSalesReturnStore.getState().data.filter((sr)=>sr.orderSystemId === orderSystemId).reduce((sum, sr)=>sum + sr.totalReturnValue, 0);\n};\nconst calculateActualDebt = (order)=>{\n    const totalReturnedValue = getReturnedValueForOrder(order.systemId);\n    return Math.max(order.grandTotal - totalReturnedValue, 0);\n};\nconst calculateTotalPaid = (payments)=>{\n    return payments.reduce((sum, payment)=>sum + payment.amount, 0);\n};\nconst getOrderOutstandingAmount = (order)=>{\n    const actualDebt = calculateActualDebt(order);\n    const totalPaid = calculateTotalPaid(order.payments ?? []);\n    return Math.max(actualDebt - totalPaid, 0);\n};\nconst applyPaymentToOrder = (order, payment)=>{\n    const updatedPayments = [\n        ...order.payments ?? [],\n        payment\n    ];\n    const totalPaid = calculateTotalPaid(updatedPayments);\n    const actualDebt = calculateActualDebt(order);\n    let newPaymentStatus = 'Chưa thanh toán';\n    if (totalPaid >= actualDebt) {\n        newPaymentStatus = 'Thanh toán toàn bộ';\n    } else if (totalPaid > 0) {\n        newPaymentStatus = 'Thanh toán 1 phần';\n    }\n    const wasCompleted = order.status === 'Hoàn thành';\n    let newStatus = order.status;\n    let newCompletedDate = order.completedDate;\n    if (newPaymentStatus === 'Thanh toán toàn bộ' && order.deliveryStatus === 'Đã giao hàng') {\n        newStatus = 'Hoàn thành';\n        newCompletedDate = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n        if (!wasCompleted) {\n            const { incrementOrderStats } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n            incrementOrderStats(order.customerSystemId, order.grandTotal);\n        }\n    }\n    const { updateDebtTransactionPayment } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n    updateDebtTransactionPayment(order.customerSystemId, order.id, payment.amount);\n    return {\n        ...order,\n        payments: updatedPayments,\n        paymentStatus: newPaymentStatus,\n        status: newStatus,\n        completedDate: newCompletedDate,\n        paidAmount: totalPaid\n    };\n};\nconst shouldAutoAllocateReceipt = (receipt)=>{\n    return receipt.status === 'completed' && receipt.affectsDebt && !!receipt.customerSystemId && !receipt.linkedOrderSystemId;\n};\nconst getAllocatedAmount = (receipt)=>{\n    return receipt.orderAllocations?.reduce((sum, allocation)=>sum + allocation.amount, 0) ?? 0;\n};\nconst autoAllocateReceiptToOrders = (receipt)=>{\n    if (!shouldAutoAllocateReceipt(receipt)) {\n        return;\n    }\n    const remainingAmount = receipt.amount - getAllocatedAmount(receipt);\n    if (remainingAmount <= 0) {\n        return;\n    }\n    const candidateOrders = baseStore.getState().data.filter((order)=>order.customerSystemId === receipt.customerSystemId && order.status !== 'Đã hủy').map((order)=>({\n            order,\n            outstanding: getOrderOutstandingAmount(order)\n        })).filter((entry)=>entry.outstanding > 0).sort((a, b)=>{\n        const aTime = a.order.orderDate ? new Date(a.order.orderDate).getTime() : 0;\n        const bTime = b.order.orderDate ? new Date(b.order.orderDate).getTime() : 0;\n        return aTime - bTime;\n    });\n    if (!candidateOrders.length) {\n        return;\n    }\n    let amountToDistribute = remainingAmount;\n    const updatedOrders = new Map();\n    const allocationEntries = [];\n    for (const { order } of candidateOrders){\n        if (amountToDistribute <= 0) {\n            break;\n        }\n        const currentOrderState = updatedOrders.get(order.systemId) ?? order;\n        const outstanding = getOrderOutstandingAmount(currentOrderState);\n        if (outstanding <= 0) {\n            continue;\n        }\n        const allocationAmount = Math.min(outstanding, amountToDistribute);\n        if (allocationAmount <= 0) {\n            continue;\n        }\n        const paymentEntry = {\n            systemId: receipt.systemId,\n            id: receipt.id,\n            date: receipt.date,\n            amount: allocationAmount,\n            method: receipt.paymentMethodName,\n            createdBy: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(receipt.createdBy),\n            description: receipt.description ?? `Thanh toán từ phiếu thu ${receipt.id}`\n        };\n        const updatedOrder = applyPaymentToOrder(currentOrderState, paymentEntry);\n        updatedOrders.set(order.systemId, updatedOrder);\n        allocationEntries.push({\n            orderSystemId: order.systemId,\n            orderId: order.id,\n            amount: allocationAmount\n        });\n        amountToDistribute -= allocationAmount;\n    }\n    if (!allocationEntries.length) {\n        return;\n    }\n    baseStore.setState((state)=>{\n        const data = state.data.map((order)=>updatedOrders.get(order.systemId) ?? order);\n        return {\n            data\n        };\n    });\n    const receiptStore = _receipts_store__WEBPACK_IMPORTED_MODULE_12__.useReceiptStore.getState();\n    const latestReceipt = receiptStore.findById(receipt.systemId);\n    if (!latestReceipt) {\n        return;\n    }\n    receiptStore.update(receipt.systemId, {\n        ...latestReceipt,\n        orderAllocations: [\n            ...latestReceipt.orderAllocations ?? [],\n            ...allocationEntries\n        ]\n    });\n};\nconst ensureOrderPackagingIdentifiers = (order)=>{\n    if (!order.packagings || order.packagings.length === 0) {\n        return null;\n    }\n    // Count only active packagings for proper numbering\n    const activePackagings = order.packagings.filter((p)=>p.status !== 'Hủy đóng gói');\n    const activeCount = activePackagings.length;\n    let changed = false;\n    let activeIndex = 0;\n    const updatedPackagings = order.packagings.map((pkg, idx)=>{\n        const isCancelled = pkg.status === 'Hủy đóng gói';\n        const hasId = typeof pkg.id === 'string' && pkg.id.trim().length > 0;\n        // ✅ Check for temp systemId or old format (PKG_)\n        const hasTempOrOldSystemId = pkg.systemId?.startsWith('PKG_TEMP_') || pkg.systemId?.startsWith('PKG_');\n        const hasValidSystemId = pkg.systemId?.startsWith(PACKAGING_SYSTEM_ID_PREFIX);\n        const shouldFixTracking = pkg.deliveryMethod === 'Nhận tại cửa hàng' && pkg.trackingCode === `${IN_STORE_PICKUP_PREFIX}-`;\n        // For cancelled packagings, keep existing ID\n        if (isCancelled) {\n            if (!hasId || hasTempOrOldSystemId && !hasValidSystemId) {\n                // Still need to assign an ID if missing\n                const nextPkg = {\n                    ...pkg\n                };\n                if (!hasId) {\n                    nextPkg.id = buildPackagingBusinessId(order.id, 0, 1);\n                }\n                if (hasTempOrOldSystemId && !hasValidSystemId) {\n                    nextPkg.systemId = getNextPackagingSystemId();\n                }\n                changed = true;\n                return nextPkg;\n            }\n            return pkg;\n        }\n        // For active packagings, use activeIndex for numbering\n        const currentActiveIndex = activeIndex;\n        activeIndex++;\n        if (hasId && !shouldFixTracking && hasValidSystemId) {\n            return pkg;\n        }\n        const nextPkg = {\n            ...pkg\n        };\n        if (!hasId) {\n            nextPkg.id = buildPackagingBusinessId(order.id, currentActiveIndex, activeCount);\n            changed = true;\n        }\n        // ✅ Fix temporary/old systemId to proper format PACKAGE000001\n        if (hasTempOrOldSystemId && !hasValidSystemId) {\n            nextPkg.systemId = getNextPackagingSystemId();\n            changed = true;\n        }\n        if (shouldFixTracking) {\n            const resolvedId = nextPkg.id ?? buildPackagingBusinessId(order.id, currentActiveIndex, activeCount);\n            nextPkg.trackingCode = `${IN_STORE_PICKUP_PREFIX}-${resolvedId}`;\n            changed = true;\n        }\n        return nextPkg;\n    });\n    return changed ? {\n        ...order,\n        packagings: updatedPackagings\n    } : null;\n};\nconst ensureCancellationAllowed = (order, actionLabel)=>{\n    if (!order) return false;\n    const { allowCancelAfterExport } = _settings_sales_sales_management_store__WEBPACK_IMPORTED_MODULE_17__.useSalesManagementSettingsStore.getState();\n    if (allowCancelAfterExport) {\n        return true;\n    }\n    const hasLeftWarehouse = order.stockOutStatus === 'Xuất kho toàn bộ' || deliveryStatusesBlockedForCancellation.includes(order.deliveryStatus);\n    if (hasLeftWarehouse) {\n        alert(`Không thể ${actionLabel} vì đơn hàng đã xuất kho. Vào Cấu hình bán hàng -> Thiết lập quản lý bán hàng và bật \"Cho phép hủy đơn hàng sau khi xuất kho\".`);\n        return false;\n    }\n    return true;\n};\nconst processLineItemStock = (lineItem, branchSystemId, operation, orderQuantity = 1 // Số lượng đặt của line item\n)=>{\n    const { findById: findProductById, commitStock, uncommitStock, dispatchStock, completeDelivery, returnStockFromTransit } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n    const product = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(lineItem.productSystemId));\n    // Xác định danh sách items cần xử lý (SP con nếu combo, hoặc chính SP nếu thường)\n    const itemsToProcess = [];\n    if (product && (0,_products_combo_utils__WEBPACK_IMPORTED_MODULE_7__.isComboProduct)(product) && product.comboItems) {\n        // Combo: xử lý tất cả SP con\n        product.comboItems.forEach((comboItem)=>{\n            itemsToProcess.push({\n                productSystemId: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(comboItem.productSystemId),\n                quantity: orderQuantity * comboItem.quantity\n            });\n        });\n    } else {\n        // Sản phẩm thường\n        itemsToProcess.push({\n            productSystemId: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(lineItem.productSystemId),\n            quantity: orderQuantity\n        });\n    }\n    // Thực hiện operation cho từng item\n    itemsToProcess.forEach((item)=>{\n        const branchId = (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(branchSystemId);\n        switch(operation){\n            case 'commit':\n                commitStock(item.productSystemId, branchId, item.quantity);\n                break;\n            case 'uncommit':\n                uncommitStock(item.productSystemId, branchId, item.quantity);\n                break;\n            case 'dispatch':\n                dispatchStock(item.productSystemId, branchId, item.quantity);\n                break;\n            case 'complete':\n                completeDelivery(item.productSystemId, branchId, item.quantity);\n                break;\n            case 'return':\n                returnStockFromTransit(item.productSystemId, branchId, item.quantity);\n                break;\n        }\n    });\n    return itemsToProcess; // Return để có thể dùng cho stock history\n};\n/**\r\n * ✅ Helper để lấy danh sách stock items từ line items (mở rộng combo thành SP con)\r\n * Dùng trong webhook GHTK hoặc các thao tác batch\r\n */ const getComboStockItems = (lineItems)=>{\n    const { findById: findProductById } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n    const stockItems = [];\n    lineItems.forEach((item)=>{\n        const product = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(item.productSystemId));\n        if (product && (0,_products_combo_utils__WEBPACK_IMPORTED_MODULE_7__.isComboProduct)(product) && product.comboItems) {\n            // Combo: mở rộng thành SP con\n            product.comboItems.forEach((comboItem)=>{\n                stockItems.push({\n                    productSystemId: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(comboItem.productSystemId),\n                    quantity: item.quantity * comboItem.quantity\n                });\n            });\n        } else {\n            // Sản phẩm thường\n            stockItems.push({\n                productSystemId: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(item.productSystemId),\n                quantity: item.quantity\n            });\n        }\n    });\n    return stockItems;\n};\nconst createOrderRefundVoucher = (order, amount, employeeId)=>{\n    const lastPositivePayment = [\n        ...order.payments ?? []\n    ].reverse().find((p)=>p.amount > 0);\n    const { document, error } = (0,_finance_document_helpers__WEBPACK_IMPORTED_MODULE_14__.createPaymentDocument)({\n        amount,\n        description: `Hoàn tiền do hủy đơn ${order.id}`,\n        recipientName: order.customerName,\n        recipientSystemId: order.customerSystemId,\n        customerSystemId: order.customerSystemId,\n        customerName: order.customerName,\n        branchSystemId: order.branchSystemId,\n        branchName: order.branchName,\n        createdBy: employeeId,\n        paymentMethodName: lastPositivePayment?.method || 'Tiền mặt',\n        paymentTypeName: 'Hoàn tiền khách hàng',\n        originalDocumentId: order.id,\n        linkedOrderSystemId: order.systemId,\n        affectsDebt: true,\n        category: 'other'\n    });\n    if (!document) {\n        console.error('[cancelOrder] Không thể tạo phiếu chi hoàn tiền', error);\n        return null;\n    }\n    return document;\n};\nconst initialData = initialDataOmit.map((o, index)=>{\n    const packagings = [];\n    if (o.packagingStatus === 'Đóng gói toàn bộ' || o.packagingStatus === 'Chờ xác nhận đóng gói') {\n        const hasDeliveryStarted = o.deliveryStatus && o.deliveryStatus !== 'Chờ đóng gói' && o.deliveryStatus !== 'Đã đóng gói';\n        const packagingId = `${PACKAGING_CODE_PREFIX}${o.id.substring(2)}`; // DG000001\n        const newPkg = {\n            systemId: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(`PACKAGE${String(index + 1).padStart(6, '0')}`),\n            id: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asBusinessId)(packagingId),\n            requestDate: o.orderDate,\n            confirmDate: o.packagingStatus === 'Đóng gói toàn bộ' ? o.orderDate : undefined,\n            requestingEmployeeId: o.salespersonSystemId,\n            requestingEmployeeName: o.salesperson,\n            confirmingEmployeeId: o.packagingStatus === 'Đóng gói toàn bộ' ? o.salespersonSystemId : undefined,\n            confirmingEmployeeName: o.packagingStatus === 'Đóng gói toàn bộ' ? o.salesperson : undefined,\n            status: o.packagingStatus === 'Đóng gói toàn bộ' ? 'Đã đóng gói' : 'Chờ đóng gói',\n            printStatus: o.printStatus,\n            deliveryMethod: hasDeliveryStarted ? o.deliveryMethod : undefined,\n            deliveryStatus: o.deliveryStatus\n        };\n        if (o.id === 'DH000001' && o.deliveryStatus === 'Đã giao hàng') {\n            newPkg.carrier = 'Giao Hàng Nhanh';\n            newPkg.trackingCode = 'GHN000001'; // Use shipment tracking code from carrier\n            newPkg.deliveredDate = '2025-09-22 14:00';\n            newPkg.deliveryMethod = 'Dịch vụ giao hàng';\n        }\n        if (o.id === 'DH000003' && o.deliveryStatus === 'Đã giao hàng') {\n            newPkg.trackingCode = 'VC000003'; // Use shipment business ID for INSTORE\n            newPkg.deliveredDate = '2025-08-01 11:00';\n            newPkg.deliveryMethod = 'Nhận tại cửa hàng';\n        }\n        packagings.push(newPkg);\n    }\n    const { packagingStatus, products, ...rest } = o;\n    // Transform products array to lineItems\n    const lineItems = (products || []).map((p, idx)=>({\n            systemId: `LINE_${o.id}_${idx + 1}`,\n            productSystemId: p.productSystemId || `PROD_${idx}`,\n            productId: p.productId || `PROD_${idx}`,\n            productName: p.productName || '',\n            quantity: p.quantity || 0,\n            unitPrice: p.price || 0,\n            discount: 0,\n            discountType: 'fixed',\n            total: p.total || 0\n        }));\n    return {\n        ...rest,\n        systemId: `ORD${String(index + 1).padStart(8, '0')}`,\n        customerSystemId: `CUST_${index + 1}`,\n        paidAmount: o.paidAmount ?? 0,\n        packagings,\n        lineItems\n    };\n});\nconst baseStore = (0,_lib_store_factory__WEBPACK_IMPORTED_MODULE_2__.createCrudStore)(initialData, 'orders', {\n    businessIdField: 'id',\n    apiEndpoint: '/api/orders',\n    getCurrentUser: ()=>{\n        return (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)((0,_contexts_auth_context__WEBPACK_IMPORTED_MODULE_16__.getCurrentUserSystemId)());\n    }\n});\n// ✅ API Sync helpers\nconst API_ENDPOINT = '/api/orders';\nconst syncToApi = {\n    create: async (order)=>{\n        try {\n            const response = await fetch(API_ENDPOINT, {\n                method: 'POST',\n                credentials: 'include',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(order)\n            });\n            if (!response.ok) console.warn('[Order API] Create sync failed');\n            else console.log('[Order API] Created:', order.systemId);\n        } catch (e) {\n            console.warn('[Order API] Create sync error:', e);\n        }\n    },\n    update: async (systemId, updates)=>{\n        try {\n            const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\n                method: 'PATCH',\n                credentials: 'include',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(updates)\n            });\n            if (!response.ok) console.warn('[Order API] Update sync failed');\n            else console.log('[Order API] Updated:', systemId);\n        } catch (e) {\n            console.warn('[Order API] Update sync error:', e);\n        }\n    },\n    delete: async (systemId, hard = false)=>{\n        try {\n            const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\n                method: 'DELETE',\n                credentials: 'include',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    hard\n                })\n            });\n            if (!response.ok) console.warn('[Order API] Delete sync failed');\n            else console.log('[Order API] Deleted:', systemId);\n        } catch (e) {\n            console.warn('[Order API] Delete sync error:', e);\n        }\n    },\n    restore: async (systemId)=>{\n        try {\n            const response = await fetch(`${API_ENDPOINT}/${systemId}/restore`, {\n                method: 'POST',\n                credentials: 'include',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (!response.ok) console.warn('[Order API] Restore sync failed');\n            else console.log('[Order API] Restored:', systemId);\n        } catch (e) {\n            console.warn('[Order API] Restore sync error:', e);\n        }\n    }\n};\n// ✅ Wrap base store methods with API sync\nconst originalAdd = baseStore.getState().add;\nconst originalUpdate = baseStore.getState().update;\nconst originalRemove = baseStore.getState().remove;\nconst originalHardDelete = baseStore.getState().hardDelete;\nconst originalRestore = baseStore.getState().restore;\nbaseStore.setState({\n    add: (item)=>{\n        const result = originalAdd(item);\n        syncToApi.create(result);\n        return result;\n    },\n    update: (systemId, updates)=>{\n        originalUpdate(systemId, updates);\n        syncToApi.update(systemId, updates);\n    },\n    remove: (systemId)=>{\n        originalRemove(systemId);\n        syncToApi.delete(systemId, false);\n    },\n    hardDelete: (systemId)=>{\n        originalHardDelete(systemId);\n        syncToApi.delete(systemId, true);\n    },\n    restore: (systemId)=>{\n        originalRestore(systemId);\n        syncToApi.restore(systemId);\n    }\n});\n// ✅ MIGRATION: Ensure all orders have paidAmount field (backward compatibility)\nbaseStore.setState((state)=>({\n        data: state.data.map((order)=>({\n                ...order,\n                paidAmount: order.paidAmount ?? 0\n            }))\n    }));\n// ✅ MIGRATION: Merge seed data - add new orders from initialData if not exist in persisted store\nbaseStore.setState((state)=>{\n    const existingIds = new Set(state.data.map((o)=>o.systemId));\n    const newOrders = initialData.filter((o)=>!existingIds.has(o.systemId));\n    if (newOrders.length > 0) {\n        return {\n            data: [\n                ...state.data,\n                ...newOrders\n            ]\n        };\n    }\n    return state;\n});\n// ✅ MIGRATION: Fix order status - orders with full payment and delivery should be \"Hoàn thành\"\nbaseStore.setState((state)=>({\n        data: state.data.map((order)=>{\n            // If order is already completed or cancelled, skip\n            if (order.status === 'Hoàn thành' || order.status === 'Đã hủy') {\n                return order;\n            }\n            // Check if all active packagings are delivered\n            const activePackagings = order.packagings.filter((p)=>p.status !== 'Hủy đóng gói');\n            const isAllDelivered = activePackagings.length > 0 && activePackagings.every((p)=>p.deliveryStatus === 'Đã giao hàng');\n            // If fully paid and fully delivered, update status to \"Hoàn thành\"\n            if (order.paymentStatus === 'Thanh toán toàn bộ' && (isAllDelivered || order.deliveryStatus === 'Đã giao hàng')) {\n                return {\n                    ...order,\n                    status: 'Hoàn thành',\n                    completedDate: order.completedDate || (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date())\n                };\n            }\n            return order;\n        })\n    }));\nconst originalAddWithStock = baseStore.getState().add;\nbaseStore.setState({\n    add: (item)=>{\n        const { commitStock, findById: findProductById } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n        const userInfo = (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.getCurrentUserInfo)();\n        const newItem = originalAddWithStock(item);\n        if (newItem) {\n            const hydratedPackagings = ensureOrderPackagingIdentifiers(newItem);\n            if (hydratedPackagings) {\n                Object.assign(newItem, hydratedPackagings);\n                baseStore.setState((state)=>({\n                        data: state.data.map((order)=>order.systemId === hydratedPackagings.systemId ? hydratedPackagings : order)\n                    }));\n            }\n            newItem.lineItems.forEach((li)=>{\n                const product = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(li.productSystemId));\n                // ✅ Xử lý combo: commit stock của SP con thay vì combo\n                if (product && (0,_products_combo_utils__WEBPACK_IMPORTED_MODULE_7__.isComboProduct)(product) && product.comboItems) {\n                    product.comboItems.forEach((comboItem)=>{\n                        // Commit stock = số lượng combo × số lượng SP con trong combo\n                        const totalQuantity = li.quantity * comboItem.quantity;\n                        commitStock((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(comboItem.productSystemId), (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(newItem.branchSystemId), totalQuantity);\n                    });\n                } else {\n                    // Sản phẩm thường: commit stock như bình thường\n                    commitStock((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(li.productSystemId), (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(newItem.branchSystemId), li.quantity);\n                }\n            });\n            // ✅ Cập nhật lastPurchaseDate khi tạo đơn mới (để SLA/churn risk hoạt động đúng)\n            if (newItem.customerSystemId) {\n                const { update: updateCustomer, findById: findCustomer } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n                const customer = findCustomer(newItem.customerSystemId);\n                if (customer) {\n                    updateCustomer(newItem.customerSystemId, {\n                        lastPurchaseDate: new Date().toISOString().split('T')[0]\n                    });\n                }\n            }\n            // ✅ Add activity history entry\n            const historyEntry = (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.createCreatedEntry)(userInfo, `${userInfo.name} đã tạo đơn hàng ${newItem.id} cho khách hàng ${newItem.customerName} (Tổng: ${newItem.grandTotal.toLocaleString('vi-VN')}đ)`);\n            baseStore.setState((state)=>({\n                    data: state.data.map((order)=>order.systemId === newItem.systemId ? {\n                            ...order,\n                            activityHistory: [\n                                historyEntry\n                            ]\n                        } : order)\n                }));\n        }\n        return newItem;\n    }\n});\nconst backfillPackagingIdentifiers = ()=>{\n    const currentState = baseStore.getState();\n    let changed = false;\n    const updatedData = currentState.data.map((order)=>{\n        const updatedOrder = ensureOrderPackagingIdentifiers(order);\n        if (updatedOrder) {\n            changed = true;\n            return updatedOrder;\n        }\n        return order;\n    });\n    if (changed) {\n        baseStore.setState({\n            data: updatedData\n        });\n    }\n};\nbackfillPackagingIdentifiers();\nconst augmentedMethods = {\n    cancelOrder: (systemId, employeeId, options)=>{\n        const { reason, restock = true } = options ?? {};\n        const currentOrder = baseStore.getState().data.find((o)=>o.systemId === systemId);\n        if (!ensureCancellationAllowed(currentOrder, 'hủy đơn hàng')) {\n            return;\n        }\n        baseStore.setState((state)=>{\n            const orderToCancel = state.data.find((o)=>o.systemId === systemId);\n            if (!orderToCancel || orderToCancel.status === 'Đã hủy') {\n                return state;\n            }\n            const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const now = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n            const cancellationReason = reason && reason.trim().length > 0 ? reason.trim() : orderToCancel.cancellationReason || `Hủy bởi ${employee?.fullName || 'Hệ thống'}`;\n            // ✅ Uncommit stock (hỗ trợ combo)\n            if (restock) {\n                orderToCancel.lineItems.forEach((item)=>{\n                    processLineItemStock(item, orderToCancel.branchSystemId, 'uncommit', item.quantity);\n                });\n            }\n            const hasDispatchedStock = orderToCancel.stockOutStatus === 'Xuất kho toàn bộ' || [\n                'Chờ lấy hàng',\n                'Đang giao hàng',\n                'Đã giao hàng',\n                'Chờ giao lại'\n            ].includes(orderToCancel.deliveryStatus);\n            // ✅ Return stock from transit (hỗ trợ combo)\n            if (restock && hasDispatchedStock) {\n                orderToCancel.lineItems.forEach((item)=>{\n                    processLineItemStock(item, orderToCancel.branchSystemId, 'return', item.quantity);\n                });\n            }\n            const existingPayments = orderToCancel.payments ?? [];\n            const netCollected = existingPayments.reduce((sum, payment)=>sum + payment.amount, 0);\n            let refundPaymentEntry = null;\n            const refundAmount = netCollected > 0 ? netCollected : 0;\n            if (refundAmount > 0) {\n                const refundVoucher = createOrderRefundVoucher(orderToCancel, refundAmount, employeeId);\n                if (!refundVoucher) {\n                    alert('Không thể tạo phiếu chi hoàn tiền. Vui lòng kiểm tra cấu hình tài chính trước khi hủy đơn.');\n                    return state;\n                }\n                refundPaymentEntry = {\n                    systemId: refundVoucher.systemId,\n                    id: refundVoucher.id,\n                    date: refundVoucher.date,\n                    amount: -refundAmount,\n                    method: refundVoucher.paymentMethodName,\n                    createdBy: employeeId,\n                    description: `Hoàn tiền khi hủy đơn ${orderToCancel.id}`\n                };\n            }\n            const updatedPayments = refundPaymentEntry ? [\n                ...existingPayments,\n                refundPaymentEntry\n            ] : existingPayments;\n            const updatedPaidAmount = Math.max(0, (orderToCancel.paidAmount ?? 0) - refundAmount);\n            const updatedPackagings = orderToCancel.packagings.map((pkg)=>{\n                if (pkg.status === 'Hủy đóng gói' && pkg.deliveryStatus === 'Đã hủy') {\n                    return pkg;\n                }\n                return {\n                    ...pkg,\n                    status: 'Hủy đóng gói',\n                    deliveryStatus: 'Đã hủy',\n                    cancelDate: now,\n                    cancelReason: pkg.cancelReason ?? cancellationReason,\n                    cancelingEmployeeId: employeeId,\n                    cancelingEmployeeName: employee?.fullName || 'Hệ thống'\n                };\n            });\n            const updatedOrder = {\n                ...orderToCancel,\n                status: 'Đã hủy',\n                cancelledDate: now,\n                cancellationReason,\n                deliveryStatus: 'Đã hủy',\n                stockOutStatus: restock ? 'Chưa xuất kho' : orderToCancel.stockOutStatus,\n                payments: updatedPayments,\n                paidAmount: updatedPaidAmount,\n                paymentStatus: refundPaymentEntry ? 'Chưa thanh toán' : orderToCancel.paymentStatus,\n                packagings: updatedPackagings,\n                cancellationMetadata: {\n                    restockItems: restock,\n                    notifyCustomer: false,\n                    emailNotifiedAt: undefined\n                },\n                activityHistory: (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.appendHistoryEntry)(orderToCancel.activityHistory, (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.createHistoryEntry)('cancelled', (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.getCurrentUserInfo)(), `${employee?.fullName || 'Hệ thống'} đã hủy đơn hàng. Lý do: ${cancellationReason}${refundAmount > 0 ? `. Hoàn tiền: ${refundAmount.toLocaleString('vi-VN')}đ` : ''}`))\n            };\n            // ✅ Remove debt transaction from customer\n            _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState().removeDebtTransaction(orderToCancel.customerSystemId, orderToCancel.id);\n            return {\n                data: state.data.map((o)=>o.systemId === systemId ? updatedOrder : o)\n            };\n        });\n    },\n    addPayment: (orderSystemId, paymentData, employeeId)=>{\n        // --- Side effects must happen outside setState ---\n        const order = baseStore.getState().findById(orderSystemId);\n        const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n        if (!order || !employee) {\n            console.error(\"Order or employee not found for payment.\");\n            return;\n        }\n        const { document: createdReceipt, error } = (0,_finance_document_helpers__WEBPACK_IMPORTED_MODULE_14__.createReceiptDocument)({\n            amount: paymentData.amount,\n            description: `Thanh toán cho đơn hàng ${order.id}`,\n            customerName: order.customerName,\n            customerSystemId: order.customerSystemId,\n            branchSystemId: order.branchSystemId,\n            branchName: order.branchName,\n            createdBy: employeeId,\n            paymentMethodName: paymentData.method,\n            receiptTypeName: 'Thanh toán cho đơn hàng',\n            originalDocumentId: order.id,\n            linkedOrderSystemId: order.systemId,\n            affectsDebt: true\n        });\n        if (!createdReceipt) {\n            console.error('Failed to create receipt', error);\n            alert('Không thể tạo phiếu thu cho đơn hàng. Vui lòng kiểm tra cấu hình chứng từ.');\n            return;\n        }\n        // 2. Now, update the order state with the created receipt info\n        baseStore.setState((state)=>{\n            const orderIndex = state.data.findIndex((o)=>o.systemId === orderSystemId);\n            if (orderIndex === -1) return state;\n            const orderToUpdate = state.data[orderIndex];\n            const newPayment = {\n                systemId: createdReceipt.systemId,\n                id: createdReceipt.id,\n                date: createdReceipt.date,\n                amount: createdReceipt.amount,\n                method: createdReceipt.paymentMethodName,\n                createdBy: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(createdReceipt.createdBy),\n                description: createdReceipt.description\n            };\n            const updatedOrder = applyPaymentToOrder(orderToUpdate, newPayment);\n            // ✅ Add activity history entry\n            updatedOrder.activityHistory = (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.appendHistoryEntry)(orderToUpdate.activityHistory, (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.createHistoryEntry)('payment_made', (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.getCurrentUserInfo)(), `${employee?.fullName || 'Nhân viên'} đã thanh toán ${paymentData.amount.toLocaleString('vi-VN')}đ bằng ${paymentData.method}`));\n            const newData = [\n                ...state.data\n            ];\n            newData[orderIndex] = updatedOrder;\n            return {\n                data: newData\n            };\n        });\n    },\n    requestPackaging: (orderSystemId, employeeId, assignedEmployeeId)=>{\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const assignedEmployee = assignedEmployeeId ? _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(assignedEmployeeId) : null;\n            // Count only active packagings for proper numbering\n            const activePackagings = order.packagings.filter((p)=>p.status !== 'Hủy đóng gói');\n            const activeCountAfterInsert = activePackagings.length + 1;\n            const newActiveIndex = activePackagings.length; // This will be the index in active packagings\n            const newPackaging = {\n                systemId: getNextPackagingSystemId(),\n                id: buildPackagingBusinessId(order.id, newActiveIndex, activeCountAfterInsert),\n                requestDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                requestingEmployeeId: employeeId,\n                requestingEmployeeName: employee?.fullName || 'N/A',\n                assignedEmployeeId,\n                assignedEmployeeName: assignedEmployee?.fullName,\n                status: 'Chờ đóng gói',\n                printStatus: 'Chưa in'\n            };\n            const updatedOrder = {\n                ...order,\n                packagings: [\n                    ...order.packagings,\n                    newPackaging\n                ],\n                deliveryStatus: 'Chờ đóng gói'\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    confirmPackaging: (orderSystemId, packagingSystemId, employeeId)=>{\n        // ✅ Check negative packing setting\n        const { allowNegativePacking } = _settings_sales_sales_management_store__WEBPACK_IMPORTED_MODULE_17__.useSalesManagementSettingsStore.getState();\n        if (!allowNegativePacking) {\n            const order = baseStore.getState().data.find((o)=>o.systemId === orderSystemId);\n            if (order) {\n                const { findById: findProductById } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n                for (const item of order.lineItems){\n                    const product = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(item.productSystemId));\n                    if (product && (0,_products_combo_utils__WEBPACK_IMPORTED_MODULE_7__.isComboProduct)(product) && product.comboItems) {\n                        for (const comboItem of product.comboItems){\n                            const childProduct = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(comboItem.productSystemId));\n                            const requiredQty = item.quantity * comboItem.quantity;\n                            const currentStock = childProduct?.inventoryByBranch?.[order.branchSystemId] || 0;\n                            if (currentStock < requiredQty) {\n                                alert(`Không thể đóng gói: Sản phẩm \"${childProduct?.name}\" không đủ tồn kho (Có: ${currentStock}, Cần: ${requiredQty})`);\n                                return baseStore.getState();\n                            }\n                        }\n                    } else {\n                        const currentStock = product?.inventoryByBranch?.[order.branchSystemId] || 0;\n                        if (currentStock < item.quantity) {\n                            alert(`Không thể đóng gói: Sản phẩm \"${item.productName}\" không đủ tồn kho (Có: ${currentStock}, Cần: ${item.quantity})`);\n                            return baseStore.getState();\n                        }\n                    }\n                }\n            }\n        }\n        baseStore.setState((state)=>{\n            const dataCopy = [\n                ...state.data\n            ];\n            const orderIndex = dataCopy.findIndex((o)=>o.systemId === orderSystemId);\n            if (orderIndex === -1) return state;\n            const orderCopy = {\n                ...dataCopy[orderIndex]\n            };\n            const packagingIndex = orderCopy.packagings.findIndex((p)=>p.systemId === packagingSystemId);\n            if (packagingIndex === -1) return state;\n            const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const packagingsCopy = [\n                ...orderCopy.packagings\n            ];\n            packagingsCopy[packagingIndex] = {\n                ...packagingsCopy[packagingIndex],\n                status: 'Đã đóng gói',\n                confirmDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                confirmingEmployeeId: employeeId,\n                confirmingEmployeeName: employee?.fullName || 'N/A'\n            };\n            orderCopy.packagings = packagingsCopy;\n            orderCopy.deliveryStatus = 'Đã đóng gói';\n            dataCopy[orderIndex] = orderCopy;\n            return {\n                data: dataCopy\n            };\n        });\n    },\n    cancelPackagingRequest: (orderSystemId, packagingSystemId, employeeId, reason)=>{\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const updatedPackagings = order.packagings.map((p)=>{\n                if (p.systemId === packagingSystemId) {\n                    return {\n                        ...p,\n                        status: 'Hủy đóng gói',\n                        cancelDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                        cancelingEmployeeId: employeeId,\n                        cancelingEmployeeName: employee?.fullName || 'N/A',\n                        cancelReason: reason\n                    };\n                }\n                return p;\n            });\n            const isAnyActivePackaging = updatedPackagings.some((p)=>p.status !== 'Hủy đóng gói');\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                deliveryStatus: isAnyActivePackaging ? order.deliveryStatus : 'Chờ đóng gói'\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    processInStorePickup: (orderSystemId, packagingSystemId)=>{\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            const totalCount = order.packagings.length;\n            const updatedPackagings = order.packagings.map((p, index)=>{\n                if (p.systemId === packagingSystemId) {\n                    const hasId = typeof p.id === 'string' && p.id.trim().length > 0;\n                    const resolvedId = hasId ? p.id : buildPackagingBusinessId(order.id, index, totalCount);\n                    return {\n                        ...p,\n                        id: resolvedId,\n                        deliveryMethod: 'Nhận tại cửa hàng',\n                        deliveryStatus: 'Đã đóng gói'\n                    };\n                }\n                return p;\n            });\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                deliveryStatus: 'Đã đóng gói'\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    confirmInStorePickup: (orderSystemId, packagingSystemId, employeeId)=>{\n        console.log('🟢 [confirmInStorePickup] Called with:', {\n            orderSystemId,\n            packagingSystemId,\n            employeeId\n        });\n        // ✅ Check negative stock out setting\n        const { allowNegativeStockOut } = _settings_sales_sales_management_store__WEBPACK_IMPORTED_MODULE_17__.useSalesManagementSettingsStore.getState();\n        if (!allowNegativeStockOut) {\n            const order = baseStore.getState().data.find((o)=>o.systemId === orderSystemId);\n            if (order) {\n                const { findById: findProductById } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n                for (const item of order.lineItems){\n                    const product = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(item.productSystemId));\n                    if (product && (0,_products_combo_utils__WEBPACK_IMPORTED_MODULE_7__.isComboProduct)(product) && product.comboItems) {\n                        for (const comboItem of product.comboItems){\n                            const childProduct = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(comboItem.productSystemId));\n                            const requiredQty = item.quantity * comboItem.quantity;\n                            const currentStock = childProduct?.inventoryByBranch?.[order.branchSystemId] || 0;\n                            if (currentStock < requiredQty) {\n                                alert(`Không thể xuất kho: Sản phẩm \"${childProduct?.name}\" không đủ tồn kho (Có: ${currentStock}, Cần: ${requiredQty})`);\n                                return baseStore.getState();\n                            }\n                        }\n                    } else {\n                        const currentStock = product?.inventoryByBranch?.[order.branchSystemId] || 0;\n                        if (currentStock < item.quantity) {\n                            alert(`Không thể xuất kho: Sản phẩm \"${item.productName}\" không đủ tồn kho (Có: ${currentStock}, Cần: ${item.quantity})`);\n                            return baseStore.getState();\n                        }\n                    }\n                }\n            }\n        }\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) {\n                console.error('❌ [confirmInStorePickup] Order not found:', orderSystemId);\n                return state;\n            }\n            console.log('📋 [confirmInStorePickup] Order found:', order.id);\n            console.log('📋 [confirmInStorePickup] Line items:', order.lineItems.length);\n            // Stock logic\n            const { addEntry: addStockHistory } = _stock_history_store__WEBPACK_IMPORTED_MODULE_8__.useStockHistoryStore.getState();\n            const employeeData = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const now = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n            order.lineItems.forEach((item, index)=>{\n                console.log(`📦 [confirmInStorePickup] Dispatching item ${index + 1}:`, {\n                    productSystemId: item.productSystemId,\n                    productName: item.productName,\n                    quantity: item.quantity,\n                    branchSystemId: getBranchId(order)\n                });\n                // ✅ Dispatch stock (hỗ trợ combo - sẽ dispatch SP con)\n                const processedItems = processLineItemStock(item, getBranchId(order), 'dispatch', item.quantity);\n                // ✅ Add stock history entry for each processed item (SP con nếu combo)\n                processedItems.forEach((processedItem)=>{\n                    const product = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState().findById(processedItem.productSystemId);\n                    const currentStock = product?.inventoryByBranch?.[getBranchId(order)] || 0;\n                    addStockHistory({\n                        date: now,\n                        productId: processedItem.productSystemId,\n                        action: 'Xuất kho (Đơn hàng)',\n                        quantityChange: -processedItem.quantity,\n                        newStockLevel: currentStock,\n                        documentId: order.id,\n                        branchSystemId: getBranchId(order),\n                        branch: order.branchName,\n                        employeeName: employeeData?.fullName || 'Hệ thống'\n                    });\n                });\n            });\n            // Status update logic - will be updated with trackingCode after shipment creation\n            let updatedPackagings = order.packagings.map((p)=>{\n                if (p.systemId === packagingSystemId) {\n                    return {\n                        ...p,\n                        deliveryStatus: 'Đã giao hàng',\n                        deliveredDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date())\n                    };\n                }\n                return p;\n            });\n            const isAllDelivered = updatedPackagings.every((p)=>p.status === 'Hủy đóng gói' || p.deliveryStatus === 'Đã giao hàng');\n            let newStatus = order.status === 'Đặt hàng' ? 'Đang giao dịch' : order.status;\n            let newCompletedDate = order.completedDate;\n            if (isAllDelivered && order.paymentStatus === 'Thanh toán toàn bộ') {\n                newStatus = 'Hoàn thành';\n                newCompletedDate = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n            }\n            const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            // ✅ Create shipment record for INSTORE pickup\n            const packaging = order.packagings.find((p)=>p.systemId === packagingSystemId);\n            let newShipment = null;\n            if (packaging) {\n                const { createShipment, updateShipment } = _shipments_store__WEBPACK_IMPORTED_MODULE_15__.useShipmentStore.getState();\n                newShipment = createShipment({\n                    packagingSystemId: packagingSystemId,\n                    orderSystemId: orderSystemId,\n                    orderId: order.id,\n                    trackingCode: '',\n                    carrier: 'Nhận tại cửa hàng',\n                    service: 'Nhận tại cửa hàng',\n                    deliveryStatus: 'Đã giao hàng',\n                    printStatus: 'Chưa in',\n                    reconciliationStatus: 'Chưa đối soát',\n                    shippingFeeToPartner: 0,\n                    codAmount: 0,\n                    payer: 'Người gửi',\n                    createdAt: now,\n                    dispatchedAt: now,\n                    deliveredAt: now\n                });\n                // Update shipment trackingCode to use its own business ID\n                if (newShipment) {\n                    updateShipment(newShipment.systemId, {\n                        trackingCode: newShipment.id\n                    });\n                    // Update packaging with shipment trackingCode\n                    updatedPackagings = updatedPackagings.map((p)=>{\n                        if (p.systemId === packagingSystemId) {\n                            return {\n                                ...p,\n                                trackingCode: newShipment.id\n                            };\n                        }\n                        return p;\n                    });\n                }\n                console.log('✅ [confirmInStorePickup] Shipment created:', newShipment?.id);\n            }\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                deliveryStatus: 'Đã giao hàng',\n                status: newStatus,\n                completedDate: newCompletedDate,\n                stockOutStatus: 'Xuất kho toàn bộ',\n                dispatchedDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                dispatchedByEmployeeId: employeeId,\n                dispatchedByEmployeeName: employee?.fullName\n            };\n            console.log('✅ [confirmInStorePickup] Stock dispatched successfully');\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    confirmPartnerShipment: async (orderSystemId, packagingSystemId, shipmentData)=>{\n        try {\n            const order = baseStore.getState().data.find((o)=>o.systemId === orderSystemId);\n            if (!order) {\n                return {\n                    success: false,\n                    message: 'Không tìm thấy đơn hàng'\n                };\n            }\n            // ✅ Check negative packing setting (covers creating shipment)\n            const { allowNegativePacking } = _settings_sales_sales_management_store__WEBPACK_IMPORTED_MODULE_17__.useSalesManagementSettingsStore.getState();\n            if (!allowNegativePacking) {\n                const { findById: findProductById } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n                for (const item of order.lineItems){\n                    const product = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(item.productSystemId));\n                    if (product && (0,_products_combo_utils__WEBPACK_IMPORTED_MODULE_7__.isComboProduct)(product) && product.comboItems) {\n                        for (const comboItem of product.comboItems){\n                            const childProduct = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(comboItem.productSystemId));\n                            const requiredQty = item.quantity * comboItem.quantity;\n                            const currentStock = childProduct?.inventoryByBranch?.[order.branchSystemId] || 0;\n                            if (currentStock < requiredQty) {\n                                return {\n                                    success: false,\n                                    message: `Không thể tạo vận đơn: Sản phẩm \"${childProduct?.name}\" không đủ tồn kho`\n                                };\n                            }\n                        }\n                    } else {\n                        const currentStock = product?.inventoryByBranch?.[order.branchSystemId] || 0;\n                        if (currentStock < item.quantity) {\n                            return {\n                                success: false,\n                                message: `Không thể tạo vận đơn: Sản phẩm \"${item.productName}\" không đủ tồn kho`\n                            };\n                        }\n                    }\n                }\n            }\n            // ✅ Get GHTK preview params from window (set by ShippingIntegration)\n            const ghtkParams = window.__ghtkPreviewParams;\n            if (!ghtkParams) {\n                return {\n                    success: false,\n                    message: 'Thiếu thông tin vận chuyển. Vui lòng chọn dịch vụ vận chuyển.'\n                };\n            }\n            // ✅ Import GHTK service dynamically\n            const { GHTKService } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_features_settings_shipping_integrations_ghtk-service_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ../settings/shipping/integrations/ghtk-service */ \"(app-pages-browser)/./features/settings/shipping/integrations/ghtk-service.ts\"));\n            const { getGHTKCredentials } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_lib_utils_get-shipping-credentials_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ../../lib/utils/get-shipping-credentials */ \"(app-pages-browser)/./lib/utils/get-shipping-credentials.ts\"));\n            const { apiToken, partnerCode } = getGHTKCredentials();\n            const ghtkService = new GHTKService(apiToken, partnerCode);\n            console.log('📤 [confirmPartnerShipment] Calling GHTK API with params:', ghtkParams);\n            // ✅ Call real GHTK API\n            const result = await ghtkService.createOrder(ghtkParams);\n            if (!result.success || !result.order) {\n                throw new Error(result.message || 'Không thể tạo đơn vận chuyển');\n            }\n            // ✅ Update order with real tracking code from GHTK\n            const trackingCode = result.order.label;\n            const ghtkTrackingId = result.order.tracking_id;\n            const estimatedPickTime = result.order.estimated_pick_time;\n            const estimatedDeliverTime = result.order.estimated_deliver_time;\n            baseStore.setState((state)=>{\n                const updatedPackagings = order.packagings.map((p)=>{\n                    if (p.systemId === packagingSystemId) {\n                        return {\n                            ...p,\n                            deliveryMethod: 'Dịch vụ giao hàng',\n                            deliveryStatus: 'Chờ lấy hàng',\n                            carrier: 'GHTK',\n                            service: result.order?.fee ? `${result.order.fee}đ` : 'Standard',\n                            trackingCode: trackingCode,\n                            shippingFeeToPartner: parseInt(result.order?.fee || '0') || 0,\n                            codAmount: ghtkParams.pick_money || 0,\n                            payer: ghtkParams.is_freeship === 1 ? 'Người gửi' : 'Người nhận',\n                            noteToShipper: ghtkParams.note || '',\n                            weight: ghtkParams.weight,\n                            dimensions: `${ghtkParams.products?.[0]?.length || 10}×${ghtkParams.products?.[0]?.width || 10}×${ghtkParams.products?.[0]?.height || 10}`,\n                            // ✅ Store GHTK specific data\n                            ghtkTrackingId: String(ghtkTrackingId),\n                            estimatedPickTime: estimatedPickTime,\n                            estimatedDeliverTime: estimatedDeliverTime\n                        };\n                    }\n                    return p;\n                });\n                const updatedOrder = {\n                    ...order,\n                    packagings: updatedPackagings,\n                    deliveryStatus: 'Chờ lấy hàng',\n                    status: 'Đang giao dịch'\n                };\n                return {\n                    data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n                };\n            });\n            console.log('✅ [confirmPartnerShipment] GHTK order created successfully:', {\n                trackingCode,\n                ghtkTrackingId,\n                estimatedPickTime,\n                estimatedDeliverTime\n            });\n            return {\n                success: true,\n                message: `Tạo vận đơn thành công! Mã vận đơn: ${trackingCode}`\n            };\n        } catch (error) {\n            console.error('❌ [confirmPartnerShipment] Error:', error);\n            let errorMessage = 'Vui lòng thử lại';\n            if (error instanceof Error) {\n                errorMessage = error.message;\n            }\n            return {\n                success: false,\n                message: `Lỗi tạo đơn vận chuyển: ${errorMessage}`\n            };\n        }\n    },\n    dispatchFromWarehouse: (orderSystemId, packagingSystemId, employeeId)=>{\n        // ✅ Check negative stock out setting\n        const { allowNegativeStockOut } = _settings_sales_sales_management_store__WEBPACK_IMPORTED_MODULE_17__.useSalesManagementSettingsStore.getState();\n        if (!allowNegativeStockOut) {\n            const order = baseStore.getState().data.find((o)=>o.systemId === orderSystemId);\n            if (order) {\n                const { findById: findProductById } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n                for (const item of order.lineItems){\n                    const product = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(item.productSystemId));\n                    if (product && (0,_products_combo_utils__WEBPACK_IMPORTED_MODULE_7__.isComboProduct)(product) && product.comboItems) {\n                        for (const comboItem of product.comboItems){\n                            const childProduct = findProductById((0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(comboItem.productSystemId));\n                            const requiredQty = item.quantity * comboItem.quantity;\n                            const currentStock = childProduct?.inventoryByBranch?.[order.branchSystemId] || 0;\n                            if (currentStock < requiredQty) {\n                                alert(`Không thể xuất kho: Sản phẩm \"${childProduct?.name}\" không đủ tồn kho (Có: ${currentStock}, Cần: ${requiredQty})`);\n                                return baseStore.getState();\n                            }\n                        }\n                    } else {\n                        const currentStock = product?.inventoryByBranch?.[order.branchSystemId] || 0;\n                        if (currentStock < item.quantity) {\n                            alert(`Không thể xuất kho: Sản phẩm \"${item.productName}\" không đủ tồn kho (Có: ${currentStock}, Cần: ${item.quantity})`);\n                            return baseStore.getState();\n                        }\n                    }\n                }\n            }\n        }\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            const { addEntry: addStockHistory } = _stock_history_store__WEBPACK_IMPORTED_MODULE_8__.useStockHistoryStore.getState();\n            const employeeData = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const now = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n            order.lineItems.forEach((item)=>{\n                // ✅ Dispatch stock (hỗ trợ combo - sẽ dispatch SP con)\n                const processedItems = processLineItemStock(item, getBranchId(order), 'dispatch', item.quantity);\n                // ✅ Add stock history entry for each processed item\n                processedItems.forEach((processedItem)=>{\n                    const product = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState().findById(processedItem.productSystemId);\n                    const currentStock = product?.inventoryByBranch?.[getBranchId(order)] || 0;\n                    addStockHistory({\n                        date: now,\n                        productId: processedItem.productSystemId,\n                        action: 'Xuất kho (Đơn hàng)',\n                        quantityChange: -processedItem.quantity,\n                        newStockLevel: currentStock,\n                        documentId: order.id,\n                        branchSystemId: getBranchId(order),\n                        branch: order.branchName,\n                        employeeName: employeeData?.fullName || 'Hệ thống'\n                    });\n                });\n            });\n            const now2 = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n            const updatedPackagings = order.packagings.map((p)=>p.systemId === packagingSystemId ? {\n                    ...p,\n                    deliveryStatus: 'Đang giao hàng'\n                } : p);\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                deliveryStatus: 'Đang giao hàng',\n                stockOutStatus: 'Xuất kho toàn bộ',\n                dispatchedDate: now2,\n                dispatchedByEmployeeId: employeeId,\n                dispatchedByEmployeeName: employeeData?.fullName,\n                status: order.status === 'Đặt hàng' ? 'Đang giao dịch' : order.status\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    completeDelivery: (orderSystemId, packagingSystemId, employeeId)=>{\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            // ✅ Complete delivery (hỗ trợ combo - sẽ complete SP con)\n            order.lineItems.forEach((item)=>{\n                processLineItemStock(item, getBranchId(order), 'complete', item.quantity);\n            });\n            const updatedPackagings = order.packagings.map((p)=>p.systemId === packagingSystemId ? {\n                    ...p,\n                    deliveryStatus: 'Đã giao hàng',\n                    deliveredDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date())\n                } : p);\n            const isAllDelivered = updatedPackagings.every((p)=>p.status === 'Hủy đóng gói' || p.deliveryStatus === 'Đã giao hàng');\n            let newStatus = order.status;\n            let newCompletedDate = order.completedDate;\n            // ✅ Khi tất cả đơn đã giao → tạo công nợ (nếu có) và cập nhật stats\n            if (isAllDelivered && order.status !== 'Hoàn thành') {\n                // Tính công nợ còn lại\n                const totalPaid = (order.payments || []).reduce((sum, p)=>sum + p.amount, 0);\n                const debtAmount = Math.max(0, order.grandTotal - totalPaid);\n                // ✅ Tạo công nợ CHỈ KHI giao hàng thành công\n                if (debtAmount > 0) {\n                    const { addDebtTransaction } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n                    const dueDate = new Date();\n                    dueDate.setDate(dueDate.getDate() + 30);\n                    addDebtTransaction(order.customerSystemId, {\n                        systemId: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(`DEBT_${order.systemId}`),\n                        orderId: order.id,\n                        orderDate: order.orderDate.split('T')[0],\n                        amount: debtAmount,\n                        dueDate: dueDate.toISOString().split('T')[0],\n                        isPaid: false,\n                        remainingAmount: debtAmount,\n                        notes: 'Công nợ từ đơn hàng đã giao thành công'\n                    });\n                }\n                // Update customer stats\n                const { incrementOrderStats } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n                incrementOrderStats(order.customerSystemId, order.grandTotal);\n            }\n            // Check if order is fully complete (delivered + fully paid)\n            if (isAllDelivered && order.paymentStatus === 'Thanh toán toàn bộ') {\n                newStatus = 'Hoàn thành';\n                newCompletedDate = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n            }\n            const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                deliveryStatus: 'Đã giao hàng',\n                status: newStatus,\n                completedDate: newCompletedDate,\n                activityHistory: (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.appendHistoryEntry)(order.activityHistory, (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.createHistoryEntry)('status_changed', (0,_lib_activity_history_helper__WEBPACK_IMPORTED_MODULE_18__.getCurrentUserInfo)(), `${employee?.fullName || 'Nhân viên'} đã xác nhận giao hàng thành công${newStatus === 'Hoàn thành' ? '. Đơn hàng hoàn thành' : ''}`))\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    failDelivery: (orderSystemId, packagingSystemId, employeeId, reason)=>{\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            const { incrementFailedDeliveryStats } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n            // ✅ Return stock from transit (hỗ trợ combo - sẽ return SP con)\n            order.lineItems.forEach((item)=>{\n                processLineItemStock(item, getBranchId(order), 'return', item.quantity);\n            });\n            // ✅ Update customer failed delivery stats\n            incrementFailedDeliveryStats(order.customerSystemId);\n            const updatedPackagings = order.packagings.map((p)=>p.systemId === packagingSystemId ? {\n                    ...p,\n                    deliveryStatus: 'Chờ giao lại',\n                    notes: `Giao thất bại: ${reason}`\n                } : p);\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                deliveryStatus: 'Chờ giao lại'\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    // ✅ Hủy giao hàng - KHÔNG trả hàng về kho (hàng bị thất tung/shipper giữ)\n    cancelDeliveryOnly: (orderSystemId, packagingSystemId, employeeId, reason)=>{\n        const currentOrder = baseStore.getState().data.find((o)=>o.systemId === orderSystemId);\n        if (!ensureCancellationAllowed(currentOrder, 'hủy giao hàng')) {\n            return;\n        }\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            // ✅ Get employee info for canceller\n            const employeeData = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const updatedPackagings = order.packagings.map((p)=>p.systemId === packagingSystemId ? {\n                    ...p,\n                    status: 'Hủy đóng gói',\n                    deliveryStatus: 'Đã hủy',\n                    cancelReason: `Hủy giao hàng: ${reason}`,\n                    cancelDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                    cancelingEmployeeId: employeeId,\n                    cancelingEmployeeName: employeeData?.fullName || 'Hệ thống'\n                } : p);\n            // ✅ Check if all packagings are cancelled, update order status accordingly\n            const allCancelled = updatedPackagings.every((p)=>p.deliveryStatus === 'Đã hủy' || p.status === 'Hủy đóng gói');\n            const hasAnyActive = updatedPackagings.some((p)=>p.deliveryStatus && p.deliveryStatus !== 'Đã hủy' && p.status !== 'Hủy đóng gói');\n            let newOrderStatus = order.status;\n            let newDeliveryStatus = order.deliveryStatus;\n            if (allCancelled) {\n                // All packagings cancelled → order goes back to pending state\n                newOrderStatus = 'Đang giao dịch';\n                newDeliveryStatus = 'Chưa giao hàng';\n            } else if (hasAnyActive) {\n                // Some packagings still active → keep current delivery status of remaining active packaging\n                const activePackaging = updatedPackagings.find((p)=>p.deliveryStatus && p.deliveryStatus !== 'Đã hủy');\n                if (activePackaging?.deliveryStatus) {\n                    newDeliveryStatus = activePackaging.deliveryStatus;\n                }\n            }\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                status: newOrderStatus,\n                deliveryStatus: newDeliveryStatus\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    // ✅ Hủy giao và nhận lại hàng - TRẢ hàng về kho (đã nhận lại từ shipper)\n    cancelDelivery: (orderSystemId, packagingSystemId, employeeId, reason)=>{\n        const currentOrder = baseStore.getState().data.find((o)=>o.systemId === orderSystemId);\n        if (!ensureCancellationAllowed(currentOrder, 'hủy giao hàng')) {\n            return;\n        }\n        baseStore.setState((state)=>{\n            const order = state.data.find((o)=>o.systemId === orderSystemId);\n            if (!order) return state;\n            // ✅ TRẢ hàng từ \"đang giao\" về \"tồn kho\" (hỗ trợ combo - sẽ return SP con)\n            order.lineItems.forEach((item)=>{\n                processLineItemStock(item, getBranchId(order), 'return', item.quantity);\n            });\n            // ✅ Get employee info for canceller\n            const employeeData = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n            const updatedPackagings = order.packagings.map((p)=>p.systemId === packagingSystemId ? {\n                    ...p,\n                    status: 'Hủy đóng gói',\n                    deliveryStatus: 'Đã hủy',\n                    cancelReason: `Hủy giao hàng: ${reason}`,\n                    cancelDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                    cancelingEmployeeId: employeeId,\n                    cancelingEmployeeName: employeeData?.fullName || 'Hệ thống'\n                } : p);\n            // ✅ Check if all packagings are cancelled, update order status accordingly\n            const allCancelled = updatedPackagings.every((p)=>p.deliveryStatus === 'Đã hủy' || p.status === 'Hủy đóng gói');\n            const hasAnyActive = updatedPackagings.some((p)=>p.deliveryStatus && p.deliveryStatus !== 'Đã hủy' && p.status !== 'Hủy đóng gói');\n            let newOrderStatus = order.status;\n            let newDeliveryStatus = order.deliveryStatus;\n            if (allCancelled) {\n                // All packagings cancelled → order goes back to pending state\n                newOrderStatus = 'Đang giao dịch';\n                newDeliveryStatus = 'Chưa giao hàng';\n            } else if (hasAnyActive) {\n                // Some packagings still active → keep current delivery status of remaining active packaging\n                const activePackaging = updatedPackagings.find((p)=>p.deliveryStatus && p.deliveryStatus !== 'Đã hủy');\n                if (activePackaging?.deliveryStatus) {\n                    newDeliveryStatus = activePackaging.deliveryStatus;\n                }\n            }\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                status: newOrderStatus,\n                deliveryStatus: newDeliveryStatus\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n            };\n        });\n    },\n    confirmCodReconciliation: (shipments, employeeId)=>{\n        const { add: addReceipt } = _receipts_store__WEBPACK_IMPORTED_MODULE_12__.useReceiptStore.getState();\n        const { accounts } = _cashbook_store__WEBPACK_IMPORTED_MODULE_11__.useCashbookStore.getState();\n        const { data: receiptTypes } = _settings_receipt_types_store__WEBPACK_IMPORTED_MODULE_10__.useReceiptTypeStore.getState();\n        const employee = _employees_store__WEBPACK_IMPORTED_MODULE_5__.useEmployeeStore.getState().findById(employeeId);\n        const allOrders = baseStore.getState().data;\n        const totalByPartnerAndBranch = {};\n        shipments.forEach((shipment)=>{\n            const order = allOrders.find((o)=>o.systemId === shipment.orderSystemId);\n            if (!order || !shipment.carrier) return;\n            const key = `${shipment.carrier}-${getBranchId(order)}`;\n            if (!totalByPartnerAndBranch[key]) {\n                totalByPartnerAndBranch[key] = {\n                    total: 0,\n                    ids: [],\n                    branchSystemId: getBranchId(order),\n                    branchName: order.branchName,\n                    partnerName: shipment.carrier,\n                    shipmentSystemIds: []\n                };\n            }\n            totalByPartnerAndBranch[key].total += shipment.codAmount || 0;\n            totalByPartnerAndBranch[key].ids.push(shipment.trackingCode || shipment.id);\n            totalByPartnerAndBranch[key].shipmentSystemIds.push(shipment.systemId);\n        });\n        const createdReceipts = [];\n        Object.values(totalByPartnerAndBranch).forEach((group)=>{\n            const account = accounts.find((acc)=>acc.type === 'bank' && acc.branchSystemId === group.branchSystemId) || accounts.find((acc)=>acc.type === 'bank');\n            const category = receiptTypes.find((c)=>c.id === 'DOISOATCOD');\n            if (account && category) {\n                const newReceiptData = {\n                    id: '',\n                    date: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                    amount: group.total,\n                    payerType: 'Đối tác vận chuyển',\n                    payerName: group.partnerName,\n                    description: `Đối soát COD cho các vận đơn: ${group.ids.join(', ')}`,\n                    paymentMethod: 'Chuyển khoản',\n                    accountSystemId: account.systemId,\n                    originalDocumentId: group.ids.join(', '),\n                    createdBy: employee?.fullName || 'N/A',\n                    branchSystemId: group.branchSystemId,\n                    branchName: group.branchName,\n                    paymentReceiptTypeSystemId: category.systemId,\n                    paymentReceiptTypeName: category.name,\n                    status: 'completed',\n                    createdAt: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                    updatedAt: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                    affectsDebt: false\n                };\n                const newReceipt = addReceipt(newReceiptData);\n                if (newReceipt) {\n                    createdReceipts.push({\n                        ...newReceipt,\n                        shipmentSystemIds: group.shipmentSystemIds\n                    });\n                }\n            }\n        });\n        baseStore.setState((state)=>{\n            const updates = new Map();\n            shipments.forEach((shipment)=>{\n                const receiptForShipment = createdReceipts.find((v)=>v.shipmentSystemIds.includes(shipment.systemId));\n                if (!receiptForShipment || !shipment.codAmount || shipment.codAmount <= 0) return;\n                const orderSystemId = shipment.orderSystemId;\n                const orderUpdates = updates.get(orderSystemId) || {\n                    newPayments: [],\n                    reconciledShipmentIds: []\n                };\n                const newPayment = {\n                    systemId: receiptForShipment.systemId,\n                    id: receiptForShipment.id,\n                    date: receiptForShipment.date,\n                    method: 'Đối soát COD',\n                    amount: shipment.codAmount || 0,\n                    createdBy: (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)('SYSTEM'),\n                    description: `Thanh toán COD cho vận đơn ${shipment.trackingCode || shipment.id}`\n                };\n                orderUpdates.newPayments.push(newPayment);\n                orderUpdates.reconciledShipmentIds.push(shipment.systemId);\n                updates.set(orderSystemId, orderUpdates);\n            });\n            if (updates.size === 0) return state;\n            const newData = state.data.map((order)=>{\n                if (updates.has(order.systemId)) {\n                    const orderUpdates = updates.get(order.systemId);\n                    let updatedOrder = {\n                        ...order\n                    };\n                    updatedOrder.packagings = updatedOrder.packagings.map((p)=>orderUpdates.reconciledShipmentIds.includes(p.systemId) ? {\n                            ...p,\n                            reconciliationStatus: 'Đã đối soát'\n                        } : p);\n                    for (const payment of orderUpdates.newPayments){\n                        updatedOrder = applyPaymentToOrder(updatedOrder, payment);\n                    }\n                    return updatedOrder;\n                }\n                return order;\n            });\n            return {\n                data: newData\n            };\n        });\n    },\n    // ============================================\n    // GHTK INTEGRATION METHODS\n    // ============================================\n    /**\r\n     * Process GHTK webhook update\r\n     * Called when GHTK pushes status update or from tracking API\r\n     */ processGHTKWebhook: (webhookData)=>{\n        baseStore.setState((state)=>{\n            // Find order by tracking code or partner_id\n            const order = state.data.find((o)=>o.packagings.some((p)=>p.trackingCode === webhookData.label_id || p.systemId === webhookData.partner_id || o.systemId === webhookData.partner_id));\n            if (!order) {\n                console.warn('[GHTK Webhook] Order not found for:', {\n                    label_id: webhookData.label_id,\n                    partner_id: webhookData.partner_id\n                });\n                return state;\n            }\n            // Import status mapping\n            const { getGHTKStatusInfo, getGHTKReasonText } = __webpack_require__(/*! ../../lib/ghtk-constants */ \"(app-pages-browser)/./lib/ghtk-constants.ts\");\n            const statusMapping = getGHTKStatusInfo(webhookData.status_id);\n            if (!statusMapping) {\n                console.warn('[GHTK Webhook] Unknown status:', webhookData.status_id);\n                return state;\n            }\n            console.log('[GHTK Webhook] Processing update:', {\n                order: order.id,\n                trackingCode: webhookData.label_id,\n                statusId: webhookData.status_id,\n                statusText: statusMapping.statusText,\n                deliveryStatus: statusMapping.deliveryStatus\n            });\n            // Update packaging with new status\n            const updatedPackagings = order.packagings.map((p)=>{\n                if (p.trackingCode !== webhookData.label_id && p.systemId !== webhookData.partner_id) {\n                    return p;\n                }\n                return {\n                    ...p,\n                    deliveryStatus: statusMapping.deliveryStatus,\n                    partnerStatus: statusMapping.statusText,\n                    ghtkStatusId: webhookData.status_id,\n                    ghtkReasonCode: webhookData.reason_code,\n                    ghtkReasonText: webhookData.reason ? webhookData.reason : webhookData.reason_code ? getGHTKReasonText(webhookData.reason_code) : undefined,\n                    actualWeight: webhookData.weight,\n                    actualFee: webhookData.fee,\n                    lastSyncedAt: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                    // Update reconciliation status if status = 6 (Đã đối soát)\n                    reconciliationStatus: webhookData.status_id === 6 ? 'Đã đối soát' : p.reconciliationStatus,\n                    // Update delivered date if status = 5 or 6\n                    deliveredDate: [\n                        5,\n                        6\n                    ].includes(webhookData.status_id) && !p.deliveredDate ? (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()) : p.deliveredDate\n                };\n            });\n            // Handle stock updates based on status\n            if (statusMapping.shouldUpdateStock && statusMapping.stockAction) {\n                const { dispatchStock, completeDelivery: productCompleteDelivery, returnStockFromTransit } = _products_store__WEBPACK_IMPORTED_MODULE_6__.useProductStore.getState();\n                const { incrementFailedDeliveryStats } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n                // ✅ Expand combo items to child products\n                const stockItems = getComboStockItems(order.lineItems);\n                stockItems.forEach((item)=>{\n                    switch(statusMapping.stockAction){\n                        case 'dispatch':\n                            // Status 3: Đã lấy hàng -> Move to transit\n                            dispatchStock(item.productSystemId, (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(getBranchId(order)), item.quantity);\n                            break;\n                        case 'complete':\n                            // Status 5: Đã giao hàng -> Complete delivery\n                            productCompleteDelivery(item.productSystemId, (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(getBranchId(order)), item.quantity);\n                            break;\n                        case 'return':\n                            // Status -1, 7, 9, 13, 20: Failed/Returned -> Return stock\n                            returnStockFromTransit(item.productSystemId, (0,_lib_id_types__WEBPACK_IMPORTED_MODULE_3__.asSystemId)(getBranchId(order)), item.quantity);\n                            break;\n                    }\n                });\n                // ✅ Increment failed delivery stats for customer if return (moved outside loop)\n                if (statusMapping.stockAction === 'return') {\n                    const failureStatuses = [\n                        7,\n                        9,\n                        13,\n                        20,\n                        21\n                    ];\n                    const currentPackaging = order.packagings.find((p)=>p.trackingCode === webhookData.label_id);\n                    const previousStatusId = currentPackaging?.ghtkStatusId;\n                    if (failureStatuses.includes(webhookData.status_id) && (!previousStatusId || !failureStatuses.includes(previousStatusId))) {\n                        incrementFailedDeliveryStats(order.customerSystemId);\n                    }\n                }\n                console.log('[GHTK Webhook] Stock updated:', {\n                    action: statusMapping.stockAction,\n                    items: stockItems.length\n                });\n            }\n            // Determine order-level delivery status\n            const allPackagingsDelivered = updatedPackagings.every((p)=>p.status === 'Hủy đóng gói' || p.deliveryStatus === 'Đã giao hàng');\n            let newOrderDeliveryStatus = order.deliveryStatus;\n            let newOrderStatus = order.status;\n            let newCompletedDate = order.completedDate;\n            let newStockOutStatus = order.stockOutStatus;\n            // Update order delivery status\n            if (allPackagingsDelivered) {\n                newOrderDeliveryStatus = 'Đã giao hàng';\n                // Auto-complete order if delivered + paid\n                if (order.paymentStatus === 'Thanh toán toàn bộ' && order.status !== 'Hoàn thành') {\n                    newOrderStatus = 'Hoàn thành';\n                    newCompletedDate = (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date());\n                    // Update customer stats\n                    const { incrementOrderStats } = _customers_store__WEBPACK_IMPORTED_MODULE_9__.useCustomerStore.getState();\n                    incrementOrderStats(order.customerSystemId, order.grandTotal);\n                    console.log('[GHTK Webhook] Order completed:', order.id);\n                }\n            } else if (statusMapping.statusId === 3) {\n                // Status 3: Đã lấy hàng\n                newOrderDeliveryStatus = 'Đang giao hàng';\n                newStockOutStatus = 'Xuất kho toàn bộ';\n            } else if ([\n                4,\n                10\n            ].includes(statusMapping.statusId)) {\n                // Status 4, 10: Đang giao\n                newOrderDeliveryStatus = 'Đang giao hàng';\n            }\n            const updatedOrder = {\n                ...order,\n                packagings: updatedPackagings,\n                deliveryStatus: newOrderDeliveryStatus,\n                status: newOrderStatus,\n                completedDate: newCompletedDate,\n                stockOutStatus: newStockOutStatus\n            };\n            return {\n                data: state.data.map((o)=>o.systemId === order.systemId ? updatedOrder : o)\n            };\n        });\n    },\n    /**\r\n     * Cancel GHTK shipment\r\n     * ⚠️ Chỉ hủy được khi đơn ở trạng thái: 1, 2, 12 (Chưa tiếp nhận, Đã tiếp nhận, Đang lấy hàng)\r\n     */ cancelGHTKShipment: async (orderSystemId, packagingSystemId, trackingCode)=>{\n        try {\n            console.log('[GHTK] Cancelling shipment:', trackingCode);\n            // ✅ Lấy credentials từ shipping_partners_config\n            const { getGHTKCredentials } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_lib_utils_get-shipping-credentials_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ../../lib/utils/get-shipping-credentials */ \"(app-pages-browser)/./lib/utils/get-shipping-credentials.ts\"));\n            let credentials;\n            try {\n                credentials = getGHTKCredentials();\n            } catch (error) {\n                return {\n                    success: false,\n                    message: error.message || 'Chưa cấu hình GHTK. Vui lòng vào Cài đặt → Đối tác vận chuyển.'\n                };\n            }\n            const response = await fetch((0,_lib_api_config__WEBPACK_IMPORTED_MODULE_1__.getApiUrl)('/shipping/ghtk/cancel-order'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    trackingCode,\n                    apiToken: credentials.apiToken,\n                    partnerCode: credentials.partnerCode\n                })\n            });\n            const data = await response.json();\n            // ✅ Kiểm tra response từ GHTK\n            if (!response.ok) {\n                throw new Error(data.message || data.error || 'Failed to cancel GHTK shipment');\n            }\n            // ✅ GHTK trả success: false khi không thể hủy (đã lấy hàng)\n            if (data.success === false) {\n                console.log('[GHTK] Cannot cancel:', data.message);\n                return {\n                    success: false,\n                    message: data.message || 'Không thể hủy đơn hàng'\n                };\n            }\n            console.log('[GHTK] Cancellation successful:', data.message);\n            // ✅ CHỈ update state khi GHTK xác nhận hủy thành công\n            baseStore.setState((state)=>{\n                const order = state.data.find((o)=>o.systemId === orderSystemId);\n                if (!order) return state;\n                const updatedPackagings = order.packagings.map((p)=>{\n                    if (p.systemId !== packagingSystemId) return p;\n                    return {\n                        ...p,\n                        status: 'Hủy đóng gói',\n                        deliveryStatus: 'Đã hủy',\n                        cancelDate: (0,_lib_date_utils__WEBPACK_IMPORTED_MODULE_0__.toISODateTime)(new Date()),\n                        cancelReason: 'Hủy vận đơn GHTK',\n                        ghtkStatusId: -1,\n                        partnerStatus: 'Hủy đơn hàng'\n                    };\n                });\n                // ✅ KHÔNG rollback stock - để user tự quyết định (nút \"Hủy giao và nhận lại hàng\")\n                const updatedOrder = {\n                    ...order,\n                    packagings: updatedPackagings\n                };\n                return {\n                    data: state.data.map((o)=>o.systemId === orderSystemId ? updatedOrder : o)\n                };\n            });\n            return {\n                success: true,\n                message: data.message || 'Đã hủy vận đơn GHTK thành công'\n            };\n        } catch (error) {\n            console.error('[GHTK] Cancel error:', error);\n            return {\n                success: false,\n                message: error.message || 'Lỗi khi hủy vận đơn GHTK'\n            };\n        }\n    }\n};\n// Auto-allocate historical receipts on startup\n_receipts_store__WEBPACK_IMPORTED_MODULE_12__.useReceiptStore.getState().data.forEach((receipt)=>{\n    autoAllocateReceiptToOrders(receipt);\n});\n// React to newly created receipts\n_receipts_store__WEBPACK_IMPORTED_MODULE_12__.useReceiptStore.subscribe((state)=>state.data, (currentReceipts, previousReceipts)=>{\n    const previousIds = new Set((previousReceipts ?? []).map((r)=>r.systemId));\n    currentReceipts.forEach((receipt)=>{\n        if (!previousIds.has(receipt.systemId)) {\n            autoAllocateReceiptToOrders(receipt);\n        }\n    });\n});\n// Export typed hook with all augmented methods\nconst useOrderStore = ()=>{\n    const state = baseStore();\n    return {\n        ...state,\n        ...augmentedMethods\n    };\n};\n// Export getState for non-hook usage\nuseOrderStore.getState = ()=>{\n    const state = baseStore.getState();\n    return {\n        ...state,\n        ...augmentedMethods\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2ZlYXR1cmVzL29yZGVycy9zdG9yZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLCtEQUErRDtBQUMrQjtBQUM3QztBQUNTO0FBSUk7QUFDZTtBQUV2QjtBQUN0RCxpRkFBaUY7QUFDN0I7QUFDSztBQUNLO0FBQ1I7QUFDZ0I7QUFDdEUsNkRBQTZEO0FBQ1I7QUFDRDtBQUVTO0FBQzhCO0FBQ3JDO0FBR2U7QUFFc0I7QUFPaEQ7QUFFM0Msa0NBQWtDO0FBQ2xDLE1BQU15QixjQUFjLENBQUNDLFFBQWlCQSxNQUFNQyxjQUFjO0FBRTFELE1BQU1DLHlDQUFnRTtJQUNsRTtJQUNBO0lBQ0E7Q0FDSDtBQUVELE1BQU1DLHlCQUF5QjtBQUUvQixNQUFNQyx3QkFBd0I7QUFDOUIsTUFBTUMsNkJBQTZCO0FBRW5DLDhDQUE4QztBQUM5QyxJQUFJQywyQkFBMkI7QUFFL0Isc0VBQXNFO0FBQ3RFLE1BQU1DLHVCQUF1QixDQUFDQztJQUMxQixNQUFNQyxnQkFBZ0JELE9BQU9FLE9BQU8sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsVUFBVSxJQUFJLEVBQUU7SUFDNUROLDJCQUEyQjFCLG9FQUFxQkEsQ0FBQzZCLGVBQWVKO0FBQ3BFO0FBRUEscUNBQXFDO0FBQ3JDLE1BQU1RLDJCQUEyQjtJQUM3QlA7SUFDQSxPQUFPN0IseURBQVVBLENBQUNFLCtEQUFnQkEsQ0FBQyxhQUFhMkI7QUFDcEQ7QUFFQSxNQUFNUSxnQ0FBZ0MsQ0FBQ0M7SUFDbkMsSUFBSSxDQUFDQSxTQUFTLE9BQU87SUFDckIsTUFBTUMsV0FBVyxHQUFHRCxTQUFTO0lBQzdCLE1BQU1FLFNBQVNELFNBQVNFLE9BQU8sQ0FBQyxZQUFZO0lBQzVDLE9BQU9ELFVBQVVEO0FBQ3JCO0FBRUEsNkRBQTZEO0FBQzdELE1BQU1HLDBCQUEwQixDQUFDUDtJQUM3QixPQUFPQSxXQUFXUSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLE1BQU0s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QzlCO1FBQ0o7SUFDSjtBQUNKO0FBRUEsK0NBQStDO0FBQy9DMVcsNkRBQWVBLENBQUM2QyxRQUFRLEdBQUdDLElBQUksQ0FBQ29ILE9BQU8sQ0FBQ2xGLENBQUFBO0lBQ3BDTSw0QkFBNEJOO0FBQ2hDO0FBRUEsa0NBQWtDO0FBQ2xDaEYsNkRBQWVBLENBQUMyZCxTQUFTLENBQ3JCclcsQ0FBQUEsUUFBU0EsTUFBTXhFLElBQUksRUFDbkIsQ0FBQzhhLGlCQUFpQkM7SUFDZCxNQUFNQyxjQUFjLElBQUl6TyxJQUFJLENBQUN3TyxvQkFBb0IsRUFBRSxFQUFFblksR0FBRyxDQUFDcVksQ0FBQUEsSUFBS0EsRUFBRTFhLFFBQVE7SUFDeEV1YSxnQkFBZ0IxVCxPQUFPLENBQUNsRixDQUFBQTtRQUNwQixJQUFJLENBQUM4WSxZQUFZdk8sR0FBRyxDQUFDdkssUUFBUTNCLFFBQVEsR0FBRztZQUNwQ2lDLDRCQUE0Qk47UUFDaEM7SUFDSjtBQUNKO0FBSUosK0NBQStDO0FBQ3hDLE1BQU1nWixnQkFBZ0I7SUFDM0IsTUFBTTFXLFFBQVE3QjtJQUNkLE9BQU87UUFDTCxHQUFHNkIsS0FBSztRQUNSLEdBQUd5SixnQkFBZ0I7SUFDckI7QUFDRixFQUFFO0FBRUYscUNBQXFDO0FBQ3JDaU4sY0FBY25iLFFBQVEsR0FBRztJQUN2QixNQUFNeUUsUUFBUTdCLFVBQVU1QyxRQUFRO0lBQ2hDLE9BQU87UUFDTCxHQUFHeUUsS0FBSztRQUNSLEdBQUd5SixnQkFBZ0I7SUFDckI7QUFDRiIsInNvdXJjZXMiOlsiRDpcXGhybTJcXGZlYXR1cmVzXFxvcmRlcnNcXHN0b3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJ3p1c3RhbmQnO1xyXG4vLyBwZXJzaXN0IG1pZGRsZXdhcmUgcmVtb3ZlZCAtIGRhdGFiYXNlIGlzIG5vdyBzb3VyY2Ugb2YgdHJ1dGhcclxuaW1wb3J0IHsgZm9ybWF0RGF0ZSwgZm9ybWF0RGF0ZUN1c3RvbSwgdG9JU09EYXRlLCB0b0lTT0RhdGVUaW1lIH0gZnJvbSAnLi4vLi4vbGliL2RhdGUtdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRBcGlVcmwgfSBmcm9tICcuLi8uLi9saWIvYXBpLWNvbmZpZyc7XHJcbmltcG9ydCB7IGNyZWF0ZUNydWRTdG9yZSB9IGZyb20gJy4uLy4uL2xpYi9zdG9yZS1mYWN0b3J5JztcclxuLy8gUkVNT1ZFRDogaW1wb3J0IHsgZGF0YSBhcyBpbml0aWFsRGF0YU9taXQgfSBmcm9tICcuL2RhdGEnOyAvLyBNb2NrIGRhdGEgbm8gbG9uZ2VyIHVzZWQgLSBkYXRhYmFzZSBpcyBzb3VyY2Ugb2YgdHJ1dGhcclxuaW1wb3J0IHR5cGUgeyBPcmRlciwgT3JkZXJQYXltZW50LCBQYWNrYWdpbmcsIE9yZGVyTWFpblN0YXR1cywgT3JkZXJEZWxpdmVyeVN0YXR1cywgUGFja2FnaW5nU3RhdHVzLCBPcmRlclBheW1lbnRTdGF0dXMsIE9yZGVyRGVsaXZlcnlNZXRob2QgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHR5cGUgeyBTeXN0ZW1JZCwgQnVzaW5lc3NJZCB9IGZyb20gJy4uLy4uL2xpYi9pZC10eXBlcyc7XHJcbmltcG9ydCB7IGFzU3lzdGVtSWQsIGFzQnVzaW5lc3NJZCB9IGZyb20gJy4uLy4uL2xpYi9pZC10eXBlcyc7XHJcbmltcG9ydCB7IGdlbmVyYXRlU3lzdGVtSWQsIGdldE1heFN5c3RlbUlkQ291bnRlciB9IGZyb20gJy4uLy4uL2xpYi9pZC11dGlscyc7XHJcblxyXG5pbXBvcnQgeyB1c2VFbXBsb3llZVN0b3JlIH0gZnJvbSAnLi4vZW1wbG95ZWVzL3N0b3JlJztcclxuLy8gUkVNT1ZFRDogVm91Y2hlciBzdG9yZSBubyBsb25nZXIgZXhpc3RzIC0gdXNpbmcgUGF5bWVudC9SZWNlaXB0IHN0b3JlcyBpbnN0ZWFkXHJcbmltcG9ydCB7IHVzZVByb2R1Y3RTdG9yZSB9IGZyb20gJy4uL3Byb2R1Y3RzL3N0b3JlJztcclxuaW1wb3J0IHsgaXNDb21ib1Byb2R1Y3QgfSBmcm9tICcuLi9wcm9kdWN0cy9jb21iby11dGlscyc7XHJcbmltcG9ydCB7IHVzZVN0b2NrSGlzdG9yeVN0b3JlIH0gZnJvbSAnLi4vc3RvY2staGlzdG9yeS9zdG9yZSc7XHJcbmltcG9ydCB7IHVzZUN1c3RvbWVyU3RvcmUgfSBmcm9tICcuLi9jdXN0b21lcnMvc3RvcmUnO1xyXG5pbXBvcnQgeyB1c2VSZWNlaXB0VHlwZVN0b3JlIH0gZnJvbSAnLi4vc2V0dGluZ3MvcmVjZWlwdC10eXBlcy9zdG9yZSc7XHJcbi8vIFJFTU9WRUQ6IGltcG9ydCB0eXBlIHsgVm91Y2hlciB9IGZyb20gJy4uL3ZvdWNoZXJzL3R5cGVzJztcclxuaW1wb3J0IHsgdXNlQ2FzaGJvb2tTdG9yZSB9IGZyb20gJy4uL2Nhc2hib29rL3N0b3JlJztcclxuaW1wb3J0IHsgdXNlUmVjZWlwdFN0b3JlIH0gZnJvbSAnLi4vcmVjZWlwdHMvc3RvcmUnO1xyXG5pbXBvcnQgdHlwZSB7IFJlY2VpcHQsIFJlY2VpcHRPcmRlckFsbG9jYXRpb24gfSBmcm9tICcuLi9yZWNlaXB0cy90eXBlcyc7XHJcbmltcG9ydCB7IHVzZVNhbGVzUmV0dXJuU3RvcmUgfSBmcm9tICcuLi9zYWxlcy1yZXR1cm5zL3N0b3JlJztcclxuaW1wb3J0IHsgY3JlYXRlUGF5bWVudERvY3VtZW50LCBjcmVhdGVSZWNlaXB0RG9jdW1lbnQgfSBmcm9tICcuLi9maW5hbmNlL2RvY3VtZW50LWhlbHBlcnMnO1xyXG5pbXBvcnQgeyB1c2VTaGlwbWVudFN0b3JlIH0gZnJvbSAnLi4vc2hpcG1lbnRzL3N0b3JlJztcclxuaW1wb3J0IHR5cGUgeyBTaGlwbWVudCB9IGZyb20gJy4uL3NoaXBtZW50cy90eXBlcyc7XHJcblxyXG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlclN5c3RlbUlkIH0gZnJvbSAnLi4vLi4vY29udGV4dHMvYXV0aC1jb250ZXh0JztcclxuXHJcbmltcG9ydCB7IHVzZVNhbGVzTWFuYWdlbWVudFNldHRpbmdzU3RvcmUgfSBmcm9tICcuLi9zZXR0aW5ncy9zYWxlcy9zYWxlcy1tYW5hZ2VtZW50LXN0b3JlJztcclxuaW1wb3J0IHtcclxuICBnZXRDdXJyZW50VXNlckluZm8sXHJcbiAgY3JlYXRlQ3JlYXRlZEVudHJ5LFxyXG4gIGNyZWF0ZUhpc3RvcnlFbnRyeSxcclxuICBhcHBlbmRIaXN0b3J5RW50cnksXHJcbiAgdHlwZSBIaXN0b3J5RW50cnlcclxufSBmcm9tICcuLi8uLi9saWIvYWN0aXZpdHktaGlzdG9yeS1oZWxwZXInO1xyXG5cclxuLy8g4pyFIEhlbHBlciB0byBnZXQgYnJhbmNoIHN5c3RlbUlkXHJcbmNvbnN0IGdldEJyYW5jaElkID0gKG9yZGVyOiBPcmRlcikgPT4gb3JkZXIuYnJhbmNoU3lzdGVtSWQ7XHJcblxyXG5jb25zdCBkZWxpdmVyeVN0YXR1c2VzQmxvY2tlZEZvckNhbmNlbGxhdGlvbjogT3JkZXJEZWxpdmVyeVN0YXR1c1tdID0gW1xyXG4gICAgJ8SQYW5nIGdpYW8gaMOgbmcnLFxyXG4gICAgJ8SQw6MgZ2lhbyBow6BuZycsXHJcbiAgICAnQ2jhu50gZ2lhbyBs4bqhaScsXHJcbl07XHJcblxyXG5jb25zdCBJTl9TVE9SRV9QSUNLVVBfUFJFRklYID0gJ0lOU1RPUkUnO1xyXG5cclxuY29uc3QgUEFDS0FHSU5HX0NPREVfUFJFRklYID0gJ0RHJztcclxuY29uc3QgUEFDS0FHSU5HX1NZU1RFTV9JRF9QUkVGSVggPSAnUEFDS0FHRSc7XHJcblxyXG4vLyDinIUgVHJhY2sgcGFja2FnaW5nIHN5c3RlbUlkIGNvdW50ZXIgZ2xvYmFsbHlcclxubGV0IHBhY2thZ2luZ1N5c3RlbUlkQ291bnRlciA9IDA7XHJcblxyXG4vLyDinIUgSW5pdGlhbGl6ZSBjb3VudGVyIGZyb20gYWxsIGV4aXN0aW5nIHBhY2thZ2luZ3MgYWNyb3NzIGFsbCBvcmRlcnNcclxuY29uc3QgaW5pdFBhY2thZ2luZ0NvdW50ZXIgPSAob3JkZXJzOiBPcmRlcltdKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCBhbGxQYWNrYWdpbmdzID0gb3JkZXJzLmZsYXRNYXAobyA9PiBvLnBhY2thZ2luZ3MgfHwgW10pO1xyXG4gICAgcGFja2FnaW5nU3lzdGVtSWRDb3VudGVyID0gZ2V0TWF4U3lzdGVtSWRDb3VudGVyKGFsbFBhY2thZ2luZ3MsIFBBQ0tBR0lOR19TWVNURU1fSURfUFJFRklYKTtcclxufTtcclxuXHJcbi8vIOKchSBHZW5lcmF0ZSBuZXh0IHBhY2thZ2luZyBzeXN0ZW1JZFxyXG5jb25zdCBnZXROZXh0UGFja2FnaW5nU3lzdGVtSWQgPSAoKTogU3lzdGVtSWQgPT4ge1xyXG4gICAgcGFja2FnaW5nU3lzdGVtSWRDb3VudGVyKys7XHJcbiAgICByZXR1cm4gYXNTeXN0ZW1JZChnZW5lcmF0ZVN5c3RlbUlkKCdwYWNrYWdpbmcnLCBwYWNrYWdpbmdTeXN0ZW1JZENvdW50ZXIpKTtcclxufTtcclxuXHJcbmNvbnN0IGdldFBhY2thZ2luZ1N1ZmZpeEZyb21PcmRlcklkID0gKG9yZGVySWQ/OiBCdXNpbmVzc0lkKSA9PiB7XHJcbiAgICBpZiAoIW9yZGVySWQpIHJldHVybiAnJztcclxuICAgIGNvbnN0IHJhd1ZhbHVlID0gYCR7b3JkZXJJZH1gO1xyXG4gICAgY29uc3Qgc3VmZml4ID0gcmF3VmFsdWUucmVwbGFjZSgvXltBLVotXSsvLCAnJyk7XHJcbiAgICByZXR1cm4gc3VmZml4IHx8IHJhd1ZhbHVlO1xyXG59O1xyXG5cclxuLy8gQ291bnQgb25seSBhY3RpdmUgcGFja2FnaW5ncyAobm90IGNhbmNlbGxlZCkgZm9yIG51bWJlcmluZ1xyXG5jb25zdCBnZXRBY3RpdmVQYWNrYWdpbmdDb3VudCA9IChwYWNrYWdpbmdzOiBQYWNrYWdpbmdbXSk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gcGFja2FnaW5ncy5maWx0ZXIocCA9PiBwLnN0YXR1cyAhPT0gJ0jhu6d5IMSRw7NuZyBnw7NpJykubGVuZ3RoO1xyXG59O1xyXG5cclxuY29uc3QgYnVpbGRQYWNrYWdpbmdCdXNpbmVzc0lkID0gKG9yZGVySWQ6IEJ1c2luZXNzSWQsIGFjdGl2ZUluZGV4OiBudW1iZXIsIGFjdGl2ZUNvdW50OiBudW1iZXIpOiBCdXNpbmVzc0lkID0+IHtcclxuICAgIGNvbnN0IHN1ZmZpeCA9IGdldFBhY2thZ2luZ1N1ZmZpeEZyb21PcmRlcklkKG9yZGVySWQpO1xyXG4gICAgY29uc3QgYmFzZUNvZGUgPSBgJHtQQUNLQUdJTkdfQ09ERV9QUkVGSVh9JHtzdWZmaXggfHwgJzAwMDAwMCd9YDtcclxuICAgIC8vIE9ubHkgYWRkIHN1ZmZpeCBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgYWN0aXZlIHBhY2thZ2luZ3NcclxuICAgIGlmIChhY3RpdmVDb3VudCA+IDEgJiYgYWN0aXZlSW5kZXggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgcGFkZGVkSW5kZXggPSBTdHJpbmcoYWN0aXZlSW5kZXggKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgIHJldHVybiBhc0J1c2luZXNzSWQoYCR7YmFzZUNvZGV9LSR7cGFkZGVkSW5kZXh9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXNCdXNpbmVzc0lkKGJhc2VDb2RlKTtcclxufTtcclxuXHJcbmNvbnN0IGdldFJldHVybmVkVmFsdWVGb3JPcmRlciA9IChvcmRlclN5c3RlbUlkOiBTeXN0ZW1JZCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gdXNlU2FsZXNSZXR1cm5TdG9yZS5nZXRTdGF0ZSgpLmRhdGFcclxuICAgICAgICAuZmlsdGVyKHNyID0+IHNyLm9yZGVyU3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpXHJcbiAgICAgICAgLnJlZHVjZSgoc3VtLCBzcikgPT4gc3VtICsgc3IudG90YWxSZXR1cm5WYWx1ZSwgMCk7XHJcbn07XHJcblxyXG5jb25zdCBjYWxjdWxhdGVBY3R1YWxEZWJ0ID0gKG9yZGVyOiBPcmRlcik6IG51bWJlciA9PiB7XHJcbiAgICBjb25zdCB0b3RhbFJldHVybmVkVmFsdWUgPSBnZXRSZXR1cm5lZFZhbHVlRm9yT3JkZXIob3JkZXIuc3lzdGVtSWQpO1xyXG4gICAgcmV0dXJuIE1hdGgubWF4KG9yZGVyLmdyYW5kVG90YWwgLSB0b3RhbFJldHVybmVkVmFsdWUsIDApO1xyXG59O1xyXG5cclxuY29uc3QgY2FsY3VsYXRlVG90YWxQYWlkID0gKHBheW1lbnRzOiBPcmRlclBheW1lbnRbXSk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gcGF5bWVudHMucmVkdWNlKChzdW0sIHBheW1lbnQpID0+IHN1bSArIHBheW1lbnQuYW1vdW50LCAwKTtcclxufTtcclxuXHJcbmNvbnN0IGdldE9yZGVyT3V0c3RhbmRpbmdBbW91bnQgPSAob3JkZXI6IE9yZGVyKTogbnVtYmVyID0+IHtcclxuICAgIGNvbnN0IGFjdHVhbERlYnQgPSBjYWxjdWxhdGVBY3R1YWxEZWJ0KG9yZGVyKTtcclxuICAgIGNvbnN0IHRvdGFsUGFpZCA9IGNhbGN1bGF0ZVRvdGFsUGFpZChvcmRlci5wYXltZW50cyA/PyBbXSk7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoYWN0dWFsRGVidCAtIHRvdGFsUGFpZCwgMCk7XHJcbn07XHJcblxyXG5jb25zdCBhcHBseVBheW1lbnRUb09yZGVyID0gKG9yZGVyOiBPcmRlciwgcGF5bWVudDogT3JkZXJQYXltZW50KTogT3JkZXIgPT4ge1xyXG4gICAgY29uc3QgdXBkYXRlZFBheW1lbnRzID0gWy4uLihvcmRlci5wYXltZW50cyA/PyBbXSksIHBheW1lbnRdO1xyXG4gICAgY29uc3QgdG90YWxQYWlkID0gY2FsY3VsYXRlVG90YWxQYWlkKHVwZGF0ZWRQYXltZW50cyk7XHJcbiAgICBjb25zdCBhY3R1YWxEZWJ0ID0gY2FsY3VsYXRlQWN0dWFsRGVidChvcmRlcik7XHJcblxyXG4gICAgbGV0IG5ld1BheW1lbnRTdGF0dXM6IE9yZGVyUGF5bWVudFN0YXR1cyA9ICdDaMawYSB0aGFuaCB0b8Ohbic7XHJcbiAgICBpZiAodG90YWxQYWlkID49IGFjdHVhbERlYnQpIHtcclxuICAgICAgICBuZXdQYXltZW50U3RhdHVzID0gJ1RoYW5oIHRvw6FuIHRvw6BuIGLhu5knO1xyXG4gICAgfSBlbHNlIGlmICh0b3RhbFBhaWQgPiAwKSB7XHJcbiAgICAgICAgbmV3UGF5bWVudFN0YXR1cyA9ICdUaGFuaCB0b8OhbiAxIHBo4bqnbic7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgd2FzQ29tcGxldGVkID0gb3JkZXIuc3RhdHVzID09PSAnSG/DoG4gdGjDoG5oJztcclxuICAgIGxldCBuZXdTdGF0dXMgPSBvcmRlci5zdGF0dXM7XHJcbiAgICBsZXQgbmV3Q29tcGxldGVkRGF0ZSA9IG9yZGVyLmNvbXBsZXRlZERhdGU7XHJcblxyXG4gICAgaWYgKG5ld1BheW1lbnRTdGF0dXMgPT09ICdUaGFuaCB0b8OhbiB0b8OgbiBi4buZJyAmJiBvcmRlci5kZWxpdmVyeVN0YXR1cyA9PT0gJ8SQw6MgZ2lhbyBow6BuZycpIHtcclxuICAgICAgICBuZXdTdGF0dXMgPSAnSG/DoG4gdGjDoG5oJztcclxuICAgICAgICBuZXdDb21wbGV0ZWREYXRlID0gdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKTtcclxuICAgICAgICBpZiAoIXdhc0NvbXBsZXRlZCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGluY3JlbWVudE9yZGVyU3RhdHMgfSA9IHVzZUN1c3RvbWVyU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgaW5jcmVtZW50T3JkZXJTdGF0cyhvcmRlci5jdXN0b21lclN5c3RlbUlkLCBvcmRlci5ncmFuZFRvdGFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyB1cGRhdGVEZWJ0VHJhbnNhY3Rpb25QYXltZW50IH0gPSB1c2VDdXN0b21lclN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICB1cGRhdGVEZWJ0VHJhbnNhY3Rpb25QYXltZW50KG9yZGVyLmN1c3RvbWVyU3lzdGVtSWQsIG9yZGVyLmlkLCBwYXltZW50LmFtb3VudCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5vcmRlcixcclxuICAgICAgICBwYXltZW50czogdXBkYXRlZFBheW1lbnRzLFxyXG4gICAgICAgIHBheW1lbnRTdGF0dXM6IG5ld1BheW1lbnRTdGF0dXMsXHJcbiAgICAgICAgc3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICAgICAgY29tcGxldGVkRGF0ZTogbmV3Q29tcGxldGVkRGF0ZSxcclxuICAgICAgICBwYWlkQW1vdW50OiB0b3RhbFBhaWQsXHJcbiAgICB9O1xyXG59O1xyXG5cclxuY29uc3Qgc2hvdWxkQXV0b0FsbG9jYXRlUmVjZWlwdCA9IChyZWNlaXB0OiBSZWNlaXB0KTogYm9vbGVhbiA9PiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIHJlY2VpcHQuc3RhdHVzID09PSAnY29tcGxldGVkJyAmJlxyXG4gICAgICAgIHJlY2VpcHQuYWZmZWN0c0RlYnQgJiZcclxuICAgICAgICAhIXJlY2VpcHQuY3VzdG9tZXJTeXN0ZW1JZCAmJlxyXG4gICAgICAgICFyZWNlaXB0LmxpbmtlZE9yZGVyU3lzdGVtSWRcclxuICAgICk7XHJcbn07XHJcblxyXG5jb25zdCBnZXRBbGxvY2F0ZWRBbW91bnQgPSAocmVjZWlwdDogUmVjZWlwdCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gcmVjZWlwdC5vcmRlckFsbG9jYXRpb25zPy5yZWR1Y2UoKHN1bSwgYWxsb2NhdGlvbikgPT4gc3VtICsgYWxsb2NhdGlvbi5hbW91bnQsIDApID8/IDA7XHJcbn07XHJcblxyXG5jb25zdCBhdXRvQWxsb2NhdGVSZWNlaXB0VG9PcmRlcnMgPSAocmVjZWlwdDogUmVjZWlwdCkgPT4ge1xyXG4gICAgaWYgKCFzaG91bGRBdXRvQWxsb2NhdGVSZWNlaXB0KHJlY2VpcHQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlbWFpbmluZ0Ftb3VudCA9IHJlY2VpcHQuYW1vdW50IC0gZ2V0QWxsb2NhdGVkQW1vdW50KHJlY2VpcHQpO1xyXG4gICAgaWYgKHJlbWFpbmluZ0Ftb3VudCA8PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNhbmRpZGF0ZU9yZGVycyA9IGJhc2VTdG9yZS5nZXRTdGF0ZSgpLmRhdGFcclxuICAgICAgICAuZmlsdGVyKG9yZGVyID0+IG9yZGVyLmN1c3RvbWVyU3lzdGVtSWQgPT09IHJlY2VpcHQuY3VzdG9tZXJTeXN0ZW1JZCAmJiBvcmRlci5zdGF0dXMgIT09ICfEkMOjIGjhu6d5JylcclxuICAgICAgICAubWFwKG9yZGVyID0+ICh7IG9yZGVyLCBvdXRzdGFuZGluZzogZ2V0T3JkZXJPdXRzdGFuZGluZ0Ftb3VudChvcmRlcikgfSkpXHJcbiAgICAgICAgLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5vdXRzdGFuZGluZyA+IDApXHJcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYVRpbWUgPSBhLm9yZGVyLm9yZGVyRGF0ZSA/IG5ldyBEYXRlKGEub3JkZXIub3JkZXJEYXRlKS5nZXRUaW1lKCkgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBiVGltZSA9IGIub3JkZXIub3JkZXJEYXRlID8gbmV3IERhdGUoYi5vcmRlci5vcmRlckRhdGUpLmdldFRpbWUoKSA6IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBhVGltZSAtIGJUaW1lO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGlmICghY2FuZGlkYXRlT3JkZXJzLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYW1vdW50VG9EaXN0cmlidXRlID0gcmVtYWluaW5nQW1vdW50O1xyXG4gICAgY29uc3QgdXBkYXRlZE9yZGVycyA9IG5ldyBNYXA8U3lzdGVtSWQsIE9yZGVyPigpO1xyXG4gICAgY29uc3QgYWxsb2NhdGlvbkVudHJpZXM6IFJlY2VpcHRPcmRlckFsbG9jYXRpb25bXSA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgeyBvcmRlciB9IG9mIGNhbmRpZGF0ZU9yZGVycykge1xyXG4gICAgICAgIGlmIChhbW91bnRUb0Rpc3RyaWJ1dGUgPD0gMCkge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRPcmRlclN0YXRlID0gdXBkYXRlZE9yZGVycy5nZXQob3JkZXIuc3lzdGVtSWQpID8/IG9yZGVyO1xyXG4gICAgICAgIGNvbnN0IG91dHN0YW5kaW5nID0gZ2V0T3JkZXJPdXRzdGFuZGluZ0Ftb3VudChjdXJyZW50T3JkZXJTdGF0ZSk7XHJcbiAgICAgICAgaWYgKG91dHN0YW5kaW5nIDw9IDApIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbGxvY2F0aW9uQW1vdW50ID0gTWF0aC5taW4ob3V0c3RhbmRpbmcsIGFtb3VudFRvRGlzdHJpYnV0ZSk7XHJcbiAgICAgICAgaWYgKGFsbG9jYXRpb25BbW91bnQgPD0gMCkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBheW1lbnRFbnRyeTogT3JkZXJQYXltZW50ID0ge1xyXG4gICAgICAgICAgICBzeXN0ZW1JZDogcmVjZWlwdC5zeXN0ZW1JZCxcclxuICAgICAgICAgICAgaWQ6IHJlY2VpcHQuaWQsXHJcbiAgICAgICAgICAgIGRhdGU6IHJlY2VpcHQuZGF0ZSxcclxuICAgICAgICAgICAgYW1vdW50OiBhbGxvY2F0aW9uQW1vdW50LFxyXG4gICAgICAgICAgICBtZXRob2Q6IHJlY2VpcHQucGF5bWVudE1ldGhvZE5hbWUsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogYXNTeXN0ZW1JZChyZWNlaXB0LmNyZWF0ZWRCeSksXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiByZWNlaXB0LmRlc2NyaXB0aW9uID8/IGBUaGFuaCB0b8OhbiB04burIHBoaeG6v3UgdGh1ICR7cmVjZWlwdC5pZH1gLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IGFwcGx5UGF5bWVudFRvT3JkZXIoY3VycmVudE9yZGVyU3RhdGUsIHBheW1lbnRFbnRyeSk7XHJcbiAgICAgICAgdXBkYXRlZE9yZGVycy5zZXQob3JkZXIuc3lzdGVtSWQsIHVwZGF0ZWRPcmRlcik7XHJcbiAgICAgICAgYWxsb2NhdGlvbkVudHJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgIG9yZGVyU3lzdGVtSWQ6IG9yZGVyLnN5c3RlbUlkLFxyXG4gICAgICAgICAgICBvcmRlcklkOiBvcmRlci5pZCxcclxuICAgICAgICAgICAgYW1vdW50OiBhbGxvY2F0aW9uQW1vdW50LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhbW91bnRUb0Rpc3RyaWJ1dGUgLT0gYWxsb2NhdGlvbkFtb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWFsbG9jYXRpb25FbnRyaWVzLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBzdGF0ZS5kYXRhLm1hcChvcmRlciA9PiB1cGRhdGVkT3JkZXJzLmdldChvcmRlci5zeXN0ZW1JZCkgPz8gb3JkZXIpO1xyXG4gICAgICAgIHJldHVybiB7IGRhdGEgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHJlY2VpcHRTdG9yZSA9IHVzZVJlY2VpcHRTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgY29uc3QgbGF0ZXN0UmVjZWlwdCA9IHJlY2VpcHRTdG9yZS5maW5kQnlJZChyZWNlaXB0LnN5c3RlbUlkKTtcclxuICAgIGlmICghbGF0ZXN0UmVjZWlwdCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZWNlaXB0U3RvcmUudXBkYXRlKHJlY2VpcHQuc3lzdGVtSWQsIHtcclxuICAgICAgICAuLi5sYXRlc3RSZWNlaXB0LFxyXG4gICAgICAgIG9yZGVyQWxsb2NhdGlvbnM6IFsuLi4obGF0ZXN0UmVjZWlwdC5vcmRlckFsbG9jYXRpb25zID8/IFtdKSwgLi4uYWxsb2NhdGlvbkVudHJpZXNdLFxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBlbnN1cmVPcmRlclBhY2thZ2luZ0lkZW50aWZpZXJzID0gKG9yZGVyOiBPcmRlcik6IE9yZGVyIHwgbnVsbCA9PiB7XHJcbiAgICBpZiAoIW9yZGVyLnBhY2thZ2luZ3MgfHwgb3JkZXIucGFja2FnaW5ncy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb3VudCBvbmx5IGFjdGl2ZSBwYWNrYWdpbmdzIGZvciBwcm9wZXIgbnVtYmVyaW5nXHJcbiAgICBjb25zdCBhY3RpdmVQYWNrYWdpbmdzID0gb3JkZXIucGFja2FnaW5ncy5maWx0ZXIocCA9PiBwLnN0YXR1cyAhPT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICBjb25zdCBhY3RpdmVDb3VudCA9IGFjdGl2ZVBhY2thZ2luZ3MubGVuZ3RoO1xyXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcclxuICAgIGxldCBhY3RpdmVJbmRleCA9IDA7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcCgocGtnLCBpZHgpID0+IHtcclxuICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IHBrZy5zdGF0dXMgPT09ICdI4buneSDEkcOzbmcgZ8OzaSc7XHJcbiAgICAgICAgY29uc3QgaGFzSWQgPSB0eXBlb2YgcGtnLmlkID09PSAnc3RyaW5nJyAmJiBwa2cuaWQudHJpbSgpLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgLy8g4pyFIENoZWNrIGZvciB0ZW1wIHN5c3RlbUlkIG9yIG9sZCBmb3JtYXQgKFBLR18pXHJcbiAgICAgICAgY29uc3QgaGFzVGVtcE9yT2xkU3lzdGVtSWQgPSBwa2cuc3lzdGVtSWQ/LnN0YXJ0c1dpdGgoJ1BLR19URU1QXycpIHx8IHBrZy5zeXN0ZW1JZD8uc3RhcnRzV2l0aCgnUEtHXycpO1xyXG4gICAgICAgIGNvbnN0IGhhc1ZhbGlkU3lzdGVtSWQgPSBwa2cuc3lzdGVtSWQ/LnN0YXJ0c1dpdGgoUEFDS0FHSU5HX1NZU1RFTV9JRF9QUkVGSVgpO1xyXG4gICAgICAgIGNvbnN0IHNob3VsZEZpeFRyYWNraW5nID0gcGtnLmRlbGl2ZXJ5TWV0aG9kID09PSAnTmjhuq1uIHThuqFpIGPhu61hIGjDoG5nJyAmJiBwa2cudHJhY2tpbmdDb2RlID09PSBgJHtJTl9TVE9SRV9QSUNLVVBfUFJFRklYfS1gO1xyXG5cclxuICAgICAgICAvLyBGb3IgY2FuY2VsbGVkIHBhY2thZ2luZ3MsIGtlZXAgZXhpc3RpbmcgSURcclxuICAgICAgICBpZiAoaXNDYW5jZWxsZWQpIHtcclxuICAgICAgICAgICAgaWYgKCFoYXNJZCB8fCAoaGFzVGVtcE9yT2xkU3lzdGVtSWQgJiYgIWhhc1ZhbGlkU3lzdGVtSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTdGlsbCBuZWVkIHRvIGFzc2lnbiBhbiBJRCBpZiBtaXNzaW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0UGtnID0geyAuLi5wa2cgfTtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0UGtnLmlkID0gYnVpbGRQYWNrYWdpbmdCdXNpbmVzc0lkKG9yZGVyLmlkLCAwLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChoYXNUZW1wT3JPbGRTeXN0ZW1JZCAmJiAhaGFzVmFsaWRTeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRQa2cuc3lzdGVtSWQgPSBnZXROZXh0UGFja2FnaW5nU3lzdGVtSWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHRQa2c7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBrZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZvciBhY3RpdmUgcGFja2FnaW5ncywgdXNlIGFjdGl2ZUluZGV4IGZvciBudW1iZXJpbmdcclxuICAgICAgICBjb25zdCBjdXJyZW50QWN0aXZlSW5kZXggPSBhY3RpdmVJbmRleDtcclxuICAgICAgICBhY3RpdmVJbmRleCsrO1xyXG5cclxuICAgICAgICBpZiAoaGFzSWQgJiYgIXNob3VsZEZpeFRyYWNraW5nICYmIGhhc1ZhbGlkU3lzdGVtSWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBrZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5leHRQa2cgPSB7IC4uLnBrZyB9O1xyXG4gICAgICAgIGlmICghaGFzSWQpIHtcclxuICAgICAgICAgICAgbmV4dFBrZy5pZCA9IGJ1aWxkUGFja2FnaW5nQnVzaW5lc3NJZChvcmRlci5pZCwgY3VycmVudEFjdGl2ZUluZGV4LCBhY3RpdmVDb3VudCk7XHJcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDinIUgRml4IHRlbXBvcmFyeS9vbGQgc3lzdGVtSWQgdG8gcHJvcGVyIGZvcm1hdCBQQUNLQUdFMDAwMDAxXHJcbiAgICAgICAgaWYgKGhhc1RlbXBPck9sZFN5c3RlbUlkICYmICFoYXNWYWxpZFN5c3RlbUlkKSB7XHJcbiAgICAgICAgICAgIG5leHRQa2cuc3lzdGVtSWQgPSBnZXROZXh0UGFja2FnaW5nU3lzdGVtSWQoKTtcclxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2hvdWxkRml4VHJhY2tpbmcpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRJZCA9IG5leHRQa2cuaWQgPz8gYnVpbGRQYWNrYWdpbmdCdXNpbmVzc0lkKG9yZGVyLmlkLCBjdXJyZW50QWN0aXZlSW5kZXgsIGFjdGl2ZUNvdW50KTtcclxuICAgICAgICAgICAgbmV4dFBrZy50cmFja2luZ0NvZGUgPSBgJHtJTl9TVE9SRV9QSUNLVVBfUFJFRklYfS0ke3Jlc29sdmVkSWR9YDtcclxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV4dFBrZztcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBjaGFuZ2VkID8geyAuLi5vcmRlciwgcGFja2FnaW5nczogdXBkYXRlZFBhY2thZ2luZ3MgfSA6IG51bGw7XHJcbn07XHJcblxyXG5jb25zdCBlbnN1cmVDYW5jZWxsYXRpb25BbGxvd2VkID0gKG9yZGVyOiBPcmRlciB8IHVuZGVmaW5lZCwgYWN0aW9uTGFiZWw6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKCFvcmRlcikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IHsgYWxsb3dDYW5jZWxBZnRlckV4cG9ydCB9ID0gdXNlU2FsZXNNYW5hZ2VtZW50U2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgaWYgKGFsbG93Q2FuY2VsQWZ0ZXJFeHBvcnQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBoYXNMZWZ0V2FyZWhvdXNlID1cclxuICAgICAgICBvcmRlci5zdG9ja091dFN0YXR1cyA9PT0gJ1h14bqldCBraG8gdG/DoG4gYuG7mScgfHxcclxuICAgICAgICBkZWxpdmVyeVN0YXR1c2VzQmxvY2tlZEZvckNhbmNlbGxhdGlvbi5pbmNsdWRlcyhvcmRlci5kZWxpdmVyeVN0YXR1cyk7XHJcblxyXG4gICAgaWYgKGhhc0xlZnRXYXJlaG91c2UpIHtcclxuICAgICAgICBhbGVydChcclxuICAgICAgICAgICAgYEtow7RuZyB0aOG7gyAke2FjdGlvbkxhYmVsfSB2w6wgxJHGoW4gaMOgbmcgxJHDoyB4deG6pXQga2hvLiBWw6BvIEPhuqV1IGjDrG5oIGLDoW4gaMOgbmcgLT4gVGhp4bq/dCBs4bqtcCBxdeG6o24gbMO9IGLDoW4gaMOgbmcgdsOgIGLhuq10IFwiQ2hvIHBow6lwIGjhu6d5IMSRxqFuIGjDoG5nIHNhdSBraGkgeHXhuqV0IGtob1wiLmAsXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG4vKipcclxuICog4pyFIEhlbHBlciDEkeG7gyB44butIGzDvSBzdG9jayBjaG8gY29tYm8gaG/hurdjIHPhuqNuIHBo4bqpbSB0aMaw4budbmdcclxuICogQ29tYm8ga2jDtG5nIGPDsyB04buTbiBraG8gdGjhu7FjIHThur8gLSB0aGFvIHTDoWMgdHLDqm4gU1AgY29uXHJcbiAqL1xyXG50eXBlIFN0b2NrT3BlcmF0aW9uID0gJ2NvbW1pdCcgfCAndW5jb21taXQnIHwgJ2Rpc3BhdGNoJyB8ICdjb21wbGV0ZScgfCAncmV0dXJuJztcclxuXHJcbmNvbnN0IHByb2Nlc3NMaW5lSXRlbVN0b2NrID0gKFxyXG4gICAgbGluZUl0ZW06IHsgcHJvZHVjdFN5c3RlbUlkOiBzdHJpbmc7IHF1YW50aXR5OiBudW1iZXIgfSxcclxuICAgIGJyYW5jaFN5c3RlbUlkOiBzdHJpbmcsXHJcbiAgICBvcGVyYXRpb246IFN0b2NrT3BlcmF0aW9uLFxyXG4gICAgb3JkZXJRdWFudGl0eTogbnVtYmVyID0gMSAvLyBT4buRIGzGsOG7o25nIMSR4bq3dCBj4bunYSBsaW5lIGl0ZW1cclxuKSA9PiB7XHJcbiAgICBjb25zdCB7IFxyXG4gICAgICAgIGZpbmRCeUlkOiBmaW5kUHJvZHVjdEJ5SWQsIFxyXG4gICAgICAgIGNvbW1pdFN0b2NrLCBcclxuICAgICAgICB1bmNvbW1pdFN0b2NrLCBcclxuICAgICAgICBkaXNwYXRjaFN0b2NrLCBcclxuICAgICAgICBjb21wbGV0ZURlbGl2ZXJ5LCBcclxuICAgICAgICByZXR1cm5TdG9ja0Zyb21UcmFuc2l0IFxyXG4gICAgfSA9IHVzZVByb2R1Y3RTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBwcm9kdWN0ID0gZmluZFByb2R1Y3RCeUlkKGFzU3lzdGVtSWQobGluZUl0ZW0ucHJvZHVjdFN5c3RlbUlkKSk7XHJcbiAgICBcclxuICAgIC8vIFjDoWMgxJHhu4tuaCBkYW5oIHPDoWNoIGl0ZW1zIGPhuqduIHjhu60gbMO9IChTUCBjb24gbuG6v3UgY29tYm8sIGhv4bq3YyBjaMOtbmggU1AgbuG6v3UgdGjGsOG7nW5nKVxyXG4gICAgY29uc3QgaXRlbXNUb1Byb2Nlc3M6IHsgcHJvZHVjdFN5c3RlbUlkOiBTeXN0ZW1JZDsgcXVhbnRpdHk6IG51bWJlciB9W10gPSBbXTtcclxuICAgIFxyXG4gICAgaWYgKHByb2R1Y3QgJiYgaXNDb21ib1Byb2R1Y3QocHJvZHVjdCkgJiYgcHJvZHVjdC5jb21ib0l0ZW1zKSB7XHJcbiAgICAgICAgLy8gQ29tYm86IHjhu60gbMO9IHThuqV0IGPhuqMgU1AgY29uXHJcbiAgICAgICAgcHJvZHVjdC5jb21ib0l0ZW1zLmZvckVhY2goY29tYm9JdGVtID0+IHtcclxuICAgICAgICAgICAgaXRlbXNUb1Byb2Nlc3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0U3lzdGVtSWQ6IGFzU3lzdGVtSWQoY29tYm9JdGVtLnByb2R1Y3RTeXN0ZW1JZCksXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eTogb3JkZXJRdWFudGl0eSAqIGNvbWJvSXRlbS5xdWFudGl0eSwgLy8gU+G7kSBsxrDhu6NuZyBjb21ibyDDlyBz4buRIGzGsOG7o25nIFNQIGNvblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gU+G6o24gcGjhuqltIHRoxrDhu51uZ1xyXG4gICAgICAgIGl0ZW1zVG9Qcm9jZXNzLnB1c2goe1xyXG4gICAgICAgICAgICBwcm9kdWN0U3lzdGVtSWQ6IGFzU3lzdGVtSWQobGluZUl0ZW0ucHJvZHVjdFN5c3RlbUlkKSxcclxuICAgICAgICAgICAgcXVhbnRpdHk6IG9yZGVyUXVhbnRpdHksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFRo4buxYyBoaeG7h24gb3BlcmF0aW9uIGNobyB04burbmcgaXRlbVxyXG4gICAgaXRlbXNUb1Byb2Nlc3MuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBjb25zdCBicmFuY2hJZCA9IGFzU3lzdGVtSWQoYnJhbmNoU3lzdGVtSWQpO1xyXG4gICAgICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NvbW1pdCc6XHJcbiAgICAgICAgICAgICAgICBjb21taXRTdG9jayhpdGVtLnByb2R1Y3RTeXN0ZW1JZCwgYnJhbmNoSWQsIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VuY29tbWl0JzpcclxuICAgICAgICAgICAgICAgIHVuY29tbWl0U3RvY2soaXRlbS5wcm9kdWN0U3lzdGVtSWQsIGJyYW5jaElkLCBpdGVtLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkaXNwYXRjaCc6XHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaFN0b2NrKGl0ZW0ucHJvZHVjdFN5c3RlbUlkLCBicmFuY2hJZCwgaXRlbS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY29tcGxldGUnOlxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVEZWxpdmVyeShpdGVtLnByb2R1Y3RTeXN0ZW1JZCwgYnJhbmNoSWQsIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JldHVybic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm5TdG9ja0Zyb21UcmFuc2l0KGl0ZW0ucHJvZHVjdFN5c3RlbUlkLCBicmFuY2hJZCwgaXRlbS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGl0ZW1zVG9Qcm9jZXNzOyAvLyBSZXR1cm4gxJHhu4MgY8OzIHRo4buDIGTDuW5nIGNobyBzdG9jayBoaXN0b3J5XHJcbn07XHJcblxyXG4vKipcclxuICog4pyFIEhlbHBlciDEkeG7gyBs4bqleSBkYW5oIHPDoWNoIHN0b2NrIGl0ZW1zIHThu6sgbGluZSBpdGVtcyAobeG7nyBy4buZbmcgY29tYm8gdGjDoG5oIFNQIGNvbilcclxuICogRMO5bmcgdHJvbmcgd2ViaG9vayBHSFRLIGhv4bq3YyBjw6FjIHRoYW8gdMOhYyBiYXRjaFxyXG4gKi9cclxuY29uc3QgZ2V0Q29tYm9TdG9ja0l0ZW1zID0gKGxpbmVJdGVtczogeyBwcm9kdWN0U3lzdGVtSWQ6IHN0cmluZzsgcXVhbnRpdHk6IG51bWJlciB9W10pOiB7IHByb2R1Y3RTeXN0ZW1JZDogU3lzdGVtSWQ7IHF1YW50aXR5OiBudW1iZXIgfVtdID0+IHtcclxuICAgIGNvbnN0IHsgZmluZEJ5SWQ6IGZpbmRQcm9kdWN0QnlJZCB9ID0gdXNlUHJvZHVjdFN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICBjb25zdCBzdG9ja0l0ZW1zOiB7IHByb2R1Y3RTeXN0ZW1JZDogU3lzdGVtSWQ7IHF1YW50aXR5OiBudW1iZXIgfVtdID0gW107XHJcbiAgICBcclxuICAgIGxpbmVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBmaW5kUHJvZHVjdEJ5SWQoYXNTeXN0ZW1JZChpdGVtLnByb2R1Y3RTeXN0ZW1JZCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwcm9kdWN0ICYmIGlzQ29tYm9Qcm9kdWN0KHByb2R1Y3QpICYmIHByb2R1Y3QuY29tYm9JdGVtcykge1xyXG4gICAgICAgICAgICAvLyBDb21ibzogbeG7nyBy4buZbmcgdGjDoG5oIFNQIGNvblxyXG4gICAgICAgICAgICBwcm9kdWN0LmNvbWJvSXRlbXMuZm9yRWFjaChjb21ib0l0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgc3RvY2tJdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0U3lzdGVtSWQ6IGFzU3lzdGVtSWQoY29tYm9JdGVtLnByb2R1Y3RTeXN0ZW1JZCksXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHkgKiBjb21ib0l0ZW0ucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gU+G6o24gcGjhuqltIHRoxrDhu51uZ1xyXG4gICAgICAgICAgICBzdG9ja0l0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgcHJvZHVjdFN5c3RlbUlkOiBhc1N5c3RlbUlkKGl0ZW0ucHJvZHVjdFN5c3RlbUlkKSxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHN0b2NrSXRlbXM7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVPcmRlclJlZnVuZFZvdWNoZXIgPSAob3JkZXI6IE9yZGVyLCBhbW91bnQ6IG51bWJlciwgZW1wbG95ZWVJZDogU3lzdGVtSWQpID0+IHtcclxuICAgIGNvbnN0IGxhc3RQb3NpdGl2ZVBheW1lbnQgPSBbLi4uKG9yZGVyLnBheW1lbnRzID8/IFtdKV0ucmV2ZXJzZSgpLmZpbmQocCA9PiBwLmFtb3VudCA+IDApO1xyXG4gICAgY29uc3QgeyBkb2N1bWVudCwgZXJyb3IgfSA9IGNyZWF0ZVBheW1lbnREb2N1bWVudCh7XHJcbiAgICAgICAgYW1vdW50LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgSG/DoG4gdGnhu4FuIGRvIGjhu6d5IMSRxqFuICR7b3JkZXIuaWR9YCxcclxuICAgICAgICByZWNpcGllbnROYW1lOiBvcmRlci5jdXN0b21lck5hbWUsXHJcbiAgICAgICAgcmVjaXBpZW50U3lzdGVtSWQ6IG9yZGVyLmN1c3RvbWVyU3lzdGVtSWQsXHJcbiAgICAgICAgY3VzdG9tZXJTeXN0ZW1JZDogb3JkZXIuY3VzdG9tZXJTeXN0ZW1JZCxcclxuICAgICAgICBjdXN0b21lck5hbWU6IG9yZGVyLmN1c3RvbWVyTmFtZSxcclxuICAgICAgICBicmFuY2hTeXN0ZW1JZDogb3JkZXIuYnJhbmNoU3lzdGVtSWQsXHJcbiAgICAgICAgYnJhbmNoTmFtZTogb3JkZXIuYnJhbmNoTmFtZSxcclxuICAgICAgICBjcmVhdGVkQnk6IGVtcGxveWVlSWQsXHJcbiAgICAgICAgcGF5bWVudE1ldGhvZE5hbWU6IGxhc3RQb3NpdGl2ZVBheW1lbnQ/Lm1ldGhvZCB8fCAnVGnhu4FuIG3hurd0JyxcclxuICAgICAgICBwYXltZW50VHlwZU5hbWU6ICdIb8OgbiB0aeG7gW4ga2jDoWNoIGjDoG5nJyxcclxuICAgICAgICBvcmlnaW5hbERvY3VtZW50SWQ6IG9yZGVyLmlkLFxyXG4gICAgICAgIGxpbmtlZE9yZGVyU3lzdGVtSWQ6IG9yZGVyLnN5c3RlbUlkLFxyXG4gICAgICAgIGFmZmVjdHNEZWJ0OiB0cnVlLFxyXG4gICAgICAgIGNhdGVnb3J5OiAnb3RoZXInLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFkb2N1bWVudCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tjYW5jZWxPcmRlcl0gS2jDtG5nIHRo4buDIHThuqFvIHBoaeG6v3UgY2hpIGhvw6BuIHRp4buBbicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZG9jdW1lbnQ7XHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsRGF0YTogT3JkZXJbXSA9IGluaXRpYWxEYXRhT21pdC5tYXAoKG86IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgcGFja2FnaW5nczogUGFja2FnaW5nW10gPSBbXTtcclxuICAgIFxyXG4gICAgaWYgKG8ucGFja2FnaW5nU3RhdHVzID09PSAnxJDDs25nIGfDs2kgdG/DoG4gYuG7mScgfHwgby5wYWNrYWdpbmdTdGF0dXMgPT09ICdDaOG7nSB4w6FjIG5o4bqtbiDEkcOzbmcgZ8OzaScpIHtcclxuICAgICAgICBjb25zdCBoYXNEZWxpdmVyeVN0YXJ0ZWQgPSBvLmRlbGl2ZXJ5U3RhdHVzICYmIG8uZGVsaXZlcnlTdGF0dXMgIT09ICdDaOG7nSDEkcOzbmcgZ8OzaScgJiYgby5kZWxpdmVyeVN0YXR1cyAhPT0gJ8SQw6MgxJHDs25nIGfDs2knO1xyXG4gICAgICAgIGNvbnN0IHBhY2thZ2luZ0lkID0gYCR7UEFDS0FHSU5HX0NPREVfUFJFRklYfSR7by5pZC5zdWJzdHJpbmcoMil9YDsgLy8gREcwMDAwMDFcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBuZXdQa2c6IFBhY2thZ2luZyA9IHtcclxuICAgICAgICAgICAgc3lzdGVtSWQ6IGFzU3lzdGVtSWQoYFBBQ0tBR0Uke1N0cmluZyhpbmRleCArIDEpLnBhZFN0YXJ0KDYsICcwJyl9YCksIC8vIOKchSBVc2UgcHJvcGVyIGZvcm1hdCBQQUNLQUdFMDAwMDAxXHJcbiAgICAgICAgICAgIGlkOiBhc0J1c2luZXNzSWQocGFja2FnaW5nSWQpLFxyXG4gICAgICAgICAgICByZXF1ZXN0RGF0ZTogby5vcmRlckRhdGUsXHJcbiAgICAgICAgICAgIGNvbmZpcm1EYXRlOiBvLnBhY2thZ2luZ1N0YXR1cyA9PT0gJ8SQw7NuZyBnw7NpIHRvw6BuIGLhu5knID8gby5vcmRlckRhdGUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHJlcXVlc3RpbmdFbXBsb3llZUlkOiBvLnNhbGVzcGVyc29uU3lzdGVtSWQsXHJcbiAgICAgICAgICAgIHJlcXVlc3RpbmdFbXBsb3llZU5hbWU6IG8uc2FsZXNwZXJzb24sXHJcbiAgICAgICAgICAgIGNvbmZpcm1pbmdFbXBsb3llZUlkOiBvLnBhY2thZ2luZ1N0YXR1cyA9PT0gJ8SQw7NuZyBnw7NpIHRvw6BuIGLhu5knID8gby5zYWxlc3BlcnNvblN5c3RlbUlkIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjb25maXJtaW5nRW1wbG95ZWVOYW1lOiBvLnBhY2thZ2luZ1N0YXR1cyA9PT0gJ8SQw7NuZyBnw7NpIHRvw6BuIGLhu5knID8gby5zYWxlc3BlcnNvbiA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgc3RhdHVzOiBvLnBhY2thZ2luZ1N0YXR1cyA9PT0gJ8SQw7NuZyBnw7NpIHRvw6BuIGLhu5knID8gJ8SQw6MgxJHDs25nIGfDs2knIDogJ0No4budIMSRw7NuZyBnw7NpJyxcclxuICAgICAgICAgICAgcHJpbnRTdGF0dXM6IG8ucHJpbnRTdGF0dXMsXHJcbiAgICAgICAgICAgIGRlbGl2ZXJ5TWV0aG9kOiBoYXNEZWxpdmVyeVN0YXJ0ZWQgPyBvLmRlbGl2ZXJ5TWV0aG9kIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBkZWxpdmVyeVN0YXR1czogby5kZWxpdmVyeVN0YXR1cyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoby5pZCA9PT0gJ0RIMDAwMDAxJyAmJiBvLmRlbGl2ZXJ5U3RhdHVzID09PSAnxJDDoyBnaWFvIGjDoG5nJykge1xyXG4gICAgICAgICAgICBuZXdQa2cuY2FycmllciA9ICdHaWFvIEjDoG5nIE5oYW5oJztcclxuICAgICAgICAgICAgbmV3UGtnLnRyYWNraW5nQ29kZSA9ICdHSE4wMDAwMDEnOyAvLyBVc2Ugc2hpcG1lbnQgdHJhY2tpbmcgY29kZSBmcm9tIGNhcnJpZXJcclxuICAgICAgICAgICAgbmV3UGtnLmRlbGl2ZXJlZERhdGUgPSAnMjAyNS0wOS0yMiAxNDowMCc7XHJcbiAgICAgICAgICAgIG5ld1BrZy5kZWxpdmVyeU1ldGhvZCA9ICdE4buLY2ggduG7pSBnaWFvIGjDoG5nJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG8uaWQgPT09ICdESDAwMDAwMycgJiYgby5kZWxpdmVyeVN0YXR1cyA9PT0gJ8SQw6MgZ2lhbyBow6BuZycpIHtcclxuICAgICAgICAgICAgbmV3UGtnLnRyYWNraW5nQ29kZSA9ICdWQzAwMDAwMyc7IC8vIFVzZSBzaGlwbWVudCBidXNpbmVzcyBJRCBmb3IgSU5TVE9SRVxyXG4gICAgICAgICAgICBuZXdQa2cuZGVsaXZlcmVkRGF0ZSA9ICcyMDI1LTA4LTAxIDExOjAwJztcclxuICAgICAgICAgICAgbmV3UGtnLmRlbGl2ZXJ5TWV0aG9kID0gJ05o4bqtbiB04bqhaSBj4butYSBow6BuZyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYWNrYWdpbmdzLnB1c2gobmV3UGtnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgeyBwYWNrYWdpbmdTdGF0dXMsIHByb2R1Y3RzLCAuLi5yZXN0IH0gPSBvO1xyXG5cclxuICAgIC8vIFRyYW5zZm9ybSBwcm9kdWN0cyBhcnJheSB0byBsaW5lSXRlbXNcclxuICAgIGNvbnN0IGxpbmVJdGVtcyA9IChwcm9kdWN0cyB8fCBbXSkubWFwKChwOiBhbnksIGlkeDogbnVtYmVyKSA9PiAoe1xyXG4gICAgICAgIHN5c3RlbUlkOiBgTElORV8ke28uaWR9XyR7aWR4ICsgMX1gLFxyXG4gICAgICAgIHByb2R1Y3RTeXN0ZW1JZDogcC5wcm9kdWN0U3lzdGVtSWQgfHwgYFBST0RfJHtpZHh9YCxcclxuICAgICAgICBwcm9kdWN0SWQ6IHAucHJvZHVjdElkIHx8IGBQUk9EXyR7aWR4fWAsXHJcbiAgICAgICAgcHJvZHVjdE5hbWU6IHAucHJvZHVjdE5hbWUgfHwgJycsXHJcbiAgICAgICAgcXVhbnRpdHk6IHAucXVhbnRpdHkgfHwgMCxcclxuICAgICAgICB1bml0UHJpY2U6IHAucHJpY2UgfHwgMCxcclxuICAgICAgICBkaXNjb3VudDogMCxcclxuICAgICAgICBkaXNjb3VudFR5cGU6ICdmaXhlZCcgYXMgY29uc3QsXHJcbiAgICAgICAgdG90YWw6IHAudG90YWwgfHwgMFxyXG4gICAgfSkpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4ucmVzdCxcclxuICAgICAgICBzeXN0ZW1JZDogYE9SRCR7U3RyaW5nKGluZGV4ICsgMSkucGFkU3RhcnQoOCwgJzAnKX1gLFxyXG4gICAgICAgIGN1c3RvbWVyU3lzdGVtSWQ6IGBDVVNUXyR7aW5kZXggKyAxfWAsIC8vIEdlbmVyYXRlIHRlbXAgY3VzdG9tZXIgc3lzdGVtSWRcclxuICAgICAgICBwYWlkQW1vdW50OiBvLnBhaWRBbW91bnQgPz8gMCwgLy8g4pyFIFVzZSB2YWx1ZSBmcm9tIGRhdGEudHMsIGRlZmF1bHQgdG8gMCBpZiB1bmRlZmluZWRcclxuICAgICAgICBwYWNrYWdpbmdzLFxyXG4gICAgICAgIGxpbmVJdGVtcyxcclxuICAgIH07XHJcbn0pO1xyXG5cclxuY29uc3QgYmFzZVN0b3JlID0gY3JlYXRlQ3J1ZFN0b3JlPE9yZGVyPihpbml0aWFsRGF0YSwgJ29yZGVycycsIHtcclxuICBidXNpbmVzc0lkRmllbGQ6ICdpZCcsXHJcbiAgYXBpRW5kcG9pbnQ6ICcvYXBpL29yZGVycycsXHJcbiAgZ2V0Q3VycmVudFVzZXI6ICgpID0+IHtcclxuICAgIHJldHVybiBhc1N5c3RlbUlkKGdldEN1cnJlbnRVc2VyU3lzdGVtSWQoKSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIOKchSBBUEkgU3luYyBoZWxwZXJzXHJcbmNvbnN0IEFQSV9FTkRQT0lOVCA9ICcvYXBpL29yZGVycyc7XHJcblxyXG5jb25zdCBzeW5jVG9BcGkgPSB7XHJcbiAgY3JlYXRlOiBhc3luYyAob3JkZXI6IE9yZGVyKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKEFQSV9FTkRQT0lOVCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXHJcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3JkZXIpLFxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKCFyZXNwb25zZS5vaykgY29uc29sZS53YXJuKCdbT3JkZXIgQVBJXSBDcmVhdGUgc3luYyBmYWlsZWQnKTtcclxuICAgICAgZWxzZSBjb25zb2xlLmxvZygnW09yZGVyIEFQSV0gQ3JlYXRlZDonLCBvcmRlci5zeXN0ZW1JZCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW09yZGVyIEFQSV0gQ3JlYXRlIHN5bmMgZXJyb3I6JywgZSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICB1cGRhdGU6IGFzeW5jIChzeXN0ZW1JZDogU3lzdGVtSWQsIHVwZGF0ZXM6IFBhcnRpYWw8T3JkZXI+KSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9FTkRQT0lOVH0vJHtzeXN0ZW1JZH1gLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXHJcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlcyksXHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSBjb25zb2xlLndhcm4oJ1tPcmRlciBBUEldIFVwZGF0ZSBzeW5jIGZhaWxlZCcpO1xyXG4gICAgICBlbHNlIGNvbnNvbGUubG9nKCdbT3JkZXIgQVBJXSBVcGRhdGVkOicsIHN5c3RlbUlkKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdbT3JkZXIgQVBJXSBVcGRhdGUgc3luYyBlcnJvcjonLCBlKTtcclxuICAgIH1cclxuICB9LFxyXG4gIGRlbGV0ZTogYXN5bmMgKHN5c3RlbUlkOiBTeXN0ZW1JZCwgaGFyZCA9IGZhbHNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9FTkRQT0lOVH0vJHtzeXN0ZW1JZH1gLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaGFyZCB9KSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIGNvbnNvbGUud2FybignW09yZGVyIEFQSV0gRGVsZXRlIHN5bmMgZmFpbGVkJyk7XHJcbiAgICAgIGVsc2UgY29uc29sZS5sb2coJ1tPcmRlciBBUEldIERlbGV0ZWQ6Jywgc3lzdGVtSWQpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tPcmRlciBBUEldIERlbGV0ZSBzeW5jIGVycm9yOicsIGUpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcmVzdG9yZTogYXN5bmMgKHN5c3RlbUlkOiBTeXN0ZW1JZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfRU5EUE9JTlR9LyR7c3lzdGVtSWR9L3Jlc3RvcmVgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcclxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIGNvbnNvbGUud2FybignW09yZGVyIEFQSV0gUmVzdG9yZSBzeW5jIGZhaWxlZCcpO1xyXG4gICAgICBlbHNlIGNvbnNvbGUubG9nKCdbT3JkZXIgQVBJXSBSZXN0b3JlZDonLCBzeXN0ZW1JZCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW09yZGVyIEFQSV0gUmVzdG9yZSBzeW5jIGVycm9yOicsIGUpO1xyXG4gICAgfVxyXG4gIH0sXHJcbn07XHJcblxyXG4vLyDinIUgV3JhcCBiYXNlIHN0b3JlIG1ldGhvZHMgd2l0aCBBUEkgc3luY1xyXG5jb25zdCBvcmlnaW5hbEFkZCA9IGJhc2VTdG9yZS5nZXRTdGF0ZSgpLmFkZDtcclxuY29uc3Qgb3JpZ2luYWxVcGRhdGUgPSBiYXNlU3RvcmUuZ2V0U3RhdGUoKS51cGRhdGU7XHJcbmNvbnN0IG9yaWdpbmFsUmVtb3ZlID0gYmFzZVN0b3JlLmdldFN0YXRlKCkucmVtb3ZlO1xyXG5jb25zdCBvcmlnaW5hbEhhcmREZWxldGUgPSBiYXNlU3RvcmUuZ2V0U3RhdGUoKS5oYXJkRGVsZXRlO1xyXG5jb25zdCBvcmlnaW5hbFJlc3RvcmUgPSBiYXNlU3RvcmUuZ2V0U3RhdGUoKS5yZXN0b3JlO1xyXG5cclxuYmFzZVN0b3JlLnNldFN0YXRlKHtcclxuICBhZGQ6IChpdGVtOiBPbWl0PE9yZGVyLCAnc3lzdGVtSWQnPikgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxBZGQoaXRlbSk7XHJcbiAgICBzeW5jVG9BcGkuY3JlYXRlKHJlc3VsdCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0sXHJcbiAgdXBkYXRlOiAoc3lzdGVtSWQ6IFN5c3RlbUlkLCB1cGRhdGVzOiBQYXJ0aWFsPE9yZGVyPikgPT4ge1xyXG4gICAgb3JpZ2luYWxVcGRhdGUoc3lzdGVtSWQsIHVwZGF0ZXMpO1xyXG4gICAgc3luY1RvQXBpLnVwZGF0ZShzeXN0ZW1JZCwgdXBkYXRlcyk7XHJcbiAgfSxcclxuICByZW1vdmU6IChzeXN0ZW1JZDogU3lzdGVtSWQpID0+IHtcclxuICAgIG9yaWdpbmFsUmVtb3ZlKHN5c3RlbUlkKTtcclxuICAgIHN5bmNUb0FwaS5kZWxldGUoc3lzdGVtSWQsIGZhbHNlKTtcclxuICB9LFxyXG4gIGhhcmREZWxldGU6IChzeXN0ZW1JZDogU3lzdGVtSWQpID0+IHtcclxuICAgIG9yaWdpbmFsSGFyZERlbGV0ZShzeXN0ZW1JZCk7XHJcbiAgICBzeW5jVG9BcGkuZGVsZXRlKHN5c3RlbUlkLCB0cnVlKTtcclxuICB9LFxyXG4gIHJlc3RvcmU6IChzeXN0ZW1JZDogU3lzdGVtSWQpID0+IHtcclxuICAgIG9yaWdpbmFsUmVzdG9yZShzeXN0ZW1JZCk7XHJcbiAgICBzeW5jVG9BcGkucmVzdG9yZShzeXN0ZW1JZCk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyDinIUgTUlHUkFUSU9OOiBFbnN1cmUgYWxsIG9yZGVycyBoYXZlIHBhaWRBbW91bnQgZmllbGQgKGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXHJcbmJhc2VTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gIGRhdGE6IHN0YXRlLmRhdGEubWFwKG9yZGVyID0+ICh7XHJcbiAgICAuLi5vcmRlcixcclxuICAgIHBhaWRBbW91bnQ6IG9yZGVyLnBhaWRBbW91bnQgPz8gMCwgLy8gRGVmYXVsdCB0byAwIGlmIHVuZGVmaW5lZFxyXG4gIH0pKVxyXG59KSk7XHJcblxyXG4vLyDinIUgTUlHUkFUSU9OOiBNZXJnZSBzZWVkIGRhdGEgLSBhZGQgbmV3IG9yZGVycyBmcm9tIGluaXRpYWxEYXRhIGlmIG5vdCBleGlzdCBpbiBwZXJzaXN0ZWQgc3RvcmVcclxuYmFzZVN0b3JlLnNldFN0YXRlKHN0YXRlID0+IHtcclxuICBjb25zdCBleGlzdGluZ0lkcyA9IG5ldyBTZXQoc3RhdGUuZGF0YS5tYXAobyA9PiBvLnN5c3RlbUlkKSk7XHJcbiAgY29uc3QgbmV3T3JkZXJzID0gaW5pdGlhbERhdGEuZmlsdGVyKG8gPT4gIWV4aXN0aW5nSWRzLmhhcyhvLnN5c3RlbUlkKSk7XHJcbiAgaWYgKG5ld09yZGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICByZXR1cm4geyBkYXRhOiBbLi4uc3RhdGUuZGF0YSwgLi4ubmV3T3JkZXJzXSB9O1xyXG4gIH1cclxuICByZXR1cm4gc3RhdGU7XHJcbn0pO1xyXG5cclxuLy8g4pyFIE1JR1JBVElPTjogRml4IG9yZGVyIHN0YXR1cyAtIG9yZGVycyB3aXRoIGZ1bGwgcGF5bWVudCBhbmQgZGVsaXZlcnkgc2hvdWxkIGJlIFwiSG/DoG4gdGjDoG5oXCJcclxuYmFzZVN0b3JlLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgZGF0YTogc3RhdGUuZGF0YS5tYXAob3JkZXIgPT4ge1xyXG4gICAgLy8gSWYgb3JkZXIgaXMgYWxyZWFkeSBjb21wbGV0ZWQgb3IgY2FuY2VsbGVkLCBza2lwXHJcbiAgICBpZiAob3JkZXIuc3RhdHVzID09PSAnSG/DoG4gdGjDoG5oJyB8fCBvcmRlci5zdGF0dXMgPT09ICfEkMOjIGjhu6d5Jykge1xyXG4gICAgICByZXR1cm4gb3JkZXI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIGFsbCBhY3RpdmUgcGFja2FnaW5ncyBhcmUgZGVsaXZlcmVkXHJcbiAgICBjb25zdCBhY3RpdmVQYWNrYWdpbmdzID0gb3JkZXIucGFja2FnaW5ncy5maWx0ZXIocCA9PiBwLnN0YXR1cyAhPT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICBjb25zdCBpc0FsbERlbGl2ZXJlZCA9IGFjdGl2ZVBhY2thZ2luZ3MubGVuZ3RoID4gMCAmJiBhY3RpdmVQYWNrYWdpbmdzLmV2ZXJ5KHAgPT4gcC5kZWxpdmVyeVN0YXR1cyA9PT0gJ8SQw6MgZ2lhbyBow6BuZycpO1xyXG4gICAgXHJcbiAgICAvLyBJZiBmdWxseSBwYWlkIGFuZCBmdWxseSBkZWxpdmVyZWQsIHVwZGF0ZSBzdGF0dXMgdG8gXCJIb8OgbiB0aMOgbmhcIlxyXG4gICAgaWYgKG9yZGVyLnBheW1lbnRTdGF0dXMgPT09ICdUaGFuaCB0b8OhbiB0b8OgbiBi4buZJyAmJiAoaXNBbGxEZWxpdmVyZWQgfHwgb3JkZXIuZGVsaXZlcnlTdGF0dXMgPT09ICfEkMOjIGdpYW8gaMOgbmcnKSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLm9yZGVyLFxyXG4gICAgICAgIHN0YXR1czogJ0hvw6BuIHRow6BuaCcgYXMgT3JkZXJNYWluU3RhdHVzLFxyXG4gICAgICAgIGNvbXBsZXRlZERhdGU6IG9yZGVyLmNvbXBsZXRlZERhdGUgfHwgdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG9yZGVyO1xyXG4gIH0pXHJcbn0pKTtcclxuXHJcbmNvbnN0IG9yaWdpbmFsQWRkV2l0aFN0b2NrID0gYmFzZVN0b3JlLmdldFN0YXRlKCkuYWRkO1xyXG5cclxuYmFzZVN0b3JlLnNldFN0YXRlKHtcclxuICAgIGFkZDogKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCB7IGNvbW1pdFN0b2NrLCBmaW5kQnlJZDogZmluZFByb2R1Y3RCeUlkIH0gPSB1c2VQcm9kdWN0U3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICBjb25zdCB1c2VySW5mbyA9IGdldEN1cnJlbnRVc2VySW5mbygpO1xyXG4gICAgICAgIGNvbnN0IG5ld0l0ZW0gPSBvcmlnaW5hbEFkZFdpdGhTdG9jayhpdGVtKTtcclxuICAgICAgICBpZiAobmV3SXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCBoeWRyYXRlZFBhY2thZ2luZ3MgPSBlbnN1cmVPcmRlclBhY2thZ2luZ0lkZW50aWZpZXJzKG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICBpZiAoaHlkcmF0ZWRQYWNrYWdpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG5ld0l0ZW0sIGh5ZHJhdGVkUGFja2FnaW5ncyk7XHJcbiAgICAgICAgICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBzdGF0ZS5kYXRhLm1hcChvcmRlciA9PiBvcmRlci5zeXN0ZW1JZCA9PT0gaHlkcmF0ZWRQYWNrYWdpbmdzLnN5c3RlbUlkID8gaHlkcmF0ZWRQYWNrYWdpbmdzIDogb3JkZXIpLFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld0l0ZW0ubGluZUl0ZW1zLmZvckVhY2gobGkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IGZpbmRQcm9kdWN0QnlJZChhc1N5c3RlbUlkKGxpLnByb2R1Y3RTeXN0ZW1JZCkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDinIUgWOG7rSBsw70gY29tYm86IGNvbW1pdCBzdG9jayBj4bunYSBTUCBjb24gdGhheSB2w6wgY29tYm9cclxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0ICYmIGlzQ29tYm9Qcm9kdWN0KHByb2R1Y3QpICYmIHByb2R1Y3QuY29tYm9JdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3QuY29tYm9JdGVtcy5mb3JFYWNoKGNvbWJvSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbW1pdCBzdG9jayA9IHPhu5EgbMaw4bujbmcgY29tYm8gw5cgc+G7kSBsxrDhu6NuZyBTUCBjb24gdHJvbmcgY29tYm9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWxRdWFudGl0eSA9IGxpLnF1YW50aXR5ICogY29tYm9JdGVtLnF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21taXRTdG9jayhhc1N5c3RlbUlkKGNvbWJvSXRlbS5wcm9kdWN0U3lzdGVtSWQpLCBhc1N5c3RlbUlkKG5ld0l0ZW0uYnJhbmNoU3lzdGVtSWQpLCB0b3RhbFF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU+G6o24gcGjhuqltIHRoxrDhu51uZzogY29tbWl0IHN0b2NrIG5oxrAgYsOsbmggdGjGsOG7nW5nXHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWl0U3RvY2soYXNTeXN0ZW1JZChsaS5wcm9kdWN0U3lzdGVtSWQpLCBhc1N5c3RlbUlkKG5ld0l0ZW0uYnJhbmNoU3lzdGVtSWQpLCBsaS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g4pyFIEPhuq1wIG5o4bqtdCBsYXN0UHVyY2hhc2VEYXRlIGtoaSB04bqhbyDEkcahbiBt4bubaSAoxJHhu4MgU0xBL2NodXJuIHJpc2sgaG/huqF0IMSR4buZbmcgxJHDum5nKVxyXG4gICAgICAgICAgICBpZiAobmV3SXRlbS5jdXN0b21lclN5c3RlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHVwZGF0ZTogdXBkYXRlQ3VzdG9tZXIsIGZpbmRCeUlkOiBmaW5kQ3VzdG9tZXIgfSA9IHVzZUN1c3RvbWVyU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gZmluZEN1c3RvbWVyKG5ld0l0ZW0uY3VzdG9tZXJTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDdXN0b21lcihuZXdJdGVtLmN1c3RvbWVyU3lzdGVtSWQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFB1cmNoYXNlRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOKchSBBZGQgYWN0aXZpdHkgaGlzdG9yeSBlbnRyeVxyXG4gICAgICAgICAgICBjb25zdCBoaXN0b3J5RW50cnkgPSBjcmVhdGVDcmVhdGVkRW50cnkoXHJcbiAgICAgICAgICAgICAgICB1c2VySW5mbyxcclxuICAgICAgICAgICAgICAgIGAke3VzZXJJbmZvLm5hbWV9IMSRw6MgdOG6oW8gxJHGoW4gaMOgbmcgJHtuZXdJdGVtLmlkfSBjaG8ga2jDoWNoIGjDoG5nICR7bmV3SXRlbS5jdXN0b21lck5hbWV9IChU4buVbmc6ICR7bmV3SXRlbS5ncmFuZFRvdGFsLnRvTG9jYWxlU3RyaW5nKCd2aS1WTicpfcSRKWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgYmFzZVN0b3JlLnNldFN0YXRlKHN0YXRlID0+ICh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiBzdGF0ZS5kYXRhLm1hcChvcmRlciA9PiBvcmRlci5zeXN0ZW1JZCA9PT0gbmV3SXRlbS5zeXN0ZW1JZCA/IHsgLi4ub3JkZXIsIGFjdGl2aXR5SGlzdG9yeTogW2hpc3RvcnlFbnRyeV0gfSA6IG9yZGVyKSxcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3SXRlbTtcclxuICAgIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYmFja2ZpbGxQYWNrYWdpbmdJZGVudGlmaWVycyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IGJhc2VTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcclxuICAgIGNvbnN0IHVwZGF0ZWREYXRhID0gY3VycmVudFN0YXRlLmRhdGEubWFwKG9yZGVyID0+IHtcclxuICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBlbnN1cmVPcmRlclBhY2thZ2luZ0lkZW50aWZpZXJzKG9yZGVyKTtcclxuICAgICAgICBpZiAodXBkYXRlZE9yZGVyKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlZE9yZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3JkZXI7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgIGJhc2VTdG9yZS5zZXRTdGF0ZSh7IGRhdGE6IHVwZGF0ZWREYXRhIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuYmFja2ZpbGxQYWNrYWdpbmdJZGVudGlmaWVycygpO1xyXG5cclxuY29uc3QgYXVnbWVudGVkTWV0aG9kcyA9IHtcclxuICAgIGNhbmNlbE9yZGVyOiAoXHJcbiAgICAgICAgc3lzdGVtSWQ6IFN5c3RlbUlkLFxyXG4gICAgICAgIGVtcGxveWVlSWQ6IFN5c3RlbUlkLFxyXG4gICAgICAgIG9wdGlvbnM/OiB7IHJlYXNvbj86IHN0cmluZzsgcmVzdG9jaz86IGJvb2xlYW4gfVxyXG4gICAgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyByZWFzb24sIHJlc3RvY2sgPSB0cnVlIH0gPSBvcHRpb25zID8/IHt9O1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRPcmRlciA9IGJhc2VTdG9yZS5nZXRTdGF0ZSgpLmRhdGEuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IHN5c3RlbUlkKTtcclxuICAgICAgICBpZiAoIWVuc3VyZUNhbmNlbGxhdGlvbkFsbG93ZWQoY3VycmVudE9yZGVyLCAnaOG7p3kgxJHGoW4gaMOgbmcnKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcmRlclRvQ2FuY2VsID0gc3RhdGUuZGF0YS5maW5kKG8gPT4gby5zeXN0ZW1JZCA9PT0gc3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAoIW9yZGVyVG9DYW5jZWwgfHwgb3JkZXJUb0NhbmNlbC5zdGF0dXMgPT09ICfEkMOjIGjhu6d5Jykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbXBsb3llZSA9IHVzZUVtcGxveWVlU3RvcmUuZ2V0U3RhdGUoKS5maW5kQnlJZChlbXBsb3llZUlkIGFzIFN5c3RlbUlkKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgY2FuY2VsbGF0aW9uUmVhc29uID0gKHJlYXNvbiAmJiByZWFzb24udHJpbSgpLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICA/IHJlYXNvbi50cmltKClcclxuICAgICAgICAgICAgICAgIDogb3JkZXJUb0NhbmNlbC5jYW5jZWxsYXRpb25SZWFzb24gfHwgYEjhu6d5IGLhu59pICR7ZW1wbG95ZWU/LmZ1bGxOYW1lIHx8ICdI4buHIHRo4buRbmcnfWA7XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgVW5jb21taXQgc3RvY2sgKGjhu5cgdHLhu6MgY29tYm8pXHJcbiAgICAgICAgICAgIGlmIChyZXN0b2NrKSB7XHJcbiAgICAgICAgICAgICAgICBvcmRlclRvQ2FuY2VsLmxpbmVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NMaW5lSXRlbVN0b2NrKGl0ZW0sIG9yZGVyVG9DYW5jZWwuYnJhbmNoU3lzdGVtSWQsICd1bmNvbW1pdCcsIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0Rpc3BhdGNoZWRTdG9jayA9IG9yZGVyVG9DYW5jZWwuc3RvY2tPdXRTdGF0dXMgPT09ICdYdeG6pXQga2hvIHRvw6BuIGLhu5knXHJcbiAgICAgICAgICAgICAgICB8fCBbJ0No4budIGzhuqV5IGjDoG5nJywgJ8SQYW5nIGdpYW8gaMOgbmcnLCAnxJDDoyBnaWFvIGjDoG5nJywgJ0No4budIGdpYW8gbOG6oWknXS5pbmNsdWRlcyhvcmRlclRvQ2FuY2VsLmRlbGl2ZXJ5U3RhdHVzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOKchSBSZXR1cm4gc3RvY2sgZnJvbSB0cmFuc2l0ICho4buXIHRy4bujIGNvbWJvKVxyXG4gICAgICAgICAgICBpZiAocmVzdG9jayAmJiBoYXNEaXNwYXRjaGVkU3RvY2spIHtcclxuICAgICAgICAgICAgICAgIG9yZGVyVG9DYW5jZWwubGluZUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0xpbmVJdGVtU3RvY2soaXRlbSwgb3JkZXJUb0NhbmNlbC5icmFuY2hTeXN0ZW1JZCwgJ3JldHVybicsIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUGF5bWVudHMgPSBvcmRlclRvQ2FuY2VsLnBheW1lbnRzID8/IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBuZXRDb2xsZWN0ZWQgPSBleGlzdGluZ1BheW1lbnRzLnJlZHVjZSgoc3VtLCBwYXltZW50KSA9PiBzdW0gKyBwYXltZW50LmFtb3VudCwgMCk7XHJcbiAgICAgICAgICAgIGxldCByZWZ1bmRQYXltZW50RW50cnk6IE9yZGVyUGF5bWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCByZWZ1bmRBbW91bnQgPSBuZXRDb2xsZWN0ZWQgPiAwID8gbmV0Q29sbGVjdGVkIDogMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWZ1bmRBbW91bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWZ1bmRWb3VjaGVyID0gY3JlYXRlT3JkZXJSZWZ1bmRWb3VjaGVyKG9yZGVyVG9DYW5jZWwsIHJlZnVuZEFtb3VudCwgZW1wbG95ZWVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlZnVuZFZvdWNoZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgnS2jDtG5nIHRo4buDIHThuqFvIHBoaeG6v3UgY2hpIGhvw6BuIHRp4buBbi4gVnVpIGzDsm5nIGtp4buDbSB0cmEgY+G6pXUgaMOsbmggdMOgaSBjaMOtbmggdHLGsOG7m2Mga2hpIGjhu6d5IMSRxqFuLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZWZ1bmRQYXltZW50RW50cnkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtSWQ6IHJlZnVuZFZvdWNoZXIuc3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlZnVuZFZvdWNoZXIuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogcmVmdW5kVm91Y2hlci5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogLXJlZnVuZEFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHJlZnVuZFZvdWNoZXIucGF5bWVudE1ldGhvZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBlbXBsb3llZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgSG/DoG4gdGnhu4FuIGtoaSBo4buneSDEkcahbiAke29yZGVyVG9DYW5jZWwuaWR9YCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQYXltZW50cyA9IHJlZnVuZFBheW1lbnRFbnRyeSA/IFsuLi5leGlzdGluZ1BheW1lbnRzLCByZWZ1bmRQYXltZW50RW50cnldIDogZXhpc3RpbmdQYXltZW50cztcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhaWRBbW91bnQgPSBNYXRoLm1heCgwLCAob3JkZXJUb0NhbmNlbC5wYWlkQW1vdW50ID8/IDApIC0gcmVmdW5kQW1vdW50KTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlclRvQ2FuY2VsLnBhY2thZ2luZ3MubWFwKHBrZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGtnLnN0YXR1cyA9PT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyAmJiBwa2cuZGVsaXZlcnlTdGF0dXMgPT09ICfEkMOjIGjhu6d5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwa2c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnBrZyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdI4buneSDEkcOzbmcgZ8OzaScgYXMgUGFja2FnaW5nU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiAnxJDDoyBo4buneScgYXMgT3JkZXJEZWxpdmVyeVN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxEYXRlOiBub3csXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVhc29uOiBwa2cuY2FuY2VsUmVhc29uID8/IGNhbmNlbGxhdGlvblJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxpbmdFbXBsb3llZUlkOiBlbXBsb3llZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGluZ0VtcGxveWVlTmFtZTogZW1wbG95ZWU/LmZ1bGxOYW1lIHx8ICdI4buHIHRo4buRbmcnLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5vcmRlclRvQ2FuY2VsLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnxJDDoyBo4buneScgYXMgT3JkZXJNYWluU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgY2FuY2VsbGVkRGF0ZTogbm93LFxyXG4gICAgICAgICAgICAgICAgY2FuY2VsbGF0aW9uUmVhc29uLFxyXG4gICAgICAgICAgICAgICAgZGVsaXZlcnlTdGF0dXM6ICfEkMOjIGjhu6d5JyBhcyBPcmRlckRlbGl2ZXJ5U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgc3RvY2tPdXRTdGF0dXM6IHJlc3RvY2sgPyAnQ2jGsGEgeHXhuqV0IGtobycgYXMgY29uc3QgOiBvcmRlclRvQ2FuY2VsLnN0b2NrT3V0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudHM6IHVwZGF0ZWRQYXltZW50cyxcclxuICAgICAgICAgICAgICAgIHBhaWRBbW91bnQ6IHVwZGF0ZWRQYWlkQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgcGF5bWVudFN0YXR1czogcmVmdW5kUGF5bWVudEVudHJ5ID8gJ0NoxrBhIHRoYW5oIHRvw6FuJyBhcyBPcmRlclBheW1lbnRTdGF0dXMgOiBvcmRlclRvQ2FuY2VsLnBheW1lbnRTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBwYWNrYWdpbmdzOiB1cGRhdGVkUGFja2FnaW5ncyxcclxuICAgICAgICAgICAgICAgIGNhbmNlbGxhdGlvbk1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdG9ja0l0ZW1zOiByZXN0b2NrLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmeUN1c3RvbWVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbE5vdGlmaWVkQXQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhY3Rpdml0eUhpc3Rvcnk6IGFwcGVuZEhpc3RvcnlFbnRyeShcclxuICAgICAgICAgICAgICAgICAgICBvcmRlclRvQ2FuY2VsLmFjdGl2aXR5SGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVIaXN0b3J5RW50cnkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjYW5jZWxsZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRDdXJyZW50VXNlckluZm8oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZW1wbG95ZWU/LmZ1bGxOYW1lIHx8ICdI4buHIHRo4buRbmcnfSDEkcOjIGjhu6d5IMSRxqFuIGjDoG5nLiBMw70gZG86ICR7Y2FuY2VsbGF0aW9uUmVhc29ufSR7cmVmdW5kQW1vdW50ID4gMCA/IGAuIEhvw6BuIHRp4buBbjogJHtyZWZ1bmRBbW91bnQudG9Mb2NhbGVTdHJpbmcoJ3ZpLVZOJyl9xJFgIDogJyd9YFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgUmVtb3ZlIGRlYnQgdHJhbnNhY3Rpb24gZnJvbSBjdXN0b21lclxyXG4gICAgICAgICAgICB1c2VDdXN0b21lclN0b3JlLmdldFN0YXRlKCkucmVtb3ZlRGVidFRyYW5zYWN0aW9uKG9yZGVyVG9DYW5jZWwuY3VzdG9tZXJTeXN0ZW1JZCwgb3JkZXJUb0NhbmNlbC5pZCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBzdGF0ZS5kYXRhLm1hcChvID0+IChvLnN5c3RlbUlkID09PSBzeXN0ZW1JZCA/IHVwZGF0ZWRPcmRlciA6IG8pKSB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRQYXltZW50OiAob3JkZXJTeXN0ZW1JZDogU3lzdGVtSWQsIHBheW1lbnREYXRhOiB7IGFtb3VudDogbnVtYmVyOyBtZXRob2Q6IHN0cmluZyB9LCBlbXBsb3llZUlkOiBTeXN0ZW1JZCkgPT4ge1xyXG4gICAgICAgIC8vIC0tLSBTaWRlIGVmZmVjdHMgbXVzdCBoYXBwZW4gb3V0c2lkZSBzZXRTdGF0ZSAtLS1cclxuICAgICAgICBjb25zdCBvcmRlciA9IGJhc2VTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKG9yZGVyU3lzdGVtSWQgYXMgU3lzdGVtSWQpO1xyXG4gICAgICAgIGNvbnN0IGVtcGxveWVlID0gdXNlRW1wbG95ZWVTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKGVtcGxveWVlSWQgYXMgU3lzdGVtSWQpO1xyXG5cclxuICAgICAgICBpZiAoIW9yZGVyIHx8ICFlbXBsb3llZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3JkZXIgb3IgZW1wbG95ZWUgbm90IGZvdW5kIGZvciBwYXltZW50LlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeyBkb2N1bWVudDogY3JlYXRlZFJlY2VpcHQsIGVycm9yIH0gPSBjcmVhdGVSZWNlaXB0RG9jdW1lbnQoe1xyXG4gICAgICAgICAgICBhbW91bnQ6IHBheW1lbnREYXRhLmFtb3VudCxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGBUaGFuaCB0b8OhbiBjaG8gxJHGoW4gaMOgbmcgJHtvcmRlci5pZH1gLFxyXG4gICAgICAgICAgICBjdXN0b21lck5hbWU6IG9yZGVyLmN1c3RvbWVyTmFtZSxcclxuICAgICAgICAgICAgY3VzdG9tZXJTeXN0ZW1JZDogb3JkZXIuY3VzdG9tZXJTeXN0ZW1JZCxcclxuICAgICAgICAgICAgYnJhbmNoU3lzdGVtSWQ6IG9yZGVyLmJyYW5jaFN5c3RlbUlkLFxyXG4gICAgICAgICAgICBicmFuY2hOYW1lOiBvcmRlci5icmFuY2hOYW1lLFxyXG4gICAgICAgICAgICBjcmVhdGVkQnk6IGVtcGxveWVlSWQsXHJcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2ROYW1lOiBwYXltZW50RGF0YS5tZXRob2QsXHJcbiAgICAgICAgICAgIHJlY2VpcHRUeXBlTmFtZTogJ1RoYW5oIHRvw6FuIGNobyDEkcahbiBow6BuZycsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRG9jdW1lbnRJZDogb3JkZXIuaWQsXHJcbiAgICAgICAgICAgIGxpbmtlZE9yZGVyU3lzdGVtSWQ6IG9yZGVyLnN5c3RlbUlkLFxyXG4gICAgICAgICAgICBhZmZlY3RzRGVidDogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFjcmVhdGVkUmVjZWlwdCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHJlY2VpcHQnLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdLaMO0bmcgdGjhu4MgdOG6oW8gcGhp4bq/dSB0aHUgY2hvIMSRxqFuIGjDoG5nLiBWdWkgbMOybmcga2nhu4NtIHRyYSBj4bqldSBow6xuaCBjaOG7qW5nIHThu6suJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIDIuIE5vdywgdXBkYXRlIHRoZSBvcmRlciBzdGF0ZSB3aXRoIHRoZSBjcmVhdGVkIHJlY2VpcHQgaW5mb1xyXG4gICAgICAgIGJhc2VTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySW5kZXggPSBzdGF0ZS5kYXRhLmZpbmRJbmRleChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAob3JkZXJJbmRleCA9PT0gLTEpIHJldHVybiBzdGF0ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyVG9VcGRhdGUgPSBzdGF0ZS5kYXRhW29yZGVySW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdQYXltZW50OiBPcmRlclBheW1lbnQgPSB7XHJcbiAgICAgICAgICAgICAgICBzeXN0ZW1JZDogY3JlYXRlZFJlY2VpcHQuc3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICBpZDogY3JlYXRlZFJlY2VpcHQuaWQsXHJcbiAgICAgICAgICAgICAgICBkYXRlOiBjcmVhdGVkUmVjZWlwdC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgYW1vdW50OiBjcmVhdGVkUmVjZWlwdC5hbW91bnQsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IGNyZWF0ZWRSZWNlaXB0LnBheW1lbnRNZXRob2ROYW1lLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBhc1N5c3RlbUlkKGNyZWF0ZWRSZWNlaXB0LmNyZWF0ZWRCeSksXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogY3JlYXRlZFJlY2VpcHQuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhcHBseVBheW1lbnRUb09yZGVyKG9yZGVyVG9VcGRhdGUsIG5ld1BheW1lbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g4pyFIEFkZCBhY3Rpdml0eSBoaXN0b3J5IGVudHJ5XHJcbiAgICAgICAgICAgIHVwZGF0ZWRPcmRlci5hY3Rpdml0eUhpc3RvcnkgPSBhcHBlbmRIaXN0b3J5RW50cnkoXHJcbiAgICAgICAgICAgICAgICBvcmRlclRvVXBkYXRlLmFjdGl2aXR5SGlzdG9yeSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUhpc3RvcnlFbnRyeShcclxuICAgICAgICAgICAgICAgICAgICAncGF5bWVudF9tYWRlJyxcclxuICAgICAgICAgICAgICAgICAgICBnZXRDdXJyZW50VXNlckluZm8oKSxcclxuICAgICAgICAgICAgICAgICAgICBgJHtlbXBsb3llZT8uZnVsbE5hbWUgfHwgJ05ow6JuIHZpw6puJ30gxJHDoyB0aGFuaCB0b8OhbiAke3BheW1lbnREYXRhLmFtb3VudC50b0xvY2FsZVN0cmluZygndmktVk4nKX3EkSBi4bqxbmcgJHtwYXltZW50RGF0YS5tZXRob2R9YFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbmV3RGF0YSA9IFsuLi5zdGF0ZS5kYXRhXTtcclxuICAgICAgICAgICAgbmV3RGF0YVtvcmRlckluZGV4XSA9IHVwZGF0ZWRPcmRlcjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IG5ld0RhdGEgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVxdWVzdFBhY2thZ2luZzogKG9yZGVyU3lzdGVtSWQ6IFN5c3RlbUlkLCBlbXBsb3llZUlkOiBTeXN0ZW1JZCwgYXNzaWduZWRFbXBsb3llZUlkPzogU3lzdGVtSWQpID0+IHtcclxuICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmRhdGEuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAoIW9yZGVyKSByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlID0gdXNlRW1wbG95ZWVTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKGVtcGxveWVlSWQgYXMgU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBjb25zdCBhc3NpZ25lZEVtcGxveWVlID0gYXNzaWduZWRFbXBsb3llZUlkID8gdXNlRW1wbG95ZWVTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKGFzc2lnbmVkRW1wbG95ZWVJZCBhcyBTeXN0ZW1JZCkgOiBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ291bnQgb25seSBhY3RpdmUgcGFja2FnaW5ncyBmb3IgcHJvcGVyIG51bWJlcmluZ1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVQYWNrYWdpbmdzID0gb3JkZXIucGFja2FnaW5ncy5maWx0ZXIocCA9PiBwLnN0YXR1cyAhPT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUNvdW50QWZ0ZXJJbnNlcnQgPSBhY3RpdmVQYWNrYWdpbmdzLmxlbmd0aCArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0FjdGl2ZUluZGV4ID0gYWN0aXZlUGFja2FnaW5ncy5sZW5ndGg7IC8vIFRoaXMgd2lsbCBiZSB0aGUgaW5kZXggaW4gYWN0aXZlIHBhY2thZ2luZ3NcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1BhY2thZ2luZzogUGFja2FnaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtSWQ6IGdldE5leHRQYWNrYWdpbmdTeXN0ZW1JZCgpLCAvLyDinIUgVXNlIHByb3BlciBmb3JtYXQgUEFDS0FHRTAwMDAwMVxyXG4gICAgICAgICAgICAgICAgaWQ6IGJ1aWxkUGFja2FnaW5nQnVzaW5lc3NJZChvcmRlci5pZCwgbmV3QWN0aXZlSW5kZXgsIGFjdGl2ZUNvdW50QWZ0ZXJJbnNlcnQpLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdERhdGU6IHRvSVNPRGF0ZVRpbWUobmV3IERhdGUoKSksXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0aW5nRW1wbG95ZWVJZDogZW1wbG95ZWVJZCxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RpbmdFbXBsb3llZU5hbWU6IGVtcGxveWVlPy5mdWxsTmFtZSB8fCAnTi9BJyxcclxuICAgICAgICAgICAgICAgIGFzc2lnbmVkRW1wbG95ZWVJZCxcclxuICAgICAgICAgICAgICAgIGFzc2lnbmVkRW1wbG95ZWVOYW1lOiBhc3NpZ25lZEVtcGxveWVlPy5mdWxsTmFtZSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogJ0No4budIMSRw7NuZyBnw7NpJyxcclxuICAgICAgICAgICAgICAgIHByaW50U3RhdHVzOiAnQ2jGsGEgaW4nLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0geyAuLi5vcmRlciwgcGFja2FnaW5nczogWy4uLm9yZGVyLnBhY2thZ2luZ3MsIG5ld1BhY2thZ2luZ10sIGRlbGl2ZXJ5U3RhdHVzOiAnQ2jhu50gxJHDs25nIGfDs2knIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXMgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogc3RhdGUuZGF0YS5tYXAobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkID8gdXBkYXRlZE9yZGVyIDogbykgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgY29uZmlybVBhY2thZ2luZzogKG9yZGVyU3lzdGVtSWQ6IFN5c3RlbUlkLCBwYWNrYWdpbmdTeXN0ZW1JZDogU3lzdGVtSWQsIGVtcGxveWVlSWQ6IFN5c3RlbUlkKSA9PiB7XHJcbiAgICAgICAgLy8g4pyFIENoZWNrIG5lZ2F0aXZlIHBhY2tpbmcgc2V0dGluZ1xyXG4gICAgICAgIGNvbnN0IHsgYWxsb3dOZWdhdGl2ZVBhY2tpbmcgfSA9IHVzZVNhbGVzTWFuYWdlbWVudFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICBpZiAoIWFsbG93TmVnYXRpdmVQYWNraW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gYmFzZVN0b3JlLmdldFN0YXRlKCkuZGF0YS5maW5kKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGlmIChvcmRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBmaW5kQnlJZDogZmluZFByb2R1Y3RCeUlkIH0gPSB1c2VQcm9kdWN0U3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvcmRlci5saW5lSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWN0ID0gZmluZFByb2R1Y3RCeUlkKGFzU3lzdGVtSWQoaXRlbS5wcm9kdWN0U3lzdGVtSWQpKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdCAmJiBpc0NvbWJvUHJvZHVjdChwcm9kdWN0KSAmJiBwcm9kdWN0LmNvbWJvSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb21ib0l0ZW0gb2YgcHJvZHVjdC5jb21ib0l0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFByb2R1Y3QgPSBmaW5kUHJvZHVjdEJ5SWQoYXNTeXN0ZW1JZChjb21ib0l0ZW0ucHJvZHVjdFN5c3RlbUlkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZFF0eSA9IGl0ZW0ucXVhbnRpdHkgKiBjb21ib0l0ZW0ucXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3RvY2sgPSBjaGlsZFByb2R1Y3Q/LmludmVudG9yeUJ5QnJhbmNoPy5bb3JkZXIuYnJhbmNoU3lzdGVtSWRdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0b2NrIDwgcmVxdWlyZWRRdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgS2jDtG5nIHRo4buDIMSRw7NuZyBnw7NpOiBT4bqjbiBwaOG6qW0gXCIke2NoaWxkUHJvZHVjdD8ubmFtZX1cIiBraMO0bmcgxJHhu6cgdOG7k24ga2hvIChDw7M6ICR7Y3VycmVudFN0b2NrfSwgQ+G6p246ICR7cmVxdWlyZWRRdHl9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXNlU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdG9jayA9IHByb2R1Y3Q/LmludmVudG9yeUJ5QnJhbmNoPy5bb3JkZXIuYnJhbmNoU3lzdGVtSWRdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RvY2sgPCBpdGVtLnF1YW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgS2jDtG5nIHRo4buDIMSRw7NuZyBnw7NpOiBT4bqjbiBwaOG6qW0gXCIke2l0ZW0ucHJvZHVjdE5hbWV9XCIga2jDtG5nIMSR4bunIHThu5NuIGtobyAoQ8OzOiAke2N1cnJlbnRTdG9ja30sIEPhuqduOiAke2l0ZW0ucXVhbnRpdHl9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhQ29weSA9IFsuLi5zdGF0ZS5kYXRhXTtcclxuICAgICAgICAgICAgY29uc3Qgb3JkZXJJbmRleCA9IGRhdGFDb3B5LmZpbmRJbmRleChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAob3JkZXJJbmRleCA9PT0gLTEpIHJldHVybiBzdGF0ZTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IG9yZGVyQ29weSA9IHsgLi4uZGF0YUNvcHlbb3JkZXJJbmRleF0gfTtcclxuICAgICAgICAgICAgY29uc3QgcGFja2FnaW5nSW5kZXggPSBvcmRlckNvcHkucGFja2FnaW5ncy5maW5kSW5kZXgocCA9PiBwLnN5c3RlbUlkID09PSBwYWNrYWdpbmdTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGlmIChwYWNrYWdpbmdJbmRleCA9PT0gLTEpIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlID0gdXNlRW1wbG95ZWVTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKGVtcGxveWVlSWQgYXMgU3lzdGVtSWQpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgcGFja2FnaW5nc0NvcHkgPSBbLi4ub3JkZXJDb3B5LnBhY2thZ2luZ3NdO1xyXG4gICAgICAgICAgICBwYWNrYWdpbmdzQ29weVtwYWNrYWdpbmdJbmRleF0gPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5wYWNrYWdpbmdzQ29weVtwYWNrYWdpbmdJbmRleF0sXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICfEkMOjIMSRw7NuZyBnw7NpJyBhcyBQYWNrYWdpbmdTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBjb25maXJtRGF0ZTogdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1pbmdFbXBsb3llZUlkOiBlbXBsb3llZUlkLFxyXG4gICAgICAgICAgICAgICAgY29uZmlybWluZ0VtcGxveWVlTmFtZTogZW1wbG95ZWU/LmZ1bGxOYW1lIHx8ICdOL0EnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgXHJcbiAgICAgICAgb3JkZXJDb3B5LnBhY2thZ2luZ3MgPSBwYWNrYWdpbmdzQ29weTtcclxuICAgICAgICBvcmRlckNvcHkuZGVsaXZlcnlTdGF0dXMgPSAnxJDDoyDEkcOzbmcgZ8OzaScgYXMgT3JkZXJEZWxpdmVyeVN0YXR1cztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRhdGFDb3B5W29yZGVySW5kZXhdID0gb3JkZXJDb3B5O1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogZGF0YUNvcHkgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FuY2VsUGFja2FnaW5nUmVxdWVzdDogKG9yZGVyU3lzdGVtSWQ6IFN5c3RlbUlkLCBwYWNrYWdpbmdTeXN0ZW1JZDogU3lzdGVtSWQsIGVtcGxveWVlSWQ6IFN5c3RlbUlkLCByZWFzb246IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGJhc2VTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiB7XHJcbiAgICAgICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmRhdGEuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAoIW9yZGVyKSByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlID0gdXNlRW1wbG95ZWVTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKGVtcGxveWVlSWQgYXMgU3lzdGVtSWQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcChwID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwLnN5c3RlbUlkID09PSBwYWNrYWdpbmdTeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ0jhu6d5IMSRw7NuZyBnw7NpJyBhcyBQYWNrYWdpbmdTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbERhdGU6IHRvSVNPRGF0ZVRpbWUobmV3IERhdGUoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbGluZ0VtcGxveWVlSWQ6IGVtcGxveWVlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbGluZ0VtcGxveWVlTmFtZTogZW1wbG95ZWU/LmZ1bGxOYW1lIHx8ICdOL0EnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxSZWFzb246IHJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBpc0FueUFjdGl2ZVBhY2thZ2luZyA9IHVwZGF0ZWRQYWNrYWdpbmdzLnNvbWUocCA9PiBwLnN0YXR1cyAhPT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IHsgLi4ub3JkZXIsIHBhY2thZ2luZ3M6IHVwZGF0ZWRQYWNrYWdpbmdzLCBkZWxpdmVyeVN0YXR1czogaXNBbnlBY3RpdmVQYWNrYWdpbmcgPyBvcmRlci5kZWxpdmVyeVN0YXR1cyA6ICdDaOG7nSDEkcOzbmcgZ8OzaScgYXMgT3JkZXJEZWxpdmVyeVN0YXR1cyB9O1xyXG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBzdGF0ZS5kYXRhLm1hcChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQgPyB1cGRhdGVkT3JkZXIgOiBvKSB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgcHJvY2Vzc0luU3RvcmVQaWNrdXA6IChvcmRlclN5c3RlbUlkOiBTeXN0ZW1JZCwgcGFja2FnaW5nU3lzdGVtSWQ6IFN5c3RlbUlkKSA9PiB7XHJcbiAgICAgICAgYmFzZVN0b3JlLnNldFN0YXRlKHN0YXRlID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5kYXRhLmZpbmQobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkKTtcclxuICAgICAgICAgICAgaWYgKCFvcmRlcikgcmV0dXJuIHN0YXRlO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSBvcmRlci5wYWNrYWdpbmdzLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcCgocCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwLnN5c3RlbUlkID09PSBwYWNrYWdpbmdTeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc0lkID0gdHlwZW9mIHAuaWQgPT09ICdzdHJpbmcnICYmIHAuaWQudHJpbSgpLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRJZCA9IGhhc0lkID8gcC5pZCA6IGJ1aWxkUGFja2FnaW5nQnVzaW5lc3NJZChvcmRlci5pZCwgaW5kZXgsIHRvdGFsQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXNvbHZlZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxpdmVyeU1ldGhvZDogJ05o4bqtbiB04bqhaSBj4butYSBow6BuZycgYXMgT3JkZXJEZWxpdmVyeU1ldGhvZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlTdGF0dXM6ICfEkMOjIMSRw7NuZyBnw7NpJyBhcyBPcmRlckRlbGl2ZXJ5U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmFja2luZ0NvZGUgd2lsbCBiZSBzZXQgd2hlbiBzaGlwbWVudCBpcyBjcmVhdGVkIGluIGNvbmZpcm1JblN0b3JlUGlja3VwXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IHsgXHJcbiAgICAgICAgICAgICAgICAuLi5vcmRlciwgXHJcbiAgICAgICAgICAgICAgICBwYWNrYWdpbmdzOiB1cGRhdGVkUGFja2FnaW5ncywgXHJcbiAgICAgICAgICAgICAgICBkZWxpdmVyeVN0YXR1czogJ8SQw6MgxJHDs25nIGfDs2knIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXMgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogc3RhdGUuZGF0YS5tYXAobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkID8gdXBkYXRlZE9yZGVyIDogbykgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNvbmZpcm1JblN0b3JlUGlja3VwOiAob3JkZXJTeXN0ZW1JZDogU3lzdGVtSWQsIHBhY2thZ2luZ1N5c3RlbUlkOiBTeXN0ZW1JZCwgZW1wbG95ZWVJZDogU3lzdGVtSWQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+foiBbY29uZmlybUluU3RvcmVQaWNrdXBdIENhbGxlZCB3aXRoOicsIHsgb3JkZXJTeXN0ZW1JZCwgcGFja2FnaW5nU3lzdGVtSWQsIGVtcGxveWVlSWQgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g4pyFIENoZWNrIG5lZ2F0aXZlIHN0b2NrIG91dCBzZXR0aW5nXHJcbiAgICAgICAgY29uc3QgeyBhbGxvd05lZ2F0aXZlU3RvY2tPdXQgfSA9IHVzZVNhbGVzTWFuYWdlbWVudFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICBpZiAoIWFsbG93TmVnYXRpdmVTdG9ja091dCkge1xyXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IGJhc2VTdG9yZS5nZXRTdGF0ZSgpLmRhdGEuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAob3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZmluZEJ5SWQ6IGZpbmRQcm9kdWN0QnlJZCB9ID0gdXNlUHJvZHVjdFN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb3JkZXIubGluZUl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IGZpbmRQcm9kdWN0QnlJZChhc1N5c3RlbUlkKGl0ZW0ucHJvZHVjdFN5c3RlbUlkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QgJiYgaXNDb21ib1Byb2R1Y3QocHJvZHVjdCkgJiYgcHJvZHVjdC5jb21ib0l0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29tYm9JdGVtIG9mIHByb2R1Y3QuY29tYm9JdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRQcm9kdWN0ID0gZmluZFByb2R1Y3RCeUlkKGFzU3lzdGVtSWQoY29tYm9JdGVtLnByb2R1Y3RTeXN0ZW1JZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRRdHkgPSBpdGVtLnF1YW50aXR5ICogY29tYm9JdGVtLnF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFN0b2NrID0gY2hpbGRQcm9kdWN0Py5pbnZlbnRvcnlCeUJyYW5jaD8uW29yZGVyLmJyYW5jaFN5c3RlbUlkXSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdG9jayA8IHJlcXVpcmVkUXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEtow7RuZyB0aOG7gyB4deG6pXQga2hvOiBT4bqjbiBwaOG6qW0gXCIke2NoaWxkUHJvZHVjdD8ubmFtZX1cIiBraMO0bmcgxJHhu6cgdOG7k24ga2hvIChDw7M6ICR7Y3VycmVudFN0b2NrfSwgQ+G6p246ICR7cmVxdWlyZWRRdHl9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXNlU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdG9jayA9IHByb2R1Y3Q/LmludmVudG9yeUJ5QnJhbmNoPy5bb3JkZXIuYnJhbmNoU3lzdGVtSWRdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RvY2sgPCBpdGVtLnF1YW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgS2jDtG5nIHRo4buDIHh14bqldCBraG86IFPhuqNuIHBo4bqpbSBcIiR7aXRlbS5wcm9kdWN0TmFtZX1cIiBraMO0bmcgxJHhu6cgdOG7k24ga2hvIChDw7M6ICR7Y3VycmVudFN0b2NrfSwgQ+G6p246ICR7aXRlbS5xdWFudGl0eX0pYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZVN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJhc2VTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZGF0YS5maW5kKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGlmICghb3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbY29uZmlybUluU3RvcmVQaWNrdXBdIE9yZGVyIG5vdCBmb3VuZDonLCBvcmRlclN5c3RlbUlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OLIFtjb25maXJtSW5TdG9yZVBpY2t1cF0gT3JkZXIgZm91bmQ6Jywgb3JkZXIuaWQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+TiyBbY29uZmlybUluU3RvcmVQaWNrdXBdIExpbmUgaXRlbXM6Jywgb3JkZXIubGluZUl0ZW1zLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTdG9jayBsb2dpY1xyXG4gICAgICAgICAgICBjb25zdCB7IGFkZEVudHJ5OiBhZGRTdG9ja0hpc3RvcnkgfSA9IHVzZVN0b2NrSGlzdG9yeVN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlRGF0YSA9IHVzZUVtcGxveWVlU3RvcmUuZ2V0U3RhdGUoKS5maW5kQnlJZChlbXBsb3llZUlkIGFzIFN5c3RlbUlkKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKTtcclxuICAgIFxyXG4gICAgICAgICAgICBvcmRlci5saW5lSXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OmIFtjb25maXJtSW5TdG9yZVBpY2t1cF0gRGlzcGF0Y2hpbmcgaXRlbSAke2luZGV4ICsgMX06YCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RTeXN0ZW1JZDogaXRlbS5wcm9kdWN0U3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdE5hbWU6IGl0ZW0ucHJvZHVjdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgYnJhbmNoU3lzdGVtSWQ6IGdldEJyYW5jaElkKG9yZGVyKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIOKchSBEaXNwYXRjaCBzdG9jayAoaOG7lyB0cuG7oyBjb21ibyAtIHPhur0gZGlzcGF0Y2ggU1AgY29uKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkSXRlbXMgPSBwcm9jZXNzTGluZUl0ZW1TdG9jayhpdGVtLCBnZXRCcmFuY2hJZChvcmRlciksICdkaXNwYXRjaCcsIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDinIUgQWRkIHN0b2NrIGhpc3RvcnkgZW50cnkgZm9yIGVhY2ggcHJvY2Vzc2VkIGl0ZW0gKFNQIGNvbiBu4bq/dSBjb21ibylcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZEl0ZW1zLmZvckVhY2gocHJvY2Vzc2VkSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IHVzZVByb2R1Y3RTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKHByb2Nlc3NlZEl0ZW0ucHJvZHVjdFN5c3RlbUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3RvY2sgPSBwcm9kdWN0Py5pbnZlbnRvcnlCeUJyYW5jaD8uW2dldEJyYW5jaElkKG9yZGVyKV0gfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBhZGRTdG9ja0hpc3Rvcnkoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBub3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RJZDogcHJvY2Vzc2VkSXRlbS5wcm9kdWN0U3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ1h14bqldCBraG8gKMSQxqFuIGjDoG5nKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5Q2hhbmdlOiAtcHJvY2Vzc2VkSXRlbS5xdWFudGl0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RvY2tMZXZlbDogY3VycmVudFN0b2NrLCAvLyBBZnRlciBkaXNwYXRjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudElkOiBvcmRlci5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoU3lzdGVtSWQ6IGdldEJyYW5jaElkKG9yZGVyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoOiBvcmRlci5icmFuY2hOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbXBsb3llZU5hbWU6IGVtcGxveWVlRGF0YT8uZnVsbE5hbWUgfHwgJ0jhu4cgdGjhu5FuZycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gU3RhdHVzIHVwZGF0ZSBsb2dpYyAtIHdpbGwgYmUgdXBkYXRlZCB3aXRoIHRyYWNraW5nQ29kZSBhZnRlciBzaGlwbWVudCBjcmVhdGlvblxyXG4gICAgICAgICAgICBsZXQgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcChwID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwLnN5c3RlbUlkID09PSBwYWNrYWdpbmdTeXN0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlTdGF0dXM6ICfEkMOjIGdpYW8gaMOgbmcnIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxpdmVyZWREYXRlOiB0b0lTT0RhdGVUaW1lKG5ldyBEYXRlKCkpIFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgY29uc3QgaXNBbGxEZWxpdmVyZWQgPSB1cGRhdGVkUGFja2FnaW5ncy5ldmVyeShwID0+IHAuc3RhdHVzID09PSAnSOG7p3kgxJHDs25nIGfDs2knIHx8IHAuZGVsaXZlcnlTdGF0dXMgPT09ICfEkMOjIGdpYW8gaMOgbmcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBuZXdTdGF0dXMgPSBvcmRlci5zdGF0dXMgPT09ICfEkOG6t3QgaMOgbmcnID8gJ8SQYW5nIGdpYW8gZOG7i2NoJyA6IG9yZGVyLnN0YXR1cztcclxuICAgICAgICAgICAgbGV0IG5ld0NvbXBsZXRlZERhdGUgPSBvcmRlci5jb21wbGV0ZWREYXRlO1xyXG4gICAgICAgICAgICBpZiAoaXNBbGxEZWxpdmVyZWQgJiYgb3JkZXIucGF5bWVudFN0YXR1cyA9PT0gJ1RoYW5oIHRvw6FuIHRvw6BuIGLhu5knKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0dXMgPSAnSG/DoG4gdGjDoG5oJztcclxuICAgICAgICAgICAgICAgIG5ld0NvbXBsZXRlZERhdGUgPSB0b0lTT0RhdGVUaW1lKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlID0gdXNlRW1wbG95ZWVTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKGVtcGxveWVlSWQgYXMgU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g4pyFIENyZWF0ZSBzaGlwbWVudCByZWNvcmQgZm9yIElOU1RPUkUgcGlja3VwXHJcbiAgICAgICAgICAgIGNvbnN0IHBhY2thZ2luZyA9IG9yZGVyLnBhY2thZ2luZ3MuZmluZChwID0+IHAuc3lzdGVtSWQgPT09IHBhY2thZ2luZ1N5c3RlbUlkKTtcclxuICAgICAgICAgICAgbGV0IG5ld1NoaXBtZW50OiBTaGlwbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAocGFja2FnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNyZWF0ZVNoaXBtZW50LCB1cGRhdGVTaGlwbWVudCB9ID0gdXNlU2hpcG1lbnRTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgbmV3U2hpcG1lbnQgPSBjcmVhdGVTaGlwbWVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnaW5nU3lzdGVtSWQ6IHBhY2thZ2luZ1N5c3RlbUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyU3lzdGVtSWQ6IG9yZGVyU3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogb3JkZXIuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tpbmdDb2RlOiAnJywgLy8gV2lsbCBiZSBzZXQgdG8gc2hpcG1lbnQgYnVzaW5lc3MgSUQgYmVsb3dcclxuICAgICAgICAgICAgICAgICAgICBjYXJyaWVyOiAnTmjhuq1uIHThuqFpIGPhu61hIGjDoG5nJyxcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlOiAnTmjhuq1uIHThuqFpIGPhu61hIGjDoG5nJyxcclxuICAgICAgICAgICAgICAgICAgICBkZWxpdmVyeVN0YXR1czogJ8SQw6MgZ2lhbyBow6BuZycsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdGF0dXM6ICdDaMawYSBpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVjb25jaWxpYXRpb25TdGF0dXM6ICdDaMawYSDEkeG7kWkgc2/DoXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNoaXBwaW5nRmVlVG9QYXJ0bmVyOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvZEFtb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBwYXllcjogJ05nxrDhu51pIGfhu61pJyxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcclxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkQXQ6IG5vdyxcclxuICAgICAgICAgICAgICAgICAgICBkZWxpdmVyZWRBdDogbm93LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc2hpcG1lbnQgdHJhY2tpbmdDb2RlIHRvIHVzZSBpdHMgb3duIGJ1c2luZXNzIElEXHJcbiAgICAgICAgICAgICAgICBpZiAobmV3U2hpcG1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTaGlwbWVudChuZXdTaGlwbWVudC5zeXN0ZW1JZCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja2luZ0NvZGU6IG5ld1NoaXBtZW50LmlkLCAvLyBVc2Ugc2hpcG1lbnQgYnVzaW5lc3MgSUQgKFZDMDAwWFhYKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBwYWNrYWdpbmcgd2l0aCBzaGlwbWVudCB0cmFja2luZ0NvZGVcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUGFja2FnaW5ncyA9IHVwZGF0ZWRQYWNrYWdpbmdzLm1hcChwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAuc3lzdGVtSWQgPT09IHBhY2thZ2luZ1N5c3RlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5wLCB0cmFja2luZ0NvZGU6IG5ld1NoaXBtZW50IS5pZCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBbY29uZmlybUluU3RvcmVQaWNrdXBdIFNoaXBtZW50IGNyZWF0ZWQ6JywgbmV3U2hpcG1lbnQ/LmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0geyBcclxuICAgICAgICAgICAgICAgIC4uLm9yZGVyLCBcclxuICAgICAgICAgICAgICAgIHBhY2thZ2luZ3M6IHVwZGF0ZWRQYWNrYWdpbmdzLCBcclxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiAnxJDDoyBnaWFvIGjDoG5nJyBhcyBPcmRlckRlbGl2ZXJ5U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWREYXRlOiBuZXdDb21wbGV0ZWREYXRlLFxyXG4gICAgICAgICAgICAgICAgc3RvY2tPdXRTdGF0dXM6ICdYdeG6pXQga2hvIHRvw6BuIGLhu5knIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hlZERhdGU6IHRvSVNPRGF0ZVRpbWUobmV3IERhdGUoKSksXHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaGVkQnlFbXBsb3llZUlkOiBlbXBsb3llZUlkLFxyXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hlZEJ5RW1wbG95ZWVOYW1lOiBlbXBsb3llZT8uZnVsbE5hbWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBbY29uZmlybUluU3RvcmVQaWNrdXBdIFN0b2NrIGRpc3BhdGNoZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHN0YXRlLmRhdGEubWFwKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCA/IHVwZGF0ZWRPcmRlciA6IG8pIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCAgICBcclxuICAgIGNvbmZpcm1QYXJ0bmVyU2hpcG1lbnQ6IGFzeW5jIChvcmRlclN5c3RlbUlkOiBTeXN0ZW1JZCwgcGFja2FnaW5nU3lzdGVtSWQ6IFN5c3RlbUlkLCBzaGlwbWVudERhdGE6IGFueSk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4gPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gYmFzZVN0b3JlLmdldFN0YXRlKCkuZGF0YS5maW5kKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGlmICghb3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnS2jDtG5nIHTDrG0gdGjhuqV5IMSRxqFuIGjDoG5nJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgQ2hlY2sgbmVnYXRpdmUgcGFja2luZyBzZXR0aW5nIChjb3ZlcnMgY3JlYXRpbmcgc2hpcG1lbnQpXHJcbiAgICAgICAgICAgIGNvbnN0IHsgYWxsb3dOZWdhdGl2ZVBhY2tpbmcgfSA9IHVzZVNhbGVzTWFuYWdlbWVudFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgaWYgKCFhbGxvd05lZ2F0aXZlUGFja2luZykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBmaW5kQnlJZDogZmluZFByb2R1Y3RCeUlkIH0gPSB1c2VQcm9kdWN0U3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvcmRlci5saW5lSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWN0ID0gZmluZFByb2R1Y3RCeUlkKGFzU3lzdGVtSWQoaXRlbS5wcm9kdWN0U3lzdGVtSWQpKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdCAmJiBpc0NvbWJvUHJvZHVjdChwcm9kdWN0KSAmJiBwcm9kdWN0LmNvbWJvSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb21ib0l0ZW0gb2YgcHJvZHVjdC5jb21ib0l0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFByb2R1Y3QgPSBmaW5kUHJvZHVjdEJ5SWQoYXNTeXN0ZW1JZChjb21ib0l0ZW0ucHJvZHVjdFN5c3RlbUlkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1aXJlZFF0eSA9IGl0ZW0ucXVhbnRpdHkgKiBjb21ib0l0ZW0ucXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3RvY2sgPSBjaGlsZFByb2R1Y3Q/LmludmVudG9yeUJ5QnJhbmNoPy5bb3JkZXIuYnJhbmNoU3lzdGVtSWRdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0b2NrIDwgcmVxdWlyZWRRdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogYEtow7RuZyB0aOG7gyB04bqhbyB24bqtbiDEkcahbjogU+G6o24gcGjhuqltIFwiJHtjaGlsZFByb2R1Y3Q/Lm5hbWV9XCIga2jDtG5nIMSR4bunIHThu5NuIGtob2AgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdG9jayA9IHByb2R1Y3Q/LmludmVudG9yeUJ5QnJhbmNoPy5bb3JkZXIuYnJhbmNoU3lzdGVtSWRdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RvY2sgPCBpdGVtLnF1YW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogYEtow7RuZyB0aOG7gyB04bqhbyB24bqtbiDEkcahbjogU+G6o24gcGjhuqltIFwiJHtpdGVtLnByb2R1Y3ROYW1lfVwiIGtow7RuZyDEkeG7pyB04buTbiBraG9gIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOKchSBHZXQgR0hUSyBwcmV2aWV3IHBhcmFtcyBmcm9tIHdpbmRvdyAoc2V0IGJ5IFNoaXBwaW5nSW50ZWdyYXRpb24pXHJcbiAgICAgICAgICAgIGNvbnN0IGdodGtQYXJhbXMgPSAod2luZG93IGFzIGFueSkuX19naHRrUHJldmlld1BhcmFtcztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghZ2h0a1BhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdUaGnhur91IHRow7RuZyB0aW4gduG6rW4gY2h1eeG7g24uIFZ1aSBsw7JuZyBjaOG7jW4gZOG7i2NoIHbhu6UgduG6rW4gY2h1eeG7g24uJyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgSW1wb3J0IEdIVEsgc2VydmljZSBkeW5hbWljYWxseVxyXG4gICAgICAgICAgICBjb25zdCB7IEdIVEtTZXJ2aWNlIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3NldHRpbmdzL3NoaXBwaW5nL2ludGVncmF0aW9ucy9naHRrLXNlcnZpY2UnKTtcclxuICAgICAgICAgICAgY29uc3QgeyBnZXRHSFRLQ3JlZGVudGlhbHMgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vbGliL3V0aWxzL2dldC1zaGlwcGluZy1jcmVkZW50aWFscycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgeyBhcGlUb2tlbiwgcGFydG5lckNvZGUgfSA9IGdldEdIVEtDcmVkZW50aWFscygpO1xyXG4gICAgICAgICAgICBjb25zdCBnaHRrU2VydmljZSA9IG5ldyBHSFRLU2VydmljZShhcGlUb2tlbiwgcGFydG5lckNvZGUpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk6QgW2NvbmZpcm1QYXJ0bmVyU2hpcG1lbnRdIENhbGxpbmcgR0hUSyBBUEkgd2l0aCBwYXJhbXM6JywgZ2h0a1BhcmFtcyk7XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgQ2FsbCByZWFsIEdIVEsgQVBJXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdodGtTZXJ2aWNlLmNyZWF0ZU9yZGVyKGdodGtQYXJhbXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2VzcyB8fCAhcmVzdWx0Lm9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0Lm1lc3NhZ2UgfHwgJ0tow7RuZyB0aOG7gyB04bqhbyDEkcahbiB24bqtbiBjaHV54buDbicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgVXBkYXRlIG9yZGVyIHdpdGggcmVhbCB0cmFja2luZyBjb2RlIGZyb20gR0hUS1xyXG4gICAgICAgICAgICBjb25zdCB0cmFja2luZ0NvZGUgPSByZXN1bHQub3JkZXIubGFiZWw7XHJcbiAgICAgICAgICAgIGNvbnN0IGdodGtUcmFja2luZ0lkID0gcmVzdWx0Lm9yZGVyLnRyYWNraW5nX2lkO1xyXG4gICAgICAgICAgICBjb25zdCBlc3RpbWF0ZWRQaWNrVGltZSA9IHJlc3VsdC5vcmRlci5lc3RpbWF0ZWRfcGlja190aW1lO1xyXG4gICAgICAgICAgICBjb25zdCBlc3RpbWF0ZWREZWxpdmVyVGltZSA9IHJlc3VsdC5vcmRlci5lc3RpbWF0ZWRfZGVsaXZlcl90aW1lO1xyXG5cclxuICAgICAgICAgICAgYmFzZVN0b3JlLnNldFN0YXRlKHN0YXRlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQYWNrYWdpbmdzID0gb3JkZXIucGFja2FnaW5ncy5tYXAocCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAuc3lzdGVtSWQgPT09IHBhY2thZ2luZ1N5c3RlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlNZXRob2Q6ICdE4buLY2ggduG7pSBnaWFvIGjDoG5nJyBhcyBPcmRlckRlbGl2ZXJ5TWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlTdGF0dXM6ICdDaOG7nSBs4bqleSBow6BuZycgYXMgT3JkZXJEZWxpdmVyeVN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcnJpZXI6ICdHSFRLJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2U6IHJlc3VsdC5vcmRlcj8uZmVlID8gYCR7cmVzdWx0Lm9yZGVyLmZlZX3EkWAgOiAnU3RhbmRhcmQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tpbmdDb2RlOiB0cmFja2luZ0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwcGluZ0ZlZVRvUGFydG5lcjogcGFyc2VJbnQocmVzdWx0Lm9yZGVyPy5mZWUgfHwgJzAnKSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kQW1vdW50OiBnaHRrUGFyYW1zLnBpY2tfbW9uZXkgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWVyOiAoZ2h0a1BhcmFtcy5pc19mcmVlc2hpcCA9PT0gMSA/ICdOZ8aw4budaSBn4butaScgOiAnTmfGsOG7nWkgbmjhuq1uJykgYXMgJ05nxrDhu51pIGfhu61pJyB8ICdOZ8aw4budaSBuaOG6rW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZVRvU2hpcHBlcjogZ2h0a1BhcmFtcy5ub3RlIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBnaHRrUGFyYW1zLndlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IGAke2dodGtQYXJhbXMucHJvZHVjdHM/LlswXT8ubGVuZ3RoIHx8IDEwfcOXJHtnaHRrUGFyYW1zLnByb2R1Y3RzPy5bMF0/LndpZHRoIHx8IDEwfcOXJHtnaHRrUGFyYW1zLnByb2R1Y3RzPy5bMF0/LmhlaWdodCB8fCAxMH1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g4pyFIFN0b3JlIEdIVEsgc3BlY2lmaWMgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2h0a1RyYWNraW5nSWQ6IFN0cmluZyhnaHRrVHJhY2tpbmdJZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RpbWF0ZWRQaWNrVGltZTogZXN0aW1hdGVkUGlja1RpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RpbWF0ZWREZWxpdmVyVGltZTogZXN0aW1hdGVkRGVsaXZlclRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IHsgXHJcbiAgICAgICAgICAgICAgICAgICAgLi4ub3JkZXIsIFxyXG4gICAgICAgICAgICAgICAgICAgIHBhY2thZ2luZ3M6IHVwZGF0ZWRQYWNrYWdpbmdzLCBcclxuICAgICAgICAgICAgICAgICAgICBkZWxpdmVyeVN0YXR1czogJ0No4budIGzhuqV5IGjDoG5nJyBhcyBPcmRlckRlbGl2ZXJ5U3RhdHVzLCBcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICfEkGFuZyBnaWFvIGThu4tjaCcgYXMgT3JkZXJNYWluU3RhdHVzIFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogc3RhdGUuZGF0YS5tYXAobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkID8gdXBkYXRlZE9yZGVyIDogbykgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFtjb25maXJtUGFydG5lclNoaXBtZW50XSBHSFRLIG9yZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIHtcclxuICAgICAgICAgICAgICAgIHRyYWNraW5nQ29kZSxcclxuICAgICAgICAgICAgICAgIGdodGtUcmFja2luZ0lkLFxyXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkUGlja1RpbWUsXHJcbiAgICAgICAgICAgICAgICBlc3RpbWF0ZWREZWxpdmVyVGltZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVOG6oW8gduG6rW4gxJHGoW4gdGjDoG5oIGPDtG5nISBNw6MgduG6rW4gxJHGoW46ICR7dHJhY2tpbmdDb2RlfWAgXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbY29uZmlybVBhcnRuZXJTaGlwbWVudF0gRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdWdWkgbMOybmcgdGjhu60gbOG6oWknO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgTOG7l2kgdOG6oW8gxJHGoW4gduG6rW4gY2h1eeG7g246ICR7ZXJyb3JNZXNzYWdlfWAgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBkaXNwYXRjaEZyb21XYXJlaG91c2U6IChvcmRlclN5c3RlbUlkOiBTeXN0ZW1JZCwgcGFja2FnaW5nU3lzdGVtSWQ6IFN5c3RlbUlkLCBlbXBsb3llZUlkOiBTeXN0ZW1JZCkgPT4ge1xyXG4gICAgICAgIC8vIOKchSBDaGVjayBuZWdhdGl2ZSBzdG9jayBvdXQgc2V0dGluZ1xyXG4gICAgICAgIGNvbnN0IHsgYWxsb3dOZWdhdGl2ZVN0b2NrT3V0IH0gPSB1c2VTYWxlc01hbmFnZW1lbnRTZXR0aW5nc1N0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgaWYgKCFhbGxvd05lZ2F0aXZlU3RvY2tPdXQpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBiYXNlU3RvcmUuZ2V0U3RhdGUoKS5kYXRhLmZpbmQobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkKTtcclxuICAgICAgICAgICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGZpbmRCeUlkOiBmaW5kUHJvZHVjdEJ5SWQgfSA9IHVzZVByb2R1Y3RTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9yZGVyLmxpbmVJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2R1Y3QgPSBmaW5kUHJvZHVjdEJ5SWQoYXNTeXN0ZW1JZChpdGVtLnByb2R1Y3RTeXN0ZW1JZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0ICYmIGlzQ29tYm9Qcm9kdWN0KHByb2R1Y3QpICYmIHByb2R1Y3QuY29tYm9JdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbWJvSXRlbSBvZiBwcm9kdWN0LmNvbWJvSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkUHJvZHVjdCA9IGZpbmRQcm9kdWN0QnlJZChhc1N5c3RlbUlkKGNvbWJvSXRlbS5wcm9kdWN0U3lzdGVtSWQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkUXR5ID0gaXRlbS5xdWFudGl0eSAqIGNvbWJvSXRlbS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdG9jayA9IGNoaWxkUHJvZHVjdD8uaW52ZW50b3J5QnlCcmFuY2g/LltvcmRlci5icmFuY2hTeXN0ZW1JZF0gfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RvY2sgPCByZXF1aXJlZFF0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBLaMO0bmcgdGjhu4MgeHXhuqV0IGtobzogU+G6o24gcGjhuqltIFwiJHtjaGlsZFByb2R1Y3Q/Lm5hbWV9XCIga2jDtG5nIMSR4bunIHThu5NuIGtobyAoQ8OzOiAke2N1cnJlbnRTdG9ja30sIEPhuqduOiAke3JlcXVpcmVkUXR5fSlgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZVN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3RvY2sgPSBwcm9kdWN0Py5pbnZlbnRvcnlCeUJyYW5jaD8uW29yZGVyLmJyYW5jaFN5c3RlbUlkXSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0b2NrIDwgaXRlbS5xdWFudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEtow7RuZyB0aOG7gyB4deG6pXQga2hvOiBT4bqjbiBwaOG6qW0gXCIke2l0ZW0ucHJvZHVjdE5hbWV9XCIga2jDtG5nIMSR4bunIHThu5NuIGtobyAoQ8OzOiAke2N1cnJlbnRTdG9ja30sIEPhuqduOiAke2l0ZW0ucXVhbnRpdHl9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmRhdGEuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAoIW9yZGVyKSByZXR1cm4gc3RhdGU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB7IGFkZEVudHJ5OiBhZGRTdG9ja0hpc3RvcnkgfSA9IHVzZVN0b2NrSGlzdG9yeVN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlRGF0YSA9IHVzZUVtcGxveWVlU3RvcmUuZ2V0U3RhdGUoKS5maW5kQnlJZChlbXBsb3llZUlkIGFzIFN5c3RlbUlkKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9yZGVyLmxpbmVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8g4pyFIERpc3BhdGNoIHN0b2NrICho4buXIHRy4bujIGNvbWJvIC0gc+G6vSBkaXNwYXRjaCBTUCBjb24pXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRJdGVtcyA9IHByb2Nlc3NMaW5lSXRlbVN0b2NrKGl0ZW0sIGdldEJyYW5jaElkKG9yZGVyKSwgJ2Rpc3BhdGNoJywgaXRlbS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIOKchSBBZGQgc3RvY2sgaGlzdG9yeSBlbnRyeSBmb3IgZWFjaCBwcm9jZXNzZWQgaXRlbVxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkSXRlbXMuZm9yRWFjaChwcm9jZXNzZWRJdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWN0ID0gdXNlUHJvZHVjdFN0b3JlLmdldFN0YXRlKCkuZmluZEJ5SWQocHJvY2Vzc2VkSXRlbS5wcm9kdWN0U3lzdGVtSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdG9jayA9IHByb2R1Y3Q/LmludmVudG9yeUJ5QnJhbmNoPy5bZ2V0QnJhbmNoSWQob3JkZXIpXSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZFN0b2NrSGlzdG9yeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IG5vdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdElkOiBwcm9jZXNzZWRJdGVtLnByb2R1Y3RTeXN0ZW1JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnWHXhuqV0IGtobyAoxJDGoW4gaMOgbmcpJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHlDaGFuZ2U6IC1wcm9jZXNzZWRJdGVtLnF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdG9ja0xldmVsOiBjdXJyZW50U3RvY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IG9yZGVyLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmFuY2hTeXN0ZW1JZDogZ2V0QnJhbmNoSWQob3JkZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmFuY2g6IG9yZGVyLmJyYW5jaE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtcGxveWVlTmFtZTogZW1wbG95ZWVEYXRhPy5mdWxsTmFtZSB8fCAnSOG7hyB0aOG7kW5nJyxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG5vdzIgPSB0b0lTT0RhdGVUaW1lKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcChwID0+IFxyXG4gICAgICAgICAgICAgICAgcC5zeXN0ZW1JZCA9PT0gcGFja2FnaW5nU3lzdGVtSWQgPyB7IC4uLnAsIGRlbGl2ZXJ5U3RhdHVzOiAnxJBhbmcgZ2lhbyBow6BuZycgYXMgT3JkZXJEZWxpdmVyeVN0YXR1cyB9IDogcFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0ge1xyXG4gICAgICAgICAgICAgICAgLi4ub3JkZXIsXHJcbiAgICAgICAgICAgICAgICBwYWNrYWdpbmdzOiB1cGRhdGVkUGFja2FnaW5ncyxcclxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiAnxJBhbmcgZ2lhbyBow6BuZycgYXMgT3JkZXJEZWxpdmVyeVN0YXR1cyxcclxuICAgICAgICAgICAgICAgIHN0b2NrT3V0U3RhdHVzOiAnWHXhuqV0IGtobyB0b8OgbiBi4buZJyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICAgIGRpc3BhdGNoZWREYXRlOiBub3cyLFxyXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hlZEJ5RW1wbG95ZWVJZDogZW1wbG95ZWVJZCxcclxuICAgICAgICAgICAgICAgIGRpc3BhdGNoZWRCeUVtcGxveWVlTmFtZTogZW1wbG95ZWVEYXRhPy5mdWxsTmFtZSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogb3JkZXIuc3RhdHVzID09PSAnxJDhurd0IGjDoG5nJyA/ICfEkGFuZyBnaWFvIGThu4tjaCcgOiBvcmRlci5zdGF0dXMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHN0YXRlLmRhdGEubWFwKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCA/IHVwZGF0ZWRPcmRlciA6IG8pIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNvbXBsZXRlRGVsaXZlcnk6IChvcmRlclN5c3RlbUlkOiBTeXN0ZW1JZCwgcGFja2FnaW5nU3lzdGVtSWQ6IFN5c3RlbUlkLCBlbXBsb3llZUlkOiBTeXN0ZW1JZCkgPT4ge1xyXG4gICAgICAgIGJhc2VTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZGF0YS5maW5kKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGlmICghb3JkZXIpIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOKchSBDb21wbGV0ZSBkZWxpdmVyeSAoaOG7lyB0cuG7oyBjb21ibyAtIHPhur0gY29tcGxldGUgU1AgY29uKVxyXG4gICAgICAgICAgICBvcmRlci5saW5lSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NMaW5lSXRlbVN0b2NrKGl0ZW0sIGdldEJyYW5jaElkKG9yZGVyKSwgJ2NvbXBsZXRlJywgaXRlbS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcChwID0+IFxyXG4gICAgICAgICAgICAgICAgcC5zeXN0ZW1JZCA9PT0gcGFja2FnaW5nU3lzdGVtSWQgPyB7IC4uLnAsIGRlbGl2ZXJ5U3RhdHVzOiAnxJDDoyBnaWFvIGjDoG5nJyBhcyBPcmRlckRlbGl2ZXJ5U3RhdHVzLCBkZWxpdmVyZWREYXRlOiB0b0lTT0RhdGVUaW1lKG5ldyBEYXRlKCkpIH0gOiBwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpc0FsbERlbGl2ZXJlZCA9IHVwZGF0ZWRQYWNrYWdpbmdzLmV2ZXJ5KHAgPT4gcC5zdGF0dXMgPT09ICdI4buneSDEkcOzbmcgZ8OzaScgfHwgcC5kZWxpdmVyeVN0YXR1cyA9PT0gJ8SQw6MgZ2lhbyBow6BuZycpO1xyXG4gICAgICAgICAgICBsZXQgbmV3U3RhdHVzID0gb3JkZXIuc3RhdHVzO1xyXG4gICAgICAgICAgICBsZXQgbmV3Q29tcGxldGVkRGF0ZSA9IG9yZGVyLmNvbXBsZXRlZERhdGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDinIUgS2hpIHThuqV0IGPhuqMgxJHGoW4gxJHDoyBnaWFvIOKGkiB04bqhbyBjw7RuZyBu4bujIChu4bq/dSBjw7MpIHbDoCBj4bqtcCBuaOG6rXQgc3RhdHNcclxuICAgICAgICAgICAgaWYgKGlzQWxsRGVsaXZlcmVkICYmIG9yZGVyLnN0YXR1cyAhPT0gJ0hvw6BuIHRow6BuaCcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFTDrW5oIGPDtG5nIG7hu6MgY8OybiBs4bqhaVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxQYWlkID0gKG9yZGVyLnBheW1lbnRzIHx8IFtdKS5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgcC5hbW91bnQsIDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVidEFtb3VudCA9IE1hdGgubWF4KDAsIG9yZGVyLmdyYW5kVG90YWwgLSB0b3RhbFBhaWQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDinIUgVOG6oW8gY8O0bmcgbuG7oyBDSOG7iCBLSEkgZ2lhbyBow6BuZyB0aMOgbmggY8O0bmdcclxuICAgICAgICAgICAgICAgIGlmIChkZWJ0QW1vdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYWRkRGVidFRyYW5zYWN0aW9uIH0gPSB1c2VDdXN0b21lclN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZHVlRGF0ZS5zZXREYXRlKGR1ZURhdGUuZ2V0RGF0ZSgpICsgMzApO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZERlYnRUcmFuc2FjdGlvbihvcmRlci5jdXN0b21lclN5c3RlbUlkLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUlkOiBhc1N5c3RlbUlkKGBERUJUXyR7b3JkZXIuc3lzdGVtSWR9YCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVySWQ6IG9yZGVyLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRhdGU6IG9yZGVyLm9yZGVyRGF0ZS5zcGxpdCgnVCcpWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGRlYnRBbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1ZURhdGU6IGR1ZURhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BhaWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdBbW91bnQ6IGRlYnRBbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzOiAnQ8O0bmcgbuG7oyB04burIMSRxqFuIGjDoG5nIMSRw6MgZ2lhbyB0aMOgbmggY8O0bmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY3VzdG9tZXIgc3RhdHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgaW5jcmVtZW50T3JkZXJTdGF0cyB9ID0gdXNlQ3VzdG9tZXJTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50T3JkZXJTdGF0cyhvcmRlci5jdXN0b21lclN5c3RlbUlkLCBvcmRlci5ncmFuZFRvdGFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb3JkZXIgaXMgZnVsbHkgY29tcGxldGUgKGRlbGl2ZXJlZCArIGZ1bGx5IHBhaWQpXHJcbiAgICAgICAgICAgIGlmIChpc0FsbERlbGl2ZXJlZCAmJiBvcmRlci5wYXltZW50U3RhdHVzID09PSAnVGhhbmggdG/DoW4gdG/DoG4gYuG7mScpIHtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXR1cyA9ICdIb8OgbiB0aMOgbmgnO1xyXG4gICAgICAgICAgICAgICAgbmV3Q29tcGxldGVkRGF0ZSA9IHRvSVNPRGF0ZVRpbWUobmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVtcGxveWVlID0gdXNlRW1wbG95ZWVTdG9yZS5nZXRTdGF0ZSgpLmZpbmRCeUlkKGVtcGxveWVlSWQgYXMgU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSB7IFxyXG4gICAgICAgICAgICAgICAgLi4ub3JkZXIsIFxyXG4gICAgICAgICAgICAgICAgcGFja2FnaW5nczogdXBkYXRlZFBhY2thZ2luZ3MsIFxyXG4gICAgICAgICAgICAgICAgZGVsaXZlcnlTdGF0dXM6ICfEkMOjIGdpYW8gaMOgbmcnIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXMsIFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBuZXdTdGF0dXMsIFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkRGF0ZTogbmV3Q29tcGxldGVkRGF0ZSxcclxuICAgICAgICAgICAgICAgIGFjdGl2aXR5SGlzdG9yeTogYXBwZW5kSGlzdG9yeUVudHJ5KFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLmFjdGl2aXR5SGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVIaXN0b3J5RW50cnkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0dXNfY2hhbmdlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEN1cnJlbnRVc2VySW5mbygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtlbXBsb3llZT8uZnVsbE5hbWUgfHwgJ05ow6JuIHZpw6puJ30gxJHDoyB4w6FjIG5o4bqtbiBnaWFvIGjDoG5nIHRow6BuaCBjw7RuZyR7bmV3U3RhdHVzID09PSAnSG/DoG4gdGjDoG5oJyA/ICcuIMSQxqFuIGjDoG5nIGhvw6BuIHRow6BuaCcgOiAnJ31gXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogc3RhdGUuZGF0YS5tYXAobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkID8gdXBkYXRlZE9yZGVyIDogbykgfTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgZmFpbERlbGl2ZXJ5OiAob3JkZXJTeXN0ZW1JZDogU3lzdGVtSWQsIHBhY2thZ2luZ1N5c3RlbUlkOiBTeXN0ZW1JZCwgZW1wbG95ZWVJZDogU3lzdGVtSWQsIHJlYXNvbjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgYmFzZVN0b3JlLnNldFN0YXRlKHN0YXRlID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5kYXRhLmZpbmQobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkKTtcclxuICAgICAgICAgICAgaWYgKCFvcmRlcikgcmV0dXJuIHN0YXRlO1xyXG4gICAgICAgICAgICBjb25zdCB7IGluY3JlbWVudEZhaWxlZERlbGl2ZXJ5U3RhdHMgfSA9IHVzZUN1c3RvbWVyU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOKchSBSZXR1cm4gc3RvY2sgZnJvbSB0cmFuc2l0ICho4buXIHRy4bujIGNvbWJvIC0gc+G6vSByZXR1cm4gU1AgY29uKVxyXG4gICAgICAgICAgICBvcmRlci5saW5lSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NMaW5lSXRlbVN0b2NrKGl0ZW0sIGdldEJyYW5jaElkKG9yZGVyKSwgJ3JldHVybicsIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOKchSBVcGRhdGUgY3VzdG9tZXIgZmFpbGVkIGRlbGl2ZXJ5IHN0YXRzXHJcbiAgICAgICAgICAgIGluY3JlbWVudEZhaWxlZERlbGl2ZXJ5U3RhdHMob3JkZXIuY3VzdG9tZXJTeXN0ZW1JZCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkUGFja2FnaW5ncyA9IG9yZGVyLnBhY2thZ2luZ3MubWFwKHAgPT4gXHJcbiAgICAgICAgICAgICAgICBwLnN5c3RlbUlkID09PSBwYWNrYWdpbmdTeXN0ZW1JZCA/IHsgLi4ucCwgZGVsaXZlcnlTdGF0dXM6ICdDaOG7nSBnaWFvIGzhuqFpJyBhcyBPcmRlckRlbGl2ZXJ5U3RhdHVzLCBub3RlczogYEdpYW8gdGjhuqV0IGLhuqFpOiAke3JlYXNvbn1gIH0gOiBwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSB7IC4uLm9yZGVyLCBwYWNrYWdpbmdzOiB1cGRhdGVkUGFja2FnaW5ncywgZGVsaXZlcnlTdGF0dXM6ICdDaOG7nSBnaWFvIGzhuqFpJyBhcyBPcmRlckRlbGl2ZXJ5U3RhdHVzIH07XHJcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHN0YXRlLmRhdGEubWFwKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCA/IHVwZGF0ZWRPcmRlciA6IG8pIH07XHJcbiAgICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDinIUgSOG7p3kgZ2lhbyBow6BuZyAtIEtIw5RORyB0cuG6oyBow6BuZyB24buBIGtobyAoaMOgbmcgYuG7iyB0aOG6pXQgdHVuZy9zaGlwcGVyIGdp4buvKVxyXG4gICAgY2FuY2VsRGVsaXZlcnlPbmx5OiAob3JkZXJTeXN0ZW1JZDogU3lzdGVtSWQsIHBhY2thZ2luZ1N5c3RlbUlkOiBTeXN0ZW1JZCwgZW1wbG95ZWVJZDogU3lzdGVtSWQsIHJlYXNvbjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudE9yZGVyID0gYmFzZVN0b3JlLmdldFN0YXRlKCkuZGF0YS5maW5kKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCk7XHJcbiAgICAgICAgaWYgKCFlbnN1cmVDYW5jZWxsYXRpb25BbGxvd2VkKGN1cnJlbnRPcmRlciwgJ2jhu6d5IGdpYW8gaMOgbmcnKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmRhdGEuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAoIW9yZGVyKSByZXR1cm4gc3RhdGU7XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgR2V0IGVtcGxveWVlIGluZm8gZm9yIGNhbmNlbGxlclxyXG4gICAgICAgICAgICBjb25zdCBlbXBsb3llZURhdGEgPSB1c2VFbXBsb3llZVN0b3JlLmdldFN0YXRlKCkuZmluZEJ5SWQoZW1wbG95ZWVJZCBhcyBTeXN0ZW1JZCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkUGFja2FnaW5ncyA9IG9yZGVyLnBhY2thZ2luZ3MubWFwKHAgPT4gXHJcbiAgICAgICAgICAgICAgICBwLnN5c3RlbUlkID09PSBwYWNrYWdpbmdTeXN0ZW1JZCA/IHsgXHJcbiAgICAgICAgICAgICAgICAgICAgLi4ucCwgXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnSOG7p3kgxJHDs25nIGfDs2knIGFzIFBhY2thZ2luZ1N0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBkZWxpdmVyeVN0YXR1czogJ8SQw6MgaOG7p3knIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVhc29uOiBgSOG7p3kgZ2lhbyBow6BuZzogJHtyZWFzb259YCwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsRGF0ZTogdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxpbmdFbXBsb3llZUlkOiBlbXBsb3llZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGluZ0VtcGxveWVlTmFtZTogZW1wbG95ZWVEYXRhPy5mdWxsTmFtZSB8fCAnSOG7hyB0aOG7kW5nJyxcclxuICAgICAgICAgICAgICAgIH0gOiBwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDinIUgQ2hlY2sgaWYgYWxsIHBhY2thZ2luZ3MgYXJlIGNhbmNlbGxlZCwgdXBkYXRlIG9yZGVyIHN0YXR1cyBhY2NvcmRpbmdseVxyXG4gICAgICAgICAgICBjb25zdCBhbGxDYW5jZWxsZWQgPSB1cGRhdGVkUGFja2FnaW5ncy5ldmVyeShwID0+IHAuZGVsaXZlcnlTdGF0dXMgPT09ICfEkMOjIGjhu6d5JyB8fCBwLnN0YXR1cyA9PT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0FueUFjdGl2ZSA9IHVwZGF0ZWRQYWNrYWdpbmdzLnNvbWUocCA9PiBwLmRlbGl2ZXJ5U3RhdHVzICYmIHAuZGVsaXZlcnlTdGF0dXMgIT09ICfEkMOjIGjhu6d5JyAmJiBwLnN0YXR1cyAhPT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgbmV3T3JkZXJTdGF0dXMgPSBvcmRlci5zdGF0dXM7XHJcbiAgICAgICAgICAgIGxldCBuZXdEZWxpdmVyeVN0YXR1cyA9IG9yZGVyLmRlbGl2ZXJ5U3RhdHVzO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGFsbENhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxsIHBhY2thZ2luZ3MgY2FuY2VsbGVkIOKGkiBvcmRlciBnb2VzIGJhY2sgdG8gcGVuZGluZyBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgbmV3T3JkZXJTdGF0dXMgPSAnxJBhbmcgZ2lhbyBk4buLY2gnIGFzIE9yZGVyTWFpblN0YXR1cztcclxuICAgICAgICAgICAgICAgIG5ld0RlbGl2ZXJ5U3RhdHVzID0gJ0NoxrBhIGdpYW8gaMOgbmcnIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXM7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQW55QWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIHBhY2thZ2luZ3Mgc3RpbGwgYWN0aXZlIOKGkiBrZWVwIGN1cnJlbnQgZGVsaXZlcnkgc3RhdHVzIG9mIHJlbWFpbmluZyBhY3RpdmUgcGFja2FnaW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVQYWNrYWdpbmcgPSB1cGRhdGVkUGFja2FnaW5ncy5maW5kKHAgPT4gcC5kZWxpdmVyeVN0YXR1cyAmJiBwLmRlbGl2ZXJ5U3RhdHVzICE9PSAnxJDDoyBo4buneScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVBhY2thZ2luZz8uZGVsaXZlcnlTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEZWxpdmVyeVN0YXR1cyA9IGFjdGl2ZVBhY2thZ2luZy5kZWxpdmVyeVN0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0geyBcclxuICAgICAgICAgICAgICAgIC4uLm9yZGVyLCBcclxuICAgICAgICAgICAgICAgIHBhY2thZ2luZ3M6IHVwZGF0ZWRQYWNrYWdpbmdzLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBuZXdPcmRlclN0YXR1cyxcclxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiBuZXdEZWxpdmVyeVN0YXR1c1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBzdGF0ZS5kYXRhLm1hcChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQgPyB1cGRhdGVkT3JkZXIgOiBvKSB9O1xyXG4gICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8g4pyFIEjhu6d5IGdpYW8gdsOgIG5o4bqtbiBs4bqhaSBow6BuZyAtIFRS4bqiIGjDoG5nIHbhu4Ega2hvICjEkcOjIG5o4bqtbiBs4bqhaSB04burIHNoaXBwZXIpXHJcbiAgICBjYW5jZWxEZWxpdmVyeTogKG9yZGVyU3lzdGVtSWQ6IFN5c3RlbUlkLCBwYWNrYWdpbmdTeXN0ZW1JZDogU3lzdGVtSWQsIGVtcGxveWVlSWQ6IFN5c3RlbUlkLCByZWFzb246IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRPcmRlciA9IGJhc2VTdG9yZS5nZXRTdGF0ZSgpLmRhdGEuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgIGlmICghZW5zdXJlQ2FuY2VsbGF0aW9uQWxsb3dlZChjdXJyZW50T3JkZXIsICdo4buneSBnaWFvIGjDoG5nJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgIGJhc2VTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZGF0YS5maW5kKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCk7XHJcbiAgICAgICAgICAgIGlmICghb3JkZXIpIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOKchSBUUuG6oiBow6BuZyB04burIFwixJFhbmcgZ2lhb1wiIHbhu4EgXCJ04buTbiBraG9cIiAoaOG7lyB0cuG7oyBjb21ibyAtIHPhur0gcmV0dXJuIFNQIGNvbilcclxuICAgICAgICAgICAgb3JkZXIubGluZUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzTGluZUl0ZW1TdG9jayhpdGVtLCBnZXRCcmFuY2hJZChvcmRlciksICdyZXR1cm4nLCBpdGVtLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDinIUgR2V0IGVtcGxveWVlIGluZm8gZm9yIGNhbmNlbGxlclxyXG4gICAgICAgICAgICBjb25zdCBlbXBsb3llZURhdGEgPSB1c2VFbXBsb3llZVN0b3JlLmdldFN0YXRlKCkuZmluZEJ5SWQoZW1wbG95ZWVJZCBhcyBTeXN0ZW1JZCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkUGFja2FnaW5ncyA9IG9yZGVyLnBhY2thZ2luZ3MubWFwKHAgPT4gXHJcbiAgICAgICAgICAgICAgICBwLnN5c3RlbUlkID09PSBwYWNrYWdpbmdTeXN0ZW1JZCA/IHsgXHJcbiAgICAgICAgICAgICAgICAgICAgLi4ucCwgXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnSOG7p3kgxJHDs25nIGfDs2knIGFzIFBhY2thZ2luZ1N0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBkZWxpdmVyeVN0YXR1czogJ8SQw6MgaOG7p3knIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVhc29uOiBgSOG7p3kgZ2lhbyBow6BuZzogJHtyZWFzb259YCwgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsRGF0ZTogdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxpbmdFbXBsb3llZUlkOiBlbXBsb3llZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGluZ0VtcGxveWVlTmFtZTogZW1wbG95ZWVEYXRhPy5mdWxsTmFtZSB8fCAnSOG7hyB0aOG7kW5nJyxcclxuICAgICAgICAgICAgICAgIH0gOiBwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDinIUgQ2hlY2sgaWYgYWxsIHBhY2thZ2luZ3MgYXJlIGNhbmNlbGxlZCwgdXBkYXRlIG9yZGVyIHN0YXR1cyBhY2NvcmRpbmdseVxyXG4gICAgICAgICAgICBjb25zdCBhbGxDYW5jZWxsZWQgPSB1cGRhdGVkUGFja2FnaW5ncy5ldmVyeShwID0+IHAuZGVsaXZlcnlTdGF0dXMgPT09ICfEkMOjIGjhu6d5JyB8fCBwLnN0YXR1cyA9PT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0FueUFjdGl2ZSA9IHVwZGF0ZWRQYWNrYWdpbmdzLnNvbWUocCA9PiBwLmRlbGl2ZXJ5U3RhdHVzICYmIHAuZGVsaXZlcnlTdGF0dXMgIT09ICfEkMOjIGjhu6d5JyAmJiBwLnN0YXR1cyAhPT0gJ0jhu6d5IMSRw7NuZyBnw7NpJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgbmV3T3JkZXJTdGF0dXMgPSBvcmRlci5zdGF0dXM7XHJcbiAgICAgICAgICAgIGxldCBuZXdEZWxpdmVyeVN0YXR1cyA9IG9yZGVyLmRlbGl2ZXJ5U3RhdHVzO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGFsbENhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxsIHBhY2thZ2luZ3MgY2FuY2VsbGVkIOKGkiBvcmRlciBnb2VzIGJhY2sgdG8gcGVuZGluZyBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgbmV3T3JkZXJTdGF0dXMgPSAnxJBhbmcgZ2lhbyBk4buLY2gnIGFzIE9yZGVyTWFpblN0YXR1cztcclxuICAgICAgICAgICAgICAgIG5ld0RlbGl2ZXJ5U3RhdHVzID0gJ0NoxrBhIGdpYW8gaMOgbmcnIGFzIE9yZGVyRGVsaXZlcnlTdGF0dXM7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQW55QWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIHBhY2thZ2luZ3Mgc3RpbGwgYWN0aXZlIOKGkiBrZWVwIGN1cnJlbnQgZGVsaXZlcnkgc3RhdHVzIG9mIHJlbWFpbmluZyBhY3RpdmUgcGFja2FnaW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVQYWNrYWdpbmcgPSB1cGRhdGVkUGFja2FnaW5ncy5maW5kKHAgPT4gcC5kZWxpdmVyeVN0YXR1cyAmJiBwLmRlbGl2ZXJ5U3RhdHVzICE9PSAnxJDDoyBo4buneScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVBhY2thZ2luZz8uZGVsaXZlcnlTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEZWxpdmVyeVN0YXR1cyA9IGFjdGl2ZVBhY2thZ2luZy5kZWxpdmVyeVN0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0geyBcclxuICAgICAgICAgICAgICAgIC4uLm9yZGVyLCBcclxuICAgICAgICAgICAgICAgIHBhY2thZ2luZ3M6IHVwZGF0ZWRQYWNrYWdpbmdzLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBuZXdPcmRlclN0YXR1cyxcclxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiBuZXdEZWxpdmVyeVN0YXR1c1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBzdGF0ZS5kYXRhLm1hcChvID0+IG8uc3lzdGVtSWQgPT09IG9yZGVyU3lzdGVtSWQgPyB1cGRhdGVkT3JkZXIgOiBvKSB9O1xyXG4gICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgY29uZmlybUNvZFJlY29uY2lsaWF0aW9uOiAoc2hpcG1lbnRzOiAoUGFja2FnaW5nICYgeyBvcmRlclN5c3RlbUlkOiBTeXN0ZW1JZCB9KVtdLCBlbXBsb3llZUlkOiBTeXN0ZW1JZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgYWRkOiBhZGRSZWNlaXB0IH0gPSB1c2VSZWNlaXB0U3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICBjb25zdCB7IGFjY291bnRzIH0gPSB1c2VDYXNoYm9va1N0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiByZWNlaXB0VHlwZXMgfSA9IHVzZVJlY2VpcHRUeXBlU3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICBjb25zdCBlbXBsb3llZSA9IHVzZUVtcGxveWVlU3RvcmUuZ2V0U3RhdGUoKS5maW5kQnlJZChlbXBsb3llZUlkIGFzIFN5c3RlbUlkKTtcclxuICAgICAgICBjb25zdCBhbGxPcmRlcnMgPSBiYXNlU3RvcmUuZ2V0U3RhdGUoKS5kYXRhO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgdG90YWxCeVBhcnRuZXJBbmRCcmFuY2g6IFJlY29yZDxzdHJpbmcsIHsgdG90YWw6IG51bWJlcjsgaWRzOiBzdHJpbmdbXTsgYnJhbmNoU3lzdGVtSWQ6IHN0cmluZzsgYnJhbmNoTmFtZTogc3RyaW5nOyBwYXJ0bmVyTmFtZTogc3RyaW5nOyBzaGlwbWVudFN5c3RlbUlkczogc3RyaW5nW10gfT4gPSB7fTtcclxuICAgIFxyXG4gICAgICAgIHNoaXBtZW50cy5mb3JFYWNoKHNoaXBtZW50ID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBhbGxPcmRlcnMuZmluZChvID0+IG8uc3lzdGVtSWQgPT09IHNoaXBtZW50Lm9yZGVyU3lzdGVtSWQpO1xyXG4gICAgICAgICAgICBpZiAoIW9yZGVyIHx8ICFzaGlwbWVudC5jYXJyaWVyKSByZXR1cm47XHJcbiAgICBcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7c2hpcG1lbnQuY2Fycmllcn0tJHtnZXRCcmFuY2hJZChvcmRlcil9YDtcclxuICAgICAgICAgICAgaWYgKCF0b3RhbEJ5UGFydG5lckFuZEJyYW5jaFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEJ5UGFydG5lckFuZEJyYW5jaFtrZXldID0geyB0b3RhbDogMCwgaWRzOiBbXSwgYnJhbmNoU3lzdGVtSWQ6IGdldEJyYW5jaElkKG9yZGVyKSwgYnJhbmNoTmFtZTogb3JkZXIuYnJhbmNoTmFtZSwgcGFydG5lck5hbWU6IHNoaXBtZW50LmNhcnJpZXIsIHNoaXBtZW50U3lzdGVtSWRzOiBbXSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRvdGFsQnlQYXJ0bmVyQW5kQnJhbmNoW2tleV0udG90YWwgKz0gc2hpcG1lbnQuY29kQW1vdW50IHx8IDA7XHJcbiAgICAgICAgICAgIHRvdGFsQnlQYXJ0bmVyQW5kQnJhbmNoW2tleV0uaWRzLnB1c2goc2hpcG1lbnQudHJhY2tpbmdDb2RlIHx8IHNoaXBtZW50LmlkKTtcclxuICAgICAgICAgICAgdG90YWxCeVBhcnRuZXJBbmRCcmFuY2hba2V5XS5zaGlwbWVudFN5c3RlbUlkcy5wdXNoKHNoaXBtZW50LnN5c3RlbUlkKTtcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRSZWNlaXB0czogKGFueSAmIHsgc2hpcG1lbnRTeXN0ZW1JZHM6IHN0cmluZ1tdIH0pW10gPSBbXTtcclxuICAgIFxyXG4gICAgICAgIE9iamVjdC52YWx1ZXModG90YWxCeVBhcnRuZXJBbmRCcmFuY2gpLmZvckVhY2goZ3JvdXAgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYWNjb3VudHMuZmluZChhY2MgPT4gYWNjLnR5cGUgPT09ICdiYW5rJyAmJiBhY2MuYnJhbmNoU3lzdGVtSWQgPT09IGdyb3VwLmJyYW5jaFN5c3RlbUlkKSB8fCBhY2NvdW50cy5maW5kKGFjYyA9PiBhY2MudHlwZSA9PT0gJ2JhbmsnKTtcclxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSByZWNlaXB0VHlwZXMuZmluZChjID0+IGMuaWQgPT09ICdET0lTT0FUQ09EJyk7XHJcbiAgICAgICAgICAgIGlmIChhY2NvdW50ICYmIGNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSZWNlaXB0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGdyb3VwLnRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBheWVyVHlwZTogJ8SQ4buRaSB0w6FjIHbhuq1uIGNodXnhu4NuJyxcclxuICAgICAgICAgICAgICAgICAgICBwYXllck5hbWU6IGdyb3VwLnBhcnRuZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgxJDhu5FpIHNvw6F0IENPRCBjaG8gY8OhYyB24bqtbiDEkcahbjogJHtncm91cC5pZHMuam9pbignLCAnKX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q6ICdDaHV54buDbiBraG/huqNuJyxcclxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50U3lzdGVtSWQ6IGFjY291bnQuc3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxEb2N1bWVudElkOiBncm91cC5pZHMuam9pbignLCAnKSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQnk6IGVtcGxveWVlPy5mdWxsTmFtZSB8fCAnTi9BJyxcclxuICAgICAgICAgICAgICAgICAgICBicmFuY2hTeXN0ZW1JZDogZ3JvdXAuYnJhbmNoU3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnJhbmNoTmFtZTogZ3JvdXAuYnJhbmNoTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXltZW50UmVjZWlwdFR5cGVTeXN0ZW1JZDogY2F0ZWdvcnkuc3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudFJlY2VpcHRUeXBlTmFtZTogY2F0ZWdvcnkubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IHRvSVNPRGF0ZVRpbWUobmV3IERhdGUoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgYWZmZWN0c0RlYnQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JlY2VpcHQgPSBhZGRSZWNlaXB0KG5ld1JlY2VpcHREYXRhIGFzIGFueSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3UmVjZWlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRSZWNlaXB0cy5wdXNoKHsgLi4ubmV3UmVjZWlwdCwgc2hpcG1lbnRTeXN0ZW1JZHM6IGdyb3VwLnNoaXBtZW50U3lzdGVtSWRzIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gbmV3IE1hcDxzdHJpbmcsIHsgbmV3UGF5bWVudHM6IE9yZGVyUGF5bWVudFtdOyByZWNvbmNpbGVkU2hpcG1lbnRJZHM6IHN0cmluZ1tdIH0+KCk7XHJcbiAgICBcclxuICAgICAgICAgICAgc2hpcG1lbnRzLmZvckVhY2goc2hpcG1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjZWlwdEZvclNoaXBtZW50ID0gY3JlYXRlZFJlY2VpcHRzLmZpbmQodiA9PiB2LnNoaXBtZW50U3lzdGVtSWRzLmluY2x1ZGVzKHNoaXBtZW50LnN5c3RlbUlkKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlY2VpcHRGb3JTaGlwbWVudCB8fCAhc2hpcG1lbnQuY29kQW1vdW50IHx8IHNoaXBtZW50LmNvZEFtb3VudCA8PSAwKSByZXR1cm47XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyU3lzdGVtSWQgPSBzaGlwbWVudC5vcmRlclN5c3RlbUlkO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JkZXJVcGRhdGVzID0gdXBkYXRlcy5nZXQob3JkZXJTeXN0ZW1JZCkgfHwgeyBuZXdQYXltZW50czogW10sIHJlY29uY2lsZWRTaGlwbWVudElkczogW10gfTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UGF5bWVudDogT3JkZXJQYXltZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbUlkOiByZWNlaXB0Rm9yU2hpcG1lbnQuc3lzdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlY2VpcHRGb3JTaGlwbWVudC5pZCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiByZWNlaXB0Rm9yU2hpcG1lbnQuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICfEkOG7kWkgc2/DoXQgQ09EJyxcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHNoaXBtZW50LmNvZEFtb3VudCB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRCeTogYXNTeXN0ZW1JZCgnU1lTVEVNJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGBUaGFuaCB0b8OhbiBDT0QgY2hvIHbhuq1uIMSRxqFuICR7c2hpcG1lbnQudHJhY2tpbmdDb2RlIHx8IHNoaXBtZW50LmlkfWAsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgb3JkZXJVcGRhdGVzLm5ld1BheW1lbnRzLnB1c2gobmV3UGF5bWVudCk7XHJcbiAgICAgICAgICAgICAgICBvcmRlclVwZGF0ZXMucmVjb25jaWxlZFNoaXBtZW50SWRzLnB1c2goc2hpcG1lbnQuc3lzdGVtSWQpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlcy5zZXQob3JkZXJTeXN0ZW1JZCwgb3JkZXJVcGRhdGVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZXMuc2l6ZSA9PT0gMCkgcmV0dXJuIHN0YXRlO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0RhdGEgPSBzdGF0ZS5kYXRhLm1hcChvcmRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlcy5oYXMob3JkZXIuc3lzdGVtSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JkZXJVcGRhdGVzID0gdXBkYXRlcy5nZXQob3JkZXIuc3lzdGVtSWQpITtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXBkYXRlZE9yZGVyID0geyAuLi5vcmRlciB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkT3JkZXIucGFja2FnaW5ncyA9IHVwZGF0ZWRPcmRlci5wYWNrYWdpbmdzLm1hcChwID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyVXBkYXRlcy5yZWNvbmNpbGVkU2hpcG1lbnRJZHMuaW5jbHVkZXMocC5zeXN0ZW1JZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8geyAuLi5wLCByZWNvbmNpbGlhdGlvblN0YXR1czogJ8SQw6MgxJHhu5FpIHNvw6F0JyBhcyBjb25zdCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBheW1lbnQgb2Ygb3JkZXJVcGRhdGVzLm5ld1BheW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRPcmRlciA9IGFwcGx5UGF5bWVudFRvT3JkZXIodXBkYXRlZE9yZGVyLCBwYXltZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZE9yZGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVyO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBuZXdEYXRhIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAvLyBHSFRLIElOVEVHUkFUSU9OIE1FVEhPRFNcclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIEdIVEsgd2ViaG9vayB1cGRhdGVcclxuICAgICAqIENhbGxlZCB3aGVuIEdIVEsgcHVzaGVzIHN0YXR1cyB1cGRhdGUgb3IgZnJvbSB0cmFja2luZyBBUElcclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0dIVEtXZWJob29rOiAod2ViaG9va0RhdGE6IGltcG9ydCgnLi90eXBlcycpLkdIVEtXZWJob29rUGF5bG9hZCkgPT4ge1xyXG4gICAgICAgIGJhc2VTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEZpbmQgb3JkZXIgYnkgdHJhY2tpbmcgY29kZSBvciBwYXJ0bmVyX2lkXHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZGF0YS5maW5kKG8gPT4gXHJcbiAgICAgICAgICAgICAgICBvLnBhY2thZ2luZ3Muc29tZShwID0+IFxyXG4gICAgICAgICAgICAgICAgICAgIHAudHJhY2tpbmdDb2RlID09PSB3ZWJob29rRGF0YS5sYWJlbF9pZCB8fCBcclxuICAgICAgICAgICAgICAgICAgICBwLnN5c3RlbUlkID09PSB3ZWJob29rRGF0YS5wYXJ0bmVyX2lkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgby5zeXN0ZW1JZCA9PT0gd2ViaG9va0RhdGEucGFydG5lcl9pZFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFvcmRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbR0hUSyBXZWJob29rXSBPcmRlciBub3QgZm91bmQgZm9yOicsIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbF9pZDogd2ViaG9va0RhdGEubGFiZWxfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydG5lcl9pZDogd2ViaG9va0RhdGEucGFydG5lcl9pZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEltcG9ydCBzdGF0dXMgbWFwcGluZ1xyXG4gICAgICAgICAgICBjb25zdCB7IGdldEdIVEtTdGF0dXNJbmZvLCBnZXRHSFRLUmVhc29uVGV4dCB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2dodGstY29uc3RhbnRzJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBzdGF0dXNNYXBwaW5nID0gZ2V0R0hUS1N0YXR1c0luZm8od2ViaG9va0RhdGEuc3RhdHVzX2lkKTtcclxuICAgICAgICAgICAgaWYgKCFzdGF0dXNNYXBwaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tHSFRLIFdlYmhvb2tdIFVua25vd24gc3RhdHVzOicsIHdlYmhvb2tEYXRhLnN0YXR1c19pZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbR0hUSyBXZWJob29rXSBQcm9jZXNzaW5nIHVwZGF0ZTonLCB7XHJcbiAgICAgICAgICAgICAgICBvcmRlcjogb3JkZXIuaWQsXHJcbiAgICAgICAgICAgICAgICB0cmFja2luZ0NvZGU6IHdlYmhvb2tEYXRhLmxhYmVsX2lkLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzSWQ6IHdlYmhvb2tEYXRhLnN0YXR1c19pZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHN0YXR1c01hcHBpbmcuc3RhdHVzVGV4dCxcclxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiBzdGF0dXNNYXBwaW5nLmRlbGl2ZXJ5U3RhdHVzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBhY2thZ2luZyB3aXRoIG5ldyBzdGF0dXNcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcChwID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwLnRyYWNraW5nQ29kZSAhPT0gd2ViaG9va0RhdGEubGFiZWxfaWQgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgcC5zeXN0ZW1JZCAhPT0gd2ViaG9va0RhdGEucGFydG5lcl9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsaXZlcnlTdGF0dXM6IHN0YXR1c01hcHBpbmcuZGVsaXZlcnlTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydG5lclN0YXR1czogc3RhdHVzTWFwcGluZy5zdGF0dXNUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGdodGtTdGF0dXNJZDogd2ViaG9va0RhdGEuc3RhdHVzX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgIGdodGtSZWFzb25Db2RlOiB3ZWJob29rRGF0YS5yZWFzb25fY29kZSxcclxuICAgICAgICAgICAgICAgICAgICBnaHRrUmVhc29uVGV4dDogd2ViaG9va0RhdGEucmVhc29uIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHdlYmhvb2tEYXRhLnJlYXNvbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiAod2ViaG9va0RhdGEucmVhc29uX2NvZGUgPyBnZXRHSFRLUmVhc29uVGV4dCh3ZWJob29rRGF0YS5yZWFzb25fY29kZSkgOiB1bmRlZmluZWQpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbFdlaWdodDogd2ViaG9va0RhdGEud2VpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbEZlZTogd2ViaG9va0RhdGEuZmVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RTeW5jZWRBdDogdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmVjb25jaWxpYXRpb24gc3RhdHVzIGlmIHN0YXR1cyA9IDYgKMSQw6MgxJHhu5FpIHNvw6F0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJlY29uY2lsaWF0aW9uU3RhdHVzOiB3ZWJob29rRGF0YS5zdGF0dXNfaWQgPT09IDYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ8SQw6MgxJHhu5FpIHNvw6F0JyBhcyBjb25zdCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBwLnJlY29uY2lsaWF0aW9uU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBkZWxpdmVyZWQgZGF0ZSBpZiBzdGF0dXMgPSA1IG9yIDZcclxuICAgICAgICAgICAgICAgICAgICBkZWxpdmVyZWREYXRlOiBbNSwgNl0uaW5jbHVkZXMod2ViaG9va0RhdGEuc3RhdHVzX2lkKSAmJiAhcC5kZWxpdmVyZWREYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHAuZGVsaXZlcmVkRGF0ZSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSGFuZGxlIHN0b2NrIHVwZGF0ZXMgYmFzZWQgb24gc3RhdHVzXHJcbiAgICAgICAgICAgIGlmIChzdGF0dXNNYXBwaW5nLnNob3VsZFVwZGF0ZVN0b2NrICYmIHN0YXR1c01hcHBpbmcuc3RvY2tBY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGlzcGF0Y2hTdG9jaywgY29tcGxldGVEZWxpdmVyeTogcHJvZHVjdENvbXBsZXRlRGVsaXZlcnksIHJldHVyblN0b2NrRnJvbVRyYW5zaXQgfSA9IHVzZVByb2R1Y3RTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBpbmNyZW1lbnRGYWlsZWREZWxpdmVyeVN0YXRzIH0gPSB1c2VDdXN0b21lclN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIOKchSBFeHBhbmQgY29tYm8gaXRlbXMgdG8gY2hpbGQgcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b2NrSXRlbXMgPSBnZXRDb21ib1N0b2NrSXRlbXMob3JkZXIubGluZUl0ZW1zKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc3RvY2tJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzTWFwcGluZy5zdG9ja0FjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXNwYXRjaCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGF0dXMgMzogxJDDoyBs4bqleSBow6BuZyAtPiBNb3ZlIHRvIHRyYW5zaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoU3RvY2soaXRlbS5wcm9kdWN0U3lzdGVtSWQsIGFzU3lzdGVtSWQoZ2V0QnJhbmNoSWQob3JkZXIpKSwgaXRlbS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29tcGxldGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhdHVzIDU6IMSQw6MgZ2lhbyBow6BuZyAtPiBDb21wbGV0ZSBkZWxpdmVyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdENvbXBsZXRlRGVsaXZlcnkoaXRlbS5wcm9kdWN0U3lzdGVtSWQsIGFzU3lzdGVtSWQoZ2V0QnJhbmNoSWQob3JkZXIpKSwgaXRlbS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmV0dXJuJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YXR1cyAtMSwgNywgOSwgMTMsIDIwOiBGYWlsZWQvUmV0dXJuZWQgLT4gUmV0dXJuIHN0b2NrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5TdG9ja0Zyb21UcmFuc2l0KGl0ZW0ucHJvZHVjdFN5c3RlbUlkLCBhc1N5c3RlbUlkKGdldEJyYW5jaElkKG9yZGVyKSksIGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIOKchSBJbmNyZW1lbnQgZmFpbGVkIGRlbGl2ZXJ5IHN0YXRzIGZvciBjdXN0b21lciBpZiByZXR1cm4gKG1vdmVkIG91dHNpZGUgbG9vcClcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXNNYXBwaW5nLnN0b2NrQWN0aW9uID09PSAncmV0dXJuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhaWx1cmVTdGF0dXNlcyA9IFs3LCA5LCAxMywgMjAsIDIxXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFja2FnaW5nID0gb3JkZXIucGFja2FnaW5ncy5maW5kKHAgPT4gcC50cmFja2luZ0NvZGUgPT09IHdlYmhvb2tEYXRhLmxhYmVsX2lkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1N0YXR1c0lkID0gY3VycmVudFBhY2thZ2luZz8uZ2h0a1N0YXR1c0lkO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlU3RhdHVzZXMuaW5jbHVkZXMod2ViaG9va0RhdGEuc3RhdHVzX2lkKSAmJiAoIXByZXZpb3VzU3RhdHVzSWQgfHwgIWZhaWx1cmVTdGF0dXNlcy5pbmNsdWRlcyhwcmV2aW91c1N0YXR1c0lkKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50RmFpbGVkRGVsaXZlcnlTdGF0cyhvcmRlci5jdXN0b21lclN5c3RlbUlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbR0hUSyBXZWJob29rXSBTdG9jayB1cGRhdGVkOicsIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHN0YXR1c01hcHBpbmcuc3RvY2tBY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHN0b2NrSXRlbXMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIG9yZGVyLWxldmVsIGRlbGl2ZXJ5IHN0YXR1c1xyXG4gICAgICAgICAgICBjb25zdCBhbGxQYWNrYWdpbmdzRGVsaXZlcmVkID0gdXBkYXRlZFBhY2thZ2luZ3MuZXZlcnkocCA9PiBcclxuICAgICAgICAgICAgICAgIHAuc3RhdHVzID09PSAnSOG7p3kgxJHDs25nIGfDs2knIHx8IFxyXG4gICAgICAgICAgICAgICAgcC5kZWxpdmVyeVN0YXR1cyA9PT0gJ8SQw6MgZ2lhbyBow6BuZydcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBuZXdPcmRlckRlbGl2ZXJ5U3RhdHVzID0gb3JkZXIuZGVsaXZlcnlTdGF0dXM7XHJcbiAgICAgICAgICAgIGxldCBuZXdPcmRlclN0YXR1cyA9IG9yZGVyLnN0YXR1cztcclxuICAgICAgICAgICAgbGV0IG5ld0NvbXBsZXRlZERhdGUgPSBvcmRlci5jb21wbGV0ZWREYXRlO1xyXG4gICAgICAgICAgICBsZXQgbmV3U3RvY2tPdXRTdGF0dXMgPSBvcmRlci5zdG9ja091dFN0YXR1cztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBvcmRlciBkZWxpdmVyeSBzdGF0dXNcclxuICAgICAgICAgICAgaWYgKGFsbFBhY2thZ2luZ3NEZWxpdmVyZWQpIHtcclxuICAgICAgICAgICAgICAgIG5ld09yZGVyRGVsaXZlcnlTdGF0dXMgPSAnxJDDoyBnaWFvIGjDoG5nJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQXV0by1jb21wbGV0ZSBvcmRlciBpZiBkZWxpdmVyZWQgKyBwYWlkXHJcbiAgICAgICAgICAgICAgICBpZiAob3JkZXIucGF5bWVudFN0YXR1cyA9PT0gJ1RoYW5oIHRvw6FuIHRvw6BuIGLhu5knICYmIG9yZGVyLnN0YXR1cyAhPT0gJ0hvw6BuIHRow6BuaCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdPcmRlclN0YXR1cyA9ICdIb8OgbiB0aMOgbmgnO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbXBsZXRlZERhdGUgPSB0b0lTT0RhdGVUaW1lKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXN0b21lciBzdGF0c1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgaW5jcmVtZW50T3JkZXJTdGF0cyB9ID0gdXNlQ3VzdG9tZXJTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudE9yZGVyU3RhdHMob3JkZXIuY3VzdG9tZXJTeXN0ZW1JZCwgb3JkZXIuZ3JhbmRUb3RhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tHSFRLIFdlYmhvb2tdIE9yZGVyIGNvbXBsZXRlZDonLCBvcmRlci5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzTWFwcGluZy5zdGF0dXNJZCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgLy8gU3RhdHVzIDM6IMSQw6MgbOG6pXkgaMOgbmdcclxuICAgICAgICAgICAgICAgIG5ld09yZGVyRGVsaXZlcnlTdGF0dXMgPSAnxJBhbmcgZ2lhbyBow6BuZyc7XHJcbiAgICAgICAgICAgICAgICBuZXdTdG9ja091dFN0YXR1cyA9ICdYdeG6pXQga2hvIHRvw6BuIGLhu5knO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFs0LCAxMF0uaW5jbHVkZXMoc3RhdHVzTWFwcGluZy5zdGF0dXNJZCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFN0YXR1cyA0LCAxMDogxJBhbmcgZ2lhb1xyXG4gICAgICAgICAgICAgICAgbmV3T3JkZXJEZWxpdmVyeVN0YXR1cyA9ICfEkGFuZyBnaWFvIGjDoG5nJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0ge1xyXG4gICAgICAgICAgICAgICAgLi4ub3JkZXIsXHJcbiAgICAgICAgICAgICAgICBwYWNrYWdpbmdzOiB1cGRhdGVkUGFja2FnaW5ncyxcclxuICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiBuZXdPcmRlckRlbGl2ZXJ5U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBuZXdPcmRlclN0YXR1cyxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZERhdGU6IG5ld0NvbXBsZXRlZERhdGUsXHJcbiAgICAgICAgICAgICAgICBzdG9ja091dFN0YXR1czogbmV3U3RvY2tPdXRTdGF0dXMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogc3RhdGUuZGF0YS5tYXAobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlci5zeXN0ZW1JZCA/IHVwZGF0ZWRPcmRlciA6IG8pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VsIEdIVEsgc2hpcG1lbnRcclxuICAgICAqIOKaoO+4jyBDaOG7iSBo4buneSDEkcaw4bujYyBraGkgxJHGoW4g4bufIHRy4bqhbmcgdGjDoWk6IDEsIDIsIDEyIChDaMawYSB0aeG6v3Agbmjhuq1uLCDEkMOjIHRp4bq/cCBuaOG6rW4sIMSQYW5nIGzhuqV5IGjDoG5nKVxyXG4gICAgICovXHJcbiAgICBjYW5jZWxHSFRLU2hpcG1lbnQ6IGFzeW5jIChvcmRlclN5c3RlbUlkOiBTeXN0ZW1JZCwgcGFja2FnaW5nU3lzdGVtSWQ6IFN5c3RlbUlkLCB0cmFja2luZ0NvZGU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbR0hUS10gQ2FuY2VsbGluZyBzaGlwbWVudDonLCB0cmFja2luZ0NvZGUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g4pyFIEzhuqV5IGNyZWRlbnRpYWxzIHThu6sgc2hpcHBpbmdfcGFydG5lcnNfY29uZmlnXHJcbiAgICAgICAgICAgIGNvbnN0IHsgZ2V0R0hUS0NyZWRlbnRpYWxzIH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uL2xpYi91dGlscy9nZXQtc2hpcHBpbmctY3JlZGVudGlhbHMnKTtcclxuICAgICAgICAgICAgbGV0IGNyZWRlbnRpYWxzO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzID0gZ2V0R0hUS0NyZWRlbnRpYWxzKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnQ2jGsGEgY+G6pXUgaMOsbmggR0hUSy4gVnVpIGzDsm5nIHbDoG8gQ8OgaSDEkeG6t3Qg4oaSIMSQ4buRaSB0w6FjIHbhuq1uIGNodXnhu4NuLidcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZ2V0QXBpVXJsKCcvc2hpcHBpbmcvZ2h0ay9jYW5jZWwtb3JkZXInKSwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tpbmdDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwaVRva2VuOiBjcmVkZW50aWFscy5hcGlUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0bmVyQ29kZTogY3JlZGVudGlhbHMucGFydG5lckNvZGUsXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g4pyFIEtp4buDbSB0cmEgcmVzcG9uc2UgdOG7qyBHSFRLXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgZGF0YS5lcnJvciB8fCAnRmFpbGVkIHRvIGNhbmNlbCBHSFRLIHNoaXBtZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOKchSBHSFRLIHRy4bqjIHN1Y2Nlc3M6IGZhbHNlIGtoaSBraMO0bmcgdGjhu4MgaOG7p3kgKMSRw6MgbOG6pXkgaMOgbmcpXHJcbiAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0dIVEtdIENhbm5vdCBjYW5jZWw6JywgZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgfHwgJ0tow7RuZyB0aOG7gyBo4buneSDEkcahbiBow6BuZycgXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0dIVEtdIENhbmNlbGxhdGlvbiBzdWNjZXNzZnVsOicsIGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDinIUgQ0jhu4ggdXBkYXRlIHN0YXRlIGtoaSBHSFRLIHjDoWMgbmjhuq1uIGjhu6d5IHRow6BuaCBjw7RuZ1xyXG4gICAgICAgICAgICBiYXNlU3RvcmUuc2V0U3RhdGUoc3RhdGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5kYXRhLmZpbmQobyA9PiBvLnN5c3RlbUlkID09PSBvcmRlclN5c3RlbUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghb3JkZXIpIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBhY2thZ2luZ3MgPSBvcmRlci5wYWNrYWdpbmdzLm1hcChwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocC5zeXN0ZW1JZCAhPT0gcGFja2FnaW5nU3lzdGVtSWQpIHJldHVybiBwO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ0jhu6d5IMSRw7NuZyBnw7NpJyBhcyBQYWNrYWdpbmdTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGl2ZXJ5U3RhdHVzOiAnxJDDoyBo4buneScgYXMgT3JkZXJEZWxpdmVyeVN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsRGF0ZTogdG9JU09EYXRlVGltZShuZXcgRGF0ZSgpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVhc29uOiAnSOG7p3kgduG6rW4gxJHGoW4gR0hUSycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdodGtTdGF0dXNJZDogLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRuZXJTdGF0dXM6ICdI4buneSDEkcahbiBow6BuZycsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDinIUgS0jDlE5HIHJvbGxiYWNrIHN0b2NrIC0gxJHhu4MgdXNlciB04buxIHF1eeG6v3QgxJHhu4tuaCAobsO6dCBcIkjhu6d5IGdpYW8gdsOgIG5o4bqtbiBs4bqhaSBow6BuZ1wiKVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4ub3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnaW5nczogdXBkYXRlZFBhY2thZ2luZ3MsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHN0YXRlLmRhdGEubWFwKG8gPT4gby5zeXN0ZW1JZCA9PT0gb3JkZXJTeXN0ZW1JZCA/IHVwZGF0ZWRPcmRlciA6IG8pXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgfHwgJ8SQw6MgaOG7p3kgduG6rW4gxJHGoW4gR0hUSyB0aMOgbmggY8O0bmcnIFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHSFRLXSBDYW5jZWwgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0zhu5dpIGtoaSBo4buneSB24bqtbiDEkcahbiBHSFRLJyBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59O1xyXG5cclxuLy8gQXV0by1hbGxvY2F0ZSBoaXN0b3JpY2FsIHJlY2VpcHRzIG9uIHN0YXJ0dXBcclxudXNlUmVjZWlwdFN0b3JlLmdldFN0YXRlKCkuZGF0YS5mb3JFYWNoKHJlY2VpcHQgPT4ge1xyXG4gICAgYXV0b0FsbG9jYXRlUmVjZWlwdFRvT3JkZXJzKHJlY2VpcHQpO1xyXG59KTtcclxuXHJcbi8vIFJlYWN0IHRvIG5ld2x5IGNyZWF0ZWQgcmVjZWlwdHNcclxudXNlUmVjZWlwdFN0b3JlLnN1YnNjcmliZShcclxuICAgIHN0YXRlID0+IHN0YXRlLmRhdGEsXHJcbiAgICAoY3VycmVudFJlY2VpcHRzLCBwcmV2aW91c1JlY2VpcHRzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJldmlvdXNJZHMgPSBuZXcgU2V0KChwcmV2aW91c1JlY2VpcHRzID8/IFtdKS5tYXAociA9PiByLnN5c3RlbUlkKSk7XHJcbiAgICAgICAgY3VycmVudFJlY2VpcHRzLmZvckVhY2gocmVjZWlwdCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcHJldmlvdXNJZHMuaGFzKHJlY2VpcHQuc3lzdGVtSWQpKSB7XHJcbiAgICAgICAgICAgICAgICBhdXRvQWxsb2NhdGVSZWNlaXB0VG9PcmRlcnMocmVjZWlwdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuKTtcclxuXHJcblxyXG4vLyBFeHBvcnQgdHlwZWQgaG9vayB3aXRoIGFsbCBhdWdtZW50ZWQgbWV0aG9kc1xyXG5leHBvcnQgY29uc3QgdXNlT3JkZXJTdG9yZSA9ICgpOiBhbnkgPT4ge1xyXG4gIGNvbnN0IHN0YXRlID0gYmFzZVN0b3JlKCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLnN0YXRlLFxyXG4gICAgLi4uYXVnbWVudGVkTWV0aG9kcyxcclxuICB9O1xyXG59O1xyXG5cclxuLy8gRXhwb3J0IGdldFN0YXRlIGZvciBub24taG9vayB1c2FnZVxyXG51c2VPcmRlclN0b3JlLmdldFN0YXRlID0gKCk6IGFueSA9PiB7XHJcbiAgY29uc3Qgc3RhdGUgPSBiYXNlU3RvcmUuZ2V0U3RhdGUoKTtcclxuICByZXR1cm4ge1xyXG4gICAgLi4uc3RhdGUsXHJcbiAgICAuLi5hdWdtZW50ZWRNZXRob2RzLFxyXG4gIH07XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJ0b0lTT0RhdGVUaW1lIiwiZ2V0QXBpVXJsIiwiY3JlYXRlQ3J1ZFN0b3JlIiwiYXNTeXN0ZW1JZCIsImFzQnVzaW5lc3NJZCIsImdlbmVyYXRlU3lzdGVtSWQiLCJnZXRNYXhTeXN0ZW1JZENvdW50ZXIiLCJ1c2VFbXBsb3llZVN0b3JlIiwidXNlUHJvZHVjdFN0b3JlIiwiaXNDb21ib1Byb2R1Y3QiLCJ1c2VTdG9ja0hpc3RvcnlTdG9yZSIsInVzZUN1c3RvbWVyU3RvcmUiLCJ1c2VSZWNlaXB0VHlwZVN0b3JlIiwidXNlQ2FzaGJvb2tTdG9yZSIsInVzZVJlY2VpcHRTdG9yZSIsInVzZVNhbGVzUmV0dXJuU3RvcmUiLCJjcmVhdGVQYXltZW50RG9jdW1lbnQiLCJjcmVhdGVSZWNlaXB0RG9jdW1lbnQiLCJ1c2VTaGlwbWVudFN0b3JlIiwiZ2V0Q3VycmVudFVzZXJTeXN0ZW1JZCIsInVzZVNhbGVzTWFuYWdlbWVudFNldHRpbmdzU3RvcmUiLCJnZXRDdXJyZW50VXNlckluZm8iLCJjcmVhdGVDcmVhdGVkRW50cnkiLCJjcmVhdGVIaXN0b3J5RW50cnkiLCJhcHBlbmRIaXN0b3J5RW50cnkiLCJnZXRCcmFuY2hJZCIsIm9yZGVyIiwiYnJhbmNoU3lzdGVtSWQiLCJkZWxpdmVyeVN0YXR1c2VzQmxvY2tlZEZvckNhbmNlbGxhdGlvbiIsIklOX1NUT1JFX1BJQ0tVUF9QUkVGSVgiLCJQQUNLQUdJTkdfQ09ERV9QUkVGSVgiLCJQQUNLQUdJTkdfU1lTVEVNX0lEX1BSRUZJWCIsInBhY2thZ2luZ1N5c3RlbUlkQ291bnRlciIsImluaXRQYWNrYWdpbmdDb3VudGVyIiwib3JkZXJzIiwiYWxsUGFja2FnaW5ncyIsImZsYXRNYXAiLCJvIiwicGFja2FnaW5ncyIsImdldE5leHRQYWNrYWdpbmdTeXN0ZW1JZCIsImdldFBhY2thZ2luZ1N1ZmZpeEZyb21PcmRlcklkIiwib3JkZXJJZCIsInJhd1ZhbHVlIiwic3VmZml4IiwicmVwbGFjZSIsImdldEFjdGl2ZVBhY2thZ2luZ0NvdW50IiwiZmlsdGVyIiwicCIsInN0YXR1cyIsImxlbmd0aCIsImJ1aWxkUGFja2FnaW5nQnVzaW5lc3NJZCIsImFjdGl2ZUluZGV4IiwiYWN0aXZlQ291bnQiLCJiYXNlQ29kZSIsInBhZGRlZEluZGV4IiwiU3RyaW5nIiwicGFkU3RhcnQiLCJnZXRSZXR1cm5lZFZhbHVlRm9yT3JkZXIiLCJvcmRlclN5c3RlbUlkIiwiZ2V0U3RhdGUiLCJkYXRhIiwic3IiLCJyZWR1Y2UiLCJzdW0iLCJ0b3RhbFJldHVyblZhbHVlIiwiY2FsY3VsYXRlQWN0dWFsRGVidCIsInRvdGFsUmV0dXJuZWRWYWx1ZSIsInN5c3RlbUlkIiwiTWF0aCIsIm1heCIsImdyYW5kVG90YWwiLCJjYWxjdWxhdGVUb3RhbFBhaWQiLCJwYXltZW50cyIsInBheW1lbnQiLCJhbW91bnQiLCJnZXRPcmRlck91dHN0YW5kaW5nQW1vdW50IiwiYWN0dWFsRGVidCIsInRvdGFsUGFpZCIsImFwcGx5UGF5bWVudFRvT3JkZXIiLCJ1cGRhdGVkUGF5bWVudHMiLCJuZXdQYXltZW50U3RhdHVzIiwid2FzQ29tcGxldGVkIiwibmV3U3RhdHVzIiwibmV3Q29tcGxldGVkRGF0ZSIsImNvbXBsZXRlZERhdGUiLCJkZWxpdmVyeVN0YXR1cyIsIkRhdGUiLCJpbmNyZW1lbnRPcmRlclN0YXRzIiwiY3VzdG9tZXJTeXN0ZW1JZCIsInVwZGF0ZURlYnRUcmFuc2FjdGlvblBheW1lbnQiLCJpZCIsInBheW1lbnRTdGF0dXMiLCJwYWlkQW1vdW50Iiwic2hvdWxkQXV0b0FsbG9jYXRlUmVjZWlwdCIsInJlY2VpcHQiLCJhZmZlY3RzRGVidCIsImxpbmtlZE9yZGVyU3lzdGVtSWQiLCJnZXRBbGxvY2F0ZWRBbW91bnQiLCJvcmRlckFsbG9jYXRpb25zIiwiYWxsb2NhdGlvbiIsImF1dG9BbGxvY2F0ZVJlY2VpcHRUb09yZGVycyIsInJlbWFpbmluZ0Ftb3VudCIsImNhbmRpZGF0ZU9yZGVycyIsImJhc2VTdG9yZSIsIm1hcCIsIm91dHN0YW5kaW5nIiwiZW50cnkiLCJzb3J0IiwiYSIsImIiLCJhVGltZSIsIm9yZGVyRGF0ZSIsImdldFRpbWUiLCJiVGltZSIsImFtb3VudFRvRGlzdHJpYnV0ZSIsInVwZGF0ZWRPcmRlcnMiLCJNYXAiLCJhbGxvY2F0aW9uRW50cmllcyIsImN1cnJlbnRPcmRlclN0YXRlIiwiZ2V0IiwiYWxsb2NhdGlvbkFtb3VudCIsIm1pbiIsInBheW1lbnRFbnRyeSIsImRhdGUiLCJtZXRob2QiLCJwYXltZW50TWV0aG9kTmFtZSIsImNyZWF0ZWRCeSIsImRlc2NyaXB0aW9uIiwidXBkYXRlZE9yZGVyIiwic2V0IiwicHVzaCIsInNldFN0YXRlIiwic3RhdGUiLCJyZWNlaXB0U3RvcmUiLCJsYXRlc3RSZWNlaXB0IiwiZmluZEJ5SWQiLCJ1cGRhdGUiLCJlbnN1cmVPcmRlclBhY2thZ2luZ0lkZW50aWZpZXJzIiwiYWN0aXZlUGFja2FnaW5ncyIsImNoYW5nZWQiLCJ1cGRhdGVkUGFja2FnaW5ncyIsInBrZyIsImlkeCIsImlzQ2FuY2VsbGVkIiwiaGFzSWQiLCJ0cmltIiwiaGFzVGVtcE9yT2xkU3lzdGVtSWQiLCJzdGFydHNXaXRoIiwiaGFzVmFsaWRTeXN0ZW1JZCIsInNob3VsZEZpeFRyYWNraW5nIiwiZGVsaXZlcnlNZXRob2QiLCJ0cmFja2luZ0NvZGUiLCJuZXh0UGtnIiwiY3VycmVudEFjdGl2ZUluZGV4IiwicmVzb2x2ZWRJZCIsImVuc3VyZUNhbmNlbGxhdGlvbkFsbG93ZWQiLCJhY3Rpb25MYWJlbCIsImFsbG93Q2FuY2VsQWZ0ZXJFeHBvcnQiLCJoYXNMZWZ0V2FyZWhvdXNlIiwic3RvY2tPdXRTdGF0dXMiLCJpbmNsdWRlcyIsImFsZXJ0IiwicHJvY2Vzc0xpbmVJdGVtU3RvY2siLCJsaW5lSXRlbSIsIm9wZXJhdGlvbiIsIm9yZGVyUXVhbnRpdHkiLCJmaW5kUHJvZHVjdEJ5SWQiLCJjb21taXRTdG9jayIsInVuY29tbWl0U3RvY2siLCJkaXNwYXRjaFN0b2NrIiwiY29tcGxldGVEZWxpdmVyeSIsInJldHVyblN0b2NrRnJvbVRyYW5zaXQiLCJwcm9kdWN0IiwicHJvZHVjdFN5c3RlbUlkIiwiaXRlbXNUb1Byb2Nlc3MiLCJjb21ib0l0ZW1zIiwiZm9yRWFjaCIsImNvbWJvSXRlbSIsInF1YW50aXR5IiwiaXRlbSIsImJyYW5jaElkIiwiZ2V0Q29tYm9TdG9ja0l0ZW1zIiwibGluZUl0ZW1zIiwic3RvY2tJdGVtcyIsImNyZWF0ZU9yZGVyUmVmdW5kVm91Y2hlciIsImVtcGxveWVlSWQiLCJsYXN0UG9zaXRpdmVQYXltZW50IiwicmV2ZXJzZSIsImZpbmQiLCJkb2N1bWVudCIsImVycm9yIiwicmVjaXBpZW50TmFtZSIsImN1c3RvbWVyTmFtZSIsInJlY2lwaWVudFN5c3RlbUlkIiwiYnJhbmNoTmFtZSIsInBheW1lbnRUeXBlTmFtZSIsIm9yaWdpbmFsRG9jdW1lbnRJZCIsImNhdGVnb3J5IiwiY29uc29sZSIsImluaXRpYWxEYXRhIiwiaW5pdGlhbERhdGFPbWl0IiwiaW5kZXgiLCJwYWNrYWdpbmdTdGF0dXMiLCJoYXNEZWxpdmVyeVN0YXJ0ZWQiLCJwYWNrYWdpbmdJZCIsInN1YnN0cmluZyIsIm5ld1BrZyIsInJlcXVlc3REYXRlIiwiY29uZmlybURhdGUiLCJ1bmRlZmluZWQiLCJyZXF1ZXN0aW5nRW1wbG95ZWVJZCIsInNhbGVzcGVyc29uU3lzdGVtSWQiLCJyZXF1ZXN0aW5nRW1wbG95ZWVOYW1lIiwic2FsZXNwZXJzb24iLCJjb25maXJtaW5nRW1wbG95ZWVJZCIsImNvbmZpcm1pbmdFbXBsb3llZU5hbWUiLCJwcmludFN0YXR1cyIsImNhcnJpZXIiLCJkZWxpdmVyZWREYXRlIiwicHJvZHVjdHMiLCJyZXN0IiwicHJvZHVjdElkIiwicHJvZHVjdE5hbWUiLCJ1bml0UHJpY2UiLCJwcmljZSIsImRpc2NvdW50IiwiZGlzY291bnRUeXBlIiwidG90YWwiLCJidXNpbmVzc0lkRmllbGQiLCJhcGlFbmRwb2ludCIsImdldEN1cnJlbnRVc2VyIiwiQVBJX0VORFBPSU5UIiwic3luY1RvQXBpIiwiY3JlYXRlIiwicmVzcG9uc2UiLCJmZXRjaCIsImNyZWRlbnRpYWxzIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJ3YXJuIiwibG9nIiwiZSIsInVwZGF0ZXMiLCJkZWxldGUiLCJoYXJkIiwicmVzdG9yZSIsIm9yaWdpbmFsQWRkIiwiYWRkIiwib3JpZ2luYWxVcGRhdGUiLCJvcmlnaW5hbFJlbW92ZSIsInJlbW92ZSIsIm9yaWdpbmFsSGFyZERlbGV0ZSIsImhhcmREZWxldGUiLCJvcmlnaW5hbFJlc3RvcmUiLCJyZXN1bHQiLCJleGlzdGluZ0lkcyIsIlNldCIsIm5ld09yZGVycyIsImhhcyIsImlzQWxsRGVsaXZlcmVkIiwiZXZlcnkiLCJvcmlnaW5hbEFkZFdpdGhTdG9jayIsInVzZXJJbmZvIiwibmV3SXRlbSIsImh5ZHJhdGVkUGFja2FnaW5ncyIsIk9iamVjdCIsImFzc2lnbiIsImxpIiwidG90YWxRdWFudGl0eSIsInVwZGF0ZUN1c3RvbWVyIiwiZmluZEN1c3RvbWVyIiwiY3VzdG9tZXIiLCJsYXN0UHVyY2hhc2VEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImhpc3RvcnlFbnRyeSIsIm5hbWUiLCJ0b0xvY2FsZVN0cmluZyIsImFjdGl2aXR5SGlzdG9yeSIsImJhY2tmaWxsUGFja2FnaW5nSWRlbnRpZmllcnMiLCJjdXJyZW50U3RhdGUiLCJ1cGRhdGVkRGF0YSIsImF1Z21lbnRlZE1ldGhvZHMiLCJjYW5jZWxPcmRlciIsIm9wdGlvbnMiLCJyZWFzb24iLCJyZXN0b2NrIiwiY3VycmVudE9yZGVyIiwib3JkZXJUb0NhbmNlbCIsImVtcGxveWVlIiwibm93IiwiY2FuY2VsbGF0aW9uUmVhc29uIiwiZnVsbE5hbWUiLCJoYXNEaXNwYXRjaGVkU3RvY2siLCJleGlzdGluZ1BheW1lbnRzIiwibmV0Q29sbGVjdGVkIiwicmVmdW5kUGF5bWVudEVudHJ5IiwicmVmdW5kQW1vdW50IiwicmVmdW5kVm91Y2hlciIsInVwZGF0ZWRQYWlkQW1vdW50IiwiY2FuY2VsRGF0ZSIsImNhbmNlbFJlYXNvbiIsImNhbmNlbGluZ0VtcGxveWVlSWQiLCJjYW5jZWxpbmdFbXBsb3llZU5hbWUiLCJjYW5jZWxsZWREYXRlIiwiY2FuY2VsbGF0aW9uTWV0YWRhdGEiLCJyZXN0b2NrSXRlbXMiLCJub3RpZnlDdXN0b21lciIsImVtYWlsTm90aWZpZWRBdCIsInJlbW92ZURlYnRUcmFuc2FjdGlvbiIsImFkZFBheW1lbnQiLCJwYXltZW50RGF0YSIsImNyZWF0ZWRSZWNlaXB0IiwicmVjZWlwdFR5cGVOYW1lIiwib3JkZXJJbmRleCIsImZpbmRJbmRleCIsIm9yZGVyVG9VcGRhdGUiLCJuZXdQYXltZW50IiwibmV3RGF0YSIsInJlcXVlc3RQYWNrYWdpbmciLCJhc3NpZ25lZEVtcGxveWVlSWQiLCJhc3NpZ25lZEVtcGxveWVlIiwiYWN0aXZlQ291bnRBZnRlckluc2VydCIsIm5ld0FjdGl2ZUluZGV4IiwibmV3UGFja2FnaW5nIiwiYXNzaWduZWRFbXBsb3llZU5hbWUiLCJjb25maXJtUGFja2FnaW5nIiwicGFja2FnaW5nU3lzdGVtSWQiLCJhbGxvd05lZ2F0aXZlUGFja2luZyIsImNoaWxkUHJvZHVjdCIsInJlcXVpcmVkUXR5IiwiY3VycmVudFN0b2NrIiwiaW52ZW50b3J5QnlCcmFuY2giLCJkYXRhQ29weSIsIm9yZGVyQ29weSIsInBhY2thZ2luZ0luZGV4IiwicGFja2FnaW5nc0NvcHkiLCJjYW5jZWxQYWNrYWdpbmdSZXF1ZXN0IiwiaXNBbnlBY3RpdmVQYWNrYWdpbmciLCJzb21lIiwicHJvY2Vzc0luU3RvcmVQaWNrdXAiLCJ0b3RhbENvdW50IiwiY29uZmlybUluU3RvcmVQaWNrdXAiLCJhbGxvd05lZ2F0aXZlU3RvY2tPdXQiLCJhZGRFbnRyeSIsImFkZFN0b2NrSGlzdG9yeSIsImVtcGxveWVlRGF0YSIsInByb2Nlc3NlZEl0ZW1zIiwicHJvY2Vzc2VkSXRlbSIsImFjdGlvbiIsInF1YW50aXR5Q2hhbmdlIiwibmV3U3RvY2tMZXZlbCIsImRvY3VtZW50SWQiLCJicmFuY2giLCJlbXBsb3llZU5hbWUiLCJwYWNrYWdpbmciLCJuZXdTaGlwbWVudCIsImNyZWF0ZVNoaXBtZW50IiwidXBkYXRlU2hpcG1lbnQiLCJzZXJ2aWNlIiwicmVjb25jaWxpYXRpb25TdGF0dXMiLCJzaGlwcGluZ0ZlZVRvUGFydG5lciIsImNvZEFtb3VudCIsInBheWVyIiwiY3JlYXRlZEF0IiwiZGlzcGF0Y2hlZEF0IiwiZGVsaXZlcmVkQXQiLCJkaXNwYXRjaGVkRGF0ZSIsImRpc3BhdGNoZWRCeUVtcGxveWVlSWQiLCJkaXNwYXRjaGVkQnlFbXBsb3llZU5hbWUiLCJjb25maXJtUGFydG5lclNoaXBtZW50Iiwic2hpcG1lbnREYXRhIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJnaHRrUGFyYW1zIiwid2luZG93IiwiX19naHRrUHJldmlld1BhcmFtcyIsIkdIVEtTZXJ2aWNlIiwiZ2V0R0hUS0NyZWRlbnRpYWxzIiwiYXBpVG9rZW4iLCJwYXJ0bmVyQ29kZSIsImdodGtTZXJ2aWNlIiwiY3JlYXRlT3JkZXIiLCJFcnJvciIsImxhYmVsIiwiZ2h0a1RyYWNraW5nSWQiLCJ0cmFja2luZ19pZCIsImVzdGltYXRlZFBpY2tUaW1lIiwiZXN0aW1hdGVkX3BpY2tfdGltZSIsImVzdGltYXRlZERlbGl2ZXJUaW1lIiwiZXN0aW1hdGVkX2RlbGl2ZXJfdGltZSIsImZlZSIsInBhcnNlSW50IiwicGlja19tb25leSIsImlzX2ZyZWVzaGlwIiwibm90ZVRvU2hpcHBlciIsIm5vdGUiLCJ3ZWlnaHQiLCJkaW1lbnNpb25zIiwid2lkdGgiLCJoZWlnaHQiLCJlcnJvck1lc3NhZ2UiLCJkaXNwYXRjaEZyb21XYXJlaG91c2UiLCJub3cyIiwiZGVidEFtb3VudCIsImFkZERlYnRUcmFuc2FjdGlvbiIsImR1ZURhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzUGFpZCIsIm5vdGVzIiwiZmFpbERlbGl2ZXJ5IiwiaW5jcmVtZW50RmFpbGVkRGVsaXZlcnlTdGF0cyIsImNhbmNlbERlbGl2ZXJ5T25seSIsImFsbENhbmNlbGxlZCIsImhhc0FueUFjdGl2ZSIsIm5ld09yZGVyU3RhdHVzIiwibmV3RGVsaXZlcnlTdGF0dXMiLCJhY3RpdmVQYWNrYWdpbmciLCJjYW5jZWxEZWxpdmVyeSIsImNvbmZpcm1Db2RSZWNvbmNpbGlhdGlvbiIsInNoaXBtZW50cyIsImFkZFJlY2VpcHQiLCJhY2NvdW50cyIsInJlY2VpcHRUeXBlcyIsImFsbE9yZGVycyIsInRvdGFsQnlQYXJ0bmVyQW5kQnJhbmNoIiwic2hpcG1lbnQiLCJrZXkiLCJpZHMiLCJwYXJ0bmVyTmFtZSIsInNoaXBtZW50U3lzdGVtSWRzIiwiY3JlYXRlZFJlY2VpcHRzIiwidmFsdWVzIiwiZ3JvdXAiLCJhY2NvdW50IiwiYWNjIiwidHlwZSIsImMiLCJuZXdSZWNlaXB0RGF0YSIsInBheWVyVHlwZSIsInBheWVyTmFtZSIsImpvaW4iLCJwYXltZW50TWV0aG9kIiwiYWNjb3VudFN5c3RlbUlkIiwicGF5bWVudFJlY2VpcHRUeXBlU3lzdGVtSWQiLCJwYXltZW50UmVjZWlwdFR5cGVOYW1lIiwidXBkYXRlZEF0IiwibmV3UmVjZWlwdCIsInJlY2VpcHRGb3JTaGlwbWVudCIsInYiLCJvcmRlclVwZGF0ZXMiLCJuZXdQYXltZW50cyIsInJlY29uY2lsZWRTaGlwbWVudElkcyIsInNpemUiLCJwcm9jZXNzR0hUS1dlYmhvb2siLCJ3ZWJob29rRGF0YSIsImxhYmVsX2lkIiwicGFydG5lcl9pZCIsImdldEdIVEtTdGF0dXNJbmZvIiwiZ2V0R0hUS1JlYXNvblRleHQiLCJyZXF1aXJlIiwic3RhdHVzTWFwcGluZyIsInN0YXR1c19pZCIsInN0YXR1c0lkIiwic3RhdHVzVGV4dCIsInBhcnRuZXJTdGF0dXMiLCJnaHRrU3RhdHVzSWQiLCJnaHRrUmVhc29uQ29kZSIsInJlYXNvbl9jb2RlIiwiZ2h0a1JlYXNvblRleHQiLCJhY3R1YWxXZWlnaHQiLCJhY3R1YWxGZWUiLCJsYXN0U3luY2VkQXQiLCJzaG91bGRVcGRhdGVTdG9jayIsInN0b2NrQWN0aW9uIiwicHJvZHVjdENvbXBsZXRlRGVsaXZlcnkiLCJmYWlsdXJlU3RhdHVzZXMiLCJjdXJyZW50UGFja2FnaW5nIiwicHJldmlvdXNTdGF0dXNJZCIsIml0ZW1zIiwiYWxsUGFja2FnaW5nc0RlbGl2ZXJlZCIsIm5ld09yZGVyRGVsaXZlcnlTdGF0dXMiLCJuZXdTdG9ja091dFN0YXR1cyIsImNhbmNlbEdIVEtTaGlwbWVudCIsImpzb24iLCJzdWJzY3JpYmUiLCJjdXJyZW50UmVjZWlwdHMiLCJwcmV2aW91c1JlY2VpcHRzIiwicHJldmlvdXNJZHMiLCJyIiwidXNlT3JkZXJTdG9yZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./features/orders/store.ts\n"));

/***/ })

});