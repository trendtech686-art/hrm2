{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/packaging/columns.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport Link from 'next/link';\r\nimport { formatDate, formatDateTime, formatDateTimeSeconds, formatDateCustom, parseDate, getCurrentDate } from '@/lib/date-utils';\r\nimport type { PackagingSlip } from './types';\r\nimport type { PackagingStatus } from '../orders/types';\r\nimport type { ColumnDef } from '../../components/data-table/types';\r\nimport { Button } from '../../components/ui/button';\r\nimport { Badge } from '../../components/ui/badge';\r\nimport { Checkbox } from '../../components/ui/checkbox';\r\nimport { MoreHorizontal, PackageCheck, Printer, Ban } from 'lucide-react';\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '../../components/ui/dropdown-menu';\r\n\r\n\r\nconst statusVariants: Record<PackagingStatus, \"warning\" | \"success\" | \"destructive\"> = {\r\n    \"Chờ đóng gói\": \"warning\",\r\n    \"Đã đóng gói\": \"success\",\r\n    \"Hủy đóng gói\": \"destructive\",\r\n};\r\n\r\nexport const getColumns = (\r\n  onConfirm: (orderSystemId: string, packagingSystemId: string) => void,\r\n  onCancel: (orderSystemId: string, packagingSystemId: string) => void,\r\n  onPrint?: (packagingId: string) => void,\r\n): ColumnDef<PackagingSlip>[] => [\r\n    {\r\n      id: \"select\",\r\n      header: ({ isAllPageRowsSelected, isSomePageRowsSelected, onToggleAll }) => (\r\n        <div className=\"flex items-center justify-center\">\r\n          <Checkbox\r\n            checked={isAllPageRowsSelected ? true : isSomePageRowsSelected ? \"indeterminate\" : false}\r\n            onCheckedChange={(value) => onToggleAll?.(!!value)}\r\n            aria-label=\"Select all\"\r\n          />\r\n        </div>\r\n      ),\r\n      cell: ({ isSelected, onToggleSelect }) => (\r\n        <div className=\"flex items-center justify-center\">\r\n          <Checkbox\r\n            checked={isSelected}\r\n            onCheckedChange={onToggleSelect}\r\n            aria-label=\"Select row\"\r\n          />\r\n        </div>\r\n      ),\r\n      size: 48,\r\n      meta: {\r\n        displayName: \"Chọn\",\r\n        sticky: \"left\",\r\n      },\r\n    },\r\n    { \r\n        id: 'id', \r\n        accessorKey: 'id', \r\n        header: 'Mã đóng gói', \r\n        cell: ({ row }) => (\r\n            <Link href={`/packaging/${row.systemId}`} className=\"font-medium font-mono text-primary hover:underline\">\r\n                {row.id}\r\n            </Link>\r\n        ), \r\n        meta: { displayName: 'Mã đóng gói' } \r\n    },\r\n    { \r\n        id: 'orderId', \r\n        accessorKey: 'orderId', \r\n        header: 'Mã đơn hàng', \r\n        cell: ({ row }) => (\r\n            <Link href={`/orders/${row.orderSystemId}`} className=\"text-primary hover:underline\">\r\n                {row.orderId}\r\n            </Link>\r\n        ),\r\n        meta: { displayName: 'Mã đơn hàng' } \r\n    },\r\n    { \r\n        id: 'requestDate', \r\n        accessorKey: 'requestDate', \r\n        header: 'Ngày YC', \r\n        cell: ({ row }) => formatDate(row.requestDate),\r\n        meta: { displayName: 'Ngày yêu cầu' } \r\n    },\r\n    { \r\n        id: 'confirmDate', \r\n        accessorKey: 'confirmDate', \r\n        header: 'Ngày XN', \r\n        cell: ({ row }) => formatDate(row.confirmDate),\r\n        meta: { displayName: 'Ngày xác nhận' } \r\n    },\r\n     { \r\n        id: 'cancelDate', \r\n        accessorKey: 'cancelDate', \r\n        header: 'Ngày hủy', \r\n        cell: ({ row }) => formatDate(row.cancelDate),\r\n        meta: { displayName: 'Ngày hủy' } \r\n    },\r\n    { \r\n        id: 'requestingEmployeeName', \r\n        accessorKey: 'requestingEmployeeName', \r\n        header: 'NV Yêu cầu', \r\n        cell: ({ row }) => row.requestingEmployeeName,\r\n        meta: { displayName: 'NV Yêu cầu' } \r\n    },\r\n    { \r\n        id: 'confirmingEmployeeName', \r\n        accessorKey: 'confirmingEmployeeName', \r\n        header: 'NV Xác nhận', \r\n        cell: ({ row }) => row.confirmingEmployeeName || '-',\r\n        meta: { displayName: 'NV Xác nhận' } \r\n    },\r\n     { \r\n        id: 'cancelingEmployeeName', \r\n        accessorKey: 'cancelingEmployeeName', \r\n        header: 'NV Hủy', \r\n        cell: ({ row }) => row.cancelingEmployeeName || '-',\r\n        meta: { displayName: 'NV Hủy' } \r\n    },\r\n    { \r\n        id: 'assignedEmployeeName', \r\n        accessorKey: 'assignedEmployeeName', \r\n        header: 'NV được gán', \r\n        cell: ({ row }) => row.assignedEmployeeName || 'Chưa chỉ định',\r\n        meta: { displayName: 'NV được gán' } \r\n    },\r\n    {\r\n        id: 'status',\r\n        accessorKey: 'status',\r\n        header: 'Trạng thái',\r\n        cell: ({ row }) => <Badge variant={statusVariants[row.status]}>{row.status}</Badge>,\r\n        meta: { displayName: 'Trạng thái' }\r\n    },\r\n    {\r\n        id: 'printStatus',\r\n        accessorKey: 'printStatus',\r\n        header: 'Trạng thái in',\r\n        cell: ({ row }) => <Badge variant={row.printStatus === 'Đã in' ? 'success' : 'secondary'}>{row.printStatus}</Badge>,\r\n        meta: { displayName: 'Trạng thái in' }\r\n    },\r\n    { \r\n        id: 'branchName', \r\n        accessorKey: 'branchName', \r\n        header: 'Chi nhánh', \r\n        cell: ({ row }) => row.branchName,\r\n        meta: { displayName: 'Chi nhánh' } \r\n    },\r\n    { \r\n        id: 'cancelReason', \r\n        accessorKey: 'cancelReason', \r\n        header: 'Lý do hủy', \r\n        cell: ({ row }) => row.cancelReason || '-',\r\n        meta: { displayName: 'Lý do hủy' } \r\n    },\r\n    {\r\n        id: 'actions',\r\n        header: () => <div className=\"text-right\">Hành động</div>,\r\n        cell: ({ row }) => (\r\n            <div className=\"text-right\">\r\n                {row.status === 'Chờ đóng gói' && (\r\n                    <Button variant=\"outline\" size=\"sm\" className=\"h-8\" onClick={() => onConfirm(row.orderSystemId, row.systemId)}>\r\n                        <PackageCheck className=\"mr-2 h-4 w-4\" />\r\n                        Xác nhận\r\n                    </Button>\r\n                )}\r\n                 <DropdownMenu>\r\n                    <DropdownMenuTrigger asChild>\r\n                        <Button variant=\"ghost\" className=\"h-8 w-8 p-0 ml-2\">\r\n                            <span className=\"sr-only\">Mở menu</span>\r\n                            <MoreHorizontal className=\"h-4 w-4\" />\r\n                        </Button>\r\n                    </DropdownMenuTrigger>\r\n                    <DropdownMenuContent align=\"end\">\r\n                        <DropdownMenuItem onClick={() => onPrint?.(row.systemId)}>\r\n                            <Printer className=\"mr-2 h-4 w-4\" /> In Phiếu Đóng Gói\r\n                        </DropdownMenuItem>\r\n                        {row.status !== 'Hủy đóng gói' && (\r\n                            <DropdownMenuItem className=\"text-destructive\" onSelect={() => onCancel(row.orderSystemId, row.systemId)}>\r\n                                <Ban className=\"mr-2 h-4 w-4\" /> Hủy yêu cầu\r\n                            </DropdownMenuItem>\r\n                        )}\r\n                    </DropdownMenuContent>\r\n                </DropdownMenu>\r\n            </div>\r\n        ),\r\n        meta: { displayName: 'Hành động', sticky: 'right' },\r\n    }\r\n];\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/packaging/page.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { formatDate } from '@/lib/date-utils';\nimport { usePageHeader } from '../../contexts/page-header-context';\nimport { useOrderStore } from '../orders/store';\nimport { useBranchStore } from '../settings/branches/store';\nimport type { PackagingSlip } from './types';\nimport { getColumns } from './columns';\nimport { ResponsiveDataTable } from '../../components/data-table/responsive-data-table';\nimport { GenericExportDialogV2 } from '../../components/shared/generic-export-dialog-v2';\nimport { packagingConfig } from '../../lib/import-export/configs/packaging.config';\nimport { asSystemId } from '../../lib/id-types';\nimport { DataTableColumnCustomizer } from '../../components/data-table/data-table-column-toggle';\nimport { PageToolbar } from '../../components/layout/page-toolbar';\nimport { PageFilters } from '../../components/layout/page-filters';\nimport { SimplePrintOptionsDialog, type SimplePrintOptionsResult } from '../../components/shared/simple-print-options-dialog';\nimport { Card, CardContent, CardTitle } from '../../components/ui/card';\nimport { Button } from '../../components/ui/button';\nimport { Badge } from '../../components/ui/badge';\nimport { Avatar, AvatarFallback } from '../../components/ui/avatar';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from '../../components/ui/dialog';\nimport { Textarea } from '../../components/ui/textarea';\nimport { Label } from '../../components/ui/label';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '../../components/ui/dropdown-menu';\nimport { Package, MoreHorizontal, Calendar, User, Inbox, Printer, Download } from 'lucide-react';\nimport { TouchButton } from '../../components/mobile/touch-button';\nimport { useMediaQuery } from '../../lib/use-media-query';\nimport { toast } from 'sonner';\nimport Fuse from 'fuse.js';\nimport { useAuth } from '../../contexts/auth-context';\nimport { useStoreInfoStore } from '../settings/store-info/store-info-store';\nimport { usePrint } from '../../lib/use-print';\nimport { \n  convertToPackingForPrint,\n  mapPackingToPrintData,\n  mapPackingLineItems,\n  createStoreSettings,\n} from '../../lib/print/order-print-helper';\nimport { useCustomerStore } from '../customers/store';\n\nfunction CancelDialog({ isOpen, onOpenChange, onConfirm }: { isOpen: boolean; onOpenChange: (open: boolean) => void; onConfirm: (reason: string) => void }) {\n  const [reason, setReason] = React.useState('');\n  const handleConfirm = () => { onConfirm(reason); setReason(''); };\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Hủy yêu cầu đóng gói</DialogTitle>\n          <DialogDescription>Vui lòng nhập lý do hủy. Hành động này sẽ cập nhật trạng thái của phiếu đóng gói thành 'Hủy đóng gói'.</DialogDescription>\n        </DialogHeader>\n        <div className='pt-4'>\n          <Label htmlFor='cancel-reason'>Lý do hủy</Label>\n          <Textarea id='cancel-reason' value={reason} onChange={(e) => setReason(e.target.value)} className='mt-2' placeholder='Nhập lý do...' />\n        </div>\n        <DialogFooter>\n          <Button variant='outline' onClick={() => onOpenChange(false)}>Thoát</Button>\n          <Button variant='destructive' onClick={handleConfirm}>Xác nhận Hủy</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport function PackagingPage() {\n    const { data: allOrders, confirmPackaging, cancelPackagingRequest } = useOrderStore();\n    const { data: branches, findById: findBranchById } = useBranchStore();\n    const { findById: findCustomerById } = useCustomerStore();\n    const { employee: authEmployee } = useAuth();\n    const { info: storeInfo } = useStoreInfoStore();\n    const { print, printMultiple } = usePrint();\n    const currentUserSystemId = authEmployee?.systemId ?? 'SYSTEM';\n    const router = useRouter();\n    \n    // Print dialog state\n    const [printDialogOpen, setPrintDialogOpen] = React.useState(false);\n    const [itemsToPrint, setItemsToPrint] = React.useState<PackagingSlip[]>([]);\n    \n    // Export dialog state\n    const [exportDialogOpen, setExportDialogOpen] = React.useState(false);\n\n    usePageHeader({\n        title: 'Phiếu đóng gói',\n        breadcrumb: [\n            { label: 'Trang chủ', href: '/', isCurrent: false },\n            { label: 'Đóng gói', href: '/packaging', isCurrent: true }\n        ],\n        showBackButton: false,\n    });\n\n    const [cancelDialogState, setCancelDialogState] = React.useState<{ orderSystemId: string, packagingSystemId: string } | null>(null);\n    const [branchFilter, setBranchFilter] = React.useState('all');\n    const [statusFilter, setStatusFilter] = React.useState('all');\n    const [globalFilter, setGlobalFilter] = React.useState('');\n    const [debouncedGlobalFilter, setDebouncedGlobalFilter] = React.useState('');\n    const [pagination, setPagination] = React.useState({ pageIndex: 0, pageSize: 40 });\n    const [sorting, setSorting] = React.useState<{ id: string, desc: boolean }>({ id: 'createdAt', desc: true });\n    const [rowSelection, setRowSelection] = React.useState({});\n    const [expanded, setExpanded] = React.useState<Record<string, boolean>>({});\n    const [columnVisibility, setColumnVisibility] = React.useState<Record<string, boolean>>(() => {\n        // Initialize with all columns visible\n        const cols = getColumns(\n            () => {}, \n            () => {}, \n            () => {}\n        );\n        const initial: Record<string, boolean> = {};\n        cols.forEach(c => { if (c.id) initial[c.id] = true; });\n        return initial;\n    });\n    const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\n    const [pinnedColumns, setPinnedColumns] = React.useState<string[]>([]);\n    const [mobileLoadedCount, setMobileLoadedCount] = React.useState(20);\n    const mobileScrollRef = React.useRef<HTMLDivElement>(null);\n    const isMobile = !useMediaQuery('(min-width: 768px)');\n\n    React.useEffect(() => {\n        const timer = setTimeout(() => setDebouncedGlobalFilter(globalFilter), 300);\n        return () => clearTimeout(timer);\n    }, [globalFilter]);\n\n    const packagingSlips = React.useMemo(() => {\n        const slips: PackagingSlip[] = [];\n        allOrders.forEach(order => {\n            order.packagings.forEach(pkg => {\n                slips.push({\n                    systemId: pkg.systemId, id: pkg.id, orderId: order.id, orderSystemId: order.systemId,\n                    customerName: order.customerName, requestDate: pkg.requestDate, confirmDate: pkg.confirmDate,\n                    cancelDate: pkg.cancelDate, requestingEmployeeName: pkg.requestingEmployeeName,\n                    confirmingEmployeeName: pkg.confirmingEmployeeName, cancelingEmployeeName: pkg.cancelingEmployeeName,\n                    assignedEmployeeName: pkg.assignedEmployeeName, status: pkg.status, printStatus: pkg.printStatus,\n                    branchName: order.branchName, cancelReason: pkg.cancelReason\n                });\n            });\n        });\n        return slips;\n    }, [allOrders]);\n    \n    const handleConfirm = React.useCallback((orderSystemId: string, packagingSystemId: string) => {\n        confirmPackaging(orderSystemId, packagingSystemId, currentUserSystemId);\n    }, [confirmPackaging, currentUserSystemId]);\n\n    const handleCancelRequest = React.useCallback((orderSystemId: string, packagingSystemId: string) => {\n        setCancelDialogState({ orderSystemId, packagingSystemId });\n    }, []);\n\n    const handleConfirmCancel = (reason: string) => {\n        if (cancelDialogState) {\n            cancelPackagingRequest(cancelDialogState.orderSystemId, cancelDialogState.packagingSystemId, currentUserSystemId, reason);\n            setCancelDialogState(null);\n        }\n    };\n\n    // Handler để mở dialog in với options\n    const handleBulkPrint = React.useCallback((rows: PackagingSlip[]) => {\n        setItemsToPrint(rows);\n        setPrintDialogOpen(true);\n    }, []);\n\n    // Handler khi xác nhận in từ dialog\n    const handlePrintConfirm = React.useCallback((options: SimplePrintOptionsResult) => {\n        if (itemsToPrint.length === 0) return;\n\n        const { branchSystemId, paperSize } = options;\n        const selectedBranch = branchSystemId ? findBranchById(branchSystemId) : null;\n        \n        const printOptionsList: any[] = [];\n        \n        itemsToPrint.forEach(pkg => {\n            // Find the order for this packaging\n            let targetOrder: any = null;\n            let targetPkg: any = null;\n\n            for (const order of allOrders) {\n                const foundPkg = order.packagings.find(p => p.systemId === pkg.systemId);\n                if (foundPkg) {\n                    targetOrder = order;\n                    targetPkg = foundPkg;\n                    break;\n                }\n            }\n\n            if (!targetOrder || !targetPkg) return;\n\n            const customer = findCustomerById(targetOrder.customerSystemId);\n            const branch = selectedBranch || findBranchById(targetOrder.branchSystemId);\n            const storeSettings = branch \n                ? createStoreSettings(branch)\n                : {\n                    name: storeInfo.companyName || storeInfo.brandName || '',\n                    address: storeInfo.headquartersAddress || '',\n                    phone: storeInfo.hotline || '',\n                    email: storeInfo.email || '',\n                    province: storeInfo.province || '',\n                  };\n            const packingData = convertToPackingForPrint(targetOrder, targetPkg, { customer });\n            \n            printOptionsList.push({\n                data: mapPackingToPrintData(packingData, storeSettings),\n                lineItems: mapPackingLineItems(packingData.items),\n                paperSize,\n            });\n        });\n\n        if (printOptionsList.length > 0) {\n            printMultiple('packing', printOptionsList);\n            toast.success(`Đang in ${printOptionsList.length} phiếu đóng gói`);\n        }\n        \n        setPrintDialogOpen(false);\n        setItemsToPrint([]);\n        setRowSelection({});\n    }, [itemsToPrint, allOrders, findCustomerById, findBranchById, storeInfo, printMultiple]);\n    \n    const handlePrintPackaging = React.useCallback((packagingIds: string[]) => {\n        packagingIds.forEach(pkgId => {\n            // Find the packaging slip and the order\n            let targetOrder: any = null;\n            let targetPkg: any = null;\n\n            for (const order of allOrders) {\n                const pkg = order.packagings.find(p => p.systemId === pkgId);\n                if (pkg) {\n                    targetOrder = order;\n                    targetPkg = pkg;\n                    break;\n                }\n            }\n\n            if (!targetOrder || !targetPkg) return;\n\n            // Use helper to prepare print data\n            const customer = findCustomerById(targetOrder.customerSystemId);\n            const branch = findBranchById(targetOrder.branchSystemId);\n            const storeSettings = branch \n                ? createStoreSettings(branch)\n                : {\n                    name: storeInfo.companyName || storeInfo.brandName || '',\n                    address: storeInfo.headquartersAddress || '',\n                    phone: storeInfo.hotline || '',\n                    email: storeInfo.email || '',\n                    province: storeInfo.province || '',\n                  };\n            const packingData = convertToPackingForPrint(targetOrder, targetPkg, { customer });\n            \n            print('packing', {\n                data: mapPackingToPrintData(packingData, storeSettings),\n                lineItems: mapPackingLineItems(packingData.items),\n            });\n        });\n    }, [allOrders, findCustomerById, findBranchById, storeInfo, print]);\n\n    const handleBulkCancelPackaging = React.useCallback((packagingIds: string[]) => {\n        console.log('Hủy Phiếu Đóng Gói:', packagingIds);\n        // TODO: Implement bulk cancel logic\n    }, []);\n\n    const handlePrintSinglePackaging = React.useCallback((packagingId: string) => {\n        handlePrintPackaging([packagingId]);\n    }, [handlePrintPackaging]);\n    \n    const columns = React.useMemo(() => getColumns(handleConfirm, handleCancelRequest, handlePrintSinglePackaging), [handleConfirm, handleCancelRequest, handlePrintSinglePackaging]);\n    \n    // Update column order when columns change\n    React.useEffect(() => {\n        setColumnOrder(columns.map(c => c.id).filter(Boolean) as string[]);\n    }, [columns]);\n    \n    const fuseInstance = React.useMemo(() => {\n        return new Fuse(packagingSlips, { keys: ['id', 'orderId', 'customerName', 'assignedEmployeeName', 'branchName'], threshold: 0.3, ignoreLocation: true });\n    }, [packagingSlips]);\n\n    const filteredData = React.useMemo(() => {\n        let data = packagingSlips;\n        if (branchFilter !== 'all') data = data.filter(s => s.branchName === branches.find(b => b.systemId === branchFilter)?.name);\n        if (statusFilter !== 'all') data = data.filter(s => s.status === statusFilter);\n        if (debouncedGlobalFilter && debouncedGlobalFilter.trim()) {\n            fuseInstance.setCollection(data);\n            data = fuseInstance.search(debouncedGlobalFilter.trim()).map(r => r.item);\n        }\n        return data;\n    }, [packagingSlips, branchFilter, statusFilter, debouncedGlobalFilter, fuseInstance, branches]);\n    \n    React.useEffect(() => { setPagination(p => ({ ...p, pageIndex: 0 })); }, [debouncedGlobalFilter, branchFilter, statusFilter]);\n    \n    const sortedData = React.useMemo(() => {\n        const sorted = [...filteredData];\n        if (sorting.id) {\n            sorted.sort((a, b) => {\n                const aValue = (a as any)[sorting.id];\n                const bValue = (b as any)[sorting.id];\n                if (!aValue) return 1;\n                if (!bValue) return -1;\n                // Special handling for date columns\n                if (sorting.id === 'createdAt' || sorting.id === 'requestDate') {\n                  const aTime = aValue ? new Date(aValue).getTime() : 0;\n                  const bTime = bValue ? new Date(bValue).getTime() : 0;\n                  return sorting.desc ? bTime - aTime : aTime - bTime;\n                }\n                if (aValue < bValue) return sorting.desc ? 1 : -1;\n                if (aValue > bValue) return sorting.desc ? -1 : 1;\n                return 0;\n            });\n        }\n        return sorted;\n    }, [filteredData, sorting]);\n\n    const pageCount = Math.ceil(sortedData.length / pagination.pageSize);\n    const paginatedData = React.useMemo(() => {\n        const start = pagination.pageIndex * pagination.pageSize;\n        return sortedData.slice(start, start + pagination.pageSize);\n    }, [sortedData, pagination]);\n\n    const allSelectedRows = React.useMemo(() => packagingSlips.filter(p => rowSelection[p.systemId]), [packagingSlips, rowSelection]);\n\n    // Bulk actions với SimplePrintOptionsDialog\n    const bulkActions = React.useMemo(() => [\n        {\n            label: 'In phiếu đóng gói',\n            icon: Printer,\n            onSelect: (rows: PackagingSlip[]) => handleBulkPrint(rows),\n        },\n    ], [handleBulkPrint]);\n\n    React.useEffect(() => {\n        if (!isMobile) return;\n        const handleScroll = () => {\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n            const scrollHeight = document.documentElement.scrollHeight;\n            const clientHeight = window.innerHeight;\n            if (scrollTop + clientHeight >= scrollHeight * 0.8 && mobileLoadedCount < sortedData.length) {\n                setMobileLoadedCount(prev => Math.min(prev + 20, sortedData.length));\n            }\n        };\n        window.addEventListener('scroll', handleScroll, { passive: true });\n        return () => window.removeEventListener('scroll', handleScroll);\n    }, [isMobile, mobileLoadedCount, sortedData.length]);\n    \n    React.useEffect(() => { setMobileLoadedCount(20); }, [debouncedGlobalFilter, branchFilter, statusFilter]);\n\n    const handleRowClick = (row: PackagingSlip) => router.push('/packaging/' + row.systemId);\n\n    const MobilePackagingCard = ({ packaging }: { packaging: PackagingSlip }) => {\n        const getStatusVariant = (status: string): 'default' | 'secondary' | 'destructive' => {\n            const map: Record<string, 'default' | 'secondary' | 'destructive'> = {\n                'Đã đóng gói': 'default', 'Chờ đóng gói': 'secondary', 'Hủy đóng gói': 'destructive'\n            };\n            return map[status] || 'secondary';\n        };\n\n        return (\n            <Card className='hover:shadow-md transition-shadow cursor-pointer' onClick={() => handleRowClick(packaging)}>\n                <CardContent className='p-4'>\n                    <div className='flex items-center justify-between mb-2'>\n                        <div className='flex items-center gap-2 flex-1 min-w-0'>\n                            <Avatar className='h-8 w-8 flex-shrink-0 bg-primary/10'>\n                                <AvatarFallback className='text-xs text-primary'><Inbox className='h-4 w-4' /></AvatarFallback>\n                            </Avatar>\n                            <div className='flex items-center gap-1.5 min-w-0 flex-1'>\n                                <CardTitle className='font-semibold text-sm truncate'>{packaging.id}</CardTitle>\n                                <span className='text-xs text-muted-foreground'></span>\n                                <span className='text-xs text-muted-foreground font-mono'>{packaging.orderId}</span>\n                            </div>\n                        </div>\n                        <DropdownMenu>\n                            <DropdownMenuTrigger asChild>\n                                <TouchButton variant='ghost' size='sm' className='h-8 w-8 p-0 flex-shrink-0' onClick={(e) => e.stopPropagation()}>\n                                    <MoreHorizontal className='h-4 w-4' />\n                                </TouchButton>\n                            </DropdownMenuTrigger>\n                            <DropdownMenuContent align='end'>\n                                <DropdownMenuItem onClick={(e) => { e.stopPropagation(); router.push('/packaging/' + packaging.systemId); }}>Xem chi tiết</DropdownMenuItem>\n                                <DropdownMenuItem onClick={(e) => { e.stopPropagation(); handlePrintSinglePackaging(packaging.systemId); }}>In Phiếu Đóng Gói</DropdownMenuItem>\n                                {packaging.status === 'Chờ đóng gói' && (\n                                    <>\n                                        <DropdownMenuItem onClick={(e) => { e.stopPropagation(); handleConfirm(packaging.orderSystemId, packaging.systemId); }}>Xác nhận đóng gói</DropdownMenuItem>\n                                        <DropdownMenuItem onClick={(e) => { e.stopPropagation(); handleCancelRequest(packaging.orderSystemId, packaging.systemId); }}>Hủy yêu cầu</DropdownMenuItem>\n                                    </>\n                                )}\n                            </DropdownMenuContent>\n                        </DropdownMenu>\n                    </div>\n                    <div className='text-xs text-muted-foreground mb-3 flex items-center'>\n                        <User className='h-3 w-3 mr-1.5 flex-shrink-0' />\n                        <span className='truncate'>{packaging.customerName}</span>\n                    </div>\n                    <div className='border-t mb-3' />\n                    <div className='space-y-2'>\n                        <div className='flex items-center text-xs text-muted-foreground'>\n                            <Calendar className='h-3 w-3 mr-1.5 flex-shrink-0' />\n                            <span>{formatDate(packaging.requestDate)}</span>\n                        </div>\n                        {packaging.assignedEmployeeName && (\n                            <div className='flex items-center text-xs text-muted-foreground'>\n                                <Package className='h-3 w-3 mr-1.5 flex-shrink-0' />\n                                <span>{packaging.assignedEmployeeName}</span>\n                            </div>\n                        )}\n                        <div className='flex items-center justify-between text-xs pt-1'>\n                            <span className='text-muted-foreground'>{packaging.branchName}</span>\n                            <Badge variant={getStatusVariant(packaging.status)} className='text-xs'>{packaging.status}</Badge>\n                        </div>\n                    </div>\n                </CardContent>\n            </Card>\n        );\n    };\n\n    return (\n        <div className='flex flex-col w-full h-full'>\n            {!isMobile && (\n                <PageToolbar\n                    leftActions={\n                        <Button variant=\"outline\" size=\"sm\" onClick={() => setExportDialogOpen(true)}>\n                            <Download className=\"h-4 w-4 mr-2\" />\n                            Xuất Excel\n                        </Button>\n                    }\n                    rightActions={<DataTableColumnCustomizer columns={columns} columnVisibility={columnVisibility} setColumnVisibility={setColumnVisibility} columnOrder={columnOrder} setColumnOrder={setColumnOrder} pinnedColumns={pinnedColumns} setPinnedColumns={setPinnedColumns} />}\n                />\n            )}\n            <PageFilters searchValue={globalFilter} onSearchChange={setGlobalFilter} searchPlaceholder='Tìm kiếm phiếu đóng gói (mã phiếu, mã đơn, khách hàng)...'>\n                <Select value={branchFilter} onValueChange={setBranchFilter}>\n                    <SelectTrigger className='w-full sm:w-[180px]'><SelectValue placeholder='Tất cả chi nhánh' /></SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value='all'>Tất cả chi nhánh</SelectItem>\n                        {branches.map(b => <SelectItem key={b.systemId} value={b.systemId}>{b.name}</SelectItem>)}\n                    </SelectContent>\n                </Select>\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\n                    <SelectTrigger className='w-full sm:w-[180px]'><SelectValue placeholder='Tất cả trạng thái' /></SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value='all'>Tất cả trạng thái</SelectItem>\n                        <SelectItem value='Chờ đóng gói'>Chờ đóng gói</SelectItem>\n                        <SelectItem value='Đã đóng gói'>Đã đóng gói</SelectItem>\n                        <SelectItem value='Hủy đóng gói'>Hủy đóng gói</SelectItem>\n                    </SelectContent>\n                </Select>\n            </PageFilters>\n            {isMobile ? (\n                <div ref={mobileScrollRef} className='space-y-3 pb-4'>\n                    {sortedData.length === 0 ? (\n                        <Card><CardContent className='py-12 text-center'><p className='text-muted-foreground'>Không tìm thấy phiếu đóng gói</p></CardContent></Card>\n                    ) : (\n                        <>\n                            {sortedData.slice(0, mobileLoadedCount).map(packaging => <MobilePackagingCard key={packaging.systemId} packaging={packaging} />)}\n                            {mobileLoadedCount < sortedData.length && (\n                                <Card className='border-dashed'><CardContent className='py-6 text-center'><div className='flex items-center justify-center gap-2'><div className='h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent' /><span className='text-sm text-muted-foreground'>Đang tải thêm...</span></div></CardContent></Card>\n                            )}\n                            {mobileLoadedCount >= sortedData.length && sortedData.length > 20 && (\n                                <Card className='border-dashed'><CardContent className='py-4 text-center'><span className='text-sm text-muted-foreground'>Đã hiển thị tất cả {sortedData.length} phiếu đóng gói</span></CardContent></Card>\n                            )}\n                        </>\n                    )}\n                </div>\n            ) : (\n                <div className='w-full py-4'>\n                    <ResponsiveDataTable \n                        columns={columns} \n                        data={paginatedData} \n                        renderMobileCard={(packaging) => <MobilePackagingCard packaging={packaging} />} \n                        pageCount={pageCount} \n                        pagination={pagination} \n                        setPagination={setPagination} \n                        rowCount={filteredData.length} \n                        rowSelection={rowSelection} \n                        setRowSelection={setRowSelection} \n                        allSelectedRows={allSelectedRows}\n                        bulkActions={bulkActions}\n                        expanded={expanded} \n                        setExpanded={setExpanded} \n                        sorting={sorting} \n                        setSorting={setSorting as React.Dispatch<React.SetStateAction<{ id: string; desc: boolean; }>>} \n                        columnVisibility={columnVisibility} \n                        setColumnVisibility={setColumnVisibility} \n                        columnOrder={columnOrder} \n                        setColumnOrder={setColumnOrder} \n                        pinnedColumns={pinnedColumns} \n                        setPinnedColumns={setPinnedColumns} \n                        onRowClick={handleRowClick} \n                    />\n                </div>\n            )}\n\n            {/* Print Options Dialog */}\n            <SimplePrintOptionsDialog\n                open={printDialogOpen}\n                onOpenChange={setPrintDialogOpen}\n                selectedCount={itemsToPrint.length}\n                onConfirm={handlePrintConfirm}\n                title=\"In phiếu đóng gói\"\n            />\n            <CancelDialog isOpen={!!cancelDialogState} onOpenChange={(open) => !open && setCancelDialogState(null)} onConfirm={handleConfirmCancel} />\n\n            {/* Export Dialog */}\n            <GenericExportDialogV2<PackagingSlip>\n                open={exportDialogOpen}\n                onOpenChange={setExportDialogOpen}\n                config={packagingConfig}\n                allData={packagingSlips}\n                filteredData={sortedData}\n                currentPageData={paginatedData}\n                selectedData={allSelectedRows}\n                currentUser={{\n                    name: authEmployee?.fullName || 'Hệ thống',\n                    systemId: authEmployee?.systemId || asSystemId('SYSTEM'),\n                }}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}