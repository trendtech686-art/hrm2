{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/wiki/api/wiki-api.ts"],"sourcesContent":["/**\r\n * Wiki API Layer\r\n * Handles all wiki article-related API calls\r\n */\r\n\r\nimport type { WikiArticle } from '../types';\r\n\r\nexport interface WikiFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  category?: string;\r\n  tag?: string;\r\n  author?: string;\r\n}\r\n\r\nexport interface WikiResponse {\r\n  data: WikiArticle[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface WikiCreateInput {\r\n  systemId?: string;\r\n  id?: string;\r\n  title: string;\r\n  content: string;\r\n  category: string;\r\n  tags?: string[];\r\n  author?: string;\r\n}\r\n\r\nexport interface WikiUpdateInput extends Partial<WikiCreateInput> {}\r\n\r\nconst BASE_URL = '/api/wiki';\r\n\r\n/**\r\n * Fetch wiki articles with filters\r\n */\r\nexport async function fetchWikiArticles(\r\n  filters: WikiFilters = {}\r\n): Promise<WikiResponse> {\r\n  const params = new URLSearchParams();\r\n  \r\n  if (filters.page) params.set('page', String(filters.page));\r\n  if (filters.limit) params.set('limit', String(filters.limit));\r\n  if (filters.search) params.set('search', filters.search);\r\n  if (filters.category) params.set('category', filters.category);\r\n  if (filters.tag) params.set('tag', filters.tag);\r\n  if (filters.author) params.set('author', filters.author);\r\n\r\n  const url = params.toString() ? `${BASE_URL}?${params}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch wiki articles');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Fetch single wiki article by ID\r\n */\r\nexport async function fetchWikiById(\r\n  systemId: string\r\n): Promise<WikiArticle> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch wiki article');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Create new wiki article\r\n */\r\nexport async function createWiki(\r\n  data: WikiCreateInput\r\n): Promise<WikiArticle> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to create wiki article');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Update wiki article\r\n */\r\nexport async function updateWiki(\r\n  systemId: string,\r\n  data: WikiUpdateInput\r\n): Promise<WikiArticle> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    credentials: 'include',\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.error || 'Failed to update wiki article');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\n/**\r\n * Delete wiki article\r\n */\r\nexport async function deleteWiki(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n    credentials: 'include',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to delete wiki article');\r\n  }\r\n}\r\n\r\n/**\r\n * Get all categories\r\n */\r\nexport async function fetchWikiCategories(): Promise<string[]> {\r\n  const response = await fetch(`${BASE_URL}/categories`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch wiki categories');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  return data.categories || [];\r\n}\r\n\r\n/**\r\n * Get all tags\r\n */\r\nexport async function fetchWikiTags(): Promise<string[]> {\r\n  const response = await fetch(`${BASE_URL}/tags`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error('Failed to fetch wiki tags');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  return data.tags || [];\r\n}\r\n\r\n/**\r\n * Search wiki articles\r\n */\r\nexport async function searchWiki(\r\n  query: string\r\n): Promise<WikiArticle[]> {\r\n  const response = await fetchWikiArticles({ search: query, limit: 20 });\r\n  return response.data;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/wiki/hooks/use-wiki.ts"],"sourcesContent":["/**\r\n * Wiki React Query Hooks\r\n * Provides data fetching and mutations for wiki articles\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchWikiArticles,\r\n  fetchWikiById,\r\n  createWiki,\r\n  updateWiki,\r\n  deleteWiki,\r\n  fetchWikiCategories,\r\n  fetchWikiTags,\r\n  searchWiki,\r\n  type WikiFilters,\r\n  type WikiCreateInput,\r\n  type WikiUpdateInput,\r\n} from '../api/wiki-api';\r\n\r\n// Query keys factory\r\nexport const wikiKeys = {\r\n  all: ['wiki'] as const,\r\n  lists: () => [...wikiKeys.all, 'list'] as const,\r\n  list: (filters: WikiFilters) => [...wikiKeys.lists(), filters] as const,\r\n  details: () => [...wikiKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...wikiKeys.details(), id] as const,\r\n  categories: () => [...wikiKeys.all, 'categories'] as const,\r\n  tags: () => [...wikiKeys.all, 'tags'] as const,\r\n  search: (query: string) => [...wikiKeys.all, 'search', query] as const,\r\n};\r\n\r\n/**\r\n * Hook to fetch wiki articles with filters\r\n */\r\nexport function useWikiArticles(filters: WikiFilters = {}) {\r\n  return useQuery({\r\n    queryKey: wikiKeys.list(filters),\r\n    queryFn: () => fetchWikiArticles(filters),\r\n    staleTime: 1000 * 60 * 5, // 5 minutes - wiki doesn't change often\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch single wiki article\r\n */\r\nexport function useWikiById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: wikiKeys.detail(systemId!),\r\n    queryFn: () => fetchWikiById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch wiki categories\r\n */\r\nexport function useWikiCategories() {\r\n  return useQuery({\r\n    queryKey: wikiKeys.categories(),\r\n    queryFn: fetchWikiCategories,\r\n    staleTime: 1000 * 60 * 30, // 30 minutes\r\n  });\r\n}\r\n\r\n/**\r\n * Hook to fetch wiki tags\r\n */\r\nexport function useWikiTags() {\r\n  return useQuery({\r\n    queryKey: wikiKeys.tags(),\r\n    queryFn: fetchWikiTags,\r\n    staleTime: 1000 * 60 * 30, // 30 minutes\r\n  });\r\n}\r\n\r\n/**\r\n * Hook for wiki search\r\n */\r\nexport function useWikiSearch(query: string, enabled = true) {\r\n  return useQuery({\r\n    queryKey: wikiKeys.search(query),\r\n    queryFn: () => searchWiki(query),\r\n    enabled: enabled && query.length >= 2,\r\n    staleTime: 1000 * 60,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\n/**\r\n * Hook providing wiki mutations\r\n */\r\nexport function useWikiMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n\r\n  const invalidateWiki = () => {\r\n    queryClient.invalidateQueries({ queryKey: wikiKeys.all });\r\n  };\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: WikiCreateInput) => createWiki(data),\r\n    onSuccess: () => {\r\n      invalidateWiki();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: WikiUpdateInput }) =>\r\n      updateWiki(systemId, data),\r\n    onSuccess: () => {\r\n      invalidateWiki();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deleteWiki(systemId),\r\n    onSuccess: () => {\r\n      invalidateWiki();\r\n      options.onSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create,\r\n    update,\r\n    remove,\r\n    isLoading: create.isPending || update.isPending || remove.isPending,\r\n  };\r\n}\r\n\r\n/**\r\n * Hook to fetch wiki articles by category\r\n */\r\nexport function useWikiByCategory(category: string) {\r\n  return useWikiArticles({ category });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;CAGC,GAED;AAAA;AAAA;AACA;;;AAeO,MAAM,WAAW;IACtB,KAAK;QAAC;KAAO;IACb,OAAO,IAAM;eAAI,SAAS,GAAG;YAAE;SAAO;IACtC,MAAM,CAAC,UAAyB;eAAI,SAAS,KAAK;YAAI;SAAQ;IAC9D,SAAS,IAAM;eAAI,SAAS,GAAG;YAAE;SAAS;IAC1C,QAAQ,CAAC,KAAe;eAAI,SAAS,OAAO;YAAI;SAAG;IACnD,YAAY,IAAM;eAAI,SAAS,GAAG;YAAE;SAAa;IACjD,MAAM,IAAM;eAAI,SAAS,GAAG;YAAE;SAAO;IACrC,QAAQ,CAAC,QAAkB;eAAI,SAAS,GAAG;YAAE;YAAU;SAAM;AAC/D;AAKO,SAAS,gBAAgB,UAAuB,CAAC,CAAC;IACvD,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,SAAS,IAAI,CAAC;QACxB,SAAS,IAAM,IAAA,2JAAiB,EAAC;QACjC,WAAW,OAAO,KAAK;IACzB;AACF;AAKO,SAAS,YAAY,QAA4B;IACtD,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,SAAS,MAAM,CAAC;QAC1B,SAAS,IAAM,IAAA,uJAAa,EAAC;QAC7B,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IACzB;AACF;AAKO,SAAS;IACd,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,SAAS,UAAU;QAC7B,SAAS,6JAAmB;QAC5B,WAAW,OAAO,KAAK;IACzB;AACF;AAKO,SAAS;IACd,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,SAAS,IAAI;QACvB,SAAS,uJAAa;QACtB,WAAW,OAAO,KAAK;IACzB;AACF;AAKO,SAAS,cAAc,KAAa,EAAE,UAAU,IAAI;IACzD,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,SAAS,MAAM,CAAC;QAC1B,SAAS,IAAM,IAAA,oJAAU,EAAC;QAC1B,SAAS,WAAW,MAAM,MAAM,IAAI;QACpC,WAAW,OAAO;IACpB;AACF;AAUO,SAAS,iBAAiB,UAA6B,CAAC,CAAC;IAC9D,MAAM,cAAc,IAAA,wMAAc;IAElC,MAAM,iBAAiB;QACrB,YAAY,iBAAiB,CAAC;YAAE,UAAU,SAAS,GAAG;QAAC;IACzD;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,OAA0B,IAAA,oJAAU,EAAC;QAClD,WAAW;YACT;YACA,QAAQ,SAAS;QACnB;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,EAAE,QAAQ,EAAE,IAAI,EAA+C,GAC1E,IAAA,oJAAU,EAAC,UAAU;QACvB,WAAW;YACT;YACA,QAAQ,SAAS;QACnB;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,WAAqB,IAAA,oJAAU,EAAC;QAC7C,WAAW;YACT;YACA,QAAQ,SAAS;QACnB;QACA,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QACA;QACA;QACA,WAAW,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,OAAO,SAAS;IACrE;AACF;AAKO,SAAS,kBAAkB,QAAgB;IAChD,OAAO,gBAAgB;QAAE;IAAS;AACpC"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/wiki/hooks/use-all-wiki.ts"],"sourcesContent":["/**\r\n * useAllWiki - Convenience hook for components needing all wiki articles as flat array\r\n */\r\n\r\nimport { useWikiArticles } from './use-wiki';\r\n\r\nexport function useAllWiki() {\r\n  const query = useWikiArticles({ limit: 500 });\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;CAEC,GAED;;AAEO,SAAS;IACd,MAAM,QAAQ,IAAA,2JAAe,EAAC;QAAE,OAAO;IAAI;IAE3C,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border border-border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0EACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 367, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/wiki/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Fuse from 'fuse.js';\r\nimport { useAllWiki } from './hooks/use-all-wiki';\r\nimport { usePageHeader } from '../../contexts/page-header-context';\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '../../components/ui/card';\r\nimport { Button } from '../../components/ui/button';\r\nimport { Input } from '../../components/ui/input';\r\nimport { Search, PlusCircle, User, Calendar } from 'lucide-react';\r\nimport { Badge } from '../../components/ui/badge';\r\nimport type { WikiArticle } from './types';\r\nimport { formatDate, formatDateTime, formatDateTimeSeconds, formatDateCustom, parseDate, getCurrentDate } from '@/lib/date-utils';\r\n\r\nfunction ArticleCard({ article }: { article: WikiArticle }) {\r\n  const router = useRouter();\r\n  const contentSnippet = article.content.split('\\n').find(line => line.trim() && !line.trim().startsWith('#')) || '';\r\n\r\n  return (\r\n    <Card \r\n      className=\"cursor-pointer hover:shadow-md hover:-translate-y-1 transition-transform duration-200\"\r\n      onClick={() => router.push(`/wiki/${article.systemId}`)}\r\n      tabIndex={0}\r\n      onKeyDown={(e) => (e.key === 'Enter' || e.key === ' ') && router.push(`/wiki/${article.systemId}`)}\r\n    >\r\n      <CardHeader>\r\n        <CardTitle>{article.title}</CardTitle>\r\n        <CardDescription className=\"flex items-center gap-4 pt-1\">\r\n            <span className=\"flex items-center gap-1.5\"><User className=\"h-3.5 w-3.5\" /> {article.author}</span>\r\n            <span className=\"flex items-center gap-1.5\"><Calendar className=\"h-3.5 w-3.5\" /> {formatDate(article.updatedAt)}</span>\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <p className=\"text-sm text-muted-foreground line-clamp-2\">{contentSnippet}</p>\r\n        <div className=\"flex flex-wrap gap-2 mt-4\">\r\n            {article.tags?.map(tag => <Badge key={tag} variant=\"secondary\">{tag}</Badge>)}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport function WikiPage() {\r\n  const { data: articles = [] } = useAllWiki();\r\n  const router = useRouter();\r\n  \r\n  const articleStats = React.useMemo(() => {\r\n    return {\r\n      total: articles.length,\r\n      categories: new Set(articles.map((a) => a.category || 'Chưa phân loại')).size,\r\n      tags: new Set(articles.flatMap((a) => a.tags || [])).size,\r\n    };\r\n  }, [articles]);\r\n\r\n  const headerActions = React.useMemo(() => ([\r\n    <Button key=\"add\" size=\"sm\" className=\"h-9 gap-2\" onClick={() => router.push('/wiki/new')}>\r\n      <PlusCircle className=\"mr-2 h-4 w-4\" />\r\n      Thêm bài viết\r\n    </Button>\r\n  ]), [router]);\r\n\r\n  usePageHeader({\r\n    title: 'Wiki nội bộ',\r\n    actions: headerActions,\r\n    breadcrumb: [\r\n      { label: 'Trang chủ', href: '/', isCurrent: false },\r\n      { label: 'Wiki', href: '/wiki', isCurrent: true },\r\n    ],\r\n  });\r\n  const [searchQuery, setSearchQuery] = React.useState('');\r\n\r\n  const fuse = React.useMemo(() => new Fuse(articles, { \r\n    keys: ['title', 'category', 'tags', 'author', 'content'],\r\n    threshold: 0.4,\r\n  }), [articles]);\r\n  \r\n  const filteredArticles = React.useMemo(() => \r\n    searchQuery ? fuse.search(searchQuery).map(result => result.item) : articles,\r\n    [searchQuery, fuse, articles]\r\n  );\r\n  \r\n  const articlesByCategory = React.useMemo(() => {\r\n    return filteredArticles.reduce((acc, article) => {\r\n        const category = article.category || 'Chưa phân loại';\r\n        if (!acc[category]) {\r\n            acc[category] = [];\r\n        }\r\n        acc[category].push(article);\r\n        return acc;\r\n    }, {} as Record<string, WikiArticle[]>);\r\n  }, [filteredArticles]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div className=\"relative w-full sm:max-w-xs\">\r\n          <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Tìm kiếm bài viết...\"\r\n            className=\"w-full pl-8\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n          />\r\n        </div>\r\n        <Button size=\"sm\" className=\"h-9 gap-2\" onClick={() => router.push('/wiki/new')}>\r\n          <PlusCircle className=\"mr-2 h-4 w-4\" /> Tạo bài viết mới\r\n        </Button>\r\n      </div>\r\n\r\n      {Object.keys(articlesByCategory).length > 0 ? (\r\n        <div className=\"space-y-8\">\r\n            {/* FIX: Replaced `Object.entries` with `Object.keys` for iteration to resolve a TypeScript type inference issue where the array of articles was being typed as `unknown`. */}\r\n            {Object.keys(articlesByCategory).map((category) => (\r\n                <section key={category}>\r\n                    <h2 className=\"text-h3 font-semibold tracking-tight mb-4\">{category}</h2>\r\n                    <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n                        {articlesByCategory[category].map((article) => (\r\n                            <React.Fragment key={article.id}>\r\n                                <ArticleCard article={article} />\r\n                            </React.Fragment>\r\n                        ))}\r\n                    </div>\r\n                </section>\r\n            ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"flex h-64 items-center justify-center rounded-lg border border-dashed shadow-sm\">\r\n            <div className=\"flex flex-col items-center gap-1 text-center text-muted-foreground\">\r\n                <h3 className=\"text-h5 font-semibold tracking-tight\">Không tìm thấy bài viết</h3>\r\n                <p className=\"text-sm\">Thử tìm kiếm với từ khóa khác hoặc tạo bài viết mới.</p>\r\n            </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 729, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/app/%28authenticated%29/wiki/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { WikiPage } from '@/features/wiki/page'\r\nexport default WikiPage\r\n"],"names":[],"mappings":";;;;AACA;AADA;;uCAEe,qIAAQ"}}]
}