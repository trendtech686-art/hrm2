{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype BaseCheckboxProps = React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n\r\ntype CheckboxProps = Omit<BaseCheckboxProps, \"checked\" | \"defaultChecked\"> & {\r\n  checked?: CheckboxPrimitive.CheckedState | undefined\r\n  defaultChecked?: CheckboxPrimitive.CheckedState | undefined\r\n}\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  CheckboxProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AASA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kTACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;kBAE3D,cAAA,8OAAC,iLAA2B;YAC1B,WAAW,IAAA,kHAAE,EAAC;sBAEd,cAAA,8OAAC,6MAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border border-border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0EACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/skeleton.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Card, CardContent } from \"../ui/card\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\ninterface SkeletonProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * Skeleton - Base skeleton loading component\r\n */\r\nexport function Skeleton({ className, ...props }: SkeletonProps) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\n/**\r\n * MobileCardSkeleton - Loading placeholder for mobile cards\r\n */\r\nexport function MobileCardSkeleton({ \r\n  count = 3,\r\n  className \r\n}: { \r\n  count?: number | undefined;\r\n  className?: string | undefined;\r\n}) {\r\n  return (\r\n    <>\r\n      {Array.from({ length: count }).map((_, i) => (\r\n        <Card key={i} className={cn(\"overflow-hidden\", className)}>\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"flex items-start space-x-3\">\r\n              {/* Avatar skeleton */}\r\n              <Skeleton className=\"h-12 w-12 rounded-full flex-shrink-0\" />\r\n              \r\n              {/* Content skeleton */}\r\n              <div className=\"flex-1 space-y-2\">\r\n                <Skeleton className=\"h-4 w-3/4\" />\r\n                <Skeleton className=\"h-3 w-1/2\" />\r\n                <div className=\"space-y-1.5 pt-2\">\r\n                  <Skeleton className=\"h-3 w-full\" />\r\n                  <Skeleton className=\"h-3 w-2/3\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Footer skeleton */}\r\n            <div className=\"flex items-center justify-between mt-3 pt-3 border-t border-border\">\r\n              <Skeleton className=\"h-5 w-20\" />\r\n              <Skeleton className=\"h-3 w-24\" />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\n/**\r\n * TableSkeleton - Loading placeholder for tables\r\n */\r\nexport function TableSkeleton({ \r\n  rows = 5,\r\n  columns = 4 \r\n}: { \r\n  rows?: number;\r\n  columns?: number;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {Array.from({ length: rows }).map((_, rowIndex) => (\r\n        <div key={rowIndex} className=\"flex items-center space-x-4\">\r\n          {Array.from({ length: columns }).map((_, colIndex) => (\r\n            <div key={colIndex}>\r\n              <Skeleton \r\n                className={cn(\r\n                  \"h-9\",\r\n                  colIndex === 0 ? \"w-1/4\" : \"flex-1\"\r\n                )}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * CardGridSkeleton - Loading placeholder for card grids\r\n */\r\nexport function CardGridSkeleton({\r\n  count = 4,\r\n  columns = 4\r\n}: {\r\n  count?: number;\r\n  columns?: number;\r\n}) {\r\n  return (\r\n    <div className={`grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-${columns}`}>\r\n      {Array.from({ length: count }).map((_, i) => (\r\n        <Card key={i}>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-start justify-between mb-2\">\r\n              <Skeleton className=\"h-5 w-5 rounded\" />\r\n              <Skeleton className=\"h-4 w-16\" />\r\n            </div>\r\n            <Skeleton className=\"h-8 w-24 mb-2\" />\r\n            <Skeleton className=\"h-3 w-full\" />\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * FormSkeleton - Loading placeholder for forms\r\n */\r\nexport function FormSkeleton({ fields = 6 }: { fields?: number }) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {Array.from({ length: fields }).map((_, i) => (\r\n        <div key={i} className=\"space-y-2\">\r\n          <Skeleton className=\"h-4 w-32\" />\r\n          <Skeleton className=\"h-9 w-full\" />\r\n        </div>\r\n      ))}\r\n      <div className=\"flex justify-end space-x-2 pt-4\">\r\n        <Skeleton className=\"h-9 w-24\" />\r\n        <Skeleton className=\"h-9 w-24\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ChartSkeleton - Loading placeholder for charts\r\n */\r\nexport function ChartSkeleton({ height = \"300px\" }: { height?: string }) {\r\n  return (\r\n    <div className=\"w-full\" style={{ height }}>\r\n      <div className=\"flex items-end justify-between h-full space-x-2 pb-4\">\r\n        {[40, 70, 55, 80, 60, 90, 45].map((h, i) => (\r\n          <div key={i} className=\"flex-1\" style={{ height: `${h}%` }}>\r\n            <Skeleton className=\"w-full h-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"flex justify-between pt-2\">\r\n        {Array.from({ length: 7 }).map((_, i) => (\r\n          <div key={i}>\r\n            <Skeleton className=\"h-3 w-8\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * PageSkeleton - Loading placeholder for full pages\r\n */\r\nexport function PageSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"space-y-2\">\r\n        <Skeleton className=\"h-8 w-48\" />\r\n        <Skeleton className=\"h-4 w-96\" />\r\n      </div>\r\n      \r\n      {/* Actions */}\r\n      <div className=\"flex justify-between\">\r\n        <Skeleton className=\"h-9 w-64\" />\r\n        <Skeleton className=\"h-9 w-32\" />\r\n      </div>\r\n      \r\n      {/* Content */}\r\n      <CardGridSkeleton count={6} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/touch-button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Button } from \"../ui/button\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nconst touchButtonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-12 px-4 py-2 min-w-touch\", // Mobile-first: 48px height\r\n        sm: \"h-9 rounded-md px-3 min-w-touch\",\r\n        lg: \"h-14 rounded-md px-8 min-w-touch-lg\", // 56px height for large touch\r\n        xl: \"h-16 rounded-md px-10 min-w-touch-lg\", // 64px height for extra large\r\n        icon: \"h-12 w-12\", // Square touch target\r\n        \"icon-sm\": \"h-9 w-10\",\r\n        \"icon-lg\": \"h-14 w-14\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nexport interface TouchButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof touchButtonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\n/**\r\n * TouchButton - Mobile-optimized button with minimum 44px touch targets\r\n * Follows Apple HIG and Material Design guidelines for touch interfaces\r\n */\r\nconst TouchButton = React.forwardRef<HTMLButtonElement, TouchButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    return (\r\n      <Button\r\n        className={cn(touchButtonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nTouchButton.displayName = \"TouchButton\";\r\n\r\nexport { TouchButton, touchButtonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,sBAAsB,IAAA,uKAAG,EAC7B,0RACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF;;;CAGC,GACD,MAAM,4BAAc,mNAAgB,CAClC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,qBACE,8OAAC,qIAAM;QACL,WAAW,IAAA,kHAAE,EAAC,oBAAoB;YAAE;YAAS;YAAM;QAAU;QAC7D,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/mobile/empty-state.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { LucideIcon } from \"lucide-react\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { TouchButton } from \"./touch-button\";\r\n\r\ninterface EmptyStateProps {\r\n  icon?: LucideIcon | undefined;\r\n  title: string;\r\n  description?: string | undefined;\r\n  action?: React.ReactNode | undefined;\r\n  className?: string | undefined;\r\n  size?: \"sm\" | \"md\" | \"lg\" | undefined;\r\n}\r\n\r\n/**\r\n * EmptyState - Professional empty state component\r\n * Use cases:\r\n * - No search results\r\n * - Empty lists\r\n * - No data to display\r\n * - First-time user experience\r\n */\r\nexport function EmptyState({\r\n  icon: Icon,\r\n  title,\r\n  description,\r\n  action,\r\n  className,\r\n  size = \"md\",\r\n}: EmptyStateProps) {\r\n  const sizeClasses = {\r\n    sm: {\r\n      container: \"py-8\",\r\n      icon: \"h-12 w-12 mb-3\",\r\n      title: \"text-base\",\r\n      description: \"text-sm\",\r\n    },\r\n    md: {\r\n      container: \"py-12\",\r\n      icon: \"h-16 w-16 mb-4\",\r\n      title: \"text-lg\",\r\n      description: \"text-sm\",\r\n    },\r\n    lg: {\r\n      container: \"py-16\",\r\n      icon: \"h-20 w-20 mb-6\",\r\n      title: \"text-xl\",\r\n      description: \"text-base\",\r\n    },\r\n  };\r\n\r\n  const classes = sizeClasses[size];\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"flex flex-col items-center justify-center px-4 text-center\",\r\n        classes.container,\r\n        className\r\n      )}\r\n    >\r\n      {Icon && (\r\n        <Icon\r\n          className={cn(\r\n            \"text-muted-foreground\",\r\n            classes.icon\r\n          )}\r\n          strokeWidth={1.5}\r\n        />\r\n      )}\r\n      \r\n      <h3 className={cn(\"font-semibold mb-2\", classes.title)}>\r\n        {title}\r\n      </h3>\r\n      \r\n      {description && (\r\n        <p\r\n          className={cn(\r\n            \"text-muted-foreground mb-6 max-w-sm\",\r\n            classes.description\r\n          )}\r\n        >\r\n          {description}\r\n        </p>\r\n      )}\r\n      \r\n      {action && <div className=\"mt-2\">{action}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * SearchEmptyState - Specialized empty state for search results\r\n */\r\nexport function SearchEmptyState({\r\n  searchQuery,\r\n  onClear,\r\n}: {\r\n  searchQuery: string;\r\n  onClear?: () => void;\r\n}) {\r\n  return (\r\n    <EmptyState\r\n      title=\"Không tìm thấy kết quả\"\r\n      description={`Không có kết quả nào phù hợp với \"${searchQuery}\". Thử tìm kiếm với từ khóa khác.`}\r\n      action={\r\n        onClear && (\r\n          <TouchButton variant=\"outline\" onClick={onClear}>\r\n            Xóa bộ lọc\r\n          </TouchButton>\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;AAmBO,SAAS,WAAW,EACzB,MAAM,IAAI,EACV,KAAK,EACL,WAAW,EACX,MAAM,EACN,SAAS,EACT,OAAO,IAAI,EACK;IAChB,MAAM,cAAc;QAClB,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;QACA,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;QACA,IAAI;YACF,WAAW;YACX,MAAM;YACN,OAAO;YACP,aAAa;QACf;IACF;IAEA,MAAM,UAAU,WAAW,CAAC,KAAK;IAEjC,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,8DACA,QAAQ,SAAS,EACjB;;YAGD,sBACC,8OAAC;gBACC,WAAW,IAAA,kHAAE,EACX,yBACA,QAAQ,IAAI;gBAEd,aAAa;;;;;;0BAIjB,8OAAC;gBAAG,WAAW,IAAA,kHAAE,EAAC,sBAAsB,QAAQ,KAAK;0BAClD;;;;;;YAGF,6BACC,8OAAC;gBACC,WAAW,IAAA,kHAAE,EACX,uCACA,QAAQ,WAAW;0BAGpB;;;;;;YAIJ,wBAAU,8OAAC;gBAAI,WAAU;0BAAQ;;;;;;;;;;;;AAGxC;AAKO,SAAS,iBAAiB,EAC/B,WAAW,EACX,OAAO,EAIR;IACC,qBACE,8OAAC;QACC,OAAM;QACN,aAAa,CAAC,kCAAkC,EAAE,YAAY,iCAAiC,CAAC;QAChG,QACE,yBACE,8OAAC,uJAAW;YAAC,SAAQ;YAAU,SAAS;sBAAS;;;;;;;;;;;AAO3D"}},
    {"offset": {"line": 732, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b [&_tr]:border-border\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"group border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-9 px-4 text-left align-middle font-medium text-foreground [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center whitespace-nowrap\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-4 py-1 align-middle whitespace-nowrap [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center\", \r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,wCAAwC;QAAa,GAAG,KAAK;;;;;;AAE9F,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,yEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mGACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kLACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6IACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 841, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\ntype BaseSelectProps = React.ComponentPropsWithoutRef<typeof SelectPrimitive.Root>\r\n\r\ntype SelectProps = Omit<BaseSelectProps, \"value\" | \"defaultValue\"> & {\r\n  value?: string | undefined\r\n  defaultValue?: string | undefined\r\n}\r\n\r\nconst Select = ({ value, defaultValue, ...props }: SelectProps) => {\r\n  const controlledProps: Partial<BaseSelectProps> = {}\r\n\r\n  if (value !== undefined) {\r\n    controlledProps.value = value\r\n  }\r\n\r\n  if (defaultValue !== undefined) {\r\n    controlledProps.defaultValue = defaultValue\r\n  }\r\n\r\n  return <SelectPrimitive.Root {...props} {...controlledProps} />\r\n}\r\nSelect.displayName = SelectPrimitive.Root.displayName\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => {\r\n  const modalId = React.useId();\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const { zIndex } = useModal(modalId, isOpen, 'select');\r\n\r\n  React.useEffect(() => {\r\n    const content = ref && 'current' in ref ? ref.current : null;\r\n    if (!content) return;\r\n\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'data-state') {\r\n          const target = mutation.target as HTMLElement;\r\n          const state = target.getAttribute('data-state');\r\n          setIsOpen(state === 'open');\r\n        }\r\n      });\r\n    });\r\n\r\n    observer.observe(content, { attributes: true, attributeFilter: ['data-state'] });\r\n\r\n    return () => observer.disconnect();\r\n  }, [ref]);\r\n\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  );\r\n})\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1089, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-pagination.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport {\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ChevronsLeft,\r\n  ChevronsRight,\r\n} from \"lucide-react\"\r\n\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"../ui/select\"\r\n\r\ninterface DataTablePaginationProps {\r\n  pageIndex: number;\r\n  pageSize: number;\r\n  pageCount: number;\r\n  rowCount: number;\r\n  selectedRowCount: number;\r\n  setPageIndex: (index: number) => void;\r\n  setPageSize: (size: number) => void;\r\n  canPreviousPage: boolean;\r\n  canNextPage: boolean;\r\n}\r\n\r\nexport function DataTablePagination({\r\n  pageIndex,\r\n  pageSize,\r\n  pageCount,\r\n  rowCount,\r\n  selectedRowCount,\r\n  setPageIndex,\r\n  setPageSize,\r\n  canPreviousPage,\r\n  canNextPage,\r\n}: DataTablePaginationProps) {\r\n  // Generate page numbers to display\r\n  const getPageNumbers = () => {\r\n    const pages: (number | 'ellipsis')[] = [];\r\n    const showEllipsis = pageCount > 7;\r\n    \r\n    if (!showEllipsis) {\r\n      // Show all pages if 7 or fewer\r\n      for (let i = 0; i < pageCount; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      // Always show first page\r\n      pages.push(0);\r\n      \r\n      if (pageIndex <= 3) {\r\n        // Near start: 1 2 3 4 5 ... last\r\n        for (let i = 1; i < 5; i++) {\r\n          pages.push(i);\r\n        }\r\n        pages.push('ellipsis');\r\n        pages.push(pageCount - 1);\r\n      } else if (pageIndex >= pageCount - 4) {\r\n        // Near end: 1 ... N-4 N-3 N-2 N-1 N\r\n        pages.push('ellipsis');\r\n        for (let i = pageCount - 5; i < pageCount; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else {\r\n        // Middle: 1 ... current-1 current current+1 ... last\r\n        pages.push('ellipsis');\r\n        pages.push(pageIndex - 1);\r\n        pages.push(pageIndex);\r\n        pages.push(pageIndex + 1);\r\n        pages.push('ellipsis');\r\n        pages.push(pageCount - 1);\r\n      }\r\n    }\r\n    \r\n    return pages;\r\n  };\r\n  \r\n  const pageNumbers = getPageNumbers();\r\n  \r\n  return (\r\n    <div className=\"flex items-center justify-between px-2\">\r\n      <div className=\"flex-1 text-sm text-muted-foreground\">\r\n        {selectedRowCount} của{\" \"}\r\n        {rowCount} dòng được chọn.\r\n      </div>\r\n      <div className=\"flex items-center space-x-6 lg:space-x-8\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <p className=\"text-sm font-medium\">Số dòng mỗi trang</p>\r\n          <Select\r\n            value={`${pageSize}`}\r\n            onValueChange={(value) => {\r\n              setPageSize(Number(value))\r\n            }}\r\n          >\r\n            <SelectTrigger className=\"w-[70px]\">\r\n              <SelectValue placeholder={`${pageSize}`} />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {[10, 20, 30, 40, 50].map((size) => (\r\n                <SelectItem key={size} value={`${size}`}>\r\n                  {size}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-1\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"px-3\"\r\n            onClick={() => setPageIndex(pageIndex - 1)}\r\n            disabled={!canPreviousPage}\r\n          >\r\n            Previous\r\n          </Button>\r\n          \r\n          {pageNumbers.map((page, idx) => {\r\n            if (page === 'ellipsis') {\r\n              return (\r\n                <span key={`ellipsis-${idx}`} className=\"px-2 text-muted-foreground\">\r\n                  ...\r\n                </span>\r\n              );\r\n            }\r\n            \r\n            return (\r\n              <Button\r\n                key={page}\r\n                variant={pageIndex === page ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                className=\"w-9 p-0\"\r\n                onClick={() => setPageIndex(page)}\r\n              >\r\n                {page + 1}\r\n              </Button>\r\n            );\r\n          })}\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            className=\"px-3\"\r\n            onClick={() => setPageIndex(pageIndex + 1)}\r\n            disabled={!canNextPage}\r\n          >\r\n            Next\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAQA;AACA;;;;AAoBO,SAAS,oBAAoB,EAClC,SAAS,EACT,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,gBAAgB,EAChB,YAAY,EACZ,WAAW,EACX,eAAe,EACf,WAAW,EACc;IACzB,mCAAmC;IACnC,MAAM,iBAAiB;QACrB,MAAM,QAAiC,EAAE;QACzC,MAAM,eAAe,YAAY;QAEjC,IAAI,CAAC,cAAc;YACjB,+BAA+B;YAC/B,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,IAAK;gBAClC,MAAM,IAAI,CAAC;YACb;QACF,OAAO;YACL,yBAAyB;YACzB,MAAM,IAAI,CAAC;YAEX,IAAI,aAAa,GAAG;gBAClB,iCAAiC;gBACjC,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;oBAC1B,MAAM,IAAI,CAAC;gBACb;gBACA,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;YACzB,OAAO,IAAI,aAAa,YAAY,GAAG;gBACrC,oCAAoC;gBACpC,MAAM,IAAI,CAAC;gBACX,IAAK,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW,IAAK;oBAC9C,MAAM,IAAI,CAAC;gBACb;YACF,OAAO;gBACL,qDAAqD;gBACrD,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;gBACvB,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;gBACvB,MAAM,IAAI,CAAC;gBACX,MAAM,IAAI,CAAC,YAAY;YACzB;QACF;QAEA,OAAO;IACT;IAEA,MAAM,cAAc;IAEpB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;oBACZ;oBAAiB;oBAAK;oBACtB;oBAAS;;;;;;;0BAEZ,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAsB;;;;;;0CACnC,8OAAC,qIAAM;gCACL,OAAO,GAAG,UAAU;gCACpB,eAAe,CAAC;oCACd,YAAY,OAAO;gCACrB;;kDAEA,8OAAC,4IAAa;wCAAC,WAAU;kDACvB,cAAA,8OAAC,0IAAW;4CAAC,aAAa,GAAG,UAAU;;;;;;;;;;;kDAEzC,8OAAC,4IAAa;kDACX;4CAAC;4CAAI;4CAAI;4CAAI;4CAAI;yCAAG,CAAC,GAAG,CAAC,CAAC,qBACzB,8OAAC,yIAAU;gDAAY,OAAO,GAAG,MAAM;0DACpC;+CADc;;;;;;;;;;;;;;;;;;;;;;kCAQzB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,qIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,aAAa,YAAY;gCACxC,UAAU,CAAC;0CACZ;;;;;;4BAIA,YAAY,GAAG,CAAC,CAAC,MAAM;gCACtB,IAAI,SAAS,YAAY;oCACvB,qBACE,8OAAC;wCAA6B,WAAU;kDAA6B;uCAA1D,CAAC,SAAS,EAAE,KAAK;;;;;gCAIhC;gCAEA,qBACE,8OAAC,qIAAM;oCAEL,SAAS,cAAc,OAAO,YAAY;oCAC1C,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,aAAa;8CAE3B,OAAO;mCANH;;;;;4BASX;0CAEA,8OAAC,qIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,aAAa,YAAY;gCACxC,UAAU,CAAC;0CACZ;;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 1294, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/sticky-scrollbar.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { cn } from '../../lib/utils';\r\n\r\ninterface StickyScrollbarProps {\r\n  /** Ref to the scrollable element (table container) */\r\n  targetRef: React.RefObject<HTMLDivElement | null>;\r\n  /** Additional CSS classes */\r\n  className?: string | undefined;\r\n}\r\n\r\n/**\r\n * Sticky Horizontal Scrollbar Component\r\n * \r\n * Creates a sticky scrollbar at the bottom of the viewport that syncs with\r\n * the table's horizontal scroll. This allows users to scroll horizontally\r\n * without having to scroll to the bottom of the table first.\r\n */\r\nexport function StickyScrollbar({ targetRef, className }: StickyScrollbarProps) {\r\n  const scrollbarRef = React.useRef<HTMLDivElement>(null);\r\n  const [isVisible, setIsVisible] = React.useState(false);\r\n  const [scrollbarStyle, setScrollbarStyle] = React.useState<React.CSSProperties>({});\r\n  const [isMounted, setIsMounted] = React.useState(false);\r\n  const [updateTrigger, setUpdateTrigger] = React.useState(0); // ✅ Force update trigger\r\n\r\n  // Force re-render after mount to ensure refs are available\r\n  React.useEffect(() => {\r\n    setIsMounted(true);\r\n  }, []);\r\n\r\n  // ✅ Force update when target element changes size (e.g., columns added/removed)\r\n  React.useEffect(() => {\r\n    if (!isMounted || !targetRef.current) return;\r\n    \r\n    const targetElement = targetRef.current;\r\n    \r\n    // Watch for changes to table width/scrollWidth\r\n    const mutationObserver = new MutationObserver(() => {\r\n      setUpdateTrigger(prev => prev + 1);\r\n    });\r\n    \r\n    mutationObserver.observe(targetElement, {\r\n      attributes: true,\r\n      childList: true,\r\n      subtree: true,\r\n    });\r\n    \r\n    return () => {\r\n      mutationObserver.disconnect();\r\n    };\r\n  }, [targetRef, isMounted]);\r\n\r\n  React.useEffect(() => {\r\n    if (!isMounted) return;\r\n    \r\n    const targetElement = targetRef.current;\r\n    const scrollbarElement = scrollbarRef.current;\r\n    \r\n    if (!targetElement || !scrollbarElement) return;\r\n\r\n    let animationFrameId: number;\r\n\r\n    // Check if horizontal scrollbar is needed and update position\r\n    const updateScrollbar = () => {\r\n      const hasHorizontalScroll = targetElement.scrollWidth > targetElement.clientWidth;\r\n      setIsVisible(hasHorizontalScroll);\r\n      \r\n      if (hasHorizontalScroll) {\r\n        // Get the bounding rect to position the scrollbar correctly\r\n        const rect = targetElement.getBoundingClientRect();\r\n        \r\n        // Set the scrollbar position and width to match the table VIEWPORT\r\n        setScrollbarStyle({\r\n          left: `${rect.left}px`,\r\n          width: `${rect.width}px`,\r\n        });\r\n        \r\n        // ✅ FIX: Set the inner content width to match table's FULL scroll width\r\n        // This allows the scrollbar to scroll the full distance\r\n        const scrollContent = scrollbarElement.firstElementChild as HTMLDivElement;\r\n        if (scrollContent) {\r\n          scrollContent.style.width = `${targetElement.scrollWidth}px`;\r\n          scrollContent.style.height = '1px'; // Ensure height for scrollbar\r\n        }\r\n      }\r\n    };\r\n\r\n    // Sync scroll position: sticky scrollbar -> table\r\n    const handleStickyScroll = () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      animationFrameId = requestAnimationFrame(() => {\r\n        if (targetElement.scrollLeft !== scrollbarElement.scrollLeft) {\r\n          targetElement.scrollLeft = scrollbarElement.scrollLeft;\r\n        }\r\n      });\r\n    };\r\n\r\n    // Sync scroll position: table -> sticky scrollbar\r\n    const handleTableScroll = () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      animationFrameId = requestAnimationFrame(() => {\r\n        if (scrollbarElement.scrollLeft !== targetElement.scrollLeft) {\r\n          scrollbarElement.scrollLeft = targetElement.scrollLeft;\r\n        }\r\n      });\r\n    };\r\n\r\n    // Initial update\r\n    updateScrollbar();\r\n\r\n    // Add event listeners\r\n    scrollbarElement.addEventListener('scroll', handleStickyScroll, { passive: true });\r\n    targetElement.addEventListener('scroll', handleTableScroll, { passive: true });\r\n    window.addEventListener('resize', updateScrollbar, { passive: true });\r\n\r\n    // Re-check on content changes\r\n    const resizeObserver = new ResizeObserver(updateScrollbar);\r\n    resizeObserver.observe(targetElement);\r\n\r\n    return () => {\r\n      cancelAnimationFrame(animationFrameId);\r\n      scrollbarElement.removeEventListener('scroll', handleStickyScroll);\r\n      targetElement.removeEventListener('scroll', handleTableScroll);\r\n      window.removeEventListener('resize', updateScrollbar);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [targetRef, isMounted, updateTrigger]); // ✅ Re-run when updateTrigger changes\r\n\r\n  // Always render but conditionally show with visibility\r\n  return (\r\n    <div\r\n      ref={scrollbarRef}\r\n      className={cn(\r\n        \"fixed bottom-0 z-[100] overflow-x-auto overflow-y-hidden\",\r\n        \"h-3 bg-muted/90 backdrop-blur-sm border-t border-border shadow-[0_-2px_12px_rgba(0,0,0,0.08)]\",\r\n        \"transition-opacity duration-200\",\r\n        isVisible ? \"opacity-100\" : \"opacity-0 pointer-events-none\",\r\n        className\r\n      )}\r\n      style={scrollbarStyle}\r\n    >\r\n      {/* Invisible content div to create scrollbar width */}\r\n      <div className=\"h-px pointer-events-none\" />\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1428, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/responsive-data-table.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Trash2, ChevronDown, ChevronsRight } from \"lucide-react\";\r\nimport { useBreakpoint } from \"../../contexts/breakpoint-context\";\r\nimport { Card, CardContent } from \"../ui/card\";\r\nimport { MobileCardSkeleton } from \"../mobile/skeleton\";\r\nimport { EmptyState } from \"../mobile/empty-state\";\r\nimport { TouchButton } from \"../mobile/touch-button\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"../ui/table\";\r\nimport { DataTablePagination } from \"./data-table-pagination\";\r\nimport { Button } from \"../ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"../ui/dropdown-menu\";\r\nimport { StickyScrollbar } from \"./sticky-scrollbar\";\r\nimport type { ColumnDef } from './types';\r\n\r\nexport interface BulkAction<TData> {\r\n  label: string;\r\n  icon?: React.ComponentType<{ className?: string }>;\r\n  onSelect: (selectedRows: TData[]) => void;\r\n}\r\n\r\ninterface DesktopDataTableProps<TData extends { systemId: string }> {\r\n  columns: ColumnDef<TData>[];\r\n  data: TData[];\r\n  pageCount: number;\r\n  pagination: { pageIndex: number; pageSize: number };\r\n  setPagination: (updater: React.SetStateAction<{ pageIndex: number; pageSize: number }>) => void;\r\n  rowCount: number;\r\n  rowSelection: Record<string, boolean>;\r\n  setRowSelection: (updater: React.SetStateAction<Record<string, boolean>>) => void;\r\n  onBulkDelete?: (() => void) | undefined;\r\n  showBulkDeleteButton?: boolean | undefined;\r\n  bulkActions?: BulkAction<TData>[] | undefined;\r\n  pkgxBulkActions?: BulkAction<TData>[] | undefined;\r\n  bulkActionButtons?: React.ReactNode | undefined;\r\n  allSelectedRows: TData[];\r\n  renderSubComponent?: ((row: TData) => React.ReactNode) | undefined;\r\n  expanded: Record<string, boolean>;\r\n  setExpanded: (updater: React.SetStateAction<Record<string, boolean>>) => void;\r\n  sorting: { id: string; desc: boolean };\r\n  setSorting: (updater: React.SetStateAction<{ id: string; desc: boolean }>) => void;\r\n  columnVisibility: Record<string, boolean>;\r\n  setColumnVisibility: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\r\n  columnOrder: string[];\r\n  setColumnOrder: React.Dispatch<React.SetStateAction<string[]>>;\r\n  pinnedColumns: string[];\r\n  setPinnedColumns: React.Dispatch<React.SetStateAction<string[]>>;\r\n  onRowClick?: ((row: TData) => void) | undefined;\r\n  getRowStyle?: ((row: TData) => React.CSSProperties) | undefined;\r\n  className?: string | undefined;\r\n}\r\n\r\ninterface ResponsiveDataTableProps<TData extends { systemId: string }> {\r\n  // Required props\r\n  columns: ColumnDef<TData>[];\r\n  data: TData[];\r\n  \r\n  // Mobile-specific\r\n  renderMobileCard?: ((row: TData, index: number) => React.ReactNode) | undefined;\r\n  mobileCardClassName?: string | undefined;\r\n  autoGenerateMobileCards?: boolean | undefined;\r\n  mobileVirtualized?: boolean | undefined;\r\n  mobileRowHeight?: number | undefined;\r\n  mobileListHeight?: number | undefined;\r\n  \r\n  // States\r\n  isLoading?: boolean | undefined;\r\n  emptyTitle?: string | undefined;\r\n  emptyDescription?: string | undefined;\r\n  emptyAction?: React.ReactNode | undefined;\r\n  \r\n  // Desktop DataTable props\r\n  pageCount: number;\r\n  pagination: { pageIndex: number; pageSize: number };\r\n  setPagination: (updater: React.SetStateAction<{ pageIndex: number; pageSize: number }>) => void;\r\n  rowCount: number;\r\n  rowSelection?: Record<string, boolean> | undefined;\r\n  setRowSelection?: ((updater: React.SetStateAction<Record<string, boolean>>) => void) | undefined;\r\n  onBulkDelete?: (() => void) | undefined;\r\n  showBulkDeleteButton?: boolean | undefined;\r\n  bulkActions?: BulkAction<TData>[] | undefined;\r\n  pkgxBulkActions?: BulkAction<TData>[] | undefined;\r\n  bulkActionButtons?: React.ReactNode | undefined;\r\n  allSelectedRows?: TData[] | undefined;\r\n  renderSubComponent?: ((row: TData) => React.ReactNode) | undefined;\r\n  expanded?: Record<string, boolean> | undefined;\r\n  setExpanded?: ((updater: React.SetStateAction<Record<string, boolean>>) => void) | undefined;\r\n  sorting: { id: string; desc: boolean };\r\n  setSorting: (updater: React.SetStateAction<{ id: string; desc: boolean }>) => void;\r\n  columnVisibility?: Record<string, boolean> | undefined;\r\n  setColumnVisibility?: React.Dispatch<React.SetStateAction<Record<string, boolean>>> | undefined;\r\n  columnOrder?: string[] | undefined;\r\n  setColumnOrder?: React.Dispatch<React.SetStateAction<string[]>> | undefined;\r\n  pinnedColumns?: string[] | undefined;\r\n  setPinnedColumns?: React.Dispatch<React.SetStateAction<string[]>> | undefined;\r\n  onRowClick?: ((row: TData) => void) | undefined;\r\n  getRowStyle?: ((row: TData) => React.CSSProperties) | undefined;\r\n  className?: string | undefined;\r\n}\r\n\r\n/**\r\n * ResponsiveDataTable - Auto-adaptive data display component\r\n * \r\n * Desktop (>= 768px): Full-featured DataTable with sorting, filtering, bulk actions\r\n * Mobile (< 768px): Card-based layout with touch-friendly interactions\r\n * \r\n * Features:\r\n * - Automatic responsive switching\r\n * - Loading states (skeleton)\r\n * - Empty states\r\n * - Mobile pagination\r\n * - Preserves functionality across breakpoints\r\n * \r\n * @example\r\n * <ResponsiveDataTable\r\n *   columns={columns}\r\n *   data={employees}\r\n *   renderMobileCard={(employee) => <EmployeeCard employee={employee} />}\r\n *   pagination={pagination}\r\n *   setPagination={setPagination}\r\n *   // ... other props\r\n * />\r\n */\r\nexport function ResponsiveDataTable<TData extends { systemId: string }>({\r\n  columns,\r\n  data,\r\n  renderMobileCard,\r\n  autoGenerateMobileCards = true,\r\n  mobileCardClassName,\r\n  isLoading = false,\r\n  emptyTitle = \"Không có dữ liệu\",\r\n  emptyDescription,\r\n  emptyAction,\r\n  mobileVirtualized = false,\r\n  mobileRowHeight = 180,\r\n  mobileListHeight = 600,\r\n  pageCount,\r\n  pagination,\r\n  setPagination,\r\n  rowCount,\r\n  rowSelection = {},\r\n  setRowSelection = () => {},\r\n  onBulkDelete,\r\n  showBulkDeleteButton = true,\r\n  bulkActions,\r\n  pkgxBulkActions,\r\n  bulkActionButtons,\r\n  allSelectedRows = [],\r\n  renderSubComponent,\r\n  expanded = {},\r\n  setExpanded = () => {},\r\n  sorting,\r\n  setSorting,\r\n  columnVisibility = {},\r\n  setColumnVisibility = () => {},\r\n  columnOrder = [],\r\n  setColumnOrder = () => {},\r\n  pinnedColumns = [],\r\n  setPinnedColumns = () => {},\r\n  onRowClick,\r\n  getRowStyle,\r\n  className,\r\n}: ResponsiveDataTableProps<TData>) {\r\n  const { isMobile } = useBreakpoint();\r\n  const autoCardColumns = React.useMemo(() => {\r\n    return columns\r\n      .filter(column => {\r\n        if (!column.id) return false;\r\n        if (['select', 'control', 'actions', 'expander'].includes(column.id)) return false;\r\n        if (columnVisibility && columnVisibility[column.id] === false) return false;\r\n        const meta = column.meta as Record<string, any> | undefined;\r\n        if (meta?.hideOnMobileCard) return false;\r\n        return true;\r\n      })\r\n      .slice(0, 6);\r\n  }, [columns, columnVisibility]);\r\n\r\n  const getColumnLabel = React.useCallback((column: ColumnDef<TData>) => {\r\n    if (typeof column.header === 'string') return column.header;\r\n    const meta = column.meta as Record<string, any> | undefined;\r\n    if (meta?.displayName) return meta.displayName;\r\n    return column.id || '';\r\n  }, []);\r\n\r\n  const renderColumnValue = React.useCallback((column: ColumnDef<TData>, row: TData) => {\r\n    if (typeof column.cell === 'function') {\r\n      return column.cell({\r\n        row,\r\n        isSelected: false,\r\n        isExpanded: false,\r\n        onToggleSelect: () => {},\r\n        onToggleExpand: () => {},\r\n      } as any);\r\n    }\r\n    if (column.accessorKey) {\r\n      const value = (row as any)[column.accessorKey as string];\r\n      if (value === undefined || value === null) return '—';\r\n      if (React.isValidElement(value)) return value;\r\n      return String(value);\r\n    }\r\n    return '—';\r\n  }, []);\r\n\r\n  const autoRenderMobileCard = React.useCallback((row: TData) => (\r\n    <MobileCardWrapper>\r\n      <div className=\"space-y-3 text-sm\">\r\n        {autoCardColumns.map(column => (\r\n          <div key={column.id}>\r\n            <div className=\"text-xs uppercase text-muted-foreground font-semibold\">\r\n              {getColumnLabel(column)}\r\n            </div>\r\n            <div className=\"text-base font-medium text-foreground\">\r\n              {renderColumnValue(column, row)}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </MobileCardWrapper>\r\n  ), [autoCardColumns, getColumnLabel, renderColumnValue]);\r\n\r\n  const hasAutoCardSupport = autoGenerateMobileCards !== false && autoCardColumns.length > 0;\r\n  const cardRenderer = renderMobileCard ?? (hasAutoCardSupport ? autoRenderMobileCard : undefined);\r\n  const shouldRenderMobileCards = Boolean(isMobile && cardRenderer);\r\n\r\n  const desktopProps: DesktopDataTableProps<TData> = {\r\n    columns,\r\n    data,\r\n    pageCount,\r\n    pagination,\r\n    setPagination,\r\n    rowCount,\r\n    rowSelection,\r\n    setRowSelection,\r\n    onBulkDelete,\r\n    showBulkDeleteButton,\r\n    bulkActions,\r\n    pkgxBulkActions,\r\n    bulkActionButtons,\r\n    allSelectedRows,\r\n    renderSubComponent,\r\n    expanded,\r\n    setExpanded,\r\n    sorting,\r\n    setSorting,\r\n    columnVisibility,\r\n    setColumnVisibility,\r\n    columnOrder,\r\n    setColumnOrder,\r\n    pinnedColumns,\r\n    setPinnedColumns,\r\n    onRowClick,\r\n    getRowStyle,\r\n    className,\r\n  };\r\n\r\n  // Loading state\r\n  if (isLoading) {\r\n    return shouldRenderMobileCards ? (\r\n      <MobileCardSkeleton count={pagination.pageSize || 10} className={mobileCardClassName} />\r\n    ) : (\r\n      <div className={cn(\"space-y-3\", className)}>\r\n        {Array.from({ length: pagination.pageSize || 10 }).map((_, i) => (\r\n          <div key={i} className=\"h-16 bg-muted animate-pulse rounded\" />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Empty state - only for mobile card mode\r\n  if (data.length === 0 && shouldRenderMobileCards) {\r\n    return (\r\n      <EmptyState\r\n        title={emptyTitle}\r\n        description={emptyDescription}\r\n        action={emptyAction}\r\n        className={className}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Mobile card layout\r\n  if (shouldRenderMobileCards && cardRenderer) {\r\n    if (mobileVirtualized) {\r\n      return (\r\n        <div\r\n          className={cn('pb-4', className)}\r\n          style={{ maxHeight: mobileListHeight, overflowY: 'auto' }}\r\n        >\r\n          {data.map((row, index) => (\r\n            <div\r\n              key={row.systemId}\r\n              className={mobileCardClassName}\r\n              style={{ minHeight: mobileRowHeight }}\r\n            >\r\n              {cardRenderer(row, index)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className={cn(\"space-y-3 pb-4\", className)}>\r\n        {data.map((row, index) => (\r\n          <div key={row.systemId} className={mobileCardClassName}>\r\n            {cardRenderer(row, index)}\r\n          </div>\r\n        ))}\r\n\r\n        {/* Mobile Pagination */}\r\n        {pageCount > 1 && (\r\n          <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n            <TouchButton\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setPagination(p => ({ ...p, pageIndex: Math.max(0, p.pageIndex - 1) }))}\r\n              disabled={pagination.pageIndex === 0}\r\n            >\r\n              Trước\r\n            </TouchButton>\r\n            \r\n            <div className=\"flex flex-col items-center gap-1\">\r\n              <span className=\"text-sm font-medium\">\r\n                Trang {pagination.pageIndex + 1} / {pageCount}\r\n              </span>\r\n              <span className=\"text-xs text-muted-foreground\">\r\n                {rowCount} kết quả\r\n              </span>\r\n            </div>\r\n            \r\n            <TouchButton\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setPagination(p => ({ ...p, pageIndex: Math.min(pageCount - 1, p.pageIndex + 1) }))}\r\n              disabled={pagination.pageIndex >= pageCount - 1}\r\n            >\r\n              Sau\r\n            </TouchButton>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Desktop table layout\r\n  return <DesktopDataTable {...desktopProps} />;\r\n}\r\n\r\nfunction DesktopDataTable<TData extends { systemId: string }>({\r\n  columns,\r\n  data,\r\n  pageCount,\r\n  pagination,\r\n  setPagination,\r\n  rowCount,\r\n  rowSelection,\r\n  setRowSelection,\r\n  onBulkDelete,\r\n  showBulkDeleteButton = true,\r\n  bulkActions,\r\n  pkgxBulkActions,\r\n  bulkActionButtons,\r\n  allSelectedRows,\r\n  renderSubComponent,\r\n  expanded,\r\n  setExpanded,\r\n  sorting,\r\n  setSorting,\r\n  columnVisibility,\r\n  setColumnVisibility,\r\n  columnOrder,\r\n  setColumnOrder,\r\n  pinnedColumns,\r\n  setPinnedColumns,\r\n  onRowClick,\r\n  getRowStyle,\r\n  className,\r\n}: DesktopDataTableProps<TData>) {\r\n  const numSelected = Object.keys(rowSelection).length;\r\n  const isAllPageRowsSelected = data.length > 0 && data.every(row => rowSelection[row.systemId]);\r\n  const isSomePageRowsSelected = !isAllPageRowsSelected && data.some(row => rowSelection[row.systemId]);\r\n  const hasData = data?.length > 0;\r\n  const [columnWidths, setColumnWidths] = React.useState<Record<string, number>>({});\r\n  const stickyCellBg = 'var(--sticky-column-bg, rgba(255, 255, 255, 1))';\r\n  const stickyHeaderBg = 'var(--sticky-column-header-bg, var(--muted))';\r\n\r\n  const handleToggleAllPageRows = (value: boolean) => {\r\n    const newSelection = { ...rowSelection };\r\n    data.forEach(row => {\r\n      if (value) {\r\n        newSelection[row.systemId] = true;\r\n      } else {\r\n        delete newSelection[row.systemId];\r\n      }\r\n    });\r\n    setRowSelection(newSelection);\r\n  };\r\n\r\n  const displayColumns = React.useMemo(() => {\r\n    const expanderColumn: ColumnDef<TData> | null = renderSubComponent\r\n      ? {\r\n          id: 'expander',\r\n          header: () => null,\r\n          cell: ({ isExpanded, onToggleExpand }) => (\r\n            <div className=\"flex items-center justify-center\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onToggleExpand();\r\n                }}\r\n                className=\"h-8 w-8\"\r\n              >\r\n                <ChevronsRight className={cn('h-4 w-4 transition-transform', isExpanded && 'rotate-90')} />\r\n              </Button>\r\n            </div>\r\n          ),\r\n          size: 60,\r\n          meta: { displayName: 'Mở rộng', sticky: 'left' },\r\n        }\r\n      : null;\r\n\r\n    const allConfigurableColumns = expanderColumn ? [expanderColumn, ...columns] : [...columns];\r\n\r\n    const visibleMasterCols = allConfigurableColumns.filter(col => {\r\n      if (col.id === 'expander') return true;\r\n      const isVisible = columnVisibility[col.id];\r\n      return isVisible !== false;\r\n    });\r\n\r\n    const normalizedCols = visibleMasterCols.map(col => {\r\n      if (['select', 'control'].includes(col.id)) {\r\n        return {\r\n          ...col,\r\n          meta: { ...col.meta, sticky: 'left' as const },\r\n        };\r\n      }\r\n\r\n      if (col.id === 'actions') {\r\n        return {\r\n          ...col,\r\n          meta: { ...col.meta, sticky: 'right' as const },\r\n        };\r\n      }\r\n\r\n      return col;\r\n    });\r\n\r\n    const staticLeftCols = normalizedCols.filter(c => {\r\n      const meta = c.meta as any;\r\n      return meta?.sticky === 'left' && !['select', 'control', 'expander'].includes(c.id);\r\n    });\r\n    const staticRightCols = normalizedCols.filter(c => (c.meta as any)?.sticky === 'right');\r\n    const controlCols = normalizedCols.filter(c => ['select', 'control', 'expander'].includes(c.id));\r\n    const bodyCols = normalizedCols.filter(c => {\r\n      const meta = c.meta as any;\r\n      return !meta?.sticky && !['select', 'control', 'expander'].includes(c.id);\r\n    });\r\n\r\n    const orderedBodyCols = [...bodyCols].sort((a, b) => {\r\n      const indexA = columnOrder.indexOf(a.id);\r\n      const indexB = columnOrder.indexOf(b.id);\r\n      if (indexA === -1 && indexB === -1) return 0;\r\n      if (indexA === -1) return 1;\r\n      if (indexB === -1) return -1;\r\n      return indexA - indexB;\r\n    });\r\n\r\n    const userPinnedCols = orderedBodyCols\r\n      .filter(col => pinnedColumns.includes(col.id))\r\n      .map(col => ({\r\n        ...col,\r\n        meta: { ...col.meta, sticky: 'left' as const }\r\n      }));\r\n\r\n    const nonPinnedBodyCols = orderedBodyCols.filter(c => !pinnedColumns.includes(c.id));\r\n\r\n    return [\r\n      ...controlCols,\r\n      ...staticLeftCols,\r\n      ...userPinnedCols,\r\n      ...nonPinnedBodyCols,\r\n      ...staticRightCols,\r\n    ] as ColumnDef<TData>[];\r\n  }, [columns, columnVisibility, columnOrder, pinnedColumns, renderSubComponent]);\r\n\r\n  const leftStickyColumns = React.useMemo(() => displayColumns.filter(c => (c.meta as any)?.sticky === 'left'), [displayColumns]);\r\n  const rightStickyColumns = React.useMemo(() => displayColumns.filter(c => (c.meta as any)?.sticky === 'right'), [displayColumns]);\r\n\r\n  const getColumnWidth = React.useCallback((column: ColumnDef<TData>) => {\r\n    return column.size ?? columnWidths[column.id] ?? ((column.meta as any)?.minWidth ?? 140);\r\n  }, [columnWidths]);\r\n\r\n  const leftOffsets = React.useMemo(() => {\r\n      let offset = 0;\r\n      return leftStickyColumns.map(c => {\r\n          const width = getColumnWidth(c);\r\n          const currentOffset = offset;\r\n          offset += width;\r\n          return currentOffset;\r\n      });\r\n  }, [leftStickyColumns, getColumnWidth]);\r\n\r\n  const rightOffsets = React.useMemo(() => {\r\n      let offset = 0;\r\n      const reversedOffsets = [...rightStickyColumns].reverse().map(c => {\r\n          const width = getColumnWidth(c);\r\n          const currentOffset = offset;\r\n          offset += width;\r\n          return currentOffset;\r\n      });\r\n      return reversedOffsets.reverse();\r\n  }, [rightStickyColumns, getColumnWidth]);\r\n\r\n  const tableContainerRef = React.useRef<HTMLDivElement>(null);\r\n  const headerScrollRef = React.useRef<HTMLDivElement>(null);\r\n  const bodyTableRef = React.useRef<HTMLTableElement>(null);\r\n  const headerTableRef = React.useRef<HTMLTableElement>(null);\r\n  const fallbackTableRef = React.useCallback((node: HTMLTableElement | null) => {\r\n    headerTableRef.current = node;\r\n    bodyTableRef.current = node;\r\n  }, []);\r\n\r\n  const syncScroll = (source: 'header' | 'body') => {\r\n    if (!headerScrollRef.current || !tableContainerRef.current) return;\r\n\r\n    if (source === 'body') {\r\n      headerScrollRef.current.scrollLeft = tableContainerRef.current.scrollLeft;\r\n    } else {\r\n      tableContainerRef.current.scrollLeft = headerScrollRef.current.scrollLeft;\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!hasData) return;\r\n    if (!headerTableRef.current) return;\r\n\r\n    const syncWidths = () => {\r\n      const bodyTable = bodyTableRef.current;\r\n      const headerTable = headerTableRef.current;\r\n      if (!headerTable) return;\r\n\r\n      const bodyRow = bodyTable?.querySelector('tbody tr:first-child');\r\n      const headerRow = headerTable.querySelector('thead tr:last-child');\r\n      if (!headerRow) return;\r\n\r\n      const bodyCells = bodyRow ? Array.from(bodyRow.querySelectorAll('td')) : [];\r\n      const headerCells = Array.from(headerRow.querySelectorAll('th'));\r\n      const nextWidthMap: Record<string, number> = {};\r\n\r\n      displayColumns.forEach((column, index) => {\r\n        const sourceCell = bodyCells[index];\r\n        const fallbackCell = headerCells[index];\r\n        const width = sourceCell?.getBoundingClientRect().width || fallbackCell?.getBoundingClientRect().width;\r\n        if (width && headerCells[index]) {\r\n          headerCells[index].style.width = `${width}px`;\r\n          headerCells[index].style.minWidth = `${width}px`;\r\n          headerCells[index].style.maxWidth = `${width}px`;\r\n          nextWidthMap[column.id] = width;\r\n        }\r\n      });\r\n\r\n      if (bodyTable) {\r\n        headerTable.style.width = `${bodyTable.getBoundingClientRect().width}px`;\r\n      }\r\n\r\n      setColumnWidths(prev => {\r\n        let changed = false;\r\n        const updated = { ...prev };\r\n        Object.entries(nextWidthMap).forEach(([key, width]) => {\r\n          if (prev[key] !== width) {\r\n            changed = true;\r\n            updated[key] = width;\r\n          }\r\n        });\r\n        return changed ? updated : prev;\r\n      });\r\n    };\r\n\r\n    syncWidths();\r\n    window.addEventListener('resize', syncWidths);\r\n\r\n    const resizeObserver = new ResizeObserver(syncWidths);\r\n    if (bodyTableRef.current) {\r\n      resizeObserver.observe(bodyTableRef.current);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', syncWidths);\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [data, displayColumns, hasData]);\r\n\r\n  const renderHeaderRow = (isSticky: boolean) => (\r\n    <TableRow className=\"h-9\">\r\n      {displayColumns.map((column, colIndex) => {\r\n        const stickyMeta = isSticky ? (column.meta as any)?.sticky : undefined;\r\n        const hasFixedSize = column.size !== undefined;\r\n        const fallbackMinWidth = (column.meta as any)?.minWidth ?? 140;\r\n\r\n        const style: React.CSSProperties = {};\r\n\r\n        if (hasFixedSize) {\r\n          style.width = column.size;\r\n          style.minWidth = column.size;\r\n          style.maxWidth = column.size;\r\n        } else {\r\n          style.minWidth = fallbackMinWidth;\r\n        }\r\n\r\n        let thClassName = \"bg-muted whitespace-nowrap\";\r\n\r\n        const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1;\r\n        const isFirstRightSticky = stickyMeta === 'right' && colIndex === displayColumns.length - rightStickyColumns.length;\r\n\r\n        if (isSticky && stickyMeta === 'left') {\r\n          const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id);\r\n          if (stickyIndex !== -1) {\r\n            (style as any).position = 'sticky';\r\n            (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n            (style as any).top = 0;\r\n            (style as any).backgroundColor = stickyHeaderBg;\r\n            thClassName = cn(thClassName, \"z-30 bg-muted shadow-sm\");\r\n          }\r\n        } else if (isSticky && stickyMeta === 'right') {\r\n          const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id);\r\n          if (stickyIndex !== -1) {\r\n            (style as any).position = 'sticky';\r\n            (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n            (style as any).top = 0;\r\n            (style as any).backgroundColor = stickyHeaderBg;\r\n            thClassName = cn(thClassName, \"z-30 bg-muted shadow-[-2px_0_4px_-2px_rgba(0,0,0,0.1)]\");\r\n          }\r\n        }\r\n\r\n        if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n          thClassName = cn(thClassName, \"px-2 text-center\");\r\n        }\r\n\r\n        return (\r\n          <TableHead\r\n            key={column.id}\r\n            style={style}\r\n            className={cn(thClassName, {\r\n              \"border-r border-border\": isSticky && isLastLeftSticky,\r\n            })}\r\n          >\r\n            {typeof column.header === 'function'\r\n              // @ts-ignore\r\n              ? column.header({\r\n                  isAllPageRowsSelected,\r\n                  isSomePageRowsSelected,\r\n                  onToggleAll: handleToggleAllPageRows,\r\n                  sorting,\r\n                  setSorting,\r\n                })\r\n              : column.header}\r\n          </TableHead>\r\n        );\r\n      })}\r\n    </TableRow>\r\n  );\r\n\r\n  return (\r\n    <div className={cn(\"flex flex-col w-full\", className)}>\r\n      {hasData ? (\r\n        <>\r\n          <div\r\n            ref={headerScrollRef}\r\n            onScroll={() => syncScroll('header')}\r\n            className=\"sticky top-32 z-30 overflow-x-auto rounded-t-md border border-border border-b-0 bg-muted [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n          >\r\n            <Table ref={headerTableRef}>\r\n              <TableHeader className=\"bg-muted shadow-sm\">\r\n                {numSelected > 0 && (\r\n                  <tr className=\"absolute inset-x-0 top-0 z-50 h-9 bg-muted/95 backdrop-blur-sm border-b border-border shadow-md\">\r\n                    <th className=\"sticky left-0 z-[60] bg-muted/95 backdrop-blur-sm px-3 w-[48px]\">\r\n                      {columns.find(c => c.id === 'select') &&\r\n                        typeof columns.find(c => c.id === 'select')!.header === 'function' &&\r\n                        // @ts-ignore\r\n                        columns.find(c => c.id === 'select')!.header({\r\n                          isAllPageRowsSelected,\r\n                          isSomePageRowsSelected,\r\n                          onToggleAll: handleToggleAllPageRows,\r\n                        })\r\n                      }\r\n                    </th>\r\n                    <th className=\"sticky left-[48px] z-[60] h-9 bg-muted/95 backdrop-blur-sm\">\r\n                      <div className=\"flex items-center gap-3 px-4\">\r\n                        <span className=\"text-sm font-medium\">{numSelected} mục đã chọn</span>\r\n                        {bulkActions && bulkActions.length > 0 && (\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                Action\r\n                                <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"start\">\r\n                              {bulkActions.map((action, index) => (\r\n                                <DropdownMenuItem\r\n                                  key={index}\r\n                                  onSelect={() => action.onSelect(allSelectedRows)}\r\n                                  disabled={(action as any).disabled}\r\n                                >\r\n                                  {action.icon && <action.icon className=\"mr-2 h-4 w-4\" />}\r\n                                  {action.label}\r\n                                </DropdownMenuItem>\r\n                              ))}\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        )}\r\n                        {pkgxBulkActions && pkgxBulkActions.length > 0 && (\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                PKGX\r\n                                <ChevronDown className=\"ml-2 h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"start\">\r\n                              {pkgxBulkActions.map((action, index) => (\r\n                                <DropdownMenuItem\r\n                                  key={index}\r\n                                  onSelect={() => action.onSelect(allSelectedRows)}\r\n                                  disabled={(action as any).disabled}\r\n                                  className={(action as any).variant === 'destructive' ? 'text-destructive focus:text-destructive' : ''}\r\n                                >\r\n                                  {action.icon && <action.icon className=\"mr-2 h-4 w-4\" />}\r\n                                  {action.label}\r\n                                </DropdownMenuItem>\r\n                              ))}\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        )}\r\n                        {bulkActionButtons}\r\n                      </div>\r\n                    </th>\r\n                  </tr>\r\n                )}\r\n                {renderHeaderRow(true)}\r\n              </TableHeader>\r\n            </Table>\r\n          </div>\r\n\r\n          <div\r\n            ref={tableContainerRef}\r\n            onScroll={() => syncScroll('body')}\r\n            className=\"rounded-b-md border border-border bg-background overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n          >\r\n            <Table ref={bodyTableRef}>\r\n              <TableBody>\r\n                {data.map((row, rowIndex) => (\r\n                  <React.Fragment key={`${row.systemId}-${rowIndex}`}>\r\n                    <TableRow\r\n                      data-state={rowSelection[row.systemId] && \"selected\"}\r\n                      onClick={() => onRowClick?.(row)}\r\n                      className={cn('group', onRowClick && 'cursor-pointer')}\r\n                      style={getRowStyle?.(row)}\r\n                    >\r\n                      {displayColumns.map((column, colIndex) => {\r\n                        const isInteractiveColumn = ['select', 'control', 'actions', 'expander'].includes(column.id);\r\n\r\n                        const stickyMeta = (column.meta as any)?.sticky;\r\n                        const hasFixedSize = column.size !== undefined;\r\n                        const fallbackMinWidth = (column.meta as any)?.minWidth ?? 140;\r\n\r\n                        const style: React.CSSProperties = {};\r\n\r\n                        if (hasFixedSize) {\r\n                          style.width = column.size;\r\n                          style.minWidth = column.size;\r\n                          style.maxWidth = column.size;\r\n                        } else {\r\n                          style.minWidth = fallbackMinWidth;\r\n                        }\r\n\r\n                        let tdClassName = \"\";\r\n\r\n                        const isLastLeftSticky = stickyMeta === 'left' && colIndex === leftStickyColumns.length - 1;\r\n\r\n                        if (stickyMeta === 'left') {\r\n                          const stickyIndex = leftStickyColumns.findIndex(c => c.id === column.id);\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).left = `${leftOffsets[stickyIndex]}px`;\r\n                            const rowBgColor = getRowStyle?.(row)?.backgroundColor;\r\n                            (style as any).backgroundColor = rowBgColor || stickyCellBg;\r\n                            tdClassName = cn(\r\n                              \"z-20 shadow-[2px_0_6px_rgba(0,0,0,0.05)]\",\r\n                              \"bg-muted text-foreground group-hover:bg-muted group-data-[state=selected]:bg-muted\"\r\n                            );\r\n                          }\r\n                        } else if (stickyMeta === 'right') {\r\n                          const stickyIndex = rightStickyColumns.findIndex(c => c.id === column.id);\r\n                          if (stickyIndex !== -1) {\r\n                            (style as any).position = 'sticky';\r\n                            (style as any).right = `${rightOffsets[stickyIndex]}px`;\r\n                            const rowBgColor = getRowStyle?.(row)?.backgroundColor;\r\n                            (style as any).backgroundColor = rowBgColor || stickyCellBg;\r\n                            tdClassName = cn(\r\n                              \"z-20\",\r\n                              \"bg-muted text-foreground group-hover:bg-muted group-data-[state=selected]:bg-muted shadow-[-2px_0_6px_rgba(0,0,0,0.08)]\"\r\n                            );\r\n                          }\r\n                        }\r\n\r\n                        if (['control', 'select', 'expander', 'actions'].includes(column.id)) {\r\n                          tdClassName = cn(tdClassName, \"px-2 text-center\");\r\n                        }\r\n\r\n                        return (\r\n                          <TableCell\r\n                            key={column.id}\r\n                            style={style}\r\n                            className={cn(tdClassName, {\r\n                              \"border-r border-border\": isLastLeftSticky,\r\n                            })}\r\n                            onClick={isInteractiveColumn ? (e) => e.stopPropagation() : undefined}\r\n                          >\r\n                            {column.cell({\r\n                              row,\r\n                              isSelected: !!rowSelection[row.systemId],\r\n                              isExpanded: !!expanded[row.systemId],\r\n                              onToggleSelect: (value) => {\r\n                                setRowSelection(prev => {\r\n                                  const newSelection = { ...prev };\r\n                                  if (value) {\r\n                                    newSelection[row.systemId] = true;\r\n                                  } else {\r\n                                    delete newSelection[row.systemId];\r\n                                  }\r\n                                  return newSelection;\r\n                                });\r\n                              },\r\n                              onToggleExpand: () => setExpanded(prev => ({ ...prev, [row.systemId]: !prev[row.systemId] })),\r\n                            })}\r\n                          </TableCell>\r\n                        );\r\n                      })}\r\n                    </TableRow>\r\n                    {expanded[row.systemId] && renderSubComponent && (\r\n                      <TableRow>\r\n                        <TableCell colSpan={displayColumns.length} className=\"p-0\">\r\n                          {renderSubComponent(row)}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    )}\r\n                  </React.Fragment>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div\r\n          ref={tableContainerRef}\r\n          className=\"rounded-md border border-border bg-background overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\"\r\n        >\r\n          <Table ref={fallbackTableRef}>\r\n            <TableHeader className=\"bg-muted shadow-sm\">\r\n              {renderHeaderRow(true)}\r\n            </TableHeader>\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell colSpan={displayColumns.length} className=\"h-24 text-center\">\r\n                  Không có dữ liệu.\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex-shrink-0 border-t border-border bg-background px-6 py-3\">\r\n        <DataTablePagination\r\n          pageIndex={pagination.pageIndex}\r\n          pageSize={pagination.pageSize}\r\n          pageCount={pageCount}\r\n          setPageIndex={(index) => setPagination(p => ({ ...p, pageIndex: index }))}\r\n          setPageSize={(size) => setPagination({ pageIndex: 0, pageSize: size })}\r\n          canPreviousPage={pagination.pageIndex > 0}\r\n          canNextPage={pagination.pageIndex < pageCount - 1}\r\n          rowCount={rowCount}\r\n          selectedRowCount={numSelected}\r\n        />\r\n      </div>\r\n\r\n      <StickyScrollbar targetRef={tableContainerRef} />\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * MobileCardWrapper - Helper component for consistent mobile card styling\r\n */\r\nexport function MobileCardWrapper({\r\n  children,\r\n  onClick,\r\n  className,\r\n}: {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <Card\r\n      className={cn(\r\n        \"hover:shadow-md transition-shadow\",\r\n        onClick && \"cursor-pointer\",\r\n        className\r\n      )}\r\n      onClick={onClick}\r\n    >\r\n      <CardContent className=\"p-4\">\r\n        {children}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2512, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\n// Use the original Dialog component\r\nconst Dialog = DialogPrimitive.Root\r\n\r\n// Create a Context to pass ID through the Dialog component tree\r\nconst DialogContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst DialogProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <DialogContext.Provider value={id}>{children}</DialogContext.Provider>;\r\n};\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> & { \r\n    id?: string;\r\n    open?: boolean;\r\n  }\r\n>(({ className, children, id: propId, open, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(DialogContext);\r\n  const id = propId || contextId || `dialog-${React.useId()}`;\r\n  \r\n  // Register with our modal context using the open prop\r\n  const { zIndex } = useModal(id, !!open, 'dialog');\r\n  \r\n  return (\r\n    <DialogPortal>\r\n      {/* Sử dụng overlay chỉ dành cho Dialog */}\r\n      <DialogOverlay style={{ zIndex: zIndex - 1 }} />\r\n      <DialogPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"dialog-content fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg sm:rounded-lg\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <DialogProvider id={id}>\r\n          {children}\r\n          <DialogPrimitive.Close\r\n            aria-label=\"Đóng\"\r\n            className=\"absolute right-4 top-4 flex h-9 w-9 items-center justify-center rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">Đóng</span>\r\n          </DialogPrimitive.Close>\r\n        </DialogProvider>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n})\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n  DialogProvider,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;;;;;;;AAEA,oCAAoC;AACpC,MAAM,SAAS,0KAAoB;AAEnC,gEAAgE;AAChE,MAAM,8BAAgB,sNAAmB,CAAS;AAElD,wCAAwC;AACxC,MAAM,iBAAiB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IACjF,qBAAO,8OAAC,cAAc,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC7C;AAEA,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAMpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IACtD,gDAAgD;IAChD,MAAM,YAAY,mNAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,OAAO,EAAE,8MAAW,IAAI;IAE3D,sDAAsD;IACtD,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,yIAAQ,EAAC,IAAI,CAAC,CAAC,MAAM;IAExC,qBACE,8OAAC;;0BAEC,8OAAC;gBAAc,OAAO;oBAAE,QAAQ,SAAS;gBAAE;;;;;;0BAC3C,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,kLACA;gBAEF,OAAO;oBAAE;gBAAO;gBACf,GAAG,KAAK;0BAET,cAAA,8OAAC;oBAAe,IAAI;;wBACjB;sCACD,8OAAC,2KAAqB;4BACpB,cAAW;4BACX,WAAU;;8CAEV,8OAAC,iMAAC;oCAAC,WAAU;;;;;;8CACb,8OAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AACA,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 2691, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/command.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\r\nimport { Command as CommandPrimitive } from \"cmdk\"\r\nimport { Search } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Dialog, DialogContent } from \"./dialog\"\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCommand.displayName = CommandPrimitive.displayName\r\n\r\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b border-border px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => (\r\n  <CommandPrimitive.Empty\r\n    ref={ref}\r\n    className=\"py-6 text-center text-sm\"\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 h-px bg-border\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName\r\n\r\nconst CommandShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCommandShortcut.displayName = \"CommandShortcut\"\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAEA;AACA;;;;;;;AAEA,MAAM,wBAAU,mNAAgB,CAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iJAAgB;QACf,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;AAGb,QAAQ,WAAW,GAAG,iJAAgB,CAAC,WAAW;AAElD,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,GAAG,OAAoB;IACxD,qBACE,8OAAC,qIAAM;QAAE,GAAG,KAAK;kBACf,cAAA,8OAAC,4IAAa;YAAC,WAAU;sBACvB,cAAA,8OAAC;gBAAQ,WAAU;0BAChB;;;;;;;;;;;;;;;;AAKX;AAEA,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;QAAgD,sBAAmB;;0BAChF,8OAAC,gNAAM;gBAAC,WAAU;;;;;;0BAClB,8OAAC,iJAAgB,CAAC,KAAK;gBACrB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,0JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAKf,aAAa,WAAW,GAAG,iJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iJAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,mDAAmD;QAChE,GAAG,KAAK;;;;;;AAIb,YAAY,WAAW,GAAG,iJAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,OAAO,oBACR,8OAAC,iJAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;;;;;;AAIb,aAAa,WAAW,GAAG,iJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iJAAgB,CAAC,KAAK;QACrB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;AAIb,aAAa,WAAW,GAAG,iJAAgB,CAAC,KAAK,CAAC,WAAW;AAE7D,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iJAAgB,CAAC,SAAS;QACzB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,wBAAwB;QACrC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,iJAAgB,CAAC,SAAS,CAAC,WAAW;AAErE,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iJAAgB,CAAC,IAAI;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6TACA;QAED,GAAG,KAAK;;;;;;AAIb,YAAY,WAAW,GAAG,iJAAgB,CAAC,IAAI,CAAC,WAAW;AAE3D,MAAM,kBAAkB,CAAC,EACvB,SAAS,EACT,GAAG,OACmC;IACtC,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf;AACA,gBAAgB,WAAW,GAAG"}},
    {"offset": {"line": 2850, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\n// Context to pass popover ID through the component tree\r\nconst PopoverContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst PopoverProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <PopoverContext.Provider value={id}>{children}</PopoverContext.Provider>;\r\n};\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content> & {\r\n    id?: string;\r\n  }\r\n>(({ className, align = \"center\", sideOffset = 4, id: propId, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(PopoverContext);\r\n  const id = propId || contextId || `popover-${React.useId()}`;\r\n  \r\n  // Get open state from props\r\n  const [open, setOpen] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (props[\"data-state\"] === \"open\") {\r\n      setOpen(true);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n  }, [props[\"data-state\"]]);\r\n  \r\n  // Register with our modal context\r\n  const { zIndex } = useModal(id, open, 'popover');\r\n  \r\n  return (\r\n    <PopoverPrimitive.Portal>\r\n      <PopoverPrimitive.Content\r\n        ref={ref}\r\n        align={align}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <PopoverProvider id={id}>\r\n          {props.children}\r\n        </PopoverProvider>\r\n      </PopoverPrimitive.Content>\r\n    </PopoverPrimitive.Portal>\r\n  );\r\n})\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverProvider }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAQA,MAAM,UAAU,2KAAqB;AAErC,MAAM,iBAAiB,8KAAwB;AAE/C,wDAAwD;AACxD,MAAM,+BAAiB,sNAAmB,CAAS;AAEnD,wCAAwC;AACxC,MAAM,kBAAkB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IAClF,qBAAO,8OAAC,eAAe,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC9C;AAEA,MAAM,+BAAiB,mNAAgB,CAKrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,IAAI,MAAM,EAAE,GAAG,OAAO,EAAE;IACxE,gDAAgD;IAChD,MAAM,YAAY,mNAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,QAAQ,EAAE,8MAAW,IAAI;IAE5D,4BAA4B;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,iNAAc,CAAC;IACvC,kNAAe,CAAC;QACd,IAAI,KAAK,CAAC,aAAa,KAAK,QAAQ;YAClC,QAAQ;QACV,OAAO;YACL,QAAQ;QACV;IACF,GAAG;QAAC,KAAK,CAAC,aAAa;KAAC;IAExB,kCAAkC;IAClC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,yIAAQ,EAAC,IAAI,MAAM;IAEtC,qBACE,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,kHAAE,EACX,8LACA;YAEF,OAAO;gBAAE;YAAO;YACf,GAAG,KAAK;sBAET,cAAA,8OAAC;gBAAgB,IAAI;0BAClB,MAAM,QAAQ;;;;;;;;;;;;;;;;AAKzB;AACA,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW"}},
    {"offset": {"line": 2938, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,mNAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,6KAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,kHAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,6KAAuB,CAAC,WAAW"}},
    {"offset": {"line": 2968, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-faceted-filter.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Check, PlusCircle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Badge } from \"../ui/badge\"\r\nimport { Button } from \"../ui/button\"\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n} from \"../ui/command\"\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"../ui/popover\"\r\nimport { Separator } from \"../ui/separator\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\ninterface DataTableFacetedFilterProps {\r\n  title?: string\r\n  options: {\r\n    label: string\r\n    value: string\r\n    icon?: React.ComponentType<{ className?: string }>\r\n  }[]\r\n  selectedValues: Set<string>\r\n  onSelectedValuesChange: (values: Set<string>) => void\r\n}\r\n\r\nexport function DataTableFacetedFilter({\r\n  title,\r\n  options,\r\n  selectedValues,\r\n  onSelectedValuesChange\r\n}: DataTableFacetedFilterProps) {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const modalId = React.useId();\r\n  useModal(modalId, isOpen);\r\n\r\n  return (\r\n    <Popover open={isOpen} onOpenChange={setIsOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Button \r\n          variant=\"outline\" \r\n          size=\"sm\" \r\n          className=\"border-dashed flex items-center px-3 text-sm w-full sm:w-auto justify-start\"\r\n        >\r\n          <PlusCircle className=\"mr-1.5 h-3.5 w-3.5 flex-shrink-0\" />\r\n          <span className=\"truncate\">{title}</span>\r\n          {selectedValues.size > 0 && (\r\n            <>\r\n              <Separator orientation=\"vertical\" className=\"mx-1.5 h-3.5\" />\r\n              <Badge\r\n                variant=\"secondary\"\r\n                className=\"rounded-sm px-1 font-normal text-xs sm:hidden ml-auto\"\r\n              >\r\n                {selectedValues.size}\r\n              </Badge>\r\n              <div className=\"hidden space-x-1 sm:flex\">\r\n                {selectedValues.size > 2 ? (\r\n                  <Badge\r\n                    variant=\"secondary\"\r\n                    className=\"rounded-sm px-1 font-normal text-xs\"\r\n                  >\r\n                    {selectedValues.size} selected\r\n                  </Badge>\r\n                ) : (\r\n                  options\r\n                    .filter((option) => selectedValues.has(option.value))\r\n                    .map((option) => (\r\n                      <Badge\r\n                        variant=\"secondary\"\r\n                        key={option.value}\r\n                        className=\"rounded-sm px-1 font-normal text-xs\"\r\n                      >\r\n                        {option.label}\r\n                      </Badge>\r\n                    ))\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </Button>\r\n      </PopoverTrigger>\r\n      {/* FIX: Removed unsupported `align` prop. */}\r\n      <PopoverContent className=\"w-[200px] p-0\">\r\n        <Command>\r\n          <CommandInput placeholder={title} />\r\n          <CommandList>\r\n            <CommandEmpty>No results found.</CommandEmpty>\r\n            <CommandGroup>\r\n              {options.map((option) => {\r\n                const isSelected = selectedValues.has(option.value)\r\n                return (\r\n                  <CommandItem\r\n                    key={option.value}\r\n                    onSelect={() => {\r\n                      const newSelectedValues = new Set(selectedValues)\r\n                      if (isSelected) {\r\n                        newSelectedValues.delete(option.value)\r\n                      } else {\r\n                        newSelectedValues.add(option.value)\r\n                      }\r\n                      onSelectedValuesChange(newSelectedValues)\r\n                    }}\r\n                  >\r\n                    <div\r\n                      className={cn(\r\n                        \"mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary\",\r\n                        isSelected\r\n                          ? \"bg-primary text-primary-foreground\"\r\n                          : \"opacity-50 [&_svg]:invisible\"\r\n                      )}\r\n                    >\r\n                      <Check className={cn(\"h-4 w-4\")} />\r\n                    </div>\r\n                    {option.icon && (\r\n                      <option.icon className=\"mr-2 h-4 w-4 text-muted-foreground\" />\r\n                    )}\r\n                    <span>{option.label}</span>\r\n                  </CommandItem>\r\n                )\r\n              })}\r\n            </CommandGroup>\r\n            {selectedValues.size > 0 && (\r\n              <>\r\n                <CommandSeparator />\r\n                <CommandGroup>\r\n                  <CommandItem\r\n                    onSelect={() => onSelectedValuesChange(new Set())}\r\n                    className=\"justify-center text-center\"\r\n                  >\r\n                    Clear filters\r\n                  </CommandItem>\r\n                </CommandGroup>\r\n              </>\r\n            )}\r\n          </CommandList>\r\n        </Command>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AASA;AAKA;AACA;;;;;;;;;;;AAaO,SAAS,uBAAuB,EACrC,KAAK,EACL,OAAO,EACP,cAAc,EACd,sBAAsB,EACM;IAC5B,MAAM,CAAC,QAAQ,UAAU,GAAG,iNAAc,CAAC;IAC3C,MAAM,UAAU,8MAAW;IAC3B,IAAA,yIAAQ,EAAC,SAAS;IAElB,qBACE,8OAAC,uIAAO;QAAC,MAAM;QAAQ,cAAc;;0BACnC,8OAAC,8IAAc;gBAAC,OAAO;0BACrB,cAAA,8OAAC,qIAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAU;;sCAEV,8OAAC,gOAAU;4BAAC,WAAU;;;;;;sCACtB,8OAAC;4BAAK,WAAU;sCAAY;;;;;;wBAC3B,eAAe,IAAI,GAAG,mBACrB;;8CACE,8OAAC,2IAAS;oCAAC,aAAY;oCAAW,WAAU;;;;;;8CAC5C,8OAAC,mIAAK;oCACJ,SAAQ;oCACR,WAAU;8CAET,eAAe,IAAI;;;;;;8CAEtB,8OAAC;oCAAI,WAAU;8CACZ,eAAe,IAAI,GAAG,kBACrB,8OAAC,mIAAK;wCACJ,SAAQ;wCACR,WAAU;;4CAET,eAAe,IAAI;4CAAC;;;;;;+CAGvB,QACG,MAAM,CAAC,CAAC,SAAW,eAAe,GAAG,CAAC,OAAO,KAAK,GAClD,GAAG,CAAC,CAAC,uBACJ,8OAAC,mIAAK;4CACJ,SAAQ;4CAER,WAAU;sDAET,OAAO,KAAK;2CAHR,OAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;0BAanC,8OAAC,8IAAc;gBAAC,WAAU;0BACxB,cAAA,8OAAC,uIAAO;;sCACN,8OAAC,4IAAY;4BAAC,aAAa;;;;;;sCAC3B,8OAAC,2IAAW;;8CACV,8OAAC,4IAAY;8CAAC;;;;;;8CACd,8OAAC,4IAAY;8CACV,QAAQ,GAAG,CAAC,CAAC;wCACZ,MAAM,aAAa,eAAe,GAAG,CAAC,OAAO,KAAK;wCAClD,qBACE,8OAAC,2IAAW;4CAEV,UAAU;gDACR,MAAM,oBAAoB,IAAI,IAAI;gDAClC,IAAI,YAAY;oDACd,kBAAkB,MAAM,CAAC,OAAO,KAAK;gDACvC,OAAO;oDACL,kBAAkB,GAAG,CAAC,OAAO,KAAK;gDACpC;gDACA,uBAAuB;4CACzB;;8DAEA,8OAAC;oDACC,WAAW,IAAA,kHAAE,EACX,kFACA,aACI,uCACA;8DAGN,cAAA,8OAAC,6MAAK;wDAAC,WAAW,IAAA,kHAAE,EAAC;;;;;;;;;;;gDAEtB,OAAO,IAAI,kBACV,8OAAC,OAAO,IAAI;oDAAC,WAAU;;;;;;8DAEzB,8OAAC;8DAAM,OAAO,KAAK;;;;;;;2CAxBd,OAAO,KAAK;;;;;oCA2BvB;;;;;;gCAED,eAAe,IAAI,GAAG,mBACrB;;sDACE,8OAAC,gJAAgB;;;;;sDACjB,8OAAC,4IAAY;sDACX,cAAA,8OAAC,2IAAW;gDACV,UAAU,IAAM,uBAAuB,IAAI;gDAC3C,WAAU;0DACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWnB"}},
    {"offset": {"line": 3208, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 3238, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/data-table/data-table-column-toggle.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Settings2, Search, X, Pin, GripVertical } from \"lucide-react\"\r\n\r\nimport { Button } from \"../ui/button\"\r\nimport { Checkbox } from \"../ui/checkbox\"\r\nimport { Input } from \"../ui/input\"\r\nimport { Label } from \"../ui/label\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"../ui/dialog\"\r\nimport { ScrollArea } from \"../ui/scroll-area\"\r\nimport { cn } from \"../../lib/utils\"\r\nimport type { ColumnDef } from './types'\r\nimport { Separator } from \"../ui/separator\"\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n} from '@dnd-kit/core'\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  useSortable,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\n\r\ninterface DataTableColumnCustomizerProps<TData> {\r\n  children?: React.ReactNode;\r\n  columns: ColumnDef<TData>[];\r\n  columnVisibility: Record<string, boolean>;\r\n  setColumnVisibility: React.Dispatch<React.SetStateAction<Record<string, boolean>>>;\r\n  columnOrder: string[];\r\n  setColumnOrder: React.Dispatch<React.SetStateAction<string[]>>;\r\n  pinnedColumns: string[];\r\n  setPinnedColumns: React.Dispatch<React.SetStateAction<string[]>>;\r\n  onResetToDefault?: () => void;\r\n}\r\n\r\nexport function DataTableColumnCustomizer<TData>({\r\n  children,\r\n  columns,\r\n  columnVisibility,\r\n  setColumnVisibility,\r\n  columnOrder,\r\n  setColumnOrder,\r\n  pinnedColumns,\r\n  setPinnedColumns,\r\n  onResetToDefault,\r\n}: DataTableColumnCustomizerProps<TData>) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  // Local state for changes within the dialog\r\n  const [localVisibility, setLocalVisibility] = React.useState<Record<string, boolean>>({});\r\n  const [localOrder, setLocalOrder] = React.useState<string[]>([]);\r\n  const [localPinned, setLocalPinned] = React.useState<string[]>([]);\r\n  const [search, setSearch] = React.useState('');\r\n  \r\n  // @dnd-kit sensors\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8, // 8px movement to start drag (prevents accidental drags)\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n  \r\n  const allConfigurableColumns = React.useMemo(() => \r\n    columns.filter(c => c.id !== 'select' && c.id !== 'actions' && c.id !== 'control' && c.id !== 'expander'),\r\n    [columns]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      // On open, sync local state with props\r\n      // ✅ FIX: Đảm bảo TẤT CẢ columns có trong localVisibility (không bị undefined)\r\n      const fullVisibility: Record<string, boolean> = {};\r\n      allConfigurableColumns.forEach(col => {\r\n        // Nếu columnVisibility có giá trị → dùng giá trị đó\r\n        // Nếu không → mặc định false (ẩn)\r\n        fullVisibility[col.id] = columnVisibility[col.id] ?? false;\r\n      });\r\n      \r\n      setLocalVisibility(fullVisibility);\r\n      setLocalPinned(pinnedColumns);\r\n      \r\n      const allIds = allConfigurableColumns.map(c => c.id);\r\n      const currentOrder = columnOrder.filter(id => allIds.includes(id));\r\n      const newIds = allIds.filter(id => !currentOrder.includes(id));\r\n      setLocalOrder([...currentOrder, ...newIds]);\r\n\r\n      setSearch('');\r\n    }\r\n  }, [open, columnVisibility, columnOrder, pinnedColumns, allConfigurableColumns]);\r\n\r\n\r\n  const handleSave = () => {\r\n    // ✅ FIX: Merge localVisibility với columnVisibility, giữ nguyên select & actions\r\n    setColumnVisibility(prev => ({\r\n      ...localVisibility,\r\n      select: true,      // Luôn giữ select visible\r\n      actions: true,     // Luôn giữ actions visible\r\n    }));\r\n    setColumnOrder(localOrder);\r\n    setPinnedColumns(localPinned);\r\n    setOpen(false);\r\n  };\r\n  \r\n  const handleReset = () => {\r\n    if (onResetToDefault) {\r\n      onResetToDefault();\r\n      return;\r\n    }\r\n\r\n    const defaultVisibleColumns = [\r\n      'id', 'fullName', 'workEmail', 'phone', 'department', \r\n      'jobTitle', 'hireDate', 'employmentStatus'\r\n    ];\r\n    \r\n    const initialVisibility: Record<string, boolean> = {};\r\n    allConfigurableColumns.forEach(c => {\r\n      initialVisibility[c.id] = defaultVisibleColumns.includes(c.id);\r\n    });\r\n\r\n    setLocalVisibility(initialVisibility);\r\n    setLocalOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n    setLocalPinned(['id']);\r\n  }\r\n\r\n  const toggleColumnVisibility = (colId: string, checked: boolean) => {\r\n    setLocalVisibility(prev => ({ ...prev, [colId]: checked }));\r\n  };\r\n  \r\n  const togglePin = (colId: string) => {\r\n    setLocalPinned(prev => \r\n        prev.includes(colId) \r\n        ? prev.filter(id => id !== colId) \r\n        : [...prev, colId]\r\n    );\r\n  };\r\n\r\n  const availableColumns = React.useMemo(() => \r\n    allConfigurableColumns.filter(c => !localVisibility[c.id] && ((c.meta as any)?.displayName ?? c.id).toLowerCase().includes(search.toLowerCase())),\r\n    [allConfigurableColumns, localVisibility, search]\r\n  );\r\n  \r\n  const { pinnedVisibleColumns, unpinnedVisibleColumns } = React.useMemo(() => {\r\n    const visibleCols = localOrder\r\n      .map(id => allConfigurableColumns.find(c => c.id === id))\r\n      .filter((c): c is ColumnDef<TData> => !!c && localVisibility[c.id]);\r\n\r\n    const pinned = visibleCols.filter(c => localPinned.includes(c.id));\r\n    const unpinned = visibleCols.filter(c => !localPinned.includes(c.id));\r\n    \r\n    return { pinnedVisibleColumns: pinned, unpinnedVisibleColumns: unpinned };\r\n  }, [localOrder, localPinned, localVisibility, allConfigurableColumns]);\r\n\r\n  const groupedAvailableColumns = React.useMemo(() => {\r\n    return availableColumns.reduce((groups, col) => {\r\n        const groupName = (col.meta as any)?.group || 'Thông tin khác';\r\n        if (!groups[groupName]) {\r\n            groups[groupName] = [];\r\n        }\r\n        groups[groupName].push(col);\r\n        return groups;\r\n    }, {} as Record<string, ColumnDef<TData>[]>);\r\n  }, [availableColumns]);\r\n\r\n  const handleDragEnd = (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n    \r\n    if (!over || active.id === over.id) return;\r\n    \r\n    const activeId = active.id as string;\r\n    const overId = over.id as string;\r\n    \r\n    // Check if both are in same group (pinned or unpinned)\r\n    const isActivePinned = localPinned.includes(activeId);\r\n    const isOverPinned = localPinned.includes(overId);\r\n    if (isActivePinned !== isOverPinned) return;\r\n\r\n    setLocalOrder((items) => {\r\n      const oldIndex = items.indexOf(activeId);\r\n      const newIndex = items.indexOf(overId);\r\n      \r\n      if (oldIndex === -1 || newIndex === -1) return items;\r\n      \r\n      return arrayMove(items, oldIndex, newIndex);\r\n    });\r\n  };\r\n  \r\n  const SortableColumnItem = ({ col }: { col: ColumnDef<TData> }) => {\r\n    const {\r\n      attributes,\r\n      listeners,\r\n      setNodeRef,\r\n      transform,\r\n      transition,\r\n      isDragging,\r\n    } = useSortable({ id: col.id });\r\n\r\n    const style = {\r\n      transform: CSS.Transform.toString(transform),\r\n      transition,\r\n    };\r\n\r\n    return (\r\n      <div\r\n        ref={setNodeRef}\r\n        style={style}\r\n        className={cn(\r\n          \"flex items-center p-2 rounded-md group\",\r\n          isDragging ? 'opacity-50' : 'hover:bg-muted/50'\r\n        )}\r\n      >\r\n        <div\r\n          {...attributes}\r\n          {...listeners}\r\n          className=\"cursor-grab active:cursor-grabbing touch-none\"\r\n        >\r\n          <GripVertical className=\"h-5 w-5 mr-2 text-muted-foreground\" />\r\n        </div>\r\n        <span className=\"flex-grow text-sm\">{ (col.meta as any)?.displayName ?? col.id }</span>\r\n        \r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className=\"h-7 w-7\"\r\n          onClick={() => togglePin(col.id)}\r\n        >\r\n          <Pin className={cn(\"h-4 w-4\", localPinned.includes(col.id) ? \"text-primary fill-current\" : \"text-muted-foreground\")} />\r\n        </Button>\r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className=\"h-7 w-7 text-muted-foreground hover:text-destructive\"\r\n          onClick={() => toggleColumnVisibility(col.id, false)}\r\n        >\r\n          <X className=\"h-4 w-4\" />\r\n        </Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        {children || (\r\n          <Button variant=\"outline\" size=\"sm\">\r\n            <Settings2 className=\"mr-2 h-4 w-4\" />\r\n            Điều chỉnh cột\r\n          </Button>\r\n        )}\r\n      </DialogTrigger>\r\n      <DialogContent className=\"max-w-3xl h-[75vh] flex flex-col\" open={open}>\r\n        <DialogHeader>\r\n          <DialogTitle>Điều chỉnh cột hiển thị</DialogTitle>\r\n          <DialogDescription>\r\n            Chọn, sắp xếp và ghim các cột để tùy chỉnh giao diện bảng của bạn.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div className=\"flex flex-col md:flex-row gap-6 flex-grow min-h-0\">\r\n            {/* Left Panel: Available Columns */}\r\n            <div className=\"flex flex-col border rounded-lg flex-1 min-h-0\">\r\n                <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold mb-2\">Thêm cột hiển thị</h3>\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"Tìm kiếm cột...\"\r\n                            className=\"w-full pl-8 h-9\"\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <ScrollArea className=\"flex-grow p-4\">\r\n                    <div className=\"space-y-4\">\r\n                        {Object.keys(groupedAvailableColumns).map((groupName) => {\r\n                            const cols = groupedAvailableColumns[groupName];\r\n                            if (!Array.isArray(cols) || cols.length === 0) return null;\r\n                            return (\r\n                                <div key={groupName}>\r\n                                    <h4 className=\"text-sm font-semibold mb-2 text-muted-foreground\">{groupName}</h4>\r\n                                    <div className=\"space-y-2\">\r\n                                    {cols.map(col => (\r\n                                        <div key={col.id} className=\"flex items-center space-x-2\">\r\n                                            <Checkbox \r\n                                                id={`add-${col.id}`}\r\n                                                checked={localVisibility[col.id] || false}\r\n                                                onCheckedChange={(checked) => toggleColumnVisibility(col.id, !!checked)}\r\n                                            />\r\n                                            <Label htmlFor={`add-${col.id}`} className=\"font-normal text-sm\">{ (col.meta as any)?.displayName ?? col.id }</Label>\r\n                                        </div>\r\n                                    ))}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                         {availableColumns.length === 0 && (\r\n                            <p className=\"text-sm text-muted-foreground text-center py-4\">Không có cột nào.</p>\r\n                        )}\r\n                    </div>\r\n                </ScrollArea>\r\n            </div>\r\n            {/* Right Panel: Visible Columns */}\r\n            <div className=\"flex flex-col border rounded-lg flex-1 min-h-0\">\r\n                 <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold\">Cột hiển thị</h3>\r\n                 </div>\r\n                 <ScrollArea className=\"flex-grow p-2\">\r\n                    <DndContext\r\n                      sensors={sensors}\r\n                      collisionDetection={closestCenter}\r\n                      onDragEnd={handleDragEnd}\r\n                    >\r\n                      <div className=\"space-y-1\">\r\n                        {/* Pinned columns - sortable among themselves */}\r\n                        {pinnedVisibleColumns.length > 0 && (\r\n                          <SortableContext\r\n                            items={pinnedVisibleColumns.map(c => c.id)}\r\n                            strategy={verticalListSortingStrategy}\r\n                          >\r\n                            {pinnedVisibleColumns.map((col) => (\r\n                              <SortableColumnItem key={col.id} col={col} />\r\n                            ))}\r\n                          </SortableContext>\r\n                        )}\r\n                        \r\n                        {pinnedVisibleColumns.length > 0 && unpinnedVisibleColumns.length > 0 && (\r\n                            <div className=\"relative my-2 mx-2\">\r\n                                <Separator />\r\n                                <span className=\"absolute left-1/2 -translate-x-1/2 -top-2 text-xs bg-popover px-2 text-muted-foreground\">Ghim</span>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {/* Unpinned columns - sortable among themselves */}\r\n                        {unpinnedVisibleColumns.length > 0 && (\r\n                          <SortableContext\r\n                            items={unpinnedVisibleColumns.map(c => c.id)}\r\n                            strategy={verticalListSortingStrategy}\r\n                          >\r\n                            {unpinnedVisibleColumns.map((col) => (\r\n                              <SortableColumnItem key={col.id} col={col} />\r\n                            ))}\r\n                          </SortableContext>\r\n                        )}\r\n                        \r\n                        {(pinnedVisibleColumns.length + unpinnedVisibleColumns.length) === 0 && (\r\n                            <p className=\"text-sm text-muted-foreground text-center py-4\">Không có cột nào được hiển thị.</p>\r\n                        )}\r\n                      </div>\r\n                    </DndContext>\r\n                 </ScrollArea>\r\n            </div>\r\n        </div>\r\n        <DialogFooter className=\"pt-6 mt-auto flex-shrink-0\">\r\n          <Button type=\"button\" variant=\"ghost\" size=\"sm\" onClick={handleReset}>\r\n            Quay về mặc định\r\n          </Button>\r\n          <div className=\"flex-grow\" />\r\n          <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => setOpen(false)}>\r\n            Thoát\r\n          </Button>\r\n          <Button type=\"button\" size=\"sm\" onClick={handleSave}>\r\n            Lưu\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3861, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 3888, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/progress.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype ProgressProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  value?: number | null\r\n}\r\n\r\nconst Progress = React.forwardRef<HTMLDivElement, ProgressProps>(\r\n  ({ className, value, ...props }, ref) => {\r\n    const progressValue = value ?? 0;\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        role=\"progressbar\"\r\n        aria-valuenow={progressValue}\r\n        aria-valuemin={0}\r\n        aria-valuemax={100}\r\n        className={cn(\r\n          \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <div\r\n          className=\"h-full w-full flex-1 bg-primary transition-all\"\r\n          style={{ transform: `translateX(-${100 - progressValue}%)` }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n)\r\nProgress.displayName = \"Progress\"\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAMA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE;IAC/B,MAAM,gBAAgB,SAAS;IAE/B,qBACE,8OAAC;QACC,KAAK;QACL,MAAK;QACL,iBAAe;QACf,iBAAe;QACf,iBAAe;QACf,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC;YACC,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,cAAc,EAAE,CAAC;YAAC;;;;;;;;;;;AAInE;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 3930, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border border-border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,2KACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 3995, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/radio-group.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\n// --- Context ---\r\ntype RadioGroupContextType = {\r\n  value: string | number | undefined;\r\n  onValueChange: (value: string | number) => void;\r\n  name?: string | undefined;\r\n};\r\n\r\nconst RadioGroupContext = React.createContext<RadioGroupContextType | undefined>(undefined);\r\n\r\nconst useRadioGroup = () => {\r\n  const context = React.useContext(RadioGroupContext);\r\n  if (!context) {\r\n    throw new Error(\"useRadioGroup must be used within a RadioGroup\");\r\n  }\r\n  return context;\r\n};\r\n\r\n// --- RadioGroup ---\r\nconst RadioGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & {\r\n    value?: string | number | undefined;\r\n    defaultValue?: string | number | undefined;\r\n    onValueChange?: ((value: string | number) => void) | undefined;\r\n    name?: string | undefined;\r\n  }\r\n>(({ className, children, value, defaultValue, onValueChange, name, ...props }, ref) => {\r\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\r\n  const isControlled = value !== undefined;\r\n  const currentValue = isControlled ? value : internalValue;\r\n\r\n  const handleValueChange = (newValue: string | number) => {\r\n    if (!isControlled) {\r\n      setInternalValue(newValue);\r\n    }\r\n    if (onValueChange) {\r\n      onValueChange(newValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <RadioGroupContext.Provider value={{ value: currentValue, onValueChange: handleValueChange, name }}>\r\n      <div ref={ref} role=\"radiogroup\" className={cn(\"grid gap-2\", className)} {...props}>\r\n        {children}\r\n      </div>\r\n    </RadioGroupContext.Provider>\r\n  );\r\n});\r\nRadioGroup.displayName = \"RadioGroup\";\r\n\r\n// --- RadioGroupItem ---\r\nconst RadioGroupItem = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ButtonHTMLAttributes<HTMLButtonElement> & { value: string | number }\r\n>(({ className, value, children, ...props }, ref) => {\r\n  const { value: selectedValue, onValueChange, name } = useRadioGroup();\r\n  const isChecked = selectedValue === value;\r\n  const id = React.useId();\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      id={id}\r\n      type=\"button\"\r\n      role=\"radio\"\r\n      aria-checked={isChecked}\r\n      data-state={isChecked ? \"checked\" : \"unchecked\"}\r\n      onClick={() => onValueChange(value)}\r\n      name={name}\r\n      value={value}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {isChecked && (\r\n        <div className=\"flex items-center justify-center\">\r\n          <div className=\"h-2.5 w-2.5 rounded-full bg-current text-current\" />\r\n        </div>\r\n      )}\r\n    </button>\r\n  );\r\n});\r\nRadioGroupItem.displayName = \"RadioGroupItem\";\r\n\r\n\r\nexport { RadioGroup, RadioGroupItem };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AASA,MAAM,kCAAoB,sNAAmB,CAAoC;AAEjF,MAAM,gBAAgB;IACpB,MAAM,UAAU,mNAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEA,qBAAqB;AACrB,MAAM,2BAAa,mNAAgB,CAQjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9E,MAAM,CAAC,eAAe,iBAAiB,GAAG,iNAAc,CAAC;IACzD,MAAM,eAAe,UAAU;IAC/B,MAAM,eAAe,eAAe,QAAQ;IAE5C,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,cAAc;YACjB,iBAAiB;QACnB;QACA,IAAI,eAAe;YACjB,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE,OAAO;YAAc,eAAe;YAAmB;QAAK;kBAC/F,cAAA,8OAAC;YAAI,KAAK;YAAK,MAAK;YAAa,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAa,GAAG,KAAK;sBAC/E;;;;;;;;;;;AAIT;AACA,WAAW,WAAW,GAAG;AAEzB,yBAAyB;AACzB,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IAC3C,MAAM,EAAE,OAAO,aAAa,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG;IACtD,MAAM,YAAY,kBAAkB;IACpC,MAAM,KAAK,8MAAW;IAEtB,qBACE,8OAAC;QACC,KAAK;QACL,IAAI;QACJ,MAAK;QACL,MAAK;QACL,gBAAc;QACd,cAAY,YAAY,YAAY;QACpC,SAAS,IAAM,cAAc;QAC7B,MAAM;QACN,OAAO;QACP,WAAW,IAAA,kHAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAER,2BACC,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKzB;AACA,eAAe,WAAW,GAAG"}},
    {"offset": {"line": 4095, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium text-muted-foreground ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,uEACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6ZACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 4149, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/shared/excel-file-dropzone.tsx"],"sourcesContent":["/**\r\n * ExcelFileDropzone\r\n * \r\n * Component kéo thả file Excel cho import\r\n * - Hỗ trợ kéo thả\r\n * - Upload lên server staging (tùy chọn)\r\n * - Preview file đã chọn\r\n * - Validate file Excel\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { toast } from 'sonner';\r\nimport { \r\n  FileSpreadsheet, \r\n  Upload, \r\n  X, \r\n  CheckCircle2, \r\n  AlertCircle,\r\n  Loader2,\r\n} from 'lucide-react';\r\nimport { Button } from '../ui/button';\r\nimport { cn } from '../../lib/utils';\r\nimport { FileUploadAPI, type StagingFile } from '../../lib/file-upload-api';\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\ninterface ExcelFile {\r\n  file: File;\r\n  serverFile?: StagingFile; // Optional: nếu đã upload lên server\r\n  status: 'selected' | 'uploading' | 'uploaded' | 'error';\r\n  errorMessage?: string;\r\n}\r\n\r\ninterface ExcelFileDropzoneProps {\r\n  value: ExcelFile | null;\r\n  onChange: (file: ExcelFile | null) => void;\r\n  \r\n  // Upload options\r\n  uploadToServer?: boolean; // Có upload lên server staging không\r\n  sessionId?: string;\r\n  onSessionChange?: (sessionId: string) => void;\r\n  \r\n  // Validation\r\n  maxSize?: number; // Default 10MB\r\n  \r\n  // UI\r\n  className?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\n// ============================================\r\n// HELPERS\r\n// ============================================\r\n\r\nconst formatFileSize = (bytes: number) => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\nconst isExcelFile = (file: File) => {\r\n  const validTypes = [\r\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // .xlsx\r\n    'application/vnd.ms-excel', // .xls\r\n  ];\r\n  const validExtensions = ['.xlsx', '.xls'];\r\n  \r\n  return (\r\n    validTypes.includes(file.type) ||\r\n    validExtensions.some(ext => file.name.toLowerCase().endsWith(ext))\r\n  );\r\n};\r\n\r\n// ============================================\r\n// COMPONENT\r\n// ============================================\r\n\r\nexport function ExcelFileDropzone({\r\n  value,\r\n  onChange,\r\n  uploadToServer = false,\r\n  sessionId,\r\n  onSessionChange,\r\n  maxSize = 10 * 1024 * 1024, // 10MB\r\n  className,\r\n  disabled = false,\r\n}: ExcelFileDropzoneProps) {\r\n  const [isUploading, setIsUploading] = React.useState(false);\r\n  const [currentSessionId, setCurrentSessionId] = React.useState(sessionId || '');\r\n\r\n  // Update session ID when prop changes\r\n  React.useEffect(() => {\r\n    if (sessionId) {\r\n      setCurrentSessionId(sessionId);\r\n    }\r\n  }, [sessionId]);\r\n\r\n  const handleUploadToServer = React.useCallback(async (file: File): Promise<StagingFile | null> => {\r\n    if (!uploadToServer) return null;\r\n    \r\n    try {\r\n      setIsUploading(true);\r\n      const result = await FileUploadAPI.uploadToStaging([file], currentSessionId || undefined);\r\n      \r\n      if (result.sessionId && result.sessionId !== currentSessionId) {\r\n        setCurrentSessionId(result.sessionId);\r\n        onSessionChange?.(result.sessionId);\r\n      }\r\n      \r\n      return result.files[0] || null;\r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n      toast.error('Không thể upload file lên server');\r\n      return null;\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  }, [uploadToServer, currentSessionId, onSessionChange]);\r\n\r\n  const onDrop = React.useCallback(async (acceptedFiles: File[], rejectedFiles: any[]) => {\r\n    // Handle rejected files\r\n    if (rejectedFiles.length > 0) {\r\n      rejectedFiles.forEach(rejection => {\r\n        const { file, errors } = rejection;\r\n        errors.forEach((error: any) => {\r\n          switch (error.code) {\r\n            case 'file-too-large':\r\n              toast.error(`File \"${file.name}\" quá lớn`, {\r\n                description: `Kích thước tối đa: ${formatFileSize(maxSize)}`\r\n              });\r\n              break;\r\n            case 'file-invalid-type':\r\n              toast.error(`File \"${file.name}\" không đúng định dạng`, {\r\n                description: 'Chỉ chấp nhận file Excel (.xlsx, .xls)'\r\n              });\r\n              break;\r\n            default:\r\n              toast.error(`Lỗi: ${error.message}`);\r\n          }\r\n        });\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Handle accepted file (only take first one)\r\n    const file = acceptedFiles[0];\r\n    if (!file) return;\r\n\r\n    // Validate Excel\r\n    if (!isExcelFile(file)) {\r\n      toast.error('Vui lòng chọn file Excel (.xlsx hoặc .xls)');\r\n      return;\r\n    }\r\n\r\n    // Create initial state\r\n    const newExcelFile: ExcelFile = {\r\n      file,\r\n      status: uploadToServer ? 'uploading' : 'selected',\r\n    };\r\n    onChange(newExcelFile);\r\n\r\n    // Upload to server if required\r\n    if (uploadToServer) {\r\n      const serverFile = await handleUploadToServer(file);\r\n      if (serverFile) {\r\n        onChange({\r\n          file,\r\n          serverFile,\r\n          status: 'uploaded',\r\n        });\r\n      } else {\r\n        onChange({\r\n          file,\r\n          status: 'error',\r\n          errorMessage: 'Không thể upload file',\r\n        });\r\n      }\r\n    }\r\n  }, [maxSize, uploadToServer, onChange, handleUploadToServer]);\r\n\r\n  const handleRemove = React.useCallback(() => {\r\n    onChange(null);\r\n  }, [onChange]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive, isDragAccept, isDragReject } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'],\r\n      'application/vnd.ms-excel': ['.xls'],\r\n    },\r\n    maxSize,\r\n    maxFiles: 1,\r\n    disabled: disabled || isUploading,\r\n    multiple: false,\r\n  });\r\n\r\n  // ============================================\r\n  // RENDER\r\n  // ============================================\r\n\r\n  return (\r\n    <div className={cn('space-y-3', className)}>\r\n      {/* Dropzone */}\r\n      <div\r\n        {...getRootProps()}\r\n        className={cn(\r\n          'relative rounded-lg border-2 border-dashed p-8 text-center cursor-pointer',\r\n          'transition-all duration-200 ease-in-out',\r\n          'hover:border-primary/50 hover:bg-primary/5',\r\n          isDragActive && 'border-primary bg-primary/10',\r\n          isDragAccept && 'border-green-500 bg-green-50',\r\n          isDragReject && 'border-red-500 bg-red-50',\r\n          (disabled || isUploading) && 'opacity-50 cursor-not-allowed pointer-events-none',\r\n          value && 'border-solid border-primary/30 bg-primary/5'\r\n        )}\r\n      >\r\n        <input {...getInputProps()} />\r\n        \r\n        {isUploading ? (\r\n          // Uploading state\r\n          <div className=\"flex flex-col items-center gap-3\">\r\n            <Loader2 className=\"h-10 w-10 text-primary animate-spin\" />\r\n            <div>\r\n              <p className=\"text-sm font-medium\">Đang tải lên...</p>\r\n              <p className=\"text-xs text-muted-foreground\">Vui lòng đợi</p>\r\n            </div>\r\n          </div>\r\n        ) : value ? (\r\n          // File selected state\r\n          <div className=\"flex flex-col items-center gap-3\">\r\n            <div className=\"relative\">\r\n              <FileSpreadsheet className=\"h-12 w-12 text-green-600\" />\r\n              {value.status === 'uploaded' && (\r\n                <CheckCircle2 className=\"absolute -bottom-1 -right-1 h-5 w-5 text-green-600 bg-white rounded-full\" />\r\n              )}\r\n              {value.status === 'error' && (\r\n                <AlertCircle className=\"absolute -bottom-1 -right-1 h-5 w-5 text-red-500 bg-white rounded-full\" />\r\n              )}\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <p className=\"text-sm font-medium truncate max-w-[250px]\">{value.file.name}</p>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                {formatFileSize(value.file.size)}\r\n                {value.status === 'uploaded' && ' • Đã tải lên server'}\r\n                {value.status === 'error' && ` • ${value.errorMessage || 'Lỗi'}`}\r\n              </p>\r\n            </div>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                handleRemove();\r\n              }}\r\n              className=\"text-muted-foreground hover:text-destructive\"\r\n            >\r\n              <X className=\"h-4 w-4 mr-1\" />\r\n              Xóa và chọn file khác\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          // Empty state\r\n          <div className=\"flex flex-col items-center gap-3\">\r\n            <div className={cn(\r\n              'p-4 rounded-full',\r\n              isDragActive ? 'bg-primary/20' : 'bg-muted'\r\n            )}>\r\n              <Upload className={cn(\r\n                'h-8 w-8',\r\n                isDragActive ? 'text-primary' : 'text-muted-foreground'\r\n              )} />\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <p className=\"text-sm font-medium\">\r\n                {isDragActive ? 'Thả file vào đây' : 'Kéo thả file Excel vào đây'}\r\n              </p>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                hoặc click để chọn file • Tối đa {formatFileSize(maxSize)}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n              <FileSpreadsheet className=\"h-4 w-4\" />\r\n              <span>Chấp nhận .xlsx, .xls</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport type { ExcelFile, ExcelFileDropzoneProps };\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4563, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/shared/generic-import-dialog-v2.tsx"],"sourcesContent":["/**\r\n * GenericImportDialog V2\r\n * \r\n * Enhanced import dialog with:\r\n * - Preview step with data table\r\n * - Upsert mode (insert/update/upsert)\r\n * - Stop on error option\r\n * - Import history logging\r\n * - Better field configuration support\r\n */\r\n\r\nimport * as React from \"react\"\r\nimport { \r\n  Upload, \r\n  FileSpreadsheet, \r\n  Download, \r\n  AlertCircle, \r\n  CheckCircle2, \r\n  XCircle,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ChevronsLeft,\r\n  ChevronsRight,\r\n  Settings2,\r\n  Eye,\r\n  Loader2,\r\n  Pencil,\r\n  Check,\r\n  X,\r\n} from \"lucide-react\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"../ui/dialog\"\r\nimport { Button } from \"../ui/button\"\r\nimport { Label } from \"../ui/label\"\r\nimport { Input } from \"../ui/input\"\r\nimport { Textarea } from \"../ui/textarea\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"../ui/select\"\r\nimport { Progress } from \"../ui/progress\"\r\nimport { ScrollArea, ScrollBar } from \"../ui/scroll-area\"\r\nimport { Alert, AlertDescription, AlertTitle } from \"../ui/alert\"\r\nimport { Badge } from \"../ui/badge\"\r\nimport { Checkbox } from \"../ui/checkbox\"\r\nimport { RadioGroup, RadioGroupItem } from \"../ui/radio-group\"\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"../ui/table\"\r\nimport {\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from \"../ui/tabs\"\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"../ui/popover\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"../ui/tooltip\"\r\nimport * as XLSX from 'xlsx'\r\nimport { toast } from \"sonner\"\r\nimport { cn } from \"../../lib/utils\"\r\nimport { \r\n  useImportExportStore,\r\n  type ImportPreviewResult,\r\n  type ImportPreviewRow,\r\n  type ImportExportConfig,\r\n  type FieldConfig,\r\n  previewImportData,\r\n} from '../../lib/import-export/index'\r\nimport type { SystemId } from \"../../lib/id-types\"\r\nimport { ExcelFileDropzone, type ExcelFile } from './excel-file-dropzone'\r\nimport { useAllBranches } from \"../../features/settings/branches/hooks/use-all-branches\"\r\nimport { usePricingPolicyStore } from \"../../features/settings/pricing/store\"\r\n\r\n// ============================================\r\n// EDITABLE CELL COMPONENT (Memoized for performance)\r\n// ============================================\r\n\r\ninterface EditableCellProps {\r\n  cellValue: string\r\n  fieldKey: string\r\n  fieldLabel: string\r\n  fieldRequired?: boolean\r\n  onSave: (fieldKey: string, newValue: string) => void\r\n}\r\n\r\nconst EditableCell = React.memo(function EditableCell({\r\n  cellValue,\r\n  fieldKey,\r\n  fieldLabel,\r\n  fieldRequired,\r\n  onSave,\r\n}: EditableCellProps) {\r\n  const [isOpen, setIsOpen] = React.useState(false)\r\n  const [editValue, setEditValue] = React.useState(cellValue)\r\n  const [error, setError] = React.useState('')\r\n\r\n  // Reset value when opening\r\n  const handleOpenChange = React.useCallback((open: boolean) => {\r\n    if (open) {\r\n      setEditValue(cellValue)\r\n      setError('')\r\n    }\r\n    setIsOpen(open)\r\n  }, [cellValue])\r\n\r\n  const handleSave = React.useCallback(() => {\r\n    // Basic validation\r\n    if (fieldRequired && !editValue.trim()) {\r\n      setError(`${fieldLabel} là bắt buộc`)\r\n      return\r\n    }\r\n    onSave(fieldKey, editValue)\r\n    setIsOpen(false)\r\n  }, [editValue, fieldKey, fieldLabel, fieldRequired, onSave])\r\n\r\n  const handleKeyDown = React.useCallback((e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault()\r\n      handleSave()\r\n    } else if (e.key === 'Escape') {\r\n      setIsOpen(false)\r\n    }\r\n  }, [handleSave])\r\n\r\n  const isLongText = editValue.length > 50 || editValue.includes('\\n')\r\n\r\n  return (\r\n    <Popover open={isOpen} onOpenChange={handleOpenChange}>\r\n      <PopoverTrigger asChild>\r\n        <button\r\n          type=\"button\"\r\n          className=\"w-full h-full px-4 py-2 text-left relative flex items-center gap-2 group transition-colors cursor-pointer hover:bg-muted/50\"\r\n        >\r\n          <span className=\"block truncate flex-1\">\r\n            {cellValue || <span className=\"text-muted-foreground italic\">—</span>}\r\n          </span>\r\n          <Pencil className=\"h-3 w-3 flex-shrink-0 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n        </button>\r\n      </PopoverTrigger>\r\n      <PopoverContent \r\n        className=\"w-[300px] p-3\" \r\n        align=\"start\"\r\n        sideOffset={4}\r\n      >\r\n        <div className=\"space-y-3\">\r\n          <div className=\"space-y-1.5\">\r\n            <Label className=\"text-xs font-medium text-muted-foreground\">\r\n              {fieldLabel} {fieldRequired && <span className=\"text-destructive\">*</span>}\r\n            </Label>\r\n            {isLongText ? (\r\n              <Textarea\r\n                autoFocus\r\n                value={editValue}\r\n                onChange={(e) => {\r\n                  setEditValue(e.target.value)\r\n                  setError('')\r\n                }}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' && e.ctrlKey) {\r\n                    e.preventDefault()\r\n                    handleSave()\r\n                  } else if (e.key === 'Escape') {\r\n                    setIsOpen(false)\r\n                  }\r\n                }}\r\n                placeholder={`Nhập ${fieldLabel.toLowerCase()}...`}\r\n                className={cn(\"min-h-[80px] resize-y\", error && \"border-destructive\")}\r\n                rows={3}\r\n              />\r\n            ) : (\r\n              <Input\r\n                autoFocus\r\n                value={editValue}\r\n                onChange={(e) => {\r\n                  setEditValue(e.target.value)\r\n                  setError('')\r\n                }}\r\n                onKeyDown={handleKeyDown}\r\n                placeholder={`Nhập ${fieldLabel.toLowerCase()}...`}\r\n                className={cn(\"h-9\", error && \"border-destructive\")}\r\n              />\r\n            )}\r\n            {error && (\r\n              <p className=\"text-xs text-destructive\">{error}</p>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center justify-end gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={() => setIsOpen(false)}\r\n              className=\"h-8 px-2\"\r\n            >\r\n              <X className=\"h-4 w-4 mr-1\" />\r\n              Hủy\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              onClick={handleSave}\r\n              className=\"h-8 px-2\"\r\n            >\r\n              <Check className=\"h-4 w-4 mr-1\" />\r\n              Lưu\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n})\r\n\r\n// ============================================\r\n// PREVIEW TABLE ROW COMPONENT (Memoized)\r\n// ============================================\r\n\r\ninterface PreviewTableRowProps<T> {\r\n  row: ImportPreviewRow<T>\r\n  isSelected: boolean\r\n  isUnselectable: boolean\r\n  visibleFields: FieldConfig<T>[]\r\n  onToggleSelection: (rowNumber: number) => void\r\n  onCellSave: (rowNumber: number, fieldKey: string, newValue: string) => void\r\n  getStatusBadge: (status: string, errors?: any[], warnings?: any[]) => React.ReactNode\r\n}\r\n\r\nfunction PreviewTableRowComponent<T>({\r\n  row,\r\n  isSelected,\r\n  isUnselectable,\r\n  visibleFields,\r\n  onToggleSelection,\r\n  onCellSave,\r\n  getStatusBadge,\r\n}: PreviewTableRowProps<T>) {\r\n  const isErrorRow = row.status === 'error'\r\n  const isDuplicateRow = row.status === 'duplicate'\r\n  \r\n  return (\r\n    <TableRow \r\n      className={cn(\r\n        !isSelected && !isUnselectable && \"opacity-50\",\r\n        isErrorRow && \"bg-destructive/5\",\r\n        isDuplicateRow && \"bg-muted/50\"\r\n      )}\r\n    >\r\n      <TableCell className=\"sticky left-0 bg-card z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]\">\r\n        <Checkbox\r\n          checked={isSelected}\r\n          onCheckedChange={() => onToggleSelection(row.rowNumber)}\r\n          disabled={isUnselectable}\r\n          aria-label={`Chọn dòng ${row.rowNumber}`}\r\n        />\r\n      </TableCell>\r\n      <TableCell className=\"font-medium sticky left-10 bg-card z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]\">\r\n        {row.rowNumber}\r\n      </TableCell>\r\n      <TableCell className=\"sticky left-24 bg-card z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]\">\r\n        {getStatusBadge(row.status, row.errors, row.warnings)}\r\n      </TableCell>\r\n      {visibleFields.map(field => {\r\n        const fieldKey = field.key as string\r\n        const cellValue = String(row.rawData[fieldKey] ?? row.rawData[field.label] ?? '')\r\n        \r\n        return (\r\n          <TableCell \r\n            key={fieldKey} \r\n            className=\"whitespace-nowrap p-0 max-w-[200px]\"\r\n          >\r\n            <EditableCell\r\n              cellValue={cellValue}\r\n              fieldKey={fieldKey}\r\n              fieldLabel={field.label}\r\n              fieldRequired={field.required}\r\n              onSave={(fk, newVal) => onCellSave(row.rowNumber, fk, newVal)}\r\n            />\r\n          </TableCell>\r\n        )\r\n      })}\r\n    </TableRow>\r\n  )\r\n}\r\n\r\n// Memoize the row component to prevent unnecessary re-renders\r\nconst PreviewTableRow = React.memo(PreviewTableRowComponent) as typeof PreviewTableRowComponent\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\ntype ImportMode = 'insert-only' | 'update-only' | 'upsert';\r\ntype ImportStep = 'upload' | 'preview' | 'import' | 'result';\r\n\r\ninterface Branch {\r\n  systemId: string\r\n  name: string\r\n}\r\n\r\ninterface ImportResultData {\r\n  success: number\r\n  failed: number\r\n  inserted: number\r\n  updated: number\r\n  skipped: number\r\n  errors: Array<{ row: number; message: string }>\r\n}\r\n\r\ninterface GenericImportDialogV2Props<T> {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  \r\n  // Configuration from ImportExportConfig\r\n  config: ImportExportConfig<T>\r\n  \r\n  // Branch selection (optional)\r\n  branches?: Branch[]\r\n  requireBranch?: boolean\r\n  defaultBranchId?: string // Chi nhánh mặc định (auto-fill)\r\n  \r\n  // Existing data for duplicate checking\r\n  existingData?: T[]\r\n  \r\n  // Import handler\r\n  onImport: (\r\n    data: Partial<T>[], \r\n    mode: ImportMode,\r\n    branchId?: string\r\n  ) => Promise<ImportResultData>\r\n  \r\n  // Current user for logging\r\n  currentUser: {\r\n    name: string\r\n    systemId: SystemId\r\n  }\r\n}\r\n\r\n// ============================================\r\n// COMPONENT\r\n// ============================================\r\n\r\nexport function GenericImportDialogV2<T>({\r\n  open,\r\n  onOpenChange,\r\n  config,\r\n  branches: branchesProp,\r\n  requireBranch = false,\r\n  defaultBranchId,\r\n  existingData = [],\r\n  onImport,\r\n  currentUser,\r\n}: GenericImportDialogV2Props<T>) {\r\n  // Store\r\n  const addImportLog = useImportExportStore(state => state.addImportLog)\r\n  \r\n  // Auto-fetch branches if not provided\r\n  const { data: storeBranches } = useAllBranches()\r\n  const branches = branchesProp || storeBranches.map(b => ({ systemId: b.systemId, name: b.name, isDefault: b.isDefault }))\r\n  \r\n  // Get default branch from settings (isDefault = true) or fallback to prop\r\n  const defaultBranch = React.useMemo(() => {\r\n    if (defaultBranchId) return defaultBranchId\r\n    const defaultFromSettings = storeBranches.find(b => b.isDefault === true)\r\n    return defaultFromSettings?.systemId || ''\r\n  }, [defaultBranchId, storeBranches])\r\n  \r\n  // State\r\n  const [step, setStep] = React.useState<ImportStep>('upload')\r\n  const [selectedBranchId, setSelectedBranchId] = React.useState<string>(defaultBranch)\r\n  const [branchError, setBranchError] = React.useState<string>('')\r\n  const [excelFile, setExcelFile] = React.useState<ExcelFile | null>(null)\r\n  const [importMode, setImportMode] = React.useState<ImportMode>('upsert')\r\n  \r\n  // Preview state\r\n  const [previewResult, setPreviewResult] = React.useState<ImportPreviewResult<T> | null>(null)\r\n  const [previewTab, setPreviewTab] = React.useState<'all' | 'valid' | 'error' | 'warning'>('all')\r\n  const [previewPage, setPreviewPage] = React.useState(0)\r\n  const [previewPageSize, setPreviewPageSize] = React.useState(20)\r\n  \r\n  // Row selection state (for preview step)\r\n  const [selectedRows, setSelectedRows] = React.useState<Set<number>>(new Set())\r\n  \r\n  // Import state\r\n  const [isImporting, setIsImporting] = React.useState(false)\r\n  const [importProgress, setImportProgress] = React.useState(0)\r\n  const [importResult, setImportResult] = React.useState<ImportResultData | null>(null)\r\n\r\n  // Auto-fill chi nhánh mặc định khi mở dialog hoặc khi store load xong\r\n  React.useEffect(() => {\r\n    if (open && !selectedBranchId && defaultBranch) {\r\n      setSelectedBranchId(defaultBranch)\r\n    }\r\n  }, [open, defaultBranch, selectedBranchId])\r\n\r\n  // Reset when dialog closes\r\n  React.useEffect(() => {\r\n    if (!open) {\r\n      setTimeout(() => {\r\n        setStep('upload')\r\n        setSelectedBranchId(defaultBranch)\r\n        setBranchError('')\r\n        setExcelFile(null)\r\n        setImportMode('upsert')\r\n        setPreviewResult(null)\r\n        setPreviewTab('all')\r\n        setPreviewPage(0)\r\n        setPreviewPageSize(20)\r\n        setSelectedRows(new Set())\r\n        setIsImporting(false)\r\n        setImportProgress(0)\r\n        setImportResult(null)\r\n      }, 200)\r\n    }\r\n  }, [open, defaultBranchId])\r\n\r\n  // Initialize selected rows when preview result changes (select all valid rows by default)\r\n  React.useEffect(() => {\r\n    if (previewResult) {\r\n      const validRowNumbers = new Set(\r\n        previewResult.rows\r\n          .filter(r => r.status === 'valid' || r.status === 'warning' || r.status === 'will-update' || r.status === 'will-insert')\r\n          .map(r => r.rowNumber)\r\n      )\r\n      setSelectedRows(validRowNumbers)\r\n    }\r\n  }, [previewResult])\r\n\r\n  // Re-validate when import mode changes (need to recalculate statuses)\r\n  React.useEffect(() => {\r\n    if (previewResult && step === 'preview') {\r\n      // Get raw data from current preview result\r\n      const rawData = previewResult.rows.map(r => r.rawData)\r\n      \r\n      // Re-run validation with new mode\r\n      const revalidatedResult = previewImportData(\r\n        rawData,\r\n        config,\r\n        existingData,\r\n        importMode,\r\n        selectedBranchId\r\n      )\r\n      \r\n      setPreviewResult(revalidatedResult)\r\n    }\r\n  }, [importMode]) // Only re-run when mode changes\r\n\r\n  // Get visible fields for preview table - show ALL non-hidden fields\r\n  const visibleFields = React.useMemo(() => {\r\n    return config.fields.filter(f => !f.hidden)\r\n  }, [config.fields])\r\n\r\n  // Filtered preview rows based on current tab\r\n  const filteredPreviewRows = React.useMemo(() => {\r\n    if (!previewResult) return []\r\n    \r\n    switch (previewTab) {\r\n      case 'valid':\r\n        return previewResult.rows.filter(r => \r\n          r.status === 'valid' || r.status === 'will-insert' || r.status === 'will-update'\r\n        )\r\n      case 'error':\r\n        return previewResult.rows.filter(r => r.status === 'error')\r\n      case 'warning':\r\n        return previewResult.rows.filter(r => r.status === 'warning' || r.status === 'duplicate')\r\n      default:\r\n        return previewResult.rows\r\n    }\r\n  }, [previewResult, previewTab])\r\n\r\n  // ============================================\r\n  // ROW SELECTION & INLINE EDIT HANDLERS\r\n  // ============================================\r\n\r\n  // Toggle single row selection - memoized to prevent unnecessary re-renders\r\n  const handleToggleRowSelection = React.useCallback((rowNumber: number) => {\r\n    setSelectedRows(prev => {\r\n      const next = new Set(prev)\r\n      if (next.has(rowNumber)) {\r\n        next.delete(rowNumber)\r\n      } else {\r\n        next.add(rowNumber)\r\n      }\r\n      return next\r\n    })\r\n  }, [])\r\n\r\n  // Toggle all rows in current filtered view\r\n  const handleToggleAllRows = (checked: boolean) => {\r\n    if (!previewResult) return\r\n    \r\n    const currentFilteredRowNumbers = filteredPreviewRows.map(r => r.rowNumber)\r\n    \r\n    setSelectedRows(prev => {\r\n      const next = new Set(prev)\r\n      if (checked) {\r\n        // Add all filtered rows that are not error status\r\n        currentFilteredRowNumbers.forEach(rowNum => {\r\n          const row = previewResult.rows.find(r => r.rowNumber === rowNum)\r\n          if (row && row.status !== 'error') {\r\n            next.add(rowNum)\r\n          }\r\n        })\r\n      } else {\r\n        // Remove all filtered rows\r\n        currentFilteredRowNumbers.forEach(rowNum => next.delete(rowNum))\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  // Check if all filtered rows are selected\r\n  const isAllFilteredSelected = React.useMemo(() => {\r\n    if (!previewResult || filteredPreviewRows.length === 0) return false\r\n    const selectableRows = filteredPreviewRows.filter(r => r.status !== 'error')\r\n    if (selectableRows.length === 0) return false\r\n    return selectableRows.every(r => selectedRows.has(r.rowNumber))\r\n  }, [previewResult, filteredPreviewRows, selectedRows])\r\n\r\n  // Handle cell save from EditableCell component\r\n  // Use useCallback to prevent unnecessary re-renders\r\n  const handleCellSave = React.useCallback((rowNumber: number, fieldKey: string, newValue: string) => {\r\n    if (!previewResult) return\r\n    \r\n    // Update the raw data\r\n    const updatedRawData = previewResult.rows.map(row => {\r\n      if (row.rowNumber === rowNumber) {\r\n        return {\r\n          ...row.rawData,\r\n          [fieldKey]: newValue,\r\n        }\r\n      }\r\n      return row.rawData\r\n    })\r\n    \r\n    // Use startTransition to keep UI responsive during revalidation\r\n    React.startTransition(() => {\r\n      // Re-run full validation to update row statuses\r\n      const revalidatedResult = previewImportData(\r\n        updatedRawData,\r\n        config,\r\n        existingData,\r\n        importMode,\r\n        selectedBranchId\r\n      )\r\n      \r\n      setPreviewResult(revalidatedResult)\r\n      \r\n      // Update selected rows - keep previously selected rows that are still valid\r\n      setSelectedRows(prev => {\r\n        const newSelected = new Set<number>()\r\n        revalidatedResult.rows.forEach(row => {\r\n          // Keep selected if was selected and still valid (not error/duplicate)\r\n          if (prev.has(row.rowNumber) && row.status !== 'error' && row.status !== 'duplicate') {\r\n            newSelected.add(row.rowNumber)\r\n          }\r\n        })\r\n        // Auto-select the edited row if it's now valid (not error/duplicate)\r\n        const editedRow = revalidatedResult.rows.find(r => r.rowNumber === rowNumber)\r\n        if (editedRow && editedRow.status !== 'error' && editedRow.status !== 'duplicate') {\r\n          newSelected.add(editedRow.rowNumber)\r\n        }\r\n        return newSelected\r\n      })\r\n      \r\n      // Show appropriate message\r\n      const editedRow = revalidatedResult.rows.find(r => r.rowNumber === rowNumber)\r\n      if (editedRow?.status === 'error') {\r\n        toast.info('Đã cập nhật. Dòng vẫn có lỗi khác.')\r\n      } else if (editedRow?.status === 'duplicate') {\r\n        toast.info('Đã cập nhật. Dòng vẫn bị trùng.')\r\n      } else {\r\n        toast.success('Đã cập nhật thành công')\r\n      }\r\n    })\r\n  }, [previewResult, config, existingData, importMode, selectedBranchId])\r\n\r\n  // ============================================\r\n  // HANDLERS\r\n  // ============================================\r\n\r\n  const handleDownloadTemplate = () => {\r\n    try {\r\n      // Create template with headers only\r\n      const headers: Record<string, string> = {}\r\n      const visibleFields = config.fields.filter(field => !field.hidden)\r\n      \r\n      visibleFields.forEach(field => {\r\n        headers[field.key as string] = field.label\r\n      })\r\n      \r\n      // ===== DYNAMIC PRICING COLUMNS (chỉ cho products) =====\r\n      const pricingColumns: Array<{ key: string; label: string; example: string }> = []\r\n      if (config.entityType === 'products') {\r\n        const pricingPolicies = usePricingPolicyStore.getState().data.filter(p => p.isActive)\r\n        pricingPolicies.forEach(policy => {\r\n          const key = `price_${policy.systemId}`\r\n          const label = `Giá: ${policy.name}`\r\n          headers[key] = label\r\n          pricingColumns.push({\r\n            key,\r\n            label,\r\n            example: policy.type === 'Bán hàng' ? '250000' : '150000',\r\n          })\r\n        })\r\n      }\r\n      \r\n      // Sample row: Example values (dữ liệu mẫu từ field.example)\r\n      // Note: Required fields are marked with (*) in the label\r\n      const exampleRow: Record<string, any> = {}\r\n      visibleFields.forEach(field => {\r\n        if (field.example) {\r\n          exampleRow[field.key as string] = field.example\r\n        } else if (field.defaultValue !== undefined) {\r\n          // Fallback to defaultValue or enumLabels\r\n          if (field.enumLabels && field.defaultValue) {\r\n            exampleRow[field.key as string] = field.enumLabels[field.defaultValue as string] || field.defaultValue\r\n          } else {\r\n            exampleRow[field.key as string] = field.defaultValue\r\n          }\r\n        } else {\r\n          exampleRow[field.key as string] = ''\r\n        }\r\n      })\r\n      // Add pricing columns examples\r\n      pricingColumns.forEach(col => {\r\n        exampleRow[col.key] = col.example\r\n      })\r\n      \r\n      // Combine all column keys\r\n      const allColumnKeys = [...Object.keys(headers).filter(k => !k.startsWith('price_')), ...pricingColumns.map(c => c.key)]\r\n      \r\n      // Tạo worksheet với 1 dòng mẫu (không cần dòng hướng dẫn Bắt buộc/Tùy chọn)\r\n      const ws = XLSX.utils.json_to_sheet([exampleRow], { header: allColumnKeys })\r\n      \r\n      // Rename headers to Vietnamese\r\n      const range = XLSX.utils.decode_range(ws['!ref']!)\r\n      for (let C = range.s.c; C <= range.e.c; ++C) {\r\n        const address = XLSX.utils.encode_col(C) + \"1\"\r\n        if (ws[address]) {\r\n          const fieldKey = ws[address].v\r\n          ws[address].v = headers[fieldKey] || fieldKey\r\n        }\r\n      }\r\n      \r\n      const wb = XLSX.utils.book_new()\r\n      XLSX.utils.book_append_sheet(wb, ws, 'Data')\r\n      \r\n      // Auto-size columns based on header length and example values\r\n      const allFields = [...visibleFields, ...pricingColumns.map(c => ({ label: c.label, example: c.example }))]\r\n      const colWidths = allFields.map(field => {\r\n        const headerLen = field.label.length\r\n        const exampleLen = String(field.example || '').length\r\n        return {\r\n          wch: Math.min(40, Math.max(12, headerLen + 3, exampleLen + 2))\r\n        }\r\n      })\r\n      ws['!cols'] = colWidths\r\n      \r\n      const fileName = config.templateFileName || `Mau_Nhap_${config.entityDisplayName}.xlsx`\r\n      XLSX.writeFile(wb, fileName)\r\n      toast.success('Đã tải file mẫu')\r\n    } catch (error) {\r\n      console.error('Error generating template:', error)\r\n      toast.error('Có lỗi khi tạo file mẫu')\r\n    }\r\n  }\r\n\r\n  const handleParseAndPreview = async () => {\r\n    if (!excelFile) return\r\n    \r\n    if (requireBranch && !selectedBranchId) {\r\n      setBranchError('Vui lòng chọn chi nhánh')\r\n      toast.error('Vui lòng chọn chi nhánh')\r\n      return\r\n    }\r\n    setBranchError('')\r\n\r\n    try {\r\n      const data = await excelFile.file.arrayBuffer()\r\n      const workbook = XLSX.read(data)\r\n      const worksheet = workbook.Sheets[workbook.SheetNames[0]]\r\n      const jsonData = XLSX.utils.sheet_to_json(worksheet, { defval: '' })\r\n\r\n      if (jsonData.length === 0) {\r\n        toast.error('File không có dữ liệu')\r\n        return\r\n      }\r\n\r\n      // Create header map (Vietnamese → field key)\r\n      // Support both with and without (*) marker\r\n      const headerMap: Record<string, string> = {}\r\n      config.fields.forEach(field => {\r\n        if (!field.hidden) {\r\n          const label = field.label.toLowerCase()\r\n          const labelWithoutStar = label.replace(/\\s*\\(\\*\\)\\s*$/, '')\r\n          headerMap[label] = field.key as string\r\n          headerMap[labelWithoutStar] = field.key as string\r\n        }\r\n      })\r\n\r\n      // Map data - normalize Excel headers by stripping (*) and lowercasing\r\n      const mappedData = jsonData.map((row: any) => {\r\n        const mappedRow: Record<string, any> = {}\r\n        Object.entries(row).forEach(([vnKey, value]) => {\r\n          const normalizedKey = vnKey.toLowerCase().replace(/\\s*\\(\\*\\)\\s*$/, '')\r\n          const fieldKey = headerMap[normalizedKey] || headerMap[vnKey.toLowerCase()] || vnKey\r\n          mappedRow[fieldKey] = value\r\n        })\r\n        return mappedRow\r\n      })\r\n\r\n      // Preview with validation\r\n      const result = previewImportData(\r\n        mappedData,\r\n        config,\r\n        existingData,\r\n        importMode,\r\n        selectedBranchId\r\n      )\r\n      \r\n      setPreviewResult(result)\r\n      setPreviewPage(0)\r\n      setStep('preview')\r\n      \r\n    } catch (error) {\r\n      console.error('Error parsing file:', error)\r\n      toast.error('Không thể đọc file. Vui lòng kiểm tra định dạng file.')\r\n    }\r\n  }\r\n\r\n  const handleImport = async () => {\r\n    if (!previewResult) return\r\n    \r\n    // Note: Errors will be skipped, details saved to import history\r\n\r\n    setStep('import')\r\n    setIsImporting(true)\r\n    setImportProgress(0)\r\n\r\n    try {\r\n      // Get selected valid rows only (must be selected AND have valid status)\r\n      const validRows = previewResult.rows\r\n        .filter(r => \r\n          selectedRows.has(r.rowNumber) && // Must be selected\r\n          (r.status === 'valid' || r.status === 'warning' || r.status === 'will-update' || r.status === 'will-insert')\r\n        )\r\n        .map(r => r.transformedData)\r\n        .filter((d): d is Partial<T> => d !== null)\r\n\r\n      if (validRows.length === 0) {\r\n        toast.error('Không có dữ liệu được chọn để nhập')\r\n        setStep('preview')\r\n        setIsImporting(false)\r\n        return\r\n      }\r\n\r\n      // Simulate progress\r\n      const progressInterval = setInterval(() => {\r\n        setImportProgress(prev => Math.min(prev + 5, 90))\r\n      }, 100)\r\n\r\n      // Import\r\n      const result = await onImport(validRows, importMode, selectedBranchId || undefined)\r\n      \r\n      clearInterval(progressInterval)\r\n      setImportProgress(100)\r\n      setImportResult(result)\r\n      setIsImporting(false)\r\n      \r\n      // Log to store\r\n      const branch = branches?.find(b => b.systemId === selectedBranchId)\r\n      addImportLog({\r\n        entityType: config.entityType,\r\n        entityDisplayName: config.entityDisplayName,\r\n        fileName: excelFile?.file.name || 'unknown',\r\n        fileSize: excelFile?.file.size || 0,\r\n        totalRows: validRows.length, // Only count selected rows\r\n        successCount: result.success,\r\n        errorCount: result.failed,\r\n        skippedCount: result.skipped,\r\n        insertedCount: result.inserted,\r\n        updatedCount: result.updated,\r\n        mode: importMode,\r\n        performedBy: currentUser.name,\r\n        performedById: currentUser.systemId,\r\n        performedAt: new Date().toISOString(),\r\n        branchId: selectedBranchId || undefined,\r\n        branchName: branch?.name,\r\n        errors: result.errors.slice(0, 50).map(e => ({\r\n          row: e.row,\r\n          message: e.message,\r\n        })),\r\n        status: result.failed === 0 ? 'success' : result.success > 0 ? 'partial' : 'failed',\r\n      })\r\n      \r\n      setStep('result')\r\n      \r\n      if (result.failed === 0) {\r\n        toast.success(`Đã nhập thành công ${result.success} ${config.entityDisplayName}`)\r\n      } else {\r\n        toast.warning(`Đã nhập ${result.success} ${config.entityDisplayName}, ${result.failed} lỗi`)\r\n      }\r\n    } catch (error) {\r\n      console.error('Import error:', error)\r\n      const errorMessage = error instanceof Error ? error.message : 'Có lỗi khi nhập dữ liệu'\r\n      toast.error(errorMessage)\r\n      setStep('preview')\r\n      setIsImporting(false)\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // PREVIEW DATA HELPERS\r\n  // ============================================\r\n\r\n  const paginatedPreviewRows = React.useMemo(() => {\r\n    const start = previewPage * previewPageSize\r\n    return filteredPreviewRows.slice(start, start + previewPageSize)\r\n  }, [filteredPreviewRows, previewPage, previewPageSize])\r\n\r\n  const previewPageCount = Math.ceil(filteredPreviewRows.length / previewPageSize)\r\n\r\n  // Memoized getStatusBadge to prevent re-renders\r\n  const getStatusBadge = React.useCallback((status: ImportPreviewRow<T>['status'], errors?: Array<{ field?: string; message: string }>, warnings?: Array<{ field?: string; message: string }>) => {\r\n    const badge = (() => {\r\n      switch (status) {\r\n        case 'valid':\r\n        case 'will-insert':\r\n          return <Badge variant=\"default\">Hợp lệ</Badge>\r\n        case 'will-update':\r\n          return <Badge variant=\"secondary\">Cập nhật</Badge>\r\n        case 'error':\r\n          return <Badge variant=\"destructive\">Lỗi</Badge>\r\n        case 'warning':\r\n          return <Badge variant=\"outline\">Cảnh báo</Badge>\r\n        case 'duplicate':\r\n          return <Badge variant=\"outline\">Trùng</Badge>\r\n        default:\r\n          return <Badge variant=\"outline\">{status}</Badge>\r\n      }\r\n    })()\r\n    \r\n    // Show tooltip with error/warning details\r\n    const messages = [...(errors || []), ...(warnings || [])]\r\n    if (messages.length > 0) {\r\n      return (\r\n        <TooltipProvider>\r\n          <Tooltip>\r\n            <TooltipTrigger asChild>\r\n              <span className=\"cursor-help\">{badge}</span>\r\n            </TooltipTrigger>\r\n            <TooltipContent side=\"right\" className=\"max-w-xs\">\r\n              <ul className=\"text-xs space-y-1\">\r\n                {messages.map((m, i) => (\r\n                  <li key={i} className=\"flex items-start gap-1\">\r\n                    <span className=\"text-destructive\">•</span>\r\n                    <span>{m.field ? `${m.field}: ${m.message}` : m.message}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </TooltipContent>\r\n          </Tooltip>\r\n        </TooltipProvider>\r\n      )\r\n    }\r\n    \r\n    return badge\r\n  }, [])\r\n\r\n  // ============================================\r\n  // RENDER\r\n  // ============================================\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Upload className=\"h-5 w-5\" />\r\n            Nhập {config.entityDisplayName} từ Excel\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            {step === 'upload' && 'Chọn file và cấu hình import'}\r\n            {step === 'preview' && 'Rà soát dữ liệu trước khi nhập'}\r\n            {step === 'import' && 'Đang nhập dữ liệu...'}\r\n            {step === 'result' && 'Kết quả nhập dữ liệu'}\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"flex-1 overflow-auto\">\r\n          {/* Step 1: Upload & Configure */}\r\n          {step === 'upload' && (\r\n            <div className=\"space-y-4 p-1\">\r\n              {/* Branch Selection */}\r\n              {branches && branches.length > 0 && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"branch\">\r\n                    Chọn chi nhánh {requireBranch && <span className=\"text-destructive\">*</span>}\r\n                  </Label>\r\n                  <Select \r\n                    value={selectedBranchId} \r\n                    onValueChange={(value) => {\r\n                      setSelectedBranchId(value)\r\n                      setBranchError('')\r\n                    }}\r\n                  >\r\n                    <SelectTrigger id=\"branch\" className={cn(branchError && \"border-destructive\")}>\r\n                      <SelectValue placeholder=\"-- Chọn chi nhánh --\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {branches.map(branch => (\r\n                        <SelectItem key={branch.systemId} value={branch.systemId}>\r\n                          {branch.name}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  {branchError && (\r\n                    <p className=\"text-sm text-destructive\">{branchError}</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Download Template Link - Small */}\r\n              <div className=\"flex items-center gap-2 text-sm\">\r\n                <span className=\"text-muted-foreground\">Chưa có file mẫu?</span>\r\n                <Button \r\n                  variant=\"link\" \r\n                  size=\"sm\" \r\n                  onClick={handleDownloadTemplate}\r\n                  className=\"h-auto p-0 text-primary\"\r\n                >\r\n                  <Download className=\"mr-1 h-3 w-3\" />\r\n                  Tải file mẫu\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Upload File - Full Width Dropzone */}\r\n              <ExcelFileDropzone\r\n                value={excelFile}\r\n                onChange={setExcelFile}\r\n                uploadToServer={false}\r\n              />\r\n\r\n              {/* Import Options */}\r\n              <div className=\"rounded-lg border border-border p-4 space-y-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Settings2 className=\"h-5 w-5\" />\r\n                  <h3 className=\"font-semibold\">Tùy chọn Import</h3>\r\n                </div>\r\n                \r\n                {/* Import Mode */}\r\n                {config.upsertKey && (\r\n                  <div className=\"space-y-2\">\r\n                    <Label>Chế độ Import</Label>\r\n                    <RadioGroup\r\n                      value={importMode}\r\n                      onValueChange={(v) => setImportMode(v as ImportMode)}\r\n                      className=\"flex gap-4\"\r\n                    >\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <RadioGroupItem value=\"insert-only\" id=\"insert-only\" />\r\n                        <Label htmlFor=\"insert-only\" className=\"font-normal cursor-pointer\">\r\n                          Chỉ thêm mới\r\n                        </Label>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <RadioGroupItem value=\"update-only\" id=\"update-only\" />\r\n                        <Label htmlFor=\"update-only\" className=\"font-normal cursor-pointer\">\r\n                          Chỉ cập nhật\r\n                        </Label>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <RadioGroupItem value=\"upsert\" id=\"upsert\" />\r\n                        <Label htmlFor=\"upsert\" className=\"font-normal cursor-pointer\">\r\n                          Thêm mới + Cập nhật\r\n                        </Label>\r\n                      </div>\r\n                    </RadioGroup>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      {importMode === 'insert-only' && 'Bỏ qua các bản ghi đã tồn tại'}\r\n                      {importMode === 'update-only' && 'Chỉ cập nhật bản ghi đã tồn tại, bỏ qua bản ghi mới'}\r\n                      {importMode === 'upsert' && 'Cập nhật bản ghi đã tồn tại, thêm mới bản ghi chưa có'}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Info about error handling */}\r\n                <p className=\"text-xs text-muted-foreground border-t border-border pt-3\">\r\n                  💡 Các dòng lỗi sẽ bị bỏ qua, chỉ import dòng hợp lệ. Chi tiết lỗi được lưu trong lịch sử import.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 2: Preview */}\r\n          {step === 'preview' && previewResult && (\r\n            <div className=\"space-y-4 p-1\">\r\n              {/* Summary Cards */}\r\n              <div className=\"grid grid-cols-4 gap-3\">\r\n                <div className=\"rounded-lg border border-border p-3 text-center\">\r\n                  <div className=\"text-2xl font-bold\">{previewResult.totalRows}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">Tổng dòng</div>\r\n                </div>\r\n                <div className=\"rounded-lg border border-border p-3 text-center\">\r\n                  <div className=\"text-2xl font-bold text-green-600\">{previewResult.validCount}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">Hợp lệ</div>\r\n                </div>\r\n                <div className=\"rounded-lg border border-border p-3 text-center\">\r\n                  <div className=\"text-2xl font-bold text-destructive\">{previewResult.errorCount}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">Lỗi</div>\r\n                </div>\r\n                <div className=\"rounded-lg border border-border p-3 text-center\">\r\n                  <div className=\"text-2xl font-bold text-amber-600\">{previewResult.warningCount}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">Cảnh báo</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Alerts */}\r\n              {previewResult.errorCount > 0 && (\r\n                <Alert>\r\n                  <AlertCircle className=\"h-4 w-4\" />\r\n                  <AlertTitle>Có {previewResult.errorCount} dòng lỗi</AlertTitle>\r\n                  <AlertDescription>\r\n                    Các dòng lỗi sẽ được bỏ qua khi import. \r\n                    Chỉ {previewResult.validCount + previewResult.warningCount} dòng hợp lệ sẽ được nhập.\r\n                    Chi tiết lỗi sẽ được lưu trong lịch sử.\r\n                  </AlertDescription>\r\n                </Alert>\r\n              )}\r\n\r\n              {previewResult.isValid && previewResult.errorCount === 0 && (\r\n                <Alert>\r\n                  <CheckCircle2 className=\"h-4 w-4\" />\r\n                  <AlertTitle>Dữ liệu hợp lệ</AlertTitle>\r\n                  <AlertDescription>\r\n                    Tất cả {previewResult.totalRows} dòng đều hợp lệ. Bạn có thể tiến hành nhập dữ liệu.\r\n                  </AlertDescription>\r\n                </Alert>\r\n              )}\r\n\r\n              {/* Selection summary */}\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <div className=\"text-muted-foreground\">\r\n                  Đã chọn <span className=\"font-medium text-foreground\">{selectedRows.size}</span> / {previewResult.totalRows} dòng để nhập\r\n                </div>\r\n                <div className=\"text-xs text-muted-foreground\">\r\n                  💡 Hover vào ô rồi click vào ô để sửa nội dung\r\n                </div>\r\n              </div>\r\n\r\n              {/* Preview Table with Tabs */}\r\n              <Tabs value={previewTab} onValueChange={(v) => { \r\n                React.startTransition(() => {\r\n                  setPreviewTab(v as any)\r\n                  setPreviewPage(0)\r\n                })\r\n              }}>\r\n                <TabsList>\r\n                  <TabsTrigger value=\"all\">\r\n                    Tất cả ({previewResult.totalRows})\r\n                  </TabsTrigger>\r\n                  <TabsTrigger value=\"valid\">\r\n                    Hợp lệ ({previewResult.validCount})\r\n                  </TabsTrigger>\r\n                  <TabsTrigger value=\"error\">\r\n                    Lỗi ({previewResult.errorCount})\r\n                  </TabsTrigger>\r\n                  <TabsTrigger value=\"warning\">\r\n                    Cảnh báo ({previewResult.warningCount})\r\n                  </TabsTrigger>\r\n                </TabsList>\r\n                \r\n                <TabsContent value={previewTab} className=\"mt-4\">\r\n                  <div className=\"rounded-md border border-border overflow-hidden\">\r\n                    <div className=\"overflow-auto max-h-[300px]\">\r\n                      <div className=\"min-w-max\">\r\n                        <Table>\r\n                          <TableHeader>\r\n                            <TableRow>\r\n                              <TableHead className=\"w-10 sticky left-0 bg-card z-20 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]\">\r\n                                <Checkbox\r\n                                  checked={isAllFilteredSelected}\r\n                                  onCheckedChange={handleToggleAllRows}\r\n                                  aria-label=\"Chọn tất cả\"\r\n                                />\r\n                              </TableHead>\r\n                              <TableHead className=\"w-14 sticky left-10 bg-card z-20 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]\">Dòng</TableHead>\r\n                              <TableHead className=\"w-20 sticky left-24 bg-card z-20 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]\">Trạng thái</TableHead>\r\n                              {visibleFields.map(field => (\r\n                                <TableHead key={field.key as string} className=\"min-w-[120px] max-w-[200px] whitespace-nowrap\">\r\n                                  {field.label}\r\n                                </TableHead>\r\n                              ))}\r\n                            </TableRow>\r\n                          </TableHeader>\r\n                          <TableBody>\r\n                            {paginatedPreviewRows.length === 0 ? (\r\n                              <TableRow>\r\n                                <TableCell \r\n                                  colSpan={visibleFields.length + 3} \r\n                                  className=\"text-center py-8 text-muted-foreground\"\r\n                                >\r\n                                  Không có dữ liệu\r\n                                </TableCell>\r\n                              </TableRow>\r\n                            ) : (\r\n                              paginatedPreviewRows.map((row) => (\r\n                                <PreviewTableRow\r\n                                  key={row.rowNumber}\r\n                                  row={row}\r\n                                  isSelected={selectedRows.has(row.rowNumber)}\r\n                                  isUnselectable={row.status === 'error' || row.status === 'duplicate'}\r\n                                  visibleFields={visibleFields}\r\n                                  onToggleSelection={handleToggleRowSelection}\r\n                                  onCellSave={handleCellSave}\r\n                                  getStatusBadge={getStatusBadge}\r\n                                />\r\n                              ))\r\n                            )}\r\n                          </TableBody>\r\n                        </Table>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {/* Pagination Controls */}\r\n                  <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-border\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div className=\"text-sm text-muted-foreground\">\r\n                        Hiển thị {filteredPreviewRows.length > 0 ? previewPage * previewPageSize + 1 : 0} - {Math.min((previewPage + 1) * previewPageSize, filteredPreviewRows.length)} / {filteredPreviewRows.length} dòng\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Select value={String(previewPageSize)} onValueChange={(v) => { setPreviewPageSize(Number(v)); setPreviewPage(0); }}>\r\n                          <SelectTrigger className=\"w-[100px] h-8\">\r\n                            <SelectValue />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            <SelectItem value=\"10\">10 dòng</SelectItem>\r\n                            <SelectItem value=\"20\">20 dòng</SelectItem>\r\n                            <SelectItem value=\"50\">50 dòng</SelectItem>\r\n                            <SelectItem value=\"100\">100 dòng</SelectItem>\r\n                          </SelectContent>\r\n                        </Select>\r\n                      </div>\r\n                    </div>\r\n                    {previewPageCount > 1 && (\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-sm text-muted-foreground\">\r\n                          Trang {previewPage + 1}/{previewPageCount}\r\n                        </span>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => setPreviewPage(0)}\r\n                          disabled={previewPage === 0}\r\n                        >\r\n                          <ChevronsLeft className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => setPreviewPage(p => Math.max(0, p - 1))}\r\n                          disabled={previewPage === 0}\r\n                        >\r\n                          <ChevronLeft className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => setPreviewPage(p => Math.min(previewPageCount - 1, p + 1))}\r\n                          disabled={previewPage >= previewPageCount - 1}\r\n                        >\r\n                          <ChevronRight className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => setPreviewPage(previewPageCount - 1)}\r\n                          disabled={previewPage >= previewPageCount - 1}\r\n                        >\r\n                          <ChevronsRight className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </TabsContent>\r\n              </Tabs>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 3: Import Progress */}\r\n          {step === 'import' && (\r\n            <div className=\"space-y-4 py-12 text-center\">\r\n              <Loader2 className=\"mx-auto h-12 w-12 text-primary animate-spin\" />\r\n              <h3 className=\"text-lg font-semibold\">Đang nhập dữ liệu...</h3>\r\n              <p className=\"text-sm text-muted-foreground\">Vui lòng đợi</p>\r\n              <Progress value={importProgress} className=\"w-full max-w-md mx-auto\" />\r\n              <p className=\"text-sm text-muted-foreground\">{importProgress}%</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 4: Result */}\r\n          {step === 'result' && importResult && (\r\n            <div className=\"space-y-6 py-6\">\r\n              <div className=\"text-center\">\r\n                {importResult.failed === 0 ? (\r\n                  <CheckCircle2 className=\"mx-auto h-16 w-16 text-green-600 mb-4\" />\r\n                ) : importResult.success > 0 ? (\r\n                  <AlertCircle className=\"mx-auto h-16 w-16 text-amber-600 mb-4\" />\r\n                ) : (\r\n                  <XCircle className=\"mx-auto h-16 w-16 text-destructive mb-4\" />\r\n                )}\r\n                <h3 className=\"text-xl font-semibold mb-2\">\r\n                  {importResult.failed === 0 ? 'Nhập dữ liệu thành công!' : \r\n                   importResult.success > 0 ? 'Nhập dữ liệu hoàn tất' : 'Nhập dữ liệu thất bại'}\r\n                </h3>\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <div className=\"rounded-lg border border-border p-4 text-center\">\r\n                  <div className=\"text-3xl font-bold text-green-600\">{importResult.success}</div>\r\n                  <div className=\"text-sm text-muted-foreground\">Thành công</div>\r\n                  {importResult.inserted > 0 && (\r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      ({importResult.inserted} mới, {importResult.updated} cập nhật)\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div className=\"rounded-lg border border-border p-4 text-center\">\r\n                  <div className=\"text-3xl font-bold text-destructive\">{importResult.failed}</div>\r\n                  <div className=\"text-sm text-muted-foreground\">Thất bại</div>\r\n                </div>\r\n                <div className=\"rounded-lg border border-border p-4 text-center\">\r\n                  <div className=\"text-3xl font-bold text-muted-foreground\">{importResult.skipped}</div>\r\n                  <div className=\"text-sm text-muted-foreground\">Bỏ qua</div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Error Details */}\r\n              {importResult.errors.length > 0 && (\r\n                <Alert variant=\"destructive\">\r\n                  <XCircle className=\"h-4 w-4\" />\r\n                  <AlertTitle>Chi tiết lỗi</AlertTitle>\r\n                  <AlertDescription>\r\n                    <ScrollArea className=\"h-[150px] mt-2\">\r\n                      <div className=\"space-y-1\">\r\n                        {importResult.errors.map((error, idx) => (\r\n                          <div key={idx} className=\"text-sm\">\r\n                            <strong>Dòng {error.row}:</strong> {error.message}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </ScrollArea>\r\n                  </AlertDescription>\r\n                </Alert>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          {step === 'upload' && (\r\n            <>\r\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n                Đóng\r\n              </Button>\r\n              <Button \r\n                onClick={handleParseAndPreview}\r\n                disabled={!excelFile || (requireBranch && !selectedBranchId)}\r\n              >\r\n                <Eye className=\"mr-2 h-4 w-4\" />\r\n                Rà soát\r\n              </Button>\r\n            </>\r\n          )}\r\n          \r\n          {step === 'preview' && (\r\n            <>\r\n              <Button variant=\"outline\" onClick={() => setStep('upload')}>\r\n                <ChevronLeft className=\"mr-2 h-4 w-4\" />\r\n                Quay lại\r\n              </Button>\r\n              <Button \r\n                onClick={handleImport}\r\n                disabled={selectedRows.size === 0}\r\n              >\r\n                <Upload className=\"mr-2 h-4 w-4\" />\r\n                Nhập {selectedRows.size} dòng\r\n              </Button>\r\n            </>\r\n          )}\r\n          \r\n          {step === 'result' && (\r\n            <Button onClick={() => onOpenChange(false)}>\r\n              Đóng\r\n            </Button>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6845, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/shared/generic-export-dialog-v2.tsx"],"sourcesContent":["/**\r\n * GenericExportDialog V2\r\n * \r\n * Enhanced export dialog with:\r\n * - Column selection with groups\r\n * - Scope options (all/filtered/current-page/selected)\r\n * - Export history logging\r\n * - File size estimation\r\n */\r\n\r\nimport * as React from \"react\"\r\nimport { Download, FileSpreadsheet, Loader2 } from \"lucide-react\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"../ui/dialog\"\r\nimport { Button } from \"../ui/button\"\r\nimport { Label } from \"../ui/label\"\r\nimport { RadioGroup, RadioGroupItem } from \"../ui/radio-group\"\r\nimport { Checkbox } from \"../ui/checkbox\"\r\nimport { ScrollArea } from \"../ui/scroll-area\"\r\nimport { Separator } from \"../ui/separator\"\r\nimport { Badge } from \"../ui/badge\"\r\nimport * as XLSX from 'xlsx'\r\nimport { toast } from \"sonner\"\r\nimport {\r\n  useImportExportStore,\r\n  type ImportExportConfig,\r\n  type FieldConfig,\r\n  transformExportRow,\r\n  generateExportFileName,\r\n  formatFileSize,\r\n} from '../../lib/import-export/index'\r\nimport type { SystemId } from \"../../lib/id-types\"\r\nimport { usePricingPolicyStore } from \"../../features/settings/pricing/store\"\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\ntype ExportScope = 'all' | 'filtered' | 'current-page' | 'selected';\r\n\r\ninterface GenericExportDialogV2Props<T> {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  \r\n  // Configuration from ImportExportConfig\r\n  config: ImportExportConfig<T>\r\n  \r\n  // Data sources\r\n  allData: T[]\r\n  filteredData: T[]       // After applying filters\r\n  currentPageData: T[]    // Current page only\r\n  selectedData: T[]       // Selected rows\r\n  \r\n  // Filters applied (for logging)\r\n  appliedFilters?: Record<string, unknown>\r\n  \r\n  // Current user for logging\r\n  currentUser: {\r\n    name: string\r\n    systemId: SystemId\r\n  }\r\n}\r\n\r\n// ============================================\r\n// COMPONENT\r\n// ============================================\r\n\r\nexport function GenericExportDialogV2<T>({\r\n  open,\r\n  onOpenChange,\r\n  config,\r\n  allData,\r\n  filteredData,\r\n  currentPageData,\r\n  selectedData,\r\n  appliedFilters,\r\n  currentUser,\r\n}: GenericExportDialogV2Props<T>) {\r\n  // Store\r\n  const addExportLog = useImportExportStore(state => state.addExportLog)\r\n  \r\n  // State\r\n  const [exportScope, setExportScope] = React.useState<ExportScope>('filtered')\r\n  const [selectedColumns, setSelectedColumns] = React.useState<string[]>([])\r\n  const [isExporting, setIsExporting] = React.useState(false)\r\n\r\n  // Initialize selected columns from config (all non-hidden fields)\r\n  React.useEffect(() => {\r\n    if (open && selectedColumns.length === 0) {\r\n      const defaultColumns = config.fields\r\n        .filter(f => !f.hidden && f.exportable !== false)\r\n        .map(f => f.key as string)\r\n      setSelectedColumns(defaultColumns)\r\n    }\r\n  }, [open, config.fields])\r\n\r\n  // Reset scope when dialog opens\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      // Default to filtered if has filters, else all\r\n      if (filteredData.length < allData.length) {\r\n        setExportScope('filtered')\r\n      } else if (selectedData.length > 0) {\r\n        setExportScope('selected')\r\n      } else {\r\n        setExportScope('all')\r\n      }\r\n    }\r\n  }, [open, allData.length, filteredData.length, selectedData.length])\r\n\r\n  // Group fields by category\r\n  const groupedFields = React.useMemo(() => {\r\n    const groups: Record<string, FieldConfig<T>[]> = {}\r\n    \r\n    config.fields.forEach(field => {\r\n      if (field.hidden || field.exportable === false) return\r\n      \r\n      const group = field.group || field.exportGroup || 'Khác'\r\n      if (!groups[group]) {\r\n        groups[group] = []\r\n      }\r\n      groups[group].push(field)\r\n    })\r\n    \r\n    // ===== DYNAMIC PRICING COLUMNS (chỉ cho products) =====\r\n    if (config.entityType === 'products') {\r\n      const pricingPolicies = usePricingPolicyStore.getState().data.filter(p => p.isActive)\r\n      if (pricingPolicies.length > 0) {\r\n        const pricingFields: FieldConfig<T>[] = pricingPolicies.map(policy => ({\r\n          key: `_price_${policy.systemId}` as keyof T & string,\r\n          label: `Giá: ${policy.name}`,\r\n          type: 'number' as const,\r\n          exportGroup: 'Bảng giá',\r\n          group: 'Bảng giá',\r\n          // Custom transform to extract price from prices object\r\n          exportTransform: (value: unknown, row?: T) => {\r\n            const product = row as { prices?: Record<string, number> }\r\n            return product?.prices?.[policy.systemId] ?? ''\r\n          },\r\n        }))\r\n        groups['Bảng giá'] = pricingFields\r\n      }\r\n    }\r\n    \r\n    return groups\r\n  }, [config.fields, config.entityType])\r\n\r\n  // Exportable fields (non-hidden) - including dynamic pricing fields\r\n  const exportableFields = React.useMemo(() => {\r\n    const staticFields = config.fields.filter(f => !f.hidden && f.exportable !== false)\r\n    \r\n    // Add dynamic pricing fields for products\r\n    if (config.entityType === 'products') {\r\n      const pricingPolicies = usePricingPolicyStore.getState().data.filter(p => p.isActive)\r\n      const pricingFields: FieldConfig<T>[] = pricingPolicies.map(policy => ({\r\n        key: `_price_${policy.systemId}` as keyof T & string,\r\n        label: `Giá: ${policy.name}`,\r\n        type: 'number' as const,\r\n        exportGroup: 'Bảng giá',\r\n        group: 'Bảng giá',\r\n      }))\r\n      return [...staticFields, ...pricingFields]\r\n    }\r\n    \r\n    return staticFields\r\n  }, [config.fields, config.entityType])\r\n\r\n  // Data count by scope\r\n  const getDataByScope = React.useCallback((scope: ExportScope): T[] => {\r\n    switch (scope) {\r\n      case 'all':\r\n        return allData\r\n      case 'filtered':\r\n        return filteredData\r\n      case 'current-page':\r\n        return currentPageData\r\n      case 'selected':\r\n        return selectedData\r\n    }\r\n  }, [allData, filteredData, currentPageData, selectedData])\r\n\r\n  const dataToExport = getDataByScope(exportScope)\r\n\r\n  // ============================================\r\n  // HANDLERS\r\n  // ============================================\r\n\r\n  const handleToggleColumn = (columnKey: string) => {\r\n    setSelectedColumns(prev => \r\n      prev.includes(columnKey)\r\n        ? prev.filter(k => k !== columnKey)\r\n        : [...prev, columnKey]\r\n    )\r\n  }\r\n\r\n  const handleToggleGroup = (groupFields: FieldConfig<T>[]) => {\r\n    const groupKeys = groupFields.map(f => f.key as string)\r\n    const allSelected = groupKeys.every(k => selectedColumns.includes(k))\r\n    \r\n    if (allSelected) {\r\n      setSelectedColumns(prev => prev.filter(k => !groupKeys.includes(k)))\r\n    } else {\r\n      setSelectedColumns(prev => [...new Set([...prev, ...groupKeys])])\r\n    }\r\n  }\r\n\r\n  const handleToggleAll = () => {\r\n    if (selectedColumns.length === exportableFields.length) {\r\n      setSelectedColumns([])\r\n    } else {\r\n      setSelectedColumns(exportableFields.map(f => f.key as string))\r\n    }\r\n  }\r\n\r\n  const handleExport = async () => {\r\n    if (selectedColumns.length === 0) {\r\n      toast.error('Vui lòng chọn ít nhất 1 cột để xuất')\r\n      return\r\n    }\r\n\r\n    if (dataToExport.length === 0) {\r\n      toast.error('Không có dữ liệu để xuất')\r\n      return\r\n    }\r\n\r\n    setIsExporting(true)\r\n\r\n    try {\r\n      // Get selected fields config (including dynamic pricing fields)\r\n      const staticSelectedFields = config.fields.filter(f => \r\n        selectedColumns.includes(f.key as string)\r\n      )\r\n      \r\n      // Add dynamic pricing fields for products\r\n      let allSelectedFields = [...staticSelectedFields]\r\n      const selectedPriceColumns = selectedColumns.filter(k => k.startsWith('_price_'))\r\n      \r\n      if (config.entityType === 'products' && selectedPriceColumns.length > 0) {\r\n        const pricingPolicies = usePricingPolicyStore.getState().data.filter(p => p.isActive)\r\n        const pricingFields: FieldConfig<T>[] = selectedPriceColumns.map(colKey => {\r\n          const systemId = colKey.replace('_price_', '')\r\n          const policy = pricingPolicies.find(p => p.systemId === systemId)\r\n          return {\r\n            key: colKey as keyof T & string,\r\n            label: `Giá: ${policy?.name || systemId}`,\r\n            type: 'number' as const,\r\n            exportGroup: 'Bảng giá',\r\n          }\r\n        })\r\n        allSelectedFields = [...allSelectedFields, ...pricingFields]\r\n      }\r\n\r\n      // Transform data (with special handling for pricing columns)\r\n      const transformedData = dataToExport.map(item => {\r\n        const row = transformExportRow(item, staticSelectedFields)\r\n        \r\n        // Add pricing columns for products\r\n        if (config.entityType === 'products' && selectedPriceColumns.length > 0) {\r\n          const product = item as { prices?: Record<string, number> }\r\n          const pricingPolicies = usePricingPolicyStore.getState().data.filter(p => p.isActive)\r\n          \r\n          selectedPriceColumns.forEach(colKey => {\r\n            const systemId = colKey.replace('_price_', '')\r\n            const policy = pricingPolicies.find(p => p.systemId === systemId)\r\n            const label = `Giá: ${policy?.name || systemId}`\r\n            row[label] = product?.prices?.[systemId] ?? ''\r\n          })\r\n        }\r\n        \r\n        return row\r\n      })\r\n\r\n      // Create workbook\r\n      const ws = XLSX.utils.json_to_sheet(transformedData)\r\n      const wb = XLSX.utils.book_new()\r\n      XLSX.utils.book_append_sheet(wb, ws, 'Data')\r\n\r\n      // Auto-size columns\r\n      const maxWidth = 50\r\n      const colWidths = Object.keys(transformedData[0] || {}).map(key => ({\r\n        wch: Math.min(\r\n          maxWidth,\r\n          Math.max(\r\n            key.length + 2,\r\n            ...transformedData.slice(0, 100).map(row => String(row[key] || '').length)\r\n          )\r\n        )\r\n      }))\r\n      ws['!cols'] = colWidths\r\n\r\n      // Generate filename\r\n      const fileName = generateExportFileName(config.entityType, exportScope)\r\n\r\n      // Write file and get blob for size\r\n      const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'array' })\r\n      const blob = new Blob([wbout], { type: 'application/octet-stream' })\r\n      \r\n      // Download\r\n      const url = URL.createObjectURL(blob)\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.download = fileName\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      URL.revokeObjectURL(url)\r\n\r\n      // Log to store\r\n      addExportLog({\r\n        entityType: config.entityType,\r\n        entityDisplayName: config.entityDisplayName,\r\n        fileName,\r\n        fileSize: blob.size,\r\n        totalRows: dataToExport.length,\r\n        scope: exportScope,\r\n        columnsExported: selectedColumns,\r\n        filters: appliedFilters,\r\n        performedBy: currentUser.name,\r\n        performedById: currentUser.systemId,\r\n        performedAt: new Date().toISOString(),\r\n        status: 'success',\r\n      })\r\n\r\n      toast.success('Xuất file thành công', {\r\n        description: `Đã xuất ${dataToExport.length} ${config.entityDisplayName}`\r\n      })\r\n      \r\n      onOpenChange(false)\r\n    } catch (error) {\r\n      console.error('Export error:', error)\r\n      toast.error('Có lỗi khi xuất file')\r\n    } finally {\r\n      setIsExporting(false)\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // RENDER\r\n  // ============================================\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <FileSpreadsheet className=\"h-5 w-5\" />\r\n            Xuất {config.entityDisplayName} ra Excel\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Chọn phạm vi và các cột cần xuất\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"flex-1 overflow-auto space-y-6 p-1\">\r\n          {/* Export Scope */}\r\n          <div className=\"space-y-3\">\r\n            <Label className=\"text-base font-semibold\">Giới hạn kết quả xuất</Label>\r\n            <RadioGroup \r\n              value={exportScope} \r\n              onValueChange={(v) => setExportScope(v as ExportScope)}\r\n              className=\"space-y-2\"\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <RadioGroupItem value=\"all\" id=\"scope-all\" />\r\n                  <Label htmlFor=\"scope-all\" className=\"font-normal cursor-pointer\">\r\n                    Tất cả dữ liệu\r\n                  </Label>\r\n                </div>\r\n                <Badge variant=\"secondary\">{allData.length}</Badge>\r\n              </div>\r\n              \r\n              {filteredData.length < allData.length && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"filtered\" id=\"scope-filtered\" />\r\n                    <Label htmlFor=\"scope-filtered\" className=\"font-normal cursor-pointer\">\r\n                      Kết quả đã lọc\r\n                    </Label>\r\n                  </div>\r\n                  <Badge variant=\"secondary\">{filteredData.length}</Badge>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <RadioGroupItem value=\"current-page\" id=\"scope-page\" />\r\n                  <Label htmlFor=\"scope-page\" className=\"font-normal cursor-pointer\">\r\n                    Trang hiện tại\r\n                  </Label>\r\n                </div>\r\n                <Badge variant=\"secondary\">{currentPageData.length}</Badge>\r\n              </div>\r\n              \r\n              {selectedData.length > 0 && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"selected\" id=\"scope-selected\" />\r\n                    <Label htmlFor=\"scope-selected\" className=\"font-normal cursor-pointer\">\r\n                      Các dòng đã chọn\r\n                    </Label>\r\n                  </div>\r\n                  <Badge variant=\"default\">{selectedData.length}</Badge>\r\n                </div>\r\n              )}\r\n            </RadioGroup>\r\n          </div>\r\n\r\n          <Separator />\r\n\r\n          {/* Column Selection */}\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <Label className=\"text-base font-semibold\">\r\n                Chọn cột xuất ({selectedColumns.length}/{exportableFields.length})\r\n              </Label>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={handleToggleAll}\r\n              >\r\n                {selectedColumns.length === exportableFields.length ? 'Bỏ chọn tất cả' : 'Chọn tất cả'}\r\n              </Button>\r\n            </div>\r\n\r\n            <ScrollArea className=\"h-[280px] rounded-md border border-border p-4\">\r\n              <div className=\"space-y-4\">\r\n                {Object.entries(groupedFields).map(([group, fields]) => {\r\n                  const groupKeys = fields.map(f => f.key as string)\r\n                  const selectedCount = groupKeys.filter(k => selectedColumns.includes(k)).length\r\n                  const allSelected = selectedCount === fields.length\r\n                  const someSelected = selectedCount > 0 && selectedCount < fields.length\r\n                  \r\n                  return (\r\n                    <div key={group} className=\"space-y-2\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Checkbox\r\n                          id={`group-${group}`}\r\n                          checked={allSelected}\r\n                          // @ts-ignore - indeterminate is valid HTML attribute\r\n                          ref={(el) => el && (el.indeterminate = someSelected)}\r\n                          onCheckedChange={() => handleToggleGroup(fields)}\r\n                        />\r\n                        <Label \r\n                          htmlFor={`group-${group}`}\r\n                          className=\"text-sm font-semibold text-muted-foreground cursor-pointer\"\r\n                        >\r\n                          {group} ({selectedCount}/{fields.length})\r\n                        </Label>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 gap-2 ml-6\">\r\n                        {fields.map(field => (\r\n                          <div key={field.key as string} className=\"flex items-center space-x-2\">\r\n                            <Checkbox\r\n                              id={field.key as string}\r\n                              checked={selectedColumns.includes(field.key as string)}\r\n                              onCheckedChange={() => handleToggleColumn(field.key as string)}\r\n                            />\r\n                            <Label\r\n                              htmlFor={field.key as string}\r\n                              className=\"text-sm font-normal cursor-pointer\"\r\n                            >\r\n                              {field.label}\r\n                              {field.required && <span className=\"text-destructive\">*</span>}\r\n                            </Label>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </ScrollArea>\r\n          </div>\r\n\r\n          {/* Preview */}\r\n          <div className=\"rounded-lg bg-muted p-3 text-sm space-y-1\">\r\n            <p className=\"text-muted-foreground\">\r\n              <strong>Sẽ xuất:</strong> {dataToExport.length} {config.entityDisplayName} với {selectedColumns.length} cột\r\n            </p>\r\n            {selectedColumns.length > 0 && (\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Cột: {selectedColumns.slice(0, 5).map(k => {\r\n                  const field = config.fields.find(f => f.key === k)\r\n                  return field?.label || k\r\n                }).join(', ')}\r\n                {selectedColumns.length > 5 && ` và ${selectedColumns.length - 5} cột khác`}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isExporting}>\r\n            Hủy\r\n          </Button>\r\n          <Button \r\n            onClick={handleExport} \r\n            disabled={selectedColumns.length === 0 || dataToExport.length === 0 || isExporting}\r\n          >\r\n            {isExporting ? (\r\n              <>\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                Đang xuất...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Download className=\"mr-2 h-4 w-4\" />\r\n                Xuất Excel ({dataToExport.length})\r\n              </>\r\n            )}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7663, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/layout/page-toolbar.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Button } from '../ui/button';\r\nimport { cn } from '../../lib/utils';\r\n\r\n/**\r\n * Page Toolbar Component\r\n * Mobile-first toolbar for common actions (Import, Export, Column Toggle)\r\n * Hàng 2 trong layout 3 tầng\r\n * \r\n * Layout: Import/Export bên trái, Settings (Column toggle) bên phải\r\n */\r\nexport interface PageToolbarProps {\r\n  /** Left side actions (Import, Export) */\r\n  leftActions?: React.ReactNode;\r\n  /** Right side actions (Column toggle, Settings) */\r\n  rightActions?: React.ReactNode;\r\n  /** Deprecated: Use leftActions and rightActions instead */\r\n  children?: React.ReactNode;\r\n  /** Additional CSS classes */\r\n  className?: string;\r\n}\r\n\r\nexport function PageToolbar({ leftActions, rightActions, children, className }: PageToolbarProps) {\r\n  // Backward compatibility: if children is provided, render old way\r\n  if (children && !leftActions && !rightActions) {\r\n    return (\r\n      <div \r\n        className={cn(\r\n          \"flex flex-wrap items-center gap-2 py-3 bg-background\",\r\n          className\r\n        )}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!leftActions && !rightActions) return null;\r\n\r\n  return (\r\n    <div \r\n      className={cn(\r\n        \"flex items-center justify-between py-3 bg-background\",\r\n        className\r\n      )}\r\n    >\r\n      {/* Left: Import, Export - SÁT MÉP TRÁI */}\r\n      <div className=\"flex items-center gap-2\">\r\n        {leftActions}\r\n      </div>\r\n      \r\n      {/* Right: Trash & Column Toggle - SÁT MÉP PHẢI */}\r\n      <div className=\"flex items-center gap-2\">\r\n        {rightActions}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAoBO,SAAS,YAAY,EAAE,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAoB;IAC9F,kEAAkE;IAClE,IAAI,YAAY,CAAC,eAAe,CAAC,cAAc;QAC7C,qBACE,8OAAC;YACC,WAAW,IAAA,kHAAE,EACX,wDACA;sBAGD;;;;;;IAGP;IAEA,IAAI,CAAC,eAAe,CAAC,cAAc,OAAO;IAE1C,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,wDACA;;0BAIF,8OAAC;gBAAI,WAAU;0BACZ;;;;;;0BAIH,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 7714, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/layout/page-filters.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Input } from '../ui/input';\r\nimport { cn } from '../../lib/utils';\r\n\r\n/**\r\n * Page Filters Component\r\n * Mobile-first filters bar for search and custom filters\r\n * Hàng 3 trong layout 3 tầng\r\n * Layout: Search + leftFilters bên TRÁI | rightFilters bên PHẢI\r\n */\r\nexport interface PageFiltersProps {\r\n  /** Search input props */\r\n  searchValue?: string;\r\n  onSearchChange?: (value: string) => void;\r\n  searchPlaceholder?: string;\r\n  /** Deprecated: Use children for backward compatibility, or use leftFilters + rightFilters for new layout */\r\n  children?: React.ReactNode;\r\n  /** Filters to show next to search (left side) */\r\n  leftFilters?: React.ReactNode;\r\n  /** Filters to show on right side */\r\n  rightFilters?: React.ReactNode;\r\n  /** Additional CSS classes */\r\n  className?: string;\r\n}\r\n\r\nexport function PageFilters({ \r\n  searchValue = '',\r\n  onSearchChange,\r\n  searchPlaceholder = 'Tìm kiếm...',\r\n  children,\r\n  leftFilters,\r\n  rightFilters,\r\n  className \r\n}: PageFiltersProps) {\r\n  // Backward compatibility: if children is provided without leftFilters/rightFilters, use old layout\r\n  const useNewLayout = (leftFilters !== undefined || rightFilters !== undefined);\r\n  \r\n  if (!useNewLayout && children) {\r\n    return (\r\n      <div \r\n        className={cn(\r\n          \"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 py-3 bg-muted/20\",\r\n          className\r\n        )}\r\n      >\r\n        {/* Search bar - Full width on mobile, auto on desktop */}\r\n        {onSearchChange && (\r\n          <Input\r\n            type=\"search\"\r\n            placeholder={searchPlaceholder}\r\n            value={searchValue}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n            className=\"h-9 w-full sm:w-[280px] md:w-[360px] lg:w-[420px]\"\r\n          />\r\n        )}\r\n        \r\n        {/* Custom filters - Wrap on mobile */}\r\n        <div className=\"flex flex-wrap items-center gap-2\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // New layout: Search + leftFilters | rightFilters\r\n  return (\r\n    <div \r\n      className={cn(\r\n        \"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 py-3 bg-muted/20\",\r\n        className\r\n      )}\r\n    >\r\n      {/* Left side: Search + leftFilters */}\r\n      <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-1\">\r\n        {onSearchChange && (\r\n          <Input\r\n            type=\"search\"\r\n            placeholder={searchPlaceholder}\r\n            value={searchValue}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n            className=\"h-9 w-full sm:w-[280px] md:w-[360px] lg:w-[420px]\"\r\n          />\r\n        )}\r\n        {leftFilters && (\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            {leftFilters}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Right side: rightFilters */}\r\n      {rightFilters && (\r\n        <div className=\"flex flex-wrap items-center gap-2\">\r\n          {rightFilters}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAuBO,SAAS,YAAY,EAC1B,cAAc,EAAE,EAChB,cAAc,EACd,oBAAoB,aAAa,EACjC,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,SAAS,EACQ;IACjB,mGAAmG;IACnG,MAAM,eAAgB,gBAAgB,aAAa,iBAAiB;IAEpE,IAAI,CAAC,gBAAgB,UAAU;QAC7B,qBACE,8OAAC;YACC,WAAW,IAAA,kHAAE,EACX,kGACA;;gBAID,gCACC,8OAAC,mIAAK;oBACJ,MAAK;oBACL,aAAa;oBACb,OAAO;oBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oBAC9C,WAAU;;;;;;8BAKd,8OAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;IAIT;IAEA,kDAAkD;IAClD,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,kGACA;;0BAIF,8OAAC;gBAAI,WAAU;;oBACZ,gCACC,8OAAC,mIAAK;wBACJ,MAAK;wBACL,aAAa;wBACb,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;;;;;;oBAGb,6BACC,8OAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;YAMN,8BACC,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 7808, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0 sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,kHAAE,EACX,wIACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,yQACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 7943, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/shared/simple-print-options-dialog.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle } from \"../ui/dialog\";\r\nimport { Button } from \"../ui/button\";\r\nimport { Label } from \"../ui/label\";\r\nimport { Checkbox } from \"../ui/checkbox\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"../ui/select\";\r\nimport { cn } from \"../../lib/utils\";\r\nimport { useAllBranches } from \"../../features/settings/branches/hooks/use-all-branches\";\r\n\r\n// Paper size options matching the order print dialog\r\nconst PAPER_SIZE_OPTIONS = [\r\n  { label: 'A4', value: 'A4' },\r\n  { label: 'A5', value: 'A5' },\r\n  { label: 'A6', value: 'A6' },\r\n  { label: 'K80', value: 'K80' },\r\n  { label: 'K57', value: 'K57' },\r\n] as const;\r\n\r\nexport type PaperSize = typeof PAPER_SIZE_OPTIONS[number]['value'];\r\n\r\n// In-memory session cache for print defaults\r\nlet sessionDefaults: Partial<SimplePrintOptionsResult> = {};\r\n\r\nexport interface SimplePrintOptionsResult {\r\n  branchSystemId: string;\r\n  paperSize: PaperSize;\r\n}\r\n\r\ninterface SimplePrintOptionsDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  onConfirm: (options: SimplePrintOptionsResult) => void;\r\n  selectedCount: number;\r\n  title?: string;\r\n}\r\n\r\n// Helper to load saved defaults (in-memory only)\r\nfunction loadSavedDefaults(): Partial<SimplePrintOptionsResult> {\r\n  return sessionDefaults;\r\n}\r\n\r\n// Helper to save defaults (in-memory only)\r\nfunction saveDefaults(options: SimplePrintOptionsResult) {\r\n  sessionDefaults = options;\r\n}\r\n\r\nexport function SimplePrintOptionsDialog({\r\n  open,\r\n  onOpenChange,\r\n  onConfirm,\r\n  selectedCount,\r\n  title = 'Tùy chọn in',\r\n}: SimplePrintOptionsDialogProps) {\r\n  const { data: branches } = useAllBranches();\r\n  const activeBranches = branches;\r\n\r\n  // Form state with saved defaults\r\n  const savedDefaults = React.useMemo(() => loadSavedDefaults(), []);\r\n  const defaultBranch = activeBranches.find(b => b.isDefault)?.systemId ?? activeBranches[0]?.systemId ?? '';\r\n  \r\n  const [branchSystemId, setBranchSystemId] = React.useState<string>(\r\n    savedDefaults.branchSystemId ?? defaultBranch\r\n  );\r\n  const [paperSize, setPaperSize] = React.useState<PaperSize>(\r\n    savedDefaults.paperSize ?? 'A4'\r\n  );\r\n  const [saveAsDefault, setSaveAsDefault] = React.useState(false);\r\n\r\n  // Reset form when dialog opens\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      const defaults = loadSavedDefaults();\r\n      setBranchSystemId(defaults.branchSystemId ?? defaultBranch);\r\n      setPaperSize(defaults.paperSize ?? 'A4');\r\n      setSaveAsDefault(false);\r\n    }\r\n  }, [open, defaultBranch]);\r\n\r\n  const handleConfirm = () => {\r\n    const options: SimplePrintOptionsResult = {\r\n      branchSystemId,\r\n      paperSize,\r\n    };\r\n\r\n    if (saveAsDefault) {\r\n      saveDefaults(options);\r\n    }\r\n\r\n    onConfirm(options);\r\n    onOpenChange(false);\r\n  };\r\n\r\n  // Get branch display name\r\n  const selectedBranchName = React.useMemo(() => {\r\n    if (!branchSystemId) return 'Chi nhánh mặc định';\r\n    const branch = activeBranches.find(b => b.systemId === branchSystemId);\r\n    return branch?.name ?? 'Chi nhánh mặc định';\r\n  }, [branchSystemId, activeBranches]);\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"sm:max-w-[480px]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-lg\">\r\n            {title}\r\n            {selectedCount > 1 && (\r\n              <span className=\"ml-2 text-sm font-normal text-muted-foreground\">\r\n                ({selectedCount} phiếu)\r\n              </span>\r\n            )}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid gap-6 py-4\">\r\n          {/* Chi nhánh */}\r\n          <div className=\"flex items-center gap-4\">\r\n            <Label className=\"min-w-[160px] text-right text-muted-foreground\">\r\n              Chọn mẫu in tại chi nhánh\r\n            </Label>\r\n            <Select value={branchSystemId} onValueChange={setBranchSystemId}>\r\n              <SelectTrigger className=\"flex-1\">\r\n                <SelectValue placeholder=\"Chi nhánh mặc định\">\r\n                  {selectedBranchName}\r\n                </SelectValue>\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {activeBranches.map(branch => (\r\n                  <SelectItem key={branch.systemId} value={branch.systemId}>\r\n                    {branch.name} {branch.isDefault ? '(mặc định)' : ''}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Khổ giấy - Button group */}\r\n          <div className=\"space-y-3\">\r\n            <Label className=\"text-muted-foreground\">Chọn mẫu in phiếu</Label>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {PAPER_SIZE_OPTIONS.map(option => (\r\n                <Button\r\n                  key={option.value}\r\n                  type=\"button\"\r\n                  variant={paperSize === option.value ? \"default\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  className={cn(\r\n                    \"min-w-[70px]\",\r\n                    paperSize === option.value && \"bg-primary text-primary-foreground\"\r\n                  )}\r\n                  onClick={() => setPaperSize(option.value)}\r\n                >\r\n                  {option.label}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Save as default checkbox */}\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Checkbox\r\n              id=\"save-default\"\r\n              checked={saveAsDefault}\r\n              onCheckedChange={(checked) => setSaveAsDefault(checked === true)}\r\n            />\r\n            <Label \r\n              htmlFor=\"save-default\" \r\n              className=\"text-sm cursor-pointer text-muted-foreground\"\r\n            >\r\n              Đặt làm mặc định cho chức năng in tùy chọn\r\n            </Label>\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\r\n            Thoát\r\n          </Button>\r\n          <Button onClick={handleConfirm}>\r\n            In\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}