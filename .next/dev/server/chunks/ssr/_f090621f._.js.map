{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n \r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\n/**\r\n * Generate URL-friendly slug from Vietnamese text\r\n * Handles Vietnamese diacritics and special characters\r\n */\r\nexport function slugify(text: string): string {\r\n  if (!text) return '';\r\n  \r\n  // Vietnamese character map\r\n  const vnMap: Record<string, string> = {\r\n    '√†': 'a', '√°': 'a', '·∫£': 'a', '√£': 'a', '·∫°': 'a',\r\n    'ƒÉ': 'a', '·∫±': 'a', '·∫Ø': 'a', '·∫≥': 'a', '·∫µ': 'a', '·∫∑': 'a',\r\n    '√¢': 'a', '·∫ß': 'a', '·∫•': 'a', '·∫©': 'a', '·∫´': 'a', '·∫≠': 'a',\r\n    'ƒë': 'd',\r\n    '√®': 'e', '√©': 'e', '·∫ª': 'e', '·∫Ω': 'e', '·∫π': 'e',\r\n    '√™': 'e', '·ªÅ': 'e', '·∫ø': 'e', '·ªÉ': 'e', '·ªÖ': 'e', '·ªá': 'e',\r\n    '√¨': 'i', '√≠': 'i', '·ªâ': 'i', 'ƒ©': 'i', '·ªã': 'i',\r\n    '√≤': 'o', '√≥': 'o', '·ªè': 'o', '√µ': 'o', '·ªç': 'o',\r\n    '√¥': 'o', '·ªì': 'o', '·ªë': 'o', '·ªï': 'o', '·ªó': 'o', '·ªô': 'o',\r\n    '∆°': 'o', '·ªù': 'o', '·ªõ': 'o', '·ªü': 'o', '·ª°': 'o', '·ª£': 'o',\r\n    '√π': 'u', '√∫': 'u', '·ªß': 'u', '≈©': 'u', '·ª•': 'u',\r\n    '∆∞': 'u', '·ª´': 'u', '·ª©': 'u', '·ª≠': 'u', '·ªØ': 'u', '·ª±': 'u',\r\n    '·ª≥': 'y', '√Ω': 'y', '·ª∑': 'y', '·ªπ': 'y', '·ªµ': 'y',\r\n  };\r\n  \r\n  return text\r\n    .toLowerCase()\r\n    .split('')\r\n    .map(char => vnMap[char] || char)\r\n    .join('')\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '') // Remove remaining diacritics\r\n    .replace(/[^a-z0-9\\s-]/g, '') // Remove non-alphanumeric\r\n    .replace(/\\s+/g, '-') // Replace spaces with hyphens\r\n    .replace(/-+/g, '-') // Replace multiple hyphens\r\n    .replace(/^-+|-+$/g, ''); // Trim hyphens from ends\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAMO,SAAS,QAAQ,IAAY;IAClC,IAAI,CAAC,MAAM,OAAO;IAElB,2BAA2B;IAC3B,MAAM,QAAgC;QACpC,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAC7C,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QACvD,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QACvD,KAAK;QACL,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAC7C,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QACvD,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAC7C,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAC7C,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QACvD,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QACvD,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAC7C,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QACvD,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;QAAK,KAAK;IAC/C;IAEA,OAAO,KACJ,WAAW,GACX,KAAK,CAAC,IACN,GAAG,CAAC,CAAA,OAAQ,KAAK,CAAC,KAAK,IAAI,MAC3B,IAAI,CAAC,IACL,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAAI,8BAA8B;KAC9D,OAAO,CAAC,iBAAiB,IAAI,0BAA0B;KACvD,OAAO,CAAC,QAAQ,KAAK,8BAA8B;KACnD,OAAO,CAAC,OAAO,KAAK,2BAA2B;KAC/C,OAAO,CAAC,YAAY,KAAK,yBAAyB;AACvD"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border border-border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0EACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium text-muted-foreground ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,uEACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6ZACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/smart-prefix.ts"],"sourcesContent":["/**\r\n * Smart Prefix System\r\n * Mapping entity types to their unique prefixes\r\n */\r\n\r\nexport const ENTITY_PREFIXES = {\r\n  // ========================================\r\n  // NH√ÇN S·ª∞ & T·ªî CH·ª®C (HR & ORGANIZATION)\r\n  // ========================================\r\n  'employees': 'NV',           // Nh√¢n vi√™n (Employee)\r\n  'departments': 'PB',         // Ph√≤ng ban (Department)\r\n  'branches': 'CN',            // Chi nh√°nh (Branch)\r\n  'job-titles': 'CV',          // Ch·ª©c v·ª• (Job Title)\r\n  \r\n  // ========================================\r\n  // KH√ÅCH H√ÄNG & ƒê·ªêI T√ÅC (CUSTOMERS & PARTNERS)\r\n  // ========================================\r\n  'customers': 'KH',           // Kh√°ch h√†ng (Customer)\r\n  'suppliers': 'NCC',          // Nh√† cung c·∫•p (Supplier)\r\n  'shipping-partners': 'DVVC', // ƒê∆°n v·ªã v·∫≠n chuy·ªÉn (Shipping Partner)\r\n  \r\n  // ========================================\r\n  // S·∫¢N PH·∫®M & KHO (PRODUCTS & INVENTORY)\r\n  // ========================================\r\n  'products': 'SP',            // S·∫£n ph·∫©m (Product)\r\n  'brands': 'TH',              // Th∆∞∆°ng hi·ªáu (Brand)\r\n  'categories': 'DM',          // Danh m·ª•c (Category)\r\n  'units': 'DVT',              // ƒê∆°n v·ªã t√≠nh (Unit)\r\n  'stock-locations': 'KHO',    // Kho h√†ng (Stock Location)\r\n  'inventory-receipts': 'NK',  // Nh·∫≠p kho (Inventory Receipt)\r\n  'inventory-checks': 'PKK',   // Phi·∫øu ki·ªÉm kho (Inventory Check)\r\n  'stock-transfers': 'PCK',    // Phi·∫øu chuy·ªÉn kho (Stock Transfer)\r\n  'stock-history': 'LS',       // L·ªãch s·ª≠ kho (Stock History)\r\n  \r\n  // ========================================\r\n  // B√ÅN H√ÄNG (SALES)\r\n  // ========================================\r\n  'orders': 'DH',              // ƒê∆°n h√†ng (Sales Order)\r\n  'sales-returns': 'TH',       // Tr·∫£ h√†ng (Sales Return)\r\n  'sales-channels': 'KENH',    // K√™nh b√°n h√†ng (Sales Channel)\r\n  'shipments': 'VC',           // V·∫≠n chuy·ªÉn (Shipment)\r\n  \r\n  // ========================================\r\n  // MUA H√ÄNG (PURCHASING)\r\n  // ========================================\r\n  'purchase-orders': 'PO',     // ƒê∆°n mua h√†ng (Purchase Order)\r\n  'purchase-returns': 'TM',    // Tr·∫£ mua (Purchase Return)\r\n  \r\n  // ========================================\r\n  // T√ÄI CH√çNH (FINANCE)\r\n  // ========================================\r\n  'receipts': 'PT',            // Phi·∫øu thu (Receipt)\r\n  'payments': 'PC',            // Phi·∫øu chi (Payment)\r\n  'voucher-receipt': 'PT',     // Alias phi·∫øu thu t·ª´ workflow voucher\r\n  'voucher-payment': 'PC',     // Alias phi·∫øu chi t·ª´ workflow voucher\r\n  'cashbook': 'SCT',           // S·ªï qu·ªπ (Cashbook)\r\n  'reconciliation': 'DT',      // ƒê·ªëi t√†i (Reconciliation)\r\n  \r\n  // C√†i ƒë·∫∑t t√†i ch√≠nh\r\n  'receipt-types': 'LT',       // Lo·∫°i thu (Receipt Type)\r\n  'payment-types': 'LC',       // Lo·∫°i chi (Payment Type)\r\n  'cash-accounts': 'TK',       // T√†i kho·∫£n ti·ªÅn (Cash Account)\r\n  'payment-methods': 'PTTT',   // Ph∆∞∆°ng th·ª©c thanh to√°n (Payment Method)\r\n  'pricing-settings': 'GIA',   // Ch√≠nh s√°ch gi√° (Pricing Policy)\r\n  'taxes': 'TAX',              // Thu·∫ø (Tax)\r\n  \r\n  // ========================================\r\n  // L∆Ø∆†NG & NH√ÇN S·ª∞ (PAYROLL & HR)\r\n  // ========================================\r\n  'payroll': 'BL',             // B·∫£ng l∆∞∆°ng (Payroll)\r\n  'payslips': 'PL',            // Phi·∫øu l∆∞∆°ng (Payslip)\r\n  'payroll-audit-log': 'PAL',  // Nh·∫≠t k√Ω payroll\r\n  'payroll-templates': 'BTP',  // M·∫´u b·∫£ng l∆∞∆°ng (Payroll Template)\r\n  'penalties': 'PF',           // Phi·∫øu ph·∫°t (Penalty)\r\n  'leaves': 'PN',              // Ph√©p ngh·ªâ (Leave)\r\n  'attendance': 'CC',          // Ch·∫•m c√¥ng (Attendance)\r\n  'duty-schedule': 'PC',       // Ph√¢n c√¥ng (Duty Schedule)\r\n  \r\n  // ========================================\r\n  // KPI & M·ª§C TI√äU (KPI & TARGETS)\r\n  // ========================================\r\n  'kpi': 'KPI',                // KPI\r\n  'target-groups': 'NHOM',     // Nh√≥m m·ª•c ti√™u (Target Group)\r\n  'other-targets': 'MT',       // M·ª•c ti√™u kh√°c (Other Target)\r\n  \r\n  // ========================================\r\n  // C√îNG VI·ªÜC & D·ªäCH V·ª§ (TASKS & SERVICES)\r\n  // ========================================\r\n  'internal-tasks': 'CVNB',    // C√¥ng vi·ªác n·ªôi b·ªô (Internal Task)\r\n  'task-templates': 'TMPL',    // M·∫´u c√¥ng vi·ªác (Task Template)\r\n  'custom-fields': 'FIELD',    // Tr∆∞·ªùng t√πy ch·ªânh (Custom Field)\r\n  'warranty': 'BH',            // B·∫£o h√†nh (Warranty)\r\n  'complaints': 'PKN',         // Khi·∫øu n·∫°i (Complaint)\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T & DANH M·ª§C (SETTINGS & CATEGORIES)\r\n  // ========================================\r\n  'provinces': 'TP',           // T·ªânh/Th√†nh ph·ªë (Province)\r\n  'districts': 'QH',           // Qu·∫≠n/Huy·ªán (District)\r\n  'wards': 'PX',               // Ph∆∞·ªùng/X√£ (Ward)\r\n  'wiki': 'TL',                // T√†i li·ªáu (Wiki)\r\n  'packaging': 'DG',           // ƒê√≥ng g√≥i (Packaging)\r\n  'audit-log': 'LOG',          // Nh·∫≠t k√Ω (Audit Log)\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T KH√ÅCH H√ÄNG (CUSTOMER SETTINGS)\r\n  // ========================================\r\n  'customer-types': 'LKH',     // Lo·∫°i kh√°ch h√†ng (Customer Type)\r\n  'customer-groups': 'NHKH',   // Nh√≥m kh√°ch h√†ng (Customer Group)\r\n  'customer-sources': 'NKH',   // Ngu·ªìn kh√°ch h√†ng (Customer Source)\r\n  'payment-terms': 'HTTT',     // H·∫°n thanh to√°n (Payment Term)\r\n  'credit-ratings': 'XHTD',    // X·∫øp h·∫°ng t√≠n d·ª•ng (Credit Rating)\r\n  'lifecycle-stages': 'GDL',   // Giai ƒëo·∫°n v√≤ng ƒë·ªùi kh√°ch h√†ng\r\n  'sla-settings': 'SLA',       // C√†i ƒë·∫∑t SLA kh√°ch h√†ng\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T NH√ÇN VI√äN (EMPLOYEE SETTINGS)\r\n  // ========================================\r\n  'employee-types': 'LNV',     // Lo·∫°i nh√¢n vi√™n (Employee Type)\r\n  'employee-statuses': 'TTNV', // Tr·∫°ng th√°i nh√¢n vi√™n (Employee Status)\r\n  'contract-types': 'LHD',     // Lo·∫°i h·ª£p ƒë·ªìng (Contract Type)\r\n  'work-shifts': 'CA',         // Ca l√†m vi·ªác (Work Shift)\r\n  'leave-types': 'LP',         // Lo·∫°i ngh·ªâ ph√©p (Leave Type)\r\n  'salary-components': 'SC',   // Th√†nh ph·∫ßn l∆∞∆°ng (Salary Component)\r\n  \r\n  // ========================================\r\n  // C√ÄI ƒê·∫∂T KH√ÅC (OTHER SETTINGS)\r\n  // ========================================\r\n  'settings': 'CFG',           // C·∫•u h√¨nh (Configuration)\r\n  \r\n  // ========================================\r\n  // AUTHENTICATION & USERS\r\n  // ========================================\r\n  'users': 'USER',             // User accounts (for admin management)\r\n  \r\n  // ========================================\r\n  // PKGX INTEGRATION (phukiengiaxuong.com.vn)\r\n  // ========================================\r\n  'pkgx-categories': 'PKGXCAT',        // Danh m·ª•c PKGX\r\n  'pkgx-brands': 'PKGXBRAND',          // Th∆∞∆°ng hi·ªáu PKGX\r\n  'pkgx-category-mappings': 'CATMAP',  // Mapping danh m·ª•c HRM ‚Üí PKGX\r\n  'pkgx-brand-mappings': 'BRANDMAP',   // Mapping th∆∞∆°ng hi·ªáu HRM ‚Üí PKGX\r\n  'pkgx-price-mappings': 'PRICEMAP',   // Mapping b·∫£ng gi√° HRM ‚Üí PKGX\r\n  'pkgx-sync-logs': 'PKGXLOG',         // Log ƒë·ªìng b·ªô PKGX\r\n  \r\n} as const;\r\n\r\nexport type EntityType = keyof typeof ENTITY_PREFIXES;\r\n\r\n/**\r\n * Get prefix for an entity type\r\n */\r\nexport function getPrefix(entityType: EntityType): string {\r\n  return ENTITY_PREFIXES[entityType];\r\n}\r\n\r\n/**\r\n * Get all entity types\r\n */\r\nexport function getAllEntityTypes(): EntityType[] {\r\n  return Object.keys(ENTITY_PREFIXES) as EntityType[];\r\n}\r\n\r\n/**\r\n * Check if an entity type exists\r\n */\r\nexport function isValidEntityType(entityType: string): entityType is EntityType {\r\n  return entityType in ENTITY_PREFIXES;\r\n}\r\n\r\n/**\r\n * Get entity type from prefix\r\n */\r\nexport function getEntityTypeFromPrefix(prefix: string): EntityType | null {\r\n  const entry = Object.entries(ENTITY_PREFIXES).find(([_, p]) => p === prefix);\r\n  return entry ? (entry[0] as EntityType) : null;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;AAEM,MAAM,kBAAkB;IAC7B,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,aAAa;IACb,eAAe;IACf,YAAY;IACZ,cAAc;IAEd,2CAA2C;IAC3C,8CAA8C;IAC9C,2CAA2C;IAC3C,aAAa;IACb,aAAa;IACb,qBAAqB;IAErB,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,YAAY;IACZ,UAAU;IACV,cAAc;IACd,SAAS;IACT,mBAAmB;IACnB,sBAAsB;IACtB,oBAAoB;IACpB,mBAAmB;IACnB,iBAAiB;IAEjB,2CAA2C;IAC3C,mBAAmB;IACnB,2CAA2C;IAC3C,UAAU;IACV,iBAAiB;IACjB,kBAAkB;IAClB,aAAa;IAEb,2CAA2C;IAC3C,wBAAwB;IACxB,2CAA2C;IAC3C,mBAAmB;IACnB,oBAAoB;IAEpB,2CAA2C;IAC3C,sBAAsB;IACtB,2CAA2C;IAC3C,YAAY;IACZ,YAAY;IACZ,mBAAmB;IACnB,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAElB,oBAAoB;IACpB,iBAAiB;IACjB,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;IACnB,oBAAoB;IACpB,SAAS;IAET,2CAA2C;IAC3C,iCAAiC;IACjC,2CAA2C;IAC3C,WAAW;IACX,YAAY;IACZ,qBAAqB;IACrB,qBAAqB;IACrB,aAAa;IACb,UAAU;IACV,cAAc;IACd,iBAAiB;IAEjB,2CAA2C;IAC3C,iCAAiC;IACjC,2CAA2C;IAC3C,OAAO;IACP,iBAAiB;IACjB,iBAAiB;IAEjB,2CAA2C;IAC3C,yCAAyC;IACzC,2CAA2C;IAC3C,kBAAkB;IAClB,kBAAkB;IAClB,iBAAiB;IACjB,YAAY;IACZ,cAAc;IAEd,2CAA2C;IAC3C,6CAA6C;IAC7C,2CAA2C;IAC3C,aAAa;IACb,aAAa;IACb,SAAS;IACT,QAAQ;IACR,aAAa;IACb,aAAa;IAEb,2CAA2C;IAC3C,yCAAyC;IACzC,2CAA2C;IAC3C,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;IACpB,iBAAiB;IACjB,kBAAkB;IAClB,oBAAoB;IACpB,gBAAgB;IAEhB,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,kBAAkB;IAClB,qBAAqB;IACrB,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,qBAAqB;IAErB,2CAA2C;IAC3C,gCAAgC;IAChC,2CAA2C;IAC3C,YAAY;IAEZ,2CAA2C;IAC3C,yBAAyB;IACzB,2CAA2C;IAC3C,SAAS;IAET,2CAA2C;IAC3C,4CAA4C;IAC5C,2CAA2C;IAC3C,mBAAmB;IACnB,eAAe;IACf,0BAA0B;IAC1B,uBAAuB;IACvB,uBAAuB;IACvB,kBAAkB;AAEpB;AAOO,SAAS,UAAU,UAAsB;IAC9C,OAAO,eAAe,CAAC,WAAW;AACpC;AAKO,SAAS;IACd,OAAO,OAAO,IAAI,CAAC;AACrB;AAKO,SAAS,kBAAkB,UAAkB;IAClD,OAAO,cAAc;AACvB;AAKO,SAAS,wBAAwB,MAAc;IACpD,MAAM,QAAQ,OAAO,OAAO,CAAC,iBAAiB,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,MAAM;IACrE,OAAO,QAAS,KAAK,CAAC,EAAE,GAAkB;AAC5C"}},
    {"offset": {"line": 395, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-config.ts"],"sourcesContent":["/**\r\n * ‚ö° ENTERPRISE ID MANAGEMENT SYSTEM v2.0\r\n * \r\n * SINGLE SOURCE OF TRUTH - Synced with smart-prefix.ts\r\n * \r\n * Features:\r\n * - 60+ entity configurations\r\n * - TypeScript branded types (SystemId, BusinessId)\r\n * - Category grouping for UI\r\n * - Validation rules\r\n * - Store factory integration\r\n * - Backward compatibility\r\n * \r\n * @version 2.0.0\r\n * @date 2025-11-10\r\n */\r\n\r\nimport { ENTITY_PREFIXES, type EntityType } from './smart-prefix';\r\n\r\n// Re-export EntityType for external use\r\nexport type { EntityType };\r\n\r\n// ========================================\r\n// üè∑Ô∏è BRANDED TYPES FOR TYPE SAFETY\r\n// ========================================\r\n\r\n/**\r\n * SystemId - Internal unique identifier (6 digits)\r\n * Used for: Database queries, foreign keys, routing\r\n * Example: \"EMP000001\", \"CUSTOMER000001\", \"ORDER000001\"\r\n */\r\nexport type SystemId = string & { readonly __brand: 'SystemId' };\r\n\r\n/**\r\n * BusinessId - User-facing display identifier (6 digits)\r\n * Used for: UI display, breadcrumbs, user communication\r\n * Example: \"NV000001\", \"KH000001\", \"DH000001\"\r\n */\r\nexport type BusinessId = string & { readonly __brand: 'BusinessId' };\r\n\r\n/**\r\n * Create a branded SystemId (use with caution - prefer auto-generation)\r\n */\r\nexport function createSystemId(id: string): SystemId {\r\n  return id as SystemId;\r\n}\r\n\r\n/**\r\n * Create a branded BusinessId (use with caution - prefer auto-generation)\r\n */\r\nexport function createBusinessId(id: string): BusinessId {\r\n  return id as BusinessId;\r\n}\r\n\r\nexport interface FormattedCounterInfo {\r\n  currentBusinessCounter: number;\r\n  currentSystemCounter: number;\r\n  nextBusinessId: BusinessId;\r\n  nextSystemId: SystemId;\r\n  digitCount: number;\r\n  prefix: string;\r\n  systemIdPrefix: string;\r\n  displayName: string;\r\n}\r\n\r\nexport function formatCounterInfo(\r\n  entityType: EntityType,\r\n  counters?: { business?: number | null; system?: number | null }\r\n): FormattedCounterInfo {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`Unknown entity type: ${entityType}`);\r\n  }\r\n\r\n  const currentBusinessCounter = Math.max(0, counters?.business ?? 0);\r\n  const currentSystemCounter = Math.max(0, counters?.system ?? currentBusinessCounter);\r\n  const nextBusinessCounter = currentBusinessCounter + 1;\r\n  const nextSystemCounter = currentSystemCounter + 1;\r\n  const paddedBusiness = String(nextBusinessCounter).padStart(config.digitCount, '0');\r\n  const paddedSystem = String(nextSystemCounter).padStart(config.digitCount, '0');\r\n\r\n  return {\r\n    currentBusinessCounter,\r\n    currentSystemCounter,\r\n    nextBusinessId: createBusinessId(`${config.prefix}${paddedBusiness}`),\r\n    nextSystemId: createSystemId(`${config.systemIdPrefix}${paddedSystem}`),\r\n    digitCount: config.digitCount,\r\n    prefix: config.prefix,\r\n    systemIdPrefix: config.systemIdPrefix,\r\n    displayName: config.displayName,\r\n  };\r\n}\r\n\r\n// ========================================\r\n// üìã CONFIGURATION INTERFACE\r\n// ========================================\r\n\r\nexport interface EntityIDConfig {\r\n  /** Entity type identifier */\r\n  entityType: EntityType;\r\n  \r\n  /** Prefix for business ID (user-facing) - from smart-prefix.ts */\r\n  prefix: string;\r\n  \r\n  /** Prefix for system ID (internal) - usually same or 'entity-name' */\r\n  systemIdPrefix: string;\r\n  \r\n  /** Number of digits for business ID (e.g., 6 ‚Üí NV000001) */\r\n  digitCount: number;\r\n  \r\n  /** Display name (Vietnamese) */\r\n  displayName: string;\r\n  \r\n  /** Category for settings UI grouping */\r\n  category: 'hr' | 'finance' | 'inventory' | 'sales' | 'purchasing' | 'service' | 'settings' | 'system';\r\n  \r\n  /** Description or notes */\r\n  description?: string;\r\n  \r\n  /** Custom validation rules */\r\n  validation?: {\r\n    /** Allow users to input custom ID */\r\n    allowCustomId?: boolean;\r\n    /** Regex pattern for validation */\r\n    pattern?: RegExp;\r\n    /** Minimum counter value */\r\n    minValue?: number;\r\n    /** Maximum counter value */\r\n    maxValue?: number;\r\n  };\r\n  \r\n  /** Whether entity uses store-factory auto-generation */\r\n  usesStoreFactory?: boolean;\r\n  \r\n  /** Special handling notes for developers */\r\n  notes?: string;\r\n}\r\n\r\n// ========================================\r\n// üóÇÔ∏è COMPLETE CONFIGURATION REGISTRY\r\n// ========================================\r\n\r\n/**\r\n * ID_CONFIG - Central registry for all 60+ entities\r\n * \r\n * ‚úÖ Synced with smart-prefix.ts\r\n * ‚úÖ Includes all missing entities\r\n * ‚úÖ Category organization\r\n */\r\nexport const ID_CONFIG: Record<EntityType, EntityIDConfig> = {\r\n  // ========================================\r\n  // üë• HR & ORGANIZATION (NH√ÇN S·ª∞)\r\n  // ========================================\r\n  \r\n  'employees': {\r\n    entityType: 'employees',\r\n    prefix: ENTITY_PREFIXES['employees'], // 'NV'\r\n    systemIdPrefix: 'EMP',\r\n    digitCount: 6,\r\n    displayName: 'Nh√¢n vi√™n',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'departments': {\r\n    entityType: 'departments',\r\n    prefix: ENTITY_PREFIXES['departments'], // 'PB'\r\n    systemIdPrefix: 'DEPT',\r\n    digitCount: 6,\r\n    displayName: 'Ph√≤ng ban',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'branches': {\r\n    entityType: 'branches',\r\n    prefix: ENTITY_PREFIXES['branches'], // 'CN'\r\n    systemIdPrefix: 'BRANCH',\r\n    digitCount: 6,\r\n    displayName: 'Chi nh√°nh',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'job-titles': {\r\n    entityType: 'job-titles',\r\n    prefix: ENTITY_PREFIXES['job-titles'], // 'CV'\r\n    systemIdPrefix: 'JOB',\r\n    digitCount: 6,\r\n    displayName: 'Ch·ª©c v·ª•',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'attendance': {\r\n    entityType: 'attendance',\r\n    prefix: ENTITY_PREFIXES['attendance'], // 'CC'\r\n    systemIdPrefix: 'ATTEND',\r\n    digitCount: 6,\r\n    displayName: 'Ch·∫•m c√¥ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'duty-schedule': {\r\n    entityType: 'duty-schedule',\r\n    prefix: ENTITY_PREFIXES['duty-schedule'], // 'PC'\r\n    systemIdPrefix: 'DUTY',\r\n    digitCount: 6,\r\n    displayName: 'Ph√¢n c√¥ng',\r\n    category: 'hr',\r\n    notes: 'Prefix conflict with \"payments\" (PC)',\r\n  },\r\n  \r\n  'payroll': {\r\n    entityType: 'payroll',\r\n    prefix: ENTITY_PREFIXES['payroll'], // 'BL'\r\n    systemIdPrefix: 'PAYROLL',\r\n    digitCount: 6,\r\n    displayName: 'B·∫£ng l∆∞∆°ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'payslips': {\r\n    entityType: 'payslips',\r\n    prefix: ENTITY_PREFIXES['payslips'], // 'PL'\r\n    systemIdPrefix: 'PAYSLIP',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu l∆∞∆°ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n    notes: 'Sinh t·ª´ payroll batch store',\r\n  },\r\n  \r\n  'payroll-audit-log': {\r\n    entityType: 'payroll-audit-log',\r\n    prefix: ENTITY_PREFIXES['payroll-audit-log'], // 'PAL'\r\n    systemIdPrefix: 'PAYROLLLOG',\r\n    digitCount: 6,\r\n    displayName: 'Nh·∫≠t k√Ω payroll',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  'payroll-templates': {\r\n    entityType: 'payroll-templates',\r\n    prefix: ENTITY_PREFIXES['payroll-templates'], // 'BTP'\r\n    systemIdPrefix: 'PAYTPL',\r\n    digitCount: 6,\r\n    displayName: 'M·∫´u b·∫£ng l∆∞∆°ng',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n    notes: 'D√πng cho trang template payroll Phase 3',\r\n  },\r\n  \r\n  'penalties': {\r\n    entityType: 'penalties',\r\n    prefix: ENTITY_PREFIXES['penalties'], // 'PF'\r\n    systemIdPrefix: 'PENALTY',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu ph·∫°t',\r\n    category: 'hr',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'leaves': {\r\n    entityType: 'leaves',\r\n    prefix: ENTITY_PREFIXES['leaves'], // 'PN'\r\n    systemIdPrefix: 'LEAVE',\r\n    digitCount: 6,\r\n    displayName: 'Ngh·ªâ ph√©p',\r\n    category: 'hr',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üë§ CUSTOMERS & PARTNERS (KH√ÅCH H√ÄNG)\r\n  // ========================================\r\n  \r\n  'customers': {\r\n    entityType: 'customers',\r\n    prefix: ENTITY_PREFIXES['customers'], // 'KH'\r\n    systemIdPrefix: 'CUSTOMER',\r\n    digitCount: 6,\r\n    displayName: 'Kh√°ch h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'suppliers': {\r\n    entityType: 'suppliers',\r\n    prefix: ENTITY_PREFIXES['suppliers'], // 'NCC'\r\n    systemIdPrefix: 'SUPPLIER',\r\n    digitCount: 6,\r\n    displayName: 'Nh√† cung c·∫•p',\r\n    category: 'purchasing',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'shipping-partners': {\r\n    entityType: 'shipping-partners',\r\n    prefix: ENTITY_PREFIXES['shipping-partners'], // 'DVVC'\r\n    systemIdPrefix: 'SHIPPING',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n v·ªã v·∫≠n chuy·ªÉn',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üì¶ PRODUCTS & INVENTORY (S·∫¢N PH·∫®M & KHO)\r\n  // ========================================\r\n  \r\n  'products': {\r\n    entityType: 'products',\r\n    prefix: ENTITY_PREFIXES['products'], // 'SP'\r\n    systemIdPrefix: 'PRODUCT',\r\n    digitCount: 6,\r\n    displayName: 'S·∫£n ph·∫©m',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'brands': {\r\n    entityType: 'brands',\r\n    prefix: ENTITY_PREFIXES['brands'], // 'TH'\r\n    systemIdPrefix: 'BRAND',\r\n    digitCount: 6,\r\n    displayName: 'Th∆∞∆°ng hi·ªáu',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'categories': {\r\n    entityType: 'categories',\r\n    prefix: ENTITY_PREFIXES['categories'], // 'DM'\r\n    systemIdPrefix: 'CATEGORY',\r\n    digitCount: 6,\r\n    displayName: 'Danh m·ª•c',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'units': {\r\n    entityType: 'units',\r\n    prefix: ENTITY_PREFIXES['units'], // 'DVT'\r\n    systemIdPrefix: 'UNIT',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n v·ªã t√≠nh',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'stock-locations': {\r\n    entityType: 'stock-locations',\r\n    prefix: ENTITY_PREFIXES['stock-locations'], // 'KHO'\r\n    systemIdPrefix: 'STOCK',\r\n    digitCount: 6,\r\n    displayName: 'V·ªã tr√≠ kho',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'inventory-receipts': {\r\n    entityType: 'inventory-receipts',\r\n    prefix: ENTITY_PREFIXES['inventory-receipts'], // 'NK'\r\n    systemIdPrefix: 'INVRECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Nh·∫≠p kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'inventory-checks': {\r\n    entityType: 'inventory-checks',\r\n    prefix: ENTITY_PREFIXES['inventory-checks'], // 'PKK'\r\n    systemIdPrefix: 'INVCHECK',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu ki·ªÉm kho',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'stock-transfers': {\r\n    entityType: 'stock-transfers',\r\n    prefix: ENTITY_PREFIXES['stock-transfers'], // 'PCK'\r\n    systemIdPrefix: 'TRANSFER',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu chuy·ªÉn kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: TRANSFER000001, Business ID: PCK000001',\r\n  },\r\n  \r\n  'stock-history': {\r\n    entityType: 'stock-history',\r\n    prefix: ENTITY_PREFIXES['stock-history'], // 'LS'\r\n    systemIdPrefix: 'HISTORY',\r\n    digitCount: 6,\r\n    displayName: 'L·ªãch s·ª≠ kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // üõí SALES (B√ÅN H√ÄNG)\r\n  // ========================================\r\n  \r\n  'orders': {\r\n    entityType: 'orders',\r\n    prefix: ENTITY_PREFIXES['orders'], // 'DH'\r\n    systemIdPrefix: 'ORDER',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'sales-returns': {\r\n    entityType: 'sales-returns',\r\n    prefix: ENTITY_PREFIXES['sales-returns'], // 'TH'\r\n    systemIdPrefix: 'RETURN',\r\n    digitCount: 6,\r\n    displayName: 'Tr·∫£ h√†ng',\r\n    category: 'sales',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'sales-channels': {\r\n    entityType: 'sales-channels',\r\n    prefix: ENTITY_PREFIXES['sales-channels'], // 'KENH'\r\n    systemIdPrefix: 'CHANNEL',\r\n    digitCount: 6,\r\n    displayName: 'K√™nh b√°n h√†ng',\r\n    category: 'sales',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'shipments': {\r\n    entityType: 'shipments',\r\n    prefix: ENTITY_PREFIXES['shipments'], // 'VC'\r\n    systemIdPrefix: 'SHIPMENT',\r\n    digitCount: 6,\r\n    displayName: 'V·∫≠n chuy·ªÉn',\r\n    category: 'sales',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // üè≠ PURCHASING (MUA H√ÄNG)\r\n  // ========================================\r\n  \r\n  'purchase-orders': {\r\n    entityType: 'purchase-orders',\r\n    prefix: ENTITY_PREFIXES['purchase-orders'], // 'PO'\r\n    systemIdPrefix: 'PURCHASE',\r\n    digitCount: 6,\r\n    displayName: 'ƒê∆°n mua h√†ng',\r\n    category: 'purchasing',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'purchase-returns': {\r\n    entityType: 'purchase-returns',\r\n    prefix: ENTITY_PREFIXES['purchase-returns'], // 'TM'\r\n    systemIdPrefix: 'PRETURN',\r\n    digitCount: 6,\r\n    displayName: 'Tr·∫£ h√†ng NCC',\r\n    category: 'purchasing',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üí∞ FINANCE (T√ÄI CH√çNH)\r\n  // ========================================\r\n  \r\n  'receipts': {\r\n    entityType: 'receipts',\r\n    prefix: ENTITY_PREFIXES['receipts'], // 'PT'\r\n    systemIdPrefix: 'RECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu thu',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payments': {\r\n    entityType: 'payments',\r\n    prefix: ENTITY_PREFIXES['payments'], // 'PC'\r\n    systemIdPrefix: 'PAYMENT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu chi',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n  },\r\n\r\n  'voucher-receipt': {\r\n    entityType: 'voucher-receipt',\r\n    prefix: ENTITY_PREFIXES['voucher-receipt'], // Alias 'PT'\r\n    systemIdPrefix: 'RECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu thu (Voucher)',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n    notes: 'Alias d√πng cho c√°c workflow voucher-only ho·∫∑c m√†n h√¨nh t·ªïng h·ª£p phi·∫øu thu/chi.',\r\n  },\r\n  \r\n  'voucher-payment': {\r\n    entityType: 'voucher-payment',\r\n    prefix: ENTITY_PREFIXES['voucher-payment'], // Alias 'PC'\r\n    systemIdPrefix: 'PAYMENT',\r\n    digitCount: 6,\r\n    displayName: 'Phi·∫øu chi (Voucher)',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n    notes: 'Alias d√πng cho c√°c workflow voucher-only ho·∫∑c m√†n h√¨nh t·ªïng h·ª£p phi·∫øu thu/chi.',\r\n  },\r\n  \r\n  'cashbook': {\r\n    entityType: 'cashbook',\r\n    prefix: ENTITY_PREFIXES['cashbook'], // 'SCT'\r\n    systemIdPrefix: 'CASHBOOK',\r\n    digitCount: 6,\r\n    displayName: 'S·ªï qu·ªπ ti·ªÅn m·∫∑t',\r\n    category: 'finance',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'reconciliation': {\r\n    entityType: 'reconciliation',\r\n    prefix: ENTITY_PREFIXES['reconciliation'], // 'DT'\r\n    systemIdPrefix: 'RECON',\r\n    digitCount: 6,\r\n    displayName: 'ƒê·ªëi chi·∫øu',\r\n    category: 'finance',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // Finance Settings\r\n  'receipt-types': {\r\n    entityType: 'receipt-types',\r\n    prefix: ENTITY_PREFIXES['receipt-types'], // 'LT'\r\n    systemIdPrefix: 'RECTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i thu',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payment-types': {\r\n    entityType: 'payment-types',\r\n    prefix: ENTITY_PREFIXES['payment-types'], // 'LC'\r\n    systemIdPrefix: 'PAYTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i chi',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'cash-accounts': {\r\n    entityType: 'cash-accounts',\r\n    prefix: ENTITY_PREFIXES['cash-accounts'], // 'TK'\r\n    systemIdPrefix: 'ACCOUNT',\r\n    digitCount: 6,\r\n    displayName: 'T√†i kho·∫£n',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payment-methods': {\r\n    entityType: 'payment-methods',\r\n    prefix: ENTITY_PREFIXES['payment-methods'], // 'PTTT'\r\n    systemIdPrefix: 'METHOD',\r\n    digitCount: 6,\r\n    displayName: 'Ph∆∞∆°ng th·ª©c thanh to√°n',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'pricing-settings': {\r\n    entityType: 'pricing-settings',\r\n    prefix: ENTITY_PREFIXES['pricing-settings'], // 'GIA'\r\n    systemIdPrefix: 'PRICING',\r\n    digitCount: 6,\r\n    displayName: 'C√†i ƒë·∫∑t gi√°',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n\r\n  'taxes': {\r\n    entityType: 'taxes',\r\n    prefix: ENTITY_PREFIXES['taxes'], // 'TAX'\r\n    systemIdPrefix: 'TAX',\r\n    digitCount: 6,\r\n    displayName: 'Thu·∫ø',\r\n    category: 'settings',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // üéØ KPI & TARGETS (M·ª§C TI√äU)\r\n  // ========================================\r\n  \r\n  'kpi': {\r\n    entityType: 'kpi',\r\n    prefix: ENTITY_PREFIXES['kpi'], // 'KPI'\r\n    systemIdPrefix: 'KPI',\r\n    digitCount: 6,\r\n    displayName: 'KPI',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'target-groups': {\r\n    entityType: 'target-groups',\r\n    prefix: ENTITY_PREFIXES['target-groups'], // 'NHOM'\r\n    systemIdPrefix: 'TARGET',\r\n    digitCount: 6,\r\n    displayName: 'Nh√≥m m·ª•c ti√™u',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'other-targets': {\r\n    entityType: 'other-targets',\r\n    prefix: ENTITY_PREFIXES['other-targets'], // 'MT'\r\n    systemIdPrefix: 'OTHERTARGET',\r\n    digitCount: 6,\r\n    displayName: 'M·ª•c ti√™u kh√°c',\r\n    category: 'sales',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // CUSTOMER SERVICE (D·ªäCH V·ª§)\r\n  // ========================================\r\n  \r\n  'internal-tasks': {\r\n    entityType: 'internal-tasks',\r\n    prefix: ENTITY_PREFIXES['internal-tasks'], // 'CVNB'\r\n    systemIdPrefix: 'TASK',\r\n    digitCount: 6,\r\n    displayName: 'C√¥ng vi·ªác n·ªôi b·ªô',\r\n    category: 'system',\r\n    usesStoreFactory: true,\r\n    validation: { allowCustomId: true },\r\n  },\r\n  \r\n  'task-templates': {\r\n    entityType: 'task-templates',\r\n    prefix: ENTITY_PREFIXES['task-templates'], // 'TMPL'\r\n    systemIdPrefix: 'TMPL',\r\n    digitCount: 6,\r\n    displayName: 'M·∫´u c√¥ng vi·ªác',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'custom-fields': {\r\n    entityType: 'custom-fields',\r\n    prefix: ENTITY_PREFIXES['custom-fields'], // 'FIELD'\r\n    systemIdPrefix: 'FIELD',\r\n    digitCount: 6,\r\n    displayName: 'Tr∆∞·ªùng t√πy ch·ªânh',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'warranty': {\r\n    entityType: 'warranty',\r\n    prefix: ENTITY_PREFIXES['warranty'], // 'BH'\r\n    systemIdPrefix: 'WARRANTY',\r\n    digitCount: 6,\r\n    displayName: 'B·∫£o h√†nh',\r\n    category: 'service',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: WARRANTY000001, Business ID: BH000001',\r\n  },\r\n  \r\n  'complaints': {\r\n    entityType: 'complaints',\r\n    prefix: ENTITY_PREFIXES['complaints'], // 'PKN'\r\n    systemIdPrefix: 'COMPLAINT',\r\n    digitCount: 6,\r\n    displayName: 'Khi·∫øu n·∫°i',\r\n    category: 'service',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: COMPLAINT000001, Business ID: PKN000001',\r\n  },\r\n  \r\n  // ========================================\r\n  // ‚öôÔ∏è SETTINGS & CATEGORIES\r\n  // ========================================\r\n  \r\n  'provinces': {\r\n    entityType: 'provinces',\r\n    prefix: ENTITY_PREFIXES['provinces'], // 'TP'\r\n    systemIdPrefix: 'PROVINCE',\r\n    digitCount: 6,\r\n    displayName: 'T·ªânh/Th√†nh ph·ªë',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'districts': {\r\n    entityType: 'districts',\r\n    prefix: ENTITY_PREFIXES['districts'], // 'QH'\r\n    systemIdPrefix: 'DISTRICT',\r\n    digitCount: 6,\r\n    displayName: 'Qu·∫≠n/Huy·ªán',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'wards': {\r\n    entityType: 'wards',\r\n    prefix: ENTITY_PREFIXES['wards'], // 'PX'\r\n    systemIdPrefix: 'WARD',\r\n    digitCount: 6,\r\n    displayName: 'Ph∆∞·ªùng/X√£',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'wiki': {\r\n    entityType: 'wiki',\r\n    prefix: ENTITY_PREFIXES['wiki'], // 'TL'\r\n    systemIdPrefix: 'WIKI',\r\n    digitCount: 6,\r\n    displayName: 'T√†i li·ªáu',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'packaging': {\r\n    entityType: 'packaging',\r\n    prefix: ENTITY_PREFIXES['packaging'], // 'DG'\r\n    systemIdPrefix: 'PACKAGE',\r\n    digitCount: 6,\r\n    displayName: 'ƒê√≥ng g√≥i',\r\n    category: 'inventory',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'audit-log': {\r\n    entityType: 'audit-log',\r\n    prefix: ENTITY_PREFIXES['audit-log'], // 'LOG'\r\n    systemIdPrefix: 'LOG',\r\n    digitCount: 10,\r\n    displayName: 'Nh·∫≠t k√Ω',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // Customer Settings\r\n  'customer-types': {\r\n    entityType: 'customer-types',\r\n    prefix: ENTITY_PREFIXES['customer-types'], // 'LKH'\r\n    systemIdPrefix: 'CUSTTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i kh√°ch h√†ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'customer-groups': {\r\n    entityType: 'customer-groups',\r\n    prefix: ENTITY_PREFIXES['customer-groups'], // 'NHKH'\r\n    systemIdPrefix: 'CUSTGROUP',\r\n    digitCount: 6,\r\n    displayName: 'Nh√≥m kh√°ch h√†ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'customer-sources': {\r\n    entityType: 'customer-sources',\r\n    prefix: ENTITY_PREFIXES['customer-sources'], // 'NKH'\r\n    systemIdPrefix: 'CUSTSOURCE',\r\n    digitCount: 6,\r\n    displayName: 'Ngu·ªìn kh√°ch h√†ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'payment-terms': {\r\n    entityType: 'payment-terms',\r\n    prefix: ENTITY_PREFIXES['payment-terms'], // 'HTTT'\r\n    systemIdPrefix: 'PAYTERM',\r\n    digitCount: 6,\r\n    displayName: 'H√¨nh th·ª©c thanh to√°n',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'credit-ratings': {\r\n    entityType: 'credit-ratings',\r\n    prefix: ENTITY_PREFIXES['credit-ratings'], // 'XHTD'\r\n    systemIdPrefix: 'CREDIT',\r\n    digitCount: 6,\r\n    displayName: 'X·∫øp h·∫°ng t√≠n d·ª•ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  'lifecycle-stages': {\r\n    entityType: 'lifecycle-stages',\r\n    prefix: ENTITY_PREFIXES['lifecycle-stages'], // 'GDL'\r\n    systemIdPrefix: 'LIFECYCLE',\r\n    digitCount: 6,\r\n    displayName: 'Giai ƒëo·∫°n v√≤ng ƒë·ªùi kh√°ch h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'sla-settings': {\r\n    entityType: 'sla-settings',\r\n    prefix: ENTITY_PREFIXES['sla-settings'], // 'SLA'\r\n    systemIdPrefix: 'SLACFG',\r\n    digitCount: 6,\r\n    displayName: 'C√†i ƒë·∫∑t SLA kh√°ch h√†ng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // Employee Settings\r\n  'employee-types': {\r\n    entityType: 'employee-types',\r\n    prefix: ENTITY_PREFIXES['employee-types'], // 'LNV'\r\n    systemIdPrefix: 'EMPTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i nh√¢n vi√™n',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'employee-statuses': {\r\n    entityType: 'employee-statuses',\r\n    prefix: ENTITY_PREFIXES['employee-statuses'], // 'TTNV'\r\n    systemIdPrefix: 'EMPSTATUS',\r\n    digitCount: 6,\r\n    displayName: 'Tr·∫°ng th√°i nh√¢n vi√™n',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'contract-types': {\r\n    entityType: 'contract-types',\r\n    prefix: ENTITY_PREFIXES['contract-types'], // 'LHD'\r\n    systemIdPrefix: 'CONTRACT',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i h·ª£p ƒë·ªìng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'work-shifts': {\r\n    entityType: 'work-shifts',\r\n    prefix: ENTITY_PREFIXES['work-shifts'], // 'CA'\r\n    systemIdPrefix: 'WSHIFT',\r\n    digitCount: 6,\r\n    displayName: 'Ca l√†m vi·ªác',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'D√πng cho c√†i ƒë·∫∑t ca l√†m vi·ªác & Dual ID trong attendance',\r\n  },\r\n  \r\n  'leave-types': {\r\n    entityType: 'leave-types',\r\n    prefix: ENTITY_PREFIXES['leave-types'], // 'LP'\r\n    systemIdPrefix: 'LEAVETYPE',\r\n    digitCount: 6,\r\n    displayName: 'Lo·∫°i ngh·ªâ ph√©p',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Qu·∫£n l√Ω danh m·ª•c ph√©p nƒÉm/ph√©p ƒë·∫∑c bi·ªát',\r\n  },\r\n  \r\n  'salary-components': {\r\n    entityType: 'salary-components',\r\n    prefix: ENTITY_PREFIXES['salary-components'], // 'SC'\r\n    systemIdPrefix: 'SALCOMP',\r\n    digitCount: 6,\r\n    displayName: 'Th√†nh ph·∫ßn l∆∞∆°ng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'D√πng cho c·∫•u h√¨nh payroll engine',\r\n  },\r\n  \r\n  // ========================================\r\n  // üîê SYSTEM & AUTH\r\n  // ========================================\r\n  \r\n  'settings': {\r\n    entityType: 'settings',\r\n    prefix: ENTITY_PREFIXES['settings'], // 'CFG'\r\n    systemIdPrefix: 'CONFIG',\r\n    digitCount: 6,\r\n    displayName: 'C·∫•u h√¨nh',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'users': {\r\n    entityType: 'users',\r\n    prefix: ENTITY_PREFIXES['users'], // 'USER'\r\n    systemIdPrefix: 'USER',\r\n    digitCount: 6,\r\n    displayName: 'Ng∆∞·ªùi d√πng',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // üåê PKGX INTEGRATION (phukiengiaxuong.com.vn)\r\n  // ========================================\r\n  \r\n  'pkgx-categories': {\r\n    entityType: 'pkgx-categories',\r\n    prefix: ENTITY_PREFIXES['pkgx-categories'], // 'PKGXCAT'\r\n    systemIdPrefix: 'PKGXCAT',\r\n    digitCount: 6,\r\n    displayName: 'Danh m·ª•c PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Danh m·ª•c t·ª´ website phukiengiaxuong.com.vn',\r\n  },\r\n  \r\n  'pkgx-brands': {\r\n    entityType: 'pkgx-brands',\r\n    prefix: ENTITY_PREFIXES['pkgx-brands'], // 'PKGXBRAND'\r\n    systemIdPrefix: 'PKGXBRAND',\r\n    digitCount: 6,\r\n    displayName: 'Th∆∞∆°ng hi·ªáu PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Th∆∞∆°ng hi·ªáu t·ª´ website phukiengiaxuong.com.vn',\r\n  },\r\n  \r\n  'pkgx-category-mappings': {\r\n    entityType: 'pkgx-category-mappings',\r\n    prefix: ENTITY_PREFIXES['pkgx-category-mappings'], // 'CATMAP'\r\n    systemIdPrefix: 'CATMAP',\r\n    digitCount: 6,\r\n    displayName: 'Mapping danh m·ª•c PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Mapping danh m·ª•c HRM ‚Üî PKGX',\r\n  },\r\n  \r\n  'pkgx-brand-mappings': {\r\n    entityType: 'pkgx-brand-mappings',\r\n    prefix: ENTITY_PREFIXES['pkgx-brand-mappings'], // 'BRANDMAP'\r\n    systemIdPrefix: 'BRANDMAP',\r\n    digitCount: 6,\r\n    displayName: 'Mapping th∆∞∆°ng hi·ªáu PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Mapping th∆∞∆°ng hi·ªáu HRM ‚Üî PKGX',\r\n  },\r\n  \r\n  'pkgx-price-mappings': {\r\n    entityType: 'pkgx-price-mappings',\r\n    prefix: ENTITY_PREFIXES['pkgx-price-mappings'], // 'PRICEMAP'\r\n    systemIdPrefix: 'PRICEMAP',\r\n    digitCount: 6,\r\n    displayName: 'Mapping gi√° PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Mapping b·∫£ng gi√° HRM ‚Üí PKGX price fields',\r\n  },\r\n  \r\n  'pkgx-sync-logs': {\r\n    entityType: 'pkgx-sync-logs',\r\n    prefix: ENTITY_PREFIXES['pkgx-sync-logs'], // 'PKGXLOG'\r\n    systemIdPrefix: 'PKGXLOG',\r\n    digitCount: 6,\r\n    displayName: 'Log ƒë·ªìng b·ªô PKGX',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n    notes: 'L∆∞u l·ªãch s·ª≠ ƒë·ªìng b·ªô v·ªõi PKGX',\r\n  },\r\n};\r\n\r\n// ========================================\r\n// üõ†Ô∏è HELPER FUNCTIONS\r\n// ========================================\r\n\r\n/**\r\n * Get configuration for an entity type\r\n */\r\nexport function getEntityConfig(entityType: EntityType): EntityIDConfig {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`No configuration found for entity type: ${entityType}`);\r\n  }\r\n  return config;\r\n}\r\n\r\n/**\r\n * Get all entity types in a category\r\n */\r\nexport function getEntitiesByCategory(category: EntityIDConfig['category']): EntityType[] {\r\n  return Object.values(ID_CONFIG)\r\n    .filter(config => config.category === category)\r\n    .map(config => config.entityType);\r\n}\r\n\r\n/**\r\n * Get entities grouped by category\r\n */\r\nexport function getEntityCategories(): Record<string, EntityType[]> {\r\n  const categories: Record<string, EntityType[]> = {\r\n    'hr': [],\r\n    'finance': [],\r\n    'inventory': [],\r\n    'sales': [],\r\n    'purchasing': [],\r\n    'service': [],\r\n    'settings': [],\r\n    'system': [],\r\n  };\r\n  \r\n  Object.values(ID_CONFIG).forEach(config => {\r\n    categories[config.category].push(config.entityType);\r\n  });\r\n  \r\n  return categories;\r\n}\r\n\r\n/**\r\n * Validate ID format for an entity\r\n * Returns validation result with detailed error message\r\n */\r\nexport function validateIdFormat(\r\n  id: string,\r\n  entityType: EntityType\r\n): { valid: boolean; error?: string } {\r\n  const config = getEntityConfig(entityType);\r\n  \r\n  // Check prefix\r\n  if (!id.startsWith(config.prefix)) {\r\n    return { \r\n      valid: false, \r\n      error: `Invalid prefix. Expected \"${config.prefix}\", got \"${id.slice(0, config.prefix.length)}\"` \r\n    };\r\n  }\r\n  \r\n  // Check digit count\r\n  const numberPart = id.substring(config.prefix.length);\r\n  if (numberPart.length !== config.digitCount) {\r\n    const expectedLength = config.prefix.length + config.digitCount;\r\n    return { \r\n      valid: false, \r\n      error: `Invalid length. Expected ${expectedLength} characters, got ${id.length}` \r\n    };\r\n  }\r\n  \r\n  // Check if numeric\r\n  if (!/^\\d+$/.test(numberPart)) {\r\n    return { \r\n      valid: false, \r\n      error: 'Numeric part must contain only digits' \r\n    };\r\n  }\r\n  \r\n  // Custom pattern validation\r\n  if (config.validation?.pattern && !config.validation.pattern.test(id)) {\r\n    return { \r\n      valid: false, \r\n      error: 'ID does not match required pattern' \r\n    };\r\n  }\r\n  \r\n  return { valid: true };\r\n}\r\n\r\n/**\r\n * Check if entity allows custom ID input\r\n */\r\nexport function allowsCustomId(entityType: EntityType): boolean {\r\n  return getEntityConfig(entityType).validation?.allowCustomId ?? false;\r\n}\r\n\r\n/**\r\n * Get entities that use store factory\r\n */\r\nexport function getStoreFactoryEntities(): EntityType[] {\r\n  return Object.values(ID_CONFIG)\r\n    .filter(config => config.usesStoreFactory === true)\r\n    .map(config => config.entityType);\r\n}\r\n\r\n/**\r\n * Get display label for category\r\n */\r\nexport function getCategoryLabel(category: EntityIDConfig['category']): string {\r\n  const labels: Record<EntityIDConfig['category'], string> = {\r\n    'hr': 'Nh√¢n s·ª± & T·ªï ch·ª©c',\r\n    'finance': 'T√†i ch√≠nh',\r\n    'inventory': 'Kho h√†ng',\r\n    'sales': 'B√°n h√†ng',\r\n    'purchasing': 'Mua h√†ng',\r\n    'service': 'D·ªãch v·ª• kh√°ch h√†ng',\r\n    'settings': 'C√†i ƒë·∫∑t',\r\n    'system': 'H·ªá th·ªëng',\r\n  };\r\n  return labels[category];\r\n}\r\n\r\n/**\r\n * Search entities by name or prefix\r\n */\r\nexport function searchEntities(query: string): EntityIDConfig[] {\r\n  const lowerQuery = query.toLowerCase();\r\n  return Object.values(ID_CONFIG).filter(config => \r\n    config.displayName.toLowerCase().includes(lowerQuery) ||\r\n    config.prefix.toLowerCase().includes(lowerQuery) ||\r\n    config.entityType.includes(lowerQuery)\r\n  );\r\n}\r\n\r\n/**\r\n * Get total entity count\r\n */\r\nexport function getTotalEntityCount(): number {\r\n  return Object.keys(ID_CONFIG).length;\r\n}\r\n\r\n/**\r\n * Export configuration for backup/import\r\n */\r\nexport function exportConfig(): string {\r\n  return JSON.stringify(ID_CONFIG, null, 2);\r\n}\r\n\r\n// ========================================\r\n// üìä STATISTICS & ANALYTICS\r\n// ========================================\r\n\r\nexport interface IDSystemStats {\r\n  totalEntities: number;\r\n  byCategory: Record<string, number>;\r\n  storeFactoryEnabled: number;\r\n  customIdAllowed: number;\r\n  averageDigitCount: number;\r\n}\r\n\r\n/**\r\n * Get ID system statistics\r\n */\r\nexport function getIDSystemStats(): IDSystemStats {\r\n  const configs = Object.values(ID_CONFIG);\r\n  \r\n  const byCategory: Record<string, number> = {};\r\n  let storeFactoryEnabled = 0;\r\n  let customIdAllowed = 0;\r\n  let totalDigits = 0;\r\n  \r\n  configs.forEach(config => {\r\n    // Count by category\r\n    byCategory[config.category] = (byCategory[config.category] || 0) + 1;\r\n    \r\n    // Count features\r\n    if (config.usesStoreFactory) storeFactoryEnabled++;\r\n    if (config.validation?.allowCustomId) customIdAllowed++;\r\n    totalDigits += config.digitCount;\r\n  });\r\n  \r\n  return {\r\n    totalEntities: configs.length,\r\n    byCategory,\r\n    storeFactoryEnabled,\r\n    customIdAllowed,\r\n    averageDigitCount: Math.round(totalDigits / configs.length * 10) / 10,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;CAeC,GAED;;AA0BO,SAAS,eAAe,EAAU;IACvC,OAAO;AACT;AAKO,SAAS,iBAAiB,EAAU;IACzC,OAAO;AACT;AAaO,SAAS,kBACd,UAAsB,EACtB,QAA+D;IAE/D,MAAM,SAAS,SAAS,CAAC,WAAW;IACpC,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAE,YAAY;IACtD;IAEA,MAAM,yBAAyB,KAAK,GAAG,CAAC,GAAG,UAAU,YAAY;IACjE,MAAM,uBAAuB,KAAK,GAAG,CAAC,GAAG,UAAU,UAAU;IAC7D,MAAM,sBAAsB,yBAAyB;IACrD,MAAM,oBAAoB,uBAAuB;IACjD,MAAM,iBAAiB,OAAO,qBAAqB,QAAQ,CAAC,OAAO,UAAU,EAAE;IAC/E,MAAM,eAAe,OAAO,mBAAmB,QAAQ,CAAC,OAAO,UAAU,EAAE;IAE3E,OAAO;QACL;QACA;QACA,gBAAgB,iBAAiB,GAAG,OAAO,MAAM,GAAG,gBAAgB;QACpE,cAAc,eAAe,GAAG,OAAO,cAAc,GAAG,cAAc;QACtE,YAAY,OAAO,UAAU;QAC7B,QAAQ,OAAO,MAAM;QACrB,gBAAgB,OAAO,cAAc;QACrC,aAAa,OAAO,WAAW;IACjC;AACF;AA0DO,MAAM,YAAgD;IAC3D,2CAA2C;IAC3C,iCAAiC;IACjC,2CAA2C;IAE3C,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,eAAe;QACb,YAAY;QACZ,QAAQ,yIAAe,CAAC,cAAc;QACtC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,cAAc;QACZ,YAAY;QACZ,QAAQ,yIAAe,CAAC,aAAa;QACrC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,cAAc;QACZ,YAAY;QACZ,QAAQ,yIAAe,CAAC,aAAa;QACrC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,OAAO;IACT;IAEA,WAAW;QACT,YAAY;QACZ,QAAQ,yIAAe,CAAC,UAAU;QAClC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,qBAAqB;QACnB,YAAY;QACZ,QAAQ,yIAAe,CAAC,oBAAoB;QAC5C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IACA,qBAAqB;QACnB,YAAY;QACZ,QAAQ,yIAAe,CAAC,oBAAoB;QAC5C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,UAAU;QACR,YAAY;QACZ,QAAQ,yIAAe,CAAC,SAAS;QACjC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,uCAAuC;IACvC,2CAA2C;IAE3C,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,qBAAqB;QACnB,YAAY;QACZ,QAAQ,yIAAe,CAAC,oBAAoB;QAC5C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,2CAA2C;IAC3C,2CAA2C;IAE3C,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,UAAU;QACR,YAAY;QACZ,QAAQ,yIAAe,CAAC,SAAS;QACjC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,cAAc;QACZ,YAAY;QACZ,QAAQ,yIAAe,CAAC,aAAa;QACrC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,SAAS;QACP,YAAY;QACZ,QAAQ,yIAAe,CAAC,QAAQ;QAChC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,sBAAsB;QACpB,YAAY;QACZ,QAAQ,yIAAe,CAAC,qBAAqB;QAC7C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,oBAAoB;QAClB,YAAY;QACZ,QAAQ,yIAAe,CAAC,mBAAmB;QAC3C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,sBAAsB;IACtB,2CAA2C;IAE3C,UAAU;QACR,YAAY;QACZ,QAAQ,yIAAe,CAAC,SAAS;QACjC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,2BAA2B;IAC3B,2CAA2C;IAE3C,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,oBAAoB;QAClB,YAAY;QACZ,QAAQ,yIAAe,CAAC,mBAAmB;QAC3C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,yBAAyB;IACzB,2CAA2C;IAE3C,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,mBAAmB;IACnB,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,oBAAoB;QAClB,YAAY;QACZ,QAAQ,yIAAe,CAAC,mBAAmB;QAC3C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,SAAS;QACP,YAAY;QACZ,QAAQ,yIAAe,CAAC,QAAQ;QAChC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,8BAA8B;IAC9B,2CAA2C;IAE3C,OAAO;QACL,YAAY;QACZ,QAAQ,yIAAe,CAAC,MAAM;QAC9B,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,6BAA6B;IAC7B,2CAA2C;IAE3C,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,YAAY;YAAE,eAAe;QAAK;IACpC;IAEA,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,cAAc;QACZ,YAAY;QACZ,QAAQ,yIAAe,CAAC,aAAa;QACrC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,2CAA2C;IAC3C,2BAA2B;IAC3B,2CAA2C;IAE3C,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IACA,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IACA,SAAS;QACP,YAAY;QACZ,QAAQ,yIAAe,CAAC,QAAQ;QAChC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,QAAQ;QACN,YAAY;QACZ,QAAQ,yIAAe,CAAC,OAAO;QAC/B,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,aAAa;QACX,YAAY;QACZ,QAAQ,yIAAe,CAAC,YAAY;QACpC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,oBAAoB;IACpB,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,oBAAoB;QAClB,YAAY;QACZ,QAAQ,yIAAe,CAAC,mBAAmB;QAC3C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,iBAAiB;QACf,YAAY;QACZ,QAAQ,yIAAe,CAAC,gBAAgB;QACxC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IACA,oBAAoB;QAClB,YAAY;QACZ,QAAQ,yIAAe,CAAC,mBAAmB;QAC3C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IACA,gBAAgB;QACd,YAAY;QACZ,QAAQ,yIAAe,CAAC,eAAe;QACvC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,YAAY;YAAE,eAAe;QAAK;QAClC,kBAAkB;IACpB;IAEA,oBAAoB;IACpB,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,qBAAqB;QACnB,YAAY;QACZ,QAAQ,yIAAe,CAAC,oBAAoB;QAC5C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,eAAe;QACb,YAAY;QACZ,QAAQ,yIAAe,CAAC,cAAc;QACtC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,eAAe;QACb,YAAY;QACZ,QAAQ,yIAAe,CAAC,cAAc;QACtC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,qBAAqB;QACnB,YAAY;QACZ,QAAQ,yIAAe,CAAC,oBAAoB;QAC5C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,2CAA2C;IAC3C,mBAAmB;IACnB,2CAA2C;IAE3C,YAAY;QACV,YAAY;QACZ,QAAQ,yIAAe,CAAC,WAAW;QACnC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,SAAS;QACP,YAAY;QACZ,QAAQ,yIAAe,CAAC,QAAQ;QAChC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;IACpB;IAEA,2CAA2C;IAC3C,+CAA+C;IAC/C,2CAA2C;IAE3C,mBAAmB;QACjB,YAAY;QACZ,QAAQ,yIAAe,CAAC,kBAAkB;QAC1C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,eAAe;QACb,YAAY;QACZ,QAAQ,yIAAe,CAAC,cAAc;QACtC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,0BAA0B;QACxB,YAAY;QACZ,QAAQ,yIAAe,CAAC,yBAAyB;QACjD,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,uBAAuB;QACrB,YAAY;QACZ,QAAQ,yIAAe,CAAC,sBAAsB;QAC9C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,uBAAuB;QACrB,YAAY;QACZ,QAAQ,yIAAe,CAAC,sBAAsB;QAC9C,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;IAEA,kBAAkB;QAChB,YAAY;QACZ,QAAQ,yIAAe,CAAC,iBAAiB;QACzC,gBAAgB;QAChB,YAAY;QACZ,aAAa;QACb,UAAU;QACV,kBAAkB;QAClB,OAAO;IACT;AACF;AASO,SAAS,gBAAgB,UAAsB;IACpD,MAAM,SAAS,SAAS,CAAC,WAAW;IACpC,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM,CAAC,wCAAwC,EAAE,YAAY;IACzE;IACA,OAAO;AACT;AAKO,SAAS,sBAAsB,QAAoC;IACxE,OAAO,OAAO,MAAM,CAAC,WAClB,MAAM,CAAC,CAAA,SAAU,OAAO,QAAQ,KAAK,UACrC,GAAG,CAAC,CAAA,SAAU,OAAO,UAAU;AACpC;AAKO,SAAS;IACd,MAAM,aAA2C;QAC/C,MAAM,EAAE;QACR,WAAW,EAAE;QACb,aAAa,EAAE;QACf,SAAS,EAAE;QACX,cAAc,EAAE;QAChB,WAAW,EAAE;QACb,YAAY,EAAE;QACd,UAAU,EAAE;IACd;IAEA,OAAO,MAAM,CAAC,WAAW,OAAO,CAAC,CAAA;QAC/B,UAAU,CAAC,OAAO,QAAQ,CAAC,CAAC,IAAI,CAAC,OAAO,UAAU;IACpD;IAEA,OAAO;AACT;AAMO,SAAS,iBACd,EAAU,EACV,UAAsB;IAEtB,MAAM,SAAS,gBAAgB;IAE/B,eAAe;IACf,IAAI,CAAC,GAAG,UAAU,CAAC,OAAO,MAAM,GAAG;QACjC,OAAO;YACL,OAAO;YACP,OAAO,CAAC,0BAA0B,EAAE,OAAO,MAAM,CAAC,QAAQ,EAAE,GAAG,KAAK,CAAC,GAAG,OAAO,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;QAClG;IACF;IAEA,oBAAoB;IACpB,MAAM,aAAa,GAAG,SAAS,CAAC,OAAO,MAAM,CAAC,MAAM;IACpD,IAAI,WAAW,MAAM,KAAK,OAAO,UAAU,EAAE;QAC3C,MAAM,iBAAiB,OAAO,MAAM,CAAC,MAAM,GAAG,OAAO,UAAU;QAC/D,OAAO;YACL,OAAO;YACP,OAAO,CAAC,yBAAyB,EAAE,eAAe,iBAAiB,EAAE,GAAG,MAAM,EAAE;QAClF;IACF;IAEA,mBAAmB;IACnB,IAAI,CAAC,QAAQ,IAAI,CAAC,aAAa;QAC7B,OAAO;YACL,OAAO;YACP,OAAO;QACT;IACF;IAEA,4BAA4B;IAC5B,IAAI,OAAO,UAAU,EAAE,WAAW,CAAC,OAAO,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK;QACrE,OAAO;YACL,OAAO;YACP,OAAO;QACT;IACF;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,eAAe,UAAsB;IACnD,OAAO,gBAAgB,YAAY,UAAU,EAAE,iBAAiB;AAClE;AAKO,SAAS;IACd,OAAO,OAAO,MAAM,CAAC,WAClB,MAAM,CAAC,CAAA,SAAU,OAAO,gBAAgB,KAAK,MAC7C,GAAG,CAAC,CAAA,SAAU,OAAO,UAAU;AACpC;AAKO,SAAS,iBAAiB,QAAoC;IACnE,MAAM,SAAqD;QACzD,MAAM;QACN,WAAW;QACX,aAAa;QACb,SAAS;QACT,cAAc;QACd,WAAW;QACX,YAAY;QACZ,UAAU;IACZ;IACA,OAAO,MAAM,CAAC,SAAS;AACzB;AAKO,SAAS,eAAe,KAAa;IAC1C,MAAM,aAAa,MAAM,WAAW;IACpC,OAAO,OAAO,MAAM,CAAC,WAAW,MAAM,CAAC,CAAA,SACrC,OAAO,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,eAC1C,OAAO,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,eACrC,OAAO,UAAU,CAAC,QAAQ,CAAC;AAE/B;AAKO,SAAS;IACd,OAAO,OAAO,IAAI,CAAC,WAAW,MAAM;AACtC;AAKO,SAAS;IACd,OAAO,KAAK,SAAS,CAAC,WAAW,MAAM;AACzC;AAiBO,SAAS;IACd,MAAM,UAAU,OAAO,MAAM,CAAC;IAE9B,MAAM,aAAqC,CAAC;IAC5C,IAAI,sBAAsB;IAC1B,IAAI,kBAAkB;IACtB,IAAI,cAAc;IAElB,QAAQ,OAAO,CAAC,CAAA;QACd,oBAAoB;QACpB,UAAU,CAAC,OAAO,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI;QAEnE,iBAAiB;QACjB,IAAI,OAAO,gBAAgB,EAAE;QAC7B,IAAI,OAAO,UAAU,EAAE,eAAe;QACtC,eAAe,OAAO,UAAU;IAClC;IAEA,OAAO;QACL,eAAe,QAAQ,MAAM;QAC7B;QACA;QACA;QACA,mBAAmB,KAAK,KAAK,CAAC,cAAc,QAAQ,MAAM,GAAG,MAAM;IACrE;AACF"}},
    {"offset": {"line": 1411, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/breadcrumb-generator.ts"],"sourcesContent":["/**\r\n * üçû BREADCRUMB AUTO-GENERATION SYSTEM\r\n * \r\n * Automatically generates breadcrumbs from route metadata + entity data\r\n * \r\n * Features:\r\n * - Auto-lookup entity name from systemId\r\n * - Falls back to route metadata if entity not found\r\n * - Type-safe with SystemId branded types\r\n * - Supports all entity types from id-config.ts\r\n * \r\n * @example\r\n * ```typescript\r\n * // Route: /receipts/VOUCHER00000123\r\n * const crumbs = generateBreadcrumb(location.pathname);\r\n * // Result: ['Phi·∫øu thu/chi', 'PT000051']\r\n * ```\r\n * \r\n * @version 1.0.0\r\n * @date 2025-11-11\r\n */\r\n\r\nimport { type EntityType, getEntityConfig } from './id-config';\r\nimport { type SystemId } from './id-config';\r\n\r\n// Store registry - lazy loaded to avoid circular dependencies\r\ntype StoreGetter<T> = () => { data: T[] };\r\n\r\ninterface StoreRegistry {\r\n  [key: string]: StoreGetter<any>;\r\n}\r\n\r\nlet storeRegistry: StoreRegistry = {};\r\n\r\n/**\r\n * Register a store for breadcrumb lookup\r\n * Call this in store files to enable auto breadcrumb\r\n */\r\nexport function registerBreadcrumbStore<T extends { systemId: string; id?: string; name?: string }>(\r\n  entityType: EntityType,\r\n  getStore: StoreGetter<T>\r\n) {\r\n  storeRegistry[entityType] = getStore;\r\n}\r\n\r\n/**\r\n * Find entity by systemId and return display name\r\n */\r\nfunction findEntityDisplayName(entityType: EntityType, systemId: string): string | null {\r\n  const getStore = storeRegistry[entityType];\r\n  if (!getStore) return null;\r\n\r\n  try {\r\n    const store = getStore();\r\n    const item = store.data.find((d: any) => d.systemId === systemId);\r\n    \r\n    if (!item) return null;\r\n\r\n    // Priority: name > title > id (business ID) > systemId\r\n    return item.name || item.title || item.id || systemId;\r\n  } catch (error) {\r\n    console.warn(`[Breadcrumb] Failed to lookup ${entityType}:`, error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Parse route path and extract entity info\r\n */\r\ninterface RouteEntityInfo {\r\n  entityType: EntityType | null;\r\n  systemId: string | null;\r\n  displayName: string | null;\r\n}\r\n\r\nfunction parseRouteEntity(pathname: string): RouteEntityInfo {\r\n  // Pattern: /{entity-type}/{systemId}\r\n  const match = pathname.match(/^\\/([^/]+)\\/([^/]+)$/);\r\n  \r\n  if (!match) {\r\n    return { entityType: null, systemId: null, displayName: null };\r\n  }\r\n\r\n  const [, routeType, id] = match;\r\n  \r\n  // Map route type to entity type\r\n  const routeToEntityMap: Record<string, EntityType> = {\r\n    'receipts': 'voucher-receipt',\r\n    'payments': 'voucher-payment',\r\n    'employees': 'employees',\r\n    'customers': 'customers',\r\n    'products': 'products',\r\n    'orders': 'orders',\r\n    'suppliers': 'suppliers',\r\n    'complaints': 'complaints',\r\n    'warranty': 'warranty',\r\n    'purchase-orders': 'purchase-orders',\r\n    'sales-returns': 'sales-returns',\r\n    'purchase-returns': 'purchase-returns',\r\n    'inventory-checks': 'inventory-checks',\r\n  };\r\n\r\n  const entityType = routeToEntityMap[routeType] || null;\r\n  \r\n  if (!entityType) {\r\n    return { entityType: null, systemId: id, displayName: null };\r\n  }\r\n\r\n  // Lookup display name\r\n  const displayName = findEntityDisplayName(entityType, id);\r\n  \r\n  return { entityType, systemId: id, displayName };\r\n}\r\n\r\n/**\r\n * Generate breadcrumb trail from pathname\r\n * \r\n * @param pathname - Current route pathname\r\n * @param routeMeta - Optional route metadata with static breadcrumb\r\n * @returns Array of breadcrumb labels\r\n */\r\nexport function generateBreadcrumb(\r\n  pathname: string,\r\n  routeMeta?: { breadcrumb?: string[] }\r\n): string[] {\r\n  // If route has static breadcrumb metadata, use it as base\r\n  const baseCrumbs = routeMeta?.breadcrumb || [];\r\n  \r\n  // Try to enhance with entity data\r\n  const entityInfo = parseRouteEntity(pathname);\r\n  \r\n  if (entityInfo.displayName) {\r\n    // Replace last breadcrumb with entity display name\r\n    return [...baseCrumbs.slice(0, -1), entityInfo.displayName];\r\n  }\r\n  \r\n  // Fallback to route metadata\r\n  return baseCrumbs;\r\n}\r\n\r\n/**\r\n * Generate breadcrumb for detail page\r\n * \r\n * @example\r\n * ```typescript\r\n * // In voucher detail page (phi·∫øu chi)\r\n * const crumbs = generateDetailBreadcrumb('voucher-payment', voucher.systemId, 'Phi·∫øu thu/chi');\r\n * // Result: ['Phi·∫øu thu/chi', 'PT000051']\r\n * ```\r\n */\r\nexport function generateDetailBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string,\r\n  listPageLabel: string\r\n): string[] {\r\n  const displayName = findEntityDisplayName(entityType, systemId);\r\n  return [listPageLabel, displayName || systemId];\r\n}\r\n\r\n/**\r\n * Generate breadcrumb for form page (create/edit)\r\n * \r\n * @example\r\n * ```typescript\r\n * const crumbs = generateFormBreadcrumb('employees', employeeSystemId, 'Nh√¢n vi√™n');\r\n * // Create: ['Nh√¢n vi√™n', 'Th√™m m·ªõi']\r\n * // Edit: ['Nh√¢n vi√™n', 'NV000001']\r\n * ```\r\n */\r\nexport function generateFormBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string | null | undefined,\r\n  listPageLabel: string\r\n): string[] {\r\n  if (!systemId) {\r\n    return [listPageLabel, 'Th√™m m·ªõi'];\r\n  }\r\n  \r\n  const displayName = findEntityDisplayName(entityType, systemId);\r\n  return [listPageLabel, displayName || 'Ch·ªânh s·ª≠a'];\r\n}\r\n\r\n/**\r\n * Hook for breadcrumb in React components\r\n * \r\n * @example\r\n * ```typescript\r\n * function EmployeeDetailPage() {\r\n *   const { systemId } = useParams();\r\n *   const crumbs = useBreadcrumb('employees', systemId, 'Nh√¢n vi√™n');\r\n *   usePageHeader({ breadcrumb: crumbs });\r\n * }\r\n * ```\r\n */\r\nexport function useBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string | null | undefined,\r\n  listPageLabel: string\r\n): string[] {\r\n  if (!systemId) {\r\n    return [listPageLabel, 'Th√™m m·ªõi'];\r\n  }\r\n  \r\n  return generateDetailBreadcrumb(entityType, systemId, listPageLabel);\r\n}\r\n\r\n/**\r\n * Get entity config for breadcrumb display\r\n */\r\nexport function getEntityDisplayInfo(entityType: EntityType) {\r\n  try {\r\n    const config = getEntityConfig(entityType);\r\n    return {\r\n      displayName: config.displayName,\r\n      prefix: config.prefix,\r\n      category: config.category,\r\n    };\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Clear store registry (for testing)\r\n */\r\nexport function clearBreadcrumbStores() {\r\n  storeRegistry = {};\r\n}\r\n\r\n/**\r\n * Get all registered stores (for debugging)\r\n */\r\nexport function getRegisteredStores(): string[] {\r\n  return Object.keys(storeRegistry);\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;CAoBC,GAED;;AAUA,IAAI,gBAA+B,CAAC;AAM7B,SAAS,wBACd,UAAsB,EACtB,QAAwB;IAExB,aAAa,CAAC,WAAW,GAAG;AAC9B;AAEA;;CAEC,GACD,SAAS,sBAAsB,UAAsB,EAAE,QAAgB;IACrE,MAAM,WAAW,aAAa,CAAC,WAAW;IAC1C,IAAI,CAAC,UAAU,OAAO;IAEtB,IAAI;QACF,MAAM,QAAQ;QACd,MAAM,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,QAAQ,KAAK;QAExD,IAAI,CAAC,MAAM,OAAO;QAElB,uDAAuD;QACvD,OAAO,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,KAAK,EAAE,IAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,CAAC,8BAA8B,EAAE,WAAW,CAAC,CAAC,EAAE;QAC7D,OAAO;IACT;AACF;AAWA,SAAS,iBAAiB,QAAgB;IACxC,qCAAqC;IACrC,MAAM,QAAQ,SAAS,KAAK,CAAC;IAE7B,IAAI,CAAC,OAAO;QACV,OAAO;YAAE,YAAY;YAAM,UAAU;YAAM,aAAa;QAAK;IAC/D;IAEA,MAAM,GAAG,WAAW,GAAG,GAAG;IAE1B,gCAAgC;IAChC,MAAM,mBAA+C;QACnD,YAAY;QACZ,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,UAAU;QACV,aAAa;QACb,cAAc;QACd,YAAY;QACZ,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,oBAAoB;IACtB;IAEA,MAAM,aAAa,gBAAgB,CAAC,UAAU,IAAI;IAElD,IAAI,CAAC,YAAY;QACf,OAAO;YAAE,YAAY;YAAM,UAAU;YAAI,aAAa;QAAK;IAC7D;IAEA,sBAAsB;IACtB,MAAM,cAAc,sBAAsB,YAAY;IAEtD,OAAO;QAAE;QAAY,UAAU;QAAI;IAAY;AACjD;AASO,SAAS,mBACd,QAAgB,EAChB,SAAqC;IAErC,0DAA0D;IAC1D,MAAM,aAAa,WAAW,cAAc,EAAE;IAE9C,kCAAkC;IAClC,MAAM,aAAa,iBAAiB;IAEpC,IAAI,WAAW,WAAW,EAAE;QAC1B,mDAAmD;QACnD,OAAO;eAAI,WAAW,KAAK,CAAC,GAAG,CAAC;YAAI,WAAW,WAAW;SAAC;IAC7D;IAEA,6BAA6B;IAC7B,OAAO;AACT;AAYO,SAAS,yBACd,UAAsB,EACtB,QAAgB,EAChB,aAAqB;IAErB,MAAM,cAAc,sBAAsB,YAAY;IACtD,OAAO;QAAC;QAAe,eAAe;KAAS;AACjD;AAYO,SAAS,uBACd,UAAsB,EACtB,QAAmC,EACnC,aAAqB;IAErB,IAAI,CAAC,UAAU;QACb,OAAO;YAAC;YAAe;SAAW;IACpC;IAEA,MAAM,cAAc,sBAAsB,YAAY;IACtD,OAAO;QAAC;QAAe,eAAe;KAAY;AACpD;AAcO,SAAS,cACd,UAAsB,EACtB,QAAmC,EACnC,aAAqB;IAErB,IAAI,CAAC,UAAU;QACb,OAAO;YAAC;YAAe;SAAW;IACpC;IAEA,OAAO,yBAAyB,YAAY,UAAU;AACxD;AAKO,SAAS,qBAAqB,UAAsB;IACzD,IAAI;QACF,MAAM,SAAS,IAAA,sIAAe,EAAC;QAC/B,OAAO;YACL,aAAa,OAAO,WAAW;YAC/B,QAAQ,OAAO,MAAM;YACrB,UAAU,OAAO,QAAQ;QAC3B;IACF,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,SAAS;IACd,gBAAgB,CAAC;AACnB;AAKO,SAAS;IACd,OAAO,OAAO,IAAI,CAAC;AACrB"}},
    {"offset": {"line": 1580, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/breadcrumb-system.ts"],"sourcesContent":["/**\r\n * Breadcrumb System\r\n * \r\n * Central exports for breadcrumb functionality.\r\n * Re-exports from breadcrumb-generator.ts with additional types.\r\n */\r\n\r\n// Re-export functions that still make sense\r\nexport {\r\n  generateDetailBreadcrumb,\r\n  generateFormBreadcrumb,\r\n  useBreadcrumb,\r\n  getEntityDisplayInfo,\r\n  registerBreadcrumbStore,\r\n  clearBreadcrumbStores,\r\n  getRegisteredStores,\r\n} from './breadcrumb-generator';\r\n\r\n/**\r\n * Breadcrumb Item Interface\r\n * Used for page header breadcrumb navigation\r\n */\r\nexport interface BreadcrumbItem {\r\n  /** Display label for the breadcrumb */\r\n  label: string;\r\n  /** Route href for navigation */\r\n  href: string;\r\n  /** Whether this is the current/active page */\r\n  isCurrent?: boolean;\r\n}\r\n\r\n/**\r\n * Generate breadcrumb items from pathname\r\n * \r\n * @param pathname - Current route pathname  \r\n * @param context - Optional context data for entity lookup\r\n * @returns Array of BreadcrumbItem\r\n */\r\nexport function generateBreadcrumb(\r\n  pathname: string,\r\n  context?: Record<string, any>\r\n): BreadcrumbItem[] {\r\n  const segments = pathname.split('/').filter(Boolean);\r\n  \r\n  if (segments.length === 0) {\r\n    return [{ label: 'Trang ch·ªß', href: '/', isCurrent: true }];\r\n  }\r\n\r\n  const breadcrumbs: BreadcrumbItem[] = [\r\n    { label: 'Trang ch·ªß', href: '/', isCurrent: false }\r\n  ];\r\n\r\n  let currentPath = '';\r\n  segments.forEach((segment, index) => {\r\n    currentPath += `/${segment}`;\r\n    const isLast = index === segments.length - 1;\r\n    \r\n    // Get display label for segment\r\n    const label = getSegmentLabel(segment, context, isLast);\r\n    \r\n    breadcrumbs.push({\r\n      label,\r\n      href: currentPath,\r\n      isCurrent: isLast\r\n    });\r\n  });\r\n\r\n  return breadcrumbs;\r\n}\r\n\r\n/**\r\n * Get display label for a route segment\r\n */\r\nfunction getSegmentLabel(segment: string, context?: Record<string, any>, isLast?: boolean): string {\r\n  // Check if context provides entity name\r\n  if (context?.name && isLast) {\r\n    return context.name;\r\n  }\r\n  if (context?.title && isLast) {\r\n    return context.title;\r\n  }\r\n  if (context?.id && isLast) {\r\n    return context.id;\r\n  }\r\n\r\n  // Route to label mapping\r\n  const routeLabelMap: Record<string, string> = {\r\n    // Core\r\n    'dashboard': 'T·ªïng quan',\r\n    'employees': 'Nh√¢n vi√™n',\r\n    'customers': 'Kh√°ch h√†ng',\r\n    'products': 'S·∫£n ph·∫©m',\r\n    'orders': 'ƒê∆°n h√†ng',\r\n    'suppliers': 'Nh√† cung c·∫•p',\r\n    'receipts': 'Phi·∫øu thu',\r\n    'payments': 'Phi·∫øu chi',\r\n    'cashbook': 'S·ªï qu·ªπ',\r\n    'purchase-orders': 'ƒê∆°n mua h√†ng',\r\n    'purchase-returns': 'Tr·∫£ h√†ng NCC',\r\n    'sales-returns': 'Tr·∫£ h√†ng',\r\n    'inventory-receipts': 'Nh·∫≠p kho',\r\n    'inventory-checks': 'Ki·ªÉm kho',\r\n    'stock-transfers': 'Chuy·ªÉn kho',\r\n    'stock-locations': 'V·ªã tr√≠ kho',\r\n    'stock-history': 'L·ªãch s·ª≠ kho',\r\n    'cost-adjustments': 'ƒêi·ªÅu ch·ªânh gi√° v·ªën',\r\n    \r\n    // Settings\r\n    'settings': 'C√†i ƒë·∫∑t',\r\n    'store-info': 'Th√¥ng tin c·ª≠a h√†ng',\r\n    'appearance': 'Giao di·ªán',\r\n    'taxes': 'Thu·∫ø',\r\n    'pricing': 'B·∫£ng gi√°',\r\n    'shipping': 'V·∫≠n chuy·ªÉn',\r\n    'inventory': 'Kho h√†ng',\r\n    'print-templates': 'M·∫´u in',\r\n    'employee-roles': 'Ph√¢n quy·ªÅn',\r\n    'workflow-templates': 'Quy tr√¨nh',\r\n    'id-counters': 'M√£ t·ª± ƒë·ªông',\r\n    'provinces': 'T·ªânh th√†nh',\r\n    'sales-config': 'C·∫•u h√¨nh b√°n h√†ng',\r\n    'system-logs': 'Nh·∫≠t k√Ω h·ªá th·ªëng',\r\n    'import-export-logs': 'Nh·∫≠t k√Ω nh·∫≠p/xu·∫•t',\r\n    \r\n    // Operations\r\n    'warranty': 'B·∫£o h√†nh',\r\n    'complaints': 'Khi·∫øu n·∫°i',\r\n    'tasks': 'C√¥ng vi·ªác',\r\n    'wiki': 'Wiki',\r\n    'shipments': 'V·∫≠n ƒë∆°n',\r\n    'packaging': 'ƒê√≥ng g√≥i',\r\n    'attendance': 'Ch·∫•m c√¥ng',\r\n    'leaves': 'Ngh·ªâ ph√©p',\r\n    'payroll': 'B·∫£ng l∆∞∆°ng',\r\n    \r\n    // Reports\r\n    'reports': 'B√°o c√°o',\r\n    \r\n    // Forms\r\n    'new': 'Th√™m m·ªõi',\r\n    'edit': 'Ch·ªânh s·ª≠a',\r\n    \r\n    // Categories\r\n    'categories': 'Danh m·ª•c',\r\n    'brands': 'Th∆∞∆°ng hi·ªáu',\r\n  };\r\n  \r\n  return routeLabelMap[segment] || segment;\r\n}\r\n\r\n/**\r\n * Generate page title from pathname and context\r\n * \r\n * @param pathname - Current route pathname\r\n * @param context - Optional context with entity data\r\n * @returns Object with title and optional subtitle\r\n */\r\nexport function generatePageTitle(\r\n  pathname: string,\r\n  context?: Record<string, any>\r\n): { title: string; subtitle?: string } {\r\n  const segments = pathname.split('/').filter(Boolean);\r\n  const lastSegment = segments[segments.length - 1];\r\n  const secondLastSegment = segments[segments.length - 2];\r\n  \r\n  // Check for entity display name in context\r\n  if (context) {\r\n    const displayName = context.name || context.title || context.id;\r\n    if (displayName) {\r\n      // Determine page type\r\n      if (lastSegment === 'edit') {\r\n        return { title: `Ch·ªânh s·ª≠a ${displayName}` };\r\n      }\r\n      if (lastSegment === 'new') {\r\n        const entityLabel = getSegmentLabel(secondLastSegment);\r\n        return { title: `Th√™m ${entityLabel} m·ªõi` };\r\n      }\r\n      // Detail page\r\n      return { title: displayName };\r\n    }\r\n  }\r\n  \r\n  // Default title from route\r\n  const title = getSegmentLabel(lastSegment, context);\r\n  return { title };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;;;CAKC,GAED,4CAA4C;AAC5C;;AA8BO,SAAS,mBACd,QAAgB,EAChB,OAA6B;IAE7B,MAAM,WAAW,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC;IAE5C,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,OAAO;YAAC;gBAAE,OAAO;gBAAa,MAAM;gBAAK,WAAW;YAAK;SAAE;IAC7D;IAEA,MAAM,cAAgC;QACpC;YAAE,OAAO;YAAa,MAAM;YAAK,WAAW;QAAM;KACnD;IAED,IAAI,cAAc;IAClB,SAAS,OAAO,CAAC,CAAC,SAAS;QACzB,eAAe,CAAC,CAAC,EAAE,SAAS;QAC5B,MAAM,SAAS,UAAU,SAAS,MAAM,GAAG;QAE3C,gCAAgC;QAChC,MAAM,QAAQ,gBAAgB,SAAS,SAAS;QAEhD,YAAY,IAAI,CAAC;YACf;YACA,MAAM;YACN,WAAW;QACb;IACF;IAEA,OAAO;AACT;AAEA;;CAEC,GACD,SAAS,gBAAgB,OAAe,EAAE,OAA6B,EAAE,MAAgB;IACvF,wCAAwC;IACxC,IAAI,SAAS,QAAQ,QAAQ;QAC3B,OAAO,QAAQ,IAAI;IACrB;IACA,IAAI,SAAS,SAAS,QAAQ;QAC5B,OAAO,QAAQ,KAAK;IACtB;IACA,IAAI,SAAS,MAAM,QAAQ;QACzB,OAAO,QAAQ,EAAE;IACnB;IAEA,yBAAyB;IACzB,MAAM,gBAAwC;QAC5C,OAAO;QACP,aAAa;QACb,aAAa;QACb,aAAa;QACb,YAAY;QACZ,UAAU;QACV,aAAa;QACb,YAAY;QACZ,YAAY;QACZ,YAAY;QACZ,mBAAmB;QACnB,oBAAoB;QACpB,iBAAiB;QACjB,sBAAsB;QACtB,oBAAoB;QACpB,mBAAmB;QACnB,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QAEpB,WAAW;QACX,YAAY;QACZ,cAAc;QACd,cAAc;QACd,SAAS;QACT,WAAW;QACX,YAAY;QACZ,aAAa;QACb,mBAAmB;QACnB,kBAAkB;QAClB,sBAAsB;QACtB,eAAe;QACf,aAAa;QACb,gBAAgB;QAChB,eAAe;QACf,sBAAsB;QAEtB,aAAa;QACb,YAAY;QACZ,cAAc;QACd,SAAS;QACT,QAAQ;QACR,aAAa;QACb,aAAa;QACb,cAAc;QACd,UAAU;QACV,WAAW;QAEX,UAAU;QACV,WAAW;QAEX,QAAQ;QACR,OAAO;QACP,QAAQ;QAER,aAAa;QACb,cAAc;QACd,UAAU;IACZ;IAEA,OAAO,aAAa,CAAC,QAAQ,IAAI;AACnC;AASO,SAAS,kBACd,QAAgB,EAChB,OAA6B;IAE7B,MAAM,WAAW,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC;IAC5C,MAAM,cAAc,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE;IACjD,MAAM,oBAAoB,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE;IAEvD,2CAA2C;IAC3C,IAAI,SAAS;QACX,MAAM,cAAc,QAAQ,IAAI,IAAI,QAAQ,KAAK,IAAI,QAAQ,EAAE;QAC/D,IAAI,aAAa;YACf,sBAAsB;YACtB,IAAI,gBAAgB,QAAQ;gBAC1B,OAAO;oBAAE,OAAO,CAAC,UAAU,EAAE,aAAa;gBAAC;YAC7C;YACA,IAAI,gBAAgB,OAAO;gBACzB,MAAM,cAAc,gBAAgB;gBACpC,OAAO;oBAAE,OAAO,CAAC,KAAK,EAAE,YAAY,IAAI,CAAC;gBAAC;YAC5C;YACA,cAAc;YACd,OAAO;gBAAE,OAAO;YAAY;QAC9B;IACF;IAEA,2BAA2B;IAC3B,MAAM,QAAQ,gBAAgB,aAAa;IAC3C,OAAO;QAAE;IAAM;AACjB"}},
    {"offset": {"line": 1733, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/contexts/page-header-context.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport type { BreadcrumbItem } from '../lib/breadcrumb-system';\r\nimport { generateBreadcrumb, generatePageTitle } from '../lib/breadcrumb-system';\r\n\r\n/**\r\n * Page Header State Interface\r\n * Defines the structure of page header data\r\n */\r\nexport interface PageHeaderDocLink {\r\n  href: string;\r\n  label?: string;\r\n}\r\n\r\nexport interface PageHeaderState {\r\n  title?: string | React.ReactNode | undefined;\r\n  subtitle?: string | undefined;\r\n  badge?: React.ReactNode | undefined;\r\n  showBackButton?: boolean | undefined;\r\n  backPath?: string | undefined;\r\n  onBack?: (() => void) | undefined;\r\n  actions?: React.ReactNode[] | React.ReactNode | undefined;\r\n  breadcrumb?: BreadcrumbItem[] | undefined;\r\n  context?: Record<string, any> | undefined; // For dynamic breadcrumb generation\r\n  docLink?: PageHeaderDocLink | undefined;\r\n}\r\n\r\n/**\r\n * Page Header Context\r\n */\r\ninterface PageHeaderContextValue {\r\n  pageHeader: PageHeaderState;\r\n  setPageHeader: (state: PageHeaderState) => void;\r\n  clearPageHeader: () => void;\r\n}\r\n\r\nconst PageHeaderStateContext = React.createContext<PageHeaderState | null>(null);\r\nconst PageHeaderDispatchContext = React.createContext<Omit<PageHeaderContextValue, 'pageHeader'> | null>(null);\r\n\r\n/**\r\n * Page Header Provider\r\n * Wrap your app with this provider to enable page header functionality\r\n */\r\nexport function PageHeaderProvider({ children }: { children: React.ReactNode }) {\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const [pageHeader, setPageHeaderState] = React.useState<PageHeaderState>({});\r\n\r\n  // Auto-clear on route change (optional - can be disabled)\r\n  React.useEffect(() => {\r\n    // Don't auto-clear, let pages set their own headers\r\n    // setPageHeaderState({});\r\n  }, [pathname]);\r\n\r\n  const setPageHeader = React.useCallback((state: PageHeaderState) => {\r\n    setPageHeaderState(prev => {\r\n      // Auto-generate breadcrumb if not provided\r\n      let breadcrumb = state.breadcrumb;\r\n      if (!breadcrumb) {\r\n        breadcrumb = generateBreadcrumb(pathname, state.context);\r\n      } else {\r\n        // ‚ú® Transform route metadata breadcrumb format\r\n        // Convert: ['Nh√¢n vi√™n', 'Chi ti·∫øt'] or [{ label: 'Nh√¢n vi√™n', href: '/employees' }, 'Chi ti·∫øt']\r\n        // To: [{ label: 'Nh√¢n vi√™n', href: '/employees', isCurrent: false }, { label: 'Chi ti·∫øt', href: pathname, isCurrent: true }]\r\n        breadcrumb = breadcrumb.map((item, index) => {\r\n          if (typeof item === 'string') {\r\n            return {\r\n              label: item,\r\n              href: pathname,\r\n              isCurrent: index === breadcrumb!.length - 1\r\n            };\r\n          }\r\n          return {\r\n            ...item,\r\n            isCurrent: index === breadcrumb!.length - 1\r\n          };\r\n        });\r\n      }\r\n\r\n      // Auto-generate title if not provided\r\n      let title = state.title;\r\n      if (!title) {\r\n        const pageTitle = generatePageTitle(pathname, state.context);\r\n        title = pageTitle.title;\r\n      }\r\n\r\n      // Auto back handler if not provided\r\n      let onBack = state.onBack;\r\n      if (!onBack && state.showBackButton !== false) {\r\n        onBack = () => {\r\n          if (state.backPath) {\r\n            router.push(state.backPath);\r\n          } else {\r\n            router.back();\r\n          }\r\n        };\r\n      }\r\n\r\n      // ‚úÖ KH√îNG spread prev ƒë·ªÉ tr√°nh gi·ªØ l·∫°i state c≈© (nh∆∞ badge)\r\n      return {\r\n        ...state,\r\n        breadcrumb,\r\n        title,\r\n        onBack,\r\n      };\r\n    });\r\n  }, [pathname, router]);\r\n\r\n  const clearPageHeader = React.useCallback(() => {\r\n    setPageHeaderState({});\r\n  }, []);\r\n\r\n  const dispatchValue = React.useMemo(\r\n    () => ({\r\n      setPageHeader,\r\n      clearPageHeader,\r\n    }),\r\n    [setPageHeader, clearPageHeader]\r\n  );\r\n\r\n  return (\r\n    <PageHeaderDispatchContext.Provider value={dispatchValue}>\r\n      <PageHeaderStateContext.Provider value={pageHeader}>\r\n        {children}\r\n      </PageHeaderStateContext.Provider>\r\n    </PageHeaderDispatchContext.Provider>\r\n  );\r\n}\r\n\r\n/**\r\n * Hook to access page header state (for rendering)\r\n */\r\nexport function usePageHeaderState() {\r\n  const context = React.useContext(PageHeaderStateContext);\r\n  if (!context) {\r\n    throw new Error('usePageHeaderState must be used within PageHeaderProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\n/**\r\n * Hook to access page header dispatch (for setting header)\r\n */\r\nexport function usePageHeaderDispatch() {\r\n  const context = React.useContext(PageHeaderDispatchContext);\r\n  if (!context) {\r\n    throw new Error('usePageHeaderDispatch must be used within PageHeaderProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\n/**\r\n * Legacy hook to access full context\r\n * @deprecated Use usePageHeaderState or usePageHeaderDispatch instead\r\n */\r\nexport function usePageHeaderContext() {\r\n  const state = usePageHeaderState();\r\n  const dispatch = usePageHeaderDispatch();\r\n  return { pageHeader: state, ...dispatch };\r\n}\r\n\r\n/**\r\n * Hook to set page header from any component\r\n * \r\n * @example\r\n * // Auto-generated breadcrumb + title\r\n * usePageHeader();\r\n * \r\n * @example\r\n * // Custom configuration\r\n * usePageHeader({\r\n *   title: 'B√πi My',\r\n *   subtitle: 'Tr∆∞·ªüng nh√≥m ‚Ä¢ Kinh doanh',\r\n *   badge: <Badge>Active</Badge>,\r\n *   showBackButton: true,\r\n *   actions: [\r\n *     <Button key=\"edit\">Ch·ªânh s·ª≠a</Button>\r\n *   ]\r\n * });\r\n * \r\n * @example\r\n * // With dynamic context for breadcrumb\r\n * usePageHeader({\r\n *   context: {\r\n *     employeeName: employee.fullName,\r\n *     employeeCode: employee.code\r\n *   }\r\n * });\r\n */\r\nexport function usePageHeader(config?: PageHeaderState) {\r\n  const { setPageHeader, clearPageHeader } = usePageHeaderDispatch();\r\n  const configRef = React.useRef(config);\r\n  \r\n  // Update ref without causing re-render\r\n  configRef.current = config;\r\n\r\n  // Create a serializable fingerprint of the config\r\n  const configFingerprint = React.useMemo(() => {\r\n    const currentConfig = config;\r\n    \r\n    // Helper to recursively extract text from React elements\r\n    const extractText = (node: any): string => {\r\n      if (!node) return '';\r\n      if (typeof node === 'string' || typeof node === 'number') return String(node);\r\n      if (Array.isArray(node)) return node.map(extractText).join('');\r\n      if (React.isValidElement(node)) {\r\n        return extractText((node.props as any).children);\r\n      }\r\n      if (typeof node === 'object' && 'props' in node) {\r\n        return extractText((node as any).props?.children);\r\n      }\r\n      return '';\r\n    };\r\n\r\n    const extractTextFromActions = (actions?: React.ReactNode | React.ReactNode[]) => {\r\n      if (!actions) return '';\r\n      const actionsArray = Array.isArray(actions) ? actions : [actions];\r\n      return actionsArray.map(node => {\r\n        if (!React.isValidElement(node)) return extractText(node);\r\n        const props = node.props as any;\r\n        return `${extractText(node)}|${props.disabled}|${props.hidden}|${node.key}`;\r\n      }).join('||');\r\n    };\r\n\r\n    return currentConfig ? JSON.stringify({\r\n      title: typeof currentConfig.title === 'string' ? currentConfig.title : extractText(currentConfig.title),\r\n      subtitle: currentConfig.subtitle,\r\n      showBackButton: currentConfig.showBackButton,\r\n      backPath: currentConfig.backPath,\r\n      actionsText: extractTextFromActions(currentConfig.actions),\r\n      breadcrumb: currentConfig.breadcrumb,\r\n      badgeKey: React.isValidElement(currentConfig.badge) ? currentConfig.badge.key : undefined,\r\n      context: currentConfig.context,\r\n      docLink: currentConfig.docLink,\r\n    }) : 'EMPTY';\r\n  }, [config]);\r\n\r\n  React.useEffect(() => {\r\n    const currentConfig = configRef.current;\r\n    if (currentConfig) {\r\n      setPageHeader(currentConfig);\r\n    }\r\n  }, [configFingerprint, setPageHeader]);\r\n\r\n  return { setPageHeader, clearPageHeader };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1932, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-settings-page-header.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Settings2 } from 'lucide-react';\r\nimport { usePageHeader, type PageHeaderState, type PageHeaderDocLink } from '../../contexts/page-header-context';\r\nimport type { BreadcrumbItem } from '../../lib/breadcrumb-system';\r\n\r\nexport type SettingsPageHeaderOptions = Omit<PageHeaderState, 'title' | 'docLink'> & {\r\n  title: string;\r\n  icon?: React.ReactNode;\r\n  docLink?: string | PageHeaderDocLink;\r\n};\r\n\r\nconst defaultDocLabel = 'Xem h∆∞·ªõng d·∫´n';\r\nconst baseBreadcrumb: BreadcrumbItem[] = [\r\n  { label: 'Trang ch·ªß', href: '/', isCurrent: false },\r\n  { label: 'C√†i ƒë·∫∑t', href: '/settings', isCurrent: false },\r\n];\r\n\r\nconst normalizeLabel = (label?: string) => label?.trim().toLocaleLowerCase('vi');\r\nconst isHomeCrumb = (item: BreadcrumbItem) => item.href === '/' || normalizeLabel(item.label) === 'trang ch·ªß';\r\nconst isSettingsCrumb = (item: BreadcrumbItem) => item.href === '/settings' || normalizeLabel(item.label) === 'c√†i ƒë·∫∑t';\r\n\r\nexport function useSettingsPageHeader(options: SettingsPageHeaderOptions) {\r\n  const pathname = usePathname();\r\n  const { title, icon, docLink, breadcrumb, ...rest } = options;\r\n\r\n  const normalizedDocLink = React.useMemo<PageHeaderDocLink | undefined>(() => {\r\n    if (!docLink) return undefined;\r\n    if (typeof docLink === 'string') {\r\n      return { href: docLink, label: defaultDocLabel };\r\n    }\r\n    return {\r\n      href: docLink.href,\r\n      label: docLink.label ?? defaultDocLabel,\r\n    };\r\n  }, [docLink]);\r\n\r\n  const decoratedTitle = React.useMemo(() => (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      {(icon ?? <Settings2 className=\"h-5 w-5 text-muted-foreground\" aria-hidden=\"true\" />)}\r\n      <span>{title}</span>\r\n    </span>\r\n  ), [icon, title]);\r\n\r\n  const normalizedBreadcrumb = React.useMemo(() => {\r\n    const custom = (breadcrumb ?? []).map((item) => ({\r\n      ...item,\r\n      href: item.href || pathname,\r\n    }));\r\n\r\n    let merged: BreadcrumbItem[] = custom.length\r\n      ? [...custom]\r\n      : [{ label: title, href: pathname, isCurrent: true }];\r\n\r\n    if (!merged.some(isHomeCrumb)) {\r\n      merged = [{ ...baseBreadcrumb[0] }, ...merged];\r\n    }\r\n\r\n    if (!merged.some(isSettingsCrumb)) {\r\n      const homeIndex = merged.findIndex(isHomeCrumb);\r\n      const insertionIndex = homeIndex >= 0 ? homeIndex + 1 : 0;\r\n      merged = [\r\n        ...merged.slice(0, insertionIndex),\r\n        { ...baseBreadcrumb[1] },\r\n        ...merged.slice(insertionIndex),\r\n      ];\r\n    }\r\n\r\n    return merged.map((item, index) => ({\r\n      ...item,\r\n      isCurrent: index === merged.length - 1,\r\n    }));\r\n  }, [breadcrumb, pathname, title]);\r\n\r\n  return usePageHeader({\r\n    ...rest,\r\n    breadcrumb: normalizedBreadcrumb,\r\n    title: decoratedTitle,\r\n    docLink: normalizedDocLink,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;AASA,MAAM,kBAAkB;AACxB,MAAM,iBAAmC;IACvC;QAAE,OAAO;QAAa,MAAM;QAAK,WAAW;IAAM;IAClD;QAAE,OAAO;QAAW,MAAM;QAAa,WAAW;IAAM;CACzD;AAED,MAAM,iBAAiB,CAAC,QAAmB,OAAO,OAAO,kBAAkB;AAC3E,MAAM,cAAc,CAAC,OAAyB,KAAK,IAAI,KAAK,OAAO,eAAe,KAAK,KAAK,MAAM;AAClG,MAAM,kBAAkB,CAAC,OAAyB,KAAK,IAAI,KAAK,eAAe,eAAe,KAAK,KAAK,MAAM;AAEvG,SAAS,sBAAsB,OAAkC;IACtE,MAAM,WAAW,IAAA,oMAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;IAEtD,MAAM,oBAAoB,gNAAa,CAAgC;QACrE,IAAI,CAAC,SAAS,OAAO;QACrB,IAAI,OAAO,YAAY,UAAU;YAC/B,OAAO;gBAAE,MAAM;gBAAS,OAAO;YAAgB;QACjD;QACA,OAAO;YACL,MAAM,QAAQ,IAAI;YAClB,OAAO,QAAQ,KAAK,IAAI;QAC1B;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,iBAAiB,gNAAa,CAAC,kBACnC,8OAAC;YAAK,WAAU;;gBACZ,sBAAQ,8OAAC,6NAAS;oBAAC,WAAU;oBAAgC,eAAY;;;;;;8BAC3E,8OAAC;8BAAM;;;;;;;;;;;kBAER;QAAC;QAAM;KAAM;IAEhB,MAAM,uBAAuB,gNAAa,CAAC;QACzC,MAAM,SAAS,CAAC,cAAc,EAAE,EAAE,GAAG,CAAC,CAAC,OAAS,CAAC;gBAC/C,GAAG,IAAI;gBACP,MAAM,KAAK,IAAI,IAAI;YACrB,CAAC;QAED,IAAI,SAA2B,OAAO,MAAM,GACxC;eAAI;SAAO,GACX;YAAC;gBAAE,OAAO;gBAAO,MAAM;gBAAU,WAAW;YAAK;SAAE;QAEvD,IAAI,CAAC,OAAO,IAAI,CAAC,cAAc;YAC7B,SAAS;gBAAC;oBAAE,GAAG,cAAc,CAAC,EAAE;gBAAC;mBAAM;aAAO;QAChD;QAEA,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB;YACjC,MAAM,YAAY,OAAO,SAAS,CAAC;YACnC,MAAM,iBAAiB,aAAa,IAAI,YAAY,IAAI;YACxD,SAAS;mBACJ,OAAO,KAAK,CAAC,GAAG;gBACnB;oBAAE,GAAG,cAAc,CAAC,EAAE;gBAAC;mBACpB,OAAO,KAAK,CAAC;aACjB;QACH;QAEA,OAAO,OAAO,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;gBAClC,GAAG,IAAI;gBACP,WAAW,UAAU,OAAO,MAAM,GAAG;YACvC,CAAC;IACH,GAAG;QAAC;QAAY;QAAU;KAAM;IAEhC,OAAO,IAAA,uJAAa,EAAC;QACnB,GAAG,IAAI;QACP,YAAY;QACZ,OAAO;QACP,SAAS;IACX;AACF"}},
    {"offset": {"line": 2061, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-types.ts"],"sourcesContent":["/**\r\n * Type-safe ID System\r\n * \r\n * Prevents mixing systemId with business ID at compile time\r\n */\r\n\r\n// Branded types for type safety\r\nexport type SystemId = string & { readonly __brand: 'SystemId' };\r\nexport type BusinessId = string & { readonly __brand: 'BusinessId' };\r\n\r\n/**\r\n * Create a SystemId from a string\r\n * Use this when you know for sure it's a systemId\r\n */\r\nexport function asSystemId(id: string): SystemId {\r\n  return id as SystemId;\r\n}\r\n\r\n/**\r\n * Create a BusinessId from a string\r\n * Use this when you know for sure it's a business ID\r\n */\r\nexport function asBusinessId(id: string): BusinessId {\r\n  return id as BusinessId;\r\n}\r\n\r\n/**\r\n * Check if a string is a valid systemId format\r\n */\r\nexport function isSystemIdFormat(id: string): boolean {\r\n  // SystemId: 8 digits + prefix (e.g., NV00000001, VOUCHER00000123)\r\n  return /^[A-Z]+\\d{8}$/.test(id);\r\n}\r\n\r\n/**\r\n * Check if a string is a valid business ID format\r\n */\r\nexport function isBusinessIdFormat(id: string): boolean {\r\n  // Business ID: shorter, variable length (e.g., NV001, PT000001)\r\n  return /^[A-Z]+\\d{3,6}$/.test(id);\r\n}\r\n\r\n/**\r\n * Safely convert unknown ID to proper type\r\n */\r\nexport function parseId(id: string): { type: 'system' | 'business'; value: SystemId | BusinessId } {\r\n  if (isSystemIdFormat(id)) {\r\n    return { type: 'system', value: asSystemId(id) };\r\n  }\r\n  if (isBusinessIdFormat(id)) {\r\n    return { type: 'business', value: asBusinessId(id) };\r\n  }\r\n  throw new Error(`Invalid ID format: ${id}`);\r\n}\r\n\r\n/**\r\n * ID Pair - Always keep systemId and businessId together\r\n */\r\nexport interface IDPair {\r\n  systemId: SystemId;\r\n  businessId: BusinessId;\r\n}\r\n\r\n/**\r\n * Entity with dual IDs\r\n */\r\nexport interface DualIDEntity {\r\n  systemId: SystemId;\r\n  id: BusinessId;\r\n}\r\n\r\n/**\r\n * Store methods with type-safe IDs\r\n */\r\nexport interface TypeSafeStore<T extends DualIDEntity> {\r\n  /** Find by systemId (for queries, relationships) */\r\n  findBySystemId(systemId: SystemId): T | null;\r\n  \r\n  /** Find by business ID (for user input, display) */\r\n  findByBusinessId(businessId: BusinessId): T | null;\r\n  \r\n  /** Update by systemId (always use systemId for updates) */\r\n  updateBySystemId(systemId: SystemId, updates: Partial<T>): void;\r\n  \r\n  /** Delete by systemId (always use systemId for deletes) */\r\n  deleteBySystemId(systemId: SystemId): void;\r\n}\r\n\r\n/**\r\n * Route params with type-safe IDs\r\n */\r\nexport interface RouteParams {\r\n  systemId?: SystemId;\r\n  id?: BusinessId;\r\n}\r\n\r\n/**\r\n * Link builder - always uses systemId\r\n */\r\nexport function buildEntityLink(path: string, entity: DualIDEntity): string {\r\n  return path.replace(':systemId', entity.systemId);\r\n}\r\n\r\n/**\r\n * Display ID - always uses business ID\r\n */\r\nexport function getDisplayId(entity: DualIDEntity): string {\r\n  return entity.id;\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid SystemId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureSystemId(id: string, context?: string): SystemId {\r\n  if (!isSystemIdFormat(id)) {\r\n    console.warn(`[ensureSystemId] Invalid SystemId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asSystemId(id);\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid BusinessId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureBusinessId(id: string, context?: string): BusinessId {\r\n  if (!isBusinessIdFormat(id)) {\r\n    console.warn(`[ensureBusinessId] Invalid BusinessId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asBusinessId(id);\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC,GAED,gCAAgC;;;;;;;;;;;;;;;;;;;;;AAQzB,SAAS,WAAW,EAAU;IACnC,OAAO;AACT;AAMO,SAAS,aAAa,EAAU;IACrC,OAAO;AACT;AAKO,SAAS,iBAAiB,EAAU;IACzC,kEAAkE;IAClE,OAAO,gBAAgB,IAAI,CAAC;AAC9B;AAKO,SAAS,mBAAmB,EAAU;IAC3C,gEAAgE;IAChE,OAAO,kBAAkB,IAAI,CAAC;AAChC;AAKO,SAAS,QAAQ,EAAU;IAChC,IAAI,iBAAiB,KAAK;QACxB,OAAO;YAAE,MAAM;YAAU,OAAO,WAAW;QAAI;IACjD;IACA,IAAI,mBAAmB,KAAK;QAC1B,OAAO;YAAE,MAAM;YAAY,OAAO,aAAa;QAAI;IACrD;IACA,MAAM,IAAI,MAAM,CAAC,mBAAmB,EAAE,IAAI;AAC5C;AA8CO,SAAS,gBAAgB,IAAY,EAAE,MAAoB;IAChE,OAAO,KAAK,OAAO,CAAC,aAAa,OAAO,QAAQ;AAClD;AAKO,SAAS,aAAa,MAAoB;IAC/C,OAAO,OAAO,EAAE;AAClB;AAMO,SAAS,eAAe,EAAU,EAAE,OAAgB;IACzD,IAAI,CAAC,iBAAiB,KAAK;QACzB,QAAQ,IAAI,CAAC,CAAC,2CAA2C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACpG;IACA,OAAO,WAAW;AACpB;AAMO,SAAS,iBAAiB,EAAU,EAAE,OAAgB;IAC3D,IAAI,CAAC,mBAAmB,KAAK;QAC3B,QAAQ,IAAI,CAAC,CAAC,+CAA+C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACxG;IACA,OAAO,aAAa;AACtB"}},
    {"offset": {"line": 2137, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/api/receipt-types-api.ts"],"sourcesContent":["/**\r\n * Receipt Types API Layer\r\n */\r\n\r\nimport type { ReceiptType } from '../types';\r\n\r\nexport interface ReceiptTypeFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  isActive?: boolean;\r\n  isBusinessResult?: boolean;\r\n}\r\n\r\nexport interface ReceiptTypeResponse {\r\n  data: ReceiptType[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface ReceiptTypeCreateInput {\r\n  systemId?: string;\r\n  id?: string;\r\n  name: string;\r\n  description?: string;\r\n  isBusinessResult?: boolean;\r\n  isActive?: boolean;\r\n  isDefault?: boolean;\r\n  color?: string;\r\n  createdAt?: string;\r\n}\r\n\r\nexport interface ReceiptTypeUpdateInput extends Partial<ReceiptTypeCreateInput> {}\r\n\r\nconst BASE_URL = '/api/settings/receipt-types';\r\n\r\nexport async function fetchReceiptTypes(\r\n  filters: ReceiptTypeFilters = {}\r\n): Promise<ReceiptTypeResponse> {\r\n  const params = new URLSearchParams();\r\n  if (filters.page) params.set('page', String(filters.page));\r\n  if (filters.limit) params.set('limit', String(filters.limit));\r\n  if (filters.isActive !== undefined) params.set('isActive', String(filters.isActive));\r\n  if (filters.isBusinessResult !== undefined) params.set('isBusinessResult', String(filters.isBusinessResult));\r\n\r\n  const url = params.toString() ? `${BASE_URL}?${params}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) throw new Error('Failed to fetch receipt types');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchReceiptTypeById(systemId: string): Promise<ReceiptType> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  if (!response.ok) throw new Error('Failed to fetch receipt type');\r\n  return response.json();\r\n}\r\n\r\nexport async function createReceiptType(data: ReceiptTypeCreateInput): Promise<ReceiptType> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to create receipt type');\r\n  return response.json();\r\n}\r\n\r\nexport async function updateReceiptType(\r\n  systemId: string,\r\n  data: ReceiptTypeUpdateInput\r\n): Promise<ReceiptType> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update receipt type');\r\n  return response.json();\r\n}\r\n\r\nexport async function deleteReceiptType(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, { method: 'DELETE' });\r\n  if (!response.ok) throw new Error('Failed to delete receipt type');\r\n}\r\n\r\nexport async function setDefaultReceiptType(systemId: string): Promise<ReceiptType> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default`, { method: 'POST' });\r\n  if (!response.ok) throw new Error('Failed to set default');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchActiveReceiptTypes(): Promise<ReceiptType[]> {\r\n  const response = await fetchReceiptTypes({ isActive: true, limit: 100 });\r\n  return response.data;\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;AAmCD,MAAM,WAAW;AAEV,eAAe,kBACpB,UAA8B,CAAC,CAAC;IAEhC,MAAM,SAAS,IAAI;IACnB,IAAI,QAAQ,IAAI,EAAE,OAAO,GAAG,CAAC,QAAQ,OAAO,QAAQ,IAAI;IACxD,IAAI,QAAQ,KAAK,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO,QAAQ,KAAK;IAC3D,IAAI,QAAQ,QAAQ,KAAK,WAAW,OAAO,GAAG,CAAC,YAAY,OAAO,QAAQ,QAAQ;IAClF,IAAI,QAAQ,gBAAgB,KAAK,WAAW,OAAO,GAAG,CAAC,oBAAoB,OAAO,QAAQ,gBAAgB;IAE1G,MAAM,MAAM,OAAO,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,QAAQ,GAAG;IAC1D,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,qBAAqB,QAAgB;IACzD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IACtD,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBAAkB,IAA4B;IAClE,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBACpB,QAAgB,EAChB,IAA4B;IAE5B,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBAAkB,QAAgB;IACtD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QAAE,QAAQ;IAAS;IAC3E,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;AACpC;AAEO,eAAe,sBAAsB,QAAgB;IAC1D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAAE,QAAQ;IAAO;IACrF,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,kBAAkB;QAAE,UAAU;QAAM,OAAO;IAAI;IACtE,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 2218, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/hooks/use-receipt-types.ts"],"sourcesContent":["/**\r\n * Receipt Types React Query Hooks\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchReceiptTypes,\r\n  fetchReceiptTypeById,\r\n  createReceiptType,\r\n  updateReceiptType,\r\n  deleteReceiptType,\r\n  setDefaultReceiptType,\r\n  fetchActiveReceiptTypes,\r\n  type ReceiptTypeFilters,\r\n  type ReceiptTypeCreateInput,\r\n  type ReceiptTypeUpdateInput,\r\n} from '../api/receipt-types-api';\r\n\r\nexport const receiptTypeKeys = {\r\n  all: ['receipt-types'] as const,\r\n  lists: () => [...receiptTypeKeys.all, 'list'] as const,\r\n  list: (filters: ReceiptTypeFilters) => [...receiptTypeKeys.lists(), filters] as const,\r\n  details: () => [...receiptTypeKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...receiptTypeKeys.details(), id] as const,\r\n  active: () => [...receiptTypeKeys.all, 'active'] as const,\r\n};\r\n\r\nexport function useReceiptTypes(filters: ReceiptTypeFilters = {}) {\r\n  return useQuery({\r\n    queryKey: receiptTypeKeys.list(filters),\r\n    queryFn: () => fetchReceiptTypes(filters),\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useReceiptTypeById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: receiptTypeKeys.detail(systemId!),\r\n    queryFn: () => fetchReceiptTypeById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useActiveReceiptTypes() {\r\n  return useQuery({\r\n    queryKey: receiptTypeKeys.active(),\r\n    queryFn: fetchActiveReceiptTypes,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useReceiptTypeMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n  const invalidate = () => queryClient.invalidateQueries({ queryKey: receiptTypeKeys.all });\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: ReceiptTypeCreateInput) => createReceiptType(data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: ReceiptTypeUpdateInput }) =>\r\n      updateReceiptType(systemId, data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deleteReceiptType(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefault = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultReceiptType(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create, update, remove, setDefault,\r\n    isLoading: create.isPending || update.isPending || remove.isPending || setDefault.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;CAEC,GAED;AAAA;AAAA;AACA;;;AAaO,MAAM,kBAAkB;IAC7B,KAAK;QAAC;KAAgB;IACtB,OAAO,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAO;IAC7C,MAAM,CAAC,UAAgC;eAAI,gBAAgB,KAAK;YAAI;SAAQ;IAC5E,SAAS,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAS;IACjD,QAAQ,CAAC,KAAe;eAAI,gBAAgB,OAAO;YAAI;SAAG;IAC1D,QAAQ,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAS;AAClD;AAEO,SAAS,gBAAgB,UAA8B,CAAC,CAAC;IAC9D,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,IAAI,CAAC;QAC/B,SAAS,IAAM,IAAA,+LAAiB,EAAC;QACjC,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS,mBAAmB,QAA4B;IAC7D,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,MAAM,CAAC;QACjC,SAAS,IAAM,IAAA,kMAAoB,EAAC;QACpC,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS;IACd,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,MAAM;QAChC,SAAS,qMAAuB;QAChC,WAAW,OAAO,KAAK;IACzB;AACF;AAOO,SAAS,wBAAwB,UAA6B,CAAC,CAAC;IACrE,MAAM,cAAc,IAAA,wMAAc;IAClC,MAAM,aAAa,IAAM,YAAY,iBAAiB,CAAC;YAAE,UAAU,gBAAgB,GAAG;QAAC;IAEvF,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,OAAiC,IAAA,+LAAiB,EAAC;QAChE,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAsD,GACjF,IAAA,+LAAiB,EAAC,UAAU;QAC9B,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,WAAqB,IAAA,+LAAiB,EAAC;QACpD,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,aAAa,IAAA,6LAAW,EAAC;QAC7B,YAAY,CAAC,WAAqB,IAAA,mMAAqB,EAAC;QACxD,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QAAQ;QAAQ;QAAQ;QACxB,WAAW,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,WAAW,SAAS;IAC7F;AACF"}},
    {"offset": {"line": 2334, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Form = registerClientReference(\n    function() { throw new Error(\"Attempted to call Form() from the server but Form is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"Form\",\n);\nexport const FormControl = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormControl() from the server but FormControl is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"FormControl\",\n);\nexport const FormDescription = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormDescription() from the server but FormDescription is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"FormDescription\",\n);\nexport const FormField = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormField() from the server but FormField is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"FormField\",\n);\nexport const FormItem = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormItem() from the server but FormItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"FormItem\",\n);\nexport const FormLabel = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormLabel() from the server but FormLabel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"FormLabel\",\n);\nexport const FormMessage = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormMessage() from the server but FormMessage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"FormMessage\",\n);\nexport const useFormField = registerClientReference(\n    function() { throw new Error(\"Attempted to call useFormField() from the server but useFormField is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx <module evaluation>\",\n    \"useFormField\",\n);\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,OAAO,IAAA,wQAAuB,EACvC;IAAa,MAAM,IAAI,MAAM;AAAwN,GACrP,wDACA;AAEG,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,wDACA;AAEG,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,wDACA;AAEG,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,wDACA;AAEG,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,wDACA;AAEG,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,wDACA;AAEG,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,wDACA;AAEG,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,wDACA","ignoreList":[0]}},
    {"offset": {"line": 2383, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Form = registerClientReference(\n    function() { throw new Error(\"Attempted to call Form() from the server but Form is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"Form\",\n);\nexport const FormControl = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormControl() from the server but FormControl is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"FormControl\",\n);\nexport const FormDescription = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormDescription() from the server but FormDescription is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"FormDescription\",\n);\nexport const FormField = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormField() from the server but FormField is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"FormField\",\n);\nexport const FormItem = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormItem() from the server but FormItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"FormItem\",\n);\nexport const FormLabel = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormLabel() from the server but FormLabel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"FormLabel\",\n);\nexport const FormMessage = registerClientReference(\n    function() { throw new Error(\"Attempted to call FormMessage() from the server but FormMessage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"FormMessage\",\n);\nexport const useFormField = registerClientReference(\n    function() { throw new Error(\"Attempted to call useFormField() from the server but useFormField is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/form.tsx\",\n    \"useFormField\",\n);\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,OAAO,IAAA,wQAAuB,EACvC;IAAa,MAAM,IAAI,MAAM;AAAwN,GACrP,oCACA;AAEG,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,oCACA;AAEG,MAAM,kBAAkB,IAAA,wQAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,oCACA;AAEG,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,oCACA;AAEG,MAAM,WAAW,IAAA,wQAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,oCACA;AAEG,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,oCACA;AAEG,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,oCACA;AAEG,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,oCACA","ignoreList":[0]}},
    {"offset": {"line": 2432, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 2440, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nexport type InputProps = React.ComponentProps<\"input\">;\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAIA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,kHAAE,EACX,iYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 2468, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 2495, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype BaseCheckboxProps = React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n\r\ntype CheckboxProps = Omit<BaseCheckboxProps, \"checked\" | \"defaultChecked\"> & {\r\n  checked?: CheckboxPrimitive.CheckedState | undefined\r\n  defaultChecked?: CheckboxPrimitive.CheckedState | undefined\r\n}\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  CheckboxProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AASA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kTACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;kBAE3D,cAAA,8OAAC,iLAA2B;YAC1B,WAAW,IAAA,kHAAE,EAAC;sBAEd,cAAA,8OAAC,6MAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 2544, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 2574, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/switch.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Switch = registerClientReference(\n    function() { throw new Error(\"Attempted to call Switch() from the server but Switch is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/switch.tsx <module evaluation>\",\n    \"Switch\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,0DACA","ignoreList":[0]}},
    {"offset": {"line": 2588, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/switch.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Switch = registerClientReference(\n    function() { throw new Error(\"Attempted to call Switch() from the server but Switch is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ui/switch.tsx\",\n    \"Switch\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,sCACA","ignoreList":[0]}},
    {"offset": {"line": 2602, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 2610, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/form.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport type { ReceiptType } from \"./types\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"../../../components/ui/form\";\r\nimport { Input } from \"../../../components/ui/input\";\r\nimport { Textarea } from \"../../../components/ui/textarea\";\r\nimport { Checkbox } from \"../../../components/ui/checkbox\";\r\nimport { Label } from \"../../../components/ui/label\";\r\nimport { Switch } from \"../../../components/ui/switch\";\r\n\r\nconst formSchema = z.object({\r\n  id: z.string().min(1, \"M√£ lo·∫°i l√† b·∫Øt bu·ªôc\"),\r\n  name: z.string().min(1, \"T√™n lo·∫°i l√† b·∫Øt bu·ªôc\").max(100, \"T√™n kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100 k√Ω t·ª±\"),\r\n  description: z.string().optional(),\r\n  isBusinessResult: z.boolean(),\r\n  isActive: z.boolean(),\r\n  color: z.string().optional(),\r\n});\r\n\r\nexport type ReceiptTypeFormValues = z.infer<typeof formSchema>;\r\n\r\ntype FormProps = {\r\n  initialData?: ReceiptType | null;\r\n  onSubmit: (values: ReceiptTypeFormValues) => void;\r\n};\r\n\r\nexport function ReceiptTypeForm({ initialData, onSubmit }: FormProps) {\r\n  const defaultValues: ReceiptTypeFormValues = React.useMemo(() => ({\r\n    id: '',\r\n    name: \"\",\r\n    description: \"\",\r\n    isBusinessResult: true,\r\n    isActive: true,\r\n    color: '#22c55e',\r\n  }), []);\r\n\r\n  const form = useForm<ReceiptTypeFormValues>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: initialData\r\n      ? {\r\n          id: initialData.id,\r\n          name: initialData.name,\r\n          description: initialData.description ?? '',\r\n          isBusinessResult: initialData.isBusinessResult,\r\n          isActive: initialData.isActive,\r\n          color: initialData.color ?? '',\r\n        }\r\n      : defaultValues,\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (initialData) {\r\n      form.reset({\r\n        id: initialData.id,\r\n        name: initialData.name,\r\n        description: initialData.description ?? '',\r\n        isBusinessResult: initialData.isBusinessResult,\r\n        isActive: initialData.isActive,\r\n        color: initialData.color ?? '',\r\n      });\r\n    } else {\r\n      form.reset(defaultValues);\r\n    }\r\n  }, [form, initialData, defaultValues]);\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form id=\"receipt-type-form\" onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 pt-4 max-h-[70vh] overflow-y-auto px-1\">\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <FormField control={form.control} name=\"name\" render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>T√™n <span className=\"text-destructive\">*</span></FormLabel>\r\n              <FormControl>\r\n                <Input {...field} value={field.value ?? ''} className=\"h-9\" />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )} />\r\n          <FormField control={form.control} name=\"id\" render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>M√£</FormLabel>\r\n              <FormControl>\r\n                <Input\r\n                  {...field}\r\n                  value={field.value ?? ''}\r\n                  className=\"h-9 uppercase\"\r\n                  onChange={(event) => field.onChange(event.target.value.toUpperCase())}\r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )} />\r\n        </div>\r\n        <FormField control={form.control} name=\"description\" render={({ field }) => (\r\n          <FormItem>\r\n            <FormLabel>M√¥ t·∫£</FormLabel>\r\n            <FormControl>\r\n              <Textarea {...field} value={field.value ?? ''} rows={3} />\r\n            </FormControl>\r\n            <FormMessage />\r\n          </FormItem>\r\n        )} />\r\n\r\n        <FormField control={form.control} name=\"color\" render={({ field }) => (\r\n          <FormItem>\r\n            <FormLabel>M√†u hi·ªÉn th·ªã</FormLabel>\r\n            <FormControl>\r\n              <Input {...field} value={field.value ?? ''} placeholder=\"#22c55e\" />\r\n            </FormControl>\r\n            <FormDescription>Gi√∫p ph√¢n bi·ªát lo·∫°i phi·∫øu thu tr√™n b√°o c√°o</FormDescription>\r\n            <FormMessage />\r\n          </FormItem>\r\n        )} />\r\n        \r\n        <FormField control={form.control} name=\"isBusinessResult\" render={({ field }) => (\r\n          <FormItem className=\"flex items-center space-x-2\">\r\n            <FormControl>\r\n              <Checkbox\r\n                checked={field.value}\r\n                onCheckedChange={(checked) => field.onChange(Boolean(checked))}\r\n              />\r\n            </FormControl>\r\n            <Label>H·∫°ch to√°n k·∫øt qu·∫£ kinh doanh</Label>\r\n          </FormItem>\r\n        )} />\r\n        \r\n        <FormField control={form.control} name=\"isActive\" render={({ field }) => (\r\n          <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-3\">\r\n            <div className=\"space-y-0.5\">\r\n              <FormLabel>Tr·∫°ng th√°i ho·∫°t ƒë·ªông</FormLabel>\r\n              <FormDescription>Cho ph√©p s·ª≠ d·ª•ng lo·∫°i phi·∫øu thu n√†y</FormDescription>\r\n            </div>\r\n            <FormControl>\r\n              <Switch checked={field.value} onCheckedChange={field.onChange} />\r\n            </FormControl>\r\n          </FormItem>\r\n        )} />\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAEA,MAAM,aAAa,yJAAQ,CAAC;IAC1B,IAAI,yJAAQ,GAAG,GAAG,CAAC,GAAG;IACtB,MAAM,yJAAQ,GAAG,GAAG,CAAC,GAAG,wBAAwB,GAAG,CAAC,KAAK;IACzD,aAAa,yJAAQ,GAAG,QAAQ;IAChC,kBAAkB,0JAAS;IAC3B,UAAU,0JAAS;IACnB,OAAO,yJAAQ,GAAG,QAAQ;AAC5B;AASO,SAAS,gBAAgB,EAAE,WAAW,EAAE,QAAQ,EAAa;IAClE,MAAM,gBAAuC,gNAAa,CAAC,IAAM,CAAC;YAChE,IAAI;YACJ,MAAM;YACN,aAAa;YACb,kBAAkB;YAClB,UAAU;YACV,OAAO;QACT,CAAC,GAAG,EAAE;IAEN,MAAM,OAAO,IAAA,mLAAO,EAAwB;QAC1C,UAAU,IAAA,6KAAW,EAAC;QACtB,eAAe,cACX;YACE,IAAI,YAAY,EAAE;YAClB,MAAM,YAAY,IAAI;YACtB,aAAa,YAAY,WAAW,IAAI;YACxC,kBAAkB,YAAY,gBAAgB;YAC9C,UAAU,YAAY,QAAQ;YAC9B,OAAO,YAAY,KAAK,IAAI;QAC9B,IACA;IACN;IAEA,kNAAe,CAAC;QACd,IAAI,aAAa;YACf,KAAK,KAAK,CAAC;gBACT,IAAI,YAAY,EAAE;gBAClB,MAAM,YAAY,IAAI;gBACtB,aAAa,YAAY,WAAW,IAAI;gBACxC,kBAAkB,YAAY,gBAAgB;gBAC9C,UAAU,YAAY,QAAQ;gBAC9B,OAAO,YAAY,KAAK,IAAI;YAC9B;QACF,OAAO;YACL,KAAK,KAAK,CAAC;QACb;IACF,GAAG;QAAC;QAAM;QAAa;KAAc;IAErC,qBACE,8OAAC,iIAAI;QAAE,GAAG,IAAI;kBACZ,cAAA,8OAAC;YAAK,IAAG;YAAoB,UAAU,KAAK,YAAY,CAAC;YAAW,WAAU;;8BAC5E,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,sIAAS;4BAAC,SAAS,KAAK,OAAO;4BAAE,MAAK;4BAAO,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC9D,8OAAC,qIAAQ;;sDACP,8OAAC,sIAAS;;gDAAC;8DAAI,8OAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;sDAClD,8OAAC,wIAAW;sDACV,cAAA,8OAAC,mIAAK;gDAAE,GAAG,KAAK;gDAAE,OAAO,MAAM,KAAK,IAAI;gDAAI,WAAU;;;;;;;;;;;sDAExD,8OAAC,wIAAW;;;;;;;;;;;;;;;;sCAGhB,8OAAC,sIAAS;4BAAC,SAAS,KAAK,OAAO;4BAAE,MAAK;4BAAK,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC5D,8OAAC,qIAAQ;;sDACP,8OAAC,sIAAS;sDAAC;;;;;;sDACX,8OAAC,wIAAW;sDACV,cAAA,8OAAC,mIAAK;gDACH,GAAG,KAAK;gDACT,OAAO,MAAM,KAAK,IAAI;gDACtB,WAAU;gDACV,UAAU,CAAC,QAAU,MAAM,QAAQ,CAAC,MAAM,MAAM,CAAC,KAAK,CAAC,WAAW;;;;;;;;;;;sDAGtE,8OAAC,wIAAW;;;;;;;;;;;;;;;;;;;;;;8BAIlB,8OAAC,sIAAS;oBAAC,SAAS,KAAK,OAAO;oBAAE,MAAK;oBAAc,QAAQ,CAAC,EAAE,KAAK,EAAE,iBACrE,8OAAC,qIAAQ;;8CACP,8OAAC,sIAAS;8CAAC;;;;;;8CACX,8OAAC,wIAAW;8CACV,cAAA,8OAAC,yIAAQ;wCAAE,GAAG,KAAK;wCAAE,OAAO,MAAM,KAAK,IAAI;wCAAI,MAAM;;;;;;;;;;;8CAEvD,8OAAC,wIAAW;;;;;;;;;;;;;;;;8BAIhB,8OAAC,sIAAS;oBAAC,SAAS,KAAK,OAAO;oBAAE,MAAK;oBAAQ,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC/D,8OAAC,qIAAQ;;8CACP,8OAAC,sIAAS;8CAAC;;;;;;8CACX,8OAAC,wIAAW;8CACV,cAAA,8OAAC,mIAAK;wCAAE,GAAG,KAAK;wCAAE,OAAO,MAAM,KAAK,IAAI;wCAAI,aAAY;;;;;;;;;;;8CAE1D,8OAAC,4IAAe;8CAAC;;;;;;8CACjB,8OAAC,wIAAW;;;;;;;;;;;;;;;;8BAIhB,8OAAC,sIAAS;oBAAC,SAAS,KAAK,OAAO;oBAAE,MAAK;oBAAmB,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC1E,8OAAC,qIAAQ;4BAAC,WAAU;;8CAClB,8OAAC,wIAAW;8CACV,cAAA,8OAAC,yIAAQ;wCACP,SAAS,MAAM,KAAK;wCACpB,iBAAiB,CAAC,UAAY,MAAM,QAAQ,CAAC,QAAQ;;;;;;;;;;;8CAGzD,8OAAC,mIAAK;8CAAC;;;;;;;;;;;;;;;;;8BAIX,8OAAC,sIAAS;oBAAC,SAAS,KAAK,OAAO;oBAAE,MAAK;oBAAW,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAClE,8OAAC,qIAAQ;4BAAC,WAAU;;8CAClB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,sIAAS;sDAAC;;;;;;sDACX,8OAAC,4IAAe;sDAAC;;;;;;;;;;;;8CAEnB,8OAAC,wIAAW;8CACV,cAAA,8OAAC,qIAAM;wCAAC,SAAS,MAAM,KAAK;wCAAE,iBAAiB,MAAM,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO3E"}},
    {"offset": {"line": 2996, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-9 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 3056, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/contexts/modal-context.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\ntype ModalType = 'dialog' | 'dropdown' | 'popover' | 'sheet' | 'drawer' | 'select' | 'custom';\r\n\r\ninterface ModalMetadata {\r\n  type: ModalType;\r\n  zIndex?: number | undefined;\r\n  className?: string | undefined;\r\n}\r\n\r\ninterface ModalContextType {\r\n  // Stack of modals in order they were opened (oldest first)\r\n  openModals: string[];\r\n  // The most recently opened modal (top of stack)\r\n  activeModal: string | null;\r\n  // Register a modal with the context\r\n  registerModal: (id: string, type: ModalType, metadata?: Omit<ModalMetadata, 'type'>) => void;\r\n  // Unregister a modal from the context\r\n  unregisterModal: (id: string) => void;\r\n  // Whether to show the global overlay\r\n  shouldShowOverlay: boolean;\r\n  // Get metadata about all registered modals\r\n  modalMetadata: Record<string, ModalMetadata>;\r\n  // Get z-index for a particular modal\r\n  getZIndex: (id: string) => number;\r\n  // Check if a modal is active (top-most)\r\n  isModalActive: (id: string) => boolean;\r\n}\r\n\r\nconst DEFAULT_Z_INDEX = {\r\n  dialog: 50,\r\n  drawer: 50,\r\n  sheet: 50,\r\n  dropdown: 40,\r\n  popover: 40,\r\n  select: 40,\r\n  custom: 30,\r\n};\r\n\r\nconst BASE_Z_INDEX = 40;\r\n\r\nconst ModalContext = React.createContext<ModalContextType>({\r\n  openModals: [],\r\n  activeModal: null,\r\n  registerModal: () => {},\r\n  unregisterModal: () => {},\r\n  shouldShowOverlay: false,\r\n  modalMetadata: {},\r\n  getZIndex: () => BASE_Z_INDEX,\r\n  isModalActive: () => false,\r\n});\r\n\r\nexport function ModalProvider({ children }: { children: React.ReactNode }) {\r\n  const [openModals, setOpenModals] = React.useState<string[]>([]);\r\n  const [modalMetadata, setModalMetadata] = React.useState<Record<string, ModalMetadata>>({});\r\n\r\n  // Register a new modal with its type and metadata\r\n  const registerModal = React.useCallback((id: string, type: ModalType, metadata?: Omit<ModalMetadata, 'type'>) => {\r\n    setOpenModals((prev) => {\r\n      if (prev.includes(id)) return prev;\r\n      return [...prev, id];\r\n    });\r\n    \r\n    setModalMetadata((prev) => ({\r\n      ...prev,\r\n      [id]: {\r\n        type,\r\n        zIndex: metadata?.zIndex || DEFAULT_Z_INDEX[type],\r\n        className: metadata?.className,\r\n      }\r\n    }));\r\n  }, []);\r\n\r\n  // Remove a modal from tracking\r\n  const unregisterModal = React.useCallback((id: string) => {\r\n    setOpenModals((prev) => prev.filter((modalId) => modalId !== id));\r\n    setModalMetadata((prev) => {\r\n      const newMetadata = { ...prev };\r\n      delete newMetadata[id];\r\n      return newMetadata;\r\n    });\r\n  }, []);\r\n\r\n  // The active modal is the last one in the stack\r\n  const activeModal = openModals.length > 0 ? openModals[openModals.length - 1] : null;\r\n  \r\n  // Show overlay when any modal is open\r\n  const shouldShowOverlay = openModals.length > 0;\r\n  \r\n  // Calculate z-index for a given modal\r\n  const getZIndex = React.useCallback((id: string) => {\r\n    const metadata = modalMetadata[id];\r\n    if (!metadata) return BASE_Z_INDEX;\r\n    \r\n    // Base z-index for this type of modal\r\n    const baseZ = metadata.zIndex || DEFAULT_Z_INDEX[metadata.type];\r\n    \r\n    // Position in the stack (higher = more recently opened)\r\n    const position = openModals.indexOf(id);\r\n    if (position === -1) return baseZ;\r\n    \r\n    // Add position bonus (more recent modals get higher z-index)\r\n    return baseZ + position;\r\n  }, [modalMetadata, openModals]);\r\n  \r\n  // Check if a modal is the active (top) one\r\n  const isModalActive = React.useCallback((id: string) => {\r\n    return id === activeModal;\r\n  }, [activeModal]);\r\n\r\n  const value = React.useMemo(() => ({\r\n    openModals,\r\n    activeModal,\r\n    registerModal,\r\n    unregisterModal,\r\n    shouldShowOverlay,\r\n    modalMetadata,\r\n    getZIndex,\r\n    isModalActive,\r\n  }), [\r\n    openModals,\r\n    activeModal,\r\n    registerModal,\r\n    unregisterModal,\r\n    shouldShowOverlay,\r\n    modalMetadata,\r\n    getZIndex,\r\n    isModalActive,\r\n  ]);\r\n\r\n  return (\r\n    <ModalContext.Provider value={value}>\r\n      {/* Kh√¥ng d√πng overlay to√†n c·ª•c n·ªØa */}\r\n      {children}\r\n    </ModalContext.Provider>\r\n  );\r\n}\r\n\r\n/**\r\n * Hook to use in components that need modal functionality\r\n * @param id Unique identifier for this modal\r\n * @param isOpen Whether the modal is currently open\r\n * @param type Type of modal (dialog, dropdown, etc.)\r\n * @param metadata Optional additional metadata\r\n */\r\nexport function useModal(\r\n  id: string, \r\n  isOpen: boolean, \r\n  type: ModalType = 'dialog', \r\n  metadata?: Omit<ModalMetadata, 'type'>\r\n) {\r\n  const { \r\n    registerModal, \r\n    unregisterModal, \r\n    getZIndex, \r\n    isModalActive \r\n  } = React.useContext(ModalContext);\r\n\r\n  React.useEffect(() => {\r\n    if (isOpen) {\r\n      registerModal(id, type, metadata);\r\n    } else {\r\n      unregisterModal(id);\r\n    }\r\n    return () => {\r\n      unregisterModal(id);\r\n    };\r\n  }, [id, isOpen, type, metadata, registerModal, unregisterModal]);\r\n  \r\n  const zIndex = getZIndex(id);\r\n  const isActive = isModalActive(id);\r\n  \r\n  return {\r\n    zIndex,\r\n    isActive,\r\n  };\r\n}\r\n\r\nexport function useModalContext() {\r\n  return React.useContext(ModalContext);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3206, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\n// Use the original Dialog component\r\nconst Dialog = DialogPrimitive.Root\r\n\r\n// Create a Context to pass ID through the Dialog component tree\r\nconst DialogContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst DialogProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <DialogContext.Provider value={id}>{children}</DialogContext.Provider>;\r\n};\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> & { \r\n    id?: string;\r\n    open?: boolean;\r\n  }\r\n>(({ className, children, id: propId, open, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(DialogContext);\r\n  const id = propId || contextId || `dialog-${React.useId()}`;\r\n  \r\n  // Register with our modal context using the open prop\r\n  const { zIndex } = useModal(id, !!open, 'dialog');\r\n  \r\n  return (\r\n    <DialogPortal>\r\n      {/* S·ª≠ d·ª•ng overlay ch·ªâ d√†nh cho Dialog */}\r\n      <DialogOverlay style={{ zIndex: zIndex - 1 }} />\r\n      <DialogPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"dialog-content fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg sm:rounded-lg\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <DialogProvider id={id}>\r\n          {children}\r\n          <DialogPrimitive.Close\r\n            aria-label=\"ƒê√≥ng\"\r\n            className=\"absolute right-4 top-4 flex h-9 w-9 items-center justify-center rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">ƒê√≥ng</span>\r\n          </DialogPrimitive.Close>\r\n        </DialogProvider>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n})\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n  DialogProvider,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;;;;;;;AAEA,oCAAoC;AACpC,MAAM,SAAS,0KAAoB;AAEnC,gEAAgE;AAChE,MAAM,8BAAgB,sNAAmB,CAAS;AAElD,wCAAwC;AACxC,MAAM,iBAAiB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IACjF,qBAAO,8OAAC,cAAc,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC7C;AAEA,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAMpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IACtD,gDAAgD;IAChD,MAAM,YAAY,mNAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,OAAO,EAAE,8MAAW,IAAI;IAE3D,sDAAsD;IACtD,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,yIAAQ,EAAC,IAAI,CAAC,CAAC,MAAM;IAExC,qBACE,8OAAC;;0BAEC,8OAAC;gBAAc,OAAO;oBAAE,QAAQ,SAAS;gBAAE;;;;;;0BAC3C,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,kLACA;gBAEF,OAAO;oBAAE;gBAAO;gBACf,GAAG,KAAK;0BAET,cAAA,8OAAC;oBAAe,IAAI;;wBACjB;sCACD,8OAAC,2KAAqB;4BACpB,cAAW;4BACX,WAAU;;8CAEV,8OAAC,iMAAC;oCAAC,WAAU;;;;;;8CACb,8OAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AACA,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 3385, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0 sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,kHAAE,EACX,wIACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,yQACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 3520, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/dropdown-menu.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport {\r\n  CheckIcon,\r\n  ChevronRightIcon,\r\n  DotFilledIcon,\r\n} from \"@radix-ui/react-icons\"\r\nimport { type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\n// Context to pass dropdown ID through the component tree\r\nconst DropdownMenuContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst DropdownMenuProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <DropdownMenuContext.Provider value={id}>{children}</DropdownMenuContext.Provider>;\r\n};\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRightIcon className=\"ml-auto\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content> & {\r\n    hideOverlay?: boolean;\r\n    id?: string;\r\n  }\r\n>(({ className, sideOffset = 4, hideOverlay = false, id: propId, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(DropdownMenuContext);\r\n  const id = propId || contextId || `dropdown-${React.useId()}`;\r\n  \r\n  // Get open state from props\r\n  const [open, setOpen] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (props[\"data-state\"] === \"open\") {\r\n      setOpen(true);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n  }, [props[\"data-state\"]]);\r\n  \r\n  // Register with our modal context\r\n  const { zIndex } = useModal(id, open, 'dropdown');\r\n  \r\n  return (\r\n    <DropdownMenuPrimitive.Portal>\r\n      {/* Kh√¥ng s·ª≠ d·ª•ng overlay cho dropdown */}\r\n      <DropdownMenuPrimitive.Content\r\n        ref={ref}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"min-w-[8rem] overflow-hidden rounded-md border border-border bg-popover p-1 text-popover-foreground shadow-md\",\r\n          \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <DropdownMenuProvider id={id}>\r\n          {props.children}\r\n        </DropdownMenuProvider>\r\n      </DropdownMenuPrimitive.Content>\r\n    </DropdownMenuPrimitive.Portal>\r\n  );\r\n})\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked ?? false}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <CheckIcon className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <DotFilledIcon className=\"h-4 w-4 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n  DropdownMenuProvider,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3774, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/columns.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport type { ReceiptType } from \"./types\";\r\nimport type { ColumnDef } from \"../../../components/data-table/types\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"../../../components/ui/dropdown-menu\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Switch } from \"../../../components/ui/switch\";\r\nimport { MoreHorizontal } from \"lucide-react\";\r\n\r\ninterface ColumnOptions {\r\n  onEdit: (receiptType: ReceiptType) => void;\r\n  onToggleDefault: (receiptType: ReceiptType, isDefault: boolean) => void;\r\n  onToggleStatus: (receiptType: ReceiptType, isActive: boolean) => void;\r\n  onDelete: (systemId: ReceiptType[\"systemId\"]) => void;\r\n}\r\n\r\nexport const getReceiptTypeColumns = ({\r\n  onEdit,\r\n  onToggleDefault,\r\n  onToggleStatus,\r\n  onDelete,\r\n}: ColumnOptions): ColumnDef<ReceiptType>[] => [\r\n  {\r\n    id: \"id\",\r\n    header: \"M√£ lo·∫°i\",\r\n    cell: ({ row }) => <span className=\"font-semibold uppercase\">{row.id}</span>,\r\n    meta: { displayName: \"M√£ lo·∫°i\" },\r\n  },\r\n  {\r\n    id: \"name\",\r\n    header: \"T√™n lo·∫°i\",\r\n    cell: ({ row }) => <span className=\"font-medium\">{row.name}</span>,\r\n    meta: { displayName: \"T√™n lo·∫°i\" },\r\n  },\r\n  {\r\n    id: \"description\",\r\n    header: \"M√¥ t·∫£\",\r\n    cell: ({ row }) => (\r\n      <span className=\"text-sm text-muted-foreground\">{row.description || \"‚Äî\"}</span>\r\n    ),\r\n    meta: { displayName: \"M√¥ t·∫£\" },\r\n  },\r\n  {\r\n    id: \"default\",\r\n    header: \"M·∫∑c ƒë·ªãnh\",\r\n    cell: ({ row }) => (\r\n      <Switch \r\n        checked={row.isDefault ?? false} \r\n        onCheckedChange={(checked) => onToggleDefault(row, checked)}\r\n      />\r\n    ),\r\n    meta: { displayName: \"M·∫∑c ƒë·ªãnh\" },\r\n  },\r\n  {\r\n    id: \"status\",\r\n    header: \"Tr·∫°ng th√°i\",\r\n    cell: ({ row }) => (\r\n      <Switch \r\n        checked={row.isActive} \r\n        onCheckedChange={(checked) => onToggleStatus(row, checked)}\r\n      />\r\n    ),\r\n    meta: { displayName: \"Tr·∫°ng th√°i\" },\r\n  },\r\n  {\r\n    id: \"actions\",\r\n    header: () => <div className=\"text-right\">Thao t√°c</div>,\r\n    cell: ({ row }) => (\r\n      <div className=\"text-right\">\r\n        <DropdownMenu>\r\n          <DropdownMenuTrigger asChild>\r\n            <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n              <span className=\"sr-only\">M·ªü menu</span>\r\n              <MoreHorizontal className=\"h-4 w-4\" />\r\n            </Button>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent align=\"end\">\r\n            <DropdownMenuLabel>Thao t√°c</DropdownMenuLabel>\r\n            <DropdownMenuSeparator />\r\n            <DropdownMenuItem onSelect={() => onEdit(row)}>\r\n              Ch·ªânh s·ª≠a\r\n            </DropdownMenuItem>\r\n            <DropdownMenuItem\r\n              className=\"text-destructive\"\r\n              onSelect={() => onDelete(row.systemId)}\r\n            >\r\n              X√≥a\r\n            </DropdownMenuItem>\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n      </div>\r\n    ),\r\n    meta: { displayName: \"Thao t√°c\" },\r\n    size: 130,\r\n  },\r\n];\r\n"],"names":[],"mappings":";;;;;AAGA;AAQA;AACA;AACA;;;;;;AASO,MAAM,wBAAwB,CAAC,EACpC,MAAM,EACN,eAAe,EACf,cAAc,EACd,QAAQ,EACM,GAA+B;QAC7C;YACE,IAAI;YACJ,QAAQ;YACR,MAAM,CAAC,EAAE,GAAG,EAAE,iBAAK,8OAAC;oBAAK,WAAU;8BAA2B,IAAI,EAAE;;;;;;YACpE,MAAM;gBAAE,aAAa;YAAU;QACjC;QACA;YACE,IAAI;YACJ,QAAQ;YACR,MAAM,CAAC,EAAE,GAAG,EAAE,iBAAK,8OAAC;oBAAK,WAAU;8BAAe,IAAI,IAAI;;;;;;YAC1D,MAAM;gBAAE,aAAa;YAAW;QAClC;QACA;YACE,IAAI;YACJ,QAAQ;YACR,MAAM,CAAC,EAAE,GAAG,EAAE,iBACZ,8OAAC;oBAAK,WAAU;8BAAiC,IAAI,WAAW,IAAI;;;;;;YAEtE,MAAM;gBAAE,aAAa;YAAQ;QAC/B;QACA;YACE,IAAI;YACJ,QAAQ;YACR,MAAM,CAAC,EAAE,GAAG,EAAE,iBACZ,8OAAC,qIAAM;oBACL,SAAS,IAAI,SAAS,IAAI;oBAC1B,iBAAiB,CAAC,UAAY,gBAAgB,KAAK;;;;;;YAGvD,MAAM;gBAAE,aAAa;YAAW;QAClC;QACA;YACE,IAAI;YACJ,QAAQ;YACR,MAAM,CAAC,EAAE,GAAG,EAAE,iBACZ,8OAAC,qIAAM;oBACL,SAAS,IAAI,QAAQ;oBACrB,iBAAiB,CAAC,UAAY,eAAe,KAAK;;;;;;YAGtD,MAAM;gBAAE,aAAa;YAAa;QACpC;QACA;YACE,IAAI;YACJ,QAAQ,kBAAM,8OAAC;oBAAI,WAAU;8BAAa;;;;;;YAC1C,MAAM,CAAC,EAAE,GAAG,EAAE,iBACZ,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,qJAAY;;0CACX,8OAAC,4JAAmB;gCAAC,OAAO;0CAC1B,cAAA,8OAAC,qIAAM;oCAAC,SAAQ;oCAAQ,WAAU;;sDAChC,8OAAC;4CAAK,WAAU;sDAAU;;;;;;sDAC1B,8OAAC,kOAAc;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAG9B,8OAAC,4JAAmB;gCAAC,OAAM;;kDACzB,8OAAC,0JAAiB;kDAAC;;;;;;kDACnB,8OAAC,8JAAqB;;;;;kDACtB,8OAAC,yJAAgB;wCAAC,UAAU,IAAM,OAAO;kDAAM;;;;;;kDAG/C,8OAAC,yJAAgB;wCACf,WAAU;wCACV,UAAU,IAAM,SAAS,IAAI,QAAQ;kDACtC;;;;;;;;;;;;;;;;;;;;;;;YAOT,MAAM;gBAAE,aAAa;YAAW;YAChC,MAAM;QACR;KACD"}},
    {"offset": {"line": 3969, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b [&_tr]:border-border\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"group border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-9 px-4 text-left align-middle font-medium text-foreground [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center whitespace-nowrap\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-4 py-1 align-middle whitespace-nowrap [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center\", \r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,wCAAwC;QAAa,GAAG,KAAK;;;;;;AAE9F,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,yEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mGACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kLACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6IACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 4078, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/settings/SimpleSettingsTable.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"../ui/table\";\r\nimport type { ColumnDef } from \"../data-table/types\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\ninterface SimpleSettingsTableProps<TData extends { systemId: string }> {\r\n  data: TData[];\r\n  columns: ColumnDef<TData>[];\r\n  emptyTitle: string;\r\n  emptyDescription?: string;\r\n  emptyAction?: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport function SimpleSettingsTable<TData extends { systemId: string }>(\r\n  props: SimpleSettingsTableProps<TData>\r\n) {\r\n  const { data, columns, emptyTitle, emptyDescription, emptyAction, className } = props;\r\n\r\n  const renderedColumns = React.useMemo(() => columns.filter(Boolean), [columns]);\r\n  const colSpan = Math.max(renderedColumns.length, 1);\r\n\r\n  const renderHeader = (column: ColumnDef<TData>) => {\r\n    if (typeof column.header === \"function\") {\r\n      return column.header({\r\n        isAllPageRowsSelected: false,\r\n        isSomePageRowsSelected: false,\r\n        onToggleAll: () => {},\r\n        setSorting: () => {},\r\n      });\r\n    }\r\n    return column.header;\r\n  };\r\n\r\n  const renderCell = (column: ColumnDef<TData>, row: TData) =>\r\n    column.cell({\r\n      row,\r\n      isSelected: false,\r\n      isExpanded: false,\r\n      onToggleSelect: () => {},\r\n      onToggleExpand: () => {},\r\n    });\r\n\r\n  return (\r\n    <div className={cn(\"overflow-x-auto\", className)}>\r\n      <Table>\r\n        <TableHeader>\r\n          <TableRow>\r\n            {renderedColumns.map((column) => (\r\n              <TableHead key={column.id} style={column.size ? { width: column.size } : undefined}>\r\n                {renderHeader(column)}\r\n              </TableHead>\r\n            ))}\r\n          </TableRow>\r\n        </TableHeader>\r\n        <TableBody>\r\n          {data.length === 0 ? (\r\n            <TableRow>\r\n              <TableCell colSpan={colSpan} className=\"h-24 text-center\">\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"font-medium text-muted-foreground\">{emptyTitle}</p>\r\n                  {emptyDescription ? (\r\n                    <p className=\"text-sm text-muted-foreground\">{emptyDescription}</p>\r\n                  ) : null}\r\n                  {emptyAction}\r\n                </div>\r\n              </TableCell>\r\n            </TableRow>\r\n          ) : (\r\n            data.map((item) => (\r\n              <TableRow key={item.systemId}>\r\n                {renderedColumns.map((column) => (\r\n                  <TableCell key={column.id}>{renderCell(column, item)}</TableCell>\r\n                ))}\r\n              </TableRow>\r\n            ))\r\n          )}\r\n        </TableBody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AASA;;;;;AAWO,SAAS,oBACd,KAAsC;IAEtC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,gBAAgB,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG;IAEhF,MAAM,kBAAkB,gNAAa,CAAC,IAAM,QAAQ,MAAM,CAAC,UAAU;QAAC;KAAQ;IAC9E,MAAM,UAAU,KAAK,GAAG,CAAC,gBAAgB,MAAM,EAAE;IAEjD,MAAM,eAAe,CAAC;QACpB,IAAI,OAAO,OAAO,MAAM,KAAK,YAAY;YACvC,OAAO,OAAO,MAAM,CAAC;gBACnB,uBAAuB;gBACvB,wBAAwB;gBACxB,aAAa,KAAO;gBACpB,YAAY,KAAO;YACrB;QACF;QACA,OAAO,OAAO,MAAM;IACtB;IAEA,MAAM,aAAa,CAAC,QAA0B,MAC5C,OAAO,IAAI,CAAC;YACV;YACA,YAAY;YACZ,YAAY;YACZ,gBAAgB,KAAO;YACvB,gBAAgB,KAAO;QACzB;IAEF,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,mBAAmB;kBACpC,cAAA,8OAAC,mIAAK;;8BACJ,8OAAC,yIAAW;8BACV,cAAA,8OAAC,sIAAQ;kCACN,gBAAgB,GAAG,CAAC,CAAC,uBACpB,8OAAC,uIAAS;gCAAiB,OAAO,OAAO,IAAI,GAAG;oCAAE,OAAO,OAAO,IAAI;gCAAC,IAAI;0CACtE,aAAa;+BADA,OAAO,EAAE;;;;;;;;;;;;;;;8BAM/B,8OAAC,uIAAS;8BACP,KAAK,MAAM,KAAK,kBACf,8OAAC,sIAAQ;kCACP,cAAA,8OAAC,uIAAS;4BAAC,SAAS;4BAAS,WAAU;sCACrC,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAqC;;;;;;oCACjD,iCACC,8OAAC;wCAAE,WAAU;kDAAiC;;;;;+CAC5C;oCACH;;;;;;;;;;;;;;;;+BAKP,KAAK,GAAG,CAAC,CAAC,qBACR,8OAAC,sIAAQ;sCACN,gBAAgB,GAAG,CAAC,CAAC,uBACpB,8OAAC,uIAAS;8CAAkB,WAAW,QAAQ;mCAA/B,OAAO,EAAE;;;;;2BAFd,KAAK,QAAQ;;;;;;;;;;;;;;;;;;;;;AAW1C"}},
    {"offset": {"line": 4214, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/settings/SettingsActionButton.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Button, type ButtonProps } from '../ui/button';\r\nimport { cn } from '../../lib/utils';\r\n\r\n/**\r\n * SettingsActionButton chu·∫©n h√≥a c√°c n√∫t h√†nh ƒë·ªông c·ªßa module C√†i ƒë·∫∑t\r\n * ƒë·ªÉ lu√¥n tu√¢n th·ªß chi·ªÅu cao h-9 v√† padding ƒë·ªìng nh·∫•t.\r\n */\r\nexport const SettingsActionButton = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, size, children, ...props }, ref) => {\r\n    return (\r\n      <Button\r\n        ref={ref}\r\n        size={size ?? 'sm'}\r\n        className={cn('h-9 px-4 font-medium gap-2', className)}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </Button>\r\n    );\r\n  }\r\n);\r\n\r\nSettingsActionButton.displayName = 'SettingsActionButton';\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAMO,MAAM,qCAAuB,mNAAgB,CAClD,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACxC,qBACE,8OAAC,qIAAM;QACL,KAAK;QACL,MAAM,QAAQ;QACd,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;kBAER;;;;;;AAGP;AAGF,qBAAqB,WAAW,GAAG"}},
    {"offset": {"line": 4244, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/page-content.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Plus } from \"lucide-react\";\r\nimport { asBusinessId, asSystemId, type SystemId } from \"@/lib/id-types\";\r\nimport { useReceiptTypes, useReceiptTypeMutations } from \"./hooks/use-receipt-types\";\r\nimport type { ReceiptType } from \"./types\";\r\nimport { ReceiptTypeForm, type ReceiptTypeFormValues } from \"./form\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"../../../components/ui/dialog\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"../../../components/ui/alert-dialog\";\r\nimport { getReceiptTypeColumns } from \"./columns\";\r\nimport { toast } from \"sonner\";\r\nimport { SimpleSettingsTable } from \"../../../components/settings/SimpleSettingsTable\";\r\nimport { SettingsActionButton } from \"../../../components/settings/SettingsActionButton\";\r\nimport type { RegisterTabActions } from \"../use-tab-action-registry\";\r\n\r\ntype ReceiptTypesPageContentProps = {\r\n  isActive: boolean;\r\n  onRegisterActions: RegisterTabActions;\r\n};\r\n\r\nexport function ReceiptTypesPageContent({ isActive, onRegisterActions }: ReceiptTypesPageContentProps) {\r\n  const { data: receiptTypesData } = useReceiptTypes();\r\n  const data = receiptTypesData?.data || [];\r\n  const { create, update, remove, setDefault } = useReceiptTypeMutations();\r\n  \r\n  const [isFormOpen, setIsFormOpen] = React.useState(false);\r\n  const [editingItem, setEditingItem] = React.useState<ReceiptType | null>(null);\r\n  const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n  const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n\r\n  const handleAddNew = React.useCallback(() => {\r\n    setEditingItem(null);\r\n    setIsFormOpen(true);\r\n  }, []);\r\n  \r\n  const handleEdit = React.useCallback((item: ReceiptType) => {\r\n    setEditingItem(item);\r\n    setIsFormOpen(true);\r\n  }, []);\r\n\r\n  const handleDeleteRequest = React.useCallback((systemId: SystemId) => {\r\n    setIdToDelete(systemId);\r\n    setIsAlertOpen(true);\r\n  }, []);\r\n  \r\n  const handleToggleDefault = React.useCallback((item: ReceiptType, isDefault: boolean) => {\r\n    if (isDefault) {\r\n      // Use setDefault mutation\r\n      setDefault.mutate(item.systemId as string);\r\n      toast.success(`ƒê√£ ƒë·∫∑t \"${item.name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n    } else {\r\n      const other = data.find(d => d.systemId !== item.systemId && d.isActive);\r\n      if (other) {\r\n        setDefault.mutate(other.systemId as string);\r\n        toast.success(`ƒê√£ chuy·ªÉn m·∫∑c ƒë·ªãnh sang \"${other.name}\"`);\r\n      } else {\r\n        toast.error(\"Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt lo·∫°i phi·∫øu thu m·∫∑c ƒë·ªãnh\");\r\n      }\r\n    }\r\n  }, [data, setDefault]);\r\n\r\n  const handleToggleStatus = React.useCallback((item: ReceiptType, isActive: boolean) => {\r\n    update.mutate({ systemId: item.systemId as string, data: { isActive } });\r\n    toast.success(isActive ? `ƒê√£ k√≠ch ho·∫°t \"${item.name}\"` : `ƒê√£ t·∫Øt \"${item.name}\"`);\r\n  }, [update]);\r\n  \r\n  const confirmDelete = () => {\r\n    if (idToDelete) {\r\n      const item = data.find(d => d.systemId === idToDelete);\r\n      remove.mutate(idToDelete as string);\r\n      toast.success(`ƒê√£ x√≥a \"${item?.name}\"`);\r\n    }\r\n    setIsAlertOpen(false);\r\n    setIdToDelete(null);\r\n  };\r\n  \r\n  const handleFormSubmit = (values: ReceiptTypeFormValues) => {\r\n    try {\r\n      const now = new Date().toISOString();\r\n      const normalized = {\r\n        id: asBusinessId(values.id.trim().toUpperCase()),\r\n        name: values.name.trim(),\r\n        description: values.description?.trim() || undefined,\r\n        isBusinessResult: values.isBusinessResult,\r\n        isActive: values.isActive,\r\n        color: values.color?.trim() || undefined,\r\n      } satisfies Omit<ReceiptType, 'systemId' | 'createdAt'>;\r\n\r\n      if (editingItem) {\r\n        update.mutate({ systemId: editingItem.systemId as string, data: normalized });\r\n        toast.success(`ƒê√£ c·∫≠p nh·∫≠t \"${normalized.name}\"`);\r\n      } else {\r\n        create.mutate({\r\n          ...normalized,\r\n          createdAt: now,\r\n        });\r\n        toast.success(`ƒê√£ th√™m \"${normalized.name}\"`);\r\n      }\r\n      setIsFormOpen(false);\r\n    } catch (error) {\r\n      toast.error(\"C√≥ l·ªói x·∫£y ra\", {\r\n        description: error instanceof Error ? error.message : \"L·ªói kh√¥ng x√°c ƒë·ªãnh\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const columns = React.useMemo(\r\n    () =>\r\n      getReceiptTypeColumns({\r\n        onEdit: handleEdit,\r\n        onToggleDefault: handleToggleDefault,\r\n        onToggleStatus: handleToggleStatus,\r\n        onDelete: handleDeleteRequest,\r\n      }),\r\n    [handleEdit, handleToggleDefault, handleToggleStatus, handleDeleteRequest]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (!isActive) {\r\n      return;\r\n    }\r\n\r\n    onRegisterActions([\r\n      <SettingsActionButton key=\"add-receipt-type\" onClick={handleAddNew}>\r\n        <Plus className=\"mr-2 h-4 w-4\" /> Th√™m lo·∫°i phi·∫øu thu\r\n      </SettingsActionButton>,\r\n    ]);\r\n  }, [handleAddNew, isActive, onRegisterActions]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"rounded-md border bg-background\">\r\n        <SimpleSettingsTable\r\n          data={data}\r\n          columns={columns}\r\n          emptyTitle=\"Ch∆∞a c√≥ d·ªØ li·ªáu\"\r\n          emptyDescription=\"Th√™m lo·∫°i phi·∫øu thu ƒë·∫ßu ti√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu c·∫•u h√¨nh\"\r\n          emptyAction={\r\n            <Button size=\"sm\" onClick={handleAddNew}>\r\n              Th√™m lo·∫°i m·ªõi\r\n            </Button>\r\n          }\r\n        />\r\n      </div>\r\n      <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingItem ? 'C·∫≠p nh·∫≠t lo·∫°i phi·∫øu thu' : 'Th√™m lo·∫°i phi·∫øu thu'}</DialogTitle>\r\n          </DialogHeader>\r\n          <ReceiptTypeForm initialData={editingItem} onSubmit={handleFormSubmit} />\r\n          <DialogFooter>\r\n            <Button type=\"button\" variant=\"outline\" className=\"h-9\" onClick={() => setIsFormOpen(false)}>ƒê√≥ng</Button>\r\n            <Button type=\"submit\" form=\"receipt-type-form\" className=\"h-9\">L∆∞u</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>X√°c nh·∫≠n x√≥a?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c. Lo·∫°i phi·∫øu thu s·∫Ω b·ªã x√≥a vƒ©nh vi·ªÖn.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>H·ªßy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDelete}>X√≥a</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4569, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/types/api/payment-types-api.ts"],"sourcesContent":["/**\r\n * Payment Types API\r\n */\r\n\r\nimport type { PaymentType } from '../types';\r\n\r\ninterface ApiResponse<T> {\r\n  data: T;\r\n  pagination?: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nconst API_BASE = '/api/settings/payment-types';\r\n\r\nexport type PaymentTypeFilters = {\r\n  isActive?: boolean;\r\n};\r\n\r\nexport type PaymentTypeCreateInput = Omit<PaymentType, 'systemId' | 'isDefault' | 'updatedAt'>;\r\nexport type PaymentTypeUpdateInput = Partial<Omit<PaymentType, 'systemId'>>;\r\n\r\nexport async function fetchPaymentTypes(filters: PaymentTypeFilters = {}): Promise<ApiResponse<PaymentType[]>> {\r\n  const params = new URLSearchParams();\r\n  if (filters.isActive !== undefined) params.append('isActive', String(filters.isActive));\r\n  \r\n  const url = params.toString() ? `${API_BASE}?${params}` : API_BASE;\r\n  const response = await fetch(url);\r\n  if (!response.ok) throw new Error('Failed to fetch payment types');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchPaymentTypeById(systemId: string): Promise<ApiResponse<PaymentType>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}`);\r\n  if (!response.ok) throw new Error('Failed to fetch payment type');\r\n  return response.json();\r\n}\r\n\r\nexport async function createPaymentType(data: PaymentTypeCreateInput): Promise<ApiResponse<PaymentType>> {\r\n  const response = await fetch(API_BASE, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to create payment type');\r\n  return response.json();\r\n}\r\n\r\nexport async function updatePaymentType(\r\n  systemId: string,\r\n  data: PaymentTypeUpdateInput\r\n): Promise<ApiResponse<PaymentType>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update payment type');\r\n  return response.json();\r\n}\r\n\r\nexport async function deletePaymentType(systemId: string): Promise<ApiResponse<void>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  if (!response.ok) throw new Error('Failed to delete payment type');\r\n  return response.json();\r\n}\r\n\r\nexport async function setDefaultPaymentType(systemId: string): Promise<ApiResponse<PaymentType>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}/set-default`, {\r\n    method: 'PATCH',\r\n  });\r\n  if (!response.ok) throw new Error('Failed to set default payment type');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchActivePaymentTypes(): Promise<ApiResponse<PaymentType[]>> {\r\n  return fetchPaymentTypes({ isActive: true });\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;AAcD,MAAM,WAAW;AASV,eAAe,kBAAkB,UAA8B,CAAC,CAAC;IACtE,MAAM,SAAS,IAAI;IACnB,IAAI,QAAQ,QAAQ,KAAK,WAAW,OAAO,MAAM,CAAC,YAAY,OAAO,QAAQ,QAAQ;IAErF,MAAM,MAAM,OAAO,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,QAAQ,GAAG;IAC1D,MAAM,WAAW,MAAM,MAAM;IAC7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,qBAAqB,QAAgB;IACzD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IACtD,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBAAkB,IAA4B;IAClE,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBACpB,QAAgB,EAChB,IAA4B;IAE5B,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBAAkB,QAAgB;IACtD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;IACV;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,sBAAsB,QAAgB;IAC1D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAClE,QAAQ;IACV;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,OAAO,kBAAkB;QAAE,UAAU;IAAK;AAC5C"}},
    {"offset": {"line": 4646, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/types/hooks/use-payment-types.ts"],"sourcesContent":["/**\r\n * Payment Types React Query Hooks\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchPaymentTypes,\r\n  fetchPaymentTypeById,\r\n  createPaymentType,\r\n  updatePaymentType,\r\n  deletePaymentType,\r\n  setDefaultPaymentType,\r\n  fetchActivePaymentTypes,\r\n  type PaymentTypeFilters,\r\n  type PaymentTypeCreateInput,\r\n  type PaymentTypeUpdateInput,\r\n} from '../api/payment-types-api';\r\n\r\nexport const paymentTypeKeys = {\r\n  all: ['payment-types'] as const,\r\n  lists: () => [...paymentTypeKeys.all, 'list'] as const,\r\n  list: (filters: PaymentTypeFilters) => [...paymentTypeKeys.lists(), filters] as const,\r\n  details: () => [...paymentTypeKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...paymentTypeKeys.details(), id] as const,\r\n  active: () => [...paymentTypeKeys.all, 'active'] as const,\r\n};\r\n\r\nexport function usePaymentTypes(filters: PaymentTypeFilters = {}) {\r\n  return useQuery({\r\n    queryKey: paymentTypeKeys.list(filters),\r\n    queryFn: () => fetchPaymentTypes(filters),\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function usePaymentTypeById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: paymentTypeKeys.detail(systemId!),\r\n    queryFn: () => fetchPaymentTypeById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useActivePaymentTypes() {\r\n  return useQuery({\r\n    queryKey: paymentTypeKeys.active(),\r\n    queryFn: fetchActivePaymentTypes,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function usePaymentTypeMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n  const invalidate = () => queryClient.invalidateQueries({ queryKey: paymentTypeKeys.all });\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: PaymentTypeCreateInput) => createPaymentType(data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: PaymentTypeUpdateInput }) =>\r\n      updatePaymentType(systemId, data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deletePaymentType(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefault = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultPaymentType(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create, update, remove, setDefault,\r\n    isLoading: create.isPending || update.isPending || remove.isPending || setDefault.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;CAEC,GAED;AAAA;AAAA;AACA;;;AAaO,MAAM,kBAAkB;IAC7B,KAAK;QAAC;KAAgB;IACtB,OAAO,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAO;IAC7C,MAAM,CAAC,UAAgC;eAAI,gBAAgB,KAAK;YAAI;SAAQ;IAC5E,SAAS,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAS;IACjD,QAAQ,CAAC,KAAe;eAAI,gBAAgB,OAAO;YAAI;SAAG;IAC1D,QAAQ,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAS;AAClD;AAEO,SAAS,gBAAgB,UAA8B,CAAC,CAAC;IAC9D,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,IAAI,CAAC;QAC/B,SAAS,IAAM,IAAA,gMAAiB,EAAC;QACjC,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS,mBAAmB,QAA4B;IAC7D,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,MAAM,CAAC;QACjC,SAAS,IAAM,IAAA,mMAAoB,EAAC;QACpC,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS;IACd,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,MAAM;QAChC,SAAS,sMAAuB;QAChC,WAAW,OAAO,KAAK;IACzB;AACF;AAOO,SAAS,wBAAwB,UAA6B,CAAC,CAAC;IACrE,MAAM,cAAc,IAAA,wMAAc;IAClC,MAAM,aAAa,IAAM,YAAY,iBAAiB,CAAC;YAAE,UAAU,gBAAgB,GAAG;QAAC;IAEvF,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,OAAiC,IAAA,gMAAiB,EAAC;QAChE,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAsD,GACjF,IAAA,gMAAiB,EAAC,UAAU;QAC9B,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,WAAqB,IAAA,gMAAiB,EAAC;QACpD,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,aAAa,IAAA,6LAAW,EAAC;QAC7B,YAAY,CAAC,WAAqB,IAAA,oMAAqB,EAAC;QACxD,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QAAQ;QAAQ;QAAQ;QACxB,WAAW,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,WAAW,SAAS;IAC7F;AACF"}},
    {"offset": {"line": 4762, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/types/form.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport type { PaymentType } from \"./types\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"../../../../components/ui/form\";\r\nimport { Input } from \"../../../../components/ui/input\";\r\nimport { Textarea } from \"../../../../components/ui/textarea\";\r\nimport { Checkbox } from \"../../../../components/ui/checkbox\";\r\nimport { Label } from \"../../../../components/ui/label\";\r\nimport { Switch } from \"../../../../components/ui/switch\";\r\n\r\nconst formSchema = z.object({\r\n  id: z.string().min(1, \"M√£ lo·∫°i l√† b·∫Øt bu·ªôc\"),\r\n  name: z.string().min(1, \"T√™n lo·∫°i l√† b·∫Øt bu·ªôc\").max(100, \"T√™n kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100 k√Ω t·ª±\"),\r\n  description: z.string().optional(),\r\n  isBusinessResult: z.boolean(),\r\n  isActive: z.boolean(),\r\n  color: z.string().optional(),\r\n});\r\n\r\nexport type PaymentTypeFormValues = z.infer<typeof formSchema>;\r\n\r\ntype FormProps = {\r\n  initialData?: PaymentType | null;\r\n  onSubmit: (values: PaymentTypeFormValues) => void;\r\n};\r\n\r\nexport function PaymentTypeForm({ initialData, onSubmit }: FormProps) {\r\n  const defaultValues: PaymentTypeFormValues = React.useMemo(() => ({\r\n    id: \"\",\r\n    name: \"\",\r\n    description: \"\",\r\n    isBusinessResult: true,\r\n    isActive: true,\r\n    color: '#0ea5e9',\r\n  }), []);\r\n\r\n  const form = useForm<PaymentTypeFormValues>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: initialData\r\n      ? {\r\n          id: initialData.id,\r\n          name: initialData.name,\r\n          description: initialData.description ?? '',\r\n          isBusinessResult: initialData.isBusinessResult,\r\n          isActive: initialData.isActive,\r\n          color: initialData.color ?? '',\r\n        }\r\n      : defaultValues,\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (initialData) {\r\n      form.reset({\r\n        id: initialData.id,\r\n        name: initialData.name,\r\n        description: initialData.description ?? '',\r\n        isBusinessResult: initialData.isBusinessResult,\r\n        isActive: initialData.isActive,\r\n        color: initialData.color ?? '',\r\n      });\r\n    } else {\r\n      form.reset(defaultValues);\r\n    }\r\n  }, [form, initialData, defaultValues]);\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form id=\"payment-type-form\" onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 pt-4 max-h-[70vh] overflow-y-auto px-1\">\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <FormField control={form.control} name=\"name\" render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>T√™n <span className=\"text-destructive\">*</span></FormLabel>\r\n              <FormControl>\r\n                <Input {...field} value={field.value ?? ''} className=\"h-9\" />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )} />\r\n          <FormField control={form.control} name=\"id\" render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>M√£</FormLabel>\r\n              <FormControl>\r\n                <Input\r\n                  {...field}\r\n                  value={field.value ?? ''}\r\n                  className=\"h-9 uppercase\"\r\n                  onChange={(event) => field.onChange(event.target.value.toUpperCase())}\r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )} />\r\n        </div>\r\n        <FormField control={form.control} name=\"description\" render={({ field }) => (\r\n          <FormItem>\r\n            <FormLabel>M√¥ t·∫£</FormLabel>\r\n            <FormControl>\r\n              <Textarea {...field} value={field.value ?? ''} rows={3} />\r\n            </FormControl>\r\n            <FormMessage />\r\n          </FormItem>\r\n        )} />\r\n\r\n        <FormField control={form.control} name=\"color\" render={({ field }) => (\r\n          <FormItem>\r\n            <FormLabel>M√†u hi·ªÉn th·ªã</FormLabel>\r\n            <FormControl>\r\n              <Input {...field} value={field.value ?? ''} placeholder=\"#0ea5e9\" />\r\n            </FormControl>\r\n            <FormDescription>D√πng ƒë·ªÉ ph√¢n bi·ªát tr√™n bi·ªÉu ƒë·ªì/b√°o c√°o</FormDescription>\r\n            <FormMessage />\r\n          </FormItem>\r\n        )} />\r\n        \r\n        <FormField control={form.control} name=\"isBusinessResult\" render={({ field }) => (\r\n          <FormItem className=\"flex items-center space-x-2\">\r\n            <FormControl>\r\n              <Checkbox\r\n                checked={field.value}\r\n                onCheckedChange={(checked) => field.onChange(Boolean(checked))}\r\n              />\r\n            </FormControl>\r\n            <Label>H·∫°ch to√°n k·∫øt qu·∫£ kinh doanh</Label>\r\n          </FormItem>\r\n        )} />\r\n        \r\n        <FormField control={form.control} name=\"isActive\" render={({ field }) => (\r\n          <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-3\">\r\n            <div className=\"space-y-0.5\">\r\n              <FormLabel>Tr·∫°ng th√°i ho·∫°t ƒë·ªông</FormLabel>\r\n              <FormDescription>Cho ph√©p s·ª≠ d·ª•ng lo·∫°i phi·∫øu chi n√†y</FormDescription>\r\n            </div>\r\n            <FormControl>\r\n              <Switch checked={field.value} onCheckedChange={field.onChange} />\r\n            </FormControl>\r\n          </FormItem>\r\n        )} />\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5148, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/types/page-content.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Plus, MoreHorizontal } from \"lucide-react\";\r\nimport { asBusinessId, asSystemId, type SystemId } from \"@/lib/id-types\";\r\nimport { usePaymentTypes, usePaymentTypeMutations } from \"./hooks/use-payment-types\";\r\nimport type { PaymentType } from \"./types\";\r\nimport { PaymentTypeForm, type PaymentTypeFormValues } from \"./form\";\r\nimport { Button } from \"../../../../components/ui/button\";\r\nimport { Switch } from \"../../../../components/ui/switch\";\r\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle } from \"../../../../components/ui/dialog\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"../../../../components/ui/alert-dialog\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"../../../../components/ui/table\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from \"../../../../components/ui/dropdown-menu\";\r\nimport { toast } from \"sonner\";\r\nimport { SettingsActionButton } from \"../../../../components/settings/SettingsActionButton\";\r\nimport type { RegisterTabActions } from \"../../use-tab-action-registry\";\r\n\r\ntype PaymentTypesPageContentProps = {\r\n  isActive: boolean;\r\n  onRegisterActions: RegisterTabActions;\r\n};\r\n\r\nexport function PaymentTypesPageContent({ isActive, onRegisterActions }: PaymentTypesPageContentProps) {\r\n  const { data: paymentTypesData } = usePaymentTypes();\r\n  const data = paymentTypesData?.data || [];\r\n  const { create, update, remove, setDefault } = usePaymentTypeMutations();\r\n  \r\n  const [isFormOpen, setIsFormOpen] = React.useState(false);\r\n  const [editingItem, setEditingItem] = React.useState<PaymentType | null>(null);\r\n  const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n  const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n\r\n  const handleAddNew = React.useCallback(() => {\r\n    setEditingItem(null);\r\n    setIsFormOpen(true);\r\n  }, []);\r\n\r\n  const handleEdit = (item: PaymentType) => { setEditingItem(item); setIsFormOpen(true); };\r\n  const handleDeleteRequest = (systemId: SystemId) => { \r\n    setIdToDelete(systemId);\r\n    setIsAlertOpen(true);\r\n  };\r\n  \r\n  const handleToggleDefault = (item: PaymentType, isDefault: boolean) => {\r\n    if (isDefault) {\r\n      // Use setDefault mutation\r\n      setDefault.mutate(item.systemId as string);\r\n      toast.success(`ƒê√£ ƒë·∫∑t \"${item.name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n    } else {\r\n      const other = data.find(d => d.systemId !== item.systemId && d.isActive);\r\n      if (other) {\r\n        setDefault.mutate(other.systemId as string);\r\n        toast.success(`ƒê√£ chuy·ªÉn m·∫∑c ƒë·ªãnh sang \"${other.name}\"`);\r\n      } else {\r\n        toast.error(\"Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt lo·∫°i phi·∫øu chi m·∫∑c ƒë·ªãnh\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleStatus = (item: PaymentType, isActive: boolean) => {\r\n    update.mutate({ systemId: item.systemId as string, data: { isActive } });\r\n    toast.success(isActive ? `ƒê√£ k√≠ch ho·∫°t \"${item.name}\"` : `ƒê√£ t·∫Øt \"${item.name}\"`);\r\n  };\r\n  \r\n  const confirmDelete = () => {\r\n    if (idToDelete) {\r\n      const item = data.find(d => d.systemId === idToDelete);\r\n      remove.mutate(idToDelete as string);\r\n      toast.success(`ƒê√£ x√≥a \"${item?.name}\"`);\r\n    }\r\n    setIsAlertOpen(false);\r\n    setIdToDelete(null);\r\n  };\r\n  \r\n  const handleFormSubmit = (values: PaymentTypeFormValues) => {\r\n    try {\r\n      const now = new Date().toISOString();\r\n      const normalized = {\r\n        id: asBusinessId(values.id.trim().toUpperCase()),\r\n        name: values.name.trim(),\r\n        description: values.description?.trim() || undefined,\r\n        isBusinessResult: values.isBusinessResult,\r\n        isActive: values.isActive,\r\n        color: values.color?.trim() || undefined,\r\n      } satisfies Omit<PaymentType, 'systemId' | 'createdAt'>;\r\n\r\n      if (editingItem) {\r\n        update.mutate({ systemId: editingItem.systemId as string, data: normalized });\r\n        toast.success(\"C·∫≠p nh·∫≠t th√†nh c√¥ng\");\r\n      } else {\r\n        create.mutate({\r\n          ...normalized,\r\n          createdAt: now,\r\n        });\r\n        toast.success(\"Th√™m m·ªõi th√†nh c√¥ng\");\r\n      }\r\n      setIsFormOpen(false);\r\n    } catch (error) {\r\n      toast.error(\"C√≥ l·ªói x·∫£y ra\", {\r\n        description: error instanceof Error ? error.message : \"L·ªói kh√¥ng x√°c ƒë·ªãnh\",\r\n      });\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!isActive) {\r\n      return;\r\n    }\r\n\r\n    onRegisterActions([\r\n      <SettingsActionButton key=\"add-payment-type\" onClick={handleAddNew}>\r\n        <Plus className=\"mr-2 h-4 w-4\" /> Th√™m lo·∫°i phi·∫øu chi\r\n      </SettingsActionButton>,\r\n    ]);\r\n  }, [handleAddNew, isActive, onRegisterActions]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n\r\n      <div className=\"rounded-md border\">\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>M√£ lo·∫°i</TableHead>\r\n              <TableHead>T√™n lo·∫°i</TableHead>\r\n              <TableHead>M√¥ t·∫£</TableHead>\r\n              <TableHead>M·∫∑c ƒë·ªãnh</TableHead>\r\n              <TableHead>Tr·∫°ng th√°i</TableHead>\r\n              <TableHead className=\"text-right\">Thao t√°c</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {data.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell colSpan={6} className=\"h-24 text-center\">\r\n                  Ch∆∞a c√≥ d·ªØ li·ªáu\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              data.map((item) => (\r\n                <TableRow key={item.systemId}>\r\n                  <TableCell className=\"font-medium\">{item.id}</TableCell>\r\n                  <TableCell className=\"font-medium\">{item.name}</TableCell>\r\n                  <TableCell className=\"text-sm text-muted-foreground\">\r\n                    {item.description || \"‚Äî\"}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Switch \r\n                      checked={item.isDefault ?? false} \r\n                      onCheckedChange={(checked) => handleToggleDefault(item, checked)}\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Switch \r\n                      checked={item.isActive} \r\n                      onCheckedChange={(checked) => handleToggleStatus(item, checked)}\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <DropdownMenu>\r\n                      <DropdownMenuTrigger asChild>\r\n                        <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                          <span className=\"sr-only\">M·ªü menu</span>\r\n                          <MoreHorizontal className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </DropdownMenuTrigger>\r\n                      <DropdownMenuContent align=\"end\">\r\n                        <DropdownMenuLabel>Thao t√°c</DropdownMenuLabel>\r\n                        <DropdownMenuSeparator />\r\n                        <DropdownMenuItem onClick={() => handleEdit(item)}>\r\n                          Ch·ªânh s·ª≠a\r\n                        </DropdownMenuItem>\r\n                        <DropdownMenuItem\r\n                          onClick={() => handleDeleteRequest(item.systemId)}\r\n                          className=\"text-destructive\"\r\n                        >\r\n                          X√≥a\r\n                        </DropdownMenuItem>\r\n                      </DropdownMenuContent>\r\n                    </DropdownMenu>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </div>      <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingItem ? 'C·∫≠p nh·∫≠t lo·∫°i phi·∫øu chi' : 'Th√™m lo·∫°i phi·∫øu chi'}</DialogTitle>\r\n          </DialogHeader>\r\n          <PaymentTypeForm initialData={editingItem} onSubmit={handleFormSubmit} />\r\n          <DialogFooter>\r\n            <Button type=\"button\" variant=\"outline\" className=\"h-9\" onClick={() => setIsFormOpen(false)}>ƒê√≥ng</Button>\r\n            <Button type=\"submit\" form=\"payment-type-form\" className=\"h-9\">L∆∞u</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>X√°c nh·∫≠n x√≥a?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c. Lo·∫°i phi·∫øu chi s·∫Ω b·ªã x√≥a vƒ©nh vi·ªÖn.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>H·ªßy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDelete}>X√≥a</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5672, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/methods/api/payment-methods-api.ts"],"sourcesContent":["/**\r\n * Payment Methods API\r\n */\r\n\r\nimport type { PaymentMethod } from '../types';\r\n\r\ninterface ApiResponse<T> {\r\n  data: T;\r\n  pagination?: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nconst API_BASE = '/api/settings/payment-methods';\r\n\r\nexport type PaymentMethodFilters = {\r\n  isActive?: boolean;\r\n};\r\n\r\nexport type PaymentMethodCreateInput = Omit<PaymentMethod, 'systemId' | 'isDefault' | 'createdAt' | 'updatedAt'>;\r\nexport type PaymentMethodUpdateInput = Partial<PaymentMethodCreateInput>;\r\n\r\nexport async function fetchPaymentMethods(filters: PaymentMethodFilters = {}): Promise<ApiResponse<PaymentMethod[]>> {\r\n  const params = new URLSearchParams();\r\n  if (filters.isActive !== undefined) params.append('isActive', String(filters.isActive));\r\n  \r\n  const url = params.toString() ? `${API_BASE}?${params}` : API_BASE;\r\n  const response = await fetch(url);\r\n  if (!response.ok) throw new Error('Failed to fetch payment methods');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchPaymentMethodById(systemId: string): Promise<ApiResponse<PaymentMethod>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}`);\r\n  if (!response.ok) throw new Error('Failed to fetch payment method');\r\n  return response.json();\r\n}\r\n\r\nexport async function createPaymentMethod(data: PaymentMethodCreateInput): Promise<ApiResponse<PaymentMethod>> {\r\n  const response = await fetch(API_BASE, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to create payment method');\r\n  return response.json();\r\n}\r\n\r\nexport async function updatePaymentMethod(\r\n  systemId: string,\r\n  data: PaymentMethodUpdateInput\r\n): Promise<ApiResponse<PaymentMethod>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update payment method');\r\n  return response.json();\r\n}\r\n\r\nexport async function deletePaymentMethod(systemId: string): Promise<ApiResponse<void>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  if (!response.ok) throw new Error('Failed to delete payment method');\r\n  return response.json();\r\n}\r\n\r\nexport async function setDefaultPaymentMethod(systemId: string): Promise<ApiResponse<PaymentMethod>> {\r\n  const response = await fetch(`${API_BASE}/${systemId}/set-default`, {\r\n    method: 'PATCH',\r\n  });\r\n  if (!response.ok) throw new Error('Failed to set default payment method');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchActivePaymentMethods(): Promise<ApiResponse<PaymentMethod[]>> {\r\n  return fetchPaymentMethods({ isActive: true });\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;AAcD,MAAM,WAAW;AASV,eAAe,oBAAoB,UAAgC,CAAC,CAAC;IAC1E,MAAM,SAAS,IAAI;IACnB,IAAI,QAAQ,QAAQ,KAAK,WAAW,OAAO,MAAM,CAAC,YAAY,OAAO,QAAQ,QAAQ;IAErF,MAAM,MAAM,OAAO,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,QAAQ,GAAG;IAC1D,MAAM,WAAW,MAAM,MAAM;IAC7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,uBAAuB,QAAgB;IAC3D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IACtD,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,oBAAoB,IAA8B;IACtE,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,oBACpB,QAAgB,EAChB,IAA8B;IAE9B,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,oBAAoB,QAAgB;IACxD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;IACV;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,wBAAwB,QAAgB;IAC5D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAClE,QAAQ;IACV;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,OAAO,oBAAoB;QAAE,UAAU;IAAK;AAC9C"}},
    {"offset": {"line": 5749, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/methods/hooks/use-payment-methods.ts"],"sourcesContent":["/**\r\n * Payment Methods React Query Hooks\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchPaymentMethods,\r\n  fetchPaymentMethodById,\r\n  createPaymentMethod,\r\n  updatePaymentMethod,\r\n  deletePaymentMethod,\r\n  setDefaultPaymentMethod,\r\n  fetchActivePaymentMethods,\r\n  type PaymentMethodFilters,\r\n  type PaymentMethodCreateInput,\r\n  type PaymentMethodUpdateInput,\r\n} from '../api/payment-methods-api';\r\n\r\nexport const paymentMethodKeys = {\r\n  all: ['payment-methods'] as const,\r\n  lists: () => [...paymentMethodKeys.all, 'list'] as const,\r\n  list: (filters: PaymentMethodFilters) => [...paymentMethodKeys.lists(), filters] as const,\r\n  details: () => [...paymentMethodKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...paymentMethodKeys.details(), id] as const,\r\n  active: () => [...paymentMethodKeys.all, 'active'] as const,\r\n};\r\n\r\nexport function usePaymentMethods(filters: PaymentMethodFilters = {}) {\r\n  return useQuery({\r\n    queryKey: paymentMethodKeys.list(filters),\r\n    queryFn: () => fetchPaymentMethods(filters),\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function usePaymentMethodById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: paymentMethodKeys.detail(systemId!),\r\n    queryFn: () => fetchPaymentMethodById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useActivePaymentMethods() {\r\n  return useQuery({\r\n    queryKey: paymentMethodKeys.active(),\r\n    queryFn: fetchActivePaymentMethods,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function usePaymentMethodMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n  const invalidate = () => queryClient.invalidateQueries({ queryKey: paymentMethodKeys.all });\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: PaymentMethodCreateInput) => createPaymentMethod(data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: PaymentMethodUpdateInput }) =>\r\n      updatePaymentMethod(systemId, data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deletePaymentMethod(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefault = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultPaymentMethod(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create, update, remove, setDefault,\r\n    isLoading: create.isPending || update.isPending || remove.isPending || setDefault.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;CAEC,GAED;AAAA;AAAA;AACA;;;AAaO,MAAM,oBAAoB;IAC/B,KAAK;QAAC;KAAkB;IACxB,OAAO,IAAM;eAAI,kBAAkB,GAAG;YAAE;SAAO;IAC/C,MAAM,CAAC,UAAkC;eAAI,kBAAkB,KAAK;YAAI;SAAQ;IAChF,SAAS,IAAM;eAAI,kBAAkB,GAAG;YAAE;SAAS;IACnD,QAAQ,CAAC,KAAe;eAAI,kBAAkB,OAAO;YAAI;SAAG;IAC5D,QAAQ,IAAM;eAAI,kBAAkB,GAAG;YAAE;SAAS;AACpD;AAEO,SAAS,kBAAkB,UAAgC,CAAC,CAAC;IAClE,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,kBAAkB,IAAI,CAAC;QACjC,SAAS,IAAM,IAAA,sMAAmB,EAAC;QACnC,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS,qBAAqB,QAA4B;IAC/D,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,kBAAkB,MAAM,CAAC;QACnC,SAAS,IAAM,IAAA,yMAAsB,EAAC;QACtC,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS;IACd,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,kBAAkB,MAAM;QAClC,SAAS,4MAAyB;QAClC,WAAW,OAAO,KAAK;IACzB;AACF;AAOO,SAAS,0BAA0B,UAA6B,CAAC,CAAC;IACvE,MAAM,cAAc,IAAA,wMAAc;IAClC,MAAM,aAAa,IAAM,YAAY,iBAAiB,CAAC;YAAE,UAAU,kBAAkB,GAAG;QAAC;IAEzF,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,OAAmC,IAAA,sMAAmB,EAAC;QACpE,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAwD,GACnF,IAAA,sMAAmB,EAAC,UAAU;QAChC,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,WAAqB,IAAA,sMAAmB,EAAC;QACtD,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,aAAa,IAAA,6LAAW,EAAC;QAC7B,YAAY,CAAC,WAAqB,IAAA,0MAAuB,EAAC;QAC1D,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QAAQ;QAAQ;QAAQ;QACxB,WAAW,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,WAAW,SAAS;IAC7F;AACF"}},
    {"offset": {"line": 5865, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/methods/form.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport type { PaymentMethod } from \"./types\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"../../../../components/ui/form\";\r\nimport { Input } from \"../../../../components/ui/input\";\r\nimport { Switch } from \"../../../../components/ui/switch\";\r\n\r\nconst formSchema = z.object({\r\n  name: z.string().min(1, \"T√™n h√¨nh th·ª©c l√† b·∫Øt bu·ªôc\").max(100, \"T√™n kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100 k√Ω t·ª±\"),\r\n  isActive: z.boolean(),\r\n  description: z.string().optional(),\r\n  accountNumber: z.string().optional(),\r\n  accountName: z.string().optional(),\r\n  bankName: z.string().optional(),\r\n  color: z.string().optional(),\r\n  icon: z.string().optional(),\r\n});\r\n\r\nexport type PaymentMethodFormValues = z.infer<typeof formSchema>;\r\n\r\ntype FormProps = {\r\n  initialData?: PaymentMethod | null;\r\n  onSubmit: (values: PaymentMethodFormValues) => void;\r\n};\r\n\r\nexport function PaymentMethodForm({ initialData, onSubmit }: FormProps) {\r\n  const form = useForm<PaymentMethodFormValues>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: initialData\r\n      ? {\r\n          name: initialData.name,\r\n          isActive: initialData.isActive,\r\n          description: initialData.description ?? '',\r\n          accountNumber: initialData.accountNumber ?? '',\r\n          accountName: initialData.accountName ?? '',\r\n          bankName: initialData.bankName ?? '',\r\n          color: initialData.color ?? '',\r\n          icon: initialData.icon ?? '',\r\n        }\r\n      : {\r\n          name: '',\r\n          isActive: true,\r\n          description: '',\r\n          accountNumber: '',\r\n          accountName: '',\r\n          bankName: '',\r\n          color: '#10b981',\r\n          icon: '',\r\n        },\r\n  });\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form id=\"payment-method-form\" onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 pt-4\">\r\n        <FormField control={form.control} name=\"name\" render={({ field }) => (\r\n          <FormItem><FormLabel>T√™n h√¨nh th·ª©c thanh to√°n <span className=\"text-destructive\">*</span></FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n        )} />\r\n        \r\n        <FormField control={form.control} name=\"description\" render={({ field }) => (\r\n          <FormItem><FormLabel>M√¥ t·∫£</FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n        )} />\r\n\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <FormField control={form.control} name=\"color\" render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>M√†u hi·ªÉn th·ªã</FormLabel>\r\n              <FormControl>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Input\r\n                    type=\"color\"\r\n                    value={field.value || '#10b981'}\r\n                    onChange={(event) => field.onChange(event.target.value)}\r\n                    className=\"h-9 w-14 p-1\"\r\n                  />\r\n                  <Input\r\n                    value={field.value || ''}\r\n                    onChange={(event) => field.onChange(event.target.value)}\r\n                    placeholder=\"#10b981\"\r\n                  />\r\n                </div>\r\n              </FormControl>\r\n              <FormDescription>Hi·ªÉn th·ªã n·ªÅn icon trong b·∫£ng</FormDescription>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )} />\r\n\r\n          <FormField control={form.control} name=\"icon\" render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>T√™n icon</FormLabel>\r\n              <FormControl>\r\n                <Input {...field} value={field.value ?? ''} placeholder=\"VD: Wallet, CreditCard\" />\r\n              </FormControl>\r\n              <FormDescription>Tr√πng t√™n icon c·ªßa Lucide</FormDescription>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )} />\r\n        </div>\r\n        \r\n        {/* Bank account fields (for transfer methods) */}\r\n        <div className=\"space-y-4 p-4 border border-border rounded-lg bg-muted/50\">\r\n          <p className=\"text-sm font-medium text-muted-foreground\">Th√¥ng tin t√†i kho·∫£n (d√†nh cho chuy·ªÉn kho·∫£n)</p>\r\n          \r\n          <FormField control={form.control} name=\"accountNumber\" render={({ field }) => (\r\n            <FormItem><FormLabel>S·ªë t√†i kho·∫£n</FormLabel><FormControl><Input {...field} value={field.value ?? ''} placeholder=\"VD: 1234567890\" /></FormControl><FormMessage /></FormItem>\r\n          )} />\r\n          \r\n          <FormField control={form.control} name=\"accountName\" render={({ field }) => (\r\n            <FormItem><FormLabel>T√™n ch·ªß t√†i kho·∫£n</FormLabel><FormControl><Input {...field} value={field.value ?? ''} placeholder=\"VD: NGUYEN VAN A\" /></FormControl><FormMessage /></FormItem>\r\n          )} />\r\n          \r\n          <FormField control={form.control} name=\"bankName\" render={({ field }) => (\r\n            <FormItem><FormLabel>T√™n ng√¢n h√†ng</FormLabel><FormControl><Input {...field} value={field.value ?? ''} placeholder=\"VD: Vietcombank - CN HCM\" /></FormControl><FormMessage /></FormItem>\r\n          )} />\r\n        </div>\r\n        \r\n        <FormField control={form.control} name=\"isActive\" render={({ field }) => (\r\n          <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-3\">\r\n            <div className=\"space-y-0.5\">\r\n              <FormLabel>Tr·∫°ng th√°i ho·∫°t ƒë·ªông</FormLabel>\r\n              <FormDescription>Cho ph√©p s·ª≠ d·ª•ng h√¨nh th·ª©c thanh to√°n n√†y</FormDescription>\r\n            </div>\r\n            <FormControl>\r\n              <Switch checked={field.value} onCheckedChange={field.onChange} />\r\n            </FormControl>\r\n          </FormItem>\r\n        )} />\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6361, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/methods/page-content.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Plus, MoreHorizontal } from \"lucide-react\";\r\nimport { usePaymentMethods, usePaymentMethodMutations } from \"./hooks/use-payment-methods\";\r\nimport type { PaymentMethod } from \"./types\";\r\nimport { PaymentMethodForm, type PaymentMethodFormValues } from \"./form\";\r\nimport { Button } from \"../../../../components/ui/button\";\r\nimport { Switch } from \"../../../../components/ui/switch\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"../../../../components/ui/dialog\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"../../../../components/ui/alert-dialog\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"../../../../components/ui/dropdown-menu\";\r\nimport { toast } from \"sonner\";\r\nimport { asBusinessId, type SystemId } from \"@/lib/id-types\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"../../../../components/ui/table\";\r\nimport { SettingsActionButton } from \"../../../../components/settings/SettingsActionButton\";\r\nimport type { RegisterTabActions } from \"../../use-tab-action-registry\";\r\n\r\ntype PaymentMethodsPageContentProps = {\r\n  isActive: boolean;\r\n  onRegisterActions: RegisterTabActions;\r\n};\r\n\r\nexport function PaymentMethodsPageContent({ isActive, onRegisterActions }: PaymentMethodsPageContentProps) {\r\n  const { data: paymentMethodsData } = usePaymentMethods();\r\n  const data = paymentMethodsData?.data || [];\r\n  const { create, update, remove, setDefault } = usePaymentMethodMutations();\r\n  \r\n  const [isFormOpen, setIsFormOpen] = React.useState(false);\r\n  const [editingItem, setEditingItem] = React.useState<PaymentMethod | null>(null);\r\n  const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n  const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n  \r\n  const handleAddNew = React.useCallback(() => {\r\n    setEditingItem(null);\r\n    setIsFormOpen(true);\r\n  }, []);\r\n\r\n  const handleEdit = React.useCallback((item: PaymentMethod) => {\r\n    setEditingItem(item);\r\n    setIsFormOpen(true);\r\n  }, []);\r\n\r\n  const handleDeleteRequest = React.useCallback((systemId: SystemId) => {\r\n    setIdToDelete(systemId);\r\n    setIsAlertOpen(true);\r\n  }, []);\r\n  \r\n  const handleToggleStatus = React.useCallback((item: PaymentMethod, isActive: boolean) => {\r\n    update.mutate({ systemId: item.systemId as string, data: { isActive } });\r\n    toast.success(isActive ? `ƒê√£ k√≠ch ho·∫°t \"${item.name}\"` : `ƒê√£ t·∫Øt \"${item.name}\"`);\r\n  }, [update]);\r\n  \r\n  const confirmDelete = () => {\r\n    if (idToDelete) {\r\n      const method = data.find(m => m.systemId === idToDelete);\r\n      remove.mutate(idToDelete as string);\r\n      toast.success(`ƒê√£ x√≥a \"${method?.name}\"`);\r\n    }\r\n    setIsAlertOpen(false);\r\n    setIdToDelete(null);\r\n  };\r\n  \r\n  const handleToggleDefault = React.useCallback((item: PaymentMethod, checked: boolean) => {\r\n    if (checked) {\r\n      setDefault.mutate(item.systemId as string);\r\n      toast.success(`ƒê√£ ƒë·∫∑t \"${item.name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n    } else {\r\n      // Find another method to set as default\r\n      const otherMethods = data.filter(m => m.systemId !== item.systemId);\r\n      if (otherMethods.length > 0) {\r\n        setDefault.mutate(otherMethods[0].systemId as string);\r\n        toast.success(`ƒê√£ ƒë·∫∑t \"${otherMethods[0].name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n      } else {\r\n        toast.error('Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt ph∆∞∆°ng th·ª©c thanh to√°n m·∫∑c ƒë·ªãnh');\r\n      }\r\n    }\r\n  }, [data, setDefault]);\r\n  \r\n  const handleSetDefault = React.useCallback((systemId: SystemId) => {\r\n    const method = data.find(m => m.systemId === systemId);\r\n    setDefault.mutate(systemId as string);\r\n    toast.success(`ƒê√£ ƒë·∫∑t \"${method?.name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n  }, [data, setDefault]);\r\n  \r\n  const normalizeValues = (\r\n    values: PaymentMethodFormValues,\r\n    fallbackId?: string\r\n  ): Omit<PaymentMethod, 'systemId' | 'isDefault'> => {\r\n    const candidateId = fallbackId\r\n      || values.name.trim().toUpperCase().replace(/\\s+/g, '_')\r\n      || `PM_${Date.now()}`;\r\n\r\n    return {\r\n      id: asBusinessId(candidateId),\r\n      name: values.name.trim(),\r\n      isActive: values.isActive,\r\n      color: values.color?.trim() || undefined,\r\n      icon: values.icon?.trim() || undefined,\r\n      description: values.description?.trim() || undefined,\r\n      accountNumber: values.accountNumber?.trim() || undefined,\r\n      accountName: values.accountName?.trim() || undefined,\r\n      bankName: values.bankName?.trim() || undefined,\r\n    };\r\n  };\r\n\r\n  const handleFormSubmit = (values: PaymentMethodFormValues) => {\r\n    try {\r\n      const payload = normalizeValues(values, editingItem?.id);\r\n      if (editingItem) {\r\n        update.mutate({ systemId: editingItem.systemId as string, data: payload });\r\n        toast.success(\"C·∫≠p nh·∫≠t th√†nh c√¥ng\");\r\n      } else {\r\n        create.mutate(payload);\r\n        toast.success(\"Th√™m m·ªõi th√†nh c√¥ng\");\r\n      }\r\n      setIsFormOpen(false);\r\n    } catch (error) {\r\n      toast.error(\"C√≥ l·ªói x·∫£y ra\", {\r\n        description: error instanceof Error ? error.message : \"L·ªói kh√¥ng x√°c ƒë·ªãnh\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const sortedMethods = React.useMemo(() => {\r\n    return [...data].sort((a, b) => a.name.localeCompare(b.name));\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!isActive) {\r\n      return;\r\n    }\r\n\r\n    onRegisterActions([\r\n      <SettingsActionButton key=\"add-payment-method\" onClick={handleAddNew}>\r\n        <Plus className=\"mr-2 h-4 w-4\" /> Th√™m h√¨nh th·ª©c thanh to√°n\r\n      </SettingsActionButton>,\r\n    ]);\r\n  }, [handleAddNew, isActive, onRegisterActions]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"rounded-md border bg-card\">\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead className=\"w-[110px]\">M√£</TableHead>\r\n              <TableHead>T√™n & m√¥ t·∫£</TableHead>\r\n              <TableHead className=\"w-[220px]\">Th√¥ng tin t√†i kho·∫£n</TableHead>\r\n              <TableHead className=\"w-[100px]\">M·∫∑c ƒë·ªãnh</TableHead>\r\n              <TableHead className=\"w-[100px]\">Tr·∫°ng th√°i</TableHead>\r\n              <TableHead className=\"w-[80px] text-right\">Thao t√°c</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {sortedMethods.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell colSpan={6} className=\"h-24 text-center text-sm text-muted-foreground\">\r\n                  H√£y th√™m h√¨nh th·ª©c thanh to√°n ƒë·∫ßu ti√™n\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              sortedMethods.map((method) => {\r\n                return (\r\n                  <TableRow key={method.systemId}>\r\n                    <TableCell className=\"font-mono text-xs uppercase text-muted-foreground\">\r\n                      {method.id ?? '‚Äî'}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <div>\r\n                          <p className=\"font-medium\">{method.name}</p>\r\n                          {method.description ? (\r\n                            <p className=\"text-sm text-muted-foreground\">{method.description}</p>\r\n                          ) : null}\r\n                        </div>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {method.accountName || method.accountNumber || method.bankName ? (\r\n                        <div className=\"text-sm leading-relaxed\">\r\n                          {method.accountName && <p className=\"font-medium\">{method.accountName}</p>}\r\n                          {method.accountNumber && (\r\n                            <p className=\"font-mono text-xs text-muted-foreground\">{method.accountNumber}</p>\r\n                          )}\r\n                          {method.bankName && <p className=\"text-muted-foreground\">{method.bankName}</p>}\r\n                        </div>\r\n                      ) : (\r\n                        <span className=\"text-sm text-muted-foreground\">‚Äî</span>\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Switch \r\n                        checked={method.isDefault} \r\n                        onCheckedChange={(checked) => handleToggleDefault(method, checked)}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Switch \r\n                        checked={method.isActive} \r\n                        onCheckedChange={(checked) => handleToggleStatus(method, checked)}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right\">\r\n                      <DropdownMenu>\r\n                        <DropdownMenuTrigger asChild>\r\n                          <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                            <span className=\"sr-only\">M·ªü menu</span>\r\n                            <MoreHorizontal className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </DropdownMenuTrigger>\r\n                        <DropdownMenuContent align=\"end\">\r\n                          <DropdownMenuLabel>Thao t√°c</DropdownMenuLabel>\r\n                          <DropdownMenuSeparator />\r\n                          <DropdownMenuItem onClick={() => handleEdit(method)}>\r\n                            Ch·ªânh s·ª≠a\r\n                          </DropdownMenuItem>\r\n                          {!method.isDefault && (\r\n                            <DropdownMenuItem onClick={() => handleSetDefault(method.systemId)}>\r\n                              ƒê·∫∑t l√†m m·∫∑c ƒë·ªãnh\r\n                            </DropdownMenuItem>\r\n                          )}\r\n                          <DropdownMenuItem\r\n                            onClick={() => handleDeleteRequest(method.systemId)}\r\n                            className=\"text-destructive\"\r\n                          >\r\n                            X√≥a\r\n                          </DropdownMenuItem>\r\n                        </DropdownMenuContent>\r\n                      </DropdownMenu>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n      <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingItem ? 'C·∫≠p nh·∫≠t h√¨nh th·ª©c thanh to√°n' : 'Th√™m h√¨nh th·ª©c thanh to√°n'}</DialogTitle>\r\n          </DialogHeader>\r\n          <PaymentMethodForm initialData={editingItem} onSubmit={handleFormSubmit} />\r\n          <DialogFooter>\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => setIsFormOpen(false)}>H·ªßy</Button>\r\n            <Button type=\"submit\" form=\"payment-method-form\">L∆∞u</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>X√°c nh·∫≠n x√≥a?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c. H√¨nh th·ª©c thanh to√°n s·∫Ω b·ªã x√≥a vƒ©nh vi·ªÖn.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>H·ªßy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDelete}>X√≥a</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6986, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/target-groups/api/target-groups-api.ts"],"sourcesContent":["/**\r\n * Target Groups API Layer\r\n */\r\n\r\nimport type { TargetGroup } from '../types';\r\n\r\nexport interface TargetGroupFilters {\r\n  page?: number;\r\n  limit?: number;\r\n  isActive?: boolean;\r\n}\r\n\r\nexport interface TargetGroupResponse {\r\n  data: TargetGroup[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nexport interface TargetGroupCreateInput {\r\n  systemId?: string;\r\n  id?: string;\r\n  name: string;\r\n  isActive?: boolean;\r\n  isDefault?: boolean;\r\n}\r\n\r\nexport interface TargetGroupUpdateInput extends Partial<TargetGroupCreateInput> {}\r\n\r\nconst BASE_URL = '/api/settings/target-groups';\r\n\r\nexport async function fetchTargetGroups(\r\n  filters: TargetGroupFilters = {}\r\n): Promise<TargetGroupResponse> {\r\n  const params = new URLSearchParams();\r\n  if (filters.page) params.set('page', String(filters.page));\r\n  if (filters.limit) params.set('limit', String(filters.limit));\r\n  if (filters.isActive !== undefined) params.set('isActive', String(filters.isActive));\r\n\r\n  const url = params.toString() ? `${BASE_URL}?${params}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) throw new Error('Failed to fetch target groups');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchTargetGroupById(systemId: string): Promise<TargetGroup> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  if (!response.ok) throw new Error('Failed to fetch target group');\r\n  return response.json();\r\n}\r\n\r\nexport async function createTargetGroup(data: TargetGroupCreateInput): Promise<TargetGroup> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to create target group');\r\n  return response.json();\r\n}\r\n\r\nexport async function updateTargetGroup(\r\n  systemId: string,\r\n  data: TargetGroupUpdateInput\r\n): Promise<TargetGroup> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PATCH',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  if (!response.ok) throw new Error('Failed to update target group');\r\n  return response.json();\r\n}\r\n\r\nexport async function deleteTargetGroup(systemId: string): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, { method: 'DELETE' });\r\n  if (!response.ok) throw new Error('Failed to delete target group');\r\n}\r\n\r\nexport async function setDefaultTargetGroup(systemId: string): Promise<TargetGroup> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/set-default`, { method: 'POST' });\r\n  if (!response.ok) throw new Error('Failed to set default');\r\n  return response.json();\r\n}\r\n\r\nexport async function fetchActiveTargetGroups(): Promise<TargetGroup[]> {\r\n  const response = await fetchTargetGroups({ isActive: true, limit: 100 });\r\n  return response.data;\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;AA8BD,MAAM,WAAW;AAEV,eAAe,kBACpB,UAA8B,CAAC,CAAC;IAEhC,MAAM,SAAS,IAAI;IACnB,IAAI,QAAQ,IAAI,EAAE,OAAO,GAAG,CAAC,QAAQ,OAAO,QAAQ,IAAI;IACxD,IAAI,QAAQ,KAAK,EAAE,OAAO,GAAG,CAAC,SAAS,OAAO,QAAQ,KAAK;IAC3D,IAAI,QAAQ,QAAQ,KAAK,WAAW,OAAO,GAAG,CAAC,YAAY,OAAO,QAAQ,QAAQ;IAElF,MAAM,MAAM,OAAO,QAAQ,KAAK,GAAG,SAAS,CAAC,EAAE,QAAQ,GAAG;IAC1D,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,qBAAqB,QAAgB;IACzD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU;IACtD,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBAAkB,IAA4B;IAClE,MAAM,WAAW,MAAM,MAAM,UAAU;QACrC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBACpB,QAAgB,EAChB,IAA4B;IAE5B,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACtD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,kBAAkB,QAAgB;IACtD,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QAAE,QAAQ;IAAS;IAC3E,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;AACpC;AAEO,eAAe,sBAAsB,QAAgB;IAC1D,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,CAAC,EAAE,SAAS,YAAY,CAAC,EAAE;QAAE,QAAQ;IAAO;IACrF,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;IAClC,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,kBAAkB;QAAE,UAAU;QAAM,OAAO;IAAI;IACtE,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 7066, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/target-groups/hooks/use-target-groups.ts"],"sourcesContent":["/**\r\n * Target Groups React Query Hooks\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport {\r\n  fetchTargetGroups,\r\n  fetchTargetGroupById,\r\n  createTargetGroup,\r\n  updateTargetGroup,\r\n  deleteTargetGroup,\r\n  setDefaultTargetGroup,\r\n  fetchActiveTargetGroups,\r\n  type TargetGroupFilters,\r\n  type TargetGroupCreateInput,\r\n  type TargetGroupUpdateInput,\r\n} from '../api/target-groups-api';\r\n\r\nexport const targetGroupKeys = {\r\n  all: ['target-groups'] as const,\r\n  lists: () => [...targetGroupKeys.all, 'list'] as const,\r\n  list: (filters: TargetGroupFilters) => [...targetGroupKeys.lists(), filters] as const,\r\n  details: () => [...targetGroupKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...targetGroupKeys.details(), id] as const,\r\n  active: () => [...targetGroupKeys.all, 'active'] as const,\r\n};\r\n\r\nexport function useTargetGroups(filters: TargetGroupFilters = {}) {\r\n  return useQuery({\r\n    queryKey: targetGroupKeys.list(filters),\r\n    queryFn: () => fetchTargetGroups(filters),\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useTargetGroupById(systemId: string | undefined) {\r\n  return useQuery({\r\n    queryKey: targetGroupKeys.detail(systemId!),\r\n    queryFn: () => fetchTargetGroupById(systemId!),\r\n    enabled: !!systemId,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\nexport function useActiveTargetGroups() {\r\n  return useQuery({\r\n    queryKey: targetGroupKeys.active(),\r\n    queryFn: fetchActiveTargetGroups,\r\n    staleTime: 1000 * 60 * 10,\r\n  });\r\n}\r\n\r\ninterface MutationCallbacks {\r\n  onSuccess?: () => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useTargetGroupMutations(options: MutationCallbacks = {}) {\r\n  const queryClient = useQueryClient();\r\n  const invalidate = () => queryClient.invalidateQueries({ queryKey: targetGroupKeys.all });\r\n\r\n  const create = useMutation({\r\n    mutationFn: (data: TargetGroupCreateInput) => createTargetGroup(data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: TargetGroupUpdateInput }) =>\r\n      updateTargetGroup(systemId, data),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deleteTargetGroup(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  const setDefault = useMutation({\r\n    mutationFn: (systemId: string) => setDefaultTargetGroup(systemId),\r\n    onSuccess: () => { invalidate(); options.onSuccess?.(); },\r\n    onError: options.onError,\r\n  });\r\n\r\n  return {\r\n    create, update, remove, setDefault,\r\n    isLoading: create.isPending || update.isPending || remove.isPending || setDefault.isPending,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;CAEC,GAED;AAAA;AAAA;AACA;;;AAaO,MAAM,kBAAkB;IAC7B,KAAK;QAAC;KAAgB;IACtB,OAAO,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAO;IAC7C,MAAM,CAAC,UAAgC;eAAI,gBAAgB,KAAK;YAAI;SAAQ;IAC5E,SAAS,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAS;IACjD,QAAQ,CAAC,KAAe;eAAI,gBAAgB,OAAO;YAAI;SAAG;IAC1D,QAAQ,IAAM;eAAI,gBAAgB,GAAG;YAAE;SAAS;AAClD;AAEO,SAAS,gBAAgB,UAA8B,CAAC,CAAC;IAC9D,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,IAAI,CAAC;QAC/B,SAAS,IAAM,IAAA,+LAAiB,EAAC;QACjC,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS,mBAAmB,QAA4B;IAC7D,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,MAAM,CAAC;QACjC,SAAS,IAAM,IAAA,kMAAoB,EAAC;QACpC,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IACzB;AACF;AAEO,SAAS;IACd,OAAO,IAAA,uLAAQ,EAAC;QACd,UAAU,gBAAgB,MAAM;QAChC,SAAS,qMAAuB;QAChC,WAAW,OAAO,KAAK;IACzB;AACF;AAOO,SAAS,wBAAwB,UAA6B,CAAC,CAAC;IACrE,MAAM,cAAc,IAAA,wMAAc;IAClC,MAAM,aAAa,IAAM,YAAY,iBAAiB,CAAC;YAAE,UAAU,gBAAgB,GAAG;QAAC;IAEvF,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,OAAiC,IAAA,+LAAiB,EAAC;QAChE,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAsD,GACjF,IAAA,+LAAiB,EAAC,UAAU;QAC9B,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,SAAS,IAAA,6LAAW,EAAC;QACzB,YAAY,CAAC,WAAqB,IAAA,+LAAiB,EAAC;QACpD,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,MAAM,aAAa,IAAA,6LAAW,EAAC;QAC7B,YAAY,CAAC,WAAqB,IAAA,mMAAqB,EAAC;QACxD,WAAW;YAAQ;YAAc,QAAQ,SAAS;QAAM;QACxD,SAAS,QAAQ,OAAO;IAC1B;IAEA,OAAO;QACL;QAAQ;QAAQ;QAAQ;QACxB,WAAW,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,OAAO,SAAS,IAAI,WAAW,SAAS;IAC7F;AACF"}},
    {"offset": {"line": 7182, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/target-groups/form.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport type { TargetGroup } from \"./types\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"../../../components/ui/form\";\r\nimport { Input } from \"../../../components/ui/input\";\r\n\r\nconst formSchema = z.object({\r\n  id: z.string().default(\"\"),\r\n  name: z.string().min(1, \"T√™n nh√≥m l√† b·∫Øt bu·ªôc\").max(100, \"T√™n kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100 k√Ω t·ª±\"),\r\n});\r\n\r\nexport type TargetGroupFormValues = z.input<typeof formSchema>;\r\n\r\ntype FormProps = {\r\n  initialData?: TargetGroup | null;\r\n  onSubmit: (values: TargetGroupFormValues) => void;\r\n};\r\n\r\nexport function TargetGroupForm({ initialData, onSubmit }: FormProps) {\r\n  const form = useForm<TargetGroupFormValues>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: initialData\r\n      ? {\r\n          id: String(initialData.id ?? \"\"),\r\n          name: initialData.name ?? \"\",\r\n        }\r\n      : {\r\n          id: \"\",\r\n          name: \"\",\r\n        },\r\n    mode: \"onBlur\",\r\n  });\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form\r\n        id=\"target-group-form\"\r\n        onSubmit={form.handleSubmit((values) => onSubmit(formSchema.parse(values)))}\r\n        className=\"space-y-4 pt-4 max-h-[70vh] overflow-y-auto px-1\"\r\n      >\r\n        <FormField control={form.control} name=\"name\" render={({ field }) => (\r\n          <FormItem><FormLabel>T√™n nh√≥m <span className=\"text-destructive\">*</span></FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n        )} />\r\n        <FormField control={form.control} name=\"id\" render={({ field }) => (\r\n          <FormItem><FormLabel>M√£ nh√≥m</FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n        )} />\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;AACA;;;;;;;AAEA,MAAM,aAAa,yJAAQ,CAAC;IAC1B,IAAI,yJAAQ,GAAG,OAAO,CAAC;IACvB,MAAM,yJAAQ,GAAG,GAAG,CAAC,GAAG,wBAAwB,GAAG,CAAC,KAAK;AAC3D;AASO,SAAS,gBAAgB,EAAE,WAAW,EAAE,QAAQ,EAAa;IAClE,MAAM,OAAO,IAAA,mLAAO,EAAwB;QAC1C,UAAU,IAAA,6KAAW,EAAC;QACtB,eAAe,cACX;YACE,IAAI,OAAO,YAAY,EAAE,IAAI;YAC7B,MAAM,YAAY,IAAI,IAAI;QAC5B,IACA;YACE,IAAI;YACJ,MAAM;QACR;QACJ,MAAM;IACR;IAEA,qBACE,8OAAC,iIAAI;QAAE,GAAG,IAAI;kBACZ,cAAA,8OAAC;YACC,IAAG;YACH,UAAU,KAAK,YAAY,CAAC,CAAC,SAAW,SAAS,WAAW,KAAK,CAAC;YAClE,WAAU;;8BAEV,8OAAC,sIAAS;oBAAC,SAAS,KAAK,OAAO;oBAAE,MAAK;oBAAO,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC9D,8OAAC,qIAAQ;;8CAAC,8OAAC,sIAAS;;wCAAC;sDAAS,8OAAC;4CAAK,WAAU;sDAAmB;;;;;;;;;;;;8CAAoB,8OAAC,wIAAW;8CAAC,cAAA,8OAAC,mIAAK;wCAAE,GAAG,KAAK;wCAAE,OAAO,MAAM,KAAK,IAAI;;;;;;;;;;;8CAAoB,8OAAC,wIAAW;;;;;;;;;;;;;;;;8BAE5K,8OAAC,sIAAS;oBAAC,SAAS,KAAK,OAAO;oBAAE,MAAK;oBAAK,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAC5D,8OAAC,qIAAQ;;8CAAC,8OAAC,sIAAS;8CAAC;;;;;;8CAAmB,8OAAC,wIAAW;8CAAC,cAAA,8OAAC,mIAAK;wCAAE,GAAG,KAAK;wCAAE,OAAO,MAAM,KAAK,IAAI;;;;;;;;;;;8CAAoB,8OAAC,wIAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKvI"}},
    {"offset": {"line": 7331, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/target-groups/page-content.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Plus, MoreHorizontal } from \"lucide-react\";\r\nimport { useTargetGroups, useTargetGroupMutations } from \"./hooks/use-target-groups\";\r\nimport type { TargetGroup } from \"./types\";\r\nimport { TargetGroupForm, type TargetGroupFormValues } from \"./form\";\r\nimport { asBusinessId, type SystemId } from \"@/lib/id-types\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Switch } from \"../../../components/ui/switch\";\r\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle } from \"../../../components/ui/dialog\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"../../../components/ui/alert-dialog\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"../../../components/ui/table\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from \"../../../components/ui/dropdown-menu\";\r\nimport { toast } from \"sonner\";\r\nimport { SettingsActionButton } from \"../../../components/settings/SettingsActionButton\";\r\nimport type { RegisterTabActions } from \"../use-tab-action-registry\";\r\n\r\ntype TargetGroupsPageContentProps = {\r\n  isActive: boolean;\r\n  onRegisterActions: RegisterTabActions;\r\n};\r\n\r\nexport function TargetGroupsPageContent({ isActive, onRegisterActions }: TargetGroupsPageContentProps) {\r\n  const { data: targetGroupsData } = useTargetGroups();\r\n  const data = targetGroupsData?.data || [];\r\n  const { create, update, remove, setDefault } = useTargetGroupMutations();\r\n  \r\n  const [isFormOpen, setIsFormOpen] = React.useState(false);\r\n  const [editingItem, setEditingItem] = React.useState<TargetGroup | null>(null);\r\n  const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n  const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n  \r\n  const handleAddNew = React.useCallback(() => {\r\n    setEditingItem(null);\r\n    setIsFormOpen(true);\r\n  }, []);\r\n\r\n  const handleEdit = React.useCallback((item: TargetGroup) => { setEditingItem(item); setIsFormOpen(true); }, []);\r\n  const handleDeleteRequest = (systemId: SystemId) => { \r\n    setIdToDelete(systemId);\r\n    setIsAlertOpen(true);\r\n  };\r\n  \r\n  const handleToggleDefault = (item: TargetGroup, isDefault: boolean) => {\r\n    if (isDefault) {\r\n      // Use setDefault mutation to set default and unset others\r\n      setDefault.mutate(item.systemId as string);\r\n      toast.success(`ƒê√£ ƒë·∫∑t \"${item.name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n    } else {\r\n      const other = data.find(d => d.systemId !== item.systemId && d.isActive !== false);\r\n      if (other) {\r\n        setDefault.mutate(other.systemId as string);\r\n        toast.success(`ƒê√£ chuy·ªÉn m·∫∑c ƒë·ªãnh sang \"${other.name}\"`);\r\n      } else {\r\n        toast.error(\"Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt nh√≥m ƒë·ªëi t∆∞·ª£ng m·∫∑c ƒë·ªãnh\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleStatus = (item: TargetGroup, isActive: boolean) => {\r\n    update.mutate({ systemId: item.systemId as string, data: { isActive } });\r\n    toast.success(isActive ? \"ƒê√£ k√≠ch ho·∫°t\" : \"ƒê√£ ng·ª´ng ho·∫°t ƒë·ªông\");\r\n  };\r\n  \r\n  const confirmDelete = () => {\r\n    if (idToDelete) {\r\n      remove.mutate(idToDelete as string);\r\n      toast.success(\"ƒê√£ x√≥a th√†nh c√¥ng\");\r\n    }\r\n    setIsAlertOpen(false);\r\n    setIdToDelete(null);\r\n  };\r\n  \r\n  const handleFormSubmit = (values: TargetGroupFormValues) => {\r\n    try {\r\n      const name = values.name.trim();\r\n      const normalizedId = values.id?.trim().toUpperCase();\r\n      if (editingItem) {\r\n        const payload = {\r\n          name,\r\n          id: normalizedId ? asBusinessId(normalizedId) : editingItem.id,\r\n        };\r\n        update.mutate({ systemId: editingItem.systemId as string, data: payload });\r\n        toast.success(\"C·∫≠p nh·∫≠t th√†nh c√¥ng\");\r\n      } else {\r\n        create.mutate({\r\n          id: normalizedId ? asBusinessId(normalizedId) : asBusinessId(\"\"),\r\n          name,\r\n          isActive: true,\r\n        });\r\n        toast.success(\"Th√™m m·ªõi th√†nh c√¥ng\");\r\n      }\r\n      setIsFormOpen(false);\r\n    } catch (error) {\r\n      toast.error(\"C√≥ l·ªói x·∫£y ra\", {\r\n        description: error instanceof Error ? error.message : \"L·ªói kh√¥ng x√°c ƒë·ªãnh\",\r\n      });\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!isActive) {\r\n      return;\r\n    }\r\n\r\n    onRegisterActions([\r\n      <SettingsActionButton key=\"add-target-group\" onClick={handleAddNew}>\r\n        <Plus className=\"mr-2 h-4 w-4\" /> Th√™m nh√≥m ƒë·ªëi t∆∞·ª£ng\r\n      </SettingsActionButton>,\r\n    ]);\r\n  }, [handleAddNew, isActive, onRegisterActions]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"rounded-md border\">\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>M√£ nh√≥m</TableHead>\r\n              <TableHead>T√™n nh√≥m</TableHead>\r\n              <TableHead>M·∫∑c ƒë·ªãnh</TableHead>\r\n              <TableHead>Tr·∫°ng th√°i</TableHead>\r\n              <TableHead className=\"text-right\">Thao t√°c</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {data.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell colSpan={5} className=\"h-24 text-center\">\r\n                  Ch∆∞a c√≥ d·ªØ li·ªáu\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              data.map((item) => (\r\n                <TableRow key={item.systemId}>\r\n                  <TableCell className=\"font-medium\">{item.id}</TableCell>\r\n                  <TableCell className=\"font-medium\">{item.name}</TableCell>\r\n                  <TableCell>\r\n                    <Switch \r\n                      checked={item.isDefault ?? false} \r\n                      onCheckedChange={(checked) => handleToggleDefault(item, checked)} \r\n                    />\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Switch \r\n                      checked={item.isActive ?? true} \r\n                      onCheckedChange={(checked) => handleToggleStatus(item, checked)} \r\n                    />\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <DropdownMenu>\r\n                      <DropdownMenuTrigger asChild>\r\n                        <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                          <span className=\"sr-only\">M·ªü menu</span>\r\n                          <MoreHorizontal className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </DropdownMenuTrigger>\r\n                      <DropdownMenuContent align=\"end\">\r\n                        <DropdownMenuLabel>Thao t√°c</DropdownMenuLabel>\r\n                        <DropdownMenuSeparator />\r\n                        <DropdownMenuItem onClick={() => handleEdit(item)}>\r\n                          Ch·ªânh s·ª≠a\r\n                        </DropdownMenuItem>\r\n                        <DropdownMenuItem\r\n                          onClick={() => handleDeleteRequest(item.systemId)}\r\n                          className=\"text-destructive\"\r\n                        >\r\n                          X√≥a\r\n                        </DropdownMenuItem>\r\n                      </DropdownMenuContent>\r\n                    </DropdownMenu>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n      \r\n      <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingItem ? 'C·∫≠p nh·∫≠t nh√≥m ƒë·ªëi t∆∞·ª£ng' : 'Th√™m nh√≥m ƒë·ªëi t∆∞·ª£ng'}</DialogTitle>\r\n          </DialogHeader>\r\n          <TargetGroupForm initialData={editingItem} onSubmit={handleFormSubmit} />\r\n          <DialogFooter>\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => setIsFormOpen(false)}>H·ªßy</Button>\r\n            <Button type=\"submit\" form=\"target-group-form\">L∆∞u</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>X√°c nh·∫≠n x√≥a?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c. Nh√≥m ƒë·ªëi t∆∞·ª£ng s·∫Ω b·ªã x√≥a vƒ©nh vi·ªÖn.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>H·ªßy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDelete}>X√≥a</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7834, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-utils.ts"],"sourcesContent":["/**\r\n * ID Utilities\r\n * Helpers for generating and validating IDs (systemId & business id)\r\n */\r\n\r\nimport { getPrefix, type EntityType } from './smart-prefix';\r\nimport { ID_CONFIG } from './id-config';\r\n\r\n// Re-export EntityType for convenience\r\nexport type { EntityType } from './smart-prefix';\r\n\r\n/**\r\n * Generate SystemId (6 digits, immutable, internal use only)\r\n * Format: SYSTEMID_PREFIX + 6 digits (e.g., \"EMP000001\", \"CUSTOMER000001\", \"ORDER000001\")\r\n * Uses systemIdPrefix from ID_CONFIG (English full words)\r\n */\r\nexport function generateSystemId(entityType: EntityType, counter: number): string {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`No configuration found for entity type: ${entityType}`);\r\n  }\r\n  const prefix = config.systemIdPrefix;\r\n  const digitCount = config.digitCount || 6;\r\n  return `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n}\r\n\r\n/**\r\n * Generate Business ID (6 digits, user-facing, editable)\r\n * Format: PREFIX + 6 digits (e.g., \"NV000001\", \"KH000001\", \"CTV000001\")\r\n * All entities use same 6-digit format for consistency\r\n * \r\n * @param entityType - Entity type from smart-prefix\r\n * @param counter - Current counter value\r\n * @param customId - Optional custom ID from user input\r\n * @returns Generated ID or validated custom ID\r\n */\r\nexport function generateBusinessId(\r\n  entityType: EntityType, \r\n  counter: number,\r\n  customId?: string\r\n): string {\r\n  // If user provided custom ID, validate and return it\r\n  if (customId && customId.trim()) {\r\n    const sanitized = sanitizeBusinessId(customId);\r\n    if (!sanitized) {\r\n      throw new Error('M√£ kh√¥ng h·ª£p l·ªá! Ch·ªâ ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng ch·ªØ c√°i v√† s·ªë.');\r\n    }\r\n    return sanitized;\r\n  }\r\n  \r\n  // Otherwise, auto-generate\r\n  const prefix = getPrefix(entityType);\r\n  return `${prefix}${String(counter).padStart(6, '0')}`;\r\n}\r\n\r\n/**\r\n * Sanitize business ID\r\n * - Remove special characters (keep only letters and numbers)\r\n * - Convert to uppercase\r\n * - Trim whitespace\r\n * \r\n * @param id - Raw user input\r\n * @returns Sanitized ID or null if invalid\r\n */\r\nexport function sanitizeBusinessId(id: string): string | null {\r\n  if (!id || typeof id !== 'string') return null;\r\n  \r\n  // Remove all special characters, keep only alphanumeric\r\n  const cleaned = id.trim().replace(/[^a-zA-Z0-9]/g, '');\r\n  \r\n  if (!cleaned) return null;\r\n  \r\n  // Convert to uppercase for consistency\r\n  return cleaned.toUpperCase();\r\n}\r\n\r\n/**\r\n * Validate business ID uniqueness (case-insensitive)\r\n * \r\n * @param id - ID to check\r\n * @param existingIds - Array of existing IDs in the system\r\n * @param currentId - Current ID (for edit mode, to exclude self)\r\n * @returns true if unique, false if duplicate\r\n */\r\nexport function isBusinessIdUnique(\r\n  id: string,\r\n  existingIds: string[],\r\n  currentId?: string\r\n): boolean {\r\n  if (!id) return false;\r\n  \r\n  const normalizedId = id.toUpperCase();\r\n  const normalizedCurrentId = currentId?.toUpperCase();\r\n  \r\n  return !existingIds.some(existingId => {\r\n    // ‚úÖ Filter out empty/undefined IDs\r\n    if (!existingId || existingId.trim() === '') return false;\r\n    \r\n    const normalizedExisting = existingId.toUpperCase();\r\n    // Skip self-comparison in edit mode\r\n    if (normalizedCurrentId && normalizedExisting === normalizedCurrentId) {\r\n      return false;\r\n    }\r\n    return normalizedExisting === normalizedId;\r\n  });\r\n}\r\n\r\n/**\r\n * Extract counter from system ID\r\n * Used to initialize counter when loading from localStorage\r\n * Supports both 6, 7 and 8 digits\r\n * \r\n * @param systemId - System ID to parse (e.g., \"EMP000001\", \"CUSTOMER000001\", \"WARRANTY0000001\")\r\n * @param prefix - Expected systemIdPrefix (e.g., \"EMP\", \"CUSTOMER\", \"WARRANTY\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromSystemId(systemId: string, prefix: string): number {\r\n  if (!systemId || typeof systemId !== 'string') return 0;\r\n  \r\n  // Try different digit counts (most entities use 6 digits, some use 7-8)\r\n  const regex8 = new RegExp(`^${prefix}(\\\\d{8})$`);\r\n  const regex7 = new RegExp(`^${prefix}(\\\\d{7})$`);\r\n  const regex6 = new RegExp(`^${prefix}(\\\\d{6})$`);\r\n  \r\n  const match8 = systemId.match(regex8);\r\n  if (match8) return parseInt(match8[1], 10);\r\n  \r\n  const match7 = systemId.match(regex7);\r\n  if (match7) return parseInt(match7[1], 10);\r\n  \r\n  const match6 = systemId.match(regex6);\r\n  if (match6) return parseInt(match6[1], 10);\r\n  \r\n  return 0;\r\n}\r\n\r\n/**\r\n * Extract counter from business ID\r\n * Used to initialize counter when loading from localStorage\r\n * \r\n * @param businessId - Business ID to parse (e.g., \"NV000001\")\r\n * @param prefix - Expected prefix (e.g., \"NV\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromBusinessId(businessId: string, prefix: string): number {\r\n  if (!businessId || typeof businessId !== 'string') return 0;\r\n  const regex = new RegExp(`^${prefix}(\\\\d+)$`);\r\n  const match = businessId.match(regex);\r\n  return match ? parseInt(match[1], 10) : 0;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for systemId)\r\n * \r\n * @param items - Array of items with systemId\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxSystemIdCounter<T extends { systemId: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.systemId) return;\r\n    const counter = extractCounterFromSystemId(item.systemId, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for business id)\r\n * Only counts auto-generated IDs (PREFIX + digits)\r\n * \r\n * @param items - Array of items with id\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxBusinessIdCounter<T extends { id: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.id) return;\r\n    const counter = extractCounterFromBusinessId(item.id, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Format ID for display\r\n * Adds spacing for readability\r\n * \r\n * @param id - ID to format\r\n * @returns Formatted ID (e.g., \"NV-000001\", \"KH-000123\")\r\n */\r\nexport function formatIdForDisplay(id: string): string {\r\n  // Match pattern: PREFIX followed by numbers\r\n  const match = id.match(/^([A-Z]+)(\\d+)$/);\r\n  if (!match) return id;\r\n  \r\n  const [, prefix, numbers] = match;\r\n  return `${prefix}-${numbers}`;\r\n}\r\n\r\n/**\r\n * Validate ID format\r\n * Check if ID follows valid pattern (letters + numbers only)\r\n * \r\n * @param id - ID to validate\r\n * @returns true if valid format\r\n */\r\nexport function isValidIdFormat(id: string): boolean {\r\n  if (!id || typeof id !== 'string') return false;\r\n  \r\n  // Only alphanumeric characters allowed\r\n  const regex = /^[A-Z0-9]+$/i;\r\n  return regex.test(id);\r\n}\r\n\r\n/**\r\n * Generate suggested IDs based on entity type\r\n * Useful for autocomplete or placeholder text\r\n * \r\n * @param entityType - Entity type\r\n * @param counter - Current counter\r\n * @param count - Number of suggestions\r\n * @returns Array of suggested IDs\r\n */\r\nexport function generateSuggestedIds(\r\n  entityType: EntityType,\r\n  counter: number,\r\n  count: number = 3\r\n): string[] {\r\n  const suggestions: string[] = [];\r\n  const prefix = getPrefix(entityType);\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    suggestions.push(`${prefix}${String(counter + i + 1).padStart(6, '0')}`);\r\n  }\r\n  \r\n  return suggestions;\r\n}\r\n\r\n/**\r\n * ‚ú® Find next available business ID\r\n * Checks existing IDs and increments counter until finding a unique ID\r\n * \r\n * @param prefix - ID prefix (e.g., 'PT', 'PC', 'NV')\r\n * @param existingIds - Array of existing business IDs\r\n * @param startCounter - Starting counter value\r\n * @param digitCount - Number of digits (default: 6)\r\n * @returns Object with nextId and updatedCounter\r\n */\r\nexport function findNextAvailableBusinessId(\r\n  prefix: string,\r\n  existingIds: string[],\r\n  startCounter: number,\r\n  digitCount: number = 6\r\n): { nextId: string; updatedCounter: number } {\r\n  let counter = startCounter;\r\n  let nextId: string;\r\n  \r\n  // Keep incrementing until we find a unique ID\r\n  do {\r\n    counter++;\r\n    nextId = `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n  } while (existingIds.some(id => id === nextId));\r\n  \r\n  return {\r\n    nextId,\r\n    updatedCounter: counter\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7994, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/cashbook/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { CashAccount } from './types';\r\nimport { findNextAvailableBusinessId, generateSystemId, getMaxBusinessIdCounter, getMaxSystemIdCounter, type EntityType } from '../../lib/id-utils';\r\nimport { asBusinessId, asSystemId, type BusinessId, type SystemId } from '../../lib/id-types';\r\n\r\nconst CASH_ACCOUNT_ENTITY: EntityType = 'cash-accounts';\r\nconst SYSTEM_ID_PREFIX = 'ACCOUNT';\r\nconst BUSINESS_ID_PREFIX = 'TK';\r\nconst BUSINESS_ID_DIGITS = 6;\r\n\r\n// API sync helpers\r\nasync function syncToAPI(action: 'create' | 'update' | 'delete', data: any): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' ? '/api/cash-accounts' : `/api/cash-accounts/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.error(`[Cashbook API] ${action} failed:`, await response.text());\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`[Cashbook API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\nasync function fetchFromAPI(): Promise<CashAccount[]> {\r\n  try {\r\n    const response = await fetch('/api/cash-accounts?limit=50');\r\n    if (!response.ok) return [];\r\n    const json = await response.json();\r\n    return json.data || [];\r\n  } catch (error) {\r\n    console.error('[Cashbook API] fetch error:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\ninterface CashbookState {\r\n  accounts: CashAccount[];\r\n  initialized: boolean;\r\n  getAccountById: (id: BusinessId) => CashAccount | undefined;\r\n  add: (item: Omit<CashAccount, 'systemId'>) => void;\r\n  update: (systemId: SystemId, item: CashAccount) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  setDefault: (systemId: SystemId) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst getNextSystemId = (accounts: CashAccount[]): SystemId => {\r\n  const currentCounter = getMaxSystemIdCounter(accounts, SYSTEM_ID_PREFIX);\r\n  return asSystemId(generateSystemId(CASH_ACCOUNT_ENTITY, currentCounter + 1));\r\n};\r\n\r\nconst ensureBusinessId = (accounts: CashAccount[], provided?: BusinessId): BusinessId => {\r\n  if (provided && provided.trim()) {\r\n    return provided;\r\n  }\r\n\r\n  const existingIds = accounts.map(acc => acc.id as string);\r\n  const startCounter = getMaxBusinessIdCounter(accounts, BUSINESS_ID_PREFIX);\r\n  const { nextId } = findNextAvailableBusinessId(BUSINESS_ID_PREFIX, existingIds, startCounter, BUSINESS_ID_DIGITS);\r\n  return asBusinessId(nextId);\r\n};\r\n\r\nexport const useCashbookStore = create<CashbookState>()(\r\n  (set, get) => ({\r\n      accounts: [],\r\n      initialized: false,\r\n      getAccountById: (id) => get().accounts.find(a => a.id === id),\r\n      \r\n      add: (item) => {\r\n        const newAccount: CashAccount = {\r\n          ...item,\r\n          systemId: getNextSystemId(get().accounts),\r\n          id: ensureBusinessId(get().accounts, item.id),\r\n        };\r\n        set((state) => ({ accounts: [...state.accounts, newAccount] }));\r\n        // Sync to API\r\n        syncToAPI('create', newAccount).catch(console.error);\r\n      },\r\n      \r\n      update: (systemId, updatedItem) => {\r\n        set((state) => ({\r\n          accounts: state.accounts.map((acc) => (acc.systemId === systemId ? updatedItem : acc))\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('update', updatedItem).catch(console.error);\r\n      },\r\n      \r\n      remove: (systemId) => {\r\n        set((state) => ({\r\n          accounts: state.accounts.filter(acc => acc.systemId !== systemId)\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n      },\r\n      \r\n      setDefault: (systemId) => {\r\n        set((state) => {\r\n          const targetAccount = state.accounts.find(acc => acc.systemId === systemId);\r\n          if (!targetAccount) return state;\r\n\r\n          const updated = state.accounts.map(acc => ({\r\n            ...acc,\r\n            isDefault: (acc.type === targetAccount.type ? acc.systemId === systemId : acc.isDefault) ?? false\r\n          }));\r\n          \r\n          // Sync updated accounts to API\r\n          updated.forEach(acc => {\r\n            if (acc.type === targetAccount.type) {\r\n              syncToAPI('update', acc).catch(console.error);\r\n            }\r\n          });\r\n          \r\n          return { accounts: updated };\r\n        });\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        const apiData = await fetchFromAPI();\r\n        if (apiData.length > 0) {\r\n          set({ accounts: apiData, initialized: true });\r\n        } else {\r\n          set({ initialized: true });\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8126, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/store-factory.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// persist, createJSONStorage removed - database is now source of truth\r\nimport { \r\n  generateSystemId, \r\n  generateBusinessId, \r\n  isBusinessIdUnique,\r\n  getMaxSystemIdCounter,\r\n  getMaxBusinessIdCounter,\r\n  findNextAvailableBusinessId,\r\n  type EntityType \r\n} from './id-utils';\r\nimport { getPrefix } from './smart-prefix';\r\nimport { ID_CONFIG, type SystemId, type BusinessId, createSystemId, createBusinessId as brandBusinessId } from './id-config';\r\n\r\nconst SYSTEM_FALLBACK_ID: SystemId = createSystemId('SYS000000');\r\n\r\nconst asSystemIdFallback = (): SystemId => SYSTEM_FALLBACK_ID;\r\n\r\n// ‚úÖ API Sync helper for store-factory\r\nasync function syncToAPI<T>(\r\n  apiEndpoint: string,\r\n  action: 'create' | 'update' | 'delete' | 'restore',\r\n  data: T | { systemId: SystemId },\r\n  systemId?: SystemId\r\n): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' \r\n      ? apiEndpoint \r\n      : `${apiEndpoint}/${systemId || (data as any).systemId}`;\r\n    \r\n    const method = action === 'create' ? 'POST' \r\n      : action === 'update' ? 'PATCH' \r\n      : action === 'delete' ? 'DELETE'\r\n      : 'PATCH'; // restore uses PATCH\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.warn(`[Store Factory API] ${action} failed for ${apiEndpoint}:`, response.status);\r\n    }\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Store Factory API] ${action} error for ${apiEndpoint}:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Item with SystemId (branded type)\r\nexport type ItemWithSystemId = { systemId: SystemId; [key: string]: any };\r\n\r\n// ‚úÖ Counter state for ID generation\r\nexport type CounterState = {\r\n  systemId: number;\r\n  businessId: number;\r\n};\r\n\r\nexport type CrudState<T extends ItemWithSystemId> = {\r\n  data: T[];\r\n  _counters: CounterState; // ‚úÖ Persisted counters\r\n  _initialized: boolean; // ‚úÖ Track if loaded from API\r\n  add: (item: Omit<T, 'systemId'>) => T;\r\n  addMultiple: (items: Omit<T, 'systemId'>[]) => void;\r\n  update: (systemId: SystemId, item: Partial<T>) => void; // ‚úÖ Accept partial updates\r\n  remove: (systemId: SystemId) => void; // ‚úÖ Branded type\r\n  hardDelete: (systemId: SystemId) => void; // ‚úÖ Branded type\r\n  restore: (systemId: SystemId) => void; // ‚úÖ Branded type\r\n  findById: (systemId: SystemId | string) => T | undefined; // ‚úÖ Branded type\r\n  getActive: () => T[];\r\n  getDeleted: () => T[];\r\n  loadFromAPI: () => Promise<void>; // ‚úÖ Load data from database\r\n};\r\n\r\nexport const createCrudStore = <T extends ItemWithSystemId>(\r\n  _initialData: T[], // @deprecated - Kept for backward compatibility but NO LONGER USED\r\n  entityType: EntityType, // Changed from idPrefix to entityType\r\n  options?: {\r\n    businessIdField?: keyof T; // Field name for business ID (default: 'id')\r\n    persistKey?: string; // @deprecated - No longer used, kept for backward compatibility\r\n    getCurrentUser?: () => string | undefined; // Function to get current user systemId\r\n    apiEndpoint?: string; // ‚úÖ API endpoint for database sync (e.g., '/api/employees')\r\n  }\r\n) => {\r\n  const businessPrefix = getPrefix(entityType); // Vietnamese prefix for Business ID (NV, KH, DH)\r\n  const config = ID_CONFIG[entityType];\r\n  const systemIdPrefix = config?.systemIdPrefix || entityType.toUpperCase(); // English prefix for SystemId (EMP, CUSTOMER, ORDER)\r\n  \r\n  const businessIdField = options?.businessIdField ?? 'id';\r\n  // const persistKey = options?.persistKey; // @deprecated - No longer used\r\n  const getCurrentUser = options?.getCurrentUser;\r\n  const apiEndpoint = options?.apiEndpoint;\r\n\r\n  // ‚úÖ CHANGED: Start with empty array - database is source of truth\r\n  // Mock data files (data.ts) are NO LONGER USED for runtime\r\n  const normalizedInitialData: T[] = [];\r\n\r\n  const storeConfig = (set: any, get: any) => ({\r\n    data: normalizedInitialData, // ‚úÖ Start empty - data loaded via React Query\r\n    // ‚úÖ Counters start at 0 - will be initialized from API via loadFromAPI()\r\n    _counters: {\r\n      systemId: 0,\r\n      businessId: 0\r\n    },\r\n    _initialized: false, // ‚úÖ Track API initialization\r\n    add: (item: Omit<T, 'systemId'>): T => {\r\n        // ‚úÖ Get counters from state (persisted)\r\n        const currentCounters = get()._counters;\r\n        const newSystemIdCounter = currentCounters.systemId + 1;\r\n        const newSystemId = createSystemId(generateSystemId(entityType, newSystemIdCounter));\r\n        \r\n        // Generate or validate Business ID (if field exists)\r\n        let finalItem = { ...item } as any;\r\n        let newBusinessIdCounter = currentCounters.businessId;\r\n        \r\n        if (businessIdField in item) {\r\n          const customId = (item as any)[businessIdField];\r\n          const existingIds = get().data.map((d: any) => d[businessIdField]);\r\n          \r\n          // ‚úÖ If customId provided, validate uniqueness\r\n          if (customId && customId.trim()) {\r\n            if (!isBusinessIdUnique(customId, existingIds)) {\r\n              throw new Error(`M√£ \"${customId}\" ƒë√£ t·ªìn t·∫°i! Vui l√≤ng s·ª≠ d·ª•ng m√£ kh√°c.`);\r\n            }\r\n            finalItem[businessIdField] = customId.trim().toUpperCase();\r\n          } else {\r\n            // ‚úÖ Auto-generate with findNextAvailableBusinessId\r\n            const digitCount = 6; // All entities use 6 digits\r\n            const result = findNextAvailableBusinessId(businessPrefix, existingIds, newBusinessIdCounter, digitCount);\r\n            finalItem[businessIdField] = result.nextId;\r\n            newBusinessIdCounter = result.updatedCounter;\r\n          }\r\n        }\r\n        \r\n        const now = new Date().toISOString();\r\n        const currentUser = getCurrentUser?.();\r\n        const newItem = { \r\n          ...finalItem, \r\n          systemId: newSystemId, // ‚úÖ Branded SystemId\r\n          createdAt: finalItem.createdAt || now,\r\n          updatedAt: now,\r\n          createdBy: finalItem.createdBy || currentUser,\r\n          updatedBy: currentUser,\r\n        } as unknown as T;\r\n        \r\n        // ‚úÖ Update both data and counters atomically\r\n        set((state: any) => ({ \r\n          data: [...state.data, newItem],\r\n          _counters: {\r\n            systemId: newSystemIdCounter,\r\n            businessId: newBusinessIdCounter\r\n          }\r\n        }));\r\n        \r\n        // ‚úÖ Sync to API in background\r\n        if (apiEndpoint) {\r\n          syncToAPI(apiEndpoint, 'create', newItem).catch(console.error);\r\n        }\r\n        \r\n        return newItem;\r\n    },\r\n    addMultiple: (items: Omit<T, 'systemId'>[]) => \r\n        set((state: any) => {\r\n            const now = new Date().toISOString();\r\n            const currentUser = getCurrentUser?.();\r\n            const newItems: T[] = [];\r\n            const digitCount = 6; // All entities use 6 digits\r\n            \r\n            // ‚úÖ Start from current counters\r\n            let currentSystemIdCounter = state._counters.systemId;\r\n            let currentBusinessIdCounter = state._counters.businessId;\r\n            \r\n            items.forEach(item => {\r\n                // ‚úÖ Generate SystemId from current counter\r\n                currentSystemIdCounter++;\r\n                const newSystemId = createSystemId(generateSystemId(entityType, currentSystemIdCounter));\r\n                \r\n                // Generate or validate Business ID (if field exists)\r\n                let finalItem = { ...item } as any;\r\n                if (businessIdField in item) {\r\n                  const customId = (item as any)[businessIdField];\r\n                  \r\n                  // Collect existing IDs (from state + already added in this batch)\r\n                  const existingIds = [\r\n                    ...state.data.map((d: any) => d[businessIdField]),\r\n                    ...newItems.map((d: any) => d[businessIdField])\r\n                  ];\r\n                  \r\n                  // ‚úÖ If customId provided, validate uniqueness\r\n                  if (customId && customId.trim()) {\r\n                    if (!isBusinessIdUnique(customId, existingIds)) {\r\n                      throw new Error(`M√£ \"${customId}\" ƒë√£ t·ªìn t·∫°i! Vui l√≤ng s·ª≠ d·ª•ng m√£ kh√°c.`);\r\n                    }\r\n                    finalItem[businessIdField] = customId.trim().toUpperCase();\r\n                  } else {\r\n                    // ‚úÖ Auto-generate with findNextAvailableBusinessId\r\n                    const result = findNextAvailableBusinessId(businessPrefix, existingIds, currentBusinessIdCounter, digitCount);\r\n                    finalItem[businessIdField] = result.nextId;\r\n                    currentBusinessIdCounter = result.updatedCounter;\r\n                  }\r\n                }\r\n                \r\n                newItems.push({ \r\n                  ...finalItem, \r\n                  systemId: newSystemId,\r\n                  createdAt: now,\r\n                  updatedAt: now,\r\n                  createdBy: currentUser,\r\n                  updatedBy: currentUser,\r\n                } as unknown as T);\r\n            });\r\n            \r\n            // ‚úÖ Update both data and counters\r\n            const result = { \r\n              data: [...state.data, ...newItems],\r\n              _counters: {\r\n                systemId: currentSystemIdCounter,\r\n                businessId: currentBusinessIdCounter\r\n              }\r\n            };\r\n            \r\n            // ‚úÖ Sync to API in background (batch)\r\n            if (apiEndpoint) {\r\n              newItems.forEach(item => {\r\n                syncToAPI(apiEndpoint, 'create', item).catch(console.error);\r\n              });\r\n            }\r\n            \r\n            return result;\r\n        }),\r\n    update: (systemId: SystemId, updatedItem: Partial<T>) => {\r\n      // Validate unique business ID (case-insensitive, skip self)\r\n      if (businessIdField in updatedItem) {\r\n        const businessId = (updatedItem as any)[businessIdField];\r\n        const existingIds = get().data\r\n          .filter((d: any) => d.systemId !== systemId)\r\n          .map((d: any) => d[businessIdField]);\r\n        \r\n        if (businessId && !isBusinessIdUnique(businessId, existingIds)) {\r\n          throw new Error(`M√£ \"${businessId}\" ƒë√£ t·ªìn t·∫°i! Vui l√≤ng s·ª≠ d·ª•ng m√£ kh√°c.`);\r\n        }\r\n      }\r\n\r\n      const now = new Date().toISOString();\r\n      const currentUser = getCurrentUser?.();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId \r\n            ? { ...item, ...updatedItem, updatedAt: now, updatedBy: currentUser } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const fullItem = get().data.find((item: T) => item.systemId === systemId);\r\n        if (fullItem) {\r\n          syncToAPI(apiEndpoint, 'update', fullItem, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    remove: (systemId: SystemId) => {\r\n      // Soft delete - mark as deleted\r\n      const now = new Date().toISOString();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: true, deletedAt: now } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'update', { ...item, isDeleted: true, deletedAt: now }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    hardDelete: (systemId: SystemId) => {\r\n      // Permanent delete - remove from array\r\n      set((state: any) => ({\r\n        data: state.data.filter((item: T) => item.systemId !== systemId),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        syncToAPI(apiEndpoint, 'delete', { systemId }, systemId).catch(console.error);\r\n      }\r\n    },\r\n    restore: (systemId: SystemId) => {\r\n      // Restore soft-deleted item\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: false, deletedAt: null } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ‚úÖ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'restore', { ...item, isDeleted: false, deletedAt: null }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    getActive: () => get().data.filter((item: any) => !item.isDeleted),\r\n    getDeleted: () => get().data.filter((item: any) => item.isDeleted),\r\n    findById: (id: SystemId | string) => get().data.find((item: T) => item.systemId === id || (item as any).id === id),\r\n    \r\n    // ‚úÖ Load data from database API - OPTIMIZED: No more limit=10000!\r\n    // This is now only used for counter initialization, NOT for loading all data\r\n    // Use React Query hooks for data fetching with proper pagination\r\n    loadFromAPI: async () => {\r\n      if (!apiEndpoint) return;\r\n      if (get()._initialized) return;\r\n      \r\n      try {\r\n        // Only fetch minimal data needed to initialize counters\r\n        // Actual data loading should be done via React Query hooks\r\n        const response = await fetch(`${apiEndpoint}?limit=1&sortBy=systemId&sortOrder=desc`, {\r\n          credentials: 'include',\r\n        });\r\n        if (response.ok) {\r\n          const json = await response.json();\r\n          const pagination = json.pagination || {};\r\n          const lastItem = json.data?.[0];\r\n          \r\n          // Initialize counters from the latest item (highest IDs)\r\n          const newCounters = {\r\n            systemId: lastItem ? getMaxSystemIdCounter([lastItem], systemIdPrefix) : 0,\r\n            businessId: (lastItem && options?.businessIdField)\r\n              ? getMaxBusinessIdCounter([lastItem] as any[], businessPrefix)\r\n              : 0\r\n          };\r\n          \r\n          set({ \r\n            data: [], // Don't store data in Zustand anymore - use React Query\r\n            _counters: newCounters,\r\n            _initialized: true \r\n          });\r\n          \r\n          console.log(`[Store Factory] ${apiEndpoint} initialized. Total records: ${pagination.total || 'unknown'}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`[Store Factory] loadFromAPI error for ${apiEndpoint}:`, error);\r\n        // Still mark as initialized to prevent infinite retry\r\n        set({ _initialized: true });\r\n      }\r\n    },\r\n  });\r\n\r\n  // ‚úÖ SIMPLIFIED: No localStorage persistence, database is source of truth\r\n  // Data is loaded via ApiSyncProvider on app init\r\n  return create<CrudState<T>>(storeConfig);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8434, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/target-groups/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { TargetGroup } from './types';\r\n\r\nexport const useTargetGroupStore = createCrudStore<TargetGroup>([], 'target-groups', {\r\n  apiEndpoint: '/api/settings/data?type=target-group',\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM,sBAAsB,IAAA,0IAAe,EAAc,EAAE,EAAE,iBAAiB;IACnF,aAAa;AACf"}},
    {"offset": {"line": 8447, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/methods/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { PaymentMethod } from './types';\r\nimport { asSystemId, type SystemId } from '@/lib/id-types';\r\n\r\n// API sync helper\r\nasync function syncToAPI(\r\n  action: 'create' | 'update' | 'delete',\r\n  data: Partial<PaymentMethod>\r\n): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create'\r\n      ? '/api/settings/payment-methods'\r\n      : `/api/settings/payment-methods/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Payment Methods API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\ninterface PaymentMethodState {\r\n  data: PaymentMethod[];\r\n  initialized: boolean;\r\n  add: (item: Omit<PaymentMethod, 'systemId' | 'isDefault'>) => void;\r\n  update: (systemId: SystemId, updatedPolicy: Omit<PaymentMethod, 'isDefault' | 'systemId'>) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  setDefault: (systemId: SystemId) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nexport const usePaymentMethodStore = create<PaymentMethodState>()(\r\n  (set, get) => ({\r\n      data: [],\r\n      initialized: false,\r\n      add: (item) => {\r\n        const newItem: PaymentMethod = { \r\n          ...item, \r\n          systemId: asSystemId(`PM_${Date.now()}`),\r\n          isDefault: get().data.length === 0,\r\n        };\r\n        set((state) => ({ data: [...state.data, newItem] }));\r\n        \r\n        // Sync to API\r\n        syncToAPI('create', newItem).catch(console.error);\r\n      },\r\n      update: (systemId, updatedFields) => {\r\n        set((state) => ({\r\n          data: state.data.map(p => p.systemId === systemId ? { ...p, ...updatedFields } : p),\r\n        }));\r\n        \r\n        // Sync to API\r\n        const updated = get().data.find(p => p.systemId === systemId);\r\n        if (updated) {\r\n          syncToAPI('update', updated).catch(console.error);\r\n        }\r\n      },\r\n      remove: (systemId) => {\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n        set((state) => ({\r\n          data: state.data.filter((p) => p.systemId !== systemId),\r\n        }));\r\n      },\r\n      setDefault: (systemId) => {\r\n        set((state) => ({\r\n          data: state.data.map(p => ({ ...p, isDefault: p.systemId === systemId })),\r\n        }));\r\n        \r\n        // Sync all to API (update default status)\r\n        const data = get().data;\r\n        for (const item of data) {\r\n          syncToAPI('update', item).catch(console.error);\r\n        }\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        \r\n        try {\r\n          // NOTE: Settings data is typically small, but using limit for consistency\r\n          const response = await fetch('/api/settings/payment-methods?limit=30');\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            const data = json.data || json.methods || [];\r\n            if (data.length > 0) {\r\n              set({ data, initialized: true });\r\n            } else {\r\n              set({ initialized: true });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('[Payment Methods Store] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,kBAAkB;AAClB,eAAe,UACb,MAAsC,EACtC,IAA4B;IAE5B,IAAI;QACF,MAAM,WAAW,WAAW,WACxB,kCACA,CAAC,8BAA8B,EAAE,KAAK,QAAQ,EAAE;QACpD,MAAM,SAAS,WAAW,WAAW,SAAS,WAAW,WAAW,UAAU;QAE9E,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC;YACA,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,WAAW,WAAW,KAAK,SAAS,CAAC,QAAQ;QACrD;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,OAAO,OAAO,CAAC,EAAE;QACxD,OAAO;IACT;AACF;AAYO,MAAM,wBAAwB,IAAA,kJAAM,IACzC,CAAC,KAAK,MAAQ,CAAC;QACX,MAAM,EAAE;QACR,aAAa;QACb,KAAK,CAAC;YACJ,MAAM,UAAyB;gBAC7B,GAAG,IAAI;gBACP,UAAU,IAAA,gIAAU,EAAC,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI;gBACvC,WAAW,MAAM,IAAI,CAAC,MAAM,KAAK;YACnC;YACA,IAAI,CAAC,QAAU,CAAC;oBAAE,MAAM;2BAAI,MAAM,IAAI;wBAAE;qBAAQ;gBAAC,CAAC;YAElD,cAAc;YACd,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;QAClD;QACA,QAAQ,CAAC,UAAU;YACjB,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,WAAW;4BAAE,GAAG,CAAC;4BAAE,GAAG,aAAa;wBAAC,IAAI;gBACnF,CAAC;YAED,cAAc;YACd,MAAM,UAAU,MAAM,IAAI,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;YACpD,IAAI,SAAS;gBACX,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;YAClD;QACF;QACA,QAAQ,CAAC;YACP,UAAU,UAAU;gBAAE;YAAS,GAAG,KAAK,CAAC,QAAQ,KAAK;YACrD,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;gBAChD,CAAC;QACH;QACA,YAAY,CAAC;YACX,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;4BAAE,GAAG,CAAC;4BAAE,WAAW,EAAE,QAAQ,KAAK;wBAAS,CAAC;gBACzE,CAAC;YAED,0CAA0C;YAC1C,MAAM,OAAO,MAAM,IAAI;YACvB,KAAK,MAAM,QAAQ,KAAM;gBACvB,UAAU,UAAU,MAAM,KAAK,CAAC,QAAQ,KAAK;YAC/C;QACF;QAEA,aAAa;YACX,IAAI,MAAM,WAAW,EAAE;YAEvB,IAAI;gBACF,0EAA0E;gBAC1E,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,MAAM,OAAO,KAAK,IAAI,IAAI,KAAK,OAAO,IAAI,EAAE;oBAC5C,IAAI,KAAK,MAAM,GAAG,GAAG;wBACnB,IAAI;4BAAE;4BAAM,aAAa;wBAAK;oBAChC,OAAO;wBACL,IAAI;4BAAE,aAAa;wBAAK;oBAC1B;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8CAA8C;YAC9D;QACF;IACF,CAAC"}},
    {"offset": {"line": 8553, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/settings-cache.ts"],"sourcesContent":["/**\r\n * Global Settings Cache\r\n * \r\n * Cung c·∫•p cache in-memory cho c√°c settings ƒë·ªçc t·ª´ database.\r\n * ƒê∆∞·ª£c s·ª≠ d·ª•ng b·ªüi c√°c utility functions kh√¥ng th·ªÉ d√πng React hooks.\r\n * \r\n * Flow:\r\n * 1. App kh·ªüi ƒë·ªông -> g·ªçi loadGeneralSettings() t·ª´ AuthProvider/Layout\r\n * 2. Utility functions ƒë·ªçc t·ª´ cache qua getGeneralSettingsSync()\r\n * 3. N·∫øu cache r·ªóng, fallback v·ªÅ default values\r\n * \r\n * NOTE: localStorage has been removed - all data comes from API/database\r\n */\r\n\r\ninterface GeneralSettings {\r\n  timezone: string\r\n  dateFormat: string\r\n  timeFormat: '24h' | '12h'\r\n  language: string\r\n  currency: string\r\n  storeName: string\r\n  storeAddress: string\r\n  storePhone: string\r\n  logoUrl?: string\r\n  // Add more fields as needed\r\n}\r\n\r\nconst DEFAULT_GENERAL_SETTINGS: GeneralSettings = {\r\n  timezone: 'Asia/Ho_Chi_Minh',\r\n  dateFormat: 'DD/MM/YYYY',\r\n  timeFormat: '24h',\r\n  language: 'vi',\r\n  currency: 'VND',\r\n  storeName: '',\r\n  storeAddress: '',\r\n  storePhone: '',\r\n}\r\n\r\n// In-memory cache\r\nlet settingsCache: GeneralSettings | null = null\r\nlet isLoading = false\r\nlet loadPromise: Promise<GeneralSettings> | null = null\r\n\r\n/**\r\n * Load general settings from database API\r\n * Should be called once when app initializes\r\n */\r\nexport async function loadGeneralSettings(): Promise<GeneralSettings> {\r\n  // Return cached if available\r\n  if (settingsCache) {\r\n    return settingsCache\r\n  }\r\n\r\n  // Prevent multiple simultaneous loads\r\n  if (loadPromise) {\r\n    return loadPromise\r\n  }\r\n\r\n  isLoading = true\r\n\r\n  loadPromise = (async () => {\r\n    try {\r\n      // Try API first\r\n      const res = await fetch('/api/settings?group=general')\r\n      if (res.ok) {\r\n        const data = await res.json()\r\n        \r\n        if (data.grouped?.general) {\r\n          settingsCache = {\r\n            ...DEFAULT_GENERAL_SETTINGS,\r\n            ...data.grouped.general,\r\n          }\r\n          return settingsCache\r\n        }\r\n\r\n        // Parse array format\r\n        if (data.data && Array.isArray(data.data)) {\r\n          const parsed = data.data.reduce((acc: Record<string, any>, item: any) => {\r\n            acc[item.key] = item.value\r\n            return acc\r\n          }, {})\r\n          \r\n          settingsCache = {\r\n            ...DEFAULT_GENERAL_SETTINGS,\r\n            ...parsed,\r\n          }\r\n          return settingsCache\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load general settings from API:', error)\r\n    }\r\n\r\n    // Return defaults if API fails\r\n    settingsCache = DEFAULT_GENERAL_SETTINGS\r\n    return settingsCache\r\n  })()\r\n\r\n  try {\r\n    return await loadPromise\r\n  } finally {\r\n    isLoading = false\r\n    loadPromise = null\r\n  }\r\n}\r\n\r\n/**\r\n * Get general settings synchronously from cache\r\n * Falls back to defaults if not loaded yet\r\n */\r\nexport function getGeneralSettingsSync(): GeneralSettings {\r\n  // Return from cache if available\r\n  if (settingsCache) {\r\n    return settingsCache\r\n  }\r\n\r\n  return DEFAULT_GENERAL_SETTINGS\r\n}\r\n\r\n/**\r\n * Update settings cache (call after saving settings)\r\n */\r\nexport function updateGeneralSettingsCache(settings: Partial<GeneralSettings>) {\r\n  settingsCache = {\r\n    ...(settingsCache || DEFAULT_GENERAL_SETTINGS),\r\n    ...settings,\r\n  }\r\n}\r\n\r\n/**\r\n * Clear settings cache (call on logout)\r\n */\r\nexport function clearGeneralSettingsCache() {\r\n  settingsCache = null\r\n  loadPromise = null\r\n}\r\n\r\n/**\r\n * Check if settings are loaded\r\n */\r\nexport function isSettingsLoaded(): boolean {\r\n  return settingsCache !== null\r\n}\r\n\r\n/**\r\n * Check if settings are currently loading\r\n */\r\nexport function isSettingsLoading(): boolean {\r\n  return isLoading\r\n}\r\n\r\n// Export defaults for reference\r\nexport { DEFAULT_GENERAL_SETTINGS }\r\nexport type { GeneralSettings }\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;CAYC;;;;;;;;;;;;;;;;AAeD,MAAM,2BAA4C;IAChD,UAAU;IACV,YAAY;IACZ,YAAY;IACZ,UAAU;IACV,UAAU;IACV,WAAW;IACX,cAAc;IACd,YAAY;AACd;AAEA,kBAAkB;AAClB,IAAI,gBAAwC;AAC5C,IAAI,YAAY;AAChB,IAAI,cAA+C;AAM5C,eAAe;IACpB,6BAA6B;IAC7B,IAAI,eAAe;QACjB,OAAO;IACT;IAEA,sCAAsC;IACtC,IAAI,aAAa;QACf,OAAO;IACT;IAEA,YAAY;IAEZ,cAAc,CAAC;QACb,IAAI;YACF,gBAAgB;YAChB,MAAM,MAAM,MAAM,MAAM;YACxB,IAAI,IAAI,EAAE,EAAE;gBACV,MAAM,OAAO,MAAM,IAAI,IAAI;gBAE3B,IAAI,KAAK,OAAO,EAAE,SAAS;oBACzB,gBAAgB;wBACd,GAAG,wBAAwB;wBAC3B,GAAG,KAAK,OAAO,CAAC,OAAO;oBACzB;oBACA,OAAO;gBACT;gBAEA,qBAAqB;gBACrB,IAAI,KAAK,IAAI,IAAI,MAAM,OAAO,CAAC,KAAK,IAAI,GAAG;oBACzC,MAAM,SAAS,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC,KAA0B;wBACzD,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK;wBAC1B,OAAO;oBACT,GAAG,CAAC;oBAEJ,gBAAgB;wBACd,GAAG,wBAAwB;wBAC3B,GAAG,MAAM;oBACX;oBACA,OAAO;gBACT;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6CAA6C;QAC7D;QAEA,+BAA+B;QAC/B,gBAAgB;QAChB,OAAO;IACT,CAAC;IAED,IAAI;QACF,OAAO,MAAM;IACf,SAAU;QACR,YAAY;QACZ,cAAc;IAChB;AACF;AAMO,SAAS;IACd,iCAAiC;IACjC,IAAI,eAAe;QACjB,OAAO;IACT;IAEA,OAAO;AACT;AAKO,SAAS,2BAA2B,QAAkC;IAC3E,gBAAgB;QACd,GAAI,iBAAiB,wBAAwB;QAC7C,GAAG,QAAQ;IACb;AACF;AAKO,SAAS;IACd,gBAAgB;IAChB,cAAc;AAChB;AAKO,SAAS;IACd,OAAO,kBAAkB;AAC3B;AAKO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 8673, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/date-utils.ts"],"sourcesContent":["/**\r\n * Date utility functions using date-fns\r\n * Replaces dayjs throughout the application\r\n * \r\n * Reads timezone and time format from settings cache (loaded from database)\r\n * Falls back to localStorage for backward compatibility\r\n */\r\n\r\nimport {\r\n  format as dateFnsFormat,\r\n  parse as dateFnsParse,\r\n  isValid,\r\n  isSameDay,\r\n  isSameMonth,\r\n  isBefore,\r\n  isAfter,\r\n  startOfDay,\r\n  endOfDay,\r\n  addDays as dateFnsAddDays,\r\n  subDays as dateFnsSubDays,\r\n  isWithinInterval,\r\n  startOfWeek,\r\n  endOfWeek,\r\n  startOfMonth,\r\n  endOfMonth,\r\n  addMonths as dateFnsAddMonths,\r\n  subMonths as dateFnsSubMonths,\r\n  getDay,\r\n  setDay,\r\n} from 'date-fns';\r\nimport { vi } from 'date-fns/locale';\r\nimport { getGeneralSettingsSync } from './settings-cache';\r\n\r\n// ===== SETTINGS HELPER =====\r\n\r\ntype DateSettings = {\r\n  timezone: string;\r\n  dateFormat: string;\r\n  timeFormat: '24h' | '12h';\r\n};\r\n\r\nconst DEFAULT_DATE_SETTINGS: DateSettings = {\r\n  timezone: 'Asia/Ho_Chi_Minh',\r\n  dateFormat: 'DD/MM/YYYY',\r\n  timeFormat: '24h',\r\n};\r\n\r\n/**\r\n * Get date settings from cache (falls back to localStorage)\r\n */\r\nexport const getDateSettings = (): DateSettings => {\r\n  try {\r\n    // Use settings cache (loaded from database)\r\n    const settings = getGeneralSettingsSync();\r\n    return {\r\n      timezone: settings.timezone || DEFAULT_DATE_SETTINGS.timezone,\r\n      dateFormat: settings.dateFormat || DEFAULT_DATE_SETTINGS.dateFormat,\r\n      timeFormat: settings.timeFormat || DEFAULT_DATE_SETTINGS.timeFormat,\r\n    };\r\n  } catch (e) { /* ignore */ }\r\n  return DEFAULT_DATE_SETTINGS;\r\n};\r\n\r\n/**\r\n * Get timezone offset in hours from settings\r\n */\r\nexport const getTimezoneOffset = (): number => {\r\n  const { timezone } = getDateSettings();\r\n  const offsets: Record<string, number> = {\r\n    'Asia/Ho_Chi_Minh': 7,\r\n    'Asia/Bangkok': 7,\r\n    'Asia/Singapore': 8,\r\n    'Asia/Tokyo': 9,\r\n  };\r\n  return offsets[timezone] ?? 7; // Default UTC+7\r\n};\r\n\r\n/**\r\n * Get current date in configured timezone\r\n */\r\nexport const getCurrentDateInTimezone = (): Date => {\r\n  const offset = getTimezoneOffset();\r\n  const now = new Date();\r\n  // Adjust to configured timezone\r\n  const utcTime = now.getTime() + (now.getTimezoneOffset() * 60 * 1000);\r\n  return new Date(utcTime + (offset * 60 * 60 * 1000));\r\n};\r\n\r\n/**\r\n * Format local date as YYYY-MM-DD string (without timezone conversion)\r\n */\r\nexport const formatLocalDateString = (date: Date): string => {\r\n  const y = date.getFullYear();\r\n  const m = String(date.getMonth() + 1).padStart(2, '0');\r\n  const d = String(date.getDate()).padStart(2, '0');\r\n  return `${y}-${m}-${d}`;\r\n};\r\n\r\n/**\r\n * Format date for display as DD/MM/YYYY (uses timezone from settings)\r\n * Replacement for toLocaleDateString('vi-VN')\r\n */\r\nexport const formatDateForDisplay = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  return dateFnsFormat(d, 'dd/MM/yyyy');\r\n};\r\n\r\n/**\r\n * Format time for display as HH:mm or h:mm AM/PM (uses settings)\r\n * Replacement for toLocaleTimeString('vi-VN')\r\n */\r\nexport const formatTimeForDisplay = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  \r\n  const settings = getDateSettings();\r\n  if (settings.timeFormat === '12h') {\r\n    return dateFnsFormat(d, 'h:mm a');\r\n  }\r\n  return dateFnsFormat(d, 'HH:mm');\r\n};\r\n\r\n/**\r\n * Format date and time for display (uses settings)\r\n * Replacement for toLocaleString('vi-VN')\r\n */\r\nexport const formatDateTimeForDisplay = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  \r\n  const settings = getDateSettings();\r\n  if (settings.timeFormat === '12h') {\r\n    return dateFnsFormat(d, 'dd/MM/yyyy h:mm a');\r\n  }\r\n  return dateFnsFormat(d, 'dd/MM/yyyy HH:mm');\r\n};\r\n\r\n/**\r\n * Get current timestamp as ISO string\r\n * Replacement for new Date().toISOString()\r\n */\r\nexport const getCurrentISOTimestamp = (): string => {\r\n  return new Date().toISOString();\r\n};\r\n\r\n/**\r\n * Build pay period for a given month (uses local dates)\r\n * Returns { monthKey, startDate, endDate }\r\n */\r\nexport const buildPayPeriodFromMonthKey = (monthKey: string): { monthKey: string; startDate: string; endDate: string } => {\r\n  const [year, month] = monthKey.split('-').map(Number);\r\n  if (!year || !month) {\r\n    return { monthKey, startDate: '', endDate: '' };\r\n  }\r\n  const startDate = new Date(year, month - 1, 1);\r\n  const endDate = new Date(year, month, 0); // Last day of month\r\n  return {\r\n    monthKey,\r\n    startDate: formatLocalDateString(startDate),\r\n    endDate: formatLocalDateString(endDate),\r\n  };\r\n};\r\n\r\n// ===== FORMAT FUNCTIONS =====\r\n\r\n/**\r\n * Format date as DD/MM/YYYY\r\n */\r\nexport const formatDate = (date: Date | string | null | undefined, formatStr: string = 'dd/MM/yyyy'): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  return dateFnsFormat(d, formatStr);\r\n};\r\n\r\n/**\r\n * Format date as DD/MM/YYYY HH:mm (uses timezone from settings)\r\n */\r\nexport const formatDateTime = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  \r\n  const offset = getTimezoneOffset();\r\n  const settings = getDateSettings();\r\n  \r\n  // Convert to configured timezone\r\n  const utcTime = d.getTime();\r\n  const localTime = new Date(utcTime + (offset * 60 * 60 * 1000));\r\n  \r\n  const day = localTime.getUTCDate().toString().padStart(2, '0');\r\n  const month = (localTime.getUTCMonth() + 1).toString().padStart(2, '0');\r\n  const year = localTime.getUTCFullYear();\r\n  let hours = localTime.getUTCHours();\r\n  const minutes = localTime.getUTCMinutes().toString().padStart(2, '0');\r\n  \r\n  // Format time based on settings\r\n  if (settings.timeFormat === '12h') {\r\n    const ampm = hours >= 12 ? 'PM' : 'AM';\r\n    hours = hours % 12 || 12;\r\n    return `${day}/${month}/${year} ${hours}:${minutes} ${ampm}`;\r\n  }\r\n  \r\n  return `${day}/${month}/${year} ${hours.toString().padStart(2, '0')}:${minutes}`;\r\n};\r\n\r\n/**\r\n * Format date as DD/MM/YYYY HH:mm:ss (uses timezone from settings)\r\n */\r\nexport const formatDateTimeSeconds = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  \r\n  const offset = getTimezoneOffset();\r\n  const settings = getDateSettings();\r\n  \r\n  // Convert to configured timezone\r\n  const utcTime = d.getTime();\r\n  const localTime = new Date(utcTime + (offset * 60 * 60 * 1000));\r\n  \r\n  const day = localTime.getUTCDate().toString().padStart(2, '0');\r\n  const month = (localTime.getUTCMonth() + 1).toString().padStart(2, '0');\r\n  const year = localTime.getUTCFullYear();\r\n  let hours = localTime.getUTCHours();\r\n  const minutes = localTime.getUTCMinutes().toString().padStart(2, '0');\r\n  const seconds = localTime.getUTCSeconds().toString().padStart(2, '0');\r\n  \r\n  // Format time based on settings\r\n  if (settings.timeFormat === '12h') {\r\n    const ampm = hours >= 12 ? 'PM' : 'AM';\r\n    hours = hours % 12 || 12;\r\n    return `${day}/${month}/${year} ${hours}:${minutes}:${seconds} ${ampm}`;\r\n  }\r\n  \r\n  return `${day}/${month}/${year} ${hours.toString().padStart(2, '0')}:${minutes}:${seconds}`;\r\n};\r\n\r\n/**\r\n * Format date with custom format string\r\n * Common formats: 'dd/MM/yyyy', 'yyyy-MM-dd', 'MMMM yyyy', etc.\r\n */\r\nexport const formatDateCustom = (\r\n  date: Date | string | null | undefined,\r\n  formatString: string\r\n): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  return dateFnsFormat(d, formatString, { locale: vi });\r\n};\r\n\r\n/**\r\n * Format for month and year display (e.g., \"Th√°ng 10 2025\")\r\n */\r\nexport const formatMonthYear = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  return dateFnsFormat(d, 'MMMM yyyy', { locale: vi });\r\n};\r\n\r\n// ===== PARSE FUNCTIONS =====\r\n\r\n/**\r\n * Parse date string to Date object\r\n * Supports: DD/MM/YYYY, YYYY-MM-DD (ISO), ISO datetime\r\n */\r\nexport const parseDate = (dateString: string): Date | null => {\r\n  if (!dateString) return null;\r\n  \r\n  // Try ISO format first (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss)\r\n  if (dateString.includes('-') && dateString.length >= 10) {\r\n    const isoDate = new Date(dateString);\r\n    if (isValid(isoDate)) return isoDate;\r\n  }\r\n  \r\n  // Try DD/MM/YYYY format\r\n  const parsed = dateFnsParse(dateString, 'dd/MM/yyyy', new Date());\r\n  return isValid(parsed) ? parsed : null;\r\n};\r\n\r\n/**\r\n * Parse datetime string DD/MM/YYYY HH:mm to Date object\r\n */\r\nexport const parseDateTime = (dateTimeString: string): Date | null => {\r\n  if (!dateTimeString) return null;\r\n  const parsed = dateFnsParse(dateTimeString, 'dd/MM/yyyy HH:mm', new Date());\r\n  return isValid(parsed) ? parsed : null;\r\n};\r\n\r\n// ===== VALIDATION FUNCTIONS =====\r\n\r\n/**\r\n * Check if date is valid\r\n */\r\nexport const isValidDate = (date: any): boolean => {\r\n  if (!date) return false;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return isValid(d);\r\n};\r\n\r\n// ===== COMPARISON FUNCTIONS =====\r\n\r\n/**\r\n * Check if two dates are the same day\r\n */\r\nexport const isDateSame = (\r\n  date1: Date | string | null | undefined,\r\n  date2: Date | string | null | undefined\r\n): boolean => {\r\n  if (!date1 || !date2) return false;\r\n  const d1 = typeof date1 === 'string' ? new Date(date1) : date1;\r\n  const d2 = typeof date2 === 'string' ? new Date(date2) : date2;\r\n  return isSameDay(d1, d2);\r\n};\r\n\r\n/**\r\n * Check if two dates are in the same month\r\n */\r\nexport const isSameMonthAs = (\r\n  date1: Date | string | null | undefined,\r\n  date2: Date | string | null | undefined\r\n): boolean => {\r\n  if (!date1 || !date2) return false;\r\n  const d1 = typeof date1 === 'string' ? new Date(date1) : date1;\r\n  const d2 = typeof date2 === 'string' ? new Date(date2) : date2;\r\n  return isSameMonth(d1, d2);\r\n};\r\n\r\n/**\r\n * Check if date is before another date\r\n */\r\nexport const isDateBefore = (\r\n  date: Date | string | null | undefined,\r\n  dateToCompare: Date | string | null | undefined\r\n): boolean => {\r\n  if (!date || !dateToCompare) return false;\r\n  const d1 = typeof date === 'string' ? new Date(date) : date;\r\n  const d2 = typeof dateToCompare === 'string' ? new Date(dateToCompare) : dateToCompare;\r\n  return isBefore(d1, d2);\r\n};\r\n\r\n/**\r\n * Check if date is after another date\r\n */\r\nexport const isDateAfter = (\r\n  date: Date | string | null | undefined,\r\n  dateToCompare: Date | string | null | undefined\r\n): boolean => {\r\n  if (!date || !dateToCompare) return false;\r\n  const d1 = typeof date === 'string' ? new Date(date) : date;\r\n  const d2 = typeof dateToCompare === 'string' ? new Date(dateToCompare) : dateToCompare;\r\n  return isAfter(d1, d2);\r\n};\r\n\r\n/**\r\n * Check if date is between two dates (inclusive)\r\n */\r\nexport const isDateBetween = (\r\n  date: Date | string | null | undefined,\r\n  startDate: Date | string | null | undefined,\r\n  endDate: Date | string | null | undefined\r\n): boolean => {\r\n  if (!date || !startDate || !endDate) return false;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  const start = typeof startDate === 'string' ? new Date(startDate) : startDate;\r\n  const end = typeof endDate === 'string' ? new Date(endDate) : endDate;\r\n  return isWithinInterval(d, { start, end });\r\n};\r\n\r\n// ===== MANIPULATION FUNCTIONS =====\r\n\r\n/**\r\n * Get current date\r\n */\r\nexport const getCurrentDate = (): Date => {\r\n  return new Date();\r\n};\r\n\r\n/**\r\n * Get start of day (00:00:00)\r\n */\r\nexport const getStartOfDay = (date: Date | string | null | undefined): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return startOfDay(d);\r\n};\r\n\r\n/**\r\n * Get end of day (23:59:59)\r\n */\r\nexport const getEndOfDay = (date: Date | string | null | undefined): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return endOfDay(d);\r\n};\r\n\r\n/**\r\n * Add days to date\r\n */\r\nexport const addDays = (\r\n  date: Date | string | null | undefined,\r\n  amount: number\r\n): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return dateFnsAddDays(d, amount);\r\n};\r\n\r\n/**\r\n * Subtract days from date\r\n */\r\nexport const subtractDays = (\r\n  date: Date | string | null | undefined,\r\n  amount: number\r\n): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return dateFnsSubDays(d, amount);\r\n};\r\n\r\n/**\r\n * Add months to date\r\n */\r\nexport const addMonths = (\r\n  date: Date | string | null | undefined,\r\n  amount: number\r\n): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return dateFnsAddMonths(d, amount);\r\n};\r\n\r\n/**\r\n * Subtract months from date\r\n */\r\nexport const subtractMonths = (\r\n  date: Date | string | null | undefined,\r\n  amount: number\r\n): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return dateFnsSubMonths(d, amount);\r\n};\r\n\r\n// ===== PERIOD FUNCTIONS =====\r\n\r\n/**\r\n * Get start of week\r\n */\r\nexport const getStartOfWeek = (date: Date | string | null | undefined): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return startOfWeek(d, { locale: vi });\r\n};\r\n\r\n/**\r\n * Get end of week\r\n */\r\nexport const getEndOfWeek = (date: Date | string | null | undefined): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return endOfWeek(d, { locale: vi });\r\n};\r\n\r\n/**\r\n * Get start of month\r\n */\r\nexport const getStartOfMonth = (date: Date | string | null | undefined): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return startOfMonth(d);\r\n};\r\n\r\n/**\r\n * Get end of month\r\n */\r\nexport const getEndOfMonth = (date: Date | string | null | undefined): Date | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return endOfMonth(d);\r\n};\r\n\r\n/**\r\n * Get day of week (0 = Sunday, 1 = Monday, etc.)\r\n */\r\nexport const getDayOfWeek = (date: Date | string | null | undefined): number | null => {\r\n  if (!date) return null;\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  return getDay(d);\r\n};\r\n\r\n/**\r\n * Get difference in days between two dates\r\n */\r\nexport const getDaysDiff = (\r\n  date1: Date | string | null | undefined,\r\n  date2: Date | string | null | undefined\r\n): number => {\r\n  if (!date1 || !date2) return 0;\r\n  const d1 = typeof date1 === 'string' ? new Date(date1) : date1;\r\n  const d2 = typeof date2 === 'string' ? new Date(date2) : date2;\r\n  const diffTime = Math.abs(d2.getTime() - d1.getTime());\r\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n};\r\n\r\n/**\r\n * Get difference in months between two dates\r\n */\r\nexport const getMonthsDiff = (\r\n  date1: Date | string | null | undefined,\r\n  date2: Date | string | null | undefined\r\n): number => {\r\n  if (!date1 || !date2) return 0;\r\n  const d1 = typeof date1 === 'string' ? new Date(date1) : date1;\r\n  const d2 = typeof date2 === 'string' ? new Date(date2) : date2;\r\n  return (d2.getFullYear() - d1.getFullYear()) * 12 + (d2.getMonth() - d1.getMonth());\r\n};\r\n\r\n/**\r\n * Convert date to ISO format (YYYY-MM-DD)\r\n */\r\nexport const toISODate = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  return dateFnsFormat(d, 'yyyy-MM-dd');\r\n};\r\n\r\n/**\r\n * Convert date to ISO datetime format (YYYY-MM-DDTHH:mm:ss)\r\n */\r\nexport const toISODateTime = (date: Date | string | null | undefined): string => {\r\n  if (!date) return '';\r\n  const d = typeof date === 'string' ? new Date(date) : date;\r\n  if (!isValid(d)) return '';\r\n  return dateFnsFormat(d, \"yyyy-MM-dd'T'HH:mm:ss\");\r\n};\r\n\r\n/**\r\n * Get short weekday names\r\n */\r\nexport const getWeekdaysShort = (): string[] => {\r\n  return ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'];\r\n};\r\n\r\n/**\r\n * Get full weekday names\r\n */\r\nexport const getWeekdays = (): string[] => {\r\n  return ['Ch·ªß Nh·∫≠t', 'Th·ª© Hai', 'Th·ª© Ba', 'Th·ª© T∆∞', 'Th·ª© NƒÉm', 'Th·ª© S√°u', 'Th·ª© B·∫£y'];\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9106, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/receipt-types/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { ReceiptType } from './types';\r\nimport { toISODate, getCurrentDate } from '../../../lib/date-utils';\r\n\r\nconst baseStore = createCrudStore<ReceiptType>([], 'receipt-types', {\r\n  businessIdField: 'id',\r\n  apiEndpoint: '/api/settings/data?type=receipt-type',\r\n});\r\n\r\nconst originalAdd = baseStore.getState().add;\r\n\r\nbaseStore.setState((state) => ({\r\n  ...state,\r\n  add: (item) => {\r\n    const newItem = {\r\n      ...item,\r\n      createdAt: item.createdAt ?? toISODate(getCurrentDate()),\r\n    } satisfies Omit<ReceiptType, 'systemId'>;\r\n    return originalAdd(newItem);\r\n  },\r\n}));\r\n\r\nexport const useReceiptTypeStore = baseStore;\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,MAAM,YAAY,IAAA,0IAAe,EAAc,EAAE,EAAE,iBAAiB;IAClE,iBAAiB;IACjB,aAAa;AACf;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAE5C,UAAU,QAAQ,CAAC,CAAC,QAAU,CAAC;QAC7B,GAAG,KAAK;QACR,KAAK,CAAC;YACJ,MAAM,UAAU;gBACd,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,IAAI,IAAA,iIAAS,EAAC,IAAA,sIAAc;YACvD;YACA,OAAO,YAAY;QACrB;IACF,CAAC;AAEM,MAAM,sBAAsB"}},
    {"offset": {"line": 9134, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payments/types/store.ts"],"sourcesContent":["import { createCrudStore } from '../../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { PaymentType } from './types';\r\nimport { toISODate, getCurrentDate } from '../../../../lib/date-utils';\r\n\r\nconst baseStore = createCrudStore<PaymentType>([], 'payment-types', {\r\n  businessIdField: 'id',\r\n  apiEndpoint: '/api/settings/data?type=payment-type',\r\n});\r\n\r\nconst originalAdd = baseStore.getState().add;\r\n\r\nbaseStore.setState((state) => ({\r\n  ...state,\r\n  add: (item) => {\r\n    const newItem = {\r\n      ...item,\r\n      createdAt: item.createdAt ?? toISODate(getCurrentDate()),\r\n    } satisfies Omit<PaymentType, 'systemId'>;\r\n    return originalAdd(newItem);\r\n  },\r\n}));\r\n\r\nexport const usePaymentTypeStore = baseStore;\r\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEA,MAAM,YAAY,IAAA,0IAAe,EAAc,EAAE,EAAE,iBAAiB;IAClE,iBAAiB;IACjB,aAAa;AACf;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAE5C,UAAU,QAAQ,CAAC,CAAC,QAAU,CAAC;QAC7B,GAAG,KAAK;QACR,KAAK,CAAC;YACJ,MAAM,UAAU;gBACd,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,IAAI,IAAA,iIAAS,EAAC,IAAA,sIAAc;YACvD;YACA,OAAO,YAAY;QACrB;IACF,CAAC;AAEM,MAAM,sBAAsB"}},
    {"offset": {"line": 9162, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/finance/document-lookups.ts"],"sourcesContent":["import { useTargetGroupStore } from '@/features/settings/target-groups/store';\r\nimport { usePaymentMethodStore } from '@/features/settings/payments/methods/store';\r\nimport { useCashbookStore } from '@/features/cashbook/store';\r\nimport { useReceiptTypeStore } from '@/features/settings/receipt-types/store';\r\nimport { usePaymentTypeStore } from '@/features/settings/payments/types/store';\r\nimport type { TargetGroup } from '@/features/settings/target-groups/types';\r\nimport type { PaymentMethod } from '@/features/settings/payments/methods/types';\r\nimport type { CashAccount } from '@/features/cashbook/types';\r\nimport type { ReceiptType } from '@/features/settings/receipt-types/types';\r\nimport type { PaymentType } from '@/features/settings/payments/types/types';\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\nconst normalizeName = (value?: string | null) => (value ?? '').trim().toLowerCase();\r\n\r\nexport const DEFAULT_CUSTOMER_GROUP = 'kh√°ch h√†ng';\r\n\r\nexport const pickTargetGroup = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n  fallbackName?: string | undefined;\r\n}): TargetGroup | null => {\r\n  const groups = useTargetGroupStore.getState().data ?? [];\r\n  if (groups.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = groups.find(group => group.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  const lookupNames = [options?.name, options?.fallbackName, DEFAULT_CUSTOMER_GROUP].filter(Boolean) as string[];\r\n  for (const candidate of lookupNames) {\r\n    const normalized = normalizeName(candidate);\r\n    const match = groups.find(group => normalizeName(group.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return groups[0] ?? null;\r\n};\r\n\r\nexport const pickPaymentMethod = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n}): PaymentMethod | null => {\r\n  const methods = usePaymentMethodStore.getState().data ?? [];\r\n  if (methods.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = methods.find(method => method.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  if (options?.name) {\r\n    const normalized = normalizeName(options.name);\r\n    const match = methods.find(method => normalizeName(method.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return methods.find(method => method.isDefault) ?? methods[0] ?? null;\r\n};\r\n\r\nexport const pickAccount = (options: {\r\n  accountSystemId?: SystemId | undefined;\r\n  preferredType?: 'cash' | 'bank' | undefined;\r\n  branchSystemId?: SystemId | undefined;\r\n  paymentMethodName?: string | undefined;\r\n}): CashAccount | null => {\r\n  const { accounts } = useCashbookStore.getState();\r\n  if (!accounts || accounts.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options.accountSystemId) {\r\n    const match = accounts.find(account => account.systemId === options.accountSystemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  let preferredType = options.preferredType;\r\n  if (!preferredType && options.paymentMethodName) {\r\n    const normalizedMethod = normalizeName(options.paymentMethodName);\r\n    preferredType = normalizedMethod === 'ti·ªÅn m·∫∑t' ? 'cash' : normalizedMethod === 'chuy·ªÉn kho·∫£n' ? 'bank' : undefined;\r\n  }\r\n\r\n  const candidates = preferredType ? accounts.filter(account => account.type === preferredType) : accounts;\r\n\r\n  if (candidates.length === 0) {\r\n    return accounts[0];\r\n  }\r\n\r\n  return (\r\n    candidates.find(account => account.branchSystemId && options.branchSystemId && account.branchSystemId === options.branchSystemId) ??\r\n    candidates.find(account => account.isDefault) ??\r\n    candidates[0]\r\n  );\r\n};\r\n\r\nexport const pickReceiptType = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n}): ReceiptType | null => {\r\n  const types = useReceiptTypeStore.getState().data ?? [];\r\n  if (types.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = types.find(type => type.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  if (options?.name) {\r\n    const normalized = normalizeName(options.name);\r\n    const match = types.find(type => normalizeName(type.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return types[0] ?? null;\r\n};\r\n\r\nexport const pickPaymentType = (options?: {\r\n  systemId?: SystemId | undefined;\r\n  name?: string | undefined;\r\n}): PaymentType | null => {\r\n  const types = usePaymentTypeStore.getState().data ?? [];\r\n  if (types.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  if (options?.systemId) {\r\n    const match = types.find(type => type.systemId === options.systemId);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  if (options?.name) {\r\n    const normalized = normalizeName(options.name);\r\n    const match = types.find(type => normalizeName(type.name) === normalized);\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n\r\n  return types[0] ?? null;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAQA,MAAM,gBAAgB,CAAC,QAA0B,CAAC,SAAS,EAAE,EAAE,IAAI,GAAG,WAAW;AAE1E,MAAM,yBAAyB;AAE/B,MAAM,kBAAkB,CAAC;IAK9B,MAAM,SAAS,wKAAmB,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE;IACxD,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,OAAO;IACT;IAEA,IAAI,SAAS,UAAU;QACrB,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,QAAS,MAAM,QAAQ,KAAK,QAAQ,QAAQ;QACtE,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,MAAM,cAAc;QAAC,SAAS;QAAM,SAAS;QAAc;KAAuB,CAAC,MAAM,CAAC;IAC1F,KAAK,MAAM,aAAa,YAAa;QACnC,MAAM,aAAa,cAAc;QACjC,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,QAAS,cAAc,MAAM,IAAI,MAAM;QACjE,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,OAAO,MAAM,CAAC,EAAE,IAAI;AACtB;AAEO,MAAM,oBAAoB,CAAC;IAIhC,MAAM,UAAU,6KAAqB,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE;IAC3D,IAAI,QAAQ,MAAM,KAAK,GAAG;QACxB,OAAO;IACT;IAEA,IAAI,SAAS,UAAU;QACrB,MAAM,QAAQ,QAAQ,IAAI,CAAC,CAAA,SAAU,OAAO,QAAQ,KAAK,QAAQ,QAAQ;QACzE,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,IAAI,SAAS,MAAM;QACjB,MAAM,aAAa,cAAc,QAAQ,IAAI;QAC7C,MAAM,QAAQ,QAAQ,IAAI,CAAC,CAAA,SAAU,cAAc,OAAO,IAAI,MAAM;QACpE,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,OAAO,QAAQ,IAAI,CAAC,CAAA,SAAU,OAAO,SAAS,KAAK,OAAO,CAAC,EAAE,IAAI;AACnE;AAEO,MAAM,cAAc,CAAC;IAM1B,MAAM,EAAE,QAAQ,EAAE,GAAG,iJAAgB,CAAC,QAAQ;IAC9C,IAAI,CAAC,YAAY,SAAS,MAAM,KAAK,GAAG;QACtC,OAAO;IACT;IAEA,IAAI,QAAQ,eAAe,EAAE;QAC3B,MAAM,QAAQ,SAAS,IAAI,CAAC,CAAA,UAAW,QAAQ,QAAQ,KAAK,QAAQ,eAAe;QACnF,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,IAAI,gBAAgB,QAAQ,aAAa;IACzC,IAAI,CAAC,iBAAiB,QAAQ,iBAAiB,EAAE;QAC/C,MAAM,mBAAmB,cAAc,QAAQ,iBAAiB;QAChE,gBAAgB,qBAAqB,aAAa,SAAS,qBAAqB,iBAAiB,SAAS;IAC5G;IAEA,MAAM,aAAa,gBAAgB,SAAS,MAAM,CAAC,CAAA,UAAW,QAAQ,IAAI,KAAK,iBAAiB;IAEhG,IAAI,WAAW,MAAM,KAAK,GAAG;QAC3B,OAAO,QAAQ,CAAC,EAAE;IACpB;IAEA,OACE,WAAW,IAAI,CAAC,CAAA,UAAW,QAAQ,cAAc,IAAI,QAAQ,cAAc,IAAI,QAAQ,cAAc,KAAK,QAAQ,cAAc,KAChI,WAAW,IAAI,CAAC,CAAA,UAAW,QAAQ,SAAS,KAC5C,UAAU,CAAC,EAAE;AAEjB;AAEO,MAAM,kBAAkB,CAAC;IAI9B,MAAM,QAAQ,wKAAmB,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE;IACvD,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,OAAO;IACT;IAEA,IAAI,SAAS,UAAU;QACrB,MAAM,QAAQ,MAAM,IAAI,CAAC,CAAA,OAAQ,KAAK,QAAQ,KAAK,QAAQ,QAAQ;QACnE,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,IAAI,SAAS,MAAM;QACjB,MAAM,aAAa,cAAc,QAAQ,IAAI;QAC7C,MAAM,QAAQ,MAAM,IAAI,CAAC,CAAA,OAAQ,cAAc,KAAK,IAAI,MAAM;QAC9D,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,OAAO,KAAK,CAAC,EAAE,IAAI;AACrB;AAEO,MAAM,kBAAkB,CAAC;IAI9B,MAAM,QAAQ,yKAAmB,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAE;IACvD,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,OAAO;IACT;IAEA,IAAI,SAAS,UAAU;QACrB,MAAM,QAAQ,MAAM,IAAI,CAAC,CAAA,OAAQ,KAAK,QAAQ,KAAK,QAAQ,QAAQ;QACnE,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,IAAI,SAAS,MAAM;QACjB,MAAM,aAAa,cAAc,QAAQ,IAAI;QAC7C,MAAM,QAAQ,MAAM,IAAI,CAAC,CAAA,OAAQ,cAAc,KAAK,IAAI,MAAM;QAC9D,IAAI,OAAO;YACT,OAAO;QACT;IACF;IAEA,OAAO,KAAK,CAAC,EAAE,IAAI;AACrB"}},
    {"offset": {"line": 9299, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/contexts/auth-context.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { useSession, signOut } from 'next-auth/react';\r\n// REMOVED: Heavy import causing slow compile\r\n// import { useEmployeeStore } from '../features/employees/store';\r\nimport type { Employee } from '../features/employees/types';\r\nimport { loadGeneralSettings, clearGeneralSettingsCache } from '../lib/settings-cache';\r\n\r\ninterface User {\r\n  systemId: string;\r\n  email: string;\r\n  fullName?: string;\r\n  name?: string;\r\n  role: 'ADMIN' | 'MANAGER' | 'STAFF' | 'admin' | 'user';\r\n  employeeId?: string;\r\n  employee?: Employee;\r\n  verified?: boolean;\r\n}\r\n\r\ninterface CurrentUserInfo {\r\n  systemId: string;\r\n  name: string;\r\n  email?: string;\r\n  role?: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  employee: Employee | null;\r\n  isAuthenticated: boolean;\r\n  isAdmin: boolean;\r\n  isLoading: boolean;\r\n  logout: () => Promise<void>;\r\n  updateUser: (updates: Partial<User>) => void;\r\n  refreshUser: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = React.createContext<AuthContextType | null>(null);\r\n\r\n// In-memory user cache\r\nlet cachedUser: User | null = null;\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const { data: session, status } = useSession();\r\n  // REMOVED: Heavy store import - use employee from session instead\r\n  // const { data: employees } = useEmployeeStore();\r\n  const [user, setUser] = React.useState<User | null>(cachedUser);\r\n  const isLoading = status === 'loading';\r\n\r\n  // Load general settings when authenticated\r\n  React.useEffect(() => {\r\n    if (status === 'authenticated') {\r\n      // Load settings from database into cache\r\n      loadGeneralSettings().catch(console.error);\r\n    } else if (status === 'unauthenticated') {\r\n      // Clear settings cache on logout\r\n      clearGeneralSettingsCache();\r\n    }\r\n  }, [status]);\r\n\r\n  // Sync user from NextAuth session\r\n  React.useEffect(() => {\r\n    if (status === 'authenticated' && session?.user) {\r\n      const sessionUser = session.user as any;\r\n      const userObj: User = {\r\n        systemId: sessionUser.id || sessionUser.systemId || '',\r\n        email: sessionUser.email || '',\r\n        fullName: sessionUser.name,\r\n        name: sessionUser.name || sessionUser.email,\r\n        role: sessionUser.role || 'STAFF',\r\n        employeeId: sessionUser.employeeId,\r\n        employee: sessionUser.employee,\r\n      };\r\n      cachedUser = userObj;\r\n      setUser(userObj);\r\n    } else if (status === 'unauthenticated') {\r\n      cachedUser = null;\r\n      setUser(null);\r\n    }\r\n  }, [session, status]);\r\n\r\n  // Find employee based on email or employeeId\r\n  // SIMPLIFIED: Use employee from session directly instead of store lookup\r\n  const employee = React.useMemo(() => {\r\n    if (!user) return null;\r\n    \r\n    // Use employee from user data if available (from NextAuth session)\r\n    if (user.employee) return user.employee as Employee;\r\n    \r\n    // Return null - employee lookup should be done by components that need it\r\n    return null;\r\n  }, [user]);\r\n\r\n  // Logout via NextAuth\r\n  const logout = React.useCallback(async () => {\r\n    try {\r\n      await signOut({ redirect: false });\r\n      cachedUser = null;\r\n      setUser(null);\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Refresh user - just trigger session refresh\r\n  const refreshUser = React.useCallback(async () => {\r\n    // NextAuth session will be refreshed automatically\r\n    // This is a no-op placeholder for compatibility\r\n  }, []);\r\n\r\n  const updateUser = React.useCallback((updates: Partial<User>) => {\r\n    setUser(prev => {\r\n      if (!prev) return null;\r\n      const updated = { ...prev, ...updates };\r\n      cachedUser = updated;\r\n      return updated;\r\n    });\r\n  }, []);\r\n\r\n  const value = React.useMemo(\r\n    () => ({\r\n      user,\r\n      employee,\r\n      isAuthenticated: !!user,\r\n      isAdmin: user?.role === 'ADMIN' || user?.role === 'admin',\r\n      isLoading,\r\n      logout,\r\n      updateUser,\r\n      refreshUser,\r\n    }),\r\n    [user, employee, isLoading, logout, updateUser, refreshUser]\r\n  );\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = React.useContext(AuthContext);\r\n  if (!context) {\r\n    // Development warning\r\n    if (typeof window !== 'undefined' && process.env.NODE_ENV === 'development') {\r\n      console.warn('useAuth must be used within AuthProvider - returning default values');\r\n    }\r\n    // Return safe defaults instead of throwing\r\n    return {\r\n      user: null,\r\n      employee: null,\r\n      isAuthenticated: false,\r\n      isAdmin: false,\r\n      isLoading: true,\r\n      logout: async () => {},\r\n      updateUser: () => {},\r\n      refreshUser: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n}\r\n\r\n// Helper to get current user systemId for store tracking\r\n// NOTE: This is now async-first, but provides sync fallback for backwards compat\r\nexport function getCurrentUserInfo(): CurrentUserInfo {\r\n  // Use cached user if available\r\n  if (cachedUser) {\r\n    return {\r\n      systemId: cachedUser.employeeId || cachedUser.systemId || 'SYSTEM',\r\n      name: cachedUser.fullName || cachedUser.name || 'H·ªá th·ªëng',\r\n      email: cachedUser.email,\r\n      role: cachedUser.role,\r\n    };\r\n  }\r\n  return { systemId: 'SYSTEM', name: 'H·ªá th·ªëng' };\r\n}\r\n\r\nexport function getCurrentUserSystemId(): string {\r\n  return getCurrentUserInfo().systemId;\r\n}\r\n\r\nexport function getCurrentUserName(): string {\r\n  return getCurrentUserInfo().name;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9473, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/repositories/in-memory-repository.ts"],"sourcesContent":["import type { SystemId } from '../lib/id-types';\r\nimport type { CrudState, ItemWithSystemId } from '../lib/store-factory';\r\nimport type { CrudRepository } from './types';\r\n\r\n/**\r\n * Adapter m·∫∑c ƒë·ªãnh d√πng tr·ª±c ti·∫øp Zustand store ƒë·ªÉ gi·∫£ l·∫≠p t·∫ßng persistence.\r\n * Gi·ªØ c√πng signature v·ªõi repository interface ƒë·ªÉ sau n√†y thay b·∫±ng API/DB d·ªÖ d√†ng.\r\n */\r\nexport const createInMemoryRepository = <TEntity extends ItemWithSystemId>(\r\n  stateGetter: () => CrudState<TEntity>\r\n): CrudRepository<TEntity, Omit<TEntity, 'systemId'>, Partial<TEntity>> => {\r\n  const getStore = () => stateGetter();\r\n\r\n  const ensureEntity = (systemId: SystemId): TEntity => {\r\n    const entity = getStore().findById(systemId);\r\n    if (!entity) {\r\n      throw new Error(`Kh√¥ng t√¨m th·∫•y entity v·ªõi systemId=${systemId}`);\r\n    }\r\n    return entity;\r\n  };\r\n\r\n  return {\r\n    async list() {\r\n      return [...getStore().data];\r\n    },\r\n    async getById(systemId) {\r\n      return getStore().findById(systemId);\r\n    },\r\n    async create(payload) {\r\n      return getStore().add(payload as Omit<TEntity, 'systemId'>);\r\n    },\r\n    async update(systemId, payload) {\r\n      ensureEntity(systemId);\r\n      getStore().update(systemId, payload);\r\n      return ensureEntity(systemId);\r\n    },\r\n    async softDelete(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().remove(systemId);\r\n    },\r\n    async restore(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().restore(systemId);\r\n      return getStore().findById(systemId);\r\n    },\r\n    async hardDelete(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().hardDelete(systemId);\r\n    },\r\n  };\r\n};\r\n"],"names":[],"mappings":";;;;AAQO,MAAM,2BAA2B,CACtC;IAEA,MAAM,WAAW,IAAM;IAEvB,MAAM,eAAe,CAAC;QACpB,MAAM,SAAS,WAAW,QAAQ,CAAC;QACnC,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,MAAM,CAAC,mCAAmC,EAAE,UAAU;QAClE;QACA,OAAO;IACT;IAEA,OAAO;QACL,MAAM;YACJ,OAAO;mBAAI,WAAW,IAAI;aAAC;QAC7B;QACA,MAAM,SAAQ,QAAQ;YACpB,OAAO,WAAW,QAAQ,CAAC;QAC7B;QACA,MAAM,QAAO,OAAO;YAClB,OAAO,WAAW,GAAG,CAAC;QACxB;QACA,MAAM,QAAO,QAAQ,EAAE,OAAO;YAC5B,aAAa;YACb,WAAW,MAAM,CAAC,UAAU;YAC5B,OAAO,aAAa;QACtB;QACA,MAAM,YAAW,QAAQ;YACvB,aAAa;YACb,WAAW,MAAM,CAAC;QACpB;QACA,MAAM,SAAQ,QAAQ;YACpB,aAAa;YACb,WAAW,OAAO,CAAC;YACnB,OAAO,WAAW,QAAQ,CAAC;QAC7B;QACA,MAAM,YAAW,QAAQ;YACvB,aAAa;YACb,WAAW,UAAU,CAAC;QACxB;IACF;AACF"}},
    {"offset": {"line": 9522, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/activity-history-helper.ts"],"sourcesContent":["/**\r\n * Activity History Helper\r\n * \r\n * Helper ƒë·ªÉ t·∫°o c√°c entry l·ªãch s·ª≠ ho·∫°t ƒë·ªông m·ªôt c√°ch nh·∫•t qu√°n\r\n * D√πng chung cho t·∫•t c·∫£ c√°c modules trong h·ªá th·ªëng\r\n * \r\n * NOTE: ƒê√£ remove import useEmployeeStore ƒë·ªÉ tr√°nh circular dependency\r\n * v√† c·∫£i thi·ªán compile time\r\n */\r\n\r\nimport type { HistoryEntry } from '../components/ActivityHistory';\r\nimport { getCurrentUserInfo as getAuthUserInfo } from '../contexts/auth-context';\r\nimport type { SystemId } from './id-types';\r\n\r\n// Re-export HistoryEntry type for convenience\r\nexport type { HistoryEntry } from '../components/ActivityHistory';\r\n\r\n/**\r\n * L·∫•y th√¥ng tin ng∆∞·ªùi d√πng hi·ªán t·∫°i t·ª´ auth context\r\n * NOTE: Avatar lookup t·ª´ employee store ƒë√£ b·ªã remove ƒë·ªÉ tr√°nh circular dependency\r\n */\r\nexport function getCurrentUserInfo(): { systemId: string; name: string; avatar?: string } {\r\n  const authInfo = getAuthUserInfo();\r\n  \r\n  return {\r\n    systemId: authInfo.systemId || 'SYSTEM',\r\n    name: authInfo.name || 'H·ªá th·ªëng',\r\n    avatar: undefined, // Avatar will be fetched by component if needed\r\n  };\r\n}\r\n\r\n/**\r\n * L·∫•y th√¥ng tin nh√¢n vi√™n t·ª´ systemId\r\n * NOTE: This function now requires employee data to be passed in\r\n * to avoid circular dependency with employee store\r\n */\r\nexport function getEmployeeInfoFromData(\r\n  employeeSystemId: SystemId | string,\r\n  employees: Array<{ systemId: string; fullName: string; avatarUrl?: string }>\r\n): { systemId: string; name: string; avatar?: string } {\r\n  const employee = employees.find(e => e.systemId === employeeSystemId);\r\n  \r\n  if (employee) {\r\n    return {\r\n      systemId: employee.systemId,\r\n      name: employee.fullName,\r\n      avatar: employee.avatarUrl,\r\n    };\r\n  }\r\n  \r\n  // Fallback to system\r\n  return {\r\n    systemId: String(employeeSystemId) || 'SYSTEM',\r\n    name: 'H·ªá th·ªëng',\r\n  };\r\n}\r\n\r\n/**\r\n * @deprecated Use getEmployeeInfoFromData instead\r\n */\r\nexport function getEmployeeInfo(employeeSystemId: SystemId | string): { systemId: string; name: string; avatar?: string } {\r\n  // Return minimal info without employee store lookup\r\n  return {\r\n    systemId: String(employeeSystemId) || 'SYSTEM',\r\n    name: 'H·ªá th·ªëng',\r\n  };\r\n}\r\n\r\n/**\r\n * T·∫°o m·ªôt history entry m·ªõi\r\n */\r\nexport function createHistoryEntry(\r\n  action: HistoryEntry['action'],\r\n  userOrDescription: { systemId: string; name: string; avatar?: string } | string,\r\n  descriptionOrMetadata?: string | HistoryEntry['metadata'],\r\n  metadata?: HistoryEntry['metadata']\r\n): HistoryEntry {\r\n  const hasUserObject = typeof userOrDescription === 'object' && userOrDescription !== null;\r\n  const user = hasUserObject ? userOrDescription : getCurrentUserInfo();\r\n  const description = (hasUserObject ? descriptionOrMetadata : userOrDescription) as string | undefined;\r\n  const meta = (hasUserObject ? metadata : descriptionOrMetadata) as HistoryEntry['metadata'] | undefined;\r\n\r\n  return {\r\n    id: `history-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n    action,\r\n    timestamp: new Date(),\r\n    user: {\r\n      systemId: user.systemId,\r\n      name: user.name,\r\n      avatar: user.avatar,\r\n    },\r\n    description: description ?? '',\r\n    metadata: meta,\r\n  };\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"created\"\r\n */\r\nexport function createCreatedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('created', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"updated\"\r\n */\r\nexport function createUpdatedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('updated', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"status_changed\"\r\n */\r\nexport function createStatusChangedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  oldStatus: string,\r\n  newStatus: string,\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry(\r\n    'status_changed',\r\n    user,\r\n    description,\r\n    { field: 'status', oldValue: oldStatus, newValue: newStatus }\r\n  );\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"deleted\"\r\n */\r\nexport function createDeletedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('deleted', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"assigned\"\r\n */\r\nexport function createAssignedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('assigned', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"payment_made\"\r\n */\r\nexport function createPaymentEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('payment_made', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"comment_added\"\r\n */\r\nexport function createCommentEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('comment_added', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"cancelled\"\r\n */\r\nexport function createCancelledEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('cancelled', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"verified\"\r\n */\r\nexport function createVerifiedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('verified', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"ended\"\r\n */\r\nexport function createEndedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('ended', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho action \"reopened\"\r\n */\r\nexport function createReopenedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('reopened', user, description);\r\n}\r\n\r\n/**\r\n * T·∫°o history entry cho product actions\r\n */\r\nexport function createProductEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  action: 'product_added' | 'product_updated' | 'product_removed',\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry(action, user, description);\r\n}\r\n\r\n/**\r\n * Helper ƒë·ªÉ append history entry v√†o existing array\r\n */\r\nexport function appendHistoryEntry(\r\n  existingHistory: HistoryEntry[] | undefined,\r\n  ...newEntries: HistoryEntry[]\r\n): HistoryEntry[] {\r\n  return [...(existingHistory || []), ...newEntries];\r\n}\r\n\r\n/**\r\n * Helper ƒë·ªÉ t·∫°o nhi·ªÅu history entries c√πng l√∫c\r\n */\r\nexport function createBulkUpdateEntries(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  changes: Array<{ field: string; description: string }>\r\n): HistoryEntry[] {\r\n  return changes.map(change => createHistoryEntry('updated', user, change.description));\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9671, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/employees/store.ts"],"sourcesContent":["import { createCrudStore, CrudState } from '../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { Employee } from './types';\r\nimport type { HistoryEntry } from '../../components/ActivityHistory';\r\nimport Fuse from 'fuse.js';\r\nimport { getCurrentUserSystemId } from '../../contexts/auth-context';\r\nimport { registerBreadcrumbStore } from '../../lib/breadcrumb-generator'; // ‚úÖ NEW\r\nimport { type SystemId } from '../../lib/id-types';\r\nimport { createInMemoryRepository } from '../../repositories/in-memory-repository';\r\nimport { \r\n  createHistoryEntry, \r\n  getCurrentUserInfo,\r\n  appendHistoryEntry \r\n} from '../../lib/activity-history-helper';\r\n\r\ntype EmployeePersistenceAdapter = {\r\n  create: (payload: Omit<Employee, 'systemId'>) => Promise<Employee>;\r\n  update: (systemId: SystemId, payload: Partial<Employee>) => Promise<Employee>;\r\n  softDelete: (systemId: SystemId) => Promise<void>;\r\n  restore: (systemId: SystemId) => Promise<Employee | undefined>;\r\n  hardDelete: (systemId: SystemId) => Promise<void>;\r\n};\r\n\r\nconst baseStore = createCrudStore<Employee>([], 'employees', {\r\n  businessIdField: 'id',\r\n  getCurrentUser: getCurrentUserSystemId, // ‚úÖ Track who creates/updates\r\n  apiEndpoint: '/api/employees',\r\n});\r\n\r\n// ‚úÖ Wrap add method to include activity history\r\nconst originalAdd = baseStore.getState().add;\r\nconst wrappedAdd = (item: Omit<Employee, 'systemId'>): Employee => {\r\n  const userInfo = getCurrentUserInfo();\r\n  const historyEntry = createHistoryEntry(\r\n    'created',\r\n    `${userInfo.name} ƒë√£ t·∫°o h·ªì s∆° nh√¢n vi√™n ${item.fullName} (${item.id})`,\r\n    userInfo\r\n  );\r\n  \r\n  const newEmployee = originalAdd({\r\n    ...item,\r\n    activityHistory: [historyEntry],\r\n  });\r\n  \r\n  return newEmployee;\r\n};\r\n\r\n// ‚úÖ Wrap update method to include activity history\r\nconst originalUpdate = baseStore.getState().update;\r\nconst wrappedUpdate = (systemId: SystemId, updates: Partial<Employee>): void => {\r\n  const currentEmployee = baseStore.getState().data.find(e => e.systemId === systemId);\r\n  if (!currentEmployee) return;\r\n  \r\n  const userInfo = getCurrentUserInfo();\r\n  const historyEntries: HistoryEntry[] = [];\r\n  \r\n  // Track important field changes\r\n  const trackedFields: { key: keyof Employee; label: string }[] = [\r\n    { key: 'fullName', label: 'h·ªç t√™n' },\r\n    { key: 'jobTitle', label: 'ch·ª©c danh' },\r\n    { key: 'department', label: 'ph√≤ng ban' },\r\n    { key: 'employmentStatus', label: 'tr·∫°ng th√°i l√†m vi·ªác' },\r\n    { key: 'employeeType', label: 'lo·∫°i nh√¢n vi√™n' },\r\n    { key: 'baseSalary', label: 'l∆∞∆°ng c∆° b·∫£n' },\r\n    { key: 'phone', label: 's·ªë ƒëi·ªán tho·∫°i' },\r\n    { key: 'workEmail', label: 'email c√¥ng vi·ªác' },\r\n    { key: 'role', label: 'vai tr√≤' },\r\n  ];\r\n  \r\n  trackedFields.forEach(({ key, label }) => {\r\n    if (updates[key] !== undefined && updates[key] !== currentEmployee[key]) {\r\n      const oldValue = currentEmployee[key];\r\n      const newValue = updates[key];\r\n      \r\n      // Format values for display\r\n      let oldDisplay = oldValue;\r\n      let newDisplay = newValue;\r\n      \r\n      if (key === 'baseSalary') {\r\n        oldDisplay = new Intl.NumberFormat('vi-VN').format(oldValue as number) + 'ƒë';\r\n        newDisplay = new Intl.NumberFormat('vi-VN').format(newValue as number) + 'ƒë';\r\n      }\r\n      \r\n      historyEntries.push(createHistoryEntry(\r\n        'updated',\r\n        `${userInfo.name} ƒë√£ c·∫≠p nh·∫≠t ${label}: \"${oldDisplay || '(tr·ªëng)'}\" ‚Üí \"${newDisplay}\"`,\r\n        userInfo,\r\n        { field: key, oldValue, newValue }\r\n      ));\r\n    }\r\n  });\r\n  \r\n  // If status changed specifically\r\n  if (updates.employmentStatus && updates.employmentStatus !== currentEmployee.employmentStatus) {\r\n    historyEntries.push(createHistoryEntry(\r\n      'status_changed',\r\n      `${userInfo.name} ƒë√£ thay ƒë·ªïi tr·∫°ng th√°i l√†m vi·ªác t·ª´ \"${currentEmployee.employmentStatus}\" th√†nh \"${updates.employmentStatus}\"`,\r\n      userInfo,\r\n      { field: 'employmentStatus', oldValue: currentEmployee.employmentStatus, newValue: updates.employmentStatus }\r\n    ));\r\n  }\r\n  \r\n  // If no specific changes tracked, add generic update entry\r\n  if (historyEntries.length === 0) {\r\n    historyEntries.push(createHistoryEntry(\r\n      'updated',\r\n      `${userInfo.name} ƒë√£ c·∫≠p nh·∫≠t th√¥ng tin nh√¢n vi√™n`,\r\n      userInfo\r\n    ));\r\n  }\r\n  \r\n  const updatedHistory = appendHistoryEntry(currentEmployee.activityHistory, ...historyEntries);\r\n  \r\n  originalUpdate(systemId, {\r\n    ...updates,\r\n    activityHistory: updatedHistory,\r\n  });\r\n};\r\n\r\n// ‚úÖ Override base store methods\r\nbaseStore.setState({\r\n  add: wrappedAdd,\r\n  update: wrappedUpdate,\r\n});\r\n\r\nexport const employeeRepository = createInMemoryRepository<Employee>(() => baseStore.getState());\r\n\r\n// ‚úÖ API-backed persistence adapter - syncs to PostgreSQL\r\nconst API_ENDPOINT = '/api/employees';\r\n\r\nconst persistence: EmployeePersistenceAdapter = {\r\n  create: async (payload) => {\r\n    // First create locally for immediate UI update\r\n    const localResult = await employeeRepository.create(payload);\r\n    \r\n    // Then sync to API (background)\r\n    try {\r\n      const response = await fetch(API_ENDPOINT, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ ...payload, systemId: localResult.systemId }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Create sync failed, data saved locally');\r\n      } else {\r\n        console.log('[Employee API] Created:', localResult.systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Create sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  update: async (systemId, payload) => {\r\n    // First update locally\r\n    const localResult = await employeeRepository.update(systemId, payload);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'PATCH',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Update sync failed');\r\n      } else {\r\n        console.log('[Employee API] Updated:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Update sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  softDelete: async (systemId) => {\r\n    // First delete locally\r\n    await employeeRepository.softDelete(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ hard: false }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Soft delete sync failed');\r\n      } else {\r\n        console.log('[Employee API] Soft deleted:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Soft delete sync error:', e);\r\n    }\r\n  },\r\n  restore: async (systemId) => {\r\n    // First restore locally\r\n    const localResult = await employeeRepository.restore(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}/restore`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Restore sync failed');\r\n      } else {\r\n        console.log('[Employee API] Restored:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Restore sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  hardDelete: async (systemId) => {\r\n    // First delete locally\r\n    await employeeRepository.hardDelete(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ hard: true }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Hard delete sync failed');\r\n      } else {\r\n        console.log('[Employee API] Hard deleted:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Hard delete sync error:', e);\r\n    }\r\n  },\r\n};\r\n\r\n// ‚úÖ Register for breadcrumb auto-generation\r\nregisterBreadcrumbStore('employees', () => baseStore.getState());\r\n\r\n// Define enhanced interface\r\ninterface EmployeeStoreState extends CrudState<Employee> {\r\n  searchEmployees: (query: string, page: number, limit?: number) => Promise<{ items: { value: string; label: string }[], hasNextPage: boolean }>;\r\n  permanentDelete: (systemId: SystemId) => Promise<void>;\r\n  persistence: EmployeePersistenceAdapter;\r\n}\r\n\r\ntype EmployeeStoreHook = (() => EmployeeStoreState) & {\r\n  getState: () => EmployeeStoreState;\r\n  persistence: EmployeePersistenceAdapter;\r\n};\r\n\r\n// Augmented methods\r\nconst augmentedMethods = {\r\n    // FIX: Changed `page: number = 1` to `page: number` to make it a required parameter, matching Combobox prop type.\r\n    // ‚úÖ CRITICAL FIX: Create fresh Fuse instance on each search to avoid stale data\r\n    searchEmployees: async (query: string, page: number, limit: number = 20) => {\r\n        return new Promise<{ items: { value: string; label: string }[], hasNextPage: boolean }>(resolve => {\r\n            setTimeout(() => {\r\n                const allEmployees = baseStore.getState().data;\r\n                \r\n                // ‚úÖ Create fresh Fuse instance with current data\r\n                const fuse = new Fuse(allEmployees, {\r\n                    keys: ['fullName', 'id', 'phone', 'personalEmail', 'workEmail'],\r\n                    threshold: 0.3,\r\n                });\r\n                \r\n                const results = query ? fuse.search(query).map(r => r.item) : allEmployees;\r\n                \r\n                const start = (page - 1) * limit;\r\n                const end = start + limit;\r\n                const paginatedItems = results.slice(start, end);\r\n\r\n                resolve({\r\n                    items: paginatedItems.map(e => ({ value: e.systemId, label: e.fullName })),\r\n                    hasNextPage: end < results.length,\r\n                });\r\n            }, 300);\r\n        });\r\n    },\r\n    permanentDelete: async (systemId: SystemId) => {\r\n        await persistence.hardDelete(systemId);\r\n    }\r\n};\r\n\r\nconst useEmployeeStoreHook = (): EmployeeStoreState => {\r\n  const state = baseStore();\r\n  return {\r\n    ...state,\r\n    ...augmentedMethods, // This includes permanentDelete\r\n    persistence,\r\n  };\r\n};\r\n\r\nexport const useEmployeeStore = useEmployeeStoreHook as EmployeeStoreHook;\r\n\r\n// Export getState for non-hook usage\r\nuseEmployeeStore.getState = (): EmployeeStoreState => {\r\n  const state = baseStore.getState();\r\n  return {\r\n    ...state,\r\n    ...augmentedMethods,\r\n    persistence,\r\n  };\r\n};\r\n\r\nuseEmployeeStore.persistence = persistence;\r\n"],"names":[],"mappings":";;;;;;AAAA;AAIA;AACA;AACA,8NAA0E,QAAQ;AAElF;AACA;;;;;;;AAcA,MAAM,YAAY,IAAA,0IAAe,EAAW,EAAE,EAAE,aAAa;IAC3D,iBAAiB;IACjB,gBAAgB,sJAAsB;IACtC,aAAa;AACf;AAEA,gDAAgD;AAChD,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAC5C,MAAM,aAAa,CAAC;IAClB,MAAM,WAAW,IAAA,0JAAkB;IACnC,MAAM,eAAe,IAAA,0JAAkB,EACrC,WACA,GAAG,SAAS,IAAI,CAAC,wBAAwB,EAAE,KAAK,QAAQ,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,EACvE;IAGF,MAAM,cAAc,YAAY;QAC9B,GAAG,IAAI;QACP,iBAAiB;YAAC;SAAa;IACjC;IAEA,OAAO;AACT;AAEA,mDAAmD;AACnD,MAAM,iBAAiB,UAAU,QAAQ,GAAG,MAAM;AAClD,MAAM,gBAAgB,CAAC,UAAoB;IACzC,MAAM,kBAAkB,UAAU,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;IAC3E,IAAI,CAAC,iBAAiB;IAEtB,MAAM,WAAW,IAAA,0JAAkB;IACnC,MAAM,iBAAiC,EAAE;IAEzC,gCAAgC;IAChC,MAAM,gBAA0D;QAC9D;YAAE,KAAK;YAAY,OAAO;QAAS;QACnC;YAAE,KAAK;YAAY,OAAO;QAAY;QACtC;YAAE,KAAK;YAAc,OAAO;QAAY;QACxC;YAAE,KAAK;YAAoB,OAAO;QAAsB;QACxD;YAAE,KAAK;YAAgB,OAAO;QAAiB;QAC/C;YAAE,KAAK;YAAc,OAAO;QAAe;QAC3C;YAAE,KAAK;YAAS,OAAO;QAAgB;QACvC;YAAE,KAAK;YAAa,OAAO;QAAkB;QAC7C;YAAE,KAAK;YAAQ,OAAO;QAAU;KACjC;IAED,cAAc,OAAO,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE;QACnC,IAAI,OAAO,CAAC,IAAI,KAAK,aAAa,OAAO,CAAC,IAAI,KAAK,eAAe,CAAC,IAAI,EAAE;YACvE,MAAM,WAAW,eAAe,CAAC,IAAI;YACrC,MAAM,WAAW,OAAO,CAAC,IAAI;YAE7B,4BAA4B;YAC5B,IAAI,aAAa;YACjB,IAAI,aAAa;YAEjB,IAAI,QAAQ,cAAc;gBACxB,aAAa,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC,YAAsB;gBACzE,aAAa,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC,YAAsB;YAC3E;YAEA,eAAe,IAAI,CAAC,IAAA,0JAAkB,EACpC,WACA,GAAG,SAAS,IAAI,CAAC,aAAa,EAAE,MAAM,GAAG,EAAE,cAAc,UAAU,KAAK,EAAE,WAAW,CAAC,CAAC,EACvF,UACA;gBAAE,OAAO;gBAAK;gBAAU;YAAS;QAErC;IACF;IAEA,iCAAiC;IACjC,IAAI,QAAQ,gBAAgB,IAAI,QAAQ,gBAAgB,KAAK,gBAAgB,gBAAgB,EAAE;QAC7F,eAAe,IAAI,CAAC,IAAA,0JAAkB,EACpC,kBACA,GAAG,SAAS,IAAI,CAAC,qCAAqC,EAAE,gBAAgB,gBAAgB,CAAC,SAAS,EAAE,QAAQ,gBAAgB,CAAC,CAAC,CAAC,EAC/H,UACA;YAAE,OAAO;YAAoB,UAAU,gBAAgB,gBAAgB;YAAE,UAAU,QAAQ,gBAAgB;QAAC;IAEhH;IAEA,2DAA2D;IAC3D,IAAI,eAAe,MAAM,KAAK,GAAG;QAC/B,eAAe,IAAI,CAAC,IAAA,0JAAkB,EACpC,WACA,GAAG,SAAS,IAAI,CAAC,gCAAgC,CAAC,EAClD;IAEJ;IAEA,MAAM,iBAAiB,IAAA,0JAAkB,EAAC,gBAAgB,eAAe,KAAK;IAE9E,eAAe,UAAU;QACvB,GAAG,OAAO;QACV,iBAAiB;IACnB;AACF;AAEA,gCAAgC;AAChC,UAAU,QAAQ,CAAC;IACjB,KAAK;IACL,QAAQ;AACV;AAEO,MAAM,qBAAqB,IAAA,sKAAwB,EAAW,IAAM,UAAU,QAAQ;AAE7F,yDAAyD;AACzD,MAAM,eAAe;AAErB,MAAM,cAA0C;IAC9C,QAAQ,OAAO;QACb,+CAA+C;QAC/C,MAAM,cAAc,MAAM,mBAAmB,MAAM,CAAC;QAEpD,gCAAgC;QAChC,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,cAAc;gBACzC,QAAQ;gBACR,aAAa;gBACb,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,GAAG,OAAO;oBAAE,UAAU,YAAY,QAAQ;gBAAC;YACpE;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,QAAQ,IAAI,CAAC;YACf,OAAO;gBACL,QAAQ,GAAG,CAAC,2BAA2B,YAAY,QAAQ;YAC7D;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,qCAAqC;QACpD;QAEA,OAAO;IACT;IACA,QAAQ,OAAO,UAAU;QACvB,uBAAuB;QACvB,MAAM,cAAc,MAAM,mBAAmB,MAAM,CAAC,UAAU;QAE9D,mBAAmB;QACnB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,UAAU,EAAE;gBAC1D,QAAQ;gBACR,aAAa;gBACb,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,QAAQ,IAAI,CAAC;YACf,OAAO;gBACL,QAAQ,GAAG,CAAC,2BAA2B;YACzC;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,qCAAqC;QACpD;QAEA,OAAO;IACT;IACA,YAAY,OAAO;QACjB,uBAAuB;QACvB,MAAM,mBAAmB,UAAU,CAAC;QAEpC,mBAAmB;QACnB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,UAAU,EAAE;gBAC1D,QAAQ;gBACR,aAAa;gBACb,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM;gBAAM;YACrC;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,QAAQ,IAAI,CAAC;YACf,OAAO;gBACL,QAAQ,GAAG,CAAC,gCAAgC;YAC9C;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,0CAA0C;QACzD;IACF;IACA,SAAS,OAAO;QACd,wBAAwB;QACxB,MAAM,cAAc,MAAM,mBAAmB,OAAO,CAAC;QAErD,mBAAmB;QACnB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,SAAS,QAAQ,CAAC,EAAE;gBAClE,QAAQ;gBACR,aAAa;gBACb,SAAS;oBAAE,gBAAgB;gBAAmB;YAChD;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,QAAQ,IAAI,CAAC;YACf,OAAO;gBACL,QAAQ,GAAG,CAAC,4BAA4B;YAC1C;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,sCAAsC;QACrD;QAEA,OAAO;IACT;IACA,YAAY,OAAO;QACjB,uBAAuB;QACvB,MAAM,mBAAmB,UAAU,CAAC;QAEpC,mBAAmB;QACnB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,UAAU,EAAE;gBAC1D,QAAQ;gBACR,aAAa;gBACb,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM;gBAAK;YACpC;YACA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,QAAQ,IAAI,CAAC;YACf,OAAO;gBACL,QAAQ,GAAG,CAAC,gCAAgC;YAC9C;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,0CAA0C;QACzD;IACF;AACF;AAEA,4CAA4C;AAC5C,IAAA,yJAAuB,EAAC,aAAa,IAAM,UAAU,QAAQ;AAc7D,oBAAoB;AACpB,MAAM,mBAAmB;IACrB,kHAAkH;IAClH,gFAAgF;IAChF,iBAAiB,OAAO,OAAe,MAAc,QAAgB,EAAE;QACnE,OAAO,IAAI,QAA6E,CAAA;YACpF,WAAW;gBACP,MAAM,eAAe,UAAU,QAAQ,GAAG,IAAI;gBAE9C,iDAAiD;gBACjD,MAAM,OAAO,IAAI,sJAAI,CAAC,cAAc;oBAChC,MAAM;wBAAC;wBAAY;wBAAM;wBAAS;wBAAiB;qBAAY;oBAC/D,WAAW;gBACf;gBAEA,MAAM,UAAU,QAAQ,KAAK,MAAM,CAAC,OAAO,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI;gBAE9D,MAAM,QAAQ,CAAC,OAAO,CAAC,IAAI;gBAC3B,MAAM,MAAM,QAAQ;gBACpB,MAAM,iBAAiB,QAAQ,KAAK,CAAC,OAAO;gBAE5C,QAAQ;oBACJ,OAAO,eAAe,GAAG,CAAC,CAAA,IAAK,CAAC;4BAAE,OAAO,EAAE,QAAQ;4BAAE,OAAO,EAAE,QAAQ;wBAAC,CAAC;oBACxE,aAAa,MAAM,QAAQ,MAAM;gBACrC;YACJ,GAAG;QACP;IACJ;IACA,iBAAiB,OAAO;QACpB,MAAM,YAAY,UAAU,CAAC;IACjC;AACJ;AAEA,MAAM,uBAAuB;IAC3B,MAAM,QAAQ;IACd,OAAO;QACL,GAAG,KAAK;QACR,GAAG,gBAAgB;QACnB;IACF;AACF;AAEO,MAAM,mBAAmB;AAEhC,qCAAqC;AACrC,iBAAiB,QAAQ,GAAG;IAC1B,MAAM,QAAQ,UAAU,QAAQ;IAChC,OAAO;QACL,GAAG,KAAK;QACR,GAAG,gBAAgB;QACnB;IACF;AACF;AAEA,iBAAiB,WAAW,GAAG"}},
    {"offset": {"line": 9980, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { subscribeWithSelector } from 'zustand/middleware';\r\nimport type { Receipt } from './types';\r\nimport type { HistoryEntry } from '../../components/ActivityHistory';\r\nimport { \r\n  findNextAvailableBusinessId, \r\n  generateSystemId, \r\n  getMaxBusinessIdCounter, \r\n  getMaxSystemIdCounter,\r\n  extractCounterFromBusinessId,\r\n  type EntityType \r\n} from '@/lib/id-utils';\r\nimport { asSystemId, asBusinessId, type BusinessId, type SystemId } from '@/lib/id-types';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport { pickAccount, pickPaymentMethod, pickReceiptType, pickTargetGroup } from '@/features/finance/document-lookups';\r\nimport { useEmployeeStore } from '../employees/store';\r\nimport { getCurrentUserSystemId } from '../../contexts/auth-context';\r\n\r\n// API sync helpers\r\nasync function syncToAPI(action: 'create' | 'update' | 'delete', data: any): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' ? '/api/receipts' : `/api/receipts/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.error(`[Receipts API] ${action} failed:`, await response.text());\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`[Receipts API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Helper to get current user info\r\nconst getCurrentUserInfo = () => {\r\n  const currentUserSystemId = getCurrentUserSystemId?.() || 'SYSTEM';\r\n  const employee = useEmployeeStore.getState().data.find(e => e.systemId === currentUserSystemId);\r\n  return {\r\n    systemId: currentUserSystemId,\r\n    name: employee?.fullName || 'H·ªá th·ªëng',\r\n    avatar: employee?.avatarUrl,\r\n  };\r\n};\r\n\r\n// Helper to create history entry\r\nconst createHistoryEntry = (\r\n  action: HistoryEntry['action'],\r\n  description: string,\r\n  metadata?: HistoryEntry['metadata']\r\n): HistoryEntry => ({\r\n  id: crypto.randomUUID(),\r\n  action,\r\n  timestamp: new Date(),\r\n  user: getCurrentUserInfo(),\r\n  description,\r\n  metadata,\r\n});\r\n\r\nconst SYSTEM_AUTHOR = asSystemId('SYSTEM');\r\nconst getCurrentReceiptAuthor = (): SystemId => {\r\n  const userId = getCurrentUserSystemId?.();\r\n  return userId ? asSystemId(userId) : SYSTEM_AUTHOR;\r\n};\r\n\r\nexport type ReceiptInput = Omit<Receipt, 'systemId' | 'id'> & { id?: BusinessId };\r\n\r\ninterface ReceiptStore {\r\n  data: Receipt[];\r\n  businessIdCounter: number;\r\n  systemIdCounter: number;\r\n  initialized: boolean;\r\n  add: (item: ReceiptInput) => Receipt;\r\n  addMultiple: (items: ReceiptInput[]) => void;\r\n  update: (systemId: SystemId, item: Receipt) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  findById: (systemId: SystemId) => Receipt | undefined;\r\n  getActive: () => Receipt[];\r\n  cancel: (systemId: SystemId, reason?: string) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst RECEIPT_ENTITY: EntityType = 'receipts';\r\nconst SYSTEM_ID_PREFIX = 'RECEIPT';\r\nconst BUSINESS_ID_PREFIX = 'PT';\r\nconst BUSINESS_ID_DIGITS = 6;\r\n\r\nconst normalizeReceiptStatus = (status?: Receipt['status']): Receipt['status'] =>\r\n  status === 'cancelled' ? 'cancelled' : 'completed';\r\n\r\nconst ensureReceiptMetadata = (receipt: Receipt): Receipt => {\r\n  let mutated = false;\r\n  const updates: Partial<Receipt> = {};\r\n\r\n  const targetGroup = pickTargetGroup({\r\n    systemId: receipt.payerTypeSystemId,\r\n    name: receipt.payerTypeName,\r\n  });\r\n  if (targetGroup) {\r\n    if (receipt.payerTypeSystemId !== targetGroup.systemId) {\r\n      updates.payerTypeSystemId = targetGroup.systemId;\r\n      mutated = true;\r\n    }\r\n    if (receipt.payerTypeName !== targetGroup.name) {\r\n      updates.payerTypeName = targetGroup.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const paymentMethod = pickPaymentMethod({\r\n    systemId: receipt.paymentMethodSystemId,\r\n    name: receipt.paymentMethodName,\r\n  });\r\n  if (paymentMethod) {\r\n    if (receipt.paymentMethodSystemId !== paymentMethod.systemId) {\r\n      updates.paymentMethodSystemId = paymentMethod.systemId;\r\n      mutated = true;\r\n    }\r\n    if (receipt.paymentMethodName !== paymentMethod.name) {\r\n      updates.paymentMethodName = paymentMethod.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const account = pickAccount({\r\n    accountSystemId: receipt.accountSystemId,\r\n    branchSystemId: receipt.branchSystemId,\r\n    paymentMethodName: paymentMethod?.name ?? receipt.paymentMethodName,\r\n  });\r\n  if (account && receipt.accountSystemId !== account.systemId) {\r\n    updates.accountSystemId = account.systemId;\r\n    mutated = true;\r\n  }\r\n\r\n  const receiptType = pickReceiptType({\r\n    systemId: receipt.paymentReceiptTypeSystemId,\r\n    name: receipt.paymentReceiptTypeName,\r\n  });\r\n  if (receiptType) {\r\n    if (receipt.paymentReceiptTypeSystemId !== receiptType.systemId) {\r\n      updates.paymentReceiptTypeSystemId = receiptType.systemId;\r\n      mutated = true;\r\n    }\r\n    if (receipt.paymentReceiptTypeName !== receiptType.name) {\r\n      updates.paymentReceiptTypeName = receiptType.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  if (!receipt.customerName && receipt.payerName) {\r\n    updates.customerName = receipt.payerName;\r\n    mutated = true;\r\n  }\r\n\r\n  if (!receipt.customerSystemId && receipt.payerSystemId) {\r\n    updates.customerSystemId = receipt.payerSystemId;\r\n    mutated = true;\r\n  }\r\n\r\n  return mutated ? { ...receipt, ...updates } : receipt;\r\n};\r\n\r\nconst backfillReceiptMetadata = (receipts: Receipt[]): Receipt[] => {\r\n  let mutated = false;\r\n  const updated = receipts.map(receipt => {\r\n    const normalized = ensureReceiptMetadata(receipt);\r\n    if (normalized !== receipt) {\r\n      mutated = true;\r\n    }\r\n    return normalized;\r\n  });\r\n  return mutated ? updated : receipts;\r\n};\r\n\r\nconst initialReceipts: Receipt[] = []; // Database is source of truth\r\n\r\nlet systemIdCounter = getMaxSystemIdCounter(initialReceipts, SYSTEM_ID_PREFIX);\r\nlet businessIdCounter = getMaxBusinessIdCounter(initialReceipts, BUSINESS_ID_PREFIX);\r\n\r\nconst getNextSystemId = (): SystemId => {\r\n  systemIdCounter += 1;\r\n  return asSystemId(generateSystemId(RECEIPT_ENTITY, systemIdCounter));\r\n};\r\n\r\nconst ensureReceiptBusinessId = (receipts: Receipt[], provided?: BusinessId | string): BusinessId => {\r\n  if (provided && `${provided}`.trim().length > 0) {\r\n    const normalized = `${provided}`.trim().toUpperCase();\r\n    const parsedCounter = extractCounterFromBusinessId(normalized, BUSINESS_ID_PREFIX);\r\n    if (parsedCounter > businessIdCounter) {\r\n      businessIdCounter = parsedCounter;\r\n    }\r\n    return asBusinessId(normalized);\r\n  }\r\n\r\n  const existingIds = receipts.map(receipt => receipt.id as string).filter(Boolean);\r\n  const { nextId, updatedCounter } = findNextAvailableBusinessId(\r\n    BUSINESS_ID_PREFIX,\r\n    existingIds,\r\n    businessIdCounter,\r\n    BUSINESS_ID_DIGITS\r\n  );\r\n  businessIdCounter = updatedCounter;\r\n  return asBusinessId(nextId);\r\n};\r\n\r\nexport const useReceiptStore = create<ReceiptStore>()(\r\n  subscribeWithSelector(\r\n    (set, get) => ({\r\n      data: initialReceipts,\r\n      businessIdCounter,\r\n      systemIdCounter,\r\n      initialized: false,\r\n      \r\n      add: (item: ReceiptInput): Receipt => {\r\n        let createdReceipt: Receipt | null = null;\r\n        set(state => {\r\n          const systemId = getNextSystemId();\r\n          const id = ensureReceiptBusinessId(state.data, item.id);\r\n          const createdBy = item.createdBy ?? getCurrentReceiptAuthor();\r\n          \r\n          const newReceipt: Receipt = { \r\n            ...item, \r\n            systemId, \r\n            id,\r\n            createdBy,\r\n            createdAt: item.createdAt || new Date().toISOString(),\r\n            status: normalizeReceiptStatus(item.status),\r\n            orderAllocations: item.orderAllocations ?? [],\r\n          };\r\n\r\n          const normalizedReceipt = ensureReceiptMetadata(newReceipt);\r\n          createdReceipt = normalizedReceipt;\r\n\r\n          return { \r\n            data: [...state.data, normalizedReceipt],\r\n            businessIdCounter,\r\n            systemIdCounter\r\n          };\r\n        });\r\n        // Sync to API\r\n        if (createdReceipt) {\r\n          syncToAPI('create', createdReceipt).catch(console.error);\r\n        }\r\n        return createdReceipt!;\r\n      },\r\n      \r\n      addMultiple: (items: ReceiptInput[]) => {\r\n        const created: Receipt[] = [];\r\n        set(state => {\r\n          items.forEach(item => {\r\n            const context = [...state.data, ...created];\r\n            const systemId = getNextSystemId();\r\n            const id = ensureReceiptBusinessId(context, item.id);\r\n            const createdBy = item.createdBy ?? getCurrentReceiptAuthor();\r\n            \r\n            const newReceipt: Receipt = { \r\n              ...item, \r\n              systemId, \r\n              id,\r\n              createdBy,\r\n              createdAt: item.createdAt || new Date().toISOString(),\r\n              status: normalizeReceiptStatus(item.status),\r\n              orderAllocations: item.orderAllocations ?? [],\r\n            };\r\n            created.push(ensureReceiptMetadata(newReceipt));\r\n          });\r\n          \r\n          return { \r\n            data: [...state.data, ...created],\r\n            businessIdCounter,\r\n            systemIdCounter\r\n          };\r\n        });\r\n        // Sync all to API\r\n        created.forEach(receipt => {\r\n          syncToAPI('create', receipt).catch(console.error);\r\n        });\r\n      },\r\n      \r\n      update: (systemId: SystemId, item: Receipt) => {\r\n        const updated = { ...item, status: normalizeReceiptStatus(item.status), updatedAt: new Date().toISOString() };\r\n        set(state => ({\r\n          data: state.data.map(r => r.systemId === systemId ? updated : r),\r\n          businessIdCounter,\r\n          systemIdCounter\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('update', updated).catch(console.error);\r\n      },\r\n      \r\n      remove: (systemId: SystemId) => {\r\n        set(state => ({\r\n          data: state.data.filter(r => r.systemId !== systemId),\r\n          businessIdCounter,\r\n          systemIdCounter\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n      },\r\n      \r\n      findById: (systemId: SystemId) => {\r\n        return get().data.find(r => r.systemId === systemId);\r\n      },\r\n      \r\n      getActive: () => {\r\n        return get().data.filter(r => r.status !== 'cancelled');\r\n      },\r\n      \r\n      cancel: (systemId: SystemId, reason?: string) => {\r\n        const receipt = get().findById(systemId);\r\n        if (receipt && receipt.status !== 'cancelled') {\r\n          const historyEntry = createHistoryEntry(\r\n            'cancelled',\r\n            `ƒê√£ h·ªßy phi·∫øu thu${reason ? `: ${reason}` : ''}`,\r\n            { oldValue: 'Ho√†n th√†nh', newValue: 'ƒê√£ h·ªßy', note: reason }\r\n          );\r\n          \r\n          get().update(systemId, {\r\n            ...receipt,\r\n            status: 'cancelled',\r\n            cancelledAt: new Date().toISOString(),\r\n            activityHistory: [...(receipt.activityHistory || []), historyEntry],\r\n          });\r\n        }\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        try {\r\n          // NOTE: Use React Query hooks for paginated data. This only loads initial batch.\r\n          const response = await fetch('/api/receipts?limit=30');\r\n          if (!response.ok) return;\r\n          const json = await response.json();\r\n          const apiData = json.data || [];\r\n          if (apiData.length > 0) {\r\n            const normalized = backfillReceiptMetadata(apiData.map((receipt: Receipt) => ({\r\n              ...receipt,\r\n              status: normalizeReceiptStatus(receipt.status),\r\n            })));\r\n            const nextSystemCounter = getMaxSystemIdCounter(normalized, SYSTEM_ID_PREFIX);\r\n            const nextBusinessCounter = getMaxBusinessIdCounter(normalized, BUSINESS_ID_PREFIX);\r\n            systemIdCounter = nextSystemCounter;\r\n            businessIdCounter = nextBusinessCounter;\r\n            set({ \r\n              data: normalized, \r\n              systemIdCounter, \r\n              businessIdCounter,\r\n              initialized: true \r\n            });\r\n          } else {\r\n            set({ initialized: true });\r\n          }\r\n        } catch (error) {\r\n          console.error('[Receipts API] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n  )\r\n);\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAGA;AAQA;AACA,mHAAmH;AACnH;AACA;AACA;;;;;;;;AAEA,mBAAmB;AACnB,eAAe,UAAU,MAAsC,EAAE,IAAS;IACxE,IAAI;QACF,MAAM,WAAW,WAAW,WAAW,kBAAkB,CAAC,cAAc,EAAE,KAAK,QAAQ,EAAE;QACzF,MAAM,SAAS,WAAW,WAAW,SAAS,WAAW,WAAW,UAAU;QAE9E,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC;YACA,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,WAAW,WAAW,KAAK,SAAS,CAAC,QAAQ;QACrD;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,CAAC,eAAe,EAAE,OAAO,QAAQ,CAAC,EAAE,MAAM,SAAS,IAAI;YACrE,OAAO;QACT;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,eAAe,EAAE,OAAO,OAAO,CAAC,EAAE;QACjD,OAAO;IACT;AACF;AAEA,kCAAkC;AAClC,MAAM,qBAAqB;IACzB,MAAM,sBAAsB,sJAAsB,QAAQ;IAC1D,MAAM,WAAW,kJAAgB,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;IAC3E,OAAO;QACL,UAAU;QACV,MAAM,UAAU,YAAY;QAC5B,QAAQ,UAAU;IACpB;AACF;AAEA,iCAAiC;AACjC,MAAM,qBAAqB,CACzB,QACA,aACA,WACiB,CAAC;QAClB,IAAI,OAAO,UAAU;QACrB;QACA,WAAW,IAAI;QACf,MAAM;QACN;QACA;IACF,CAAC;AAED,MAAM,gBAAgB,IAAA,gIAAU,EAAC;AACjC,MAAM,0BAA0B;IAC9B,MAAM,SAAS,sJAAsB;IACrC,OAAO,SAAS,IAAA,gIAAU,EAAC,UAAU;AACvC;AAmBA,MAAM,iBAA6B;AACnC,MAAM,mBAAmB;AACzB,MAAM,qBAAqB;AAC3B,MAAM,qBAAqB;AAE3B,MAAM,yBAAyB,CAAC,SAC9B,WAAW,cAAc,cAAc;AAEzC,MAAM,wBAAwB,CAAC;IAC7B,IAAI,UAAU;IACd,MAAM,UAA4B,CAAC;IAEnC,MAAM,cAAc,IAAA,6JAAe,EAAC;QAClC,UAAU,QAAQ,iBAAiB;QACnC,MAAM,QAAQ,aAAa;IAC7B;IACA,IAAI,aAAa;QACf,IAAI,QAAQ,iBAAiB,KAAK,YAAY,QAAQ,EAAE;YACtD,QAAQ,iBAAiB,GAAG,YAAY,QAAQ;YAChD,UAAU;QACZ;QACA,IAAI,QAAQ,aAAa,KAAK,YAAY,IAAI,EAAE;YAC9C,QAAQ,aAAa,GAAG,YAAY,IAAI;YACxC,UAAU;QACZ;IACF;IAEA,MAAM,gBAAgB,IAAA,+JAAiB,EAAC;QACtC,UAAU,QAAQ,qBAAqB;QACvC,MAAM,QAAQ,iBAAiB;IACjC;IACA,IAAI,eAAe;QACjB,IAAI,QAAQ,qBAAqB,KAAK,cAAc,QAAQ,EAAE;YAC5D,QAAQ,qBAAqB,GAAG,cAAc,QAAQ;YACtD,UAAU;QACZ;QACA,IAAI,QAAQ,iBAAiB,KAAK,cAAc,IAAI,EAAE;YACpD,QAAQ,iBAAiB,GAAG,cAAc,IAAI;YAC9C,UAAU;QACZ;IACF;IAEA,MAAM,UAAU,IAAA,yJAAW,EAAC;QAC1B,iBAAiB,QAAQ,eAAe;QACxC,gBAAgB,QAAQ,cAAc;QACtC,mBAAmB,eAAe,QAAQ,QAAQ,iBAAiB;IACrE;IACA,IAAI,WAAW,QAAQ,eAAe,KAAK,QAAQ,QAAQ,EAAE;QAC3D,QAAQ,eAAe,GAAG,QAAQ,QAAQ;QAC1C,UAAU;IACZ;IAEA,MAAM,cAAc,IAAA,6JAAe,EAAC;QAClC,UAAU,QAAQ,0BAA0B;QAC5C,MAAM,QAAQ,sBAAsB;IACtC;IACA,IAAI,aAAa;QACf,IAAI,QAAQ,0BAA0B,KAAK,YAAY,QAAQ,EAAE;YAC/D,QAAQ,0BAA0B,GAAG,YAAY,QAAQ;YACzD,UAAU;QACZ;QACA,IAAI,QAAQ,sBAAsB,KAAK,YAAY,IAAI,EAAE;YACvD,QAAQ,sBAAsB,GAAG,YAAY,IAAI;YACjD,UAAU;QACZ;IACF;IAEA,IAAI,CAAC,QAAQ,YAAY,IAAI,QAAQ,SAAS,EAAE;QAC9C,QAAQ,YAAY,GAAG,QAAQ,SAAS;QACxC,UAAU;IACZ;IAEA,IAAI,CAAC,QAAQ,gBAAgB,IAAI,QAAQ,aAAa,EAAE;QACtD,QAAQ,gBAAgB,GAAG,QAAQ,aAAa;QAChD,UAAU;IACZ;IAEA,OAAO,UAAU;QAAE,GAAG,OAAO;QAAE,GAAG,OAAO;IAAC,IAAI;AAChD;AAEA,MAAM,0BAA0B,CAAC;IAC/B,IAAI,UAAU;IACd,MAAM,UAAU,SAAS,GAAG,CAAC,CAAA;QAC3B,MAAM,aAAa,sBAAsB;QACzC,IAAI,eAAe,SAAS;YAC1B,UAAU;QACZ;QACA,OAAO;IACT;IACA,OAAO,UAAU,UAAU;AAC7B;AAEA,MAAM,kBAA6B,EAAE,EAAE,8BAA8B;AAErE,IAAI,kBAAkB,IAAA,2IAAqB,EAAC,iBAAiB;AAC7D,IAAI,oBAAoB,IAAA,6IAAuB,EAAC,iBAAiB;AAEjE,MAAM,kBAAkB;IACtB,mBAAmB;IACnB,OAAO,IAAA,gIAAU,EAAC,IAAA,sIAAgB,EAAC,gBAAgB;AACrD;AAEA,MAAM,0BAA0B,CAAC,UAAqB;IACpD,IAAI,YAAY,GAAG,UAAU,CAAC,IAAI,GAAG,MAAM,GAAG,GAAG;QAC/C,MAAM,aAAa,GAAG,UAAU,CAAC,IAAI,GAAG,WAAW;QACnD,MAAM,gBAAgB,IAAA,kJAA4B,EAAC,YAAY;QAC/D,IAAI,gBAAgB,mBAAmB;YACrC,oBAAoB;QACtB;QACA,OAAO,IAAA,kIAAY,EAAC;IACtB;IAEA,MAAM,cAAc,SAAS,GAAG,CAAC,CAAA,UAAW,QAAQ,EAAE,EAAY,MAAM,CAAC;IACzE,MAAM,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,iJAA2B,EAC5D,oBACA,aACA,mBACA;IAEF,oBAAoB;IACpB,OAAO,IAAA,kIAAY,EAAC;AACtB;AAEO,MAAM,kBAAkB,IAAA,kJAAM,IACnC,IAAA,sKAAqB,EACnB,CAAC,KAAK,MAAQ,CAAC;QACb,MAAM;QACN;QACA;QACA,aAAa;QAEb,KAAK,CAAC;YACJ,IAAI,iBAAiC;YACrC,IAAI,CAAA;gBACF,MAAM,WAAW;gBACjB,MAAM,KAAK,wBAAwB,MAAM,IAAI,EAAE,KAAK,EAAE;gBACtD,MAAM,YAAY,KAAK,SAAS,IAAI;gBAEpC,MAAM,aAAsB;oBAC1B,GAAG,IAAI;oBACP;oBACA;oBACA;oBACA,WAAW,KAAK,SAAS,IAAI,IAAI,OAAO,WAAW;oBACnD,QAAQ,uBAAuB,KAAK,MAAM;oBAC1C,kBAAkB,KAAK,gBAAgB,IAAI,EAAE;gBAC/C;gBAEA,MAAM,oBAAoB,sBAAsB;gBAChD,iBAAiB;gBAEjB,OAAO;oBACL,MAAM;2BAAI,MAAM,IAAI;wBAAE;qBAAkB;oBACxC;oBACA;gBACF;YACF;YACA,cAAc;YACd,IAAI,gBAAgB;gBAClB,UAAU,UAAU,gBAAgB,KAAK,CAAC,QAAQ,KAAK;YACzD;YACA,OAAO;QACT;QAEA,aAAa,CAAC;YACZ,MAAM,UAAqB,EAAE;YAC7B,IAAI,CAAA;gBACF,MAAM,OAAO,CAAC,CAAA;oBACZ,MAAM,UAAU;2BAAI,MAAM,IAAI;2BAAK;qBAAQ;oBAC3C,MAAM,WAAW;oBACjB,MAAM,KAAK,wBAAwB,SAAS,KAAK,EAAE;oBACnD,MAAM,YAAY,KAAK,SAAS,IAAI;oBAEpC,MAAM,aAAsB;wBAC1B,GAAG,IAAI;wBACP;wBACA;wBACA;wBACA,WAAW,KAAK,SAAS,IAAI,IAAI,OAAO,WAAW;wBACnD,QAAQ,uBAAuB,KAAK,MAAM;wBAC1C,kBAAkB,KAAK,gBAAgB,IAAI,EAAE;oBAC/C;oBACA,QAAQ,IAAI,CAAC,sBAAsB;gBACrC;gBAEA,OAAO;oBACL,MAAM;2BAAI,MAAM,IAAI;2BAAK;qBAAQ;oBACjC;oBACA;gBACF;YACF;YACA,kBAAkB;YAClB,QAAQ,OAAO,CAAC,CAAA;gBACd,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;YAClD;QACF;QAEA,QAAQ,CAAC,UAAoB;YAC3B,MAAM,UAAU;gBAAE,GAAG,IAAI;gBAAE,QAAQ,uBAAuB,KAAK,MAAM;gBAAG,WAAW,IAAI,OAAO,WAAW;YAAG;YAC5G,IAAI,CAAA,QAAS,CAAC;oBACZ,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,WAAW,UAAU;oBAC9D;oBACA;gBACF,CAAC;YACD,cAAc;YACd,UAAU,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;QAClD;QAEA,QAAQ,CAAC;YACP,IAAI,CAAA,QAAS,CAAC;oBACZ,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;oBAC5C;oBACA;gBACF,CAAC;YACD,cAAc;YACd,UAAU,UAAU;gBAAE;YAAS,GAAG,KAAK,CAAC,QAAQ,KAAK;QACvD;QAEA,UAAU,CAAC;YACT,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;QAC7C;QAEA,WAAW;YACT,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;QAC7C;QAEA,QAAQ,CAAC,UAAoB;YAC3B,MAAM,UAAU,MAAM,QAAQ,CAAC;YAC/B,IAAI,WAAW,QAAQ,MAAM,KAAK,aAAa;gBAC7C,MAAM,eAAe,mBACnB,aACA,CAAC,gBAAgB,EAAE,SAAS,CAAC,EAAE,EAAE,QAAQ,GAAG,IAAI,EAChD;oBAAE,UAAU;oBAAc,UAAU;oBAAU,MAAM;gBAAO;gBAG7D,MAAM,MAAM,CAAC,UAAU;oBACrB,GAAG,OAAO;oBACV,QAAQ;oBACR,aAAa,IAAI,OAAO,WAAW;oBACnC,iBAAiB;2BAAK,QAAQ,eAAe,IAAI,EAAE;wBAAG;qBAAa;gBACrE;YACF;QACF;QAEA,aAAa;YACX,IAAI;gBACF,iFAAiF;gBACjF,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;gBAClB,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,MAAM,UAAU,KAAK,IAAI,IAAI,EAAE;gBAC/B,IAAI,QAAQ,MAAM,GAAG,GAAG;oBACtB,MAAM,aAAa,wBAAwB,QAAQ,GAAG,CAAC,CAAC,UAAqB,CAAC;4BAC5E,GAAG,OAAO;4BACV,QAAQ,uBAAuB,QAAQ,MAAM;wBAC/C,CAAC;oBACD,MAAM,oBAAoB,IAAA,2IAAqB,EAAC,YAAY;oBAC5D,MAAM,sBAAsB,IAAA,6IAAuB,EAAC,YAAY;oBAChE,kBAAkB;oBAClB,oBAAoB;oBACpB,IAAI;wBACF,MAAM;wBACN;wBACA;wBACA,aAAa;oBACf;gBACF,OAAO;oBACL,IAAI;wBAAE,aAAa;oBAAK;gBAC1B;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,qCAAqC;YACrD;QACF;IACF,CAAC"}},
    {"offset": {"line": 10308, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/payments/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport type { Payment } from './types';\r\nimport type { HistoryEntry } from '../../components/ActivityHistory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport {\r\n  extractCounterFromBusinessId,\r\n  findNextAvailableBusinessId,\r\n  generateSystemId,\r\n  getMaxBusinessIdCounter,\r\n  getMaxSystemIdCounter,\r\n  type EntityType,\r\n} from '../../lib/id-utils';\r\nimport { asBusinessId, asSystemId, type BusinessId, type SystemId } from '../../lib/id-types';\r\nimport { pickAccount, pickPaymentMethod, pickPaymentType, pickTargetGroup } from '@/features/finance/document-lookups';\r\nimport { useEmployeeStore } from '../employees/store';\r\nimport { getCurrentUserSystemId } from '../../contexts/auth-context';\r\n\r\n// API sync helpers\r\nasync function syncToAPI(action: 'create' | 'update' | 'delete', data: any): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' ? '/api/payments' : `/api/payments/${data.systemId}`;\r\n    const method = action === 'create' ? 'POST' : action === 'update' ? 'PATCH' : 'DELETE';\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.error(`[Payments API] ${action} failed:`, await response.text());\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`[Payments API] ${action} error:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Helper to get current user info\r\nconst getCurrentUserInfo = () => {\r\n  const currentUserSystemId = getCurrentUserSystemId?.() || 'SYSTEM';\r\n  const employee = useEmployeeStore.getState().data.find(e => e.systemId === currentUserSystemId);\r\n  return {\r\n    systemId: currentUserSystemId,\r\n    name: employee?.fullName || 'H·ªá th·ªëng',\r\n    avatar: employee?.avatarUrl,\r\n  };\r\n};\r\n\r\n// Helper to create history entry\r\nconst createHistoryEntry = (\r\n  action: HistoryEntry['action'],\r\n  description: string,\r\n  metadata?: HistoryEntry['metadata']\r\n): HistoryEntry => ({\r\n  id: crypto.randomUUID(),\r\n  action,\r\n  timestamp: new Date(),\r\n  user: getCurrentUserInfo(),\r\n  description,\r\n  metadata,\r\n});\r\n\r\nexport type PaymentInput = Omit<Payment, 'systemId' | 'id'> & { id?: BusinessId | string };\r\n\r\ninterface PaymentStore {\r\n  data: Payment[];\r\n  businessIdCounter: number;\r\n  systemIdCounter: number;\r\n  initialized: boolean;\r\n  add: (item: PaymentInput) => Payment;\r\n  addMultiple: (items: PaymentInput[]) => void;\r\n  update: (systemId: SystemId, item: Payment) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  findById: (systemId: SystemId) => Payment | undefined;\r\n  getActive: () => Payment[];\r\n  cancel: (systemId: SystemId, reason?: string) => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst PAYMENT_ENTITY: EntityType = 'payments';\r\nconst SYSTEM_ID_PREFIX = 'PAYMENT';\r\nconst BUSINESS_ID_PREFIX = 'PC';\r\nconst BUSINESS_ID_DIGITS = 6;\r\nconst PURCHASE_ORDER_SYSTEM_PREFIX = 'PURCHASE';\r\nconst PURCHASE_ORDER_BUSINESS_PREFIX = 'PO';\r\n\r\nconst normalizePaymentStatus = (status?: Payment['status']): Payment['status'] =>\r\n  status === 'cancelled' ? 'cancelled' : 'completed';\r\n\r\nconst normalizePayment = (payment: Payment): Payment => ({\r\n  ...payment,\r\n  status: normalizePaymentStatus(payment.status),\r\n});\r\n\r\nconst ensurePaymentMetadata = (payment: Payment): Payment => {\r\n  let mutated = false;\r\n  const updates: Partial<Payment> = {};\r\n\r\n  const targetGroup = pickTargetGroup({\r\n    systemId: payment.recipientTypeSystemId,\r\n    name: payment.recipientTypeName,\r\n  });\r\n  if (targetGroup) {\r\n    if (payment.recipientTypeSystemId !== targetGroup.systemId) {\r\n      updates.recipientTypeSystemId = targetGroup.systemId;\r\n      mutated = true;\r\n    }\r\n    if (payment.recipientTypeName !== targetGroup.name) {\r\n      updates.recipientTypeName = targetGroup.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const paymentMethod = pickPaymentMethod({\r\n    systemId: payment.paymentMethodSystemId,\r\n    name: payment.paymentMethodName,\r\n  });\r\n  if (paymentMethod) {\r\n    if (payment.paymentMethodSystemId !== paymentMethod.systemId) {\r\n      updates.paymentMethodSystemId = paymentMethod.systemId;\r\n      mutated = true;\r\n    }\r\n    if (payment.paymentMethodName !== paymentMethod.name) {\r\n      updates.paymentMethodName = paymentMethod.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const account = pickAccount({\r\n    accountSystemId: payment.accountSystemId,\r\n    branchSystemId: payment.branchSystemId,\r\n    paymentMethodName: paymentMethod?.name ?? payment.paymentMethodName,\r\n  });\r\n  if (account && payment.accountSystemId !== account.systemId) {\r\n    updates.accountSystemId = account.systemId;\r\n    mutated = true;\r\n  }\r\n\r\n  const paymentType = pickPaymentType({\r\n    systemId: payment.paymentReceiptTypeSystemId,\r\n    name: payment.paymentReceiptTypeName,\r\n  });\r\n  if (paymentType) {\r\n    if (payment.paymentReceiptTypeSystemId !== paymentType.systemId) {\r\n      updates.paymentReceiptTypeSystemId = paymentType.systemId;\r\n      mutated = true;\r\n    }\r\n    if (payment.paymentReceiptTypeName !== paymentType.name) {\r\n      updates.paymentReceiptTypeName = paymentType.name;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  const normalizedGroupName = targetGroup?.name?.trim().toLowerCase();\r\n  if (normalizedGroupName === 'kh√°ch h√†ng') {\r\n    if (!payment.customerName && payment.recipientName) {\r\n      updates.customerName = payment.recipientName;\r\n      mutated = true;\r\n    }\r\n    if (!payment.customerSystemId && payment.recipientSystemId) {\r\n      updates.customerSystemId = payment.recipientSystemId;\r\n      mutated = true;\r\n    }\r\n  }\r\n\r\n  return mutated ? { ...payment, ...updates } : payment;\r\n};\r\n\r\nconst backfillPaymentMetadata = (payments: Payment[]): Payment[] => {\r\n  let mutated = false;\r\n  const updated = payments.map(payment => {\r\n    const normalized = ensurePaymentMetadata(payment);\r\n    if (normalized !== payment) {\r\n      mutated = true;\r\n    }\r\n    return normalized;\r\n  });\r\n  return mutated ? updated : payments;\r\n};\r\n\r\nconst initialPayments: Payment[] = []; // Database is source of truth\r\n\r\nlet systemIdCounter = getMaxSystemIdCounter(initialPayments, SYSTEM_ID_PREFIX);\r\nlet businessIdCounter = getMaxBusinessIdCounter(initialPayments, BUSINESS_ID_PREFIX);\r\n\r\nconst getNextSystemId = (): SystemId => {\r\n  systemIdCounter += 1;\r\n  return asSystemId(generateSystemId(PAYMENT_ENTITY, systemIdCounter));\r\n};\r\n\r\nconst ensurePaymentBusinessId = (payments: Payment[], provided?: BusinessId | string): BusinessId => {\r\n  if (provided && `${provided}`.trim().length > 0) {\r\n    const normalized = `${provided}`.trim().toUpperCase();\r\n    const parsedCounter = extractCounterFromBusinessId(normalized, BUSINESS_ID_PREFIX);\r\n    if (parsedCounter > businessIdCounter) {\r\n      businessIdCounter = parsedCounter;\r\n    }\r\n    return asBusinessId(normalized);\r\n  }\r\n\r\n  const existingIds = payments.map(payment => payment.id as string).filter(Boolean);\r\n  const { nextId, updatedCounter } = findNextAvailableBusinessId(\r\n    BUSINESS_ID_PREFIX,\r\n    existingIds,\r\n    businessIdCounter,\r\n    BUSINESS_ID_DIGITS\r\n  );\r\n  businessIdCounter = updatedCounter;\r\n  return asBusinessId(nextId);\r\n};\r\n\r\nconst reconcileLinkedDocuments = (payment: Payment): Payment => {\r\n  if (!payment.originalDocumentId) {\r\n    return payment;\r\n  }\r\n\r\n  const normalizedDocId = payment.originalDocumentId.toUpperCase();\r\n  const nextPayment = { ...payment };\r\n\r\n  if (!nextPayment.purchaseOrderSystemId && normalizedDocId.startsWith(PURCHASE_ORDER_SYSTEM_PREFIX)) {\r\n    nextPayment.purchaseOrderSystemId = asSystemId(payment.originalDocumentId);\r\n  }\r\n\r\n  if (!nextPayment.purchaseOrderId && normalizedDocId.startsWith(PURCHASE_ORDER_BUSINESS_PREFIX)) {\r\n    nextPayment.purchaseOrderId = asBusinessId(payment.originalDocumentId);\r\n  }\r\n\r\n  return nextPayment;\r\n};\r\n\r\nconst buildPayment = (input: PaymentInput, existingPayments: Payment[]): Payment => {\r\n  const systemId = getNextSystemId();\r\n  const id = ensurePaymentBusinessId(existingPayments, input.id);\r\n  const basePayment: Payment = {\r\n    ...input,\r\n    systemId,\r\n    id,\r\n    createdAt: input.createdAt || new Date().toISOString(),\r\n    status: normalizePaymentStatus(input.status),\r\n  };\r\n\r\n  return reconcileLinkedDocuments(basePayment);\r\n};\r\n\r\nexport const usePaymentStore = create<PaymentStore>()(\r\n  (set, get) => ({\r\n      data: initialPayments,\r\n      businessIdCounter,\r\n      systemIdCounter,\r\n      initialized: false,\r\n      \r\n      add: (item) => {\r\n        let createdPayment: Payment | null = null;\r\n        set(state => {\r\n          const newPayment = buildPayment(item, state.data);\r\n          createdPayment = newPayment;\r\n          return {\r\n            data: [...state.data, newPayment],\r\n            businessIdCounter,\r\n            systemIdCounter,\r\n          };\r\n        });\r\n        // Sync to API\r\n        if (createdPayment) {\r\n          syncToAPI('create', createdPayment).catch(console.error);\r\n        }\r\n        return createdPayment!;\r\n      },\r\n      \r\n      addMultiple: (items) => {\r\n        const created: Payment[] = [];\r\n        set(state => {\r\n          items.forEach(item => {\r\n            const context = [...state.data, ...created];\r\n            const payment = buildPayment(item, context);\r\n            created.push(payment);\r\n          });\r\n\r\n          return {\r\n            data: [...state.data, ...created],\r\n            businessIdCounter,\r\n            systemIdCounter,\r\n          };\r\n        });\r\n        // Sync all to API\r\n        created.forEach(payment => {\r\n          syncToAPI('create', payment).catch(console.error);\r\n        });\r\n      },\r\n      \r\n      update: (systemId, item) => {\r\n        const updated = reconcileLinkedDocuments({\r\n          ...item,\r\n          systemId,\r\n          status: normalizePaymentStatus(item.status),\r\n          updatedAt: new Date().toISOString(),\r\n        });\r\n        set(state => ({\r\n          data: state.data.map(payment =>\r\n            payment.systemId === systemId ? updated : payment\r\n          ),\r\n          businessIdCounter,\r\n          systemIdCounter,\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('update', updated).catch(console.error);\r\n      },\r\n      \r\n      remove: (systemId) => {\r\n        set(state => ({\r\n          data: state.data.filter(payment => payment.systemId !== systemId),\r\n          businessIdCounter,\r\n          systemIdCounter,\r\n        }));\r\n        // Sync to API\r\n        syncToAPI('delete', { systemId }).catch(console.error);\r\n      },\r\n      \r\n      findById: (systemId) => {\r\n        return get().data.find(payment => payment.systemId === systemId);\r\n      },\r\n      \r\n      getActive: () => {\r\n        return get().data.filter(payment => payment.status !== 'cancelled');\r\n      },\r\n      \r\n      cancel: (systemId: SystemId, reason?: string) => {\r\n        const payment = get().findById(systemId);\r\n        if (payment && payment.status !== 'cancelled') {\r\n          const historyEntry = createHistoryEntry(\r\n            'cancelled',\r\n            `ƒê√£ h·ªßy phi·∫øu chi${reason ? `: ${reason}` : ''}`,\r\n            { oldValue: 'Ho√†n th√†nh', newValue: 'ƒê√£ h·ªßy', note: reason }\r\n          );\r\n          \r\n          get().update(systemId, {\r\n            ...payment,\r\n            status: 'cancelled',\r\n            cancelledAt: new Date().toISOString(),\r\n            activityHistory: [...(payment.activityHistory || []), historyEntry],\r\n          });\r\n        }\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        try {\r\n          // NOTE: Use React Query hooks for paginated data. This only loads initial batch.\r\n          const response = await fetch('/api/payments?limit=30');\r\n          if (!response.ok) return;\r\n          const json = await response.json();\r\n          const apiData = json.data || [];\r\n          if (apiData.length > 0) {\r\n            const normalized = backfillPaymentMetadata(apiData.map(normalizePayment));\r\n            const nextSystemCounter = getMaxSystemIdCounter(normalized, SYSTEM_ID_PREFIX);\r\n            const nextBusinessCounter = getMaxBusinessIdCounter(normalized, BUSINESS_ID_PREFIX);\r\n            systemIdCounter = nextSystemCounter;\r\n            businessIdCounter = nextBusinessCounter;\r\n            set({ \r\n              data: normalized, \r\n              systemIdCounter, \r\n              businessIdCounter,\r\n              initialized: true \r\n            });\r\n          } else {\r\n            set({ initialized: true });\r\n          }\r\n        } catch (error) {\r\n          console.error('[Payments API] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10641, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/store.ts"],"sourcesContent":["import { createCrudStore, CrudState } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { Branch } from './types';\r\nimport { SystemId } from '../../../lib/id-types';\r\n\r\nexport interface BranchStoreState extends CrudState<Branch> {\r\n  setDefault: (systemId: SystemId) => void;\r\n}\r\n\r\nconst baseStore = createCrudStore<Branch>([], 'branches', {\r\n  apiEndpoint: '/api/branches',\r\n});\r\n\r\nconst setDefault = (systemId: SystemId) => {\r\n  baseStore.setState(state => ({\r\n    data: state.data.map(branch => ({\r\n      ...branch,\r\n      isDefault: branch.systemId === systemId,\r\n    })),\r\n  }));\r\n};\r\n\r\nconst originalAdd = baseStore.getState().add;\r\nconst originalUpdate = baseStore.getState().update;\r\n\r\nbaseStore.setState({\r\n  add: (item: Omit<Branch, 'systemId'>) => {\r\n    const result = originalAdd(item);\r\n    if ((item as Branch).isDefault) {\r\n      setDefault(result.systemId);\r\n    }\r\n    return result;\r\n  },\r\n  update: (systemId: SystemId, updatedItem: Branch) => {\r\n    originalUpdate(systemId, updatedItem);\r\n    if (updatedItem.isDefault) {\r\n      setDefault(systemId);\r\n    }\r\n  },\r\n} as Partial<BranchStoreState>);\r\n\r\nconst enhanceState = (state: CrudState<Branch>): BranchStoreState => ({\r\n  ...state,\r\n  setDefault,\r\n});\r\n\r\ntype BranchStoreHook = (() => BranchStoreState) & {\r\n  getState: () => BranchStoreState;\r\n};\r\n\r\nconst useBranchStoreBase = (() => enhanceState(baseStore())) as BranchStoreHook;\r\n\r\nuseBranchStoreBase.getState = () => enhanceState(baseStore.getState());\r\n\r\nexport const useBranchStore = useBranchStoreBase;\r\n"],"names":[],"mappings":";;;;AAAA;;AASA,MAAM,YAAY,IAAA,0IAAe,EAAS,EAAE,EAAE,YAAY;IACxD,aAAa;AACf;AAEA,MAAM,aAAa,CAAC;IAClB,UAAU,QAAQ,CAAC,CAAA,QAAS,CAAC;YAC3B,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,SAAU,CAAC;oBAC9B,GAAG,MAAM;oBACT,WAAW,OAAO,QAAQ,KAAK;gBACjC,CAAC;QACH,CAAC;AACH;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAC5C,MAAM,iBAAiB,UAAU,QAAQ,GAAG,MAAM;AAElD,UAAU,QAAQ,CAAC;IACjB,KAAK,CAAC;QACJ,MAAM,SAAS,YAAY;QAC3B,IAAI,AAAC,KAAgB,SAAS,EAAE;YAC9B,WAAW,OAAO,QAAQ;QAC5B;QACA,OAAO;IACT;IACA,QAAQ,CAAC,UAAoB;QAC3B,eAAe,UAAU;QACzB,IAAI,YAAY,SAAS,EAAE;YACzB,WAAW;QACb;IACF;AACF;AAEA,MAAM,eAAe,CAAC,QAA+C,CAAC;QACpE,GAAG,KAAK;QACR;IACF,CAAC;AAMD,MAAM,qBAAsB,IAAM,aAAa;AAE/C,mBAAmB,QAAQ,GAAG,IAAM,aAAa,UAAU,QAAQ;AAE5D,MAAM,iBAAiB"}},
    {"offset": {"line": 10686, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/currency-input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Input } from \"./input\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\nexport interface CurrencyInputProps\r\n  extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'onChange' | 'value'> {\r\n  value?: number | undefined;\r\n  onChange?: (value: number) => void;\r\n}\r\n\r\nconst CurrencyInput = React.forwardRef<HTMLInputElement, CurrencyInputProps>(\r\n  ({ className, value, onChange, ...props }, ref) => {\r\n    const [displayValue, setDisplayValue] = React.useState(\"\");\r\n\r\n    // Format number with thousand separators\r\n    const formatNumber = (num: number): string => {\r\n      return new Intl.NumberFormat('vi-VN').format(num);\r\n    };\r\n\r\n    // Parse formatted string back to number\r\n    const parseNumber = (str: string): number => {\r\n      const cleaned = str.replace(/\\./g, '').replace(/,/g, '');\r\n      const num = parseInt(cleaned, 10);\r\n      return isNaN(num) ? 0 : Math.max(0, num); // Kh√¥ng cho ph√©p s·ªë √¢m\r\n    };\r\n\r\n    // Sync external value to display\r\n    React.useEffect(() => {\r\n      if (value !== undefined) {\r\n        setDisplayValue(value === 0 ? \"\" : formatNumber(value));\r\n      }\r\n    }, [value]);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const inputValue = e.target.value;\r\n      \r\n      // Cho ph√©p r·ªóng\r\n      if (inputValue === \"\") {\r\n        setDisplayValue(\"\");\r\n        onChange?.(0);\r\n        return;\r\n      }\r\n\r\n      // Ch·ªâ cho ph√©p s·ªë v√† d·∫•u ch·∫•m, kh√¥ng cho ph√©p d·∫•u tr·ª´\r\n      const cleaned = inputValue.replace(/[^\\d.]/g, '');\r\n      \r\n      // Kh√¥ng x·ª≠ l√Ω n·∫øu c√≥ k√Ω t·ª± kh√¥ng h·ª£p l·ªá (bao g·ªìm d·∫•u tr·ª´)\r\n      if (inputValue.length > 0 && cleaned === \"\" && inputValue !== \"\") {\r\n        return;\r\n      }\r\n      \r\n      const num = parseNumber(cleaned);\r\n      \r\n      // C·∫≠p nh·∫≠t display v√† g·ªçi onChange\r\n      setDisplayValue(formatNumber(num));\r\n      onChange?.(num);\r\n    };\r\n\r\n    const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\r\n      // Format l·∫°i khi blur\r\n      if (value !== undefined && value > 0) {\r\n        setDisplayValue(formatNumber(value));\r\n      }\r\n      props.onBlur?.(e);\r\n    };\r\n\r\n    return (\r\n      <div className=\"relative\">\r\n        <Input\r\n          ref={ref}\r\n          type=\"text\"\r\n          inputMode=\"numeric\"\r\n          value={displayValue}\r\n          onChange={handleChange}\r\n          onBlur={handleBlur}\r\n          className={cn(\"text-right pr-14 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\", className)}\r\n          {...props}\r\n        />\r\n        <span className={cn(\r\n          \"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground pointer-events-none\",\r\n          props.disabled && \"opacity-50\"\r\n        )}>\r\n          VND\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nCurrencyInput.displayName = \"CurrencyInput\";\r\n\r\nexport { CurrencyInput };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAQA,MAAM,8BAAgB,mNAAgB,CACpC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,iNAAc,CAAC;IAEvD,yCAAyC;IACzC,MAAM,eAAe,CAAC;QACpB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC;IAC/C;IAEA,wCAAwC;IACxC,MAAM,cAAc,CAAC;QACnB,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM;QACrD,MAAM,MAAM,SAAS,SAAS;QAC9B,OAAO,MAAM,OAAO,IAAI,KAAK,GAAG,CAAC,GAAG,MAAM,uBAAuB;IACnE;IAEA,iCAAiC;IACjC,kNAAe,CAAC;QACd,IAAI,UAAU,WAAW;YACvB,gBAAgB,UAAU,IAAI,KAAK,aAAa;QAClD;IACF,GAAG;QAAC;KAAM;IAEV,MAAM,eAAe,CAAC;QACpB,MAAM,aAAa,EAAE,MAAM,CAAC,KAAK;QAEjC,gBAAgB;QAChB,IAAI,eAAe,IAAI;YACrB,gBAAgB;YAChB,WAAW;YACX;QACF;QAEA,sDAAsD;QACtD,MAAM,UAAU,WAAW,OAAO,CAAC,WAAW;QAE9C,0DAA0D;QAC1D,IAAI,WAAW,MAAM,GAAG,KAAK,YAAY,MAAM,eAAe,IAAI;YAChE;QACF;QAEA,MAAM,MAAM,YAAY;QAExB,mCAAmC;QACnC,gBAAgB,aAAa;QAC7B,WAAW;IACb;IAEA,MAAM,aAAa,CAAC;QAClB,sBAAsB;QACtB,IAAI,UAAU,aAAa,QAAQ,GAAG;YACpC,gBAAgB,aAAa;QAC/B;QACA,MAAM,MAAM,GAAG;IACjB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,mIAAK;gBACJ,KAAK;gBACL,MAAK;gBACL,WAAU;gBACV,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,WAAW,IAAA,kHAAE,EAAC,yIAAyI;gBACtJ,GAAG,KAAK;;;;;;0BAEX,8OAAC;gBAAK,WAAW,IAAA,kHAAE,EACjB,+FACA,MAAM,QAAQ,IAAI;0BACjB;;;;;;;;;;;;AAKT;AAGF,cAAc,WAAW,GAAG"}},
    {"offset": {"line": 10782, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/radio-group.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\n// --- Context ---\r\ntype RadioGroupContextType = {\r\n  value: string | number | undefined;\r\n  onValueChange: (value: string | number) => void;\r\n  name?: string | undefined;\r\n};\r\n\r\nconst RadioGroupContext = React.createContext<RadioGroupContextType | undefined>(undefined);\r\n\r\nconst useRadioGroup = () => {\r\n  const context = React.useContext(RadioGroupContext);\r\n  if (!context) {\r\n    throw new Error(\"useRadioGroup must be used within a RadioGroup\");\r\n  }\r\n  return context;\r\n};\r\n\r\n// --- RadioGroup ---\r\nconst RadioGroup = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & {\r\n    value?: string | number | undefined;\r\n    defaultValue?: string | number | undefined;\r\n    onValueChange?: ((value: string | number) => void) | undefined;\r\n    name?: string | undefined;\r\n  }\r\n>(({ className, children, value, defaultValue, onValueChange, name, ...props }, ref) => {\r\n  const [internalValue, setInternalValue] = React.useState(defaultValue);\r\n  const isControlled = value !== undefined;\r\n  const currentValue = isControlled ? value : internalValue;\r\n\r\n  const handleValueChange = (newValue: string | number) => {\r\n    if (!isControlled) {\r\n      setInternalValue(newValue);\r\n    }\r\n    if (onValueChange) {\r\n      onValueChange(newValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <RadioGroupContext.Provider value={{ value: currentValue, onValueChange: handleValueChange, name }}>\r\n      <div ref={ref} role=\"radiogroup\" className={cn(\"grid gap-2\", className)} {...props}>\r\n        {children}\r\n      </div>\r\n    </RadioGroupContext.Provider>\r\n  );\r\n});\r\nRadioGroup.displayName = \"RadioGroup\";\r\n\r\n// --- RadioGroupItem ---\r\nconst RadioGroupItem = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ButtonHTMLAttributes<HTMLButtonElement> & { value: string | number }\r\n>(({ className, value, children, ...props }, ref) => {\r\n  const { value: selectedValue, onValueChange, name } = useRadioGroup();\r\n  const isChecked = selectedValue === value;\r\n  const id = React.useId();\r\n\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      id={id}\r\n      type=\"button\"\r\n      role=\"radio\"\r\n      aria-checked={isChecked}\r\n      data-state={isChecked ? \"checked\" : \"unchecked\"}\r\n      onClick={() => onValueChange(value)}\r\n      name={name}\r\n      value={value}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {isChecked && (\r\n        <div className=\"flex items-center justify-center\">\r\n          <div className=\"h-2.5 w-2.5 rounded-full bg-current text-current\" />\r\n        </div>\r\n      )}\r\n    </button>\r\n  );\r\n});\r\nRadioGroupItem.displayName = \"RadioGroupItem\";\r\n\r\n\r\nexport { RadioGroup, RadioGroupItem };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AASA,MAAM,kCAAoB,sNAAmB,CAAoC;AAEjF,MAAM,gBAAgB;IACpB,MAAM,UAAU,mNAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEA,qBAAqB;AACrB,MAAM,2BAAa,mNAAgB,CAQjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9E,MAAM,CAAC,eAAe,iBAAiB,GAAG,iNAAc,CAAC;IACzD,MAAM,eAAe,UAAU;IAC/B,MAAM,eAAe,eAAe,QAAQ;IAE5C,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,cAAc;YACjB,iBAAiB;QACnB;QACA,IAAI,eAAe;YACjB,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE,OAAO;YAAc,eAAe;YAAmB;QAAK;kBAC/F,cAAA,8OAAC;YAAI,KAAK;YAAK,MAAK;YAAa,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAa,GAAG,KAAK;sBAC/E;;;;;;;;;;;AAIT;AACA,WAAW,WAAW,GAAG;AAEzB,yBAAyB;AACzB,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IAC3C,MAAM,EAAE,OAAO,aAAa,EAAE,aAAa,EAAE,IAAI,EAAE,GAAG;IACtD,MAAM,YAAY,kBAAkB;IACpC,MAAM,KAAK,8MAAW;IAEtB,qBACE,8OAAC;QACC,KAAK;QACL,IAAI;QACJ,MAAK;QACL,MAAK;QACL,gBAAc;QACd,cAAY,YAAY,YAAY;QACpC,SAAS,IAAM,cAAc;QAC7B,MAAM;QACN,OAAO;QACP,WAAW,IAAA,kHAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAER,2BACC,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;;;;;;AAKzB;AACA,eAAe,WAAW,GAAG"}},
    {"offset": {"line": 10882, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\ntype BaseSelectProps = React.ComponentPropsWithoutRef<typeof SelectPrimitive.Root>\r\n\r\ntype SelectProps = Omit<BaseSelectProps, \"value\" | \"defaultValue\"> & {\r\n  value?: string | undefined\r\n  defaultValue?: string | undefined\r\n}\r\n\r\nconst Select = ({ value, defaultValue, ...props }: SelectProps) => {\r\n  const controlledProps: Partial<BaseSelectProps> = {}\r\n\r\n  if (value !== undefined) {\r\n    controlledProps.value = value\r\n  }\r\n\r\n  if (defaultValue !== undefined) {\r\n    controlledProps.defaultValue = defaultValue\r\n  }\r\n\r\n  return <SelectPrimitive.Root {...props} {...controlledProps} />\r\n}\r\nSelect.displayName = SelectPrimitive.Root.displayName\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => {\r\n  const modalId = React.useId();\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const { zIndex } = useModal(modalId, isOpen, 'select');\r\n\r\n  React.useEffect(() => {\r\n    const content = ref && 'current' in ref ? ref.current : null;\r\n    if (!content) return;\r\n\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'data-state') {\r\n          const target = mutation.target as HTMLElement;\r\n          const state = target.getAttribute('data-state');\r\n          setIsOpen(state === 'open');\r\n        }\r\n      });\r\n    });\r\n\r\n    observer.observe(content, { attributes: true, attributeFilter: ['data-state'] });\r\n\r\n    return () => observer.disconnect();\r\n  }, [ref]);\r\n\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  );\r\n})\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11130, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/cash-accounts/form.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { useForm, type ControllerProps, type FieldPath } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as z from \"zod\";\r\nimport type { CashAccount } from \"../../cashbook/types\";\r\nimport { useBranchStore } from \"../branches/store\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"../../../components/ui/form\";\r\nimport { Input } from \"../../../components/ui/input\";\r\nimport { CurrencyInput } from \"../../../components/ui/currency-input\";\r\nimport { RadioGroup, RadioGroupItem } from \"../../../components/ui/radio-group\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"../../../components/ui/select\";\r\nimport { Switch } from \"../../../components/ui/switch\";\r\n\r\nconst formSchema = z.object({\r\n  id: z.string().min(1, \"M√£ t√†i kho·∫£n l√† b·∫Øt bu·ªôc\"),\r\n  name: z.string().min(1, \"T√™n t√†i kho·∫£n l√† b·∫Øt bu·ªôc\").max(100, \"T√™n kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100 k√Ω t·ª±\"),\r\n  initialBalance: z.number().min(0, \"S·ªë d∆∞ kh√¥ng ƒë∆∞·ª£c √¢m\"),\r\n  type: z.enum(['cash', 'bank'] as const),\r\n  bankAccountNumber: z.string().optional(),\r\n  bankBranch: z.string().optional(),\r\n  branchSystemId: z.string().optional(),\r\n  isActive: z.boolean(),\r\n  isDefault: z.boolean().optional(),\r\n  bankName: z.string().optional(),\r\n  bankCode: z.string().optional(),\r\n  accountHolder: z.string().optional(),\r\n  minBalance: z.number().optional(),\r\n  maxBalance: z.number().optional(),\r\n  managedBy: z.string().optional(),\r\n});\r\n\r\nexport type CashAccountFormValues = z.infer<typeof formSchema>;\r\n\r\nconst CashAccountFormField = <TName extends FieldPath<CashAccountFormValues>>(props: ControllerProps<CashAccountFormValues, TName>) => (\r\n  <FormField<CashAccountFormValues, TName> {...props} />\r\n);\r\n\r\ntype FormProps = {\r\n  initialData?: CashAccount | null;\r\n  onSubmit: (values: CashAccountFormValues) => void;\r\n};\r\n\r\nexport function CashAccountForm({ initialData, onSubmit }: FormProps) {\r\n  const { data: branches } = useBranchStore();\r\n\r\n  const defaultBranchSystemId = React.useMemo(() => {\r\n    const branch = branches.find(b => b.isDefault);\r\n    return branch?.systemId ? String(branch.systemId) : undefined;\r\n  }, [branches]);\r\n\r\n  const buildFormValues = React.useCallback(\r\n    (account?: CashAccount | null): CashAccountFormValues => {\r\n      if (account) {\r\n        return {\r\n          id: String(account.id),\r\n          name: account.name,\r\n          initialBalance: account.initialBalance,\r\n          type: account.type,\r\n          bankAccountNumber: account.bankAccountNumber ?? undefined,\r\n          bankBranch: account.bankBranch ?? undefined,\r\n          branchSystemId: account.branchSystemId ? String(account.branchSystemId) : undefined,\r\n          isActive: account.isActive,\r\n          isDefault: account.isDefault ?? false,\r\n          bankName: account.bankName ?? undefined,\r\n          bankCode: account.bankCode ?? undefined,\r\n          accountHolder: account.accountHolder ?? undefined,\r\n          minBalance: account.minBalance ?? undefined,\r\n          maxBalance: account.maxBalance ?? undefined,\r\n          managedBy: account.managedBy ? String(account.managedBy) : undefined,\r\n        };\r\n      }\r\n\r\n      return {\r\n        id: \"\",\r\n        name: \"\",\r\n        initialBalance: 0,\r\n        type: 'cash',\r\n        bankAccountNumber: undefined,\r\n        bankBranch: undefined,\r\n        branchSystemId: defaultBranchSystemId,\r\n        isActive: true,\r\n        isDefault: false,\r\n        bankName: undefined,\r\n        bankCode: undefined,\r\n        accountHolder: undefined,\r\n        minBalance: undefined,\r\n        maxBalance: undefined,\r\n        managedBy: undefined,\r\n      };\r\n    },\r\n    [defaultBranchSystemId]\r\n  );\r\n\r\n  const form = useForm<CashAccountFormValues>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: buildFormValues(initialData),\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    form.reset(buildFormValues(initialData));\r\n  }, [initialData, buildFormValues, form]);\r\n\r\n  const accountType = form.watch('type');\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form id=\"cash-account-form\" onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 pt-4 max-h-[70vh] overflow-y-auto px-1\">\r\n         <CashAccountFormField\r\n          control={form.control}\r\n          name=\"type\"\r\n          render={({ field }) => (\r\n            <FormItem className=\"space-y-3\">\r\n              <FormLabel>Lo·∫°i t√†i kho·∫£n</FormLabel>\r\n              <FormControl>\r\n                <RadioGroup\r\n                  onValueChange={field.onChange}\r\n                  value={field.value}\r\n                  className=\"flex space-x-4\"\r\n                >\r\n                  <FormItem className=\"flex items-center space-x-2 space-y-0\">\r\n                    <FormControl>\r\n                      <RadioGroupItem value=\"cash\" />\r\n                    </FormControl>\r\n                    <FormLabel className=\"font-normal\">Ti·ªÅn m·∫∑t</FormLabel>\r\n                  </FormItem>\r\n                  <FormItem className=\"flex items-center space-x-2 space-y-0\">\r\n                    <FormControl>\r\n                      <RadioGroupItem value=\"bank\" />\r\n                    </FormControl>\r\n                    <FormLabel className=\"font-normal\">Ng√¢n h√†ng</FormLabel>\r\n                  </FormItem>\r\n                </RadioGroup>\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n        <CashAccountFormField control={form.control} name=\"name\" render={({ field }) => (\r\n          <FormItem><FormLabel>T√™n t√†i kho·∫£n <span className=\"text-destructive\">*</span></FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n        )} />\r\n        <CashAccountFormField control={form.control} name=\"id\" render={({ field }) => (\r\n          <FormItem><FormLabel>M√£ t√†i kho·∫£n <span className=\"text-destructive\">*</span></FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n        )} />\r\n        <CashAccountFormField control={form.control} name=\"branchSystemId\" render={({ field }) => (\r\n            <FormItem>\r\n                <FormLabel>Thu·ªôc chi nh√°nh</FormLabel>\r\n                <Select onValueChange={field.onChange} value={field.value ?? ''}>\r\n                    <FormControl><SelectTrigger><SelectValue placeholder=\"Ch·ªçn chi nh√°nh\" /></SelectTrigger></FormControl>\r\n                    <SelectContent>{branches.map(b => <SelectItem key={b.systemId} value={b.systemId}>{b.name}</SelectItem>)}</SelectContent>\r\n                </Select>\r\n                <FormMessage />\r\n            </FormItem>\r\n        )} />\r\n        {accountType === 'bank' && (\r\n          <>\r\n            <CashAccountFormField control={form.control} name=\"bankName\" render={({ field }) => (\r\n              <FormItem><FormLabel>T√™n ng√¢n h√†ng</FormLabel><FormControl><Input {...field} value={field.value ?? ''} placeholder=\"Vietcombank, ACB...\" /></FormControl><FormMessage /></FormItem>\r\n            )} />\r\n            <CashAccountFormField control={form.control} name=\"bankCode\" render={({ field }) => (\r\n              <FormItem><FormLabel>M√£ ng√¢n h√†ng</FormLabel><FormControl><Input {...field} value={field.value ?? ''} placeholder=\"VCB, ACB...\" /></FormControl><FormMessage /></FormItem>\r\n            )} />\r\n            <CashAccountFormField control={form.control} name=\"bankAccountNumber\" render={({ field }) => (\r\n              <FormItem><FormLabel>S·ªë t√†i kho·∫£n ng√¢n h√†ng</FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n            )} />\r\n            <CashAccountFormField control={form.control} name=\"accountHolder\" render={({ field }) => (\r\n              <FormItem><FormLabel>Ch·ªß t√†i kho·∫£n</FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n            )} />\r\n            <CashAccountFormField control={form.control} name=\"bankBranch\" render={({ field }) => (\r\n              <FormItem><FormLabel>Chi nh√°nh ng√¢n h√†ng</FormLabel><FormControl><Input {...field} value={field.value ?? ''} /></FormControl><FormMessage /></FormItem>\r\n            )} />\r\n          </>\r\n        )}\r\n        <CashAccountFormField control={form.control} name=\"initialBalance\" render={({ field }) => (\r\n          <FormItem><FormLabel>S·ªë d∆∞ ban ƒë·∫ßu</FormLabel><FormControl><CurrencyInput value={field.value ?? 0} onChange={field.onChange} disabled={!!initialData} /></FormControl><FormMessage /></FormItem>\r\n        )} />\r\n        \r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <CashAccountFormField control={form.control} name=\"minBalance\" render={({ field }) => (\r\n            <FormItem><FormLabel>S·ªë d∆∞ t·ªëi thi·ªÉu</FormLabel><FormControl><CurrencyInput value={field.value ?? 0} onChange={field.onChange} placeholder=\"0\" /></FormControl><FormDescription>C·∫£nh b√°o khi d∆∞·ªõi m·ª©c n√†y</FormDescription><FormMessage /></FormItem>\r\n          )} />\r\n          <CashAccountFormField control={form.control} name=\"maxBalance\" render={({ field }) => (\r\n            <FormItem><FormLabel>S·ªë d∆∞ t·ªëi ƒëa</FormLabel><FormControl><CurrencyInput value={field.value ?? 0} onChange={field.onChange} placeholder=\"0\" /></FormControl><FormDescription>C·∫£nh b√°o khi v∆∞·ª£t m·ª©c n√†y</FormDescription><FormMessage /></FormItem>\r\n          )} />\r\n        </div>\r\n        \r\n        <CashAccountFormField control={form.control} name=\"isActive\" render={({ field }) => (\r\n          <FormItem className=\"flex flex-row items-center justify-between rounded-lg border border-border p-3\">\r\n            <div className=\"space-y-0.5\">\r\n              <FormLabel>Tr·∫°ng th√°i ho·∫°t ƒë·ªông</FormLabel>\r\n              <FormDescription>Cho ph√©p s·ª≠ d·ª•ng t√†i kho·∫£n qu·ªπ n√†y</FormDescription>\r\n            </div>\r\n            <FormControl>\r\n              <Switch checked={field.value} onCheckedChange={field.onChange} />\r\n            </FormControl>\r\n          </FormItem>\r\n        )} />\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11971, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border border-border px-2.5 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100\",\r\n        outline: \"text-foreground\",\r\n        success:\r\n          \"border-transparent bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-100\",\r\n        warning:\r\n          \"border-transparent bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-100\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nconst Badge = React.forwardRef<HTMLDivElement, BadgeProps>(\r\n  ({ className, variant, ...props }, ref) => (\r\n    <div \r\n      ref={ref}\r\n      className={cn(badgeVariants({ variant }), className)} \r\n      {...props} \r\n    />\r\n  )\r\n)\r\nBadge.displayName = \"Badge\"\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,oLACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;YACT,SACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAIf,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 12017, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/cash-accounts/page-content.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Plus, MoreHorizontal } from \"lucide-react\";\r\nimport { useCashbookStore } from \"../../cashbook/store\";\r\nimport { useReceiptStore } from \"../../receipts/store\";\r\nimport { usePaymentStore } from \"../../payments/store\";\r\nimport { useBranchStore } from \"../branches/store\";\r\nimport type { CashAccount } from \"../../cashbook/types\";\r\nimport { CashAccountForm, type CashAccountFormValues } from \"./form\";\r\nimport { Button } from \"../../../components/ui/button\";\r\nimport { Switch } from \"../../../components/ui/switch\";\r\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle } from \"../../../components/ui/dialog\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"../../../components/ui/alert-dialog\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"../../../components/ui/table\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from \"../../../components/ui/dropdown-menu\";\r\nimport { Badge } from \"../../../components/ui/badge\";\r\nimport { toast } from \"sonner\";\r\nimport { asBusinessId, asSystemId, type SystemId } from \"../../../lib/id-types\";\r\nimport { SettingsActionButton } from \"../../../components/settings/SettingsActionButton\";\r\nimport type { RegisterTabActions } from \"../use-tab-action-registry\";\r\n\r\nconst formatCurrency = (value: number) => new Intl.NumberFormat('vi-VN').format(value);\r\n\r\ntype CashAccountsPageContentProps = {\r\n  isActive: boolean;\r\n  onRegisterActions: RegisterTabActions;\r\n};\r\n\r\nexport function CashAccountsPageContent({ isActive, onRegisterActions }: CashAccountsPageContentProps) {\r\n  const { accounts: data, add, update, remove, setDefault } = useCashbookStore();\r\n  const { data: receipts } = useReceiptStore();\r\n  const { data: payments } = usePaymentStore();\r\n  const { data: branches } = useBranchStore();\r\n  \r\n  // T√≠nh s·ªë d∆∞ hi·ªán t·∫°i cho m·ªói t√†i kho·∫£n\r\n  const accountsWithBalance = React.useMemo(() => {\r\n    return data.map(account => {\r\n      const accountReceipts = receipts.filter(r => r.accountSystemId === account.systemId);\r\n      const accountPayments = payments.filter(p => p.accountSystemId === account.systemId);\r\n      \r\n      const totalIn = accountReceipts.reduce((sum, r) => sum + r.amount, 0);\r\n      const totalOut = accountPayments.reduce((sum, p) => sum + p.amount, 0);\r\n      const currentBalance = account.initialBalance + totalIn - totalOut;\r\n      \r\n      // Ki·ªÉm tra c·∫£nh b√°o\r\n      const isLowBalance = account.minBalance && currentBalance < account.minBalance;\r\n      const isHighBalance = account.maxBalance && currentBalance > account.maxBalance;\r\n      \r\n      return { ...account, currentBalance, isLowBalance, isHighBalance };\r\n    });\r\n  }, [data, receipts, payments]);\r\n  \r\n  const [isFormOpen, setIsFormOpen] = React.useState(false);\r\n  const [editingItem, setEditingItem] = React.useState<CashAccount | null>(null);\r\n  const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n  const [idToDelete, setIdToDelete] = React.useState<SystemId | null>(null);\r\n  \r\n  const handleAddNew = React.useCallback(() => {\r\n    setEditingItem(null);\r\n    setIsFormOpen(true);\r\n  }, []);\r\n\r\n  const handleEdit = React.useCallback((item: CashAccount) => { setEditingItem(item); setIsFormOpen(true); }, []);\r\n  const handleDeleteRequest = (systemId: SystemId) => { \r\n    setIdToDelete(systemId);\r\n    setIsAlertOpen(true);\r\n  };\r\n  \r\n  const handleToggleStatus = (item: CashAccount, isActive: boolean) => {\r\n    update(item.systemId, { ...item, isActive });\r\n    toast.success(isActive ? `ƒê√£ k√≠ch ho·∫°t \"${item.name}\"` : `ƒê√£ t·∫Øt \"${item.name}\"`);\r\n  };\r\n  \r\n  const handleToggleDefault = React.useCallback((item: CashAccount, checked: boolean) => {\r\n    if (checked) {\r\n      setDefault(item.systemId);\r\n      toast.success(`ƒê√£ ƒë·∫∑t \"${item.name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n    } else {\r\n      const otherAccounts = data.filter(a => a.systemId !== item.systemId);\r\n      if (otherAccounts.length > 0) {\r\n        setDefault(otherAccounts[0].systemId);\r\n        toast.success(`ƒê√£ ƒë·∫∑t \"${otherAccounts[0].name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n      } else {\r\n        toast.error('Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt t√†i kho·∫£n m·∫∑c ƒë·ªãnh');\r\n      }\r\n    }\r\n  }, [data, setDefault]);\r\n  \r\n  const handleSetDefault = (item: CashAccount) => {\r\n    setDefault(item.systemId);\r\n    toast.success(`ƒê√£ ƒë·∫∑t \"${item.name}\" l√†m m·∫∑c ƒë·ªãnh`);\r\n  };\r\n  \r\n  const confirmDelete = () => {\r\n    if (idToDelete) {\r\n      const item = data.find(a => a.systemId === idToDelete);\r\n      remove(idToDelete);\r\n      toast.success(`ƒê√£ x√≥a \"${item?.name}\"`);\r\n    }\r\n    setIsAlertOpen(false);\r\n    setIdToDelete(null);\r\n  };\r\n  \r\n  const normalizeFormValues = (values: CashAccountFormValues): Omit<CashAccount, 'systemId'> => {\r\n    const sanitizedId = values.id.trim().toUpperCase();\r\n    const sanitizedName = values.name.trim();\r\n    const branchId = values.branchSystemId ? asSystemId(values.branchSystemId) : undefined;\r\n    const managerId = values.managedBy ? asSystemId(values.managedBy) : undefined;\r\n\r\n    const trimmed = (input?: string) => {\r\n      if (!input) return undefined;\r\n      const next = input.trim();\r\n      return next.length > 0 ? next : undefined;\r\n    };\r\n\r\n    const bankAccountNumber = trimmed(values.bankAccountNumber);\r\n    const bankBranch = trimmed(values.bankBranch);\r\n    const bankName = trimmed(values.bankName);\r\n    const bankCode = trimmed(values.bankCode);\r\n    const accountHolder = trimmed(values.accountHolder);\r\n\r\n    return {\r\n      id: asBusinessId(sanitizedId),\r\n      name: sanitizedName,\r\n      initialBalance: values.initialBalance,\r\n      type: values.type,\r\n      isActive: values.isActive,\r\n      ...(values.isDefault !== undefined ? { isDefault: values.isDefault } : {}),\r\n      ...(bankAccountNumber ? { bankAccountNumber } : {}),\r\n      ...(bankBranch ? { bankBranch } : {}),\r\n      ...(bankName ? { bankName } : {}),\r\n      ...(bankCode ? { bankCode } : {}),\r\n      ...(accountHolder ? { accountHolder } : {}),\r\n      ...(values.minBalance !== undefined ? { minBalance: values.minBalance } : {}),\r\n      ...(values.maxBalance !== undefined ? { maxBalance: values.maxBalance } : {}),\r\n      ...(branchId ? { branchSystemId: branchId } : {}),\r\n      ...(managerId ? { managedBy: managerId } : {}),\r\n    };\r\n  };\r\n\r\n  const handleFormSubmit = (values: CashAccountFormValues) => {\r\n    try {\r\n      const payload = normalizeFormValues(values);\r\n      if (editingItem) {\r\n        update(editingItem.systemId, { ...editingItem, ...payload });\r\n        toast.success(\"C·∫≠p nh·∫≠t th√†nh c√¥ng\");\r\n      } else {\r\n        add(payload);\r\n        toast.success(\"Th√™m m·ªõi th√†nh c√¥ng\");\r\n      }\r\n      setIsFormOpen(false);\r\n    } catch (error) {\r\n      toast.error(\"C√≥ l·ªói x·∫£y ra\", {\r\n        description: error instanceof Error ? error.message : \"L·ªói kh√¥ng x√°c ƒë·ªãnh\",\r\n      });\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!isActive) {\r\n      return;\r\n    }\r\n\r\n    onRegisterActions([\r\n      <SettingsActionButton key=\"add-cash-account\" onClick={handleAddNew}>\r\n        <Plus className=\"mr-2 h-4 w-4\" /> Th√™m t√†i kho·∫£n qu·ªπ\r\n      </SettingsActionButton>,\r\n    ]);\r\n  }, [handleAddNew, isActive, onRegisterActions]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"rounded-md border\">\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>M√£ t√†i kho·∫£n</TableHead>\r\n              <TableHead>T√™n t√†i kho·∫£n</TableHead>\r\n              <TableHead>Lo·∫°i</TableHead>\r\n              <TableHead>Ng√¢n h√†ng</TableHead>\r\n              <TableHead>Chi nh√°nh</TableHead>\r\n              <TableHead className=\"text-right\">S·ªë d∆∞ hi·ªán t·∫°i</TableHead>\r\n              <TableHead>M·∫∑c ƒë·ªãnh</TableHead>\r\n              <TableHead>Tr·∫°ng th√°i</TableHead>\r\n              <TableHead className=\"text-right\">Thao t√°c</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {accountsWithBalance.length === 0 ? (\r\n              <TableRow>\r\n                <TableCell colSpan={9} className=\"h-24 text-center\">\r\n                  Ch∆∞a c√≥ d·ªØ li·ªáu\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              accountsWithBalance.map((item) => {\r\n                const branch = branches.find(b => b.systemId === item.branchSystemId);\r\n                return (\r\n                  <TableRow key={item.systemId}>\r\n                    <TableCell className=\"font-medium\">{item.id}</TableCell>\r\n                    <TableCell className=\"font-medium\">{item.name}</TableCell>\r\n                    <TableCell>\r\n                      <Badge variant={item.type === 'cash' ? 'default' : 'secondary'}>\r\n                        {item.type === 'cash' ? 'Ti·ªÅn m·∫∑t' : 'Ng√¢n h√†ng'}\r\n                      </Badge>\r\n                    </TableCell>\r\n                    <TableCell className=\"text-sm\">\r\n                      {item.type === 'bank' && item.bankName ? (\r\n                        <div>\r\n                          <div className=\"font-medium\">{item.bankName}</div>\r\n                          {item.bankAccountNumber && (\r\n                            <div className=\"text-xs text-muted-foreground\">\r\n                              {item.bankAccountNumber}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      ) : '‚Äî'}\r\n                    </TableCell>\r\n                    <TableCell className=\"text-sm text-muted-foreground\">\r\n                      {branch?.name || '‚Äî'}\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right\">\r\n                      <div className=\"font-medium\">\r\n                        {formatCurrency(item.currentBalance)}\r\n                      </div>\r\n                      {(item.isLowBalance || item.isHighBalance) && (\r\n                        <div className=\"text-xs text-orange-600\">\r\n                          {item.isLowBalance && '‚ö† D∆∞·ªõi m·ª©c t·ªëi thi·ªÉu'}\r\n                          {item.isHighBalance && '‚ö† V∆∞·ª£t m·ª©c t·ªëi ƒëa'}\r\n                        </div>\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Switch \r\n                        checked={item.isDefault} \r\n                        onCheckedChange={(checked) => handleToggleDefault(item, checked)}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Switch \r\n                        checked={item.isActive} \r\n                        onCheckedChange={(checked) => handleToggleStatus(item, checked)}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right\">\r\n                      <DropdownMenu>\r\n                        <DropdownMenuTrigger asChild>\r\n                          <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\r\n                            <span className=\"sr-only\">M·ªü menu</span>\r\n                            <MoreHorizontal className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </DropdownMenuTrigger>\r\n                        <DropdownMenuContent align=\"end\">\r\n                          <DropdownMenuLabel>Thao t√°c</DropdownMenuLabel>\r\n                          <DropdownMenuSeparator />\r\n                          <DropdownMenuItem onClick={() => handleEdit(item)}>\r\n                            Ch·ªânh s·ª≠a\r\n                          </DropdownMenuItem>\r\n                          {!item.isDefault && (\r\n                            <DropdownMenuItem onClick={() => handleSetDefault(item)}>\r\n                              ƒê·∫∑t l√†m m·∫∑c ƒë·ªãnh\r\n                            </DropdownMenuItem>\r\n                          )}\r\n                          <DropdownMenuItem\r\n                            onClick={() => handleDeleteRequest(item.systemId)}\r\n                            className=\"text-destructive\"\r\n                          >\r\n                            X√≥a\r\n                          </DropdownMenuItem>\r\n                        </DropdownMenuContent>\r\n                      </DropdownMenu>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </div>\r\n      \r\n      <Dialog open={isFormOpen} onOpenChange={setIsFormOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingItem ? 'C·∫≠p nh·∫≠t t√†i kho·∫£n qu·ªπ' : 'Th√™m t√†i kho·∫£n qu·ªπ'}</DialogTitle>\r\n          </DialogHeader>\r\n          <CashAccountForm initialData={editingItem} onSubmit={handleFormSubmit} />\r\n          <DialogFooter>\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => setIsFormOpen(false)}>H·ªßy</Button>\r\n            <Button type=\"submit\" form=\"cash-account-form\">L∆∞u</Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>X√°c nh·∫≠n x√≥a?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c. T√†i kho·∫£n qu·ªπ s·∫Ω b·ªã x√≥a vƒ©nh vi·ªÖn.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>H·ªßy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDelete}>X√≥a</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12723, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-tab-action-registry.ts"],"sourcesContent":["import * as React from 'react';\r\n\r\nexport type RegisterTabActions = (actions?: React.ReactNode[]) => void;\r\n\r\nexport type TabActionRegistry = {\r\n  headerActions: React.ReactNode[];\r\n  registerActions: (tabValue: string) => RegisterTabActions;\r\n  setHeaderActions: React.Dispatch<React.SetStateAction<React.ReactNode[]>>;\r\n};\r\n\r\nexport function useTabActionRegistry(activeTab: string): TabActionRegistry {\r\n  const [headerActions, setHeaderActions] = React.useState<React.ReactNode[]>([]);\r\n\r\n  const registerActions = React.useCallback(\r\n    (tabValue: string) => (actions?: React.ReactNode[]) => {\r\n      if (tabValue === activeTab) {\r\n        setHeaderActions(actions ?? []);\r\n      }\r\n    },\r\n    [activeTab],\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    setHeaderActions([]);\r\n  }, [activeTab]);\r\n\r\n  return {\r\n    headerActions,\r\n    registerActions,\r\n    setHeaderActions,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAUO,SAAS,qBAAqB,SAAiB;IACpD,MAAM,CAAC,eAAe,iBAAiB,GAAG,iNAAc,CAAoB,EAAE;IAE9E,MAAM,kBAAkB,oNAAiB,CACvC,CAAC,WAAqB,CAAC;YACrB,IAAI,aAAa,WAAW;gBAC1B,iBAAiB,WAAW,EAAE;YAChC;QACF,GACA;QAAC;KAAU;IAGb,kNAAe,CAAC;QACd,iBAAiB,EAAE;IACrB,GAAG;QAAC;KAAU;IAEd,OAAO;QACL;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 12753, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/settings/SettingsVerticalTabs.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Tabs, TabsList, TabsTrigger } from \"../ui/tabs\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\ntype SettingsVerticalTabsItem = {\r\n  value: string;\r\n  label: React.ReactNode;\r\n  disabled?: boolean;\r\n  className?: string;\r\n};\r\n\r\ntype SettingsVerticalTabsProps = {\r\n  value: string;\r\n  onValueChange: (value: string) => void;\r\n  tabs: SettingsVerticalTabsItem[];\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  listClassName?: string;\r\n  contentWrapperClassName?: string;\r\n};\r\n\r\n/**\r\n * Shared layout for Settings pages that need sticky vertical tabs.\r\n * Uses shadcn/ui Tabs component with custom styling for vertical layout on desktop.\r\n */\r\nexport function SettingsVerticalTabs({\r\n  value,\r\n  onValueChange,\r\n  tabs,\r\n  children,\r\n  className,\r\n  listClassName,\r\n  contentWrapperClassName,\r\n}: SettingsVerticalTabsProps) {\r\n  return (\r\n    <Tabs \r\n      value={value} \r\n      onValueChange={onValueChange} \r\n      className={cn(\"flex flex-col md:flex-row md:gap-8\", className)}\r\n    >\r\n      {/* Mobile: horizontal scrollable tabs, Desktop: vertical sidebar */}\r\n      <TabsList\r\n        className={cn(\r\n          // Base styles\r\n          \"h-auto w-full justify-start rounded-lg bg-muted p-1\",\r\n          // Mobile: horizontal with scroll\r\n          \"flex flex-row gap-1 overflow-x-auto\",\r\n          // Desktop: vertical sidebar\r\n          \"md:flex-col md:w-[200px] md:shrink-0 md:bg-transparent md:p-0\",\r\n          \"md:sticky md:top-6 md:self-start\",\r\n          listClassName,\r\n        )}\r\n      >\r\n        {tabs.map((tab) => (\r\n          <TabsTrigger\r\n            key={tab.value}\r\n            value={tab.value}\r\n            disabled={tab.disabled}\r\n            className={cn(\r\n              // Mobile: compact horizontal tabs\r\n              \"flex-shrink-0 px-3 py-1.5 text-sm text-foreground\",\r\n              // Desktop: full-width vertical tabs\r\n              \"md:w-full md:justify-start md:px-4 md:py-2\",\r\n              \"md:data-[state=active]:bg-muted md:data-[state=active]:shadow-none\",\r\n              tab.className\r\n            )}\r\n          >\r\n            {tab.label}\r\n          </TabsTrigger>\r\n        ))}\r\n      </TabsList>\r\n      \r\n      {/* Content area */}\r\n      <div className={cn(\r\n        \"flex-1 min-w-0 mt-4 md:mt-0\",\r\n        contentWrapperClassName\r\n      )}>\r\n        {children}\r\n      </div>\r\n    </Tabs>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAuBO,SAAS,qBAAqB,EACnC,KAAK,EACL,aAAa,EACb,IAAI,EACJ,QAAQ,EACR,SAAS,EACT,aAAa,EACb,uBAAuB,EACG;IAC1B,qBACE,8OAAC,iIAAI;QACH,OAAO;QACP,eAAe;QACf,WAAW,IAAA,kHAAE,EAAC,sCAAsC;;0BAGpD,8OAAC,qIAAQ;gBACP,WAAW,IAAA,kHAAE,EACX,cAAc;gBACd,uDACA,iCAAiC;gBACjC,uCACA,4BAA4B;gBAC5B,iEACA,oCACA;0BAGD,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC,wIAAW;wBAEV,OAAO,IAAI,KAAK;wBAChB,UAAU,IAAI,QAAQ;wBACtB,WAAW,IAAA,kHAAE,EACX,kCAAkC;wBAClC,qDACA,oCAAoC;wBACpC,8CACA,sEACA,IAAI,SAAS;kCAGd,IAAI,KAAK;uBAZL,IAAI,KAAK;;;;;;;;;;0BAkBpB,8OAAC;gBAAI,WAAW,IAAA,kHAAE,EAChB,+BACA;0BAEC;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 12810, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/payment-settings-page.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../../components/ui/card';\r\nimport { TabsContent } from '../../components/ui/tabs';\r\nimport { useSettingsPageHeader } from './use-settings-page-header';\r\nimport { ReceiptTypesPageContent } from './receipt-types/page-content';\r\nimport { PaymentTypesPageContent } from './payments/types/page-content';\r\nimport { PaymentMethodsPageContent } from './payments/methods/page-content';\r\nimport { TargetGroupsPageContent } from './target-groups/page-content';\r\nimport { CashAccountsPageContent } from './cash-accounts/page-content';\r\nimport { useTabActionRegistry } from './use-tab-action-registry';\r\nimport { SettingsVerticalTabs } from '../../components/settings/SettingsVerticalTabs';\r\n\r\nexport function PaymentSettingsPage() {\r\n  const [activeTab, setActiveTab] = React.useState('receipt-types');\r\n  const { headerActions, registerActions } = useTabActionRegistry(activeTab);\r\n  const registerReceiptTypesActions = React.useMemo(() => registerActions('receipt-types'), [registerActions]);\r\n  const registerPaymentTypesActions = React.useMemo(() => registerActions('payment-types'), [registerActions]);\r\n  const registerPaymentMethodsActions = React.useMemo(() => registerActions('payment-methods'), [registerActions]);\r\n  const registerCashAccountsActions = React.useMemo(() => registerActions('cash-accounts'), [registerActions]);\r\n  const registerTargetGroupsActions = React.useMemo(() => registerActions('target-groups'), [registerActions]);\r\n\r\n  useSettingsPageHeader({\r\n    title: 'C√†i ƒë·∫∑t thanh to√°n',\r\n    subtitle: 'Qu·∫£n l√Ω phi·∫øu thu chi v√† h√¨nh th·ª©c thanh to√°n',\r\n    actions: headerActions,\r\n  });\r\n\r\n  const tabs = React.useMemo(\r\n    () => [\r\n      { value: 'receipt-types', label: 'Lo·∫°i phi·∫øu thu' },\r\n      { value: 'payment-types', label: 'Lo·∫°i phi·∫øu chi' },\r\n      { value: 'payment-methods', label: 'H√¨nh th·ª©c thanh to√°n' },\r\n      { value: 'cash-accounts', label: 'T√†i kho·∫£n qu·ªπ' },\r\n      { value: 'target-groups', label: 'Nh√≥m ƒë·ªëi t∆∞·ª£ng' },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <SettingsVerticalTabs value={activeTab} onValueChange={setActiveTab} tabs={tabs}>\r\n        <TabsContent value=\"receipt-types\" className=\"mt-0\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Lo·∫°i phi·∫øu thu</CardTitle>\r\n              <CardDescription>\r\n                Qu·∫£n l√Ω c√°c lo·∫°i phi·∫øu thu: Thu t·ª´ kh√°ch h√†ng, Thu kh√°c...\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <ReceiptTypesPageContent\r\n                isActive={activeTab === 'receipt-types'}\r\n                onRegisterActions={registerReceiptTypesActions}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"payment-types\" className=\"mt-0\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Lo·∫°i phi·∫øu chi</CardTitle>\r\n              <CardDescription>\r\n                Qu·∫£n l√Ω c√°c lo·∫°i phi·∫øu chi: Chi cho nh√† cung c·∫•p, Chi l∆∞∆°ng, Chi kh√°c...\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <PaymentTypesPageContent\r\n                isActive={activeTab === 'payment-types'}\r\n                onRegisterActions={registerPaymentTypesActions}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"payment-methods\" className=\"mt-0\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>H√¨nh th·ª©c thanh to√°n</CardTitle>\r\n              <CardDescription>\r\n                Qu·∫£n l√Ω c√°c h√¨nh th·ª©c thanh to√°n: Ti·ªÅn m·∫∑t, Chuy·ªÉn kho·∫£n, V√≠ ƒëi·ªán t·ª≠...\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <PaymentMethodsPageContent\r\n                isActive={activeTab === 'payment-methods'}\r\n                onRegisterActions={registerPaymentMethodsActions}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"cash-accounts\" className=\"mt-0\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>T√†i kho·∫£n qu·ªπ</CardTitle>\r\n              <CardDescription>\r\n                Qu·∫£n l√Ω c√°c t√†i kho·∫£n qu·ªπ ti·ªÅn m·∫∑t v√† ng√¢n h√†ng c·ªßa doanh nghi·ªáp\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <CashAccountsPageContent\r\n                isActive={activeTab === 'cash-accounts'}\r\n                onRegisterActions={registerCashAccountsActions}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"target-groups\" className=\"mt-0\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Nh√≥m ƒë·ªëi t∆∞·ª£ng</CardTitle>\r\n              <CardDescription>\r\n                Qu·∫£n l√Ω c√°c nh√≥m ƒë·ªëi t∆∞·ª£ng: Kh√°ch h√†ng, Nh√† cung c·∫•p, Nh√¢n vi√™n, ƒê·ªëi t√°c...\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <TargetGroupsPageContent\r\n                isActive={activeTab === 'target-groups'}\r\n                onRegisterActions={registerTargetGroupsActions}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n    </SettingsVerticalTabs>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}