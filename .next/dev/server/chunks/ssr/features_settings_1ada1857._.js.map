{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-settings-page-header.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Settings2 } from 'lucide-react';\r\nimport { usePageHeader, type PageHeaderState, type PageHeaderDocLink } from '../../contexts/page-header-context';\r\nimport type { BreadcrumbItem } from '../../lib/breadcrumb-system';\r\n\r\nexport type SettingsPageHeaderOptions = Omit<PageHeaderState, 'title' | 'docLink'> & {\r\n  title: string;\r\n  icon?: React.ReactNode;\r\n  docLink?: string | PageHeaderDocLink;\r\n};\r\n\r\nconst defaultDocLabel = 'Xem hướng dẫn';\r\nconst baseBreadcrumb: BreadcrumbItem[] = [\r\n  { label: 'Trang chủ', href: '/', isCurrent: false },\r\n  { label: 'Cài đặt', href: '/settings', isCurrent: false },\r\n];\r\n\r\nconst normalizeLabel = (label?: string) => label?.trim().toLocaleLowerCase('vi');\r\nconst isHomeCrumb = (item: BreadcrumbItem) => item.href === '/' || normalizeLabel(item.label) === 'trang chủ';\r\nconst isSettingsCrumb = (item: BreadcrumbItem) => item.href === '/settings' || normalizeLabel(item.label) === 'cài đặt';\r\n\r\nexport function useSettingsPageHeader(options: SettingsPageHeaderOptions) {\r\n  const pathname = usePathname();\r\n  const { title, icon, docLink, breadcrumb, ...rest } = options;\r\n\r\n  const normalizedDocLink = React.useMemo<PageHeaderDocLink | undefined>(() => {\r\n    if (!docLink) return undefined;\r\n    if (typeof docLink === 'string') {\r\n      return { href: docLink, label: defaultDocLabel };\r\n    }\r\n    return {\r\n      href: docLink.href,\r\n      label: docLink.label ?? defaultDocLabel,\r\n    };\r\n  }, [docLink]);\r\n\r\n  const decoratedTitle = React.useMemo(() => (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      {(icon ?? <Settings2 className=\"h-5 w-5 text-muted-foreground\" aria-hidden=\"true\" />)}\r\n      <span>{title}</span>\r\n    </span>\r\n  ), [icon, title]);\r\n\r\n  const normalizedBreadcrumb = React.useMemo(() => {\r\n    const custom = (breadcrumb ?? []).map((item) => ({\r\n      ...item,\r\n      href: item.href || pathname,\r\n    }));\r\n\r\n    let merged: BreadcrumbItem[] = custom.length\r\n      ? [...custom]\r\n      : [{ label: title, href: pathname, isCurrent: true }];\r\n\r\n    if (!merged.some(isHomeCrumb)) {\r\n      merged = [{ ...baseBreadcrumb[0] }, ...merged];\r\n    }\r\n\r\n    if (!merged.some(isSettingsCrumb)) {\r\n      const homeIndex = merged.findIndex(isHomeCrumb);\r\n      const insertionIndex = homeIndex >= 0 ? homeIndex + 1 : 0;\r\n      merged = [\r\n        ...merged.slice(0, insertionIndex),\r\n        { ...baseBreadcrumb[1] },\r\n        ...merged.slice(insertionIndex),\r\n      ];\r\n    }\r\n\r\n    return merged.map((item, index) => ({\r\n      ...item,\r\n      isCurrent: index === merged.length - 1,\r\n    }));\r\n  }, [breadcrumb, pathname, title]);\r\n\r\n  return usePageHeader({\r\n    ...rest,\r\n    breadcrumb: normalizedBreadcrumb,\r\n    title: decoratedTitle,\r\n    docLink: normalizedDocLink,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;AASA,MAAM,kBAAkB;AACxB,MAAM,iBAAmC;IACvC;QAAE,OAAO;QAAa,MAAM;QAAK,WAAW;IAAM;IAClD;QAAE,OAAO;QAAW,MAAM;QAAa,WAAW;IAAM;CACzD;AAED,MAAM,iBAAiB,CAAC,QAAmB,OAAO,OAAO,kBAAkB;AAC3E,MAAM,cAAc,CAAC,OAAyB,KAAK,IAAI,KAAK,OAAO,eAAe,KAAK,KAAK,MAAM;AAClG,MAAM,kBAAkB,CAAC,OAAyB,KAAK,IAAI,KAAK,eAAe,eAAe,KAAK,KAAK,MAAM;AAEvG,SAAS,sBAAsB,OAAkC;IACtE,MAAM,WAAW,IAAA,oMAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;IAEtD,MAAM,oBAAoB,gNAAa,CAAgC;QACrE,IAAI,CAAC,SAAS,OAAO;QACrB,IAAI,OAAO,YAAY,UAAU;YAC/B,OAAO;gBAAE,MAAM;gBAAS,OAAO;YAAgB;QACjD;QACA,OAAO;YACL,MAAM,QAAQ,IAAI;YAClB,OAAO,QAAQ,KAAK,IAAI;QAC1B;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,iBAAiB,gNAAa,CAAC,kBACnC,8OAAC;YAAK,WAAU;;gBACZ,sBAAQ,8OAAC,6NAAS;oBAAC,WAAU;oBAAgC,eAAY;;;;;;8BAC3E,8OAAC;8BAAM;;;;;;;;;;;kBAER;QAAC;QAAM;KAAM;IAEhB,MAAM,uBAAuB,gNAAa,CAAC;QACzC,MAAM,SAAS,CAAC,cAAc,EAAE,EAAE,GAAG,CAAC,CAAC,OAAS,CAAC;gBAC/C,GAAG,IAAI;gBACP,MAAM,KAAK,IAAI,IAAI;YACrB,CAAC;QAED,IAAI,SAA2B,OAAO,MAAM,GACxC;eAAI;SAAO,GACX;YAAC;gBAAE,OAAO;gBAAO,MAAM;gBAAU,WAAW;YAAK;SAAE;QAEvD,IAAI,CAAC,OAAO,IAAI,CAAC,cAAc;YAC7B,SAAS;gBAAC;oBAAE,GAAG,cAAc,CAAC,EAAE;gBAAC;mBAAM;aAAO;QAChD;QAEA,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB;YACjC,MAAM,YAAY,OAAO,SAAS,CAAC;YACnC,MAAM,iBAAiB,aAAa,IAAI,YAAY,IAAI;YACxD,SAAS;mBACJ,OAAO,KAAK,CAAC,GAAG;gBACnB;oBAAE,GAAG,cAAc,CAAC,EAAE;gBAAC;mBACpB,OAAO,KAAK,CAAC;aACjB;QACH;QAEA,OAAO,OAAO,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;gBAClC,GAAG,IAAI;gBACP,WAAW,UAAU,OAAO,MAAM,GAAG;YACvC,CAAC;IACH,GAAG;QAAC;QAAY;QAAU;KAAM;IAEhC,OAAO,IAAA,uJAAa,EAAC;QACnB,GAAG,IAAI;QACP,YAAY;QACZ,OAAO;QACP,SAAS;IACX;AACF"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/store.ts"],"sourcesContent":["import { createCrudStore, CrudState } from '../../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { Branch } from './types';\r\nimport { SystemId } from '../../../lib/id-types';\r\n\r\nexport interface BranchStoreState extends CrudState<Branch> {\r\n  setDefault: (systemId: SystemId) => void;\r\n}\r\n\r\nconst baseStore = createCrudStore<Branch>([], 'branches', {\r\n  apiEndpoint: '/api/branches',\r\n});\r\n\r\nconst setDefault = (systemId: SystemId) => {\r\n  baseStore.setState(state => ({\r\n    data: state.data.map(branch => ({\r\n      ...branch,\r\n      isDefault: branch.systemId === systemId,\r\n    })),\r\n  }));\r\n};\r\n\r\nconst originalAdd = baseStore.getState().add;\r\nconst originalUpdate = baseStore.getState().update;\r\n\r\nbaseStore.setState({\r\n  add: (item: Omit<Branch, 'systemId'>) => {\r\n    const result = originalAdd(item);\r\n    if ((item as Branch).isDefault) {\r\n      setDefault(result.systemId);\r\n    }\r\n    return result;\r\n  },\r\n  update: (systemId: SystemId, updatedItem: Branch) => {\r\n    originalUpdate(systemId, updatedItem);\r\n    if (updatedItem.isDefault) {\r\n      setDefault(systemId);\r\n    }\r\n  },\r\n} as Partial<BranchStoreState>);\r\n\r\nconst enhanceState = (state: CrudState<Branch>): BranchStoreState => ({\r\n  ...state,\r\n  setDefault,\r\n});\r\n\r\ntype BranchStoreHook = (() => BranchStoreState) & {\r\n  getState: () => BranchStoreState;\r\n};\r\n\r\nconst useBranchStoreBase = (() => enhanceState(baseStore())) as BranchStoreHook;\r\n\r\nuseBranchStoreBase.getState = () => enhanceState(baseStore.getState());\r\n\r\nexport const useBranchStore = useBranchStoreBase;\r\n"],"names":[],"mappings":";;;;AAAA;;AASA,MAAM,YAAY,IAAA,0IAAe,EAAS,EAAE,EAAE,YAAY;IACxD,aAAa;AACf;AAEA,MAAM,aAAa,CAAC;IAClB,UAAU,QAAQ,CAAC,CAAA,QAAS,CAAC;YAC3B,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA,SAAU,CAAC;oBAC9B,GAAG,MAAM;oBACT,WAAW,OAAO,QAAQ,KAAK;gBACjC,CAAC;QACH,CAAC;AACH;AAEA,MAAM,cAAc,UAAU,QAAQ,GAAG,GAAG;AAC5C,MAAM,iBAAiB,UAAU,QAAQ,GAAG,MAAM;AAElD,UAAU,QAAQ,CAAC;IACjB,KAAK,CAAC;QACJ,MAAM,SAAS,YAAY;QAC3B,IAAI,AAAC,KAAgB,SAAS,EAAE;YAC9B,WAAW,OAAO,QAAQ;QAC5B;QACA,OAAO;IACT;IACA,QAAQ,CAAC,UAAoB;QAC3B,eAAe,UAAU;QACzB,IAAI,YAAY,SAAS,EAAE;YACzB,WAAW;QACb;IACF;AACF;AAEA,MAAM,eAAe,CAAC,QAA+C,CAAC;QACpE,GAAG,KAAK;QACR;IACF,CAAC;AAMD,MAAM,qBAAsB,IAAM,aAAa;AAE/C,mBAAmB,QAAQ,GAAG,IAAM,aAAa,UAAU,QAAQ;AAE5D,MAAM,iBAAiB"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/branches/branch-form.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { useForm, type ControllerProps, type FieldPath } from 'react-hook-form';\r\nimport { asSystemId, asBusinessId } from '@/lib/id-types';\r\nimport type { Branch } from './types';\r\nimport { useBranchStore } from './store';\r\nimport { useEmployeeStore } from '../../employees/store';\r\nimport { useProvinceStore } from '../provinces/store';\r\nimport { Button } from '../../../components/ui/button';\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '../../../components/ui/form';\r\nimport { Input } from '../../../components/ui/input';\r\nimport { Combobox } from '../../../components/ui/combobox';\r\nimport { Checkbox } from '../../../components/ui/checkbox';\r\nimport { DialogFooter } from '../../../components/ui/dialog';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../../components/ui/select';\r\nimport { RadioGroup, RadioGroupItem } from '../../../components/ui/radio-group';\r\nimport { Label } from '../../../components/ui/label';\r\n\r\nexport type BranchFormValues = Omit<Branch, 'systemId'>;\r\n\r\nconst BranchFormField = <TName extends FieldPath<BranchFormValues>>(props: ControllerProps<BranchFormValues, TName>) => (\r\n  <FormField<BranchFormValues, TName> {...props} />\r\n);\r\n\r\ninterface BranchFormProps {\r\n  initialData: Branch | null;\r\n  onSubmit: (values: BranchFormValues) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nexport function BranchForm({ initialData, onSubmit, onCancel }: BranchFormProps) {\r\n  const { data: branches } = useBranchStore();\r\n  const { searchEmployees, data: allEmployees } = useEmployeeStore();\r\n  const { \r\n    data: provinces, \r\n    getDistricts3LevelByProvinceId,\r\n    getWards2LevelByProvinceId,\r\n    getWards3LevelByDistrictId\r\n  } = useProvinceStore();\r\n\r\n  const form = useForm<BranchFormValues>({\r\n    defaultValues:\r\n      initialData || {\r\n        id: '',\r\n        name: '',\r\n        address: '',\r\n        phone: '',\r\n        managerId: undefined,\r\n        isDefault: false,\r\n        addressLevel: '3-level', // Mặc định 3-cấp\r\n        province: undefined,\r\n        provinceId: undefined,\r\n        district: undefined,\r\n        districtId: undefined,\r\n        ward: undefined,\r\n        wardCode: undefined,\r\n      },\r\n  });\r\n\r\n  // Watch address fields\r\n  const addressLevel = form.watch('addressLevel') ?? '3-level';\r\n  const selectedProvinceId = form.watch('provinceId');\r\n  const selectedDistrictId = form.watch('districtId');\r\n\r\n  // Get districts for 3-level\r\n  const districts = React.useMemo(() => {\r\n    if (addressLevel === '3-level' && selectedProvinceId) {\r\n      return getDistricts3LevelByProvinceId(asBusinessId(selectedProvinceId));\r\n    }\r\n    return [];\r\n  }, [addressLevel, selectedProvinceId, getDistricts3LevelByProvinceId]);\r\n\r\n  // Get wards based on level\r\n  const wards = React.useMemo(() => {\r\n    if (addressLevel === '2-level' && selectedProvinceId) {\r\n      return getWards2LevelByProvinceId(asBusinessId(selectedProvinceId));\r\n    } else if (addressLevel === '3-level' && selectedDistrictId) {\r\n      return getWards3LevelByDistrictId(selectedDistrictId);\r\n    }\r\n    return [];\r\n  }, [addressLevel, selectedProvinceId, selectedDistrictId, getWards2LevelByProvinceId, getWards3LevelByDistrictId]);\r\n\r\n  const handleFormSubmit = (values: BranchFormValues) => {\r\n    onSubmit(values);\r\n  };\r\n  \r\n  const managerId = form.watch('managerId');\r\n  const selectedManager = React.useMemo(() => {\r\n    if (!managerId) return null;\r\n    const employee = allEmployees.find(e => e.systemId === managerId);\r\n    return employee ? { value: employee.systemId, label: employee.fullName } : null;\r\n  }, [managerId, allEmployees]);\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form id=\"branch-form\" onSubmit={form.handleSubmit(handleFormSubmit)} className=\"space-y-6\">\r\n        {/* Section 1: Thông tin cơ bản */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold border-b pb-2\">Thông tin cơ bản</h3>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <BranchFormField\r\n              control={form.control}\r\n              name=\"id\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Mã chi nhánh *</FormLabel>\r\n                  <FormControl><Input {...field} placeholder=\"VD: HCM, HN\" value={field.value ?? ''} /></FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <BranchFormField\r\n              control={form.control}\r\n              name=\"name\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tên chi nhánh *</FormLabel>\r\n                  <FormControl><Input {...field} placeholder=\"VD: Chi nhánh Hồ Chí Minh\" value={field.value ?? ''} /></FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section 2: Địa chỉ chi tiết */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold border-b pb-2\">Địa chỉ chi tiết</h3>\r\n          \r\n          {/* Address Level Radio */}\r\n          <BranchFormField\r\n            control={form.control}\r\n            name=\"addressLevel\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Loại địa chỉ *</FormLabel>\r\n                <FormControl>\r\n                  <RadioGroup\r\n                    value={field.value}\r\n                    onValueChange={(value) => {\r\n                      field.onChange(value);\r\n                      // Reset address fields when changing level\r\n                      form.setValue('provinceId', undefined);\r\n                      form.setValue('province', undefined);\r\n                      form.setValue('districtId', undefined);\r\n                      form.setValue('district', undefined);\r\n                      form.setValue('wardCode', undefined);\r\n                      form.setValue('ward', undefined);\r\n                    }}\r\n                    className=\"flex gap-6\"\r\n                  >\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <RadioGroupItem value=\"2-level\" id=\"2-level\" />\r\n                      <Label htmlFor=\"2-level\" className=\"font-normal cursor-pointer text-sm\">\r\n                        2 cấp <span className=\"text-muted-foreground\">(Tỉnh → Phường/Xã)</span>\r\n                      </Label>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <RadioGroupItem value=\"3-level\" id=\"3-level\" />\r\n                      <Label htmlFor=\"3-level\" className=\"font-normal cursor-pointer text-sm\">\r\n                        3 cấp <span className=\"text-muted-foreground\">(Tỉnh → Quận → Phường)</span>\r\n                      </Label>\r\n                    </div>\r\n                  </RadioGroup>\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          {/* Province / District / Ward in one row */}\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            {/* Province */}\r\n            <BranchFormField\r\n              control={form.control}\r\n              name=\"provinceId\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Tỉnh/TP *</FormLabel>\r\n                  <FormControl>\r\n                    <Combobox\r\n                      value={field.value ? { value: field.value, label: form.getValues('province') || '' } : null}\r\n                      onChange={(option) => {\r\n                        const province = provinces.find(p => p.id === option?.value);\r\n                        field.onChange(option?.value);\r\n                        form.setValue('province', province?.name);\r\n                        // Reset district and ward when province changes\r\n                        form.setValue('districtId', undefined);\r\n                        form.setValue('district', undefined);\r\n                        form.setValue('wardCode', undefined);\r\n                        form.setValue('ward', undefined);\r\n                      }}\r\n                      onSearch={(query) => {\r\n                        if (!query) {\r\n                          return Promise.resolve({\r\n                            items: provinces.map(p => ({ value: p.id, label: p.name })),\r\n                            hasNextPage: false\r\n                          });\r\n                        }\r\n                        const filtered = provinces.filter(p => \r\n                          p.name.toLowerCase().includes(query.toLowerCase()) ||\r\n                          p.id.includes(query)\r\n                        );\r\n                        return Promise.resolve({\r\n                          items: filtered.map(p => ({ value: p.id, label: p.name })),\r\n                          hasNextPage: false\r\n                        });\r\n                      }}\r\n                      placeholder=\"Chọn tỉnh/TP\"\r\n                      searchPlaceholder=\"Tìm tỉnh/TP...\"\r\n                      emptyPlaceholder=\"Không tìm thấy\"\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {/* District (only for 3-level) */}\r\n            {addressLevel === '3-level' ? (\r\n              <BranchFormField\r\n                control={form.control}\r\n                name=\"districtId\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Quận/Huyện *</FormLabel>\r\n                    <FormControl>\r\n                      <Combobox\r\n                        value={field.value ? { value: field.value.toString(), label: form.getValues('district') || '' } : null}\r\n                        onChange={(option) => {\r\n                          const districtId = option?.value ? parseInt(option.value) : undefined;\r\n                          const district = districts.find(d => d.id === districtId);\r\n                          field.onChange(districtId);\r\n                          form.setValue('district', district?.name);\r\n                          // Reset ward when district changes\r\n                          form.setValue('wardCode', undefined);\r\n                          form.setValue('ward', undefined);\r\n                        }}\r\n                        onSearch={(query) => {\r\n                          if (!query) {\r\n                            return Promise.resolve({\r\n                              items: districts.map(d => ({ value: d.id.toString(), label: d.name })),\r\n                              hasNextPage: false\r\n                            });\r\n                          }\r\n                          const filtered = districts.filter(d => \r\n                            d.name.toLowerCase().includes(query.toLowerCase())\r\n                          );\r\n                          return Promise.resolve({\r\n                            items: filtered.map(d => ({ value: d.id.toString(), label: d.name })),\r\n                            hasNextPage: false\r\n                          });\r\n                        }}\r\n                        placeholder={!selectedProvinceId ? \"Chọn tỉnh trước\" : \"Chọn quận/huyện\"}\r\n                        searchPlaceholder=\"Tìm quận/huyện...\"\r\n                        emptyPlaceholder=\"Không tìm thấy\"\r\n                        disabled={!selectedProvinceId}\r\n                      />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            ) : (\r\n              <div className=\"opacity-50\">\r\n                <Label className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">Quận/Huyện</Label>\r\n                <Select disabled>\r\n                  <SelectTrigger className=\"mt-2\">\r\n                    <SelectValue placeholder=\"Chọn tỉnh trước\" />\r\n                  </SelectTrigger>\r\n                </Select>\r\n              </div>\r\n            )}\r\n\r\n            {/* Ward */}\r\n            <BranchFormField\r\n              control={form.control}\r\n              name=\"wardCode\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Phường/Xã *</FormLabel>\r\n                  <FormControl>\r\n                    <Combobox\r\n                      value={field.value ? { value: field.value, label: form.getValues('ward') || '' } : null}\r\n                      onChange={(option) => {\r\n                        const ward = wards.find(w => w.id === option?.value);\r\n                        field.onChange(option?.value);\r\n                        form.setValue('ward', ward?.name);\r\n                      }}\r\n                      onSearch={(query) => {\r\n                        if (!query) {\r\n                          return Promise.resolve({\r\n                            items: wards.map(w => ({ value: w.id, label: w.name })),\r\n                            hasNextPage: false\r\n                          });\r\n                        }\r\n                        const filtered = wards.filter(w => \r\n                          w.name.toLowerCase().includes(query.toLowerCase())\r\n                        );\r\n                        return Promise.resolve({\r\n                          items: filtered.map(w => ({ value: w.id, label: w.name })),\r\n                          hasNextPage: false\r\n                        });\r\n                      }}\r\n                      placeholder={\r\n                        addressLevel === '2-level' \r\n                          ? (!selectedProvinceId ? \"Chọn tỉnh trước\" : \"Chọn phường/xã\")\r\n                          : (!selectedDistrictId ? \"Chọn quận trước\" : \"Chọn phường/xã\")\r\n                      }\r\n                      searchPlaceholder=\"Tìm phường/xã...\"\r\n                      emptyPlaceholder=\"Không tìm thấy\"\r\n                      disabled={\r\n                        addressLevel === '2-level' \r\n                          ? !selectedProvinceId \r\n                          : !selectedDistrictId\r\n                      }\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n\r\n          {/* Street Address */}\r\n          <BranchFormField\r\n            control={form.control}\r\n            name=\"address\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Địa chỉ (Số nhà, tên đường) *</FormLabel>\r\n                <FormControl><Input {...field} value={field.value ?? ''} placeholder=\"VD: 123 Đường ABC, Tòa nhà XYZ\" /></FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n        </div>\r\n\r\n        {/* Section 3: Liên hệ */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold border-b pb-2\">Thông tin liên hệ</h3>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <BranchFormField\r\n              control={form.control}\r\n              name=\"phone\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Số điện thoại *</FormLabel>\r\n                  <FormControl><Input {...field} value={field.value ?? ''} placeholder=\"VD: 0123456789\" /></FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <BranchFormField\r\n              control={form.control}\r\n              name=\"managerId\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Người quản lý</FormLabel>\r\n                  <FormControl>\r\n                    <Combobox\r\n                      value={selectedManager}\r\n                      onChange={(option) => field.onChange(option ? option.value : undefined)}\r\n                      onSearch={searchEmployees}\r\n                      placeholder=\"Chọn quản lý\"\r\n                      searchPlaceholder=\"Tìm nhân viên...\"\r\n                      emptyPlaceholder=\"Không tìm thấy nhân viên.\"\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Section 4: Tùy chọn */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-sm font-semibold border-b pb-2\">Tùy chọn</h3>\r\n          <BranchFormField\r\n            control={form.control}\r\n            name=\"isDefault\"\r\n            render={({ field }) => (\r\n              <FormItem className=\"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4\">\r\n                <FormControl>\r\n                  <Checkbox\r\n                    checked={field.value as boolean}\r\n                    onCheckedChange={field.onChange}\r\n                  />\r\n                </FormControl>\r\n                <div className=\"space-y-1 leading-none\">\r\n                  <FormLabel className=\"cursor-pointer\">\r\n                    Đặt làm chi nhánh mặc định\r\n                  </FormLabel>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Chi nhánh này sẽ được chọn mặc định khi tạo đơn hàng mới\r\n                  </p>\r\n                </div>\r\n              </FormItem>\r\n            )}\r\n          />\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button type=\"button\" variant=\"outline\" onClick={onCancel}>Hủy</Button>\r\n          <Button type=\"submit\">Lưu</Button>\r\n        </DialogFooter>\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}