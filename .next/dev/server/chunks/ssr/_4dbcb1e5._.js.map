{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/use-settings-page-header.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Settings2 } from 'lucide-react';\r\nimport { usePageHeader, type PageHeaderState, type PageHeaderDocLink } from '../../contexts/page-header-context';\r\nimport type { BreadcrumbItem } from '../../lib/breadcrumb-system';\r\n\r\nexport type SettingsPageHeaderOptions = Omit<PageHeaderState, 'title' | 'docLink'> & {\r\n  title: string;\r\n  icon?: React.ReactNode;\r\n  docLink?: string | PageHeaderDocLink;\r\n};\r\n\r\nconst defaultDocLabel = 'Xem hướng dẫn';\r\nconst baseBreadcrumb: BreadcrumbItem[] = [\r\n  { label: 'Trang chủ', href: '/', isCurrent: false },\r\n  { label: 'Cài đặt', href: '/settings', isCurrent: false },\r\n];\r\n\r\nconst normalizeLabel = (label?: string) => label?.trim().toLocaleLowerCase('vi');\r\nconst isHomeCrumb = (item: BreadcrumbItem) => item.href === '/' || normalizeLabel(item.label) === 'trang chủ';\r\nconst isSettingsCrumb = (item: BreadcrumbItem) => item.href === '/settings' || normalizeLabel(item.label) === 'cài đặt';\r\n\r\nexport function useSettingsPageHeader(options: SettingsPageHeaderOptions) {\r\n  const pathname = usePathname();\r\n  const { title, icon, docLink, breadcrumb, ...rest } = options;\r\n\r\n  const normalizedDocLink = React.useMemo<PageHeaderDocLink | undefined>(() => {\r\n    if (!docLink) return undefined;\r\n    if (typeof docLink === 'string') {\r\n      return { href: docLink, label: defaultDocLabel };\r\n    }\r\n    return {\r\n      href: docLink.href,\r\n      label: docLink.label ?? defaultDocLabel,\r\n    };\r\n  }, [docLink]);\r\n\r\n  const decoratedTitle = React.useMemo(() => (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      {(icon ?? <Settings2 className=\"h-5 w-5 text-muted-foreground\" aria-hidden=\"true\" />)}\r\n      <span>{title}</span>\r\n    </span>\r\n  ), [icon, title]);\r\n\r\n  const normalizedBreadcrumb = React.useMemo(() => {\r\n    const custom = (breadcrumb ?? []).map((item) => ({\r\n      ...item,\r\n      href: item.href || pathname,\r\n    }));\r\n\r\n    let merged: BreadcrumbItem[] = custom.length\r\n      ? [...custom]\r\n      : [{ label: title, href: pathname, isCurrent: true }];\r\n\r\n    if (!merged.some(isHomeCrumb)) {\r\n      merged = [{ ...baseBreadcrumb[0] }, ...merged];\r\n    }\r\n\r\n    if (!merged.some(isSettingsCrumb)) {\r\n      const homeIndex = merged.findIndex(isHomeCrumb);\r\n      const insertionIndex = homeIndex >= 0 ? homeIndex + 1 : 0;\r\n      merged = [\r\n        ...merged.slice(0, insertionIndex),\r\n        { ...baseBreadcrumb[1] },\r\n        ...merged.slice(insertionIndex),\r\n      ];\r\n    }\r\n\r\n    return merged.map((item, index) => ({\r\n      ...item,\r\n      isCurrent: index === merged.length - 1,\r\n    }));\r\n  }, [breadcrumb, pathname, title]);\r\n\r\n  return usePageHeader({\r\n    ...rest,\r\n    breadcrumb: normalizedBreadcrumb,\r\n    title: decoratedTitle,\r\n    docLink: normalizedDocLink,\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AASA,MAAM,kBAAkB;AACxB,MAAM,iBAAmC;IACvC;QAAE,OAAO;QAAa,MAAM;QAAK,WAAW;IAAM;IAClD;QAAE,OAAO;QAAW,MAAM;QAAa,WAAW;IAAM;CACzD;AAED,MAAM,iBAAiB,CAAC,QAAmB,OAAO,OAAO,kBAAkB;AAC3E,MAAM,cAAc,CAAC,OAAyB,KAAK,IAAI,KAAK,OAAO,eAAe,KAAK,KAAK,MAAM;AAClG,MAAM,kBAAkB,CAAC,OAAyB,KAAK,IAAI,KAAK,eAAe,eAAe,KAAK,KAAK,MAAM;AAEvG,SAAS,sBAAsB,OAAkC;IACtE,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;IAEtD,MAAM,oBAAoB,gNAAa,CAAgC;QACrE,IAAI,CAAC,SAAS,OAAO;QACrB,IAAI,OAAO,YAAY,UAAU;YAC/B,OAAO;gBAAE,MAAM;gBAAS,OAAO;YAAgB;QACjD;QACA,OAAO;YACL,MAAM,QAAQ,IAAI;YAClB,OAAO,QAAQ,KAAK,IAAI;QAC1B;IACF,GAAG;QAAC;KAAQ;IAEZ,MAAM,iBAAiB,gNAAa,CAAC,kBACnC,8OAAC;YAAK,WAAU;;gBACZ,sBAAQ,8OAAC,6NAAS;oBAAC,WAAU;oBAAgC,eAAY;;;;;;8BAC3E,8OAAC;8BAAM;;;;;;;;;;;kBAER;QAAC;QAAM;KAAM;IAEhB,MAAM,uBAAuB,gNAAa,CAAC;QACzC,MAAM,SAAS,CAAC,cAAc,EAAE,EAAE,GAAG,CAAC,CAAC,OAAS,CAAC;gBAC/C,GAAG,IAAI;gBACP,MAAM,KAAK,IAAI,IAAI;YACrB,CAAC;QAED,IAAI,SAA2B,OAAO,MAAM,GACxC;eAAI;SAAO,GACX;YAAC;gBAAE,OAAO;gBAAO,MAAM;gBAAU,WAAW;YAAK;SAAE;QAEvD,IAAI,CAAC,OAAO,IAAI,CAAC,cAAc;YAC7B,SAAS;gBAAC;oBAAE,GAAG,cAAc,CAAC,EAAE;gBAAC;mBAAM;aAAO;QAChD;QAEA,IAAI,CAAC,OAAO,IAAI,CAAC,kBAAkB;YACjC,MAAM,YAAY,OAAO,SAAS,CAAC;YACnC,MAAM,iBAAiB,aAAa,IAAI,YAAY,IAAI;YACxD,SAAS;mBACJ,OAAO,KAAK,CAAC,GAAG;gBACnB;oBAAE,GAAG,cAAc,CAAC,EAAE;gBAAC;mBACpB,OAAO,KAAK,CAAC;aACjB;QACH;QAEA,OAAO,OAAO,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;gBAClC,GAAG,IAAI;gBACP,WAAW,UAAU,OAAO,MAAM,GAAG;YACvC,CAAC;IACH,GAAG;QAAC;QAAY;QAAU;KAAM;IAEhC,OAAO,IAAA,uJAAa,EAAC;QACnB,GAAG,IAAI;QACP,YAAY;QACZ,OAAO;QACP,SAAS;IACX;AACF"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype BaseCheckboxProps = React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n\r\ntype CheckboxProps = Omit<BaseCheckboxProps, \"checked\" | \"defaultChecked\"> & {\r\n  checked?: CheckboxPrimitive.CheckedState | undefined\r\n  defaultChecked?: CheckboxPrimitive.CheckedState | undefined\r\n}\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  CheckboxProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AASA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kTACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;kBAE3D,cAAA,8OAAC,iLAA2B;YAC1B,WAAW,IAAA,kHAAE,EAAC;sBAEd,cAAA,8OAAC,6MAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\n// Use the original Dialog component\r\nconst Dialog = DialogPrimitive.Root\r\n\r\n// Create a Context to pass ID through the Dialog component tree\r\nconst DialogContext = React.createContext<string>(\"\");\r\n\r\n// Provider component that accepts an ID\r\nconst DialogProvider = ({ id, children }: { id: string; children: React.ReactNode }) => {\r\n  return <DialogContext.Provider value={id}>{children}</DialogContext.Provider>;\r\n};\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> & { \r\n    id?: string;\r\n    open?: boolean;\r\n  }\r\n>(({ className, children, id: propId, open, ...props }, ref) => {\r\n  // Use either the prop id or the id from context\r\n  const contextId = React.useContext(DialogContext);\r\n  const id = propId || contextId || `dialog-${React.useId()}`;\r\n  \r\n  // Register with our modal context using the open prop\r\n  const { zIndex } = useModal(id, !!open, 'dialog');\r\n  \r\n  return (\r\n    <DialogPortal>\r\n      {/* Sử dụng overlay chỉ dành cho Dialog */}\r\n      <DialogOverlay style={{ zIndex: zIndex - 1 }} />\r\n      <DialogPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"dialog-content fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        {...props}\r\n      >\r\n        <DialogProvider id={id}>\r\n          {children}\r\n          <DialogPrimitive.Close\r\n            aria-label=\"Đóng\"\r\n            className=\"absolute right-4 top-4 flex h-9 w-9 items-center justify-center rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n            <span className=\"sr-only\">Đóng</span>\r\n          </DialogPrimitive.Close>\r\n        </DialogProvider>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n})\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n  DialogProvider,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;;;;;;;AAEA,oCAAoC;AACpC,MAAM,SAAS,0KAAoB;AAEnC,gEAAgE;AAChE,MAAM,8BAAgB,sNAAmB,CAAS;AAElD,wCAAwC;AACxC,MAAM,iBAAiB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAA6C;IACjF,qBAAO,8OAAC,cAAc,QAAQ;QAAC,OAAO;kBAAK;;;;;;AAC7C;AAEA,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAMpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IACtD,gDAAgD;IAChD,MAAM,YAAY,mNAAgB,CAAC;IACnC,MAAM,KAAK,UAAU,aAAa,CAAC,OAAO,EAAE,8MAAW,IAAI;IAE3D,sDAAsD;IACtD,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,yIAAQ,EAAC,IAAI,CAAC,CAAC,MAAM;IAExC,qBACE,8OAAC;;0BAEC,8OAAC;gBAAc,OAAO;oBAAE,QAAQ,SAAS;gBAAE;;;;;;0BAC3C,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,oKACA;gBAEF,OAAO;oBAAE;gBAAO;gBACf,GAAG,KAAK;0BAET,cAAA,8OAAC;oBAAe,IAAI;;wBACjB;sCACD,8OAAC,2KAAqB;4BACpB,cAAW;4BACX,WAAU;;8CAEV,8OAAC,iMAAC;oCAAC,WAAU;;;;;;8CACb,8OAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AACA,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0 sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,kHAAE,EACX,wIACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,2PACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 610, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,mNAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,6KAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,kHAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,6KAAuB,CAAC,WAAW"}},
    {"offset": {"line": 640, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { useModal } from \"../../contexts/modal-context\"\r\n\r\ntype BaseSelectProps = React.ComponentPropsWithoutRef<typeof SelectPrimitive.Root>\r\n\r\ntype SelectProps = Omit<BaseSelectProps, \"value\" | \"defaultValue\"> & {\r\n  value?: string | undefined\r\n  defaultValue?: string | undefined\r\n}\r\n\r\nconst Select = ({ value, defaultValue, ...props }: SelectProps) => {\r\n  const controlledProps: Partial<BaseSelectProps> = {}\r\n\r\n  if (value !== undefined) {\r\n    controlledProps.value = value\r\n  }\r\n\r\n  if (defaultValue !== undefined) {\r\n    controlledProps.defaultValue = defaultValue\r\n  }\r\n\r\n  return <SelectPrimitive.Root {...props} {...controlledProps} />\r\n}\r\nSelect.displayName = SelectPrimitive.Root.displayName\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => {\r\n  const modalId = React.useId();\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const { zIndex } = useModal(modalId, isOpen, 'select');\r\n\r\n  React.useEffect(() => {\r\n    const content = ref && 'current' in ref ? ref.current : null;\r\n    if (!content) return;\r\n\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'data-state') {\r\n          const target = mutation.target as HTMLElement;\r\n          const state = target.getAttribute('data-state');\r\n          setIsOpen(state === 'open');\r\n        }\r\n      });\r\n    });\r\n\r\n    observer.observe(content, { attributes: true, attributeFilter: ['data-state'] });\r\n\r\n    return () => observer.disconnect();\r\n  }, [ref]);\r\n\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        style={{ zIndex }}\r\n        position={position}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  );\r\n})\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 888, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"group border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-9 px-4 text-left align-middle font-medium text-foreground [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center whitespace-nowrap\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-4 py-1 align-middle whitespace-nowrap [&:has([role=checkbox])]:px-3 [&:has([role=checkbox])]:w-12 [&:has([role=checkbox])]:text-center\", \r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,kLACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6IACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 997, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium text-muted-foreground ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,uEACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6ZACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 1051, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/settings/SettingsVerticalTabs.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Tabs, TabsList, TabsTrigger } from \"../ui/tabs\";\r\nimport { cn } from \"../../lib/utils\";\r\n\r\ntype SettingsVerticalTabsItem = {\r\n  value: string;\r\n  label: React.ReactNode;\r\n  disabled?: boolean;\r\n  className?: string;\r\n};\r\n\r\ntype SettingsVerticalTabsProps = {\r\n  value: string;\r\n  onValueChange: (value: string) => void;\r\n  tabs: SettingsVerticalTabsItem[];\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  listClassName?: string;\r\n  contentWrapperClassName?: string;\r\n};\r\n\r\n/**\r\n * Shared layout for Settings pages that need sticky vertical tabs.\r\n * Uses shadcn/ui Tabs component with custom styling for vertical layout on desktop.\r\n */\r\nexport function SettingsVerticalTabs({\r\n  value,\r\n  onValueChange,\r\n  tabs,\r\n  children,\r\n  className,\r\n  listClassName,\r\n  contentWrapperClassName,\r\n}: SettingsVerticalTabsProps) {\r\n  return (\r\n    <Tabs \r\n      value={value} \r\n      onValueChange={onValueChange} \r\n      className={cn(\"flex flex-col md:flex-row md:gap-8\", className)}\r\n    >\r\n      {/* Mobile: horizontal scrollable tabs, Desktop: vertical sidebar */}\r\n      <TabsList\r\n        className={cn(\r\n          // Base styles\r\n          \"h-auto w-full justify-start rounded-lg bg-muted p-1\",\r\n          // Mobile: horizontal with scroll\r\n          \"flex flex-row gap-1 overflow-x-auto\",\r\n          // Desktop: vertical sidebar\r\n          \"md:flex-col md:w-[200px] md:shrink-0 md:bg-transparent md:p-0\",\r\n          \"md:sticky md:top-6 md:self-start\",\r\n          listClassName,\r\n        )}\r\n      >\r\n        {tabs.map((tab) => (\r\n          <TabsTrigger\r\n            key={tab.value}\r\n            value={tab.value}\r\n            disabled={tab.disabled}\r\n            className={cn(\r\n              // Mobile: compact horizontal tabs\r\n              \"flex-shrink-0 px-3 py-1.5 text-sm text-foreground\",\r\n              // Desktop: full-width vertical tabs\r\n              \"md:w-full md:justify-start md:px-4 md:py-2\",\r\n              \"md:data-[state=active]:bg-muted md:data-[state=active]:shadow-none\",\r\n              tab.className\r\n            )}\r\n          >\r\n            {tab.label}\r\n          </TabsTrigger>\r\n        ))}\r\n      </TabsList>\r\n      \r\n      {/* Content area */}\r\n      <div className={cn(\r\n        \"flex-1 min-w-0 mt-4 md:mt-0\",\r\n        contentWrapperClassName\r\n      )}>\r\n        {children}\r\n      </div>\r\n    </Tabs>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAuBO,SAAS,qBAAqB,EACnC,KAAK,EACL,aAAa,EACb,IAAI,EACJ,QAAQ,EACR,SAAS,EACT,aAAa,EACb,uBAAuB,EACG;IAC1B,qBACE,8OAAC,iIAAI;QACH,OAAO;QACP,eAAe;QACf,WAAW,IAAA,kHAAE,EAAC,sCAAsC;;0BAGpD,8OAAC,qIAAQ;gBACP,WAAW,IAAA,kHAAE,EACX,cAAc;gBACd,uDACA,iCAAiC;gBACjC,uCACA,4BAA4B;gBAC5B,iEACA,oCACA;0BAGD,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC,wIAAW;wBAEV,OAAO,IAAI,KAAK;wBAChB,UAAU,IAAI,QAAQ;wBACtB,WAAW,IAAA,kHAAE,EACX,kCAAkC;wBAClC,qDACA,oCAAoC;wBACpC,8CACA,sEACA,IAAI,SAAS;kCAGd,IAAI,KAAK;uBAZL,IAAI,KAAK;;;;;;;;;;0BAkBpB,8OAAC;gBAAI,WAAW,IAAA,kHAAE,EAChB,+BACA;0BAEC;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 1108, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/settings/SettingsActionButton.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { Button, type ButtonProps } from '../ui/button';\r\nimport { cn } from '../../lib/utils';\r\n\r\n/**\r\n * SettingsActionButton chuẩn hóa các nút hành động của module Cài đặt\r\n * để luôn tuân thủ chiều cao h-9 và padding đồng nhất.\r\n */\r\nexport const SettingsActionButton = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, size, children, ...props }, ref) => {\r\n    return (\r\n      <Button\r\n        ref={ref}\r\n        size={size ?? 'sm'}\r\n        className={cn('h-9 px-4 font-medium gap-2', className)}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </Button>\r\n    );\r\n  }\r\n);\r\n\r\nSettingsActionButton.displayName = 'SettingsActionButton';\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAMO,MAAM,qCAAuB,mNAAgB,CAClD,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;IACxC,qBACE,8OAAC,qIAAM;QACL,KAAK;QACL,MAAM,QAAQ;QACd,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;kBAER;;;;;;AAGP;AAGF,qBAAqB,WAAW,GAAG"}},
    {"offset": {"line": 1138, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/employees/permissions.ts"],"sourcesContent":["import type { EmployeeRole } from './roles';\r\n\r\n/**\r\n * Permission types for role-based access control\r\n */\r\nexport type Permission =\r\n  // Employee Management\r\n  | 'view_employees'\r\n  | 'create_employees'\r\n  | 'edit_employees'\r\n  | 'delete_employees'\r\n  \r\n  // Customer Management\r\n  | 'view_customers'\r\n  | 'create_customers'\r\n  | 'edit_customers'\r\n  | 'delete_customers'\r\n  \r\n  // Product Management\r\n  | 'view_products'\r\n  | 'create_products'\r\n  | 'edit_products'\r\n  | 'delete_products'\r\n  \r\n  // Order Management\r\n  | 'view_orders'\r\n  | 'create_orders'\r\n  | 'edit_orders'\r\n  | 'delete_orders'\r\n  | 'approve_orders'\r\n  \r\n  // Inventory Management\r\n  | 'view_inventory'\r\n  | 'create_inventory'\r\n  | 'edit_inventory'\r\n  | 'delete_inventory'\r\n  | 'approve_inventory'\r\n  \r\n  // Financial\r\n  | 'view_vouchers'\r\n  | 'create_vouchers'\r\n  | 'edit_vouchers'\r\n  | 'delete_vouchers'\r\n  | 'approve_vouchers'\r\n  \r\n  // Reports\r\n  | 'view_reports'\r\n  | 'export_reports'\r\n  \r\n  // Settings\r\n  | 'view_settings'\r\n  | 'edit_settings'\r\n  | 'manage_roles'\r\n  | 'manage_permissions'\r\n\r\n  // Suppliers\r\n  | 'view_suppliers'\r\n  | 'create_suppliers'\r\n  | 'edit_suppliers'\r\n  | 'delete_suppliers'\r\n\r\n  // Purchase Orders\r\n  | 'view_purchase_orders'\r\n  | 'create_purchase_orders'\r\n  | 'edit_purchase_orders'\r\n  | 'delete_purchase_orders'\r\n  | 'approve_purchase_orders'\r\n\r\n  // Attendance\r\n  | 'view_attendance'\r\n  | 'edit_attendance'\r\n  | 'approve_attendance'\r\n\r\n  // Leaves\r\n  | 'view_leaves'\r\n  | 'create_leaves'\r\n  | 'approve_leaves'\r\n\r\n  // Payroll\r\n  | 'view_payroll'\r\n  | 'create_payroll'\r\n  | 'approve_payroll'\r\n\r\n  // Warranty\r\n  | 'view_warranty'\r\n  | 'create_warranty'\r\n  | 'edit_warranty'\r\n  | 'delete_warranty'\r\n\r\n  // Complaints\r\n  | 'view_complaints'\r\n  | 'create_complaints'\r\n  | 'edit_complaints'\r\n  | 'resolve_complaints'\r\n\r\n  // Tasks\r\n  | 'view_tasks'\r\n  | 'create_tasks'\r\n  | 'edit_tasks'\r\n  | 'delete_tasks'\r\n\r\n  // Wiki\r\n  | 'view_wiki'\r\n  | 'create_wiki'\r\n  | 'edit_wiki'\r\n  | 'delete_wiki'\r\n\r\n  // Shipments (Giao hàng)\r\n  | 'view_shipments'\r\n  | 'create_shipments'\r\n  | 'edit_shipments'\r\n  | 'delete_shipments'\r\n\r\n  // Sales Returns (Trả hàng bán)\r\n  | 'view_sales_returns'\r\n  | 'create_sales_returns'\r\n  | 'edit_sales_returns'\r\n  | 'delete_sales_returns'\r\n  | 'approve_sales_returns'\r\n\r\n  // Purchase Returns (Trả hàng mua)\r\n  | 'view_purchase_returns'\r\n  | 'create_purchase_returns'\r\n  | 'edit_purchase_returns'\r\n  | 'delete_purchase_returns'\r\n  | 'approve_purchase_returns'\r\n\r\n  // Inventory Checks (Kiểm kho)\r\n  | 'view_inventory_checks'\r\n  | 'create_inventory_checks'\r\n  | 'edit_inventory_checks'\r\n  | 'delete_inventory_checks'\r\n  | 'approve_inventory_checks'\r\n\r\n  // Stock Transfers (Chuyển kho)\r\n  | 'view_stock_transfers'\r\n  | 'create_stock_transfers'\r\n  | 'edit_stock_transfers'\r\n  | 'delete_stock_transfers'\r\n  | 'approve_stock_transfers'\r\n\r\n  // Stock Locations (Vị trí kho)\r\n  | 'view_stock_locations'\r\n  | 'create_stock_locations'\r\n  | 'edit_stock_locations'\r\n  | 'delete_stock_locations'\r\n\r\n  // Cost Adjustments (Điều chỉnh giá vốn)\r\n  | 'view_cost_adjustments'\r\n  | 'create_cost_adjustments'\r\n  | 'approve_cost_adjustments'\r\n\r\n  // Reconciliation (Đối soát)\r\n  | 'view_reconciliation'\r\n  | 'create_reconciliation'\r\n  | 'approve_reconciliation'\r\n\r\n  // Packaging (Đóng gói)\r\n  | 'view_packaging'\r\n  | 'create_packaging'\r\n  | 'edit_packaging'\r\n\r\n  // Dashboard\r\n  | 'view_dashboard'\r\n  | 'view_dashboard_sales'\r\n  | 'view_dashboard_inventory'\r\n  | 'view_dashboard_hr'\r\n  | 'view_dashboard_finance'\r\n\r\n  // Audit Log\r\n  | 'view_audit_log'\r\n  | 'export_audit_log'\r\n\r\n  // Branches (Chi nhánh)\r\n  | 'view_branches'\r\n  | 'create_branches'\r\n  | 'edit_branches'\r\n  | 'delete_branches'\r\n\r\n  // Departments (Phòng ban)\r\n  | 'view_departments'\r\n  | 'create_departments'\r\n  | 'edit_departments'\r\n  | 'delete_departments';\r\n\r\n/**\r\n * Permission groups for UI organization\r\n */\r\nexport const PERMISSION_GROUPS = {\r\n  employees: {\r\n    label: 'Nhân viên',\r\n    permissions: [\r\n      'view_employees',\r\n      'create_employees',\r\n      'edit_employees',\r\n      'delete_employees',\r\n    ] as Permission[],\r\n  },\r\n  attendance: {\r\n    label: 'Chấm công & Phép',\r\n    permissions: [\r\n      'view_attendance',\r\n      'edit_attendance',\r\n      'approve_attendance',\r\n      'view_leaves',\r\n      'create_leaves',\r\n      'approve_leaves',\r\n    ] as Permission[],\r\n  },\r\n  payroll: {\r\n    label: 'Lương thưởng',\r\n    permissions: [\r\n      'view_payroll',\r\n      'create_payroll',\r\n      'approve_payroll',\r\n    ] as Permission[],\r\n  },\r\n  customers: {\r\n    label: 'Khách hàng',\r\n    permissions: [\r\n      'view_customers',\r\n      'create_customers',\r\n      'edit_customers',\r\n      'delete_customers',\r\n    ] as Permission[],\r\n  },\r\n  complaints: {\r\n    label: 'Khiếu nại',\r\n    permissions: [\r\n      'view_complaints',\r\n      'create_complaints',\r\n      'edit_complaints',\r\n      'resolve_complaints',\r\n    ] as Permission[],\r\n  },\r\n  suppliers: {\r\n    label: 'Nhà cung cấp',\r\n    permissions: [\r\n      'view_suppliers',\r\n      'create_suppliers',\r\n      'edit_suppliers',\r\n      'delete_suppliers',\r\n    ] as Permission[],\r\n  },\r\n  products: {\r\n    label: 'Sản phẩm',\r\n    permissions: [\r\n      'view_products',\r\n      'create_products',\r\n      'edit_products',\r\n      'delete_products',\r\n    ] as Permission[],\r\n  },\r\n  orders: {\r\n    label: 'Đơn hàng',\r\n    permissions: [\r\n      'view_orders',\r\n      'create_orders',\r\n      'edit_orders',\r\n      'delete_orders',\r\n      'approve_orders',\r\n    ] as Permission[],\r\n  },\r\n  purchase_orders: {\r\n    label: 'Đơn mua hàng',\r\n    permissions: [\r\n      'view_purchase_orders',\r\n      'create_purchase_orders',\r\n      'edit_purchase_orders',\r\n      'delete_purchase_orders',\r\n      'approve_purchase_orders',\r\n    ] as Permission[],\r\n  },\r\n  inventory: {\r\n    label: 'Kho hàng',\r\n    permissions: [\r\n      'view_inventory',\r\n      'create_inventory',\r\n      'edit_inventory',\r\n      'delete_inventory',\r\n      'approve_inventory',\r\n    ] as Permission[],\r\n  },\r\n  warranty: {\r\n    label: 'Bảo hành',\r\n    permissions: [\r\n      'view_warranty',\r\n      'create_warranty',\r\n      'edit_warranty',\r\n      'delete_warranty',\r\n    ] as Permission[],\r\n  },\r\n  financial: {\r\n    label: 'Tài chính',\r\n    permissions: [\r\n      'view_vouchers',\r\n      'create_vouchers',\r\n      'edit_vouchers',\r\n      'delete_vouchers',\r\n      'approve_vouchers',\r\n    ] as Permission[],\r\n  },\r\n  tasks: {\r\n    label: 'Công việc',\r\n    permissions: [\r\n      'view_tasks',\r\n      'create_tasks',\r\n      'edit_tasks',\r\n      'delete_tasks',\r\n    ] as Permission[],\r\n  },\r\n  wiki: {\r\n    label: 'Tài liệu (Wiki)',\r\n    permissions: [\r\n      'view_wiki',\r\n      'create_wiki',\r\n      'edit_wiki',\r\n      'delete_wiki',\r\n    ] as Permission[],\r\n  },\r\n  reports: {\r\n    label: 'Báo cáo',\r\n    permissions: [\r\n      'view_reports',\r\n      'export_reports',\r\n    ] as Permission[],\r\n  },\r\n  settings: {\r\n    label: 'Cài đặt',\r\n    permissions: [\r\n      'view_settings',\r\n      'edit_settings',\r\n      'manage_roles',\r\n      'manage_permissions',\r\n    ] as Permission[],\r\n  },\r\n  shipments: {\r\n    label: 'Giao hàng',\r\n    permissions: [\r\n      'view_shipments',\r\n      'create_shipments',\r\n      'edit_shipments',\r\n      'delete_shipments',\r\n    ] as Permission[],\r\n  },\r\n  sales_returns: {\r\n    label: 'Trả hàng bán',\r\n    permissions: [\r\n      'view_sales_returns',\r\n      'create_sales_returns',\r\n      'edit_sales_returns',\r\n      'delete_sales_returns',\r\n      'approve_sales_returns',\r\n    ] as Permission[],\r\n  },\r\n  purchase_returns: {\r\n    label: 'Trả hàng mua',\r\n    permissions: [\r\n      'view_purchase_returns',\r\n      'create_purchase_returns',\r\n      'edit_purchase_returns',\r\n      'delete_purchase_returns',\r\n      'approve_purchase_returns',\r\n    ] as Permission[],\r\n  },\r\n  inventory_checks: {\r\n    label: 'Kiểm kho',\r\n    permissions: [\r\n      'view_inventory_checks',\r\n      'create_inventory_checks',\r\n      'edit_inventory_checks',\r\n      'delete_inventory_checks',\r\n      'approve_inventory_checks',\r\n    ] as Permission[],\r\n  },\r\n  stock_transfers: {\r\n    label: 'Chuyển kho',\r\n    permissions: [\r\n      'view_stock_transfers',\r\n      'create_stock_transfers',\r\n      'edit_stock_transfers',\r\n      'delete_stock_transfers',\r\n      'approve_stock_transfers',\r\n    ] as Permission[],\r\n  },\r\n  stock_locations: {\r\n    label: 'Vị trí kho',\r\n    permissions: [\r\n      'view_stock_locations',\r\n      'create_stock_locations',\r\n      'edit_stock_locations',\r\n      'delete_stock_locations',\r\n    ] as Permission[],\r\n  },\r\n  cost_adjustments: {\r\n    label: 'Điều chỉnh giá vốn',\r\n    permissions: [\r\n      'view_cost_adjustments',\r\n      'create_cost_adjustments',\r\n      'approve_cost_adjustments',\r\n    ] as Permission[],\r\n  },\r\n  reconciliation: {\r\n    label: 'Đối soát',\r\n    permissions: [\r\n      'view_reconciliation',\r\n      'create_reconciliation',\r\n      'approve_reconciliation',\r\n    ] as Permission[],\r\n  },\r\n  packaging: {\r\n    label: 'Đóng gói',\r\n    permissions: [\r\n      'view_packaging',\r\n      'create_packaging',\r\n      'edit_packaging',\r\n    ] as Permission[],\r\n  },\r\n  dashboard: {\r\n    label: 'Dashboard',\r\n    permissions: [\r\n      'view_dashboard',\r\n      'view_dashboard_sales',\r\n      'view_dashboard_inventory',\r\n      'view_dashboard_hr',\r\n      'view_dashboard_finance',\r\n    ] as Permission[],\r\n  },\r\n  audit_log: {\r\n    label: 'Nhật ký hệ thống',\r\n    permissions: [\r\n      'view_audit_log',\r\n      'export_audit_log',\r\n    ] as Permission[],\r\n  },\r\n  branches: {\r\n    label: 'Chi nhánh',\r\n    permissions: [\r\n      'view_branches',\r\n      'create_branches',\r\n      'edit_branches',\r\n      'delete_branches',\r\n    ] as Permission[],\r\n  },\r\n  departments: {\r\n    label: 'Phòng ban',\r\n    permissions: [\r\n      'view_departments',\r\n      'create_departments',\r\n      'edit_departments',\r\n      'delete_departments',\r\n    ] as Permission[],\r\n  },\r\n} as const;\r\n\r\n/**\r\n * Permission labels for display\r\n */\r\nexport const PERMISSION_LABELS: Record<Permission, string> = {\r\n  // Employees\r\n  view_employees: 'Xem nhân viên',\r\n  create_employees: 'Thêm nhân viên',\r\n  edit_employees: 'Sửa nhân viên',\r\n  delete_employees: 'Xóa nhân viên',\r\n  \r\n  // Attendance\r\n  view_attendance: 'Xem chấm công',\r\n  edit_attendance: 'Sửa chấm công',\r\n  approve_attendance: 'Duyệt chấm công',\r\n  \r\n  // Leaves\r\n  view_leaves: 'Xem nghỉ phép',\r\n  create_leaves: 'Tạo đơn phép',\r\n  approve_leaves: 'Duyệt đơn phép',\r\n  \r\n  // Payroll\r\n  view_payroll: 'Xem bảng lương',\r\n  create_payroll: 'Tạo bảng lương',\r\n  approve_payroll: 'Duyệt bảng lương',\r\n\r\n  // Customers\r\n  view_customers: 'Xem khách hàng',\r\n  create_customers: 'Thêm khách hàng',\r\n  edit_customers: 'Sửa khách hàng',\r\n  delete_customers: 'Xóa khách hàng',\r\n  \r\n  // Complaints\r\n  view_complaints: 'Xem khiếu nại',\r\n  create_complaints: 'Tạo khiếu nại',\r\n  edit_complaints: 'Sửa khiếu nại',\r\n  resolve_complaints: 'Xử lý khiếu nại',\r\n\r\n  // Suppliers\r\n  view_suppliers: 'Xem nhà cung cấp',\r\n  create_suppliers: 'Thêm nhà cung cấp',\r\n  edit_suppliers: 'Sửa nhà cung cấp',\r\n  delete_suppliers: 'Xóa nhà cung cấp',\r\n\r\n  // Products\r\n  view_products: 'Xem sản phẩm',\r\n  create_products: 'Thêm sản phẩm',\r\n  edit_products: 'Sửa sản phẩm',\r\n  delete_products: 'Xóa sản phẩm',\r\n  \r\n  // Orders\r\n  view_orders: 'Xem đơn hàng',\r\n  create_orders: 'Tạo đơn hàng',\r\n  edit_orders: 'Sửa đơn hàng',\r\n  delete_orders: 'Xóa đơn hàng',\r\n  approve_orders: 'Duyệt đơn hàng',\r\n  \r\n  // Purchase Orders\r\n  view_purchase_orders: 'Xem đơn mua',\r\n  create_purchase_orders: 'Tạo đơn mua',\r\n  edit_purchase_orders: 'Sửa đơn mua',\r\n  delete_purchase_orders: 'Xóa đơn mua',\r\n  approve_purchase_orders: 'Duyệt đơn mua',\r\n\r\n  // Inventory\r\n  view_inventory: 'Xem kho',\r\n  create_inventory: 'Nhập/xuất kho',\r\n  edit_inventory: 'Sửa phiếu kho',\r\n  delete_inventory: 'Xóa phiếu kho',\r\n  approve_inventory: 'Duyệt phiếu kho',\r\n  \r\n  // Warranty\r\n  view_warranty: 'Xem bảo hành',\r\n  create_warranty: 'Tạo phiếu bảo hành',\r\n  edit_warranty: 'Sửa phiếu bảo hành',\r\n  delete_warranty: 'Xóa phiếu bảo hành',\r\n\r\n  // Financial\r\n  view_vouchers: 'Xem phiếu thu chi',\r\n  create_vouchers: 'Tạo phiếu thu chi',\r\n  edit_vouchers: 'Sửa phiếu thu chi',\r\n  delete_vouchers: 'Xóa phiếu thu chi',\r\n  approve_vouchers: 'Duyệt phiếu thu chi',\r\n  \r\n  // Tasks\r\n  view_tasks: 'Xem công việc',\r\n  create_tasks: 'Tạo công việc',\r\n  edit_tasks: 'Sửa công việc',\r\n  delete_tasks: 'Xóa công việc',\r\n\r\n  // Wiki\r\n  view_wiki: 'Xem tài liệu',\r\n  create_wiki: 'Tạo tài liệu',\r\n  edit_wiki: 'Sửa tài liệu',\r\n  delete_wiki: 'Xóa tài liệu',\r\n\r\n  // Reports\r\n  view_reports: 'Xem báo cáo',\r\n  export_reports: 'Xuất báo cáo',\r\n  \r\n  // Settings\r\n  view_settings: 'Xem cài đặt',\r\n  edit_settings: 'Sửa cài đặt',\r\n  manage_roles: 'Quản lý vai trò',\r\n  manage_permissions: 'Quản lý phân quyền',\r\n\r\n  // Shipments\r\n  view_shipments: 'Xem phiếu giao hàng',\r\n  create_shipments: 'Tạo phiếu giao hàng',\r\n  edit_shipments: 'Sửa phiếu giao hàng',\r\n  delete_shipments: 'Xóa phiếu giao hàng',\r\n\r\n  // Sales Returns\r\n  view_sales_returns: 'Xem trả hàng bán',\r\n  create_sales_returns: 'Tạo phiếu trả hàng bán',\r\n  edit_sales_returns: 'Sửa phiếu trả hàng bán',\r\n  delete_sales_returns: 'Xóa phiếu trả hàng bán',\r\n  approve_sales_returns: 'Duyệt trả hàng bán',\r\n\r\n  // Purchase Returns\r\n  view_purchase_returns: 'Xem trả hàng mua',\r\n  create_purchase_returns: 'Tạo phiếu trả hàng mua',\r\n  edit_purchase_returns: 'Sửa phiếu trả hàng mua',\r\n  delete_purchase_returns: 'Xóa phiếu trả hàng mua',\r\n  approve_purchase_returns: 'Duyệt trả hàng mua',\r\n\r\n  // Inventory Checks\r\n  view_inventory_checks: 'Xem phiếu kiểm kho',\r\n  create_inventory_checks: 'Tạo phiếu kiểm kho',\r\n  edit_inventory_checks: 'Sửa phiếu kiểm kho',\r\n  delete_inventory_checks: 'Xóa phiếu kiểm kho',\r\n  approve_inventory_checks: 'Duyệt kiểm kho',\r\n\r\n  // Stock Transfers\r\n  view_stock_transfers: 'Xem phiếu chuyển kho',\r\n  create_stock_transfers: 'Tạo phiếu chuyển kho',\r\n  edit_stock_transfers: 'Sửa phiếu chuyển kho',\r\n  delete_stock_transfers: 'Xóa phiếu chuyển kho',\r\n  approve_stock_transfers: 'Duyệt chuyển kho',\r\n\r\n  // Stock Locations\r\n  view_stock_locations: 'Xem vị trí kho',\r\n  create_stock_locations: 'Tạo vị trí kho',\r\n  edit_stock_locations: 'Sửa vị trí kho',\r\n  delete_stock_locations: 'Xóa vị trí kho',\r\n\r\n  // Cost Adjustments\r\n  view_cost_adjustments: 'Xem điều chỉnh giá vốn',\r\n  create_cost_adjustments: 'Tạo điều chỉnh giá vốn',\r\n  approve_cost_adjustments: 'Duyệt điều chỉnh giá vốn',\r\n\r\n  // Reconciliation\r\n  view_reconciliation: 'Xem đối soát',\r\n  create_reconciliation: 'Tạo phiếu đối soát',\r\n  approve_reconciliation: 'Duyệt đối soát',\r\n\r\n  // Packaging\r\n  view_packaging: 'Xem đóng gói',\r\n  create_packaging: 'Tạo phiếu đóng gói',\r\n  edit_packaging: 'Sửa phiếu đóng gói',\r\n\r\n  // Dashboard\r\n  view_dashboard: 'Xem tổng quan',\r\n  view_dashboard_sales: 'Xem báo cáo bán hàng',\r\n  view_dashboard_inventory: 'Xem báo cáo kho',\r\n  view_dashboard_hr: 'Xem báo cáo nhân sự',\r\n  view_dashboard_finance: 'Xem báo cáo tài chính',\r\n\r\n  // Audit Log\r\n  view_audit_log: 'Xem nhật ký hệ thống',\r\n  export_audit_log: 'Xuất nhật ký hệ thống',\r\n\r\n  // Branches\r\n  view_branches: 'Xem chi nhánh',\r\n  create_branches: 'Tạo chi nhánh',\r\n  edit_branches: 'Sửa chi nhánh',\r\n  delete_branches: 'Xóa chi nhánh',\r\n\r\n  // Departments\r\n  view_departments: 'Xem phòng ban',\r\n  create_departments: 'Tạo phòng ban',\r\n  edit_departments: 'Sửa phòng ban',\r\n  delete_departments: 'Xóa phòng ban',\r\n};\r\n\r\n/**\r\n * Default permissions for each role\r\n */\r\nexport const DEFAULT_ROLE_PERMISSIONS: Record<EmployeeRole, Permission[]> = {\r\n  Admin: [\r\n    // Full access to everything\r\n    'view_employees', 'create_employees', 'edit_employees', 'delete_employees',\r\n    'view_attendance', 'edit_attendance', 'approve_attendance',\r\n    'view_leaves', 'create_leaves', 'approve_leaves',\r\n    'view_payroll', 'create_payroll', 'approve_payroll',\r\n    'view_customers', 'create_customers', 'edit_customers', 'delete_customers',\r\n    'view_complaints', 'create_complaints', 'edit_complaints', 'resolve_complaints',\r\n    'view_suppliers', 'create_suppliers', 'edit_suppliers', 'delete_suppliers',\r\n    'view_products', 'create_products', 'edit_products', 'delete_products',\r\n    'view_orders', 'create_orders', 'edit_orders', 'delete_orders', 'approve_orders',\r\n    'view_purchase_orders', 'create_purchase_orders', 'edit_purchase_orders', 'delete_purchase_orders', 'approve_purchase_orders',\r\n    'view_inventory', 'create_inventory', 'edit_inventory', 'delete_inventory', 'approve_inventory',\r\n    'view_warranty', 'create_warranty', 'edit_warranty', 'delete_warranty',\r\n    'view_vouchers', 'create_vouchers', 'edit_vouchers', 'delete_vouchers', 'approve_vouchers',\r\n    'view_tasks', 'create_tasks', 'edit_tasks', 'delete_tasks',\r\n    'view_wiki', 'create_wiki', 'edit_wiki', 'delete_wiki',\r\n    'view_reports', 'export_reports',\r\n    'view_settings', 'edit_settings', 'manage_roles', 'manage_permissions',\r\n    // New permissions\r\n    'view_shipments', 'create_shipments', 'edit_shipments', 'delete_shipments',\r\n    'view_sales_returns', 'create_sales_returns', 'edit_sales_returns', 'delete_sales_returns', 'approve_sales_returns',\r\n    'view_purchase_returns', 'create_purchase_returns', 'edit_purchase_returns', 'delete_purchase_returns', 'approve_purchase_returns',\r\n    'view_inventory_checks', 'create_inventory_checks', 'edit_inventory_checks', 'delete_inventory_checks', 'approve_inventory_checks',\r\n    'view_stock_transfers', 'create_stock_transfers', 'edit_stock_transfers', 'delete_stock_transfers', 'approve_stock_transfers',\r\n    'view_stock_locations', 'create_stock_locations', 'edit_stock_locations', 'delete_stock_locations',\r\n    'view_cost_adjustments', 'create_cost_adjustments', 'approve_cost_adjustments',\r\n    'view_reconciliation', 'create_reconciliation', 'approve_reconciliation',\r\n    'view_packaging', 'create_packaging', 'edit_packaging',\r\n    'view_dashboard', 'view_dashboard_sales', 'view_dashboard_inventory', 'view_dashboard_hr', 'view_dashboard_finance',\r\n    'view_audit_log', 'export_audit_log',\r\n    'view_branches', 'create_branches', 'edit_branches', 'delete_branches',\r\n    'view_departments', 'create_departments', 'edit_departments', 'delete_departments',\r\n  ],\r\n  \r\n  Manager: [\r\n    // Can view and manage most things, approve transactions\r\n    'view_employees', 'edit_employees',\r\n    'view_attendance', 'approve_attendance',\r\n    'view_leaves', 'approve_leaves',\r\n    'view_payroll',\r\n    'view_customers', 'create_customers', 'edit_customers', 'delete_customers',\r\n    'view_complaints', 'resolve_complaints',\r\n    'view_suppliers', 'create_suppliers', 'edit_suppliers',\r\n    'view_products', 'create_products', 'edit_products', 'delete_products',\r\n    'view_orders', 'create_orders', 'edit_orders', 'approve_orders',\r\n    'view_purchase_orders', 'create_purchase_orders', 'edit_purchase_orders', 'approve_purchase_orders',\r\n    'view_inventory', 'create_inventory', 'edit_inventory', 'approve_inventory',\r\n    'view_warranty', 'create_warranty', 'edit_warranty',\r\n    'view_vouchers', 'create_vouchers', 'edit_vouchers', 'approve_vouchers',\r\n    'view_tasks', 'create_tasks', 'edit_tasks', 'delete_tasks',\r\n    'view_wiki', 'create_wiki', 'edit_wiki',\r\n    'view_reports', 'export_reports',\r\n    'view_settings',\r\n    // New permissions for Manager\r\n    'view_shipments', 'create_shipments', 'edit_shipments',\r\n    'view_sales_returns', 'create_sales_returns', 'edit_sales_returns', 'approve_sales_returns',\r\n    'view_purchase_returns', 'create_purchase_returns', 'edit_purchase_returns', 'approve_purchase_returns',\r\n    'view_inventory_checks', 'create_inventory_checks', 'edit_inventory_checks', 'approve_inventory_checks',\r\n    'view_stock_transfers', 'create_stock_transfers', 'edit_stock_transfers', 'approve_stock_transfers',\r\n    'view_stock_locations', 'create_stock_locations', 'edit_stock_locations',\r\n    'view_cost_adjustments', 'create_cost_adjustments', 'approve_cost_adjustments',\r\n    'view_reconciliation', 'create_reconciliation', 'approve_reconciliation',\r\n    'view_packaging', 'create_packaging', 'edit_packaging',\r\n    'view_dashboard', 'view_dashboard_sales', 'view_dashboard_inventory', 'view_dashboard_hr', 'view_dashboard_finance',\r\n    'view_audit_log',\r\n    'view_branches', 'edit_branches',\r\n    'view_departments', 'edit_departments',\r\n  ],\r\n  \r\n  Sales: [\r\n    // Focus on customers and orders\r\n    'view_customers', 'create_customers', 'edit_customers',\r\n    'view_complaints', 'create_complaints',\r\n    'view_products',\r\n    'view_orders', 'create_orders', 'edit_orders',\r\n    'view_warranty', 'create_warranty',\r\n    'view_tasks', 'create_tasks', 'edit_tasks',\r\n    'view_wiki',\r\n    'view_reports',\r\n    // New permissions for Sales\r\n    'view_shipments', 'create_shipments',\r\n    'view_sales_returns', 'create_sales_returns',\r\n    'view_packaging', 'create_packaging',\r\n    'view_dashboard', 'view_dashboard_sales',\r\n  ],\r\n  \r\n  Warehouse: [\r\n    // Focus on inventory and products\r\n    'view_products', 'edit_products',\r\n    'view_orders',\r\n    'view_purchase_orders',\r\n    'view_inventory', 'create_inventory', 'edit_inventory',\r\n    'view_suppliers',\r\n    'view_tasks', 'create_tasks', 'edit_tasks',\r\n    'view_wiki',\r\n    // New permissions for Warehouse\r\n    'view_shipments', 'create_shipments', 'edit_shipments',\r\n    'view_purchase_returns', 'create_purchase_returns',\r\n    'view_inventory_checks', 'create_inventory_checks', 'edit_inventory_checks',\r\n    'view_stock_transfers', 'create_stock_transfers', 'edit_stock_transfers',\r\n    'view_stock_locations',\r\n    'view_packaging', 'create_packaging', 'edit_packaging',\r\n    'view_dashboard', 'view_dashboard_inventory',\r\n  ],\r\n};\r\n\r\n/**\r\n * Check if a role has a specific permission\r\n */\r\nexport function hasPermission(role: EmployeeRole, permission: Permission, customPermissions?: Permission[]): boolean {\r\n  const permissions = customPermissions || DEFAULT_ROLE_PERMISSIONS[role];\r\n  return permissions.includes(permission);\r\n}\r\n\r\n/**\r\n * Get all permissions for a role\r\n */\r\nexport function getRolePermissions(role: EmployeeRole, customPermissions?: Permission[]): Permission[] {\r\n  return customPermissions || DEFAULT_ROLE_PERMISSIONS[role];\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AA4LO,MAAM,oBAAoB;IAC/B,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,YAAY;QACV,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;YACA;SACD;IACH;IACA,SAAS;QACP,OAAO;QACP,aAAa;YACX;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,YAAY;QACV,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,UAAU;QACR,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,QAAQ;QACN,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,iBAAiB;QACf,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,UAAU;QACR,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,OAAO;QACL,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,MAAM;QACJ,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,SAAS;QACP,OAAO;QACP,aAAa;YACX;YACA;SACD;IACH;IACA,UAAU;QACR,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,eAAe;QACb,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,kBAAkB;QAChB,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,kBAAkB;QAChB,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,iBAAiB;QACf,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,iBAAiB;QACf,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,kBAAkB;QAChB,OAAO;QACP,aAAa;YACX;YACA;YACA;SACD;IACH;IACA,gBAAgB;QACd,OAAO;QACP,aAAa;YACX;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;YACA;SACD;IACH;IACA,WAAW;QACT,OAAO;QACP,aAAa;YACX;YACA;SACD;IACH;IACA,UAAU;QACR,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,aAAa;QACX,OAAO;QACP,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;AACF;AAKO,MAAM,oBAAgD;IAC3D,YAAY;IACZ,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAElB,aAAa;IACb,iBAAiB;IACjB,iBAAiB;IACjB,oBAAoB;IAEpB,SAAS;IACT,aAAa;IACb,eAAe;IACf,gBAAgB;IAEhB,UAAU;IACV,cAAc;IACd,gBAAgB;IAChB,iBAAiB;IAEjB,YAAY;IACZ,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAElB,aAAa;IACb,iBAAiB;IACjB,mBAAmB;IACnB,iBAAiB;IACjB,oBAAoB;IAEpB,YAAY;IACZ,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAElB,WAAW;IACX,eAAe;IACf,iBAAiB;IACjB,eAAe;IACf,iBAAiB;IAEjB,SAAS;IACT,aAAa;IACb,eAAe;IACf,aAAa;IACb,eAAe;IACf,gBAAgB;IAEhB,kBAAkB;IAClB,sBAAsB;IACtB,wBAAwB;IACxB,sBAAsB;IACtB,wBAAwB;IACxB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"}},
    {"offset": {"line": 1858, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/employees/role-store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { DEFAULT_ROLE_PERMISSIONS, type Permission } from '../../employees/permissions';\r\n\r\nexport interface CustomRole {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  permissions: Permission[];\r\n  isDefault: boolean;\r\n}\r\n\r\ninterface RoleStore {\r\n  roles: CustomRole[];\r\n  initialized: boolean;\r\n  addRole: (name: string, description: string) => void;\r\n  updateRole: (roleId: string, updates: Partial<CustomRole>) => void;\r\n  deleteRole: (roleId: string) => void;\r\n  resetRole: (roleId: string) => void;\r\n  syncDefaultPermissions: () => void;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\n// API sync helper\r\nasync function syncRoleToAPI(role: CustomRole, action: 'create' | 'update' | 'delete'): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/settings/roles', {\r\n      method: action === 'create' ? 'POST' : action === 'delete' ? 'DELETE' : 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(role),\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('syncRoleToAPI error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Initial default roles\r\nconst getDefaultRoles = (): CustomRole[] => [\r\n  { id: 'Admin', name: 'Quản trị viên', description: 'Toàn quyền hệ thống', permissions: DEFAULT_ROLE_PERMISSIONS.Admin, isDefault: true },\r\n  { id: 'Manager', name: 'Quản lý', description: 'Quản lý phòng ban', permissions: DEFAULT_ROLE_PERMISSIONS.Manager, isDefault: true },\r\n  { id: 'Sales', name: 'Kinh doanh', description: 'Nhân viên kinh doanh', permissions: DEFAULT_ROLE_PERMISSIONS.Sales, isDefault: true },\r\n  { id: 'Warehouse', name: 'Kho', description: 'Nhân viên kho', permissions: DEFAULT_ROLE_PERMISSIONS.Warehouse, isDefault: true },\r\n];\r\n\r\nexport const useRoleStore = create<RoleStore>()(\r\n  (set, get) => ({\r\n    roles: getDefaultRoles(),\r\n    initialized: false,\r\n      addRole: (name, description) => set((state) => ({\r\n        roles: [...state.roles, {\r\n          id: `role_${Date.now()}`,\r\n          name,\r\n          description,\r\n          permissions: [],\r\n          isDefault: false,\r\n        }]\r\n      })),\r\n      updateRole: (roleId, updates) => set((state) => ({\r\n        roles: state.roles.map((role) => \r\n          role.id === roleId ? { ...role, ...updates } : role\r\n        )\r\n      })),\r\n      deleteRole: (roleId) => set((state) => ({\r\n        roles: state.roles.filter((role) => role.id !== roleId)\r\n      })),\r\n      resetRole: (roleId) => set((state) => {\r\n        const role = state.roles.find((r) => r.id === roleId);\r\n        if (!role || !role.isDefault) return state;\r\n\r\n        let defaultPerms: Permission[] = [];\r\n        // Map ID to default permissions (Case sensitive match with initial state)\r\n        if (role.id === 'Admin') defaultPerms = DEFAULT_ROLE_PERMISSIONS.Admin;\r\n        else if (role.id === 'Manager') defaultPerms = DEFAULT_ROLE_PERMISSIONS.Manager;\r\n        else if (role.id === 'Sales') defaultPerms = DEFAULT_ROLE_PERMISSIONS.Sales;\r\n        else if (role.id === 'Warehouse') defaultPerms = DEFAULT_ROLE_PERMISSIONS.Warehouse;\r\n\r\n        return {\r\n          roles: state.roles.map((r) => \r\n            r.id === roleId ? { ...r, permissions: defaultPerms } : r\r\n          )\r\n        };\r\n      }),\r\n      // Sync default roles with latest permissions from code\r\n      syncDefaultPermissions: () => set((state) => {\r\n        const defaultRoles = getDefaultRoles();\r\n        const updatedRoles = state.roles.map((role) => {\r\n          if (role.isDefault) {\r\n            const defaultRole = defaultRoles.find((d) => d.id === role.id);\r\n            if (defaultRole) {\r\n              // Merge new permissions: keep existing + add new ones from default\r\n              const newPerms = defaultRole.permissions.filter(p => !role.permissions.includes(p));\r\n              return {\r\n                ...role,\r\n                permissions: [...role.permissions, ...newPerms],\r\n              };\r\n            }\r\n          }\r\n          return role;\r\n        });\r\n        return { roles: updatedRoles };\r\n      }),\r\n\r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        try {\r\n          const response = await fetch('/api/settings/roles');\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            if (json.data && Array.isArray(json.data)) {\r\n              set({ \r\n                roles: json.data,\r\n                initialized: true,\r\n              });\r\n              // Sync default permissions after loading\r\n              get().syncDefaultPermissions();\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('loadFromAPI error:', error);\r\n        }\r\n        set({ initialized: true });\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2004, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/smart-prefix.ts"],"sourcesContent":["/**\r\n * Smart Prefix System\r\n * Mapping entity types to their unique prefixes\r\n */\r\n\r\nexport const ENTITY_PREFIXES = {\r\n  // ========================================\r\n  // NHÂN SỰ & TỔ CHỨC (HR & ORGANIZATION)\r\n  // ========================================\r\n  'employees': 'NV',           // Nhân viên (Employee)\r\n  'departments': 'PB',         // Phòng ban (Department)\r\n  'branches': 'CN',            // Chi nhánh (Branch)\r\n  'job-titles': 'CV',          // Chức vụ (Job Title)\r\n  \r\n  // ========================================\r\n  // KHÁCH HÀNG & ĐỐI TÁC (CUSTOMERS & PARTNERS)\r\n  // ========================================\r\n  'customers': 'KH',           // Khách hàng (Customer)\r\n  'suppliers': 'NCC',          // Nhà cung cấp (Supplier)\r\n  'shipping-partners': 'DVVC', // Đơn vị vận chuyển (Shipping Partner)\r\n  \r\n  // ========================================\r\n  // SẢN PHẨM & KHO (PRODUCTS & INVENTORY)\r\n  // ========================================\r\n  'products': 'SP',            // Sản phẩm (Product)\r\n  'brands': 'TH',              // Thương hiệu (Brand)\r\n  'categories': 'DM',          // Danh mục (Category)\r\n  'units': 'DVT',              // Đơn vị tính (Unit)\r\n  'stock-locations': 'KHO',    // Kho hàng (Stock Location)\r\n  'inventory-receipts': 'NK',  // Nhập kho (Inventory Receipt)\r\n  'inventory-checks': 'PKK',   // Phiếu kiểm kho (Inventory Check)\r\n  'stock-transfers': 'PCK',    // Phiếu chuyển kho (Stock Transfer)\r\n  'stock-history': 'LS',       // Lịch sử kho (Stock History)\r\n  \r\n  // ========================================\r\n  // BÁN HÀNG (SALES)\r\n  // ========================================\r\n  'orders': 'DH',              // Đơn hàng (Sales Order)\r\n  'sales-returns': 'TH',       // Trả hàng (Sales Return)\r\n  'sales-channels': 'KENH',    // Kênh bán hàng (Sales Channel)\r\n  'shipments': 'VC',           // Vận chuyển (Shipment)\r\n  \r\n  // ========================================\r\n  // MUA HÀNG (PURCHASING)\r\n  // ========================================\r\n  'purchase-orders': 'PO',     // Đơn mua hàng (Purchase Order)\r\n  'purchase-returns': 'TM',    // Trả mua (Purchase Return)\r\n  \r\n  // ========================================\r\n  // TÀI CHÍNH (FINANCE)\r\n  // ========================================\r\n  'receipts': 'PT',            // Phiếu thu (Receipt)\r\n  'payments': 'PC',            // Phiếu chi (Payment)\r\n  'voucher-receipt': 'PT',     // Alias phiếu thu từ workflow voucher\r\n  'voucher-payment': 'PC',     // Alias phiếu chi từ workflow voucher\r\n  'cashbook': 'SCT',           // Sổ quỹ (Cashbook)\r\n  'reconciliation': 'DT',      // Đối tài (Reconciliation)\r\n  \r\n  // Cài đặt tài chính\r\n  'receipt-types': 'LT',       // Loại thu (Receipt Type)\r\n  'payment-types': 'LC',       // Loại chi (Payment Type)\r\n  'cash-accounts': 'TK',       // Tài khoản tiền (Cash Account)\r\n  'payment-methods': 'PTTT',   // Phương thức thanh toán (Payment Method)\r\n  'pricing-settings': 'GIA',   // Chính sách giá (Pricing Policy)\r\n  'taxes': 'TAX',              // Thuế (Tax)\r\n  \r\n  // ========================================\r\n  // LƯƠNG & NHÂN SỰ (PAYROLL & HR)\r\n  // ========================================\r\n  'payroll': 'BL',             // Bảng lương (Payroll)\r\n  'payslips': 'PL',            // Phiếu lương (Payslip)\r\n  'payroll-audit-log': 'PAL',  // Nhật ký payroll\r\n  'payroll-templates': 'BTP',  // Mẫu bảng lương (Payroll Template)\r\n  'penalties': 'PF',           // Phiếu phạt (Penalty)\r\n  'leaves': 'PN',              // Phép nghỉ (Leave)\r\n  'attendance': 'CC',          // Chấm công (Attendance)\r\n  'duty-schedule': 'PC',       // Phân công (Duty Schedule)\r\n  \r\n  // ========================================\r\n  // KPI & MỤC TIÊU (KPI & TARGETS)\r\n  // ========================================\r\n  'kpi': 'KPI',                // KPI\r\n  'target-groups': 'NHOM',     // Nhóm mục tiêu (Target Group)\r\n  'other-targets': 'MT',       // Mục tiêu khác (Other Target)\r\n  \r\n  // ========================================\r\n  // CÔNG VIỆC & DỊCH VỤ (TASKS & SERVICES)\r\n  // ========================================\r\n  'internal-tasks': 'CVNB',    // Công việc nội bộ (Internal Task)\r\n  'task-templates': 'TMPL',    // Mẫu công việc (Task Template)\r\n  'custom-fields': 'FIELD',    // Trường tùy chỉnh (Custom Field)\r\n  'warranty': 'BH',            // Bảo hành (Warranty)\r\n  'complaints': 'PKN',         // Khiếu nại (Complaint)\r\n  \r\n  // ========================================\r\n  // CÀI ĐẶT & DANH MỤC (SETTINGS & CATEGORIES)\r\n  // ========================================\r\n  'provinces': 'TP',           // Tỉnh/Thành phố (Province)\r\n  'districts': 'QH',           // Quận/Huyện (District)\r\n  'wards': 'PX',               // Phường/Xã (Ward)\r\n  'wiki': 'TL',                // Tài liệu (Wiki)\r\n  'packaging': 'DG',           // Đóng gói (Packaging)\r\n  'audit-log': 'LOG',          // Nhật ký (Audit Log)\r\n  \r\n  // ========================================\r\n  // CÀI ĐẶT KHÁCH HÀNG (CUSTOMER SETTINGS)\r\n  // ========================================\r\n  'customer-types': 'LKH',     // Loại khách hàng (Customer Type)\r\n  'customer-groups': 'NHKH',   // Nhóm khách hàng (Customer Group)\r\n  'customer-sources': 'NKH',   // Nguồn khách hàng (Customer Source)\r\n  'payment-terms': 'HTTT',     // Hạn thanh toán (Payment Term)\r\n  'credit-ratings': 'XHTD',    // Xếp hạng tín dụng (Credit Rating)\r\n  'lifecycle-stages': 'GDL',   // Giai đoạn vòng đời khách hàng\r\n  'sla-settings': 'SLA',       // Cài đặt SLA khách hàng\r\n  \r\n  // ========================================\r\n  // CÀI ĐẶT NHÂN VIÊN (EMPLOYEE SETTINGS)\r\n  // ========================================\r\n  'employee-types': 'LNV',     // Loại nhân viên (Employee Type)\r\n  'employee-statuses': 'TTNV', // Trạng thái nhân viên (Employee Status)\r\n  'contract-types': 'LHD',     // Loại hợp đồng (Contract Type)\r\n  'work-shifts': 'CA',         // Ca làm việc (Work Shift)\r\n  'leave-types': 'LP',         // Loại nghỉ phép (Leave Type)\r\n  'salary-components': 'SC',   // Thành phần lương (Salary Component)\r\n  \r\n  // ========================================\r\n  // CÀI ĐẶT KHÁC (OTHER SETTINGS)\r\n  // ========================================\r\n  'settings': 'CFG',           // Cấu hình (Configuration)\r\n  \r\n  // ========================================\r\n  // AUTHENTICATION & USERS\r\n  // ========================================\r\n  'users': 'USER',             // User accounts (for admin management)\r\n  \r\n  // ========================================\r\n  // PKGX INTEGRATION (phukiengiaxuong.com.vn)\r\n  // ========================================\r\n  'pkgx-categories': 'PKGXCAT',        // Danh mục PKGX\r\n  'pkgx-brands': 'PKGXBRAND',          // Thương hiệu PKGX\r\n  'pkgx-category-mappings': 'CATMAP',  // Mapping danh mục HRM → PKGX\r\n  'pkgx-brand-mappings': 'BRANDMAP',   // Mapping thương hiệu HRM → PKGX\r\n  'pkgx-price-mappings': 'PRICEMAP',   // Mapping bảng giá HRM → PKGX\r\n  'pkgx-sync-logs': 'PKGXLOG',         // Log đồng bộ PKGX\r\n  \r\n} as const;\r\n\r\nexport type EntityType = keyof typeof ENTITY_PREFIXES;\r\n\r\n/**\r\n * Get prefix for an entity type\r\n */\r\nexport function getPrefix(entityType: EntityType): string {\r\n  return ENTITY_PREFIXES[entityType];\r\n}\r\n\r\n/**\r\n * Get all entity types\r\n */\r\nexport function getAllEntityTypes(): EntityType[] {\r\n  return Object.keys(ENTITY_PREFIXES) as EntityType[];\r\n}\r\n\r\n/**\r\n * Check if an entity type exists\r\n */\r\nexport function isValidEntityType(entityType: string): entityType is EntityType {\r\n  return entityType in ENTITY_PREFIXES;\r\n}\r\n\r\n/**\r\n * Get entity type from prefix\r\n */\r\nexport function getEntityTypeFromPrefix(prefix: string): EntityType | null {\r\n  const entry = Object.entries(ENTITY_PREFIXES).find(([_, p]) => p === prefix);\r\n  return entry ? (entry[0] as EntityType) : null;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;AAEM,MAAM,kBAAkB;IAC7B,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,aAAa;IACb,eAAe;IACf,YAAY;IACZ,cAAc;IAEd,2CAA2C;IAC3C,8CAA8C;IAC9C,2CAA2C;IAC3C,aAAa;IACb,aAAa;IACb,qBAAqB;IAErB,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,YAAY;IACZ,UAAU;IACV,cAAc;IACd,SAAS;IACT,mBAAmB;IACnB,sBAAsB;IACtB,oBAAoB;IACpB,mBAAmB;IACnB,iBAAiB;IAEjB,2CAA2C;IAC3C,mBAAmB;IACnB,2CAA2C;IAC3C,UAAU;IACV,iBAAiB;IACjB,kBAAkB;IAClB,aAAa;IAEb,2CAA2C;IAC3C,wBAAwB;IACxB,2CAA2C;IAC3C,mBAAmB;IACnB,oBAAoB;IAEpB,2CAA2C;IAC3C,sBAAsB;IACtB,2CAA2C;IAC3C,YAAY;IACZ,YAAY;IACZ,mBAAmB;IACnB,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAElB,oBAAoB;IACpB,iBAAiB;IACjB,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;IACnB,oBAAoB;IACpB,SAAS;IAET,2CAA2C;IAC3C,iCAAiC;IACjC,2CAA2C;IAC3C,WAAW;IACX,YAAY;IACZ,qBAAqB;IACrB,qBAAqB;IACrB,aAAa;IACb,UAAU;IACV,cAAc;IACd,iBAAiB;IAEjB,2CAA2C;IAC3C,iCAAiC;IACjC,2CAA2C;IAC3C,OAAO;IACP,iBAAiB;IACjB,iBAAiB;IAEjB,2CAA2C;IAC3C,yCAAyC;IACzC,2CAA2C;IAC3C,kBAAkB;IAClB,kBAAkB;IAClB,iBAAiB;IACjB,YAAY;IACZ,cAAc;IAEd,2CAA2C;IAC3C,6CAA6C;IAC7C,2CAA2C;IAC3C,aAAa;IACb,aAAa;IACb,SAAS;IACT,QAAQ;IACR,aAAa;IACb,aAAa;IAEb,2CAA2C;IAC3C,yCAAyC;IACzC,2CAA2C;IAC3C,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;IACpB,iBAAiB;IACjB,kBAAkB;IAClB,oBAAoB;IACpB,gBAAgB;IAEhB,2CAA2C;IAC3C,wCAAwC;IACxC,2CAA2C;IAC3C,kBAAkB;IAClB,qBAAqB;IACrB,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,qBAAqB;IAErB,2CAA2C;IAC3C,gCAAgC;IAChC,2CAA2C;IAC3C,YAAY;IAEZ,2CAA2C;IAC3C,yBAAyB;IACzB,2CAA2C;IAC3C,SAAS;IAET,2CAA2C;IAC3C,4CAA4C;IAC5C,2CAA2C;IAC3C,mBAAmB;IACnB,eAAe;IACf,0BAA0B;IAC1B,uBAAuB;IACvB,uBAAuB;IACvB,kBAAkB;AAEpB;AAOO,SAAS,UAAU,UAAsB;IAC9C,OAAO,eAAe,CAAC,WAAW;AACpC;AAKO,SAAS;IACd,OAAO,OAAO,IAAI,CAAC;AACrB;AAKO,SAAS,kBAAkB,UAAkB;IAClD,OAAO,cAAc;AACvB;AAKO,SAAS,wBAAwB,MAAc;IACpD,MAAM,QAAQ,OAAO,OAAO,CAAC,iBAAiB,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,MAAM;IACrE,OAAO,QAAS,KAAK,CAAC,EAAE,GAAkB;AAC5C"}},
    {"offset": {"line": 2161, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-config.ts"],"sourcesContent":["/**\r\n * ⚡ ENTERPRISE ID MANAGEMENT SYSTEM v2.0\r\n * \r\n * SINGLE SOURCE OF TRUTH - Synced with smart-prefix.ts\r\n * \r\n * Features:\r\n * - 60+ entity configurations\r\n * - TypeScript branded types (SystemId, BusinessId)\r\n * - Category grouping for UI\r\n * - Validation rules\r\n * - Store factory integration\r\n * - Backward compatibility\r\n * \r\n * @version 2.0.0\r\n * @date 2025-11-10\r\n */\r\n\r\nimport { ENTITY_PREFIXES, type EntityType } from './smart-prefix';\r\n\r\n// Re-export EntityType for external use\r\nexport type { EntityType };\r\n\r\n// ========================================\r\n// 🏷️ BRANDED TYPES FOR TYPE SAFETY\r\n// ========================================\r\n\r\n/**\r\n * SystemId - Internal unique identifier (6 digits)\r\n * Used for: Database queries, foreign keys, routing\r\n * Example: \"EMP000001\", \"CUSTOMER000001\", \"ORDER000001\"\r\n */\r\nexport type SystemId = string & { readonly __brand: 'SystemId' };\r\n\r\n/**\r\n * BusinessId - User-facing display identifier (6 digits)\r\n * Used for: UI display, breadcrumbs, user communication\r\n * Example: \"NV000001\", \"KH000001\", \"DH000001\"\r\n */\r\nexport type BusinessId = string & { readonly __brand: 'BusinessId' };\r\n\r\n/**\r\n * Create a branded SystemId (use with caution - prefer auto-generation)\r\n */\r\nexport function createSystemId(id: string): SystemId {\r\n  return id as SystemId;\r\n}\r\n\r\n/**\r\n * Create a branded BusinessId (use with caution - prefer auto-generation)\r\n */\r\nexport function createBusinessId(id: string): BusinessId {\r\n  return id as BusinessId;\r\n}\r\n\r\nexport interface FormattedCounterInfo {\r\n  currentBusinessCounter: number;\r\n  currentSystemCounter: number;\r\n  nextBusinessId: BusinessId;\r\n  nextSystemId: SystemId;\r\n  digitCount: number;\r\n  prefix: string;\r\n  systemIdPrefix: string;\r\n  displayName: string;\r\n}\r\n\r\nexport function formatCounterInfo(\r\n  entityType: EntityType,\r\n  counters?: { business?: number | null; system?: number | null }\r\n): FormattedCounterInfo {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`Unknown entity type: ${entityType}`);\r\n  }\r\n\r\n  const currentBusinessCounter = Math.max(0, counters?.business ?? 0);\r\n  const currentSystemCounter = Math.max(0, counters?.system ?? currentBusinessCounter);\r\n  const nextBusinessCounter = currentBusinessCounter + 1;\r\n  const nextSystemCounter = currentSystemCounter + 1;\r\n  const paddedBusiness = String(nextBusinessCounter).padStart(config.digitCount, '0');\r\n  const paddedSystem = String(nextSystemCounter).padStart(config.digitCount, '0');\r\n\r\n  return {\r\n    currentBusinessCounter,\r\n    currentSystemCounter,\r\n    nextBusinessId: createBusinessId(`${config.prefix}${paddedBusiness}`),\r\n    nextSystemId: createSystemId(`${config.systemIdPrefix}${paddedSystem}`),\r\n    digitCount: config.digitCount,\r\n    prefix: config.prefix,\r\n    systemIdPrefix: config.systemIdPrefix,\r\n    displayName: config.displayName,\r\n  };\r\n}\r\n\r\n// ========================================\r\n// 📋 CONFIGURATION INTERFACE\r\n// ========================================\r\n\r\nexport interface EntityIDConfig {\r\n  /** Entity type identifier */\r\n  entityType: EntityType;\r\n  \r\n  /** Prefix for business ID (user-facing) - from smart-prefix.ts */\r\n  prefix: string;\r\n  \r\n  /** Prefix for system ID (internal) - usually same or 'entity-name' */\r\n  systemIdPrefix: string;\r\n  \r\n  /** Number of digits for business ID (e.g., 6 → NV000001) */\r\n  digitCount: number;\r\n  \r\n  /** Display name (Vietnamese) */\r\n  displayName: string;\r\n  \r\n  /** Category for settings UI grouping */\r\n  category: 'hr' | 'finance' | 'inventory' | 'sales' | 'purchasing' | 'service' | 'settings' | 'system';\r\n  \r\n  /** Description or notes */\r\n  description?: string;\r\n  \r\n  /** Custom validation rules */\r\n  validation?: {\r\n    /** Allow users to input custom ID */\r\n    allowCustomId?: boolean;\r\n    /** Regex pattern for validation */\r\n    pattern?: RegExp;\r\n    /** Minimum counter value */\r\n    minValue?: number;\r\n    /** Maximum counter value */\r\n    maxValue?: number;\r\n  };\r\n  \r\n  /** Whether entity uses store-factory auto-generation */\r\n  usesStoreFactory?: boolean;\r\n  \r\n  /** Special handling notes for developers */\r\n  notes?: string;\r\n}\r\n\r\n// ========================================\r\n// 🗂️ COMPLETE CONFIGURATION REGISTRY\r\n// ========================================\r\n\r\n/**\r\n * ID_CONFIG - Central registry for all 60+ entities\r\n * \r\n * ✅ Synced with smart-prefix.ts\r\n * ✅ Includes all missing entities\r\n * ✅ Category organization\r\n */\r\nexport const ID_CONFIG: Record<EntityType, EntityIDConfig> = {\r\n  // ========================================\r\n  // 👥 HR & ORGANIZATION (NHÂN SỰ)\r\n  // ========================================\r\n  \r\n  'employees': {\r\n    entityType: 'employees',\r\n    prefix: ENTITY_PREFIXES['employees'], // 'NV'\r\n    systemIdPrefix: 'EMP',\r\n    digitCount: 6,\r\n    displayName: 'Nhân viên',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'departments': {\r\n    entityType: 'departments',\r\n    prefix: ENTITY_PREFIXES['departments'], // 'PB'\r\n    systemIdPrefix: 'DEPT',\r\n    digitCount: 6,\r\n    displayName: 'Phòng ban',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'branches': {\r\n    entityType: 'branches',\r\n    prefix: ENTITY_PREFIXES['branches'], // 'CN'\r\n    systemIdPrefix: 'BRANCH',\r\n    digitCount: 6,\r\n    displayName: 'Chi nhánh',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'job-titles': {\r\n    entityType: 'job-titles',\r\n    prefix: ENTITY_PREFIXES['job-titles'], // 'CV'\r\n    systemIdPrefix: 'JOB',\r\n    digitCount: 6,\r\n    displayName: 'Chức vụ',\r\n    category: 'hr',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'attendance': {\r\n    entityType: 'attendance',\r\n    prefix: ENTITY_PREFIXES['attendance'], // 'CC'\r\n    systemIdPrefix: 'ATTEND',\r\n    digitCount: 6,\r\n    displayName: 'Chấm công',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'duty-schedule': {\r\n    entityType: 'duty-schedule',\r\n    prefix: ENTITY_PREFIXES['duty-schedule'], // 'PC'\r\n    systemIdPrefix: 'DUTY',\r\n    digitCount: 6,\r\n    displayName: 'Phân công',\r\n    category: 'hr',\r\n    notes: 'Prefix conflict with \"payments\" (PC)',\r\n  },\r\n  \r\n  'payroll': {\r\n    entityType: 'payroll',\r\n    prefix: ENTITY_PREFIXES['payroll'], // 'BL'\r\n    systemIdPrefix: 'PAYROLL',\r\n    digitCount: 6,\r\n    displayName: 'Bảng lương',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'payslips': {\r\n    entityType: 'payslips',\r\n    prefix: ENTITY_PREFIXES['payslips'], // 'PL'\r\n    systemIdPrefix: 'PAYSLIP',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu lương',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n    notes: 'Sinh từ payroll batch store',\r\n  },\r\n  \r\n  'payroll-audit-log': {\r\n    entityType: 'payroll-audit-log',\r\n    prefix: ENTITY_PREFIXES['payroll-audit-log'], // 'PAL'\r\n    systemIdPrefix: 'PAYROLLLOG',\r\n    digitCount: 6,\r\n    displayName: 'Nhật ký payroll',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  'payroll-templates': {\r\n    entityType: 'payroll-templates',\r\n    prefix: ENTITY_PREFIXES['payroll-templates'], // 'BTP'\r\n    systemIdPrefix: 'PAYTPL',\r\n    digitCount: 6,\r\n    displayName: 'Mẫu bảng lương',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n    notes: 'Dùng cho trang template payroll Phase 3',\r\n  },\r\n  \r\n  'penalties': {\r\n    entityType: 'penalties',\r\n    prefix: ENTITY_PREFIXES['penalties'], // 'PF'\r\n    systemIdPrefix: 'PENALTY',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu phạt',\r\n    category: 'hr',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'leaves': {\r\n    entityType: 'leaves',\r\n    prefix: ENTITY_PREFIXES['leaves'], // 'PN'\r\n    systemIdPrefix: 'LEAVE',\r\n    digitCount: 6,\r\n    displayName: 'Nghỉ phép',\r\n    category: 'hr',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // 👤 CUSTOMERS & PARTNERS (KHÁCH HÀNG)\r\n  // ========================================\r\n  \r\n  'customers': {\r\n    entityType: 'customers',\r\n    prefix: ENTITY_PREFIXES['customers'], // 'KH'\r\n    systemIdPrefix: 'CUSTOMER',\r\n    digitCount: 6,\r\n    displayName: 'Khách hàng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'suppliers': {\r\n    entityType: 'suppliers',\r\n    prefix: ENTITY_PREFIXES['suppliers'], // 'NCC'\r\n    systemIdPrefix: 'SUPPLIER',\r\n    digitCount: 6,\r\n    displayName: 'Nhà cung cấp',\r\n    category: 'purchasing',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'shipping-partners': {\r\n    entityType: 'shipping-partners',\r\n    prefix: ENTITY_PREFIXES['shipping-partners'], // 'DVVC'\r\n    systemIdPrefix: 'SHIPPING',\r\n    digitCount: 6,\r\n    displayName: 'Đơn vị vận chuyển',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // 📦 PRODUCTS & INVENTORY (SẢN PHẨM & KHO)\r\n  // ========================================\r\n  \r\n  'products': {\r\n    entityType: 'products',\r\n    prefix: ENTITY_PREFIXES['products'], // 'SP'\r\n    systemIdPrefix: 'PRODUCT',\r\n    digitCount: 6,\r\n    displayName: 'Sản phẩm',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'brands': {\r\n    entityType: 'brands',\r\n    prefix: ENTITY_PREFIXES['brands'], // 'TH'\r\n    systemIdPrefix: 'BRAND',\r\n    digitCount: 6,\r\n    displayName: 'Thương hiệu',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'categories': {\r\n    entityType: 'categories',\r\n    prefix: ENTITY_PREFIXES['categories'], // 'DM'\r\n    systemIdPrefix: 'CATEGORY',\r\n    digitCount: 6,\r\n    displayName: 'Danh mục',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'units': {\r\n    entityType: 'units',\r\n    prefix: ENTITY_PREFIXES['units'], // 'DVT'\r\n    systemIdPrefix: 'UNIT',\r\n    digitCount: 6,\r\n    displayName: 'Đơn vị tính',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'stock-locations': {\r\n    entityType: 'stock-locations',\r\n    prefix: ENTITY_PREFIXES['stock-locations'], // 'KHO'\r\n    systemIdPrefix: 'STOCK',\r\n    digitCount: 6,\r\n    displayName: 'Vị trí kho',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'inventory-receipts': {\r\n    entityType: 'inventory-receipts',\r\n    prefix: ENTITY_PREFIXES['inventory-receipts'], // 'NK'\r\n    systemIdPrefix: 'INVRECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Nhập kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'inventory-checks': {\r\n    entityType: 'inventory-checks',\r\n    prefix: ENTITY_PREFIXES['inventory-checks'], // 'PKK'\r\n    systemIdPrefix: 'INVCHECK',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu kiểm kho',\r\n    category: 'inventory',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'stock-transfers': {\r\n    entityType: 'stock-transfers',\r\n    prefix: ENTITY_PREFIXES['stock-transfers'], // 'PCK'\r\n    systemIdPrefix: 'TRANSFER',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu chuyển kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: TRANSFER000001, Business ID: PCK000001',\r\n  },\r\n  \r\n  'stock-history': {\r\n    entityType: 'stock-history',\r\n    prefix: ENTITY_PREFIXES['stock-history'], // 'LS'\r\n    systemIdPrefix: 'HISTORY',\r\n    digitCount: 6,\r\n    displayName: 'Lịch sử kho',\r\n    category: 'inventory',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // 🛒 SALES (BÁN HÀNG)\r\n  // ========================================\r\n  \r\n  'orders': {\r\n    entityType: 'orders',\r\n    prefix: ENTITY_PREFIXES['orders'], // 'DH'\r\n    systemIdPrefix: 'ORDER',\r\n    digitCount: 6,\r\n    displayName: 'Đơn hàng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'sales-returns': {\r\n    entityType: 'sales-returns',\r\n    prefix: ENTITY_PREFIXES['sales-returns'], // 'TH'\r\n    systemIdPrefix: 'RETURN',\r\n    digitCount: 6,\r\n    displayName: 'Trả hàng',\r\n    category: 'sales',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'sales-channels': {\r\n    entityType: 'sales-channels',\r\n    prefix: ENTITY_PREFIXES['sales-channels'], // 'KENH'\r\n    systemIdPrefix: 'CHANNEL',\r\n    digitCount: 6,\r\n    displayName: 'Kênh bán hàng',\r\n    category: 'sales',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'shipments': {\r\n    entityType: 'shipments',\r\n    prefix: ENTITY_PREFIXES['shipments'], // 'VC'\r\n    systemIdPrefix: 'SHIPMENT',\r\n    digitCount: 6,\r\n    displayName: 'Vận chuyển',\r\n    category: 'sales',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // 🏭 PURCHASING (MUA HÀNG)\r\n  // ========================================\r\n  \r\n  'purchase-orders': {\r\n    entityType: 'purchase-orders',\r\n    prefix: ENTITY_PREFIXES['purchase-orders'], // 'PO'\r\n    systemIdPrefix: 'PURCHASE',\r\n    digitCount: 6,\r\n    displayName: 'Đơn mua hàng',\r\n    category: 'purchasing',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'purchase-returns': {\r\n    entityType: 'purchase-returns',\r\n    prefix: ENTITY_PREFIXES['purchase-returns'], // 'TM'\r\n    systemIdPrefix: 'PRETURN',\r\n    digitCount: 6,\r\n    displayName: 'Trả hàng NCC',\r\n    category: 'purchasing',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // 💰 FINANCE (TÀI CHÍNH)\r\n  // ========================================\r\n  \r\n  'receipts': {\r\n    entityType: 'receipts',\r\n    prefix: ENTITY_PREFIXES['receipts'], // 'PT'\r\n    systemIdPrefix: 'RECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu thu',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payments': {\r\n    entityType: 'payments',\r\n    prefix: ENTITY_PREFIXES['payments'], // 'PC'\r\n    systemIdPrefix: 'PAYMENT',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu chi',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n  },\r\n\r\n  'voucher-receipt': {\r\n    entityType: 'voucher-receipt',\r\n    prefix: ENTITY_PREFIXES['voucher-receipt'], // Alias 'PT'\r\n    systemIdPrefix: 'RECEIPT',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu thu (Voucher)',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n    notes: 'Alias dùng cho các workflow voucher-only hoặc màn hình tổng hợp phiếu thu/chi.',\r\n  },\r\n  \r\n  'voucher-payment': {\r\n    entityType: 'voucher-payment',\r\n    prefix: ENTITY_PREFIXES['voucher-payment'], // Alias 'PC'\r\n    systemIdPrefix: 'PAYMENT',\r\n    digitCount: 6,\r\n    displayName: 'Phiếu chi (Voucher)',\r\n    category: 'finance',\r\n    usesStoreFactory: true,\r\n    notes: 'Alias dùng cho các workflow voucher-only hoặc màn hình tổng hợp phiếu thu/chi.',\r\n  },\r\n  \r\n  'cashbook': {\r\n    entityType: 'cashbook',\r\n    prefix: ENTITY_PREFIXES['cashbook'], // 'SCT'\r\n    systemIdPrefix: 'CASHBOOK',\r\n    digitCount: 6,\r\n    displayName: 'Sổ quỹ tiền mặt',\r\n    category: 'finance',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'reconciliation': {\r\n    entityType: 'reconciliation',\r\n    prefix: ENTITY_PREFIXES['reconciliation'], // 'DT'\r\n    systemIdPrefix: 'RECON',\r\n    digitCount: 6,\r\n    displayName: 'Đối chiếu',\r\n    category: 'finance',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // Finance Settings\r\n  'receipt-types': {\r\n    entityType: 'receipt-types',\r\n    prefix: ENTITY_PREFIXES['receipt-types'], // 'LT'\r\n    systemIdPrefix: 'RECTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Loại thu',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payment-types': {\r\n    entityType: 'payment-types',\r\n    prefix: ENTITY_PREFIXES['payment-types'], // 'LC'\r\n    systemIdPrefix: 'PAYTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Loại chi',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'cash-accounts': {\r\n    entityType: 'cash-accounts',\r\n    prefix: ENTITY_PREFIXES['cash-accounts'], // 'TK'\r\n    systemIdPrefix: 'ACCOUNT',\r\n    digitCount: 6,\r\n    displayName: 'Tài khoản',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'payment-methods': {\r\n    entityType: 'payment-methods',\r\n    prefix: ENTITY_PREFIXES['payment-methods'], // 'PTTT'\r\n    systemIdPrefix: 'METHOD',\r\n    digitCount: 6,\r\n    displayName: 'Phương thức thanh toán',\r\n    category: 'finance',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'pricing-settings': {\r\n    entityType: 'pricing-settings',\r\n    prefix: ENTITY_PREFIXES['pricing-settings'], // 'GIA'\r\n    systemIdPrefix: 'PRICING',\r\n    digitCount: 6,\r\n    displayName: 'Cài đặt giá',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n\r\n  'taxes': {\r\n    entityType: 'taxes',\r\n    prefix: ENTITY_PREFIXES['taxes'], // 'TAX'\r\n    systemIdPrefix: 'TAX',\r\n    digitCount: 6,\r\n    displayName: 'Thuế',\r\n    category: 'settings',\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // ========================================\r\n  // 🎯 KPI & TARGETS (MỤC TIÊU)\r\n  // ========================================\r\n  \r\n  'kpi': {\r\n    entityType: 'kpi',\r\n    prefix: ENTITY_PREFIXES['kpi'], // 'KPI'\r\n    systemIdPrefix: 'KPI',\r\n    digitCount: 6,\r\n    displayName: 'KPI',\r\n    category: 'hr',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'target-groups': {\r\n    entityType: 'target-groups',\r\n    prefix: ENTITY_PREFIXES['target-groups'], // 'NHOM'\r\n    systemIdPrefix: 'TARGET',\r\n    digitCount: 6,\r\n    displayName: 'Nhóm mục tiêu',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'other-targets': {\r\n    entityType: 'other-targets',\r\n    prefix: ENTITY_PREFIXES['other-targets'], // 'MT'\r\n    systemIdPrefix: 'OTHERTARGET',\r\n    digitCount: 6,\r\n    displayName: 'Mục tiêu khác',\r\n    category: 'sales',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // CUSTOMER SERVICE (DỊCH VỤ)\r\n  // ========================================\r\n  \r\n  'internal-tasks': {\r\n    entityType: 'internal-tasks',\r\n    prefix: ENTITY_PREFIXES['internal-tasks'], // 'CVNB'\r\n    systemIdPrefix: 'TASK',\r\n    digitCount: 6,\r\n    displayName: 'Công việc nội bộ',\r\n    category: 'system',\r\n    usesStoreFactory: true,\r\n    validation: { allowCustomId: true },\r\n  },\r\n  \r\n  'task-templates': {\r\n    entityType: 'task-templates',\r\n    prefix: ENTITY_PREFIXES['task-templates'], // 'TMPL'\r\n    systemIdPrefix: 'TMPL',\r\n    digitCount: 6,\r\n    displayName: 'Mẫu công việc',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'custom-fields': {\r\n    entityType: 'custom-fields',\r\n    prefix: ENTITY_PREFIXES['custom-fields'], // 'FIELD'\r\n    systemIdPrefix: 'FIELD',\r\n    digitCount: 6,\r\n    displayName: 'Trường tùy chỉnh',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'warranty': {\r\n    entityType: 'warranty',\r\n    prefix: ENTITY_PREFIXES['warranty'], // 'BH'\r\n    systemIdPrefix: 'WARRANTY',\r\n    digitCount: 6,\r\n    displayName: 'Bảo hành',\r\n    category: 'service',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: WARRANTY000001, Business ID: BH000001',\r\n  },\r\n  \r\n  'complaints': {\r\n    entityType: 'complaints',\r\n    prefix: ENTITY_PREFIXES['complaints'], // 'PKN'\r\n    systemIdPrefix: 'COMPLAINT',\r\n    digitCount: 6,\r\n    displayName: 'Khiếu nại',\r\n    category: 'service',\r\n    usesStoreFactory: true,\r\n    notes: 'systemId: COMPLAINT000001, Business ID: PKN000001',\r\n  },\r\n  \r\n  // ========================================\r\n  // ⚙️ SETTINGS & CATEGORIES\r\n  // ========================================\r\n  \r\n  'provinces': {\r\n    entityType: 'provinces',\r\n    prefix: ENTITY_PREFIXES['provinces'], // 'TP'\r\n    systemIdPrefix: 'PROVINCE',\r\n    digitCount: 6,\r\n    displayName: 'Tỉnh/Thành phố',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'districts': {\r\n    entityType: 'districts',\r\n    prefix: ENTITY_PREFIXES['districts'], // 'QH'\r\n    systemIdPrefix: 'DISTRICT',\r\n    digitCount: 6,\r\n    displayName: 'Quận/Huyện',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'wards': {\r\n    entityType: 'wards',\r\n    prefix: ENTITY_PREFIXES['wards'], // 'PX'\r\n    systemIdPrefix: 'WARD',\r\n    digitCount: 6,\r\n    displayName: 'Phường/Xã',\r\n    category: 'settings',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  'wiki': {\r\n    entityType: 'wiki',\r\n    prefix: ENTITY_PREFIXES['wiki'], // 'TL'\r\n    systemIdPrefix: 'WIKI',\r\n    digitCount: 6,\r\n    displayName: 'Tài liệu',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'packaging': {\r\n    entityType: 'packaging',\r\n    prefix: ENTITY_PREFIXES['packaging'], // 'DG'\r\n    systemIdPrefix: 'PACKAGE',\r\n    digitCount: 6,\r\n    displayName: 'Đóng gói',\r\n    category: 'inventory',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'audit-log': {\r\n    entityType: 'audit-log',\r\n    prefix: ENTITY_PREFIXES['audit-log'], // 'LOG'\r\n    systemIdPrefix: 'LOG',\r\n    digitCount: 10,\r\n    displayName: 'Nhật ký',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // Customer Settings\r\n  'customer-types': {\r\n    entityType: 'customer-types',\r\n    prefix: ENTITY_PREFIXES['customer-types'], // 'LKH'\r\n    systemIdPrefix: 'CUSTTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Loại khách hàng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'customer-groups': {\r\n    entityType: 'customer-groups',\r\n    prefix: ENTITY_PREFIXES['customer-groups'], // 'NHKH'\r\n    systemIdPrefix: 'CUSTGROUP',\r\n    digitCount: 6,\r\n    displayName: 'Nhóm khách hàng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'customer-sources': {\r\n    entityType: 'customer-sources',\r\n    prefix: ENTITY_PREFIXES['customer-sources'], // 'NKH'\r\n    systemIdPrefix: 'CUSTSOURCE',\r\n    digitCount: 6,\r\n    displayName: 'Nguồn khách hàng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'payment-terms': {\r\n    entityType: 'payment-terms',\r\n    prefix: ENTITY_PREFIXES['payment-terms'], // 'HTTT'\r\n    systemIdPrefix: 'PAYTERM',\r\n    digitCount: 6,\r\n    displayName: 'Hình thức thanh toán',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'credit-ratings': {\r\n    entityType: 'credit-ratings',\r\n    prefix: ENTITY_PREFIXES['credit-ratings'], // 'XHTD'\r\n    systemIdPrefix: 'CREDIT',\r\n    digitCount: 6,\r\n    displayName: 'Xếp hạng tín dụng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  'lifecycle-stages': {\r\n    entityType: 'lifecycle-stages',\r\n    prefix: ENTITY_PREFIXES['lifecycle-stages'], // 'GDL'\r\n    systemIdPrefix: 'LIFECYCLE',\r\n    digitCount: 6,\r\n    displayName: 'Giai đoạn vòng đời khách hàng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  'sla-settings': {\r\n    entityType: 'sla-settings',\r\n    prefix: ENTITY_PREFIXES['sla-settings'], // 'SLA'\r\n    systemIdPrefix: 'SLACFG',\r\n    digitCount: 6,\r\n    displayName: 'Cài đặt SLA khách hàng',\r\n    category: 'sales',\r\n    validation: { allowCustomId: true },\r\n    usesStoreFactory: true,\r\n  },\r\n  \r\n  // Employee Settings\r\n  'employee-types': {\r\n    entityType: 'employee-types',\r\n    prefix: ENTITY_PREFIXES['employee-types'], // 'LNV'\r\n    systemIdPrefix: 'EMPTYPE',\r\n    digitCount: 6,\r\n    displayName: 'Loại nhân viên',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'employee-statuses': {\r\n    entityType: 'employee-statuses',\r\n    prefix: ENTITY_PREFIXES['employee-statuses'], // 'TTNV'\r\n    systemIdPrefix: 'EMPSTATUS',\r\n    digitCount: 6,\r\n    displayName: 'Trạng thái nhân viên',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'contract-types': {\r\n    entityType: 'contract-types',\r\n    prefix: ENTITY_PREFIXES['contract-types'], // 'LHD'\r\n    systemIdPrefix: 'CONTRACT',\r\n    digitCount: 6,\r\n    displayName: 'Loại hợp đồng',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'work-shifts': {\r\n    entityType: 'work-shifts',\r\n    prefix: ENTITY_PREFIXES['work-shifts'], // 'CA'\r\n    systemIdPrefix: 'WSHIFT',\r\n    digitCount: 6,\r\n    displayName: 'Ca làm việc',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Dùng cho cài đặt ca làm việc & Dual ID trong attendance',\r\n  },\r\n  \r\n  'leave-types': {\r\n    entityType: 'leave-types',\r\n    prefix: ENTITY_PREFIXES['leave-types'], // 'LP'\r\n    systemIdPrefix: 'LEAVETYPE',\r\n    digitCount: 6,\r\n    displayName: 'Loại nghỉ phép',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Quản lý danh mục phép năm/phép đặc biệt',\r\n  },\r\n  \r\n  'salary-components': {\r\n    entityType: 'salary-components',\r\n    prefix: ENTITY_PREFIXES['salary-components'], // 'SC'\r\n    systemIdPrefix: 'SALCOMP',\r\n    digitCount: 6,\r\n    displayName: 'Thành phần lương',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Dùng cho cấu hình payroll engine',\r\n  },\r\n  \r\n  // ========================================\r\n  // 🔐 SYSTEM & AUTH\r\n  // ========================================\r\n  \r\n  'settings': {\r\n    entityType: 'settings',\r\n    prefix: ENTITY_PREFIXES['settings'], // 'CFG'\r\n    systemIdPrefix: 'CONFIG',\r\n    digitCount: 6,\r\n    displayName: 'Cấu hình',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  'users': {\r\n    entityType: 'users',\r\n    prefix: ENTITY_PREFIXES['users'], // 'USER'\r\n    systemIdPrefix: 'USER',\r\n    digitCount: 6,\r\n    displayName: 'Người dùng',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n  },\r\n  \r\n  // ========================================\r\n  // 🌐 PKGX INTEGRATION (phukiengiaxuong.com.vn)\r\n  // ========================================\r\n  \r\n  'pkgx-categories': {\r\n    entityType: 'pkgx-categories',\r\n    prefix: ENTITY_PREFIXES['pkgx-categories'], // 'PKGXCAT'\r\n    systemIdPrefix: 'PKGXCAT',\r\n    digitCount: 6,\r\n    displayName: 'Danh mục PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Danh mục từ website phukiengiaxuong.com.vn',\r\n  },\r\n  \r\n  'pkgx-brands': {\r\n    entityType: 'pkgx-brands',\r\n    prefix: ENTITY_PREFIXES['pkgx-brands'], // 'PKGXBRAND'\r\n    systemIdPrefix: 'PKGXBRAND',\r\n    digitCount: 6,\r\n    displayName: 'Thương hiệu PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Thương hiệu từ website phukiengiaxuong.com.vn',\r\n  },\r\n  \r\n  'pkgx-category-mappings': {\r\n    entityType: 'pkgx-category-mappings',\r\n    prefix: ENTITY_PREFIXES['pkgx-category-mappings'], // 'CATMAP'\r\n    systemIdPrefix: 'CATMAP',\r\n    digitCount: 6,\r\n    displayName: 'Mapping danh mục PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Mapping danh mục HRM ↔ PKGX',\r\n  },\r\n  \r\n  'pkgx-brand-mappings': {\r\n    entityType: 'pkgx-brand-mappings',\r\n    prefix: ENTITY_PREFIXES['pkgx-brand-mappings'], // 'BRANDMAP'\r\n    systemIdPrefix: 'BRANDMAP',\r\n    digitCount: 6,\r\n    displayName: 'Mapping thương hiệu PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Mapping thương hiệu HRM ↔ PKGX',\r\n  },\r\n  \r\n  'pkgx-price-mappings': {\r\n    entityType: 'pkgx-price-mappings',\r\n    prefix: ENTITY_PREFIXES['pkgx-price-mappings'], // 'PRICEMAP'\r\n    systemIdPrefix: 'PRICEMAP',\r\n    digitCount: 6,\r\n    displayName: 'Mapping giá PKGX',\r\n    category: 'settings',\r\n    usesStoreFactory: false,\r\n    notes: 'Mapping bảng giá HRM → PKGX price fields',\r\n  },\r\n  \r\n  'pkgx-sync-logs': {\r\n    entityType: 'pkgx-sync-logs',\r\n    prefix: ENTITY_PREFIXES['pkgx-sync-logs'], // 'PKGXLOG'\r\n    systemIdPrefix: 'PKGXLOG',\r\n    digitCount: 6,\r\n    displayName: 'Log đồng bộ PKGX',\r\n    category: 'system',\r\n    usesStoreFactory: false,\r\n    notes: 'Lưu lịch sử đồng bộ với PKGX',\r\n  },\r\n};\r\n\r\n// ========================================\r\n// 🛠️ HELPER FUNCTIONS\r\n// ========================================\r\n\r\n/**\r\n * Get configuration for an entity type\r\n */\r\nexport function getEntityConfig(entityType: EntityType): EntityIDConfig {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`No configuration found for entity type: ${entityType}`);\r\n  }\r\n  return config;\r\n}\r\n\r\n/**\r\n * Get all entity types in a category\r\n */\r\nexport function getEntitiesByCategory(category: EntityIDConfig['category']): EntityType[] {\r\n  return Object.values(ID_CONFIG)\r\n    .filter(config => config.category === category)\r\n    .map(config => config.entityType);\r\n}\r\n\r\n/**\r\n * Get entities grouped by category\r\n */\r\nexport function getEntityCategories(): Record<string, EntityType[]> {\r\n  const categories: Record<string, EntityType[]> = {\r\n    'hr': [],\r\n    'finance': [],\r\n    'inventory': [],\r\n    'sales': [],\r\n    'purchasing': [],\r\n    'service': [],\r\n    'settings': [],\r\n    'system': [],\r\n  };\r\n  \r\n  Object.values(ID_CONFIG).forEach(config => {\r\n    categories[config.category].push(config.entityType);\r\n  });\r\n  \r\n  return categories;\r\n}\r\n\r\n/**\r\n * Validate ID format for an entity\r\n * Returns validation result with detailed error message\r\n */\r\nexport function validateIdFormat(\r\n  id: string,\r\n  entityType: EntityType\r\n): { valid: boolean; error?: string } {\r\n  const config = getEntityConfig(entityType);\r\n  \r\n  // Check prefix\r\n  if (!id.startsWith(config.prefix)) {\r\n    return { \r\n      valid: false, \r\n      error: `Invalid prefix. Expected \"${config.prefix}\", got \"${id.slice(0, config.prefix.length)}\"` \r\n    };\r\n  }\r\n  \r\n  // Check digit count\r\n  const numberPart = id.substring(config.prefix.length);\r\n  if (numberPart.length !== config.digitCount) {\r\n    const expectedLength = config.prefix.length + config.digitCount;\r\n    return { \r\n      valid: false, \r\n      error: `Invalid length. Expected ${expectedLength} characters, got ${id.length}` \r\n    };\r\n  }\r\n  \r\n  // Check if numeric\r\n  if (!/^\\d+$/.test(numberPart)) {\r\n    return { \r\n      valid: false, \r\n      error: 'Numeric part must contain only digits' \r\n    };\r\n  }\r\n  \r\n  // Custom pattern validation\r\n  if (config.validation?.pattern && !config.validation.pattern.test(id)) {\r\n    return { \r\n      valid: false, \r\n      error: 'ID does not match required pattern' \r\n    };\r\n  }\r\n  \r\n  return { valid: true };\r\n}\r\n\r\n/**\r\n * Check if entity allows custom ID input\r\n */\r\nexport function allowsCustomId(entityType: EntityType): boolean {\r\n  return getEntityConfig(entityType).validation?.allowCustomId ?? false;\r\n}\r\n\r\n/**\r\n * Get entities that use store factory\r\n */\r\nexport function getStoreFactoryEntities(): EntityType[] {\r\n  return Object.values(ID_CONFIG)\r\n    .filter(config => config.usesStoreFactory === true)\r\n    .map(config => config.entityType);\r\n}\r\n\r\n/**\r\n * Get display label for category\r\n */\r\nexport function getCategoryLabel(category: EntityIDConfig['category']): string {\r\n  const labels: Record<EntityIDConfig['category'], string> = {\r\n    'hr': 'Nhân sự & Tổ chức',\r\n    'finance': 'Tài chính',\r\n    'inventory': 'Kho hàng',\r\n    'sales': 'Bán hàng',\r\n    'purchasing': 'Mua hàng',\r\n    'service': 'Dịch vụ khách hàng',\r\n    'settings': 'Cài đặt',\r\n    'system': 'Hệ thống',\r\n  };\r\n  return labels[category];\r\n}\r\n\r\n/**\r\n * Search entities by name or prefix\r\n */\r\nexport function searchEntities(query: string): EntityIDConfig[] {\r\n  const lowerQuery = query.toLowerCase();\r\n  return Object.values(ID_CONFIG).filter(config => \r\n    config.displayName.toLowerCase().includes(lowerQuery) ||\r\n    config.prefix.toLowerCase().includes(lowerQuery) ||\r\n    config.entityType.includes(lowerQuery)\r\n  );\r\n}\r\n\r\n/**\r\n * Get total entity count\r\n */\r\nexport function getTotalEntityCount(): number {\r\n  return Object.keys(ID_CONFIG).length;\r\n}\r\n\r\n/**\r\n * Export configuration for backup/import\r\n */\r\nexport function exportConfig(): string {\r\n  return JSON.stringify(ID_CONFIG, null, 2);\r\n}\r\n\r\n// ========================================\r\n// 📊 STATISTICS & ANALYTICS\r\n// ========================================\r\n\r\nexport interface IDSystemStats {\r\n  totalEntities: number;\r\n  byCategory: Record<string, number>;\r\n  storeFactoryEnabled: number;\r\n  customIdAllowed: number;\r\n  averageDigitCount: number;\r\n}\r\n\r\n/**\r\n * Get ID system statistics\r\n */\r\nexport function getIDSystemStats(): IDSystemStats {\r\n  const configs = Object.values(ID_CONFIG);\r\n  \r\n  const byCategory: Record<string, number> = {};\r\n  let storeFactoryEnabled = 0;\r\n  let customIdAllowed = 0;\r\n  let totalDigits = 0;\r\n  \r\n  configs.forEach(config => {\r\n    // Count by category\r\n    byCategory[config.category] = (byCategory[config.category] || 0) + 1;\r\n    \r\n    // Count features\r\n    if (config.usesStoreFactory) storeFactoryEnabled++;\r\n    if (config.validation?.allowCustomId) customIdAllowed++;\r\n    totalDigits += config.digitCount;\r\n  });\r\n  \r\n  return {\r\n    totalEntities: configs.length,\r\n    byCategory,\r\n    storeFactoryEnabled,\r\n    customIdAllowed,\r\n    averageDigitCount: Math.round(totalDigits / configs.length * 10) / 10,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3177, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-utils.ts"],"sourcesContent":["/**\r\n * ID Utilities\r\n * Helpers for generating and validating IDs (systemId & business id)\r\n */\r\n\r\nimport { getPrefix, type EntityType } from './smart-prefix';\r\nimport { ID_CONFIG } from './id-config';\r\n\r\n// Re-export EntityType for convenience\r\nexport type { EntityType } from './smart-prefix';\r\n\r\n/**\r\n * Generate SystemId (6 digits, immutable, internal use only)\r\n * Format: SYSTEMID_PREFIX + 6 digits (e.g., \"EMP000001\", \"CUSTOMER000001\", \"ORDER000001\")\r\n * Uses systemIdPrefix from ID_CONFIG (English full words)\r\n */\r\nexport function generateSystemId(entityType: EntityType, counter: number): string {\r\n  const config = ID_CONFIG[entityType];\r\n  if (!config) {\r\n    throw new Error(`No configuration found for entity type: ${entityType}`);\r\n  }\r\n  const prefix = config.systemIdPrefix;\r\n  const digitCount = config.digitCount || 6;\r\n  return `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n}\r\n\r\n/**\r\n * Generate Business ID (6 digits, user-facing, editable)\r\n * Format: PREFIX + 6 digits (e.g., \"NV000001\", \"KH000001\", \"CTV000001\")\r\n * All entities use same 6-digit format for consistency\r\n * \r\n * @param entityType - Entity type from smart-prefix\r\n * @param counter - Current counter value\r\n * @param customId - Optional custom ID from user input\r\n * @returns Generated ID or validated custom ID\r\n */\r\nexport function generateBusinessId(\r\n  entityType: EntityType, \r\n  counter: number,\r\n  customId?: string\r\n): string {\r\n  // If user provided custom ID, validate and return it\r\n  if (customId && customId.trim()) {\r\n    const sanitized = sanitizeBusinessId(customId);\r\n    if (!sanitized) {\r\n      throw new Error('Mã không hợp lệ! Chỉ được phép sử dụng chữ cái và số.');\r\n    }\r\n    return sanitized;\r\n  }\r\n  \r\n  // Otherwise, auto-generate\r\n  const prefix = getPrefix(entityType);\r\n  return `${prefix}${String(counter).padStart(6, '0')}`;\r\n}\r\n\r\n/**\r\n * Sanitize business ID\r\n * - Remove special characters (keep only letters and numbers)\r\n * - Convert to uppercase\r\n * - Trim whitespace\r\n * \r\n * @param id - Raw user input\r\n * @returns Sanitized ID or null if invalid\r\n */\r\nexport function sanitizeBusinessId(id: string): string | null {\r\n  if (!id || typeof id !== 'string') return null;\r\n  \r\n  // Remove all special characters, keep only alphanumeric\r\n  const cleaned = id.trim().replace(/[^a-zA-Z0-9]/g, '');\r\n  \r\n  if (!cleaned) return null;\r\n  \r\n  // Convert to uppercase for consistency\r\n  return cleaned.toUpperCase();\r\n}\r\n\r\n/**\r\n * Validate business ID uniqueness (case-insensitive)\r\n * \r\n * @param id - ID to check\r\n * @param existingIds - Array of existing IDs in the system\r\n * @param currentId - Current ID (for edit mode, to exclude self)\r\n * @returns true if unique, false if duplicate\r\n */\r\nexport function isBusinessIdUnique(\r\n  id: string,\r\n  existingIds: string[],\r\n  currentId?: string\r\n): boolean {\r\n  if (!id) return false;\r\n  \r\n  const normalizedId = id.toUpperCase();\r\n  const normalizedCurrentId = currentId?.toUpperCase();\r\n  \r\n  return !existingIds.some(existingId => {\r\n    // ✅ Filter out empty/undefined IDs\r\n    if (!existingId || existingId.trim() === '') return false;\r\n    \r\n    const normalizedExisting = existingId.toUpperCase();\r\n    // Skip self-comparison in edit mode\r\n    if (normalizedCurrentId && normalizedExisting === normalizedCurrentId) {\r\n      return false;\r\n    }\r\n    return normalizedExisting === normalizedId;\r\n  });\r\n}\r\n\r\n/**\r\n * Extract counter from system ID\r\n * Used to initialize counter when loading from localStorage\r\n * Supports both 6, 7 and 8 digits\r\n * \r\n * @param systemId - System ID to parse (e.g., \"EMP000001\", \"CUSTOMER000001\", \"WARRANTY0000001\")\r\n * @param prefix - Expected systemIdPrefix (e.g., \"EMP\", \"CUSTOMER\", \"WARRANTY\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromSystemId(systemId: string, prefix: string): number {\r\n  if (!systemId || typeof systemId !== 'string') return 0;\r\n  \r\n  // Try different digit counts (most entities use 6 digits, some use 7-8)\r\n  const regex8 = new RegExp(`^${prefix}(\\\\d{8})$`);\r\n  const regex7 = new RegExp(`^${prefix}(\\\\d{7})$`);\r\n  const regex6 = new RegExp(`^${prefix}(\\\\d{6})$`);\r\n  \r\n  const match8 = systemId.match(regex8);\r\n  if (match8) return parseInt(match8[1], 10);\r\n  \r\n  const match7 = systemId.match(regex7);\r\n  if (match7) return parseInt(match7[1], 10);\r\n  \r\n  const match6 = systemId.match(regex6);\r\n  if (match6) return parseInt(match6[1], 10);\r\n  \r\n  return 0;\r\n}\r\n\r\n/**\r\n * Extract counter from business ID\r\n * Used to initialize counter when loading from localStorage\r\n * \r\n * @param businessId - Business ID to parse (e.g., \"NV000001\")\r\n * @param prefix - Expected prefix (e.g., \"NV\")\r\n * @returns Counter value or 0 if invalid\r\n */\r\nexport function extractCounterFromBusinessId(businessId: string, prefix: string): number {\r\n  if (!businessId || typeof businessId !== 'string') return 0;\r\n  const regex = new RegExp(`^${prefix}(\\\\d+)$`);\r\n  const match = businessId.match(regex);\r\n  return match ? parseInt(match[1], 10) : 0;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for systemId)\r\n * \r\n * @param items - Array of items with systemId\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxSystemIdCounter<T extends { systemId: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.systemId) return;\r\n    const counter = extractCounterFromSystemId(item.systemId, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Get max counter from array of items (for business id)\r\n * Only counts auto-generated IDs (PREFIX + digits)\r\n * \r\n * @param items - Array of items with id\r\n * @param prefix - Prefix to match\r\n * @returns Maximum counter value\r\n */\r\nexport function getMaxBusinessIdCounter<T extends { id: string }>(\r\n  items: T[],\r\n  prefix: string\r\n): number {\r\n  if (!items || !Array.isArray(items)) return 0;\r\n  \r\n  let maxCounter = 0;\r\n  \r\n  items.forEach(item => {\r\n    if (!item || !item.id) return;\r\n    const counter = extractCounterFromBusinessId(item.id, prefix);\r\n    if (counter > maxCounter) {\r\n      maxCounter = counter;\r\n    }\r\n  });\r\n  \r\n  return maxCounter;\r\n}\r\n\r\n/**\r\n * Format ID for display\r\n * Adds spacing for readability\r\n * \r\n * @param id - ID to format\r\n * @returns Formatted ID (e.g., \"NV-000001\", \"KH-000123\")\r\n */\r\nexport function formatIdForDisplay(id: string): string {\r\n  // Match pattern: PREFIX followed by numbers\r\n  const match = id.match(/^([A-Z]+)(\\d+)$/);\r\n  if (!match) return id;\r\n  \r\n  const [, prefix, numbers] = match;\r\n  return `${prefix}-${numbers}`;\r\n}\r\n\r\n/**\r\n * Validate ID format\r\n * Check if ID follows valid pattern (letters + numbers only)\r\n * \r\n * @param id - ID to validate\r\n * @returns true if valid format\r\n */\r\nexport function isValidIdFormat(id: string): boolean {\r\n  if (!id || typeof id !== 'string') return false;\r\n  \r\n  // Only alphanumeric characters allowed\r\n  const regex = /^[A-Z0-9]+$/i;\r\n  return regex.test(id);\r\n}\r\n\r\n/**\r\n * Generate suggested IDs based on entity type\r\n * Useful for autocomplete or placeholder text\r\n * \r\n * @param entityType - Entity type\r\n * @param counter - Current counter\r\n * @param count - Number of suggestions\r\n * @returns Array of suggested IDs\r\n */\r\nexport function generateSuggestedIds(\r\n  entityType: EntityType,\r\n  counter: number,\r\n  count: number = 3\r\n): string[] {\r\n  const suggestions: string[] = [];\r\n  const prefix = getPrefix(entityType);\r\n  \r\n  for (let i = 0; i < count; i++) {\r\n    suggestions.push(`${prefix}${String(counter + i + 1).padStart(6, '0')}`);\r\n  }\r\n  \r\n  return suggestions;\r\n}\r\n\r\n/**\r\n * ✨ Find next available business ID\r\n * Checks existing IDs and increments counter until finding a unique ID\r\n * \r\n * @param prefix - ID prefix (e.g., 'PT', 'PC', 'NV')\r\n * @param existingIds - Array of existing business IDs\r\n * @param startCounter - Starting counter value\r\n * @param digitCount - Number of digits (default: 6)\r\n * @returns Object with nextId and updatedCounter\r\n */\r\nexport function findNextAvailableBusinessId(\r\n  prefix: string,\r\n  existingIds: string[],\r\n  startCounter: number,\r\n  digitCount: number = 6\r\n): { nextId: string; updatedCounter: number } {\r\n  let counter = startCounter;\r\n  let nextId: string;\r\n  \r\n  // Keep incrementing until we find a unique ID\r\n  do {\r\n    counter++;\r\n    nextId = `${prefix}${String(counter).padStart(digitCount, '0')}`;\r\n  } while (existingIds.some(id => id === nextId));\r\n  \r\n  return {\r\n    nextId,\r\n    updatedCounter: counter\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3337, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/store-factory.ts"],"sourcesContent":["import { create } from 'zustand';\r\n// persist, createJSONStorage removed - database is now source of truth\r\nimport { \r\n  generateSystemId, \r\n  generateBusinessId, \r\n  isBusinessIdUnique,\r\n  getMaxSystemIdCounter,\r\n  getMaxBusinessIdCounter,\r\n  findNextAvailableBusinessId,\r\n  type EntityType \r\n} from './id-utils';\r\nimport { getPrefix } from './smart-prefix';\r\nimport { ID_CONFIG, type SystemId, type BusinessId, createSystemId, createBusinessId as brandBusinessId } from './id-config';\r\n\r\nconst SYSTEM_FALLBACK_ID: SystemId = createSystemId('SYS000000');\r\n\r\nconst asSystemIdFallback = (): SystemId => SYSTEM_FALLBACK_ID;\r\n\r\n// ✅ API Sync helper for store-factory\r\nasync function syncToAPI<T>(\r\n  apiEndpoint: string,\r\n  action: 'create' | 'update' | 'delete' | 'restore',\r\n  data: T | { systemId: SystemId },\r\n  systemId?: SystemId\r\n): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' \r\n      ? apiEndpoint \r\n      : `${apiEndpoint}/${systemId || (data as any).systemId}`;\r\n    \r\n    const method = action === 'create' ? 'POST' \r\n      : action === 'update' ? 'PATCH' \r\n      : action === 'delete' ? 'DELETE'\r\n      : 'PATCH'; // restore uses PATCH\r\n    \r\n    const response = await fetch(endpoint, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n      body: action !== 'delete' ? JSON.stringify(data) : undefined,\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      console.warn(`[Store Factory API] ${action} failed for ${apiEndpoint}:`, response.status);\r\n    }\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error(`[Store Factory API] ${action} error for ${apiEndpoint}:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Item with SystemId (branded type)\r\nexport type ItemWithSystemId = { systemId: SystemId; [key: string]: any };\r\n\r\n// ✅ Counter state for ID generation\r\nexport type CounterState = {\r\n  systemId: number;\r\n  businessId: number;\r\n};\r\n\r\nexport type CrudState<T extends ItemWithSystemId> = {\r\n  data: T[];\r\n  _counters: CounterState; // ✅ Persisted counters\r\n  _initialized: boolean; // ✅ Track if loaded from API\r\n  add: (item: Omit<T, 'systemId'>) => T;\r\n  addMultiple: (items: Omit<T, 'systemId'>[]) => void;\r\n  update: (systemId: SystemId, item: Partial<T>) => void; // ✅ Accept partial updates\r\n  remove: (systemId: SystemId) => void; // ✅ Branded type\r\n  hardDelete: (systemId: SystemId) => void; // ✅ Branded type\r\n  restore: (systemId: SystemId) => void; // ✅ Branded type\r\n  findById: (systemId: SystemId | string) => T | undefined; // ✅ Branded type\r\n  getActive: () => T[];\r\n  getDeleted: () => T[];\r\n  loadFromAPI: () => Promise<void>; // ✅ Load data from database\r\n};\r\n\r\nexport const createCrudStore = <T extends ItemWithSystemId>(\r\n  _initialData: T[], // @deprecated - Kept for backward compatibility but NO LONGER USED\r\n  entityType: EntityType, // Changed from idPrefix to entityType\r\n  options?: {\r\n    businessIdField?: keyof T; // Field name for business ID (default: 'id')\r\n    persistKey?: string; // @deprecated - No longer used, kept for backward compatibility\r\n    getCurrentUser?: () => string | undefined; // Function to get current user systemId\r\n    apiEndpoint?: string; // ✅ API endpoint for database sync (e.g., '/api/employees')\r\n  }\r\n) => {\r\n  const businessPrefix = getPrefix(entityType); // Vietnamese prefix for Business ID (NV, KH, DH)\r\n  const config = ID_CONFIG[entityType];\r\n  const systemIdPrefix = config?.systemIdPrefix || entityType.toUpperCase(); // English prefix for SystemId (EMP, CUSTOMER, ORDER)\r\n  \r\n  const businessIdField = options?.businessIdField ?? 'id';\r\n  // const persistKey = options?.persistKey; // @deprecated - No longer used\r\n  const getCurrentUser = options?.getCurrentUser;\r\n  const apiEndpoint = options?.apiEndpoint;\r\n\r\n  // ✅ CHANGED: Start with empty array - database is source of truth\r\n  // Mock data files (data.ts) are NO LONGER USED for runtime\r\n  const normalizedInitialData: T[] = [];\r\n\r\n  const storeConfig = (set: any, get: any) => ({\r\n    data: normalizedInitialData, // ✅ Start empty - data loaded via React Query\r\n    // ✅ Counters start at 0 - will be initialized from API via loadFromAPI()\r\n    _counters: {\r\n      systemId: 0,\r\n      businessId: 0\r\n    },\r\n    _initialized: false, // ✅ Track API initialization\r\n    add: (item: Omit<T, 'systemId'>): T => {\r\n        // ✅ Get counters from state (persisted)\r\n        const currentCounters = get()._counters;\r\n        const newSystemIdCounter = currentCounters.systemId + 1;\r\n        const newSystemId = createSystemId(generateSystemId(entityType, newSystemIdCounter));\r\n        \r\n        // Generate or validate Business ID (if field exists)\r\n        let finalItem = { ...item } as any;\r\n        let newBusinessIdCounter = currentCounters.businessId;\r\n        \r\n        if (businessIdField in item) {\r\n          const customId = (item as any)[businessIdField];\r\n          const existingIds = get().data.map((d: any) => d[businessIdField]);\r\n          \r\n          // ✅ If customId provided, validate uniqueness\r\n          if (customId && customId.trim()) {\r\n            if (!isBusinessIdUnique(customId, existingIds)) {\r\n              throw new Error(`Mã \"${customId}\" đã tồn tại! Vui lòng sử dụng mã khác.`);\r\n            }\r\n            finalItem[businessIdField] = customId.trim().toUpperCase();\r\n          } else {\r\n            // ✅ Auto-generate with findNextAvailableBusinessId\r\n            const digitCount = 6; // All entities use 6 digits\r\n            const result = findNextAvailableBusinessId(businessPrefix, existingIds, newBusinessIdCounter, digitCount);\r\n            finalItem[businessIdField] = result.nextId;\r\n            newBusinessIdCounter = result.updatedCounter;\r\n          }\r\n        }\r\n        \r\n        const now = new Date().toISOString();\r\n        const currentUser = getCurrentUser?.();\r\n        const newItem = { \r\n          ...finalItem, \r\n          systemId: newSystemId, // ✅ Branded SystemId\r\n          createdAt: finalItem.createdAt || now,\r\n          updatedAt: now,\r\n          createdBy: finalItem.createdBy || currentUser,\r\n          updatedBy: currentUser,\r\n        } as unknown as T;\r\n        \r\n        // ✅ Update both data and counters atomically\r\n        set((state: any) => ({ \r\n          data: [...state.data, newItem],\r\n          _counters: {\r\n            systemId: newSystemIdCounter,\r\n            businessId: newBusinessIdCounter\r\n          }\r\n        }));\r\n        \r\n        // ✅ Sync to API in background\r\n        if (apiEndpoint) {\r\n          syncToAPI(apiEndpoint, 'create', newItem).catch(console.error);\r\n        }\r\n        \r\n        return newItem;\r\n    },\r\n    addMultiple: (items: Omit<T, 'systemId'>[]) => \r\n        set((state: any) => {\r\n            const now = new Date().toISOString();\r\n            const currentUser = getCurrentUser?.();\r\n            const newItems: T[] = [];\r\n            const digitCount = 6; // All entities use 6 digits\r\n            \r\n            // ✅ Start from current counters\r\n            let currentSystemIdCounter = state._counters.systemId;\r\n            let currentBusinessIdCounter = state._counters.businessId;\r\n            \r\n            items.forEach(item => {\r\n                // ✅ Generate SystemId from current counter\r\n                currentSystemIdCounter++;\r\n                const newSystemId = createSystemId(generateSystemId(entityType, currentSystemIdCounter));\r\n                \r\n                // Generate or validate Business ID (if field exists)\r\n                let finalItem = { ...item } as any;\r\n                if (businessIdField in item) {\r\n                  const customId = (item as any)[businessIdField];\r\n                  \r\n                  // Collect existing IDs (from state + already added in this batch)\r\n                  const existingIds = [\r\n                    ...state.data.map((d: any) => d[businessIdField]),\r\n                    ...newItems.map((d: any) => d[businessIdField])\r\n                  ];\r\n                  \r\n                  // ✅ If customId provided, validate uniqueness\r\n                  if (customId && customId.trim()) {\r\n                    if (!isBusinessIdUnique(customId, existingIds)) {\r\n                      throw new Error(`Mã \"${customId}\" đã tồn tại! Vui lòng sử dụng mã khác.`);\r\n                    }\r\n                    finalItem[businessIdField] = customId.trim().toUpperCase();\r\n                  } else {\r\n                    // ✅ Auto-generate with findNextAvailableBusinessId\r\n                    const result = findNextAvailableBusinessId(businessPrefix, existingIds, currentBusinessIdCounter, digitCount);\r\n                    finalItem[businessIdField] = result.nextId;\r\n                    currentBusinessIdCounter = result.updatedCounter;\r\n                  }\r\n                }\r\n                \r\n                newItems.push({ \r\n                  ...finalItem, \r\n                  systemId: newSystemId,\r\n                  createdAt: now,\r\n                  updatedAt: now,\r\n                  createdBy: currentUser,\r\n                  updatedBy: currentUser,\r\n                } as unknown as T);\r\n            });\r\n            \r\n            // ✅ Update both data and counters\r\n            const result = { \r\n              data: [...state.data, ...newItems],\r\n              _counters: {\r\n                systemId: currentSystemIdCounter,\r\n                businessId: currentBusinessIdCounter\r\n              }\r\n            };\r\n            \r\n            // ✅ Sync to API in background (batch)\r\n            if (apiEndpoint) {\r\n              newItems.forEach(item => {\r\n                syncToAPI(apiEndpoint, 'create', item).catch(console.error);\r\n              });\r\n            }\r\n            \r\n            return result;\r\n        }),\r\n    update: (systemId: SystemId, updatedItem: Partial<T>) => {\r\n      // Validate unique business ID (case-insensitive, skip self)\r\n      if (businessIdField in updatedItem) {\r\n        const businessId = (updatedItem as any)[businessIdField];\r\n        const existingIds = get().data\r\n          .filter((d: any) => d.systemId !== systemId)\r\n          .map((d: any) => d[businessIdField]);\r\n        \r\n        if (businessId && !isBusinessIdUnique(businessId, existingIds)) {\r\n          throw new Error(`Mã \"${businessId}\" đã tồn tại! Vui lòng sử dụng mã khác.`);\r\n        }\r\n      }\r\n\r\n      const now = new Date().toISOString();\r\n      const currentUser = getCurrentUser?.();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId \r\n            ? { ...item, ...updatedItem, updatedAt: now, updatedBy: currentUser } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const fullItem = get().data.find((item: T) => item.systemId === systemId);\r\n        if (fullItem) {\r\n          syncToAPI(apiEndpoint, 'update', fullItem, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    remove: (systemId: SystemId) => {\r\n      // Soft delete - mark as deleted\r\n      const now = new Date().toISOString();\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: true, deletedAt: now } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'update', { ...item, isDeleted: true, deletedAt: now }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    hardDelete: (systemId: SystemId) => {\r\n      // Permanent delete - remove from array\r\n      set((state: any) => ({\r\n        data: state.data.filter((item: T) => item.systemId !== systemId),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        syncToAPI(apiEndpoint, 'delete', { systemId }, systemId).catch(console.error);\r\n      }\r\n    },\r\n    restore: (systemId: SystemId) => {\r\n      // Restore soft-deleted item\r\n      set((state: any) => ({\r\n        data: state.data.map((item: T) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: false, deletedAt: null } as T\r\n            : item\r\n        ),\r\n      }));\r\n      \r\n      // ✅ Sync to API in background\r\n      if (apiEndpoint) {\r\n        const item = get().data.find((item: T) => item.systemId === systemId);\r\n        if (item) {\r\n          syncToAPI(apiEndpoint, 'restore', { ...item, isDeleted: false, deletedAt: null }, systemId).catch(console.error);\r\n        }\r\n      }\r\n    },\r\n    getActive: () => get().data.filter((item: any) => !item.isDeleted),\r\n    getDeleted: () => get().data.filter((item: any) => item.isDeleted),\r\n    findById: (id: SystemId | string) => get().data.find((item: T) => item.systemId === id || (item as any).id === id),\r\n    \r\n    // ✅ Load data from database API - OPTIMIZED: No more limit=10000!\r\n    // This is now only used for counter initialization, NOT for loading all data\r\n    // Use React Query hooks for data fetching with proper pagination\r\n    loadFromAPI: async () => {\r\n      if (!apiEndpoint) return;\r\n      if (get()._initialized) return;\r\n      \r\n      try {\r\n        // Only fetch minimal data needed to initialize counters\r\n        // Actual data loading should be done via React Query hooks\r\n        const response = await fetch(`${apiEndpoint}?limit=1&sortBy=systemId&sortOrder=desc`, {\r\n          credentials: 'include',\r\n        });\r\n        if (response.ok) {\r\n          const json = await response.json();\r\n          const pagination = json.pagination || {};\r\n          const lastItem = json.data?.[0];\r\n          \r\n          // Initialize counters from the latest item (highest IDs)\r\n          const newCounters = {\r\n            systemId: lastItem ? getMaxSystemIdCounter([lastItem], systemIdPrefix) : 0,\r\n            businessId: (lastItem && options?.businessIdField)\r\n              ? getMaxBusinessIdCounter([lastItem] as any[], businessPrefix)\r\n              : 0\r\n          };\r\n          \r\n          set({ \r\n            data: [], // Don't store data in Zustand anymore - use React Query\r\n            _counters: newCounters,\r\n            _initialized: true \r\n          });\r\n          \r\n          console.log(`[Store Factory] ${apiEndpoint} initialized. Total records: ${pagination.total || 'unknown'}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`[Store Factory] loadFromAPI error for ${apiEndpoint}:`, error);\r\n        // Still mark as initialized to prevent infinite retry\r\n        set({ _initialized: true });\r\n      }\r\n    },\r\n  });\r\n\r\n  // ✅ SIMPLIFIED: No localStorage persistence, database is source of truth\r\n  // Data is loaded via ApiSyncProvider on app init\r\n  return create<CrudState<T>>(storeConfig);\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AACA,uEAAuE;AACvE;AASA;AACA;;;;;AAEA,MAAM,qBAA+B,IAAA,qIAAc,EAAC;AAEpD,MAAM,qBAAqB,IAAgB;AAE3C,sCAAsC;AACtC,eAAe,UACb,WAAmB,EACnB,MAAkD,EAClD,IAAgC,EAChC,QAAmB;IAEnB,IAAI;QACF,MAAM,WAAW,WAAW,WACxB,cACA,GAAG,YAAY,CAAC,EAAE,YAAY,AAAC,KAAa,QAAQ,EAAE;QAE1D,MAAM,SAAS,WAAW,WAAW,SACjC,WAAW,WAAW,UACtB,WAAW,WAAW,WACtB,SAAS,qBAAqB;QAElC,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC;YACA,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,aAAa;YACb,MAAM,WAAW,WAAW,KAAK,SAAS,CAAC,QAAQ;QACrD;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,IAAI,CAAC,CAAC,oBAAoB,EAAE,OAAO,YAAY,EAAE,YAAY,CAAC,CAAC,EAAE,SAAS,MAAM;QAC1F;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,OAAO,WAAW,EAAE,YAAY,CAAC,CAAC,EAAE;QACzE,OAAO;IACT;AACF;AA2BO,MAAM,kBAAkB,CAC7B,cACA,YACA;IAOA,MAAM,iBAAiB,IAAA,mIAAS,EAAC,aAAa,iDAAiD;IAC/F,MAAM,SAAS,gIAAS,CAAC,WAAW;IACpC,MAAM,iBAAiB,QAAQ,kBAAkB,WAAW,WAAW,IAAI,qDAAqD;IAEhI,MAAM,kBAAkB,SAAS,mBAAmB;IACpD,0EAA0E;IAC1E,MAAM,iBAAiB,SAAS;IAChC,MAAM,cAAc,SAAS;IAE7B,kEAAkE;IAClE,2DAA2D;IAC3D,MAAM,wBAA6B,EAAE;IAErC,MAAM,cAAc,CAAC,KAAU,MAAa,CAAC;YAC3C,MAAM;YACN,yEAAyE;YACzE,WAAW;gBACT,UAAU;gBACV,YAAY;YACd;YACA,cAAc;YACd,KAAK,CAAC;gBACF,wCAAwC;gBACxC,MAAM,kBAAkB,MAAM,SAAS;gBACvC,MAAM,qBAAqB,gBAAgB,QAAQ,GAAG;gBACtD,MAAM,cAAc,IAAA,qIAAc,EAAC,IAAA,sIAAgB,EAAC,YAAY;gBAEhE,qDAAqD;gBACrD,IAAI,YAAY;oBAAE,GAAG,IAAI;gBAAC;gBAC1B,IAAI,uBAAuB,gBAAgB,UAAU;gBAErD,IAAI,mBAAmB,MAAM;oBAC3B,MAAM,WAAW,AAAC,IAAY,CAAC,gBAAgB;oBAC/C,MAAM,cAAc,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,IAAW,CAAC,CAAC,gBAAgB;oBAEjE,8CAA8C;oBAC9C,IAAI,YAAY,SAAS,IAAI,IAAI;wBAC/B,IAAI,CAAC,IAAA,wIAAkB,EAAC,UAAU,cAAc;4BAC9C,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE,SAAS,uCAAuC,CAAC;wBAC1E;wBACA,SAAS,CAAC,gBAAgB,GAAG,SAAS,IAAI,GAAG,WAAW;oBAC1D,OAAO;wBACL,mDAAmD;wBACnD,MAAM,aAAa,GAAG,4BAA4B;wBAClD,MAAM,SAAS,IAAA,iJAA2B,EAAC,gBAAgB,aAAa,sBAAsB;wBAC9F,SAAS,CAAC,gBAAgB,GAAG,OAAO,MAAM;wBAC1C,uBAAuB,OAAO,cAAc;oBAC9C;gBACF;gBAEA,MAAM,MAAM,IAAI,OAAO,WAAW;gBAClC,MAAM,cAAc;gBACpB,MAAM,UAAU;oBACd,GAAG,SAAS;oBACZ,UAAU;oBACV,WAAW,UAAU,SAAS,IAAI;oBAClC,WAAW;oBACX,WAAW,UAAU,SAAS,IAAI;oBAClC,WAAW;gBACb;gBAEA,6CAA6C;gBAC7C,IAAI,CAAC,QAAe,CAAC;wBACnB,MAAM;+BAAI,MAAM,IAAI;4BAAE;yBAAQ;wBAC9B,WAAW;4BACT,UAAU;4BACV,YAAY;wBACd;oBACF,CAAC;gBAED,8BAA8B;gBAC9B,IAAI,aAAa;oBACf,UAAU,aAAa,UAAU,SAAS,KAAK,CAAC,QAAQ,KAAK;gBAC/D;gBAEA,OAAO;YACX;YACA,aAAa,CAAC,QACV,IAAI,CAAC;oBACD,MAAM,MAAM,IAAI,OAAO,WAAW;oBAClC,MAAM,cAAc;oBACpB,MAAM,WAAgB,EAAE;oBACxB,MAAM,aAAa,GAAG,4BAA4B;oBAElD,gCAAgC;oBAChC,IAAI,yBAAyB,MAAM,SAAS,CAAC,QAAQ;oBACrD,IAAI,2BAA2B,MAAM,SAAS,CAAC,UAAU;oBAEzD,MAAM,OAAO,CAAC,CAAA;wBACV,2CAA2C;wBAC3C;wBACA,MAAM,cAAc,IAAA,qIAAc,EAAC,IAAA,sIAAgB,EAAC,YAAY;wBAEhE,qDAAqD;wBACrD,IAAI,YAAY;4BAAE,GAAG,IAAI;wBAAC;wBAC1B,IAAI,mBAAmB,MAAM;4BAC3B,MAAM,WAAW,AAAC,IAAY,CAAC,gBAAgB;4BAE/C,kEAAkE;4BAClE,MAAM,cAAc;mCACf,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,IAAW,CAAC,CAAC,gBAAgB;mCAC7C,SAAS,GAAG,CAAC,CAAC,IAAW,CAAC,CAAC,gBAAgB;6BAC/C;4BAED,8CAA8C;4BAC9C,IAAI,YAAY,SAAS,IAAI,IAAI;gCAC/B,IAAI,CAAC,IAAA,wIAAkB,EAAC,UAAU,cAAc;oCAC9C,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE,SAAS,uCAAuC,CAAC;gCAC1E;gCACA,SAAS,CAAC,gBAAgB,GAAG,SAAS,IAAI,GAAG,WAAW;4BAC1D,OAAO;gCACL,mDAAmD;gCACnD,MAAM,SAAS,IAAA,iJAA2B,EAAC,gBAAgB,aAAa,0BAA0B;gCAClG,SAAS,CAAC,gBAAgB,GAAG,OAAO,MAAM;gCAC1C,2BAA2B,OAAO,cAAc;4BAClD;wBACF;wBAEA,SAAS,IAAI,CAAC;4BACZ,GAAG,SAAS;4BACZ,UAAU;4BACV,WAAW;4BACX,WAAW;4BACX,WAAW;4BACX,WAAW;wBACb;oBACJ;oBAEA,kCAAkC;oBAClC,MAAM,SAAS;wBACb,MAAM;+BAAI,MAAM,IAAI;+BAAK;yBAAS;wBAClC,WAAW;4BACT,UAAU;4BACV,YAAY;wBACd;oBACF;oBAEA,sCAAsC;oBACtC,IAAI,aAAa;wBACf,SAAS,OAAO,CAAC,CAAA;4BACf,UAAU,aAAa,UAAU,MAAM,KAAK,CAAC,QAAQ,KAAK;wBAC5D;oBACF;oBAEA,OAAO;gBACX;YACJ,QAAQ,CAAC,UAAoB;gBAC3B,4DAA4D;gBAC5D,IAAI,mBAAmB,aAAa;oBAClC,MAAM,aAAa,AAAC,WAAmB,CAAC,gBAAgB;oBACxD,MAAM,cAAc,MAAM,IAAI,CAC3B,MAAM,CAAC,CAAC,IAAW,EAAE,QAAQ,KAAK,UAClC,GAAG,CAAC,CAAC,IAAW,CAAC,CAAC,gBAAgB;oBAErC,IAAI,cAAc,CAAC,IAAA,wIAAkB,EAAC,YAAY,cAAc;wBAC9D,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE,WAAW,uCAAuC,CAAC;oBAC5E;gBACF;gBAEA,MAAM,MAAM,IAAI,OAAO,WAAW;gBAClC,MAAM,cAAc;gBACpB,IAAI,CAAC,QAAe,CAAC;wBACnB,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,OACpB,KAAK,QAAQ,KAAK,WACd;gCAAE,GAAG,IAAI;gCAAE,GAAG,WAAW;gCAAE,WAAW;gCAAK,WAAW;4BAAY,IAClE;oBAER,CAAC;gBAED,8BAA8B;gBAC9B,IAAI,aAAa;oBACf,MAAM,WAAW,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,OAAY,KAAK,QAAQ,KAAK;oBAChE,IAAI,UAAU;wBACZ,UAAU,aAAa,UAAU,UAAU,UAAU,KAAK,CAAC,QAAQ,KAAK;oBAC1E;gBACF;YACF;YACA,QAAQ,CAAC;gBACP,gCAAgC;gBAChC,MAAM,MAAM,IAAI,OAAO,WAAW;gBAClC,IAAI,CAAC,QAAe,CAAC;wBACnB,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,OACpB,KAAK,QAAQ,KAAK,WACd;gCAAE,GAAG,IAAI;gCAAE,WAAW;gCAAM,WAAW;4BAAI,IAC3C;oBAER,CAAC;gBAED,8BAA8B;gBAC9B,IAAI,aAAa;oBACf,MAAM,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,OAAY,KAAK,QAAQ,KAAK;oBAC5D,IAAI,MAAM;wBACR,UAAU,aAAa,UAAU;4BAAE,GAAG,IAAI;4BAAE,WAAW;4BAAM,WAAW;wBAAI,GAAG,UAAU,KAAK,CAAC,QAAQ,KAAK;oBAC9G;gBACF;YACF;YACA,YAAY,CAAC;gBACX,uCAAuC;gBACvC,IAAI,CAAC,QAAe,CAAC;wBACnB,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,CAAC,OAAY,KAAK,QAAQ,KAAK;oBACzD,CAAC;gBAED,8BAA8B;gBAC9B,IAAI,aAAa;oBACf,UAAU,aAAa,UAAU;wBAAE;oBAAS,GAAG,UAAU,KAAK,CAAC,QAAQ,KAAK;gBAC9E;YACF;YACA,SAAS,CAAC;gBACR,4BAA4B;gBAC5B,IAAI,CAAC,QAAe,CAAC;wBACnB,MAAM,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,OACpB,KAAK,QAAQ,KAAK,WACd;gCAAE,GAAG,IAAI;gCAAE,WAAW;gCAAO,WAAW;4BAAK,IAC7C;oBAER,CAAC;gBAED,8BAA8B;gBAC9B,IAAI,aAAa;oBACf,MAAM,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,OAAY,KAAK,QAAQ,KAAK;oBAC5D,IAAI,MAAM;wBACR,UAAU,aAAa,WAAW;4BAAE,GAAG,IAAI;4BAAE,WAAW;4BAAO,WAAW;wBAAK,GAAG,UAAU,KAAK,CAAC,QAAQ,KAAK;oBACjH;gBACF;YACF;YACA,WAAW,IAAM,MAAM,IAAI,CAAC,MAAM,CAAC,CAAC,OAAc,CAAC,KAAK,SAAS;YACjE,YAAY,IAAM,MAAM,IAAI,CAAC,MAAM,CAAC,CAAC,OAAc,KAAK,SAAS;YACjE,UAAU,CAAC,KAA0B,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,OAAY,KAAK,QAAQ,KAAK,MAAM,AAAC,KAAa,EAAE,KAAK;YAE/G,kEAAkE;YAClE,6EAA6E;YAC7E,iEAAiE;YACjE,aAAa;gBACX,IAAI,CAAC,aAAa;gBAClB,IAAI,MAAM,YAAY,EAAE;gBAExB,IAAI;oBACF,wDAAwD;oBACxD,2DAA2D;oBAC3D,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,uCAAuC,CAAC,EAAE;wBACpF,aAAa;oBACf;oBACA,IAAI,SAAS,EAAE,EAAE;wBACf,MAAM,OAAO,MAAM,SAAS,IAAI;wBAChC,MAAM,aAAa,KAAK,UAAU,IAAI,CAAC;wBACvC,MAAM,WAAW,KAAK,IAAI,EAAE,CAAC,EAAE;wBAE/B,yDAAyD;wBACzD,MAAM,cAAc;4BAClB,UAAU,WAAW,IAAA,2IAAqB,EAAC;gCAAC;6BAAS,EAAE,kBAAkB;4BACzE,YAAY,AAAC,YAAY,SAAS,kBAC9B,IAAA,6IAAuB,EAAC;gCAAC;6BAAS,EAAW,kBAC7C;wBACN;wBAEA,IAAI;4BACF,MAAM,EAAE;4BACR,WAAW;4BACX,cAAc;wBAChB;wBAEA,QAAQ,GAAG,CAAC,CAAC,gBAAgB,EAAE,YAAY,6BAA6B,EAAE,WAAW,KAAK,IAAI,WAAW;oBAC3G;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,CAAC,sCAAsC,EAAE,YAAY,CAAC,CAAC,EAAE;oBACvE,sDAAsD;oBACtD,IAAI;wBAAE,cAAc;oBAAK;gBAC3B;YACF;QACF,CAAC;IAED,yEAAyE;IACzE,iDAAiD;IACjD,OAAO,IAAA,kJAAM,EAAe;AAC9B"}},
    {"offset": {"line": 3645, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/breadcrumb-generator.ts"],"sourcesContent":["/**\r\n * 🍞 BREADCRUMB AUTO-GENERATION SYSTEM\r\n * \r\n * Automatically generates breadcrumbs from route metadata + entity data\r\n * \r\n * Features:\r\n * - Auto-lookup entity name from systemId\r\n * - Falls back to route metadata if entity not found\r\n * - Type-safe with SystemId branded types\r\n * - Supports all entity types from id-config.ts\r\n * \r\n * @example\r\n * ```typescript\r\n * // Route: /receipts/VOUCHER00000123\r\n * const crumbs = generateBreadcrumb(location.pathname);\r\n * // Result: ['Phiếu thu/chi', 'PT000051']\r\n * ```\r\n * \r\n * @version 1.0.0\r\n * @date 2025-11-11\r\n */\r\n\r\nimport { type EntityType, getEntityConfig } from './id-config';\r\nimport { type SystemId } from './id-config';\r\n\r\n// Store registry - lazy loaded to avoid circular dependencies\r\ntype StoreGetter<T> = () => { data: T[] };\r\n\r\ninterface StoreRegistry {\r\n  [key: string]: StoreGetter<any>;\r\n}\r\n\r\nlet storeRegistry: StoreRegistry = {};\r\n\r\n/**\r\n * Register a store for breadcrumb lookup\r\n * Call this in store files to enable auto breadcrumb\r\n */\r\nexport function registerBreadcrumbStore<T extends { systemId: string; id?: string; name?: string }>(\r\n  entityType: EntityType,\r\n  getStore: StoreGetter<T>\r\n) {\r\n  storeRegistry[entityType] = getStore;\r\n}\r\n\r\n/**\r\n * Find entity by systemId and return display name\r\n */\r\nfunction findEntityDisplayName(entityType: EntityType, systemId: string): string | null {\r\n  const getStore = storeRegistry[entityType];\r\n  if (!getStore) return null;\r\n\r\n  try {\r\n    const store = getStore();\r\n    const item = store.data.find((d: any) => d.systemId === systemId);\r\n    \r\n    if (!item) return null;\r\n\r\n    // Priority: name > title > id (business ID) > systemId\r\n    return item.name || item.title || item.id || systemId;\r\n  } catch (error) {\r\n    console.warn(`[Breadcrumb] Failed to lookup ${entityType}:`, error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Parse route path and extract entity info\r\n */\r\ninterface RouteEntityInfo {\r\n  entityType: EntityType | null;\r\n  systemId: string | null;\r\n  displayName: string | null;\r\n}\r\n\r\nfunction parseRouteEntity(pathname: string): RouteEntityInfo {\r\n  // Pattern: /{entity-type}/{systemId}\r\n  const match = pathname.match(/^\\/([^/]+)\\/([^/]+)$/);\r\n  \r\n  if (!match) {\r\n    return { entityType: null, systemId: null, displayName: null };\r\n  }\r\n\r\n  const [, routeType, id] = match;\r\n  \r\n  // Map route type to entity type\r\n  const routeToEntityMap: Record<string, EntityType> = {\r\n    'receipts': 'voucher-receipt',\r\n    'payments': 'voucher-payment',\r\n    'employees': 'employees',\r\n    'customers': 'customers',\r\n    'products': 'products',\r\n    'orders': 'orders',\r\n    'suppliers': 'suppliers',\r\n    'complaints': 'complaints',\r\n    'warranty': 'warranty',\r\n    'purchase-orders': 'purchase-orders',\r\n    'sales-returns': 'sales-returns',\r\n    'purchase-returns': 'purchase-returns',\r\n    'inventory-checks': 'inventory-checks',\r\n  };\r\n\r\n  const entityType = routeToEntityMap[routeType] || null;\r\n  \r\n  if (!entityType) {\r\n    return { entityType: null, systemId: id, displayName: null };\r\n  }\r\n\r\n  // Lookup display name\r\n  const displayName = findEntityDisplayName(entityType, id);\r\n  \r\n  return { entityType, systemId: id, displayName };\r\n}\r\n\r\n/**\r\n * Generate breadcrumb trail from pathname\r\n * \r\n * @param pathname - Current route pathname\r\n * @param routeMeta - Optional route metadata with static breadcrumb\r\n * @returns Array of breadcrumb labels\r\n */\r\nexport function generateBreadcrumb(\r\n  pathname: string,\r\n  routeMeta?: { breadcrumb?: string[] }\r\n): string[] {\r\n  // If route has static breadcrumb metadata, use it as base\r\n  const baseCrumbs = routeMeta?.breadcrumb || [];\r\n  \r\n  // Try to enhance with entity data\r\n  const entityInfo = parseRouteEntity(pathname);\r\n  \r\n  if (entityInfo.displayName) {\r\n    // Replace last breadcrumb with entity display name\r\n    return [...baseCrumbs.slice(0, -1), entityInfo.displayName];\r\n  }\r\n  \r\n  // Fallback to route metadata\r\n  return baseCrumbs;\r\n}\r\n\r\n/**\r\n * Generate breadcrumb for detail page\r\n * \r\n * @example\r\n * ```typescript\r\n * // In voucher detail page (phiếu chi)\r\n * const crumbs = generateDetailBreadcrumb('voucher-payment', voucher.systemId, 'Phiếu thu/chi');\r\n * // Result: ['Phiếu thu/chi', 'PT000051']\r\n * ```\r\n */\r\nexport function generateDetailBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string,\r\n  listPageLabel: string\r\n): string[] {\r\n  const displayName = findEntityDisplayName(entityType, systemId);\r\n  return [listPageLabel, displayName || systemId];\r\n}\r\n\r\n/**\r\n * Generate breadcrumb for form page (create/edit)\r\n * \r\n * @example\r\n * ```typescript\r\n * const crumbs = generateFormBreadcrumb('employees', employeeSystemId, 'Nhân viên');\r\n * // Create: ['Nhân viên', 'Thêm mới']\r\n * // Edit: ['Nhân viên', 'NV000001']\r\n * ```\r\n */\r\nexport function generateFormBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string | null | undefined,\r\n  listPageLabel: string\r\n): string[] {\r\n  if (!systemId) {\r\n    return [listPageLabel, 'Thêm mới'];\r\n  }\r\n  \r\n  const displayName = findEntityDisplayName(entityType, systemId);\r\n  return [listPageLabel, displayName || 'Chỉnh sửa'];\r\n}\r\n\r\n/**\r\n * Hook for breadcrumb in React components\r\n * \r\n * @example\r\n * ```typescript\r\n * function EmployeeDetailPage() {\r\n *   const { systemId } = useParams();\r\n *   const crumbs = useBreadcrumb('employees', systemId, 'Nhân viên');\r\n *   usePageHeader({ breadcrumb: crumbs });\r\n * }\r\n * ```\r\n */\r\nexport function useBreadcrumb(\r\n  entityType: EntityType,\r\n  systemId: string | null | undefined,\r\n  listPageLabel: string\r\n): string[] {\r\n  if (!systemId) {\r\n    return [listPageLabel, 'Thêm mới'];\r\n  }\r\n  \r\n  return generateDetailBreadcrumb(entityType, systemId, listPageLabel);\r\n}\r\n\r\n/**\r\n * Get entity config for breadcrumb display\r\n */\r\nexport function getEntityDisplayInfo(entityType: EntityType) {\r\n  try {\r\n    const config = getEntityConfig(entityType);\r\n    return {\r\n      displayName: config.displayName,\r\n      prefix: config.prefix,\r\n      category: config.category,\r\n    };\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Clear store registry (for testing)\r\n */\r\nexport function clearBreadcrumbStores() {\r\n  storeRegistry = {};\r\n}\r\n\r\n/**\r\n * Get all registered stores (for debugging)\r\n */\r\nexport function getRegisteredStores(): string[] {\r\n  return Object.keys(storeRegistry);\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;CAoBC,GAED;;AAUA,IAAI,gBAA+B,CAAC;AAM7B,SAAS,wBACd,UAAsB,EACtB,QAAwB;IAExB,aAAa,CAAC,WAAW,GAAG;AAC9B;AAEA;;CAEC,GACD,SAAS,sBAAsB,UAAsB,EAAE,QAAgB;IACrE,MAAM,WAAW,aAAa,CAAC,WAAW;IAC1C,IAAI,CAAC,UAAU,OAAO;IAEtB,IAAI;QACF,MAAM,QAAQ;QACd,MAAM,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,QAAQ,KAAK;QAExD,IAAI,CAAC,MAAM,OAAO;QAElB,uDAAuD;QACvD,OAAO,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,KAAK,EAAE,IAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,IAAI,CAAC,CAAC,8BAA8B,EAAE,WAAW,CAAC,CAAC,EAAE;QAC7D,OAAO;IACT;AACF;AAWA,SAAS,iBAAiB,QAAgB;IACxC,qCAAqC;IACrC,MAAM,QAAQ,SAAS,KAAK,CAAC;IAE7B,IAAI,CAAC,OAAO;QACV,OAAO;YAAE,YAAY;YAAM,UAAU;YAAM,aAAa;QAAK;IAC/D;IAEA,MAAM,GAAG,WAAW,GAAG,GAAG;IAE1B,gCAAgC;IAChC,MAAM,mBAA+C;QACnD,YAAY;QACZ,YAAY;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,UAAU;QACV,aAAa;QACb,cAAc;QACd,YAAY;QACZ,mBAAmB;QACnB,iBAAiB;QACjB,oBAAoB;QACpB,oBAAoB;IACtB;IAEA,MAAM,aAAa,gBAAgB,CAAC,UAAU,IAAI;IAElD,IAAI,CAAC,YAAY;QACf,OAAO;YAAE,YAAY;YAAM,UAAU;YAAI,aAAa;QAAK;IAC7D;IAEA,sBAAsB;IACtB,MAAM,cAAc,sBAAsB,YAAY;IAEtD,OAAO;QAAE;QAAY,UAAU;QAAI;IAAY;AACjD;AASO,SAAS,mBACd,QAAgB,EAChB,SAAqC;IAErC,0DAA0D;IAC1D,MAAM,aAAa,WAAW,cAAc,EAAE;IAE9C,kCAAkC;IAClC,MAAM,aAAa,iBAAiB;IAEpC,IAAI,WAAW,WAAW,EAAE;QAC1B,mDAAmD;QACnD,OAAO;eAAI,WAAW,KAAK,CAAC,GAAG,CAAC;YAAI,WAAW,WAAW;SAAC;IAC7D;IAEA,6BAA6B;IAC7B,OAAO;AACT;AAYO,SAAS,yBACd,UAAsB,EACtB,QAAgB,EAChB,aAAqB;IAErB,MAAM,cAAc,sBAAsB,YAAY;IACtD,OAAO;QAAC;QAAe,eAAe;KAAS;AACjD;AAYO,SAAS,uBACd,UAAsB,EACtB,QAAmC,EACnC,aAAqB;IAErB,IAAI,CAAC,UAAU;QACb,OAAO;YAAC;YAAe;SAAW;IACpC;IAEA,MAAM,cAAc,sBAAsB,YAAY;IACtD,OAAO;QAAC;QAAe,eAAe;KAAY;AACpD;AAcO,SAAS,cACd,UAAsB,EACtB,QAAmC,EACnC,aAAqB;IAErB,IAAI,CAAC,UAAU;QACb,OAAO;YAAC;YAAe;SAAW;IACpC;IAEA,OAAO,yBAAyB,YAAY,UAAU;AACxD;AAKO,SAAS,qBAAqB,UAAsB;IACzD,IAAI;QACF,MAAM,SAAS,IAAA,sIAAe,EAAC;QAC/B,OAAO;YACL,aAAa,OAAO,WAAW;YAC/B,QAAQ,OAAO,MAAM;YACrB,UAAU,OAAO,QAAQ;QAC3B;IACF,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,SAAS;IACd,gBAAgB,CAAC;AACnB;AAKO,SAAS;IACd,OAAO,OAAO,IAAI,CAAC;AACrB"}},
    {"offset": {"line": 3814, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/repositories/in-memory-repository.ts"],"sourcesContent":["import type { SystemId } from '../lib/id-types';\r\nimport type { CrudState, ItemWithSystemId } from '../lib/store-factory';\r\nimport type { CrudRepository } from './types';\r\n\r\n/**\r\n * Adapter mặc định dùng trực tiếp Zustand store để giả lập tầng persistence.\r\n * Giữ cùng signature với repository interface để sau này thay bằng API/DB dễ dàng.\r\n */\r\nexport const createInMemoryRepository = <TEntity extends ItemWithSystemId>(\r\n  stateGetter: () => CrudState<TEntity>\r\n): CrudRepository<TEntity, Omit<TEntity, 'systemId'>, Partial<TEntity>> => {\r\n  const getStore = () => stateGetter();\r\n\r\n  const ensureEntity = (systemId: SystemId): TEntity => {\r\n    const entity = getStore().findById(systemId);\r\n    if (!entity) {\r\n      throw new Error(`Không tìm thấy entity với systemId=${systemId}`);\r\n    }\r\n    return entity;\r\n  };\r\n\r\n  return {\r\n    async list() {\r\n      return [...getStore().data];\r\n    },\r\n    async getById(systemId) {\r\n      return getStore().findById(systemId);\r\n    },\r\n    async create(payload) {\r\n      return getStore().add(payload as Omit<TEntity, 'systemId'>);\r\n    },\r\n    async update(systemId, payload) {\r\n      ensureEntity(systemId);\r\n      getStore().update(systemId, payload);\r\n      return ensureEntity(systemId);\r\n    },\r\n    async softDelete(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().remove(systemId);\r\n    },\r\n    async restore(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().restore(systemId);\r\n      return getStore().findById(systemId);\r\n    },\r\n    async hardDelete(systemId) {\r\n      ensureEntity(systemId);\r\n      getStore().hardDelete(systemId);\r\n    },\r\n  };\r\n};\r\n"],"names":[],"mappings":";;;;AAQO,MAAM,2BAA2B,CACtC;IAEA,MAAM,WAAW,IAAM;IAEvB,MAAM,eAAe,CAAC;QACpB,MAAM,SAAS,WAAW,QAAQ,CAAC;QACnC,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,MAAM,CAAC,mCAAmC,EAAE,UAAU;QAClE;QACA,OAAO;IACT;IAEA,OAAO;QACL,MAAM;YACJ,OAAO;mBAAI,WAAW,IAAI;aAAC;QAC7B;QACA,MAAM,SAAQ,QAAQ;YACpB,OAAO,WAAW,QAAQ,CAAC;QAC7B;QACA,MAAM,QAAO,OAAO;YAClB,OAAO,WAAW,GAAG,CAAC;QACxB;QACA,MAAM,QAAO,QAAQ,EAAE,OAAO;YAC5B,aAAa;YACb,WAAW,MAAM,CAAC,UAAU;YAC5B,OAAO,aAAa;QACtB;QACA,MAAM,YAAW,QAAQ;YACvB,aAAa;YACb,WAAW,MAAM,CAAC;QACpB;QACA,MAAM,SAAQ,QAAQ;YACpB,aAAa;YACb,WAAW,OAAO,CAAC;YACnB,OAAO,WAAW,QAAQ,CAAC;QAC7B;QACA,MAAM,YAAW,QAAQ;YACvB,aAAa;YACb,WAAW,UAAU,CAAC;QACxB;IACF;AACF"}},
    {"offset": {"line": 3863, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/activity-history-helper.ts"],"sourcesContent":["/**\r\n * Activity History Helper\r\n * \r\n * Helper để tạo các entry lịch sử hoạt động một cách nhất quán\r\n * Dùng chung cho tất cả các modules trong hệ thống\r\n * \r\n * NOTE: Đã remove import useEmployeeStore để tránh circular dependency\r\n * và cải thiện compile time\r\n */\r\n\r\nimport type { HistoryEntry } from '../components/ActivityHistory';\r\nimport { getCurrentUserInfo as getAuthUserInfo } from '../contexts/auth-context';\r\nimport type { SystemId } from './id-types';\r\n\r\n// Re-export HistoryEntry type for convenience\r\nexport type { HistoryEntry } from '../components/ActivityHistory';\r\n\r\n/**\r\n * Lấy thông tin người dùng hiện tại từ auth context\r\n * NOTE: Avatar lookup từ employee store đã bị remove để tránh circular dependency\r\n */\r\nexport function getCurrentUserInfo(): { systemId: string; name: string; avatar?: string } {\r\n  const authInfo = getAuthUserInfo();\r\n  \r\n  return {\r\n    systemId: authInfo.systemId || 'SYSTEM',\r\n    name: authInfo.name || 'Hệ thống',\r\n    avatar: undefined, // Avatar will be fetched by component if needed\r\n  };\r\n}\r\n\r\n/**\r\n * Lấy thông tin nhân viên từ systemId\r\n * NOTE: This function now requires employee data to be passed in\r\n * to avoid circular dependency with employee store\r\n */\r\nexport function getEmployeeInfoFromData(\r\n  employeeSystemId: SystemId | string,\r\n  employees: Array<{ systemId: string; fullName: string; avatarUrl?: string }>\r\n): { systemId: string; name: string; avatar?: string } {\r\n  const employee = employees.find(e => e.systemId === employeeSystemId);\r\n  \r\n  if (employee) {\r\n    return {\r\n      systemId: employee.systemId,\r\n      name: employee.fullName,\r\n      avatar: employee.avatarUrl,\r\n    };\r\n  }\r\n  \r\n  // Fallback to system\r\n  return {\r\n    systemId: String(employeeSystemId) || 'SYSTEM',\r\n    name: 'Hệ thống',\r\n  };\r\n}\r\n\r\n/**\r\n * @deprecated Use getEmployeeInfoFromData instead\r\n */\r\nexport function getEmployeeInfo(employeeSystemId: SystemId | string): { systemId: string; name: string; avatar?: string } {\r\n  // Return minimal info without employee store lookup\r\n  return {\r\n    systemId: String(employeeSystemId) || 'SYSTEM',\r\n    name: 'Hệ thống',\r\n  };\r\n}\r\n\r\n/**\r\n * Tạo một history entry mới\r\n */\r\nexport function createHistoryEntry(\r\n  action: HistoryEntry['action'],\r\n  userOrDescription: { systemId: string; name: string; avatar?: string } | string,\r\n  descriptionOrMetadata?: string | HistoryEntry['metadata'],\r\n  metadata?: HistoryEntry['metadata']\r\n): HistoryEntry {\r\n  const hasUserObject = typeof userOrDescription === 'object' && userOrDescription !== null;\r\n  const user = hasUserObject ? userOrDescription : getCurrentUserInfo();\r\n  const description = (hasUserObject ? descriptionOrMetadata : userOrDescription) as string | undefined;\r\n  const meta = (hasUserObject ? metadata : descriptionOrMetadata) as HistoryEntry['metadata'] | undefined;\r\n\r\n  return {\r\n    id: `history-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n    action,\r\n    timestamp: new Date(),\r\n    user: {\r\n      systemId: user.systemId,\r\n      name: user.name,\r\n      avatar: user.avatar,\r\n    },\r\n    description: description ?? '',\r\n    metadata: meta,\r\n  };\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"created\"\r\n */\r\nexport function createCreatedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('created', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"updated\"\r\n */\r\nexport function createUpdatedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('updated', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"status_changed\"\r\n */\r\nexport function createStatusChangedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  oldStatus: string,\r\n  newStatus: string,\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry(\r\n    'status_changed',\r\n    user,\r\n    description,\r\n    { field: 'status', oldValue: oldStatus, newValue: newStatus }\r\n  );\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"deleted\"\r\n */\r\nexport function createDeletedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('deleted', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"assigned\"\r\n */\r\nexport function createAssignedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('assigned', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"payment_made\"\r\n */\r\nexport function createPaymentEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('payment_made', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"comment_added\"\r\n */\r\nexport function createCommentEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('comment_added', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"cancelled\"\r\n */\r\nexport function createCancelledEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('cancelled', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"verified\"\r\n */\r\nexport function createVerifiedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('verified', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"ended\"\r\n */\r\nexport function createEndedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('ended', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho action \"reopened\"\r\n */\r\nexport function createReopenedEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry('reopened', user, description);\r\n}\r\n\r\n/**\r\n * Tạo history entry cho product actions\r\n */\r\nexport function createProductEntry(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  action: 'product_added' | 'product_updated' | 'product_removed',\r\n  description: string\r\n): HistoryEntry {\r\n  return createHistoryEntry(action, user, description);\r\n}\r\n\r\n/**\r\n * Helper để append history entry vào existing array\r\n */\r\nexport function appendHistoryEntry(\r\n  existingHistory: HistoryEntry[] | undefined,\r\n  ...newEntries: HistoryEntry[]\r\n): HistoryEntry[] {\r\n  return [...(existingHistory || []), ...newEntries];\r\n}\r\n\r\n/**\r\n * Helper để tạo nhiều history entries cùng lúc\r\n */\r\nexport function createBulkUpdateEntries(\r\n  user: { systemId: string; name: string; avatar?: string },\r\n  changes: Array<{ field: string; description: string }>\r\n): HistoryEntry[] {\r\n  return changes.map(change => createHistoryEntry('updated', user, change.description));\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4012, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/employees/store.ts"],"sourcesContent":["import { createCrudStore, CrudState } from '../../lib/store-factory';\r\n// REMOVED: import { data as initialData } from './data'; // Mock data no longer used - database is source of truth\r\nimport type { Employee } from './types';\r\nimport type { HistoryEntry } from '../../components/ActivityHistory';\r\nimport Fuse from 'fuse.js';\r\nimport { getCurrentUserSystemId } from '../../contexts/auth-context';\r\nimport { registerBreadcrumbStore } from '../../lib/breadcrumb-generator'; // ✅ NEW\r\nimport { type SystemId } from '../../lib/id-types';\r\nimport { createInMemoryRepository } from '../../repositories/in-memory-repository';\r\nimport { \r\n  createHistoryEntry, \r\n  getCurrentUserInfo,\r\n  appendHistoryEntry \r\n} from '../../lib/activity-history-helper';\r\n\r\ntype EmployeePersistenceAdapter = {\r\n  create: (payload: Omit<Employee, 'systemId'>) => Promise<Employee>;\r\n  update: (systemId: SystemId, payload: Partial<Employee>) => Promise<Employee>;\r\n  softDelete: (systemId: SystemId) => Promise<void>;\r\n  restore: (systemId: SystemId) => Promise<Employee | undefined>;\r\n  hardDelete: (systemId: SystemId) => Promise<void>;\r\n};\r\n\r\nconst baseStore = createCrudStore<Employee>([], 'employees', {\r\n  businessIdField: 'id',\r\n  getCurrentUser: getCurrentUserSystemId, // ✅ Track who creates/updates\r\n  apiEndpoint: '/api/employees',\r\n});\r\n\r\n// ✅ Wrap add method to include activity history\r\nconst originalAdd = baseStore.getState().add;\r\nconst wrappedAdd = (item: Omit<Employee, 'systemId'>): Employee => {\r\n  const userInfo = getCurrentUserInfo();\r\n  const historyEntry = createHistoryEntry(\r\n    'created',\r\n    `${userInfo.name} đã tạo hồ sơ nhân viên ${item.fullName} (${item.id})`,\r\n    userInfo\r\n  );\r\n  \r\n  const newEmployee = originalAdd({\r\n    ...item,\r\n    activityHistory: [historyEntry],\r\n  });\r\n  \r\n  return newEmployee;\r\n};\r\n\r\n// ✅ Wrap update method to include activity history\r\nconst originalUpdate = baseStore.getState().update;\r\nconst wrappedUpdate = (systemId: SystemId, updates: Partial<Employee>): void => {\r\n  const currentEmployee = baseStore.getState().data.find(e => e.systemId === systemId);\r\n  if (!currentEmployee) return;\r\n  \r\n  const userInfo = getCurrentUserInfo();\r\n  const historyEntries: HistoryEntry[] = [];\r\n  \r\n  // Track important field changes\r\n  const trackedFields: { key: keyof Employee; label: string }[] = [\r\n    { key: 'fullName', label: 'họ tên' },\r\n    { key: 'jobTitle', label: 'chức danh' },\r\n    { key: 'department', label: 'phòng ban' },\r\n    { key: 'employmentStatus', label: 'trạng thái làm việc' },\r\n    { key: 'employeeType', label: 'loại nhân viên' },\r\n    { key: 'baseSalary', label: 'lương cơ bản' },\r\n    { key: 'phone', label: 'số điện thoại' },\r\n    { key: 'workEmail', label: 'email công việc' },\r\n    { key: 'role', label: 'vai trò' },\r\n  ];\r\n  \r\n  trackedFields.forEach(({ key, label }) => {\r\n    if (updates[key] !== undefined && updates[key] !== currentEmployee[key]) {\r\n      const oldValue = currentEmployee[key];\r\n      const newValue = updates[key];\r\n      \r\n      // Format values for display\r\n      let oldDisplay = oldValue;\r\n      let newDisplay = newValue;\r\n      \r\n      if (key === 'baseSalary') {\r\n        oldDisplay = new Intl.NumberFormat('vi-VN').format(oldValue as number) + 'đ';\r\n        newDisplay = new Intl.NumberFormat('vi-VN').format(newValue as number) + 'đ';\r\n      }\r\n      \r\n      historyEntries.push(createHistoryEntry(\r\n        'updated',\r\n        `${userInfo.name} đã cập nhật ${label}: \"${oldDisplay || '(trống)'}\" → \"${newDisplay}\"`,\r\n        userInfo,\r\n        { field: key, oldValue, newValue }\r\n      ));\r\n    }\r\n  });\r\n  \r\n  // If status changed specifically\r\n  if (updates.employmentStatus && updates.employmentStatus !== currentEmployee.employmentStatus) {\r\n    historyEntries.push(createHistoryEntry(\r\n      'status_changed',\r\n      `${userInfo.name} đã thay đổi trạng thái làm việc từ \"${currentEmployee.employmentStatus}\" thành \"${updates.employmentStatus}\"`,\r\n      userInfo,\r\n      { field: 'employmentStatus', oldValue: currentEmployee.employmentStatus, newValue: updates.employmentStatus }\r\n    ));\r\n  }\r\n  \r\n  // If no specific changes tracked, add generic update entry\r\n  if (historyEntries.length === 0) {\r\n    historyEntries.push(createHistoryEntry(\r\n      'updated',\r\n      `${userInfo.name} đã cập nhật thông tin nhân viên`,\r\n      userInfo\r\n    ));\r\n  }\r\n  \r\n  const updatedHistory = appendHistoryEntry(currentEmployee.activityHistory, ...historyEntries);\r\n  \r\n  originalUpdate(systemId, {\r\n    ...updates,\r\n    activityHistory: updatedHistory,\r\n  });\r\n};\r\n\r\n// ✅ Override base store methods\r\nbaseStore.setState({\r\n  add: wrappedAdd,\r\n  update: wrappedUpdate,\r\n});\r\n\r\nexport const employeeRepository = createInMemoryRepository<Employee>(() => baseStore.getState());\r\n\r\n// ✅ API-backed persistence adapter - syncs to PostgreSQL\r\nconst API_ENDPOINT = '/api/employees';\r\n\r\nconst persistence: EmployeePersistenceAdapter = {\r\n  create: async (payload) => {\r\n    // First create locally for immediate UI update\r\n    const localResult = await employeeRepository.create(payload);\r\n    \r\n    // Then sync to API (background)\r\n    try {\r\n      const response = await fetch(API_ENDPOINT, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ ...payload, systemId: localResult.systemId }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Create sync failed, data saved locally');\r\n      } else {\r\n        console.log('[Employee API] Created:', localResult.systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Create sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  update: async (systemId, payload) => {\r\n    // First update locally\r\n    const localResult = await employeeRepository.update(systemId, payload);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'PATCH',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Update sync failed');\r\n      } else {\r\n        console.log('[Employee API] Updated:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Update sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  softDelete: async (systemId) => {\r\n    // First delete locally\r\n    await employeeRepository.softDelete(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ hard: false }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Soft delete sync failed');\r\n      } else {\r\n        console.log('[Employee API] Soft deleted:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Soft delete sync error:', e);\r\n    }\r\n  },\r\n  restore: async (systemId) => {\r\n    // First restore locally\r\n    const localResult = await employeeRepository.restore(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}/restore`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Restore sync failed');\r\n      } else {\r\n        console.log('[Employee API] Restored:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Restore sync error:', e);\r\n    }\r\n    \r\n    return localResult;\r\n  },\r\n  hardDelete: async (systemId) => {\r\n    // First delete locally\r\n    await employeeRepository.hardDelete(systemId);\r\n    \r\n    // Then sync to API\r\n    try {\r\n      const response = await fetch(`${API_ENDPOINT}/${systemId}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ hard: true }),\r\n      });\r\n      if (!response.ok) {\r\n        console.warn('[Employee API] Hard delete sync failed');\r\n      } else {\r\n        console.log('[Employee API] Hard deleted:', systemId);\r\n      }\r\n    } catch (e) {\r\n      console.warn('[Employee API] Hard delete sync error:', e);\r\n    }\r\n  },\r\n};\r\n\r\n// ✅ Register for breadcrumb auto-generation\r\nregisterBreadcrumbStore('employees', () => baseStore.getState());\r\n\r\n// Define enhanced interface\r\ninterface EmployeeStoreState extends CrudState<Employee> {\r\n  searchEmployees: (query: string, page: number, limit?: number) => Promise<{ items: { value: string; label: string }[], hasNextPage: boolean }>;\r\n  permanentDelete: (systemId: SystemId) => Promise<void>;\r\n  persistence: EmployeePersistenceAdapter;\r\n}\r\n\r\ntype EmployeeStoreHook = (() => EmployeeStoreState) & {\r\n  getState: () => EmployeeStoreState;\r\n  persistence: EmployeePersistenceAdapter;\r\n};\r\n\r\n// Augmented methods\r\nconst augmentedMethods = {\r\n    // FIX: Changed `page: number = 1` to `page: number` to make it a required parameter, matching Combobox prop type.\r\n    // ✅ CRITICAL FIX: Create fresh Fuse instance on each search to avoid stale data\r\n    searchEmployees: async (query: string, page: number, limit: number = 20) => {\r\n        return new Promise<{ items: { value: string; label: string }[], hasNextPage: boolean }>(resolve => {\r\n            setTimeout(() => {\r\n                const allEmployees = baseStore.getState().data;\r\n                \r\n                // ✅ Create fresh Fuse instance with current data\r\n                const fuse = new Fuse(allEmployees, {\r\n                    keys: ['fullName', 'id', 'phone', 'personalEmail', 'workEmail'],\r\n                    threshold: 0.3,\r\n                });\r\n                \r\n                const results = query ? fuse.search(query).map(r => r.item) : allEmployees;\r\n                \r\n                const start = (page - 1) * limit;\r\n                const end = start + limit;\r\n                const paginatedItems = results.slice(start, end);\r\n\r\n                resolve({\r\n                    items: paginatedItems.map(e => ({ value: e.systemId, label: e.fullName })),\r\n                    hasNextPage: end < results.length,\r\n                });\r\n            }, 300);\r\n        });\r\n    },\r\n    permanentDelete: async (systemId: SystemId) => {\r\n        await persistence.hardDelete(systemId);\r\n    }\r\n};\r\n\r\nconst useEmployeeStoreHook = (): EmployeeStoreState => {\r\n  const state = baseStore();\r\n  return {\r\n    ...state,\r\n    ...augmentedMethods, // This includes permanentDelete\r\n    persistence,\r\n  };\r\n};\r\n\r\nexport const useEmployeeStore = useEmployeeStoreHook as EmployeeStoreHook;\r\n\r\n// Export getState for non-hook usage\r\nuseEmployeeStore.getState = (): EmployeeStoreState => {\r\n  const state = baseStore.getState();\r\n  return {\r\n    ...state,\r\n    ...augmentedMethods,\r\n    persistence,\r\n  };\r\n};\r\n\r\nuseEmployeeStore.persistence = persistence;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4321, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/employees/employee-roles-page.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { useSettingsPageHeader } from '../use-settings-page-header';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../../../components/ui/card';\r\nimport { Button } from '../../../components/ui/button';\r\nimport { Input } from '../../../components/ui/input';\r\nimport { Label } from '../../../components/ui/label';\r\nimport { Badge } from '../../../components/ui/badge';\r\nimport { Checkbox } from '../../../components/ui/checkbox';\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '../../../components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '../../../components/ui/alert-dialog';\r\nimport { Separator } from '../../../components/ui/separator';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../../../components/ui/select';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '../../../components/ui/table';\r\nimport { TabsContent } from '../../../components/ui/tabs';\r\nimport { SettingsVerticalTabs } from '../../../components/settings/SettingsVerticalTabs';\r\nimport { SettingsActionButton } from '../../../components/settings/SettingsActionButton';\r\nimport { toast } from 'sonner';\r\nimport { Shield, Plus, Edit, Trash2, Save, RotateCcw, Copy, Users, Search, UserCog, Key, RefreshCw, Eye, EyeOff, Clipboard, MoreHorizontal } from 'lucide-react';\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from '../../../components/ui/dropdown-menu';\r\nimport { PERMISSION_GROUPS, PERMISSION_LABELS, type Permission } from '../../employees/permissions';\r\nimport { useRoleStore, type CustomRole } from './role-store';\r\nimport { useEmployeeStore } from '../../employees/store';\r\nimport type { Employee } from '../../employees/types';\r\nimport type { EmployeeRole } from '../../employees/roles';\r\n\r\nexport function EmployeeRolesPage() {\r\n  const { roles, addRole, updateRole, deleteRole, resetRole } = useRoleStore();\r\n  const { data: employees, update: updateEmployee } = useEmployeeStore();\r\n  \r\n  const [activeTab, setActiveTab] = React.useState('roles');\r\n  const [selectedRole, setSelectedRole] = React.useState<CustomRole | null>(null);\r\n  const [editingPermissions, setEditingPermissions] = React.useState<Permission[]>([]);\r\n  const [showPermissionsDialog, setShowPermissionsDialog] = React.useState(false);\r\n  const [showAddDialog, setShowAddDialog] = React.useState(false);\r\n  const [showEditDialog, setShowEditDialog] = React.useState(false);\r\n  const [showDeleteDialog, setShowDeleteDialog] = React.useState(false);\r\n  const [roleToDelete, setRoleToDelete] = React.useState<CustomRole | null>(null);\r\n  const [roleForm, setRoleForm] = React.useState({ name: '', description: '' });\r\n  \r\n  // Tab 2: Gán vai trò\r\n  const [searchTerm, setSearchTerm] = React.useState('');\r\n  const [roleFilter, setRoleFilter] = React.useState<string>('all');\r\n  \r\n  // Password management\r\n  const [showPasswordDialog, setShowPasswordDialog] = React.useState(false);\r\n  const [showResetDialog, setShowResetDialog] = React.useState(false);\r\n  const [selectedEmployee, setSelectedEmployee] = React.useState<Employee | null>(null);\r\n  const [newPassword, setNewPassword] = React.useState('');\r\n  const [confirmPassword, setConfirmPassword] = React.useState('');\r\n  const [showPassword, setShowPassword] = React.useState(false);\r\n  const [generatedPassword, setGeneratedPassword] = React.useState('');\r\n\r\n  const tabs = React.useMemo(() => [\r\n    { value: 'roles', label: 'Danh sách vai trò' },\r\n    { value: 'assign', label: 'Gán vai trò' },\r\n  ], []);\r\n\r\n  // Page header actions\r\n  const headerActions = React.useMemo(() => {\r\n    if (activeTab === 'roles') {\r\n      return [\r\n        <SettingsActionButton\r\n          key=\"add\"\r\n          onClick={() => {\r\n            setRoleForm({ name: '', description: '' });\r\n            setShowAddDialog(true);\r\n          }}\r\n        >\r\n          <Plus className=\"mr-2 h-4 w-4\" />\r\n          Thêm vai trò\r\n        </SettingsActionButton>\r\n      ];\r\n    }\r\n    return [];\r\n  }, [activeTab]);\r\n\r\n  useSettingsPageHeader({\r\n    title: 'Phân quyền & Tài khoản',\r\n    subtitle: 'Quản lý vai trò và gán quyền cho nhân viên',\r\n    actions: headerActions,\r\n    breadcrumb: [\r\n      { label: 'Trang chủ', href: '/', isCurrent: false },\r\n      { label: 'Cài đặt', href: '/settings', isCurrent: false },\r\n      { label: 'Phân quyền & Tài khoản', href: '', isCurrent: true }\r\n    ]\r\n  });\r\n\r\n  // Filter employees for Tab 2\r\n  const filteredEmployees = React.useMemo(() => {\r\n    return employees.filter(emp => {\r\n      const matchSearch = !searchTerm || \r\n        emp.fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        emp.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        emp.workEmail?.toLowerCase().includes(searchTerm.toLowerCase());\r\n      \r\n      const matchRole = roleFilter === 'all' || emp.role === roleFilter;\r\n      \r\n      return matchSearch && matchRole;\r\n    });\r\n  }, [employees, searchTerm, roleFilter]);\r\n\r\n  // Count employees by role\r\n  const employeeCountByRole = React.useMemo(() => {\r\n    const counts: Record<string, number> = {};\r\n    employees.forEach(emp => {\r\n      counts[emp.role] = (counts[emp.role] || 0) + 1;\r\n    });\r\n    return counts;\r\n  }, [employees]);\r\n\r\n  const handleEditRole = (role: CustomRole) => {\r\n    setSelectedRole(role);\r\n    setEditingPermissions([...role.permissions]);\r\n    setShowPermissionsDialog(true);\r\n  };\r\n\r\n  const handleEditRoleInfo = (role: CustomRole) => {\r\n    setSelectedRole(role);\r\n    setRoleForm({ name: role.name, description: role.description });\r\n    setShowEditDialog(true);\r\n  };\r\n\r\n  const handleDuplicateRole = (role: CustomRole) => {\r\n    addRole(`${role.name} (Copy)`, role.description);\r\n    toast.success(`Đã sao chép vai trò \"${role.name}\"`);\r\n  };\r\n\r\n  const handleDeleteClick = (role: CustomRole) => {\r\n    // Check if any employee is using this role\r\n    const count = employeeCountByRole[role.id] || 0;\r\n    if (count > 0) {\r\n      toast.error(`Không thể xóa vai trò đang được sử dụng bởi ${count} nhân viên`);\r\n      return;\r\n    }\r\n    setRoleToDelete(role);\r\n    setShowDeleteDialog(true);\r\n  };\r\n\r\n  const handleConfirmDelete = () => {\r\n    if (roleToDelete) {\r\n      deleteRole(roleToDelete.id);\r\n      setShowDeleteDialog(false);\r\n      setRoleToDelete(null);\r\n      toast.success('Đã xóa vai trò');\r\n    }\r\n  };\r\n\r\n  const handleAddRole = () => {\r\n    if (!roleForm.name.trim()) {\r\n      toast.error('Vui lòng nhập tên vai trò');\r\n      return;\r\n    }\r\n    addRole(roleForm.name.trim(), roleForm.description.trim());\r\n    setShowAddDialog(false);\r\n    setRoleForm({ name: '', description: '' });\r\n    toast.success('Đã thêm vai trò mới');\r\n  };\r\n\r\n  const handleUpdateRoleInfo = () => {\r\n    if (!selectedRole || !roleForm.name.trim()) {\r\n      toast.error('Vui lòng nhập tên vai trò');\r\n      return;\r\n    }\r\n    updateRole(selectedRole.id, {\r\n      name: roleForm.name.trim(),\r\n      description: roleForm.description.trim(),\r\n    });\r\n    setShowEditDialog(false);\r\n    setSelectedRole(null);\r\n    toast.success('Đã cập nhật thông tin vai trò');\r\n  };\r\n\r\n  const handleTogglePermission = (permission: Permission) => {\r\n    setEditingPermissions(prev => {\r\n      if (prev.includes(permission)) {\r\n        return prev.filter(p => p !== permission);\r\n      } else {\r\n        return [...prev, permission];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleToggleGroup = (groupPermissions: Permission[]) => {\r\n    const allSelected = groupPermissions.every(p => editingPermissions.includes(p));\r\n    \r\n    if (allSelected) {\r\n      setEditingPermissions(prev => prev.filter(p => !groupPermissions.includes(p)));\r\n    } else {\r\n      setEditingPermissions(prev => {\r\n        const newPerms = new Set([...prev, ...groupPermissions]);\r\n        return Array.from(newPerms);\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSavePermissions = () => {\r\n    if (!selectedRole) return;\r\n    updateRole(selectedRole.id, { permissions: editingPermissions });\r\n    setShowPermissionsDialog(false);\r\n    setSelectedRole(null);\r\n    toast.success('Đã lưu cấu hình phân quyền');\r\n  };\r\n\r\n  const handleResetRole = (roleId: string) => {\r\n    resetRole(roleId);\r\n    toast.success('Đã khôi phục quyền mặc định');\r\n  };\r\n\r\n  const handleChangeEmployeeRole = (employee: Employee, newRole: string) => {\r\n    updateEmployee(employee.systemId, { ...employee, role: newRole as EmployeeRole });\r\n    toast.success(`Đã cập nhật vai trò cho ${employee.fullName}`);\r\n  };\r\n\r\n  // Password management handlers\r\n  const generatePassword = (length: number = 12): string => {\r\n    const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    const lowercase = 'abcdefghijklmnopqrstuvwxyz';\r\n    const numbers = '0123456789';\r\n    const special = '!@#$%^&*';\r\n    const all = uppercase + lowercase + numbers + special;\r\n    \r\n    let password = '';\r\n    password += uppercase[Math.floor(Math.random() * uppercase.length)];\r\n    password += lowercase[Math.floor(Math.random() * lowercase.length)];\r\n    password += numbers[Math.floor(Math.random() * numbers.length)];\r\n    password += special[Math.floor(Math.random() * special.length)];\r\n    \r\n    for (let i = 4; i < length; i++) {\r\n      password += all[Math.floor(Math.random() * all.length)];\r\n    }\r\n    \r\n    return password.split('').sort(() => Math.random() - 0.5).join('');\r\n  };\r\n\r\n  const handleOpenPasswordDialog = (employee: Employee) => {\r\n    setSelectedEmployee(employee);\r\n    setNewPassword('');\r\n    setConfirmPassword('');\r\n    setShowPassword(false);\r\n    setShowPasswordDialog(true);\r\n  };\r\n\r\n  const handleOpenResetDialog = (employee: Employee) => {\r\n    setSelectedEmployee(employee);\r\n    const pwd = generatePassword(12);\r\n    setGeneratedPassword(pwd);\r\n    setShowResetDialog(true);\r\n  };\r\n\r\n  const handleSavePassword = () => {\r\n    if (!selectedEmployee) return;\r\n    \r\n    if (!newPassword) {\r\n      toast.error('Vui lòng nhập mật khẩu');\r\n      return;\r\n    }\r\n    if (newPassword.length < 6) {\r\n      toast.error('Mật khẩu phải có ít nhất 6 ký tự');\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      toast.error('Mật khẩu xác nhận không khớp');\r\n      return;\r\n    }\r\n    \r\n    updateEmployee(selectedEmployee.systemId, { ...selectedEmployee, password: newPassword });\r\n    setShowPasswordDialog(false);\r\n    setSelectedEmployee(null);\r\n    toast.success(`Đã đặt mật khẩu cho ${selectedEmployee.fullName}`);\r\n  };\r\n\r\n  const handleConfirmReset = () => {\r\n    if (!selectedEmployee) return;\r\n    \r\n    updateEmployee(selectedEmployee.systemId, { ...selectedEmployee, password: generatedPassword });\r\n    setShowResetDialog(false);\r\n    setSelectedEmployee(null);\r\n    toast.success(`Đã reset mật khẩu cho ${selectedEmployee.fullName}`);\r\n  };\r\n\r\n  const handleCopyPassword = async (password: string) => {\r\n    try {\r\n      await navigator.clipboard.writeText(password);\r\n      toast.success('Đã sao chép mật khẩu');\r\n    } catch {\r\n      toast.error('Không thể sao chép');\r\n    }\r\n  };\r\n\r\n  const handleGeneratePassword = () => {\r\n    const pwd = generatePassword(12);\r\n    setNewPassword(pwd);\r\n    setConfirmPassword(pwd);\r\n    setShowPassword(true);\r\n  };\r\n\r\n  const getRoleBadgeVariant = (roleId: string) => {\r\n    switch (roleId) {\r\n      case 'Admin': return 'destructive' as const;\r\n      case 'Manager': return 'default' as const;\r\n      case 'Sales': return 'secondary' as const;\r\n      case 'Warehouse': return 'outline' as const;\r\n      default: return 'secondary' as const;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SettingsVerticalTabs value={activeTab} onValueChange={setActiveTab} tabs={tabs}>\r\n        {/* Tab 1: Danh sách vai trò */}\r\n        <TabsContent value=\"roles\" className=\"mt-0\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Danh sách vai trò</CardTitle>\r\n              <CardDescription>Quản lý các vai trò và quyền hạn trong hệ thống</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"border rounded-md\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead className=\"w-[200px]\">Tên vai trò</TableHead>\r\n                      <TableHead className=\"w-[250px]\">Mô tả</TableHead>\r\n                      <TableHead className=\"w-[100px] text-center\">Số quyền</TableHead>\r\n                      <TableHead className=\"w-[120px] text-center\">Nhân viên</TableHead>\r\n                      <TableHead className=\"w-[100px] text-center\">Loại</TableHead>\r\n                      <TableHead className=\"w-[180px] text-right\">Thao tác</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {roles.map((role) => (\r\n                      <TableRow key={role.id}>\r\n                        <TableCell>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Shield className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <span className=\"font-medium\">{role.name}</span>\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {role.description}\r\n                        </TableCell>\r\n                        <TableCell className=\"text-center\">\r\n                          <Badge variant=\"outline\">{role.permissions.length}</Badge>\r\n                        </TableCell>\r\n                        <TableCell className=\"text-center\">\r\n                          <Badge variant=\"secondary\">\r\n                            <Users className=\"h-3 w-3 mr-1\" />\r\n                            {employeeCountByRole[role.id] || 0}\r\n                          </Badge>\r\n                        </TableCell>\r\n                        <TableCell className=\"text-center\">\r\n                          {role.isDefault ? (\r\n                            <Badge variant=\"outline\" className=\"text-xs\">Mặc định</Badge>\r\n                          ) : (\r\n                            <Badge variant=\"secondary\" className=\"text-xs\">Tùy chỉnh</Badge>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell className=\"text-right\">\r\n                          <div className=\"flex items-center justify-end gap-1\">\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"icon\"\r\n                              className=\"h-8 w-8\"\r\n                              onClick={() => handleEditRoleInfo(role)}\r\n                              title=\"Sửa thông tin\"\r\n                            >\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"icon\"\r\n                              className=\"h-8 w-8\"\r\n                              onClick={() => handleDuplicateRole(role)}\r\n                              title=\"Sao chép\"\r\n                            >\r\n                              <Copy className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"icon\"\r\n                              className=\"h-8 w-8 text-primary\"\r\n                              onClick={() => handleEditRole(role)}\r\n                              title=\"Phân quyền\"\r\n                            >\r\n                              <Shield className=\"h-4 w-4\" />\r\n                            </Button>\r\n                            {role.isDefault ? (\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-8 w-8 text-muted-foreground hover:text-foreground\"\r\n                                onClick={() => handleResetRole(role.id)}\r\n                                title=\"Khôi phục mặc định\"\r\n                              >\r\n                                <RotateCcw className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            ) : (\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\r\n                                onClick={() => handleDeleteClick(role)}\r\n                                title=\"Xóa vai trò\"\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            )}\r\n                          </div>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                    {roles.length === 0 && (\r\n                      <TableRow>\r\n                        <TableCell colSpan={6} className=\"text-center text-muted-foreground py-8\">\r\n                          Chưa có vai trò nào. Thêm vai trò mới để bắt đầu.\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Info Card */}\r\n          <Card className=\"bg-muted/50 mt-6\">\r\n            <CardContent className=\"pt-6\">\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-sm font-medium\">\r\n                  Hướng dẫn phân quyền:\r\n                </p>\r\n                <ul className=\"text-sm text-muted-foreground space-y-1 list-disc list-inside\">\r\n                  <li><strong>Thêm vai trò mới:</strong> Click nút \"Thêm vai trò\" ở góc trên</li>\r\n                  <li><strong>Chỉnh sửa thông tin:</strong> Click icon bút chì để sửa tên và mô tả</li>\r\n                  <li><strong>Phân quyền:</strong> Click icon khiên để cấu hình quyền truy cập</li>\r\n                  <li><strong>Khôi phục:</strong> Vai trò mặc định có thể reset về quyền ban đầu</li>\r\n                  <li><strong>Xóa vai trò:</strong> Chỉ xóa được vai trò tùy chỉnh không có nhân viên nào</li>\r\n                </ul>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {/* Tab 2: Gán vai trò */}\r\n        <TabsContent value=\"assign\" className=\"mt-0\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Gán vai trò cho nhân viên</CardTitle>\r\n              <CardDescription>Quản lý vai trò của từng nhân viên trong hệ thống</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {/* Filters */}\r\n              <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                <div className=\"relative flex-1\">\r\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                  <Input\r\n                    placeholder=\"Tìm kiếm theo tên, mã NV, email...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className=\"pl-9\"\r\n                  />\r\n                </div>\r\n                <Select value={roleFilter} onValueChange={setRoleFilter}>\r\n                  <SelectTrigger className=\"w-full sm:w-[200px]\">\r\n                    <SelectValue placeholder=\"Lọc theo vai trò\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">Tất cả vai trò</SelectItem>\r\n                    {roles.map((role) => (\r\n                      <SelectItem key={role.id} value={role.id}>\r\n                        {role.name} ({employeeCountByRole[role.id] || 0})\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Employee Table */}\r\n              <div className=\"border rounded-md\">\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead className=\"w-[80px]\">Mã NV</TableHead>\r\n                      <TableHead>Họ và tên</TableHead>\r\n                      <TableHead className=\"w-[200px]\">Email</TableHead>\r\n                      <TableHead className=\"w-[150px]\">Phòng ban</TableHead>\r\n                      <TableHead className=\"w-[180px]\">Vai trò</TableHead>\r\n                      <TableHead className=\"w-[100px] text-right\">Thao tác</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    {filteredEmployees.map((employee) => (\r\n                      <TableRow key={employee.systemId}>\r\n                        <TableCell className=\"font-medium\">{employee.id}</TableCell>\r\n                        <TableCell>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <UserCog className=\"h-4 w-4 text-muted-foreground\" />\r\n                            {employee.fullName}\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {employee.workEmail || '—'}\r\n                        </TableCell>\r\n                        <TableCell className=\"text-muted-foreground\">\r\n                          {employee.departmentId || '—'}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Select\r\n                            value={employee.role}\r\n                            onValueChange={(value) => handleChangeEmployeeRole(employee, value)}\r\n                          >\r\n                            <SelectTrigger className=\"h-8\">\r\n                              <SelectValue>\r\n                                <Badge variant={getRoleBadgeVariant(employee.role)}>\r\n                                  {roles.find(r => r.id === employee.role)?.name || employee.role}\r\n                                </Badge>\r\n                              </SelectValue>\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                              {roles.map((role) => (\r\n                                <SelectItem key={role.id} value={role.id}>\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <Badge variant={getRoleBadgeVariant(role.id)} className=\"text-xs\">\r\n                                      {role.name}\r\n                                    </Badge>\r\n                                    <span className=\"text-xs text-muted-foreground\">\r\n                                      {role.description}\r\n                                    </span>\r\n                                  </div>\r\n                                </SelectItem>\r\n                              ))}\r\n                            </SelectContent>\r\n                          </Select>\r\n                        </TableCell>\r\n                        <TableCell className=\"text-right\">\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\">\r\n                              <DropdownMenuItem onClick={() => handleOpenPasswordDialog(employee)}>\r\n                                <Key className=\"h-4 w-4 mr-2\" />\r\n                                Đặt mật khẩu\r\n                              </DropdownMenuItem>\r\n                              <DropdownMenuItem onClick={() => handleOpenResetDialog(employee)}>\r\n                                <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n                                Reset mật khẩu\r\n                              </DropdownMenuItem>\r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                    {filteredEmployees.length === 0 && (\r\n                      <TableRow>\r\n                        <TableCell colSpan={6} className=\"text-center text-muted-foreground py-8\">\r\n                          {searchTerm || roleFilter !== 'all' \r\n                            ? 'Không tìm thấy nhân viên phù hợp'\r\n                            : 'Chưa có nhân viên nào trong hệ thống'}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </div>\r\n\r\n              {/* Summary */}\r\n              <div className=\"flex flex-wrap gap-2 pt-2\">\r\n                {roles.map((role) => (\r\n                  <Badge key={role.id} variant=\"outline\" className=\"text-xs\">\r\n                    {role.name}: {employeeCountByRole[role.id] || 0} nhân viên\r\n                  </Badge>\r\n                ))}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </SettingsVerticalTabs>\r\n\r\n      {/* Add Role Dialog */}\r\n      <Dialog open={showAddDialog} onOpenChange={setShowAddDialog}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <Plus className=\"h-5 w-5\" />\r\n              Thêm vai trò mới\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              Tạo vai trò mới và cấu hình quyền truy cập\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"role-name\">Tên vai trò</Label>\r\n              <Input\r\n                id=\"role-name\"\r\n                placeholder=\"Nhập tên vai trò...\"\r\n                value={roleForm.name}\r\n                onChange={(e) => setRoleForm(prev => ({ ...prev, name: e.target.value }))}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"role-desc\">Mô tả</Label>\r\n              <Input\r\n                id=\"role-desc\"\r\n                placeholder=\"Nhập mô tả vai trò...\"\r\n                value={roleForm.description}\r\n                onChange={(e) => setRoleForm(prev => ({ ...prev, description: e.target.value }))}\r\n              />\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setShowAddDialog(false)}>\r\n              Hủy\r\n            </Button>\r\n            <Button onClick={handleAddRole}>\r\n              <Plus className=\"h-4 w-4 mr-2\" />\r\n              Thêm\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Edit Role Info Dialog */}\r\n      <Dialog open={showEditDialog} onOpenChange={setShowEditDialog}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <Edit className=\"h-5 w-5\" />\r\n              Chỉnh sửa vai trò\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              Cập nhật thông tin vai trò\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"edit-role-name\">Tên vai trò</Label>\r\n              <Input\r\n                id=\"edit-role-name\"\r\n                placeholder=\"Nhập tên vai trò...\"\r\n                value={roleForm.name}\r\n                onChange={(e) => setRoleForm(prev => ({ ...prev, name: e.target.value }))}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"edit-role-desc\">Mô tả</Label>\r\n              <Input\r\n                id=\"edit-role-desc\"\r\n                placeholder=\"Nhập mô tả vai trò...\"\r\n                value={roleForm.description}\r\n                onChange={(e) => setRoleForm(prev => ({ ...prev, description: e.target.value }))}\r\n              />\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setShowEditDialog(false)}>\r\n              Hủy\r\n            </Button>\r\n            <Button onClick={handleUpdateRoleInfo}>\r\n              <Save className=\"h-4 w-4 mr-2\" />\r\n              Lưu\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Xác nhận xóa vai trò</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Bạn có chắc muốn xóa vai trò \"{roleToDelete?.name}\"? Hành động này không thể hoàn tác.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Hủy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleConfirmDelete} className=\"bg-red-600 hover:bg-red-700\">\r\n              Xóa\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Permissions Dialog */}\r\n      <Dialog open={showPermissionsDialog} onOpenChange={setShowPermissionsDialog}>\r\n        <DialogContent className=\"max-w-3xl max-h-[80vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <Shield className=\"h-5 w-5\" />\r\n              Phân quyền cho {selectedRole?.name}\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              Chọn các quyền mà vai trò này được phép thực hiện\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"space-y-6 py-4\">\r\n            {Object.entries(PERMISSION_GROUPS).map(([groupKey, group]) => {\r\n              const groupPerms = group.permissions;\r\n              const selectedCount = groupPerms.filter(p => editingPermissions.includes(p)).length;\r\n              const allSelected = selectedCount === groupPerms.length;\r\n\r\n              return (\r\n                <div key={groupKey} className=\"space-y-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Checkbox\r\n                      checked={allSelected}\r\n                      onCheckedChange={() => handleToggleGroup(groupPerms)}\r\n                    />\r\n                    <Label className=\"text-base font-semibold cursor-pointer\" onClick={() => handleToggleGroup(groupPerms)}>\r\n                      {group.label} ({selectedCount}/{groupPerms.length})\r\n                    </Label>\r\n                  </div>\r\n                  <div className=\"ml-6 grid grid-cols-2 gap-3\">\r\n                    {groupPerms.map((permission) => (\r\n                      <div key={permission} className=\"flex items-center gap-2\">\r\n                        <Checkbox\r\n                          id={permission}\r\n                          checked={editingPermissions.includes(permission)}\r\n                          onCheckedChange={() => handleTogglePermission(permission)}\r\n                        />\r\n                        <Label\r\n                          htmlFor={permission}\r\n                          className=\"text-sm cursor-pointer\"\r\n                        >\r\n                          {PERMISSION_LABELS[permission]}\r\n                        </Label>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <Separator />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setShowPermissionsDialog(false);\r\n                setSelectedRole(null);\r\n              }}\r\n            >\r\n              Hủy\r\n            </Button>\r\n            <Button onClick={handleSavePermissions}>\r\n              <Save className=\"h-4 w-4 mr-2\" />\r\n              Lưu thay đổi\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Set Password Dialog */}\r\n      <Dialog open={showPasswordDialog} onOpenChange={setShowPasswordDialog}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2\">\r\n              <Key className=\"h-5 w-5\" />\r\n              Đặt mật khẩu\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              Đặt mật khẩu đăng nhập cho {selectedEmployee?.fullName}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"new-password\">Mật khẩu mới</Label>\r\n              <div className=\"relative\">\r\n                <Input\r\n                  id=\"new-password\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  placeholder=\"Nhập mật khẩu mới...\"\r\n                  value={newPassword}\r\n                  onChange={(e) => setNewPassword(e.target.value)}\r\n                  className=\"pr-20\"\r\n                />\r\n                <div className=\"absolute right-1 top-1/2 -translate-y-1/2 flex gap-1\">\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-7 w-7\"\r\n                    onClick={() => handleCopyPassword(newPassword)}\r\n                    disabled={!newPassword}\r\n                    title=\"Sao chép\"\r\n                  >\r\n                    <Clipboard className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-7 w-7\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    title={showPassword ? 'Ẩn mật khẩu' : 'Hiện mật khẩu'}\r\n                  >\r\n                    {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"confirm-password\">Xác nhận mật khẩu</Label>\r\n              <Input\r\n                id=\"confirm-password\"\r\n                type={showPassword ? 'text' : 'password'}\r\n                placeholder=\"Nhập lại mật khẩu...\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n              />\r\n            </div>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={handleGeneratePassword}\r\n              className=\"w-full\"\r\n            >\r\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n              Tạo mật khẩu ngẫu nhiên\r\n            </Button>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setShowPasswordDialog(false)}>\r\n              Hủy\r\n            </Button>\r\n            <Button onClick={handleSavePassword}>\r\n              <Save className=\"h-4 w-4 mr-2\" />\r\n              Lưu\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Reset Password Dialog */}\r\n      <AlertDialog open={showResetDialog} onOpenChange={setShowResetDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle className=\"flex items-center gap-2\">\r\n              <RefreshCw className=\"h-5 w-5\" />\r\n              Reset mật khẩu\r\n            </AlertDialogTitle>\r\n            <AlertDialogDescription className=\"space-y-3\">\r\n              <span>Bạn có chắc muốn reset mật khẩu cho <strong>{selectedEmployee?.fullName}</strong>?</span>\r\n              <div className=\"bg-muted p-3 rounded-md space-y-2\">\r\n                <p className=\"text-sm font-medium text-foreground\">Mật khẩu mới:</p>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <code className=\"flex-1 bg-background px-3 py-2 rounded border text-sm font-mono\">\r\n                    {generatedPassword}\r\n                  </code>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"icon\"\r\n                    className=\"h-8 w-8\"\r\n                    onClick={() => setGeneratedPassword(generatePassword(12))}\r\n                    title=\"Tạo mật khẩu khác\"\r\n                  >\r\n                    <RefreshCw className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"icon\"\r\n                    className=\"h-8 w-8\"\r\n                    onClick={() => handleCopyPassword(generatedPassword)}\r\n                    title=\"Sao chép\"\r\n                  >\r\n                    <Clipboard className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Hãy sao chép và gửi mật khẩu này cho nhân viên\r\n                </p>\r\n              </div>\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Hủy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={handleConfirmReset}>\r\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n              Xác nhận reset\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6625, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/app/%28authenticated%29/settings/employee-roles/page.tsx"],"sourcesContent":["'use client';\r\nimport { EmployeeRolesPage } from '@/features/settings/employees/employee-roles-page';\r\nexport default EmployeeRolesPage;\r\n"],"names":[],"mappings":";;;;AACA;AADA;;uCAEe,oLAAiB"}}]
}