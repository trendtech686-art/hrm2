{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\ntype SwitchProps = Omit<\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>,\r\n  \"checked\" | \"defaultChecked\"\r\n> & {\r\n  checked?: boolean | undefined\r\n  defaultChecked?: boolean | undefined\r\n}\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  SwitchProps\r\n>(({ className, checked, defaultChecked, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    {...(checked !== undefined ? { checked } : {})}\r\n    {...(defaultChecked !== undefined ? { defaultChecked } : {})}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAeA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAO,EAAE,oBACnD,8OAAC,0KAAqB;QACpB,WAAW,IAAA,kHAAE,EACX,sXACA;QAED,GAAG,KAAK;QACR,GAAI,YAAY,YAAY;YAAE;QAAQ,IAAI,CAAC,CAAC;QAC5C,GAAI,mBAAmB,YAAY;YAAE;QAAe,IAAI,CAAC,CAAC;QAC3D,KAAK;kBAEL,cAAA,8OAAC,2KAAsB;YACrB,WAAW,IAAA,kHAAE,EACX;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,0KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-9 items-center justify-center rounded-md bg-muted p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium text-muted-foreground ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,uEACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,6ZACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border border-border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-h3 font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,0EACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Label } from \"./label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  if (!itemContext) {\r\n    throw new Error(\"useFormField should be used within <FormItem>\")\r\n  }\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ children, ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  const childElements = React.Children\r\n    .toArray(children)\r\n    .filter((child): child is React.ReactElement => React.isValidElement(child))\r\n\r\n  if (childElements.length === 0) {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.warn('FormControl c·∫ßn √≠t nh·∫•t m·ªôt ph·∫ßn t·ª≠ con h·ª£p l·ªá')\r\n    }\r\n    return null\r\n  }\r\n\r\n  if (childElements.length > 1 && process.env.NODE_ENV === 'development') {\r\n    console.warn('FormControl ch·ªâ h·ªó tr·ª£ m·ªôt ph·∫ßn t·ª≠ con. ƒêang d√πng ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n.')\r\n  }\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    >\r\n      {childElements[0]}\r\n    </Slot>\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/alert-dialog.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg transition-opacity duration-200 opacity-0 data-[state=open]:opacity-100 data-[state=closed]:opacity-0 sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;;;;;AAEA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,kHAAE,EACX,wIACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,yQACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/id-types.ts"],"sourcesContent":["/**\r\n * Type-safe ID System\r\n * \r\n * Prevents mixing systemId with business ID at compile time\r\n */\r\n\r\n// Branded types for type safety\r\nexport type SystemId = string & { readonly __brand: 'SystemId' };\r\nexport type BusinessId = string & { readonly __brand: 'BusinessId' };\r\n\r\n/**\r\n * Create a SystemId from a string\r\n * Use this when you know for sure it's a systemId\r\n */\r\nexport function asSystemId(id: string): SystemId {\r\n  return id as SystemId;\r\n}\r\n\r\n/**\r\n * Create a BusinessId from a string\r\n * Use this when you know for sure it's a business ID\r\n */\r\nexport function asBusinessId(id: string): BusinessId {\r\n  return id as BusinessId;\r\n}\r\n\r\n/**\r\n * Check if a string is a valid systemId format\r\n */\r\nexport function isSystemIdFormat(id: string): boolean {\r\n  // SystemId: 8 digits + prefix (e.g., NV00000001, VOUCHER00000123)\r\n  return /^[A-Z]+\\d{8}$/.test(id);\r\n}\r\n\r\n/**\r\n * Check if a string is a valid business ID format\r\n */\r\nexport function isBusinessIdFormat(id: string): boolean {\r\n  // Business ID: shorter, variable length (e.g., NV001, PT000001)\r\n  return /^[A-Z]+\\d{3,6}$/.test(id);\r\n}\r\n\r\n/**\r\n * Safely convert unknown ID to proper type\r\n */\r\nexport function parseId(id: string): { type: 'system' | 'business'; value: SystemId | BusinessId } {\r\n  if (isSystemIdFormat(id)) {\r\n    return { type: 'system', value: asSystemId(id) };\r\n  }\r\n  if (isBusinessIdFormat(id)) {\r\n    return { type: 'business', value: asBusinessId(id) };\r\n  }\r\n  throw new Error(`Invalid ID format: ${id}`);\r\n}\r\n\r\n/**\r\n * ID Pair - Always keep systemId and businessId together\r\n */\r\nexport interface IDPair {\r\n  systemId: SystemId;\r\n  businessId: BusinessId;\r\n}\r\n\r\n/**\r\n * Entity with dual IDs\r\n */\r\nexport interface DualIDEntity {\r\n  systemId: SystemId;\r\n  id: BusinessId;\r\n}\r\n\r\n/**\r\n * Store methods with type-safe IDs\r\n */\r\nexport interface TypeSafeStore<T extends DualIDEntity> {\r\n  /** Find by systemId (for queries, relationships) */\r\n  findBySystemId(systemId: SystemId): T | null;\r\n  \r\n  /** Find by business ID (for user input, display) */\r\n  findByBusinessId(businessId: BusinessId): T | null;\r\n  \r\n  /** Update by systemId (always use systemId for updates) */\r\n  updateBySystemId(systemId: SystemId, updates: Partial<T>): void;\r\n  \r\n  /** Delete by systemId (always use systemId for deletes) */\r\n  deleteBySystemId(systemId: SystemId): void;\r\n}\r\n\r\n/**\r\n * Route params with type-safe IDs\r\n */\r\nexport interface RouteParams {\r\n  systemId?: SystemId;\r\n  id?: BusinessId;\r\n}\r\n\r\n/**\r\n * Link builder - always uses systemId\r\n */\r\nexport function buildEntityLink(path: string, entity: DualIDEntity): string {\r\n  return path.replace(':systemId', entity.systemId);\r\n}\r\n\r\n/**\r\n * Display ID - always uses business ID\r\n */\r\nexport function getDisplayId(entity: DualIDEntity): string {\r\n  return entity.id;\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid SystemId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureSystemId(id: string, context?: string): SystemId {\r\n  if (!isSystemIdFormat(id)) {\r\n    console.warn(`[ensureSystemId] Invalid SystemId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asSystemId(id);\r\n}\r\n\r\n/**\r\n * Runtime guard: ensures a string is valid BusinessId format and casts it\r\n * Logs warning if format is invalid\r\n */\r\nexport function ensureBusinessId(id: string, context?: string): BusinessId {\r\n  if (!isBusinessIdFormat(id)) {\r\n    console.warn(`[ensureBusinessId] Invalid BusinessId format: \"${id}\"${context ? ` in ${context}` : ''}`);\r\n  }\r\n  return asBusinessId(id);\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC,GAED,gCAAgC;;;;;;;;;;;;;;;;;;;;;AAQzB,SAAS,WAAW,EAAU;IACnC,OAAO;AACT;AAMO,SAAS,aAAa,EAAU;IACrC,OAAO;AACT;AAKO,SAAS,iBAAiB,EAAU;IACzC,kEAAkE;IAClE,OAAO,gBAAgB,IAAI,CAAC;AAC9B;AAKO,SAAS,mBAAmB,EAAU;IAC3C,gEAAgE;IAChE,OAAO,kBAAkB,IAAI,CAAC;AAChC;AAKO,SAAS,QAAQ,EAAU;IAChC,IAAI,iBAAiB,KAAK;QACxB,OAAO;YAAE,MAAM;YAAU,OAAO,WAAW;QAAI;IACjD;IACA,IAAI,mBAAmB,KAAK;QAC1B,OAAO;YAAE,MAAM;YAAY,OAAO,aAAa;QAAI;IACrD;IACA,MAAM,IAAI,MAAM,CAAC,mBAAmB,EAAE,IAAI;AAC5C;AA8CO,SAAS,gBAAgB,IAAY,EAAE,MAAoB;IAChE,OAAO,KAAK,OAAO,CAAC,aAAa,OAAO,QAAQ;AAClD;AAKO,SAAS,aAAa,MAAoB;IAC/C,OAAO,OAAO,EAAE;AAClB;AAMO,SAAS,eAAe,EAAU,EAAE,OAAgB;IACzD,IAAI,CAAC,iBAAiB,KAAK;QACzB,QAAQ,IAAI,CAAC,CAAC,2CAA2C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACpG;IACA,OAAO,WAAW;AACpB;AAMO,SAAS,iBAAiB,EAAU,EAAE,OAAgB;IAC3D,IAAI,CAAC,mBAAmB,KAAK;QAC3B,QAAQ,IAAI,CAAC,CAAC,+CAA+C,EAAE,GAAG,CAAC,EAAE,UAAU,CAAC,IAAI,EAAE,SAAS,GAAG,IAAI;IACxG;IACA,OAAO,aAAa;AACtB"}},
    {"offset": {"line": 625, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/inventory/brand-store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { asSystemId, asBusinessId, type SystemId, type BusinessId } from '@/lib/id-types';\r\nimport type { Brand } from './types';\r\n\r\ninterface BrandState {\r\n  data: Brand[];\r\n  counter: number;\r\n  initialized: boolean;\r\n  add: (brand: Omit<Brand, 'systemId' | 'createdAt' | 'updatedAt'> & { id?: string }) => void;\r\n  update: (systemId: SystemId, brand: Partial<Brand>) => void;\r\n  remove: (systemId: SystemId) => void;\r\n  getActive: () => Brand[];\r\n  findById: (systemId: SystemId) => Brand | undefined;\r\n  findByBusinessId: (id: BusinessId) => Brand | undefined;\r\n  getNextId: () => BusinessId;\r\n  isBusinessIdExists: (id: string) => boolean;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\nconst generateSystemId = (currentCounter: number): SystemId => {\r\n  return asSystemId(`BRAND${String(currentCounter + 1).padStart(6, '0')}`);\r\n};\r\n\r\nconst generateBusinessId = (currentCounter: number): BusinessId => {\r\n  return asBusinessId(`TH${String(currentCounter + 1).padStart(6, '0')}`);\r\n};\r\n\r\n// API sync helper\r\nasync function syncBrandToAPI(brand: Brand, action: 'create' | 'update' | 'delete'): Promise<boolean> {\r\n  try {\r\n    const endpoint = action === 'create' ? '/api/brands' : `/api/brands/${brand.systemId}`;\r\n    const response = await fetch(endpoint, {\r\n      method: action === 'create' ? 'POST' : action === 'delete' ? 'DELETE' : 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(brand),\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('syncBrandToAPI error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport const useBrandStore = create<BrandState>()(\r\n  (set, get) => ({\r\n    data: [],\r\n    counter: 0,\r\n    initialized: false,\r\n      \r\n    add: (brand) => {\r\n        const currentCounter = get().counter;\r\n        const { id, ...rest } = brand;\r\n        const businessId = id && id.trim() \r\n          ? asBusinessId(id.trim())\r\n          : generateBusinessId(currentCounter);\r\n          \r\n        set((state) => ({\r\n          data: [\r\n            ...state.data,\r\n            {\r\n              ...rest,\r\n              systemId: generateSystemId(currentCounter),\r\n              id: businessId,\r\n              createdAt: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString(),\r\n              isActive: brand.isActive ?? true,\r\n              isDeleted: false,\r\n            },\r\n          ],\r\n          counter: state.counter + 1,\r\n        }));\r\n      },\r\n      \r\n      update: (systemId, brand) => set((state) => ({\r\n        data: state.data.map((item) =>\r\n          item.systemId === systemId\r\n            ? { ...item, ...brand, updatedAt: new Date().toISOString() }\r\n            : item\r\n        ),\r\n      })),\r\n      \r\n      remove: (systemId) => set((state) => ({\r\n        data: state.data.map((item) =>\r\n          item.systemId === systemId\r\n            ? { ...item, isDeleted: true, updatedAt: new Date().toISOString() }\r\n            : item\r\n        ),\r\n      })),\r\n      \r\n      getActive: () => get().data.filter((item) => !item.isDeleted && item.isActive),\r\n      \r\n      findById: (systemId) => get().data.find((item) => item.systemId === systemId),\r\n      \r\n      findByBusinessId: (id) => get().data.find((item) => item.id === id),\r\n      \r\n      getNextId: () => generateBusinessId(get().counter),\r\n      \r\n      isBusinessIdExists: (id: string) => get().data.some((item) => String(item.id) === id),\r\n\r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        try {\r\n          const response = await fetch('/api/brands?all=true');\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            if (json.data && Array.isArray(json.data)) {\r\n              const brands: Brand[] = json.data.map((item: Record<string, unknown>) => ({\r\n                ...item,\r\n                systemId: asSystemId(item.systemId as string),\r\n                id: asBusinessId(item.id as string),\r\n                // Add default values for fields not in database\r\n                isActive: item.isDeleted !== true,\r\n              }));\r\n              set({ \r\n                data: brands, \r\n                counter: brands.length,\r\n                initialized: true,\r\n              });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('loadFromAPI error:', error);\r\n        }\r\n        set({ initialized: true });\r\n      },\r\n    })\r\n);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 732, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/api-config.ts"],"sourcesContent":["/**\r\n * API Configuration Utilities\r\n * \r\n * Centralized configuration for API endpoints.\r\n * All API URLs should use these utilities instead of hardcoding.\r\n */\r\n\r\n/**\r\n * Get the API base URL from environment variables\r\n * Falls back to localhost:3001 for development\r\n */\r\nexport function getApiBaseUrl(): string {\r\n  // Use relative path to leverage Vite proxy in development\r\n  // This avoids CORS issues when frontend (5173) talks to backend (3001)\r\n  if ((import.meta as any).env?.DEV) {\r\n    return '/api';\r\n  }\r\n  return (import.meta as any).env?.VITE_API_BASE_URL || 'http://localhost:3001/api';\r\n}\r\n\r\n/**\r\n * Get the base URL without /api suffix\r\n * Falls back to localhost:3001 for development\r\n */\r\nexport function getBaseUrl(): string {\r\n  const apiUrl = getApiBaseUrl();\r\n  return apiUrl.replace('/api', '');\r\n}\r\n\r\n/**\r\n * Build a full file URL from a relative path\r\n * @param relativePath - Relative file path (e.g., \"/uploads/documents/file.pdf\")\r\n * @returns Full URL to the file\r\n */\r\nexport function getFileUrl(relativePath: string): string {\r\n  if (!relativePath) return '';\r\n  \r\n  // If already a full URL, return as is\r\n  if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {\r\n    return relativePath;\r\n  }\r\n  \r\n  // Build full URL\r\n  const baseUrl = getBaseUrl();\r\n  return `${baseUrl}${relativePath}`;\r\n}\r\n\r\n/**\r\n * Build an API endpoint URL\r\n * @param endpoint - API endpoint path (e.g., \"/employees/documents\")\r\n * @returns Full API URL\r\n */\r\nexport function getApiUrl(endpoint: string): string {\r\n  const apiBaseUrl = getApiBaseUrl();\r\n  return `${apiBaseUrl}${endpoint}`;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC,GAED;;;CAGC;;;;;;;;;;;;;;;AACM,SAAS;IACd,0DAA0D;IAC1D,uEAAuE;IACvE,IAAI,8BAAqB,GAAG,EAAE,KAAK;QACjC,OAAO;IACT;IACA,OAAO,8BAAqB,GAAG,EAAE,qBAAqB;AACxD;AAMO,SAAS;IACd,MAAM,SAAS;IACf,OAAO,OAAO,OAAO,CAAC,QAAQ;AAChC;AAOO,SAAS,WAAW,YAAoB;IAC7C,IAAI,CAAC,cAAc,OAAO;IAE1B,sCAAsC;IACtC,IAAI,aAAa,UAAU,CAAC,cAAc,aAAa,UAAU,CAAC,aAAa;QAC7E,OAAO;IACT;IAEA,iBAAiB;IACjB,MAAM,UAAU;IAChB,OAAO,GAAG,UAAU,cAAc;AACpC;AAOO,SAAS,UAAU,QAAgB;IACxC,MAAM,aAAa;IACnB,OAAO,GAAG,aAAa,UAAU;AACnC"}},
    {"offset": {"line": 785, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/file-upload-api.ts"],"sourcesContent":["// API client ƒë·ªÉ giao ti·∫øp v·ªõi server - Staging System\r\nimport { getApiBaseUrl } from './api-config';\r\n\r\nconst API_BASE_URL = getApiBaseUrl();\r\n\r\nexport type StagingFile = {\r\n  id: string;\r\n  sessionId: string;\r\n  name: string; // Display name (smart filename v·ªõi metadata)\r\n  originalName: string; // T√™n file g·ªëc\r\n  slug: string; // URL-safe slug\r\n  filename: string; // T√™n file h·ªá th·ªëng (UUID) - c·∫ßn cho preview URL\r\n  size: number;\r\n  type: string;\r\n  url: string;\r\n  status: 'staging' | 'permanent'; // ‚úÖ Support both staging and permanent files\r\n  uploadedAt: string;\r\n  metadata: string; // Smart filename metadata\r\n};\r\n\r\nexport type ServerFile = {\r\n  id: string;\r\n  employeeId: string;\r\n  documentType: string;\r\n  documentName: string;\r\n  name: string; // Display name\r\n  originalName: string; // T√™n file g·ªëc\r\n  slug: string; // URL-safe slug\r\n  filename: string; // T√™n file h·ªá th·ªëng\r\n  size: number;\r\n  type: string;\r\n  url: string;\r\n  uploadedAt: string;\r\n  confirmedAt?: string;\r\n  metadata: string; // Smart filename metadata\r\n};\r\n\r\nexport type UploadedAsset = {\r\n  id: string;\r\n  name: string;\r\n  size: number;\r\n  type: string;\r\n  url: string;\r\n  uploadedAt: string;\r\n};\r\n\r\nexport type UploadedFile = {\r\n  id: string;\r\n  name: string;\r\n  filename?: string;\r\n  type: string;\r\n  size: number;\r\n  url: string;\r\n  uploadedAt?: string;\r\n  metadata?: Record<string, unknown>;\r\n};\r\n\r\nexport class FileUploadAPI {\r\n  // Upload files v√†o staging (t·∫°m th·ªùi)\r\n  static async uploadToStaging(files: File[], sessionId?: string): Promise<{\r\n    files: StagingFile[];\r\n    sessionId: string;\r\n  }> {\r\n    const formData = new FormData();\r\n    \r\n    files.forEach(file => {\r\n      formData.append('files', file);\r\n    });\r\n\r\n    // CRITICAL FIX: sessionId in FormData doesn't work with multer\r\n    // Send via query params instead\r\n    const url = sessionId \r\n      ? `${API_BASE_URL}/staging/upload?sessionId=${encodeURIComponent(sessionId)}`\r\n      : `${API_BASE_URL}/staging/upload`;\r\n\r\n    console.log('üì§ Uploading to:', url);\r\n    console.log('üì¶ Files:', files.map(f => `${f.name} (${(f.size / 1024).toFixed(1)}KB)`));\r\n\r\n    let response;\r\n    try {\r\n      response = await fetch(url, {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n    } catch (fetchError) {\r\n      console.error('‚ùå Network fetch failed:', fetchError);\r\n      throw new Error(`Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server (${API_BASE_URL}). Vui l√≤ng ki·ªÉm tra server c√≥ ƒëang ch·∫°y.`);\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error('‚ùå Server error:', response.status, errorText);\r\n      throw new Error(`Server error (${response.status}): ${errorText}`);\r\n    }\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Staging upload failed');\r\n    }\r\n\r\n    return {\r\n      files: result.files,\r\n      sessionId: result.sessionId\r\n    };\r\n  }\r\n\r\n  // Confirm staging files ‚Üí permanent v·ªõi smart filename\r\n  // NOTE: entitySystemId MUST be immutable (systemId) to avoid broken references\r\n  static async confirmStagingFiles(\r\n    sessionId: string,\r\n    entitySystemId: string,\r\n    documentType: string,\r\n    documentName: string,\r\n    metadata?: Record<string, any>\r\n  ): Promise<ServerFile[]> {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/staging/confirm/${sessionId}/${entitySystemId}/${documentType}/${encodeURIComponent(documentName)}`,\r\n      { \r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ metadata })\r\n      }\r\n    );\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Confirm failed');\r\n    }\r\n\r\n    return result.files;\r\n  }\r\n\r\n  // L·∫•y staging files theo session\r\n  static async getStagingFiles(sessionId: string): Promise<StagingFile[]> {\r\n    const response = await fetch(`${API_BASE_URL}/staging/files/${sessionId}`);\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Failed to fetch staging files');\r\n    }\r\n\r\n    return result.files;\r\n  }\r\n\r\n  // X√≥a staging files (cancel)\r\n  static async deleteStagingFiles(sessionId: string): Promise<void> {\r\n    const response = await fetch(`${API_BASE_URL}/staging/${sessionId}`, {\r\n      method: 'DELETE',\r\n    });\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Delete staging failed');\r\n    }\r\n  }\r\n\r\n  // Upload files l√™n server (legacy - direct permanent)\r\n  // NOTE: employeeId MUST be the systemId (immutable), NOT the business ID\r\n  static async uploadFiles(\r\n    employeeId: string, // ‚ö†Ô∏è MUST use systemId (e.g., \"NV00000001\"), NOT business ID\r\n    documentType: string,\r\n    documentName: string,\r\n    files: File[]\r\n  ): Promise<ServerFile[]> {\r\n    const formData = new FormData();\r\n    \r\n    files.forEach(file => {\r\n      formData.append('files', file);\r\n    });\r\n\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/upload/${employeeId}/${documentType}/${encodeURIComponent(documentName)}`,\r\n      {\r\n        method: 'POST',\r\n        body: formData,\r\n      }\r\n    );\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Upload failed');\r\n    }\r\n\r\n    return result.files;\r\n  }\r\n\r\n  // L·∫•y danh s√°ch file permanent\r\n  // NOTE: employeeId MUST be the systemId (immutable), NOT the business ID\r\n  static async getFiles(\r\n    employeeId: string, // ‚ö†Ô∏è MUST use systemId (e.g., \"NV00000001\"), NOT business ID\r\n    documentType?: string\r\n  ): Promise<ServerFile[]> {\r\n    try {\r\n      const url = documentType \r\n        ? `${API_BASE_URL}/files/${employeeId}/${documentType}`\r\n        : `${API_BASE_URL}/files/${employeeId}`;\r\n\r\n      const response = await fetch(url);\r\n      \r\n      // Check if response is ok\r\n      if (!response.ok) {\r\n        return []; // Return empty array instead of throwing\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (!result.success) {\r\n        return []; // Return empty array instead of throwing\r\n      }\r\n\r\n      return result.files || [];\r\n    } catch (error) {\r\n      return []; // Return empty array on network error\r\n    }\r\n  }\r\n\r\n  // X√≥a file permanent\r\n  static async deleteFile(fileId: string): Promise<void> {\r\n    const response = await fetch(`${API_BASE_URL}/files/${fileId}`, {\r\n      method: 'DELETE',\r\n    });\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Delete failed');\r\n    }\r\n  }\r\n\r\n  // L·∫•y URL file ƒë·ªÉ hi·ªÉn th·ªã (bao g·ªìm staging v√† permanent)\r\n  static getFileUrl(file: StagingFile | ServerFile): string {\r\n    // ‚úÖ Return relative path to use Vite proxy - avoid CORS\r\n    // Server already returns relative path like /api/staging/files/...\r\n    return file.url;\r\n  }\r\n\r\n  // Th·ªëng k√™ storage (ch·ªâ permanent files)\r\n  static async getStorageInfo(): Promise<{\r\n    totalFiles: number;\r\n    totalSize: number;\r\n    totalSizeMB: number;\r\n  }> {\r\n    const response = await fetch(`${API_BASE_URL}/storage/info`);\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error('Failed to get storage info');\r\n    }\r\n\r\n    return result.stats;\r\n  }\r\n\r\n  // Helper: Generate session ID cho staging\r\n  static generateSessionId(): string {\r\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n  static async getProductFiles(productId: string): Promise<ServerFile[]> {\r\n    return this.getFiles(productId, 'products');\r\n  }\r\n\r\n  // Get customer files (images)\r\n  static async getCustomerFiles(customerId: string): Promise<ServerFile[]> {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/files/customers/${customerId}`);\r\n      \r\n      if (!response.ok) {\r\n        return [];\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (!result.success) {\r\n        return [];\r\n      }\r\n\r\n      return result.files || [];\r\n    } catch (error) {\r\n      console.error('Failed to get customer files:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Get customer contract files\r\n  static async getCustomerContractFiles(customerId: string): Promise<ServerFile[]> {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/files/customers/${customerId}/contracts`);\r\n      \r\n      if (!response.ok) {\r\n        return [];\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (!result.success) {\r\n        return [];\r\n      }\r\n\r\n      return result.files || [];\r\n    } catch (error) {\r\n      console.error('Failed to get customer contract files:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // Confirm customer contract files from staging to permanent\r\n  static async confirmCustomerContractFiles(\r\n    sessionId: string,\r\n    customerId: string,\r\n    customerData?: Record<string, any>\r\n  ): Promise<ServerFile[]> {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/staging/confirm/${sessionId}/customers/${customerId}/contracts`,\r\n      { \r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ customerData })\r\n      }\r\n    );\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Confirm customer contract files failed');\r\n    }\r\n\r\n    return result.files;\r\n  }\r\n\r\n  // Confirm customer images from staging to permanent\r\n  static async confirmCustomerImages(\r\n    sessionId: string,\r\n    customerId: string,\r\n    customerData?: {\r\n      name?: string;\r\n      [key: string]: any;\r\n    }\r\n  ): Promise<ServerFile[]> {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/staging/confirm/${sessionId}/customers/${customerId}`,\r\n      { \r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ customerData })\r\n      }\r\n    );\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Confirm customer images failed');\r\n    }\r\n\r\n    return result.files;\r\n  }\r\n\r\n  // Confirm warranty images from staging to permanent\r\n  static async confirmWarrantyImages(\r\n    sessionId: string,\r\n    warrantyId: string,\r\n    imageType: 'received' | 'processed',\r\n    warrantyData?: {\r\n      customerName?: string;\r\n      [key: string]: any;\r\n    }\r\n  ): Promise<ServerFile[]> {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/staging/confirm/${sessionId}/warranty/${warrantyId}/${imageType}`,\r\n      { \r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ warrantyData })\r\n      }\r\n    );\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Confirm warranty images failed');\r\n    }\r\n\r\n    return result.files;\r\n  }\r\n\r\n  // Delete staging session (cleanup on cancel)\r\n  static async deleteStagingSession(sessionId: string): Promise<void> {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/staging/${sessionId}`,\r\n      { method: 'DELETE' }\r\n    );\r\n\r\n    const result = await response.json();\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message || 'Delete staging session failed');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Upload ·∫£nh t·ª´ TipTap Editor v√†o STAGING\r\n   * ·∫¢nh s·∫Ω ƒë∆∞·ª£c move sang permanent khi entity ƒë∆∞·ª£c save\r\n   * \r\n   * @param file - File ·∫£nh c·∫ßn upload\r\n   * @param sessionId - Session ID ƒë·ªÉ group c√°c ·∫£nh c√πng editor\r\n   * @returns StagingFile v·ªõi URL t·∫°m th·ªùi\r\n   */\r\n  static async uploadEditorImageToStaging(file: File, sessionId?: string): Promise<{\r\n    file: StagingFile;\r\n    sessionId: string;\r\n  }> {\r\n    const result = await FileUploadAPI.uploadToStaging([file], sessionId);\r\n    return {\r\n      file: result.files[0],\r\n      sessionId: result.sessionId,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Confirm ·∫£nh editor t·ª´ staging sang permanent\r\n   * ƒê·ªìng th·ªùi replace staging URLs trong HTML content b·∫±ng permanent URLs\r\n   * \r\n   * @param sessionId - Editor staging session\r\n   * @param entityId - ID c·ªßa entity (category, product, etc.)\r\n   * @param entityType - Lo·∫°i entity ('categories', 'products', etc.)\r\n   * @param htmlContent - N·ªôi dung HTML c·∫ßn update URLs\r\n   * @returns Updated HTML v·ªõi permanent URLs\r\n   */\r\n  static async confirmEditorImages(\r\n    sessionId: string,\r\n    entityId: string,\r\n    entityType: string,\r\n    htmlContent: string\r\n  ): Promise<{ html: string; files: ServerFile[] }> {\r\n    // Confirm staging files\r\n    const confirmedFiles = await FileUploadAPI.confirmStagingFiles(\r\n      sessionId,\r\n      entityId,\r\n      entityType,\r\n      'editor-images',\r\n      { source: 'tiptap-editor' }\r\n    );\r\n\r\n    // Replace staging URLs with permanent URLs in HTML\r\n    let updatedHtml = htmlContent;\r\n    for (const file of confirmedFiles) {\r\n      // Staging URL pattern: /api/staging/preview/{sessionId}/{filename}\r\n      // Find and replace with permanent URL\r\n      const stagingPattern = new RegExp(\r\n        `/api/staging/preview/[^/]+/${file.filename.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}`,\r\n        'g'\r\n      );\r\n      updatedHtml = updatedHtml.replace(stagingPattern, file.url);\r\n    }\r\n\r\n    return {\r\n      html: updatedHtml,\r\n      files: confirmedFiles,\r\n    };\r\n  }\r\n\r\n  static async uploadCommentImage(file: File): Promise<UploadedAsset> {\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n\r\n    const response = await fetch(`${API_BASE_URL}/comments/upload-image`, {\r\n      method: 'POST',\r\n      body: formData,\r\n    });\r\n\r\n    const result = await response.json();\r\n    if (!response.ok || !result.success) {\r\n      throw new Error(result.message || 'Upload ·∫£nh b√¨nh lu·∫≠n th·∫•t b·∫°i');\r\n    }\r\n\r\n    return FileUploadAPI.mapDirectUpload(result.file, file.name);\r\n  }\r\n\r\n  static async uploadPrintTemplateImage(file: File): Promise<UploadedAsset> {\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n\r\n    const response = await fetch(`${API_BASE_URL}/print-templates/upload-image`, {\r\n      method: 'POST',\r\n      body: formData,\r\n    });\r\n\r\n    const result = await response.json();\r\n    if (!response.ok || !result.success) {\r\n      throw new Error(result.message || 'Upload ·∫£nh m·∫´u in th·∫•t b·∫°i');\r\n    }\r\n\r\n    return FileUploadAPI.mapDirectUpload(result.file, file.name);\r\n  }\r\n\r\n  static async uploadComplaintCommentImage(complaintId: string, file: File): Promise<UploadedAsset> {\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n\r\n    const response = await fetch(`${API_BASE_URL}/complaints/${complaintId}/comments/upload`, {\r\n      method: 'POST',\r\n      body: formData,\r\n    });\r\n\r\n    const result = await response.json();\r\n    if (!response.ok || !result.success) {\r\n      throw new Error(result.message || 'Upload ·∫£nh khi·∫øu n·∫°i th·∫•t b·∫°i');\r\n    }\r\n\r\n    return FileUploadAPI.mapDirectUpload(result.file, file.name);\r\n  }\r\n\r\n  static async uploadTaskEvidence(taskId: string, files: File[]): Promise<UploadedAsset[]> {\r\n    if (files.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const formData = new FormData();\r\n    files.forEach((file) => formData.append('files', file));\r\n\r\n    const response = await fetch(`${API_BASE_URL}/tasks/${taskId}/evidence`, {\r\n      method: 'POST',\r\n      body: formData,\r\n    });\r\n\r\n    const result = await response.json();\r\n    if (!response.ok || !result.success) {\r\n      throw new Error(result.message || 'Upload b·∫±ng ch·ª©ng c√¥ng vi·ªác th·∫•t b·∫°i');\r\n    }\r\n\r\n    return (result.files || []).map((file: any, index: number) =>\r\n      FileUploadAPI.mapDirectUpload(file, files[index]?.name || `evidence-${index}`)\r\n    );\r\n  }\r\n\r\n  private static mapDirectUpload(file: any, fallbackName: string): UploadedAsset {\r\n    return {\r\n      id: file.id,\r\n      name: file.originalName || file.name || fallbackName,\r\n      size: file.size || file.filesize || 0,\r\n      type: file.mimetype || file.type || 'application/octet-stream',\r\n      url: file.url,\r\n      uploadedAt: file.uploadedAt || new Date().toISOString(),\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1142, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/new-documents-upload.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { toast } from 'sonner';\r\nimport { Upload, X, Eye, AlertCircle, File } from 'lucide-react';\r\nimport { Button } from './button';\r\nimport { Card } from './card';\r\nimport { cn } from '../../lib/utils';\r\nimport { FileUploadAPI, type StagingFile } from '../../lib/file-upload-api';\r\nimport { getFileUrl, getBaseUrl } from '../../lib/api-config';\r\nimport { compressImageToWebP } from '../../lib/image-utils';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from './alert-dialog';\r\n\r\ntype NewDocumentsUploadProps = {\r\n  accept?: Record<string, string[]>;\r\n  maxSize?: number;\r\n  maxFiles?: number;\r\n  maxTotalSize?: number; // Total size limit for all files combined\r\n  existingFileCount?: number; // Count of permanent files (for maxFiles validation)\r\n  value?: StagingFile[];\r\n  onChange?: (files: StagingFile[]) => void;\r\n  sessionId?: string | undefined;\r\n  onSessionChange?: (sessionId: string) => void;\r\n  disabled?: boolean;\r\n  className?: string;\r\n  gridTemplateClass?: string; // Allow callers to override the grid layout for previews\r\n};\r\n\r\nconst formatFileSize = (bytes: number) => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\n// Image compression utility - Enhanced with WebP support\r\nconst compressImage = (file: File, quality: number = 0.75): Promise<File> => {\r\n  return new Promise((resolve) => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const img = document.createElement('img') as HTMLImageElement;\r\n\r\n    img.onload = () => {\r\n      // Reduced max dimensions for faster loading\r\n      const maxWidth = 1200;\r\n      const maxHeight = 1200;\r\n\r\n      let { width, height } = img;\r\n\r\n      if (width > maxWidth) {\r\n        height = (height * maxWidth) / width;\r\n        width = maxWidth;\r\n      }\r\n\r\n      if (height > maxHeight) {\r\n        width = (width * maxHeight) / height;\r\n        height = maxHeight;\r\n      }\r\n\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n\r\n      ctx?.drawImage(img, 0, 0, width, height);\r\n\r\n      // Try WebP first (better compression)\r\n      canvas.toBlob(\r\n        (blob) => {\r\n          if (blob) {\r\n            try {\r\n              // Convert to WebP with .webp extension\r\n              const fileName = file.name.replace(/\\.[^.]+$/, '.webp');\r\n              const compressedFile = new (window as any).File([blob], fileName, {\r\n                type: 'image/webp',\r\n                lastModified: Date.now(),\r\n              }) as File;\r\n              resolve(compressedFile);\r\n            } catch (error) {\r\n              console.warn('WebP creation failed, trying JPEG fallback:', error);\r\n              // Fallback to JPEG if WebP fails\r\n              canvas.toBlob(\r\n                (jpegBlob) => {\r\n                  if (jpegBlob) {\r\n                    try {\r\n                      const jpegFile = new (window as any).File([jpegBlob], file.name, {\r\n                        type: 'image/jpeg',\r\n                        lastModified: Date.now(),\r\n                      }) as File;\r\n                      resolve(jpegFile);\r\n                    } catch {\r\n                      resolve(file);\r\n                    }\r\n                  } else {\r\n                    resolve(file);\r\n                  }\r\n                },\r\n                'image/jpeg',\r\n                quality\r\n              );\r\n            }\r\n          } else {\r\n            resolve(file);\r\n          }\r\n        },\r\n        'image/webp',\r\n        quality\r\n      );\r\n    };\r\n\r\n    img.onerror = () => resolve(file);\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\nexport function NewDocumentsUpload({\r\n  accept = { \r\n    'image/*': ['.png', '.jpg', '.jpeg', '.webp', '.gif'], \r\n    'application/pdf': ['.pdf'],\r\n    'application/msword': ['.doc'],\r\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\r\n    'application/vnd.ms-excel': ['.xls'],\r\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'],\r\n  },\r\n  maxSize = 10 * 1024 * 1024,\r\n  maxFiles = 50,\r\n  maxTotalSize = 50 * 1024 * 1024, // 50MB total limit per document type\r\n  existingFileCount = 0, // Count of permanent files\r\n  value = [],\r\n  onChange,\r\n  sessionId,\r\n  onSessionChange,\r\n  disabled = false,\r\n  className,\r\n  gridTemplateClass = 'grid-cols-5',\r\n}: NewDocumentsUploadProps) {\r\n  const files = value; // Simple controlled component\r\n  const [isUploading, setIsUploading] = React.useState(false);\r\n  const [deleteAlertOpen, setDeleteAlertOpen] = React.useState(false);\r\n  const [fileToDelete, setFileToDelete] = React.useState<StagingFile | null>(null);\r\n  \r\n\r\n  \r\n  // Get session ID: t·ª´ prop ‚Üí t·ª´ existing files ‚Üí t·∫°o m·ªõi\r\n  const getInitialSessionId = () => {\r\n    if (sessionId) return sessionId;\r\n    if (files.length > 0 && files[0].sessionId) return files[0].sessionId;\r\n    return '';\r\n  };\r\n  \r\n  const [currentSessionId, setCurrentSessionId] = React.useState(getInitialSessionId);\r\n  \r\n  // Update currentSessionId when sessionId prop or files change\r\n  React.useEffect(() => {\r\n    const newSessionId = getInitialSessionId();\r\n    if (newSessionId && newSessionId !== currentSessionId) {\r\n      setCurrentSessionId(newSessionId);\r\n    }\r\n  }, [sessionId, files, currentSessionId]);\r\n\r\n  const onDrop = React.useCallback(async (acceptedFiles: File[], rejectedFiles: any[]) => {\r\n    // Handle rejected files first (format/size issues)\r\n    if (rejectedFiles.length > 0) {\r\n      rejectedFiles.forEach(rejection => {\r\n        const { file, errors } = rejection;\r\n        errors.forEach((error: any) => {\r\n          switch (error.code) {\r\n            case 'file-too-large':\r\n              toast.error(`File \"${file.name}\" qu√° l·ªõn`, {\r\n                description: `K√≠ch th∆∞·ªõc t·ªëi ƒëa: ${formatFileSize(maxSize)}`\r\n              });\r\n              break;\r\n            case 'file-invalid-type':\r\n              // Generate accept message from accept prop\r\n              const acceptedTypes = accept \r\n                ? Object.values(accept).flat().join(', ').toUpperCase()\r\n                : 'PDF, PNG, JPG';\r\n              toast.error(`File \"${file.name}\" kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng`, {\r\n                description: `Ch·ªâ ch·∫•p nh·∫≠n: ${acceptedTypes}`\r\n              });\r\n              break;\r\n            default:\r\n              toast.error(`L·ªói t·∫£i file \"${file.name}\"`, {\r\n                description: error.message || 'Vui l√≤ng th·ª≠ l·∫°i'\r\n              });\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    // Handle file count limit BEFORE processing accepted files\r\n    const currentFileCount = files.length + existingFileCount; // Total = staging + permanent\r\n    const remainingSlots = maxFiles - currentFileCount;\r\n    const totalFilesDropped = acceptedFiles.length;\r\n    \r\n    console.log('üìä File limit check:', {\r\n      staging: files.length,\r\n      existing: existingFileCount,\r\n      current: currentFileCount,\r\n      max: maxFiles,\r\n      remaining: remainingSlots,\r\n      dropped: totalFilesDropped\r\n    });\r\n    \r\n    if (currentFileCount >= maxFiles) {\r\n      toast.error(`üö´ ƒê√£ ƒë·∫°t gi·ªõi h·∫°n ${maxFiles} file`, {\r\n        description: `Kh√¥ng th·ªÉ th√™m file m·ªõi. Hi·ªán c√≥ ${existingFileCount} file vƒ©nh vi·ªÖn + ${files.length} file t·∫°m th·ªùi.`\r\n      });\r\n      return;\r\n    }\r\n    \r\n    if (totalFilesDropped > remainingSlots) {\r\n      const rejectedCount = totalFilesDropped - remainingSlots;\r\n      \r\n      toast.error(`‚ö†Ô∏è Kh√¥ng th·ªÉ th√™m ${totalFilesDropped} file`, {\r\n        description: `Ch·ªâ c√≥ th·ªÉ th√™m t·ªëi ƒëa ${remainingSlots} file n·ªØa (hi·ªán c√≥ ${currentFileCount}/${maxFiles}). ƒê√£ lo·∫°i b·ªè ${rejectedCount} file cu·ªëi.`\r\n      });\r\n      \r\n      // Only take the first files that fit\r\n      acceptedFiles = acceptedFiles.slice(0, remainingSlots);\r\n      \r\n      if (acceptedFiles.length > 0) {\r\n        toast.info(`üìÅ ƒê√£ ch·ªçn ${acceptedFiles.length} file ƒë·∫ßu ti√™n`, {\r\n          description: 'X√≥a file c≈© ƒë·ªÉ th√™m file m·ªõi'\r\n        });\r\n      }\r\n    }\r\n\r\n    if (acceptedFiles.length === 0) return;\r\n\r\n    // Check total size limit\r\n    const currentTotalSize = files.reduce((sum, file) => sum + file.size, 0);\r\n    const newFilesTotalSize = acceptedFiles.reduce((sum, file) => sum + file.size, 0);\r\n    const proposedTotalSize = currentTotalSize + newFilesTotalSize;\r\n\r\n    if (proposedTotalSize > maxTotalSize) {\r\n      const availableSize = maxTotalSize - currentTotalSize;\r\n      toast.error(`üìä V∆∞·ª£t qu√° gi·ªõi h·∫°n t·ªïng dung l∆∞·ª£ng`, {\r\n        description: `T·ªëi ƒëa ${formatFileSize(maxTotalSize)} cho lo·∫°i t√†i li·ªáu n√†y. C√≤n tr·ªëng: ${formatFileSize(availableSize)}`\r\n      });\r\n      \r\n      // Filter files that fit within size limit\r\n      let runningSize = 0;\r\n      const fittingFiles: File[] = [];\r\n      for (const file of acceptedFiles) {\r\n        if (runningSize + file.size <= availableSize) {\r\n          fittingFiles.push(file);\r\n          runningSize += file.size;\r\n        }\r\n      }\r\n      \r\n      if (fittingFiles.length === 0) {\r\n        return; // No files can fit\r\n      }\r\n      \r\n      acceptedFiles = fittingFiles;\r\n      toast.info(`üìÅ ƒê√£ ch·ªçn ${acceptedFiles.length} file ph√π h·ª£p`, {\r\n        description: `T·ªïng dung l∆∞·ª£ng: ${formatFileSize(runningSize)}`\r\n      });\r\n    }\r\n\r\n    if (acceptedFiles.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n\r\n    const uploadToastId = toast.loading(`ƒêang t·∫£i l√™n ${acceptedFiles.length} file...`, {\r\n      description: 'ƒêang n√©n v√† chuy·ªÉn ƒë·ªïi sang WebP...'\r\n    });\r\n\r\n    try {\r\n      const processedFiles = await Promise.all(\r\n        acceptedFiles.map(async (file) => {\r\n          // Compress images larger than 500KB (reduced threshold)\r\n          if (file.type.startsWith('image/') && file.size > 512 * 1024) {\r\n            try {\r\n              const compressed = await compressImage(file, 0.75);\r\n              console.log(`üì¶ Compressed: ${file.name} (${formatFileSize(file.size)} ‚Üí ${formatFileSize(compressed.size)})`);\r\n              return compressed;\r\n            } catch (error) {\r\n              console.warn('Compression failed:', error);\r\n              return file;\r\n            }\r\n          }\r\n          return file;\r\n        })\r\n      );\r\n\r\n      const result = await FileUploadAPI.uploadToStaging(processedFiles, currentSessionId);\r\n\r\n      if (!currentSessionId || currentSessionId !== result.sessionId) {\r\n        setCurrentSessionId(result.sessionId);\r\n        onSessionChange?.(result.sessionId);\r\n      }\r\n\r\n      // Wait a bit for server to finish writing all files\r\n      await new Promise(resolve => setTimeout(resolve, 300));\r\n\r\n      // Merge and notify parent immediately\r\n      const updatedFiles = [...files, ...result.files];\r\n      onChange?.(updatedFiles);\r\n\r\n      toast.success(`‚úì ƒê√£ t·∫£i l√™n ${result.files.length} file`, {\r\n        description: 'üîÑ File t·∫°m - S·∫Ω l∆∞u vƒ©nh vi·ªÖn khi b·∫°n b·∫•m L∆∞u',\r\n        id: uploadToastId\r\n      });\r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      toast.error('‚ùå L·ªói khi t·∫£i file', {\r\n        description: error instanceof Error ? error.message : 'Vui l√≤ng th·ª≠ l·∫°i',\r\n        id: uploadToastId\r\n      });\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  }, [files, maxFiles, maxSize, onChange, currentSessionId, onSessionChange]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive, isDragReject } = useDropzone({\r\n    onDrop,\r\n    accept,\r\n    maxSize,\r\n    // Remove maxFiles from dropzone - we'll handle it manually in onDrop\r\n    disabled: disabled || files.length >= maxFiles || isUploading,\r\n  });\r\n\r\n  const removeFile = React.useCallback(async (fileId: string) => {\r\n    const fileToRemove = files.find(f => f.id === fileId);\r\n    if (!fileToRemove) return;\r\n\r\n    setFileToDelete(fileToRemove);\r\n    setDeleteAlertOpen(true);\r\n  }, [files]);\r\n\r\n  const confirmDeleteFile = React.useCallback(async () => {\r\n    if (!fileToDelete) return;\r\n\r\n    const deleteToastId = toast.loading('ƒêang x√≥a file...');\r\n\r\n    try {\r\n      await FileUploadAPI.deleteFile(fileToDelete.id);\r\n\r\n      const updated = files.filter(f => f.id !== fileToDelete.id);\r\n      onChange?.(updated);\r\n\r\n      toast.success('‚úì ƒê√£ x√≥a file t·∫°m', {\r\n        description: fileToDelete.originalName || fileToDelete.name,\r\n        id: deleteToastId\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to delete:', error);\r\n      toast.error('‚ùå Kh√¥ng th·ªÉ x√≥a file', {\r\n        id: deleteToastId\r\n      });\r\n    } finally {\r\n      setDeleteAlertOpen(false);\r\n      setFileToDelete(null);\r\n    }\r\n  }, [fileToDelete, files, onChange]);\r\n\r\n  const getPreviewUrl = (file: StagingFile) => {\r\n    const baseUrl = getBaseUrl();\r\n    \r\n    console.log('üñºÔ∏è getPreviewUrl called:', {\r\n      fileName: file.name,\r\n      fileUrl: file.url,\r\n      sessionId: file.sessionId,\r\n      currentSessionId\r\n    });\r\n    \r\n    // Priority 1: Check if file has a URL (permanent or otherwise)\r\n    if (file.url) {\r\n      // Skip blob URLs - these are temporary local previews\r\n      if (file.url.startsWith('blob:')) {\r\n        console.log('  ‚Üí Case: blob URL, fall through');\r\n        // Fall through to staging URL construction\r\n      }\r\n      // Skip staging URLs - need to reconstruct with current session\r\n      else if (file.url.includes('/api/staging/')) {\r\n        console.log('  ‚Üí Case: /api/staging/ URL, fall through');\r\n        // Fall through to staging URL construction\r\n      }\r\n      // Absolute URL (http/https) - use as-is\r\n      else if (file.url.startsWith('http://') || file.url.startsWith('https://')) {\r\n        console.log('  ‚Üí Case: absolute URL, return as-is');\r\n        return file.url;\r\n      }\r\n      // Relative path - prepend baseUrl\r\n      else if (file.url.startsWith('/')) {\r\n        const result = `${baseUrl}${file.url}`;\r\n        console.log('  ‚Üí Case: relative path, result:', result);\r\n        return result;\r\n      }\r\n    }\r\n    \r\n    // Priority 2: Construct staging URL for newly uploaded files\r\n    // This requires a valid sessionId\r\n    const filename = file.filename || file.name || file.id;\r\n    const sessionId = file.sessionId || currentSessionId;\r\n\r\n    // If no sessionId and no valid URL, we can't preview\r\n    if (!sessionId) {\r\n      console.log('  ‚Üí Case: NO sessionId, return empty');\r\n      return ''; // Return empty - will show broken image\r\n    }\r\n    \r\n    const result = `${baseUrl}/api/staging/files/${sessionId}/${filename}`;\r\n    console.log('  ‚Üí Case: construct from sessionId, result:', result);\r\n    return result;\r\n  };\r\n\r\n  const handlePreview = (file: StagingFile) => {\r\n    const previewUrl = getPreviewUrl(file);\r\n\r\n    if (file.type === 'application/pdf') {\r\n      window.open(previewUrl, '_blank');\r\n      return;\r\n    }\r\n\r\n    const overlay = document.createElement('div');\r\n    overlay.style.cssText = `\r\n      position: fixed; top: 0; left: 0; right: 0; bottom: 0;\r\n      background: rgba(0, 0, 0, 0.9); display: flex;\r\n      align-items: center; justify-content: center;\r\n      z-index: 9999; cursor: pointer;\r\n    `;\r\n\r\n    const img = document.createElement('img');\r\n    img.src = previewUrl;\r\n    img.style.cssText = 'max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 8px;';\r\n\r\n    const closeBtn = document.createElement('button');\r\n    closeBtn.innerHTML = '√ó';\r\n    closeBtn.style.cssText = `\r\n      position: absolute; top: 20px; right: 20px; background: white;\r\n      border: none; border-radius: 50%; width: 40px; height: 40px;\r\n      font-size: 24px; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.3);\r\n    `;\r\n\r\n    overlay.appendChild(img);\r\n    overlay.appendChild(closeBtn);\r\n    document.body.appendChild(overlay);\r\n\r\n    overlay.addEventListener('click', () => document.body.removeChild(overlay));\r\n    img.addEventListener('click', (e) => e.stopPropagation());\r\n  };\r\n\r\n  return (\r\n    <div className={cn('space-y-4', className)}>\r\n      {files.length < maxFiles && (\r\n        <div\r\n          {...getRootProps()}\r\n          className={cn(\r\n            'relative border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-all duration-200',\r\n            'hover:border-primary hover:bg-primary/5 hover:scale-[1.01]',\r\n            isDragActive && 'border-primary bg-primary/10 scale-[1.01] shadow-lg',\r\n            isDragReject && 'border-destructive bg-destructive/10',\r\n            (disabled || isUploading) && 'opacity-50 cursor-not-allowed hover:scale-100',\r\n            files.length >= maxFiles && 'border-red-300 bg-red-50 cursor-not-allowed'\r\n          )}\r\n        >\r\n          <input {...getInputProps()} />\r\n\r\n          <div className=\"relative inline-block mb-2\">\r\n            <Upload className={cn(\r\n              \"h-8 w-8 text-muted-foreground transition-all\",\r\n              isUploading && \"animate-bounce text-primary\",\r\n              isDragActive && \"text-primary scale-110\"\r\n            )} />\r\n            {isUploading && (\r\n              <div className=\"absolute inset-0 animate-ping\">\r\n                <Upload className=\"h-8 w-8 text-primary opacity-30\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {isUploading ? (\r\n            <div className=\"space-y-1\">\r\n              <p className=\"text-xs font-medium text-primary\">ƒêang t·∫£i l√™n...</p>\r\n              <div className=\"h-1 w-32 mx-auto bg-muted rounded-full overflow-hidden\">\r\n                <div className=\"h-full bg-primary animate-pulse\" style={{width: '70%'}}></div>\r\n              </div>\r\n            </div>\r\n          ) : isDragActive ? (\r\n            <p className=\"text-sm font-medium text-primary\">Th·∫£ file v√†o ƒë√¢y</p>\r\n          ) : isDragReject ? (\r\n            <div className=\"space-y-1\">\r\n              <div className=\"flex items-center justify-center gap-1\">\r\n                <AlertCircle className=\"h-4 w-4 text-destructive\" />\r\n                <p className=\"text-xs font-medium text-destructive\">File kh√¥ng h·ª£p l·ªá</p>\r\n              </div>\r\n              <div className=\"text-[10px] text-destructive/80\">\r\n                <p>Ch·ªâ ch·∫•p nh·∫≠n: {accept ? Object.values(accept).flat().join(', ').toUpperCase() : 'PDF, PNG, JPG'} (max {formatFileSize(maxSize)})</p>\r\n              </div>\r\n            </div>\r\n          ) : files.length >= maxFiles ? (\r\n            <div className=\"space-y-1\">\r\n              <div className=\"flex items-center justify-center gap-1\">\r\n                <AlertCircle className=\"h-4 w-4 text-red-600\" />\r\n                <p className=\"text-sm font-medium text-red-700\">ƒê√£ ƒë·∫ßy</p>\r\n              </div>\r\n              <p className=\"text-xs text-red-600\">\r\n                ƒê√£ ƒë·∫°t {maxFiles} file. X√≥a file c≈© ƒë·ªÉ th√™m m·ªõi.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-1\">\r\n              <p className=\"text-sm font-semibold\">K√©o th·∫£ ho·∫∑c click ƒë·ªÉ ch·ªçn</p>\r\n              <p className=\"text-xs text-muted-foreground\">PDF, PNG, JPG (max {formatFileSize(maxSize)})</p>\r\n              <div className=\"flex items-center justify-center gap-1 pt-1\">\r\n                <div className={`px-2 py-0.5 rounded-full text-[10px] font-medium ${\r\n                  files.length >= maxFiles \r\n                    ? 'bg-red-100 text-red-700' \r\n                    : files.length >= maxFiles * 0.8 \r\n                      ? 'bg-amber-100 text-amber-700' \r\n                      : 'bg-green-100 text-green-700'\r\n                }`}>\r\n                  {files.length >= maxFiles \r\n                    ? 'ƒê·∫ßy' \r\n                    : files.length >= maxFiles * 0.8 \r\n                      ? 'G·∫ßn ƒë·∫ßy' \r\n                      : 'C√≤n ch·ªó'\r\n                  } {files.length}/{maxFiles}\r\n                </div>\r\n                {files.length > 0 && (\r\n                  <div className=\"px-2 py-0.5 bg-purple-50 text-purple-600 rounded-full text-[10px] font-medium\">\r\n                    {formatFileSize(files.reduce((sum, f) => sum + f.size, 0))}/{formatFileSize(maxTotalSize)}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {files.length >= maxFiles && (\r\n        <div className=\"text-center p-4 border border-dashed rounded-lg bg-red-50 border-red-200\">\r\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\r\n            <AlertCircle className=\"h-5 w-5 text-red-600\" />\r\n            <p className=\"text-sm text-red-700 font-medium\">\r\n              ƒê√£ ƒë·∫°t gi·ªõi h·∫°n {maxFiles} file\r\n            </p>\r\n          </div>\r\n          <p className=\"text-xs text-red-600\">\r\n            X√≥a file c≈© ƒë·ªÉ th√™m file m·ªõi ho·∫∑c li√™n h·ªá admin ƒë·ªÉ tƒÉng gi·ªõi h·∫°n\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {files.length > 0 && (\r\n        <div className={`grid ${gridTemplateClass} gap-2 mb-2`}>\r\n          {files.map((file, index) => {\r\n            const isImage = file.type && typeof file.type === 'string' && file.type.startsWith('image/');\r\n            const previewUrl = getPreviewUrl(file);\r\n            // Check if this is a permanent file (existing file with empty sessionId)\r\n            const isPermanent = !file.sessionId || file.sessionId === '';\r\n\r\n            const handleImageRetry = (event: React.SyntheticEvent<HTMLImageElement>) => {\r\n              const img = event.currentTarget;\r\n              const attempts = Number(img.dataset.retryCount || '0');\r\n              if (attempts >= 4) {\r\n                console.warn('Image preview failed after retries:', previewUrl);\r\n                return;\r\n              }\r\n              const nextAttempts = attempts + 1;\r\n              img.dataset.retryCount = String(nextAttempts);\r\n              const delay = nextAttempts * 400;\r\n              setTimeout(() => {\r\n                const separator = previewUrl.includes('?') ? '&' : '?';\r\n                img.src = `${previewUrl}${separator}retry=${Date.now()}-${nextAttempts}`;\r\n              }, delay);\r\n            };\r\n\r\n            return (\r\n              <Card key={file.id} className={`group p-1.5 transition-all duration-200 hover:shadow-md relative ${\r\n                isPermanent ? 'border-green-200 bg-green-50/50' : 'border-amber-200 bg-amber-50/50'\r\n              }`}>\r\n                <div className=\"space-y-1.5\">\r\n                  {isImage ? (\r\n                    <div className=\"aspect-square rounded overflow-hidden bg-muted relative\">\r\n                      <img\r\n                        src={previewUrl}\r\n                        alt={file.name || file.originalName}\r\n                        className=\"h-full w-full object-cover\"\r\n                        loading=\"eager\"\r\n                        onLoad={(e) => {\r\n                          e.currentTarget.dataset.retryCount = '0';\r\n                        }}\r\n                        onError={handleImageRetry}\r\n                      />\r\n                      \r\n                      {/* Status badge */}\r\n                      {isPermanent && (\r\n                        <div className=\"absolute top-1 left-1 bg-green-600 text-white text-[8px] px-1.5 py-0.5 rounded-full font-medium flex items-center gap-0.5\">\r\n                          <span>‚úì</span>\r\n                          <span>ƒê√£ l∆∞u vƒ©nh vi·ªÖn</span>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {/* Overlay buttons - ch·ªâ hi·ªán khi hover */}\r\n                      <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100\">\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-7 w-7 bg-white/90 hover:bg-white\"\r\n                          onClick={() => handlePreview(file)}\r\n                        >\r\n                          <Eye className=\"h-3 w-3\" />\r\n                        </Button>\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-7 w-7 bg-white/90 hover:bg-destructive hover:text-white\"\r\n                          onClick={() => removeFile(file.id)}\r\n                          disabled={disabled}\r\n                        >\r\n                          <X className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"aspect-square rounded-lg bg-muted flex items-center justify-center\">\r\n                      <File className=\"h-8 w-8 text-muted-foreground\" />\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"space-y-1\">\r\n                    <p className=\"text-[10px] font-medium truncate\">{file.name || file.originalName}</p>\r\n                    <div className=\"flex items-center gap-1 text-[9px]\">\r\n                      {file.size > 0 ? (\r\n                        <>\r\n                          <span className={isPermanent ? 'text-green-700 font-medium' : 'text-muted-foreground'}>\r\n                            {formatFileSize(file.size)}\r\n                          </span>\r\n                          {isPermanent && (\r\n                            <span className=\"text-green-700\">‚Ä¢ Vƒ©nh vi·ªÖn</span>\r\n                          )}\r\n                        </>\r\n                      ) : isPermanent ? (\r\n                        <span className=\"text-green-700 font-medium\">ƒê√£ l∆∞u vƒ©nh vi·ªÖn</span>\r\n                      ) : (\r\n                        <span className=\"text-muted-foreground\">ƒêang t·∫£i...</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <AlertDialog open={deleteAlertOpen} onOpenChange={setDeleteAlertOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>X√°c nh·∫≠n x√≥a file</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a file t·∫°m th·ªùi n√†y?\r\n              <br />\r\n              <br />\r\n              <strong>\"{fileToDelete?.originalName || fileToDelete?.name}\"</strong>\r\n              <br />\r\n              <br />\r\n              File n√†y ch∆∞a ƒë∆∞·ª£c l∆∞u. H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>H·ªßy</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDeleteFile}>X√≥a file</AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2150, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/shared/seo-preview.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { cn } from '../../lib/utils';\r\nimport { Globe, ExternalLink } from 'lucide-react';\r\nimport { Badge } from '../ui/badge';\r\n\r\n// =============================================================================\r\n// SEO PREVIEW COMPONENT - Google Search Result Preview\r\n// =============================================================================\r\n\r\nexport interface SeoPreviewProps {\r\n  title?: string;\r\n  description?: string;\r\n  url?: string;\r\n  siteName?: string;\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * SEO Preview - Xem tr∆∞·ªõc k·∫øt qu·∫£ t√¨m ki·∫øm Google\r\n * \r\n * Hi·ªÉn th·ªã preview gi·ªëng nh∆∞ Google search results:\r\n * - Title (xanh d∆∞∆°ng, c√≥ th·ªÉ click)\r\n * - URL (xanh l√°)\r\n * - Description (x√°m ƒëen)\r\n */\r\nexport function SeoPreview({\r\n  title = '',\r\n  description = '',\r\n  url = '',\r\n  siteName = 'example.com',\r\n  className,\r\n}: SeoPreviewProps) {\r\n  // Truncate title v√† description theo chu·∫©n Google\r\n  const truncatedTitle = title.length > 60 ? title.slice(0, 57) + '...' : title;\r\n  const truncatedDesc = description.length > 160 ? description.slice(0, 157) + '...' : description;\r\n\r\n  // Build display URL\r\n  const displayUrl = url \r\n    ? `${siteName}/${url.replace(/^\\//, '')}` \r\n    : siteName;\r\n\r\n  return (\r\n    <div className={cn('space-y-2', className)}>\r\n      <div className=\"flex items-center gap-2 text-xs text-muted-foreground mb-2\">\r\n        <Globe className=\"h-3 w-3\" />\r\n        <span>Xem tr∆∞·ªõc k·∫øt qu·∫£ t√¨m ki·∫øm Google</span>\r\n      </div>\r\n      \r\n      {/* Google Search Result Preview Box */}\r\n      <div className=\"p-4 rounded-lg border bg-white dark:bg-background\">\r\n        {/* Site URL with favicon */}\r\n        <div className=\"flex items-center gap-2 text-sm\">\r\n          <div className=\"w-7 h-7 rounded-full bg-muted flex items-center justify-center flex-shrink-0\">\r\n            <Globe className=\"h-4 w-4 text-muted-foreground\" />\r\n          </div>\r\n          <div className=\"flex flex-col min-w-0\">\r\n            <span className=\"text-sm text-foreground truncate\">{siteName}</span>\r\n            <span className=\"text-xs text-muted-foreground truncate\">{displayUrl}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Title */}\r\n        <h3 className=\"mt-2 text-xl text-[#1a0dab] dark:text-blue-400 hover:underline cursor-pointer font-normal leading-tight\">\r\n          {truncatedTitle || <span className=\"text-muted-foreground italic\">Ch∆∞a c√≥ ti√™u ƒë·ªÅ SEO</span>}\r\n        </h3>\r\n\r\n        {/* Description */}\r\n        <p className=\"mt-1 text-sm text-[#4d5156] dark:text-muted-foreground leading-snug\">\r\n          {truncatedDesc || <span className=\"italic\">Ch∆∞a c√≥ m√¥ t·∫£ SEO</span>}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// SEO SCORE COMPONENT - T√≠nh ƒëi·ªÉm SEO\r\n// =============================================================================\r\n\r\nexport interface SeoScoreProps {\r\n  title?: string;\r\n  description?: string;\r\n  keywords?: string;\r\n  slug?: string;\r\n  className?: string;\r\n  showDetails?: boolean;\r\n}\r\n\r\ninterface SeoCheckResult {\r\n  label: string;\r\n  passed: boolean;\r\n  message: string;\r\n  points: number;\r\n  maxPoints: number;\r\n}\r\n\r\n/**\r\n * T√≠nh ƒëi·ªÉm SEO d·ª±a tr√™n c√°c ti√™u ch√≠:\r\n * - Title: 50-60 k√Ω t·ª± (20 ƒëi·ªÉm)\r\n * - Description: 150-160 k√Ω t·ª± (20 ƒëi·ªÉm)\r\n * - Keywords: c√≥ keywords (15 ƒëi·ªÉm)\r\n * - Slug: c√≥ slug URL-friendly (15 ƒëi·ªÉm)\r\n * - Title c√≥ t·ª´ kh√≥a (15 ƒëi·ªÉm)\r\n * - Description c√≥ t·ª´ kh√≥a (15 ƒëi·ªÉm)\r\n */\r\nfunction calculateSeoScore(props: SeoScoreProps): { score: number; checks: SeoCheckResult[] } {\r\n  const { title = '', description = '', keywords = '', slug = '' } = props;\r\n  const checks: SeoCheckResult[] = [];\r\n\r\n  // 1. Title length check (20 points)\r\n  const titleLen = title.length;\r\n  if (titleLen === 0) {\r\n    checks.push({\r\n      label: 'Ti√™u ƒë·ªÅ SEO',\r\n      passed: false,\r\n      message: 'Ch∆∞a c√≥ ti√™u ƒë·ªÅ',\r\n      points: 0,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (titleLen >= 50 && titleLen <= 60) {\r\n    checks.push({\r\n      label: 'Ti√™u ƒë·ªÅ SEO',\r\n      passed: true,\r\n      message: `ƒê·ªô d√†i t·ªët (${titleLen} k√Ω t·ª±)`,\r\n      points: 20,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (titleLen >= 30 && titleLen < 50) {\r\n    checks.push({\r\n      label: 'Ti√™u ƒë·ªÅ SEO',\r\n      passed: true,\r\n      message: `H∆°i ng·∫Øn (${titleLen}/50-60 k√Ω t·ª±)`,\r\n      points: 15,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (titleLen > 60 && titleLen <= 70) {\r\n    checks.push({\r\n      label: 'Ti√™u ƒë·ªÅ SEO',\r\n      passed: true,\r\n      message: `H∆°i d√†i (${titleLen}/50-60 k√Ω t·ª±)`,\r\n      points: 15,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (titleLen > 70) {\r\n    checks.push({\r\n      label: 'Ti√™u ƒë·ªÅ SEO',\r\n      passed: false,\r\n      message: `Qu√° d√†i (${titleLen} k√Ω t·ª±, n√™n ‚â§60)`,\r\n      points: 5,\r\n      maxPoints: 20,\r\n    });\r\n  } else {\r\n    checks.push({\r\n      label: 'Ti√™u ƒë·ªÅ SEO',\r\n      passed: false,\r\n      message: `Qu√° ng·∫Øn (${titleLen} k√Ω t·ª±, n√™n 50-60)`,\r\n      points: 5,\r\n      maxPoints: 20,\r\n    });\r\n  }\r\n\r\n  // 2. Description length check (20 points)\r\n  const descLen = description.length;\r\n  if (descLen === 0) {\r\n    checks.push({\r\n      label: 'Meta Description',\r\n      passed: false,\r\n      message: 'Ch∆∞a c√≥ m√¥ t·∫£',\r\n      points: 0,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (descLen >= 150 && descLen <= 160) {\r\n    checks.push({\r\n      label: 'Meta Description',\r\n      passed: true,\r\n      message: `ƒê·ªô d√†i t·ªët (${descLen} k√Ω t·ª±)`,\r\n      points: 20,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (descLen >= 120 && descLen < 150) {\r\n    checks.push({\r\n      label: 'Meta Description',\r\n      passed: true,\r\n      message: `H∆°i ng·∫Øn (${descLen}/150-160 k√Ω t·ª±)`,\r\n      points: 15,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (descLen > 160 && descLen <= 180) {\r\n    checks.push({\r\n      label: 'Meta Description',\r\n      passed: true,\r\n      message: `H∆°i d√†i (${descLen}/150-160 k√Ω t·ª±)`,\r\n      points: 15,\r\n      maxPoints: 20,\r\n    });\r\n  } else if (descLen > 180) {\r\n    checks.push({\r\n      label: 'Meta Description',\r\n      passed: false,\r\n      message: `Qu√° d√†i (${descLen} k√Ω t·ª±, n√™n ‚â§160)`,\r\n      points: 5,\r\n      maxPoints: 20,\r\n    });\r\n  } else {\r\n    checks.push({\r\n      label: 'Meta Description',\r\n      passed: false,\r\n      message: `Qu√° ng·∫Øn (${descLen} k√Ω t·ª±, n√™n 120-160)`,\r\n      points: 5,\r\n      maxPoints: 20,\r\n    });\r\n  }\r\n\r\n  // 3. Keywords check (15 points)\r\n  const keywordList = keywords.split(',').map(k => k.trim()).filter(Boolean);\r\n  if (keywordList.length === 0) {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a SEO',\r\n      passed: false,\r\n      message: 'Ch∆∞a c√≥ t·ª´ kh√≥a',\r\n      points: 0,\r\n      maxPoints: 15,\r\n    });\r\n  } else if (keywordList.length >= 3 && keywordList.length <= 5) {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a SEO',\r\n      passed: true,\r\n      message: `T·ªët (${keywordList.length} t·ª´ kh√≥a)`,\r\n      points: 15,\r\n      maxPoints: 15,\r\n    });\r\n  } else if (keywordList.length < 3) {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a SEO',\r\n      passed: true,\r\n      message: `√çt t·ª´ kh√≥a (${keywordList.length}, n√™n 3-5)`,\r\n      points: 10,\r\n      maxPoints: 15,\r\n    });\r\n  } else {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a SEO',\r\n      passed: true,\r\n      message: `Nhi·ªÅu t·ª´ kh√≥a (${keywordList.length}, n√™n 3-5)`,\r\n      points: 10,\r\n      maxPoints: 15,\r\n    });\r\n  }\r\n\r\n  // 4. Slug check (15 points)\r\n  if (!slug) {\r\n    checks.push({\r\n      label: 'URL Slug',\r\n      passed: false,\r\n      message: 'Ch∆∞a c√≥ slug',\r\n      points: 0,\r\n      maxPoints: 15,\r\n    });\r\n  } else if (/^[a-z0-9-]+$/.test(slug) && slug.length <= 50) {\r\n    checks.push({\r\n      label: 'URL Slug',\r\n      passed: true,\r\n      message: 'URL-friendly v√† ng·∫Øn g·ªçn',\r\n      points: 15,\r\n      maxPoints: 15,\r\n    });\r\n  } else if (/^[a-z0-9-]+$/.test(slug)) {\r\n    checks.push({\r\n      label: 'URL Slug',\r\n      passed: true,\r\n      message: `H∆°i d√†i (${slug.length} k√Ω t·ª±)`,\r\n      points: 10,\r\n      maxPoints: 15,\r\n    });\r\n  } else {\r\n    checks.push({\r\n      label: 'URL Slug',\r\n      passed: false,\r\n      message: 'Ch·ª©a k√Ω t·ª± kh√¥ng h·ª£p l·ªá',\r\n      points: 5,\r\n      maxPoints: 15,\r\n    });\r\n  }\r\n\r\n  // 5. Title contains keyword (15 points)\r\n  const titleLower = title.toLowerCase();\r\n  const hasKeywordInTitle = keywordList.some(kw => titleLower.includes(kw.toLowerCase()));\r\n  if (keywordList.length === 0) {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a trong ti√™u ƒë·ªÅ',\r\n      passed: false,\r\n      message: 'Ch∆∞a c√≥ t·ª´ kh√≥a ƒë·ªÉ ki·ªÉm tra',\r\n      points: 0,\r\n      maxPoints: 15,\r\n    });\r\n  } else if (hasKeywordInTitle) {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a trong ti√™u ƒë·ªÅ',\r\n      passed: true,\r\n      message: 'Ti√™u ƒë·ªÅ c√≥ ch·ª©a t·ª´ kh√≥a',\r\n      points: 15,\r\n      maxPoints: 15,\r\n    });\r\n  } else {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a trong ti√™u ƒë·ªÅ',\r\n      passed: false,\r\n      message: 'Ti√™u ƒë·ªÅ ch∆∞a ch·ª©a t·ª´ kh√≥a',\r\n      points: 0,\r\n      maxPoints: 15,\r\n    });\r\n  }\r\n\r\n  // 6. Description contains keyword (15 points)\r\n  const descLower = description.toLowerCase();\r\n  const hasKeywordInDesc = keywordList.some(kw => descLower.includes(kw.toLowerCase()));\r\n  if (keywordList.length === 0) {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a trong m√¥ t·∫£',\r\n      passed: false,\r\n      message: 'Ch∆∞a c√≥ t·ª´ kh√≥a ƒë·ªÉ ki·ªÉm tra',\r\n      points: 0,\r\n      maxPoints: 15,\r\n    });\r\n  } else if (hasKeywordInDesc) {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a trong m√¥ t·∫£',\r\n      passed: true,\r\n      message: 'M√¥ t·∫£ c√≥ ch·ª©a t·ª´ kh√≥a',\r\n      points: 15,\r\n      maxPoints: 15,\r\n    });\r\n  } else {\r\n    checks.push({\r\n      label: 'T·ª´ kh√≥a trong m√¥ t·∫£',\r\n      passed: false,\r\n      message: 'M√¥ t·∫£ ch∆∞a ch·ª©a t·ª´ kh√≥a',\r\n      points: 0,\r\n      maxPoints: 15,\r\n    });\r\n  }\r\n\r\n  // Calculate total score\r\n  const totalPoints = checks.reduce((sum, c) => sum + c.points, 0);\r\n  const maxTotalPoints = checks.reduce((sum, c) => sum + c.maxPoints, 0);\r\n  const score = Math.round((totalPoints / maxTotalPoints) * 100);\r\n\r\n  return { score, checks };\r\n}\r\n\r\nfunction getScoreColor(score: number): string {\r\n  if (score >= 80) return 'text-green-600 dark:text-green-400';\r\n  if (score >= 60) return 'text-yellow-600 dark:text-yellow-400';\r\n  if (score >= 40) return 'text-orange-600 dark:text-orange-400';\r\n  return 'text-red-600 dark:text-red-400';\r\n}\r\n\r\nfunction getScoreBgColor(score: number): string {\r\n  if (score >= 80) return 'bg-green-100 dark:bg-green-900/30';\r\n  if (score >= 60) return 'bg-yellow-100 dark:bg-yellow-900/30';\r\n  if (score >= 40) return 'bg-orange-100 dark:bg-orange-900/30';\r\n  return 'bg-red-100 dark:bg-red-900/30';\r\n}\r\n\r\nfunction getScoreLabel(score: number): string {\r\n  if (score >= 80) return 'T·ªët';\r\n  if (score >= 60) return 'Kh√°';\r\n  if (score >= 40) return 'Trung b√¨nh';\r\n  return 'C·∫ßn c·∫£i thi·ªán';\r\n}\r\n\r\n/**\r\n * SEO Score - Hi·ªÉn th·ªã ƒëi·ªÉm SEO v·ªõi c√°c ti√™u ch√≠ chi ti·∫øt\r\n */\r\nexport function SeoScore({\r\n  title = '',\r\n  description = '',\r\n  keywords = '',\r\n  slug = '',\r\n  className,\r\n  showDetails = true,\r\n}: SeoScoreProps) {\r\n  const { score, checks } = React.useMemo(\r\n    () => calculateSeoScore({ title, description, keywords, slug }),\r\n    [title, description, keywords, slug]\r\n  );\r\n\r\n  return (\r\n    <div className={cn('space-y-3', className)}>\r\n      {/* Score Display */}\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className={cn(\r\n          'flex items-center justify-center w-14 h-14 rounded-full font-bold text-lg',\r\n          getScoreBgColor(score),\r\n          getScoreColor(score)\r\n        )}>\r\n          {score}\r\n        </div>\r\n        <div>\r\n          <div className={cn('font-semibold', getScoreColor(score))}>\r\n            {getScoreLabel(score)}\r\n          </div>\r\n          <div className=\"text-xs text-muted-foreground\">\r\n            ƒêi·ªÉm SEO\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"w-full h-2 bg-muted rounded-full overflow-hidden\">\r\n        <div\r\n          className={cn(\r\n            'h-full transition-all duration-300',\r\n            score >= 80 ? 'bg-green-500' :\r\n            score >= 60 ? 'bg-yellow-500' :\r\n            score >= 40 ? 'bg-orange-500' : 'bg-red-500'\r\n          )}\r\n          style={{ width: `${score}%` }}\r\n        />\r\n      </div>\r\n\r\n      {/* Detailed Checks */}\r\n      {showDetails && (\r\n        <div className=\"space-y-2 pt-2\">\r\n          {checks.map((check, index) => (\r\n            <div key={index} className=\"flex items-center justify-between text-sm\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className={cn(\r\n                  'w-2 h-2 rounded-full',\r\n                  check.passed ? 'bg-green-500' : 'bg-red-500'\r\n                )} />\r\n                <span className=\"text-muted-foreground\">{check.label}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className={check.passed ? 'text-green-600 dark:text-green-400' : 'text-muted-foreground'}>\r\n                  {check.message}\r\n                </span>\r\n                <Badge variant=\"secondary\" className=\"text-xs h-5\">\r\n                  {check.points}/{check.maxPoints}\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// COMBINED SEO ANALYSIS PANEL\r\n// =============================================================================\r\n\r\nexport interface SeoAnalysisPanelProps {\r\n  title?: string;\r\n  description?: string;\r\n  keywords?: string;\r\n  slug?: string;\r\n  siteName?: string;\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * SEO Analysis Panel - K·∫øt h·ª£p Preview v√† Score\r\n */\r\nexport function SeoAnalysisPanel({\r\n  title = '',\r\n  description = '',\r\n  keywords = '',\r\n  slug = '',\r\n  siteName = 'example.com',\r\n  className,\r\n}: SeoAnalysisPanelProps) {\r\n  return (\r\n    <div className={cn('space-y-6', className)}>\r\n      {/* SEO Score */}\r\n      <SeoScore\r\n        title={title}\r\n        description={description}\r\n        keywords={keywords}\r\n        slug={slug}\r\n        showDetails={true}\r\n      />\r\n\r\n      {/* Separator */}\r\n      <div className=\"border-t\" />\r\n\r\n      {/* SEO Preview */}\r\n      <SeoPreview\r\n        title={title}\r\n        description={description}\r\n        url={slug}\r\n        siteName={siteName}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2752, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/components/ui/tiptap-editor.tsx"],"sourcesContent":["/**\r\n * TipTap Rich Text Editor - For rich content (categories, products, etc.)\r\n * \r\n * Features:\r\n * - Upload/paste/drop images ‚Üí STAGING (confirm on save)\r\n * - Rich text formatting (bold, italic, headings, lists)\r\n * - Drag & drop support\r\n * \r\n * IMPORTANT: Images are uploaded to staging first!\r\n * Parent component must call FileUploadAPI.confirmEditorImages() on save\r\n * to move images from staging to permanent storage.\r\n * \r\n * For comments/quick notes, use CommentEditor instead (direct upload)\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Image from '@tiptap/extension-image';\r\nimport Placeholder from '@tiptap/extension-placeholder';\r\nimport { cn } from '../../lib/utils';\r\nimport { FileUploadAPI, type StagingFile } from '../../lib/file-upload-api';\r\nimport { Bold, Italic, Image as ImageIcon, Upload, Loader2, List, ListOrdered, Heading2 } from 'lucide-react';\r\nimport { Button } from './button';\r\nimport { toast } from 'sonner';\r\n\r\nexport interface TipTapEditorProps {\r\n  content?: string;\r\n  onChange?: (content: string) => void;\r\n  placeholder?: string;\r\n  disabled?: boolean;\r\n  className?: string;\r\n  minHeight?: string;\r\n  maxImageSize?: number; // Max image size in bytes (default 5MB)\r\n  // Staging mode props\r\n  sessionId?: string; // Existing session ID (for edit mode)\r\n  onSessionChange?: (sessionId: string) => void; // Callback when session changes\r\n  onStagingFilesChange?: (files: StagingFile[]) => void; // Track staging files\r\n}\r\n\r\nexport function TipTapEditor({\r\n  content = '',\r\n  onChange,\r\n  placeholder = 'Nh·∫≠p n·ªôi dung...',\r\n  disabled = false,\r\n  className,\r\n  minHeight = '200px',\r\n  maxImageSize = 5 * 1024 * 1024, // 5MB default\r\n  // Staging mode\r\n  sessionId: externalSessionId,\r\n  onSessionChange,\r\n  onStagingFilesChange,\r\n}: TipTapEditorProps) {\r\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\r\n  const [isUploading, setIsUploading] = React.useState(false);\r\n  const [isDragging, setIsDragging] = React.useState(false);\r\n  const dragCounterRef = React.useRef(0);\r\n  \r\n  // Staging state\r\n  const [internalSessionId, setInternalSessionId] = React.useState<string | undefined>(externalSessionId);\r\n  const [stagingFiles, setStagingFiles] = React.useState<StagingFile[]>([]);\r\n  \r\n  const currentSessionId = externalSessionId || internalSessionId;\r\n\r\n  // Notify parent of staging files changes\r\n  React.useEffect(() => {\r\n    onStagingFilesChange?.(stagingFiles);\r\n  }, [stagingFiles, onStagingFilesChange]);\r\n\r\n  // Upload to staging\r\n  const uploadToStaging = React.useCallback(async (file: File): Promise<string> => {\r\n    const result = await FileUploadAPI.uploadEditorImageToStaging(file, currentSessionId);\r\n    \r\n    // Update session ID if new\r\n    if (!currentSessionId || currentSessionId !== result.sessionId) {\r\n      setInternalSessionId(result.sessionId);\r\n      onSessionChange?.(result.sessionId);\r\n    }\r\n    \r\n    // Track staging file\r\n    setStagingFiles(prev => [...prev, result.file]);\r\n    \r\n    return result.file.url;\r\n  }, [currentSessionId, onSessionChange]);\r\n\r\n  // Validate and upload image\r\n  const handleImageFile = React.useCallback(async (file: File, source: 'select' | 'paste' | 'drop') => {\r\n    if (!file.type.startsWith('image/')) {\r\n      toast.error('Ch·ªâ ch·∫•p nh·∫≠n file ·∫£nh');\r\n      return;\r\n    }\r\n\r\n    if (file.size > maxImageSize) {\r\n      const maxMB = Math.round(maxImageSize / 1024 / 1024);\r\n      toast.error('·∫¢nh qu√° l·ªõn', { description: `K√≠ch th∆∞·ªõc t·ªëi ƒëa ${maxMB}MB` });\r\n      return;\r\n    }\r\n\r\n    setIsUploading(true);\r\n    try {\r\n      const url = await uploadToStaging(file);\r\n      editor?.chain().focus().setImage({ src: url }).run();\r\n      toast.success(source === 'paste' ? 'ƒê√£ d√°n ·∫£nh' : source === 'drop' ? 'ƒê√£ th·∫£ ·∫£nh' : 'ƒê√£ th√™m ·∫£nh');\r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      toast.error('Kh√¥ng th·ªÉ t·∫£i ·∫£nh l√™n');\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  }, [uploadToStaging, maxImageSize]);\r\n\r\n  const editor = useEditor({\r\n    extensions: [\r\n      StarterKit.configure({\r\n        heading: {\r\n          levels: [2, 3],\r\n        },\r\n      }),\r\n      Image.configure({\r\n        inline: false,\r\n        allowBase64: false, // No base64 - always upload!\r\n      }),\r\n      Placeholder.configure({\r\n        placeholder,\r\n      }),\r\n    ],\r\n    content,\r\n    editable: !disabled,\r\n    onUpdate: ({ editor }) => {\r\n      const html = editor.getHTML();\r\n      onChange?.(html);\r\n    },\r\n  });\r\n\r\n  // Handle image upload from file input\r\n  const handleImageSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      await handleImageFile(file, 'select');\r\n    }\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  // Handle paste image\r\n  React.useEffect(() => {\r\n    if (!editor) return;\r\n\r\n    const handlePaste = async (event: ClipboardEvent) => {\r\n      const items = event.clipboardData?.items;\r\n      if (!items) return;\r\n\r\n      for (const item of Array.from(items)) {\r\n        if (item.type.startsWith('image/')) {\r\n          event.preventDefault();\r\n          const file = item.getAsFile();\r\n          if (file) {\r\n            await handleImageFile(file, 'paste');\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    const editorElement = editor.view.dom;\r\n    editorElement.addEventListener('paste', handlePaste as any);\r\n    return () => {\r\n      editorElement.removeEventListener('paste', handlePaste as any);\r\n    };\r\n  }, [editor, handleImageFile]);\r\n\r\n  // Handle drag & drop image\r\n  const handleDragEnter = React.useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounterRef.current++;\r\n    if (e.dataTransfer?.types.includes('Files')) {\r\n      setIsDragging(true);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragLeave = React.useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounterRef.current--;\r\n    if (dragCounterRef.current === 0) {\r\n      setIsDragging(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragOver = React.useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }, []);\r\n\r\n  const handleDrop = React.useCallback(async (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n    dragCounterRef.current = 0;\r\n\r\n    const files = Array.from(e.dataTransfer?.files || []);\r\n    const imageFile = files.find(f => f.type.startsWith('image/'));\r\n    \r\n    if (imageFile) {\r\n      await handleImageFile(imageFile, 'drop');\r\n    }\r\n  }, [handleImageFile]);\r\n\r\n  // Sync content prop with editor state\r\n  React.useEffect(() => {\r\n    if (!editor) return;\r\n    const currentContent = editor.getHTML();\r\n    if (content !== currentContent) {\r\n      editor.commands.setContent(content);\r\n    }\r\n  }, [editor, content]);\r\n\r\n  // Reset staging when content is cleared (new form)\r\n  React.useEffect(() => {\r\n    if (content === '' || content === '<p></p>') {\r\n      setStagingFiles([]);\r\n      setInternalSessionId(undefined);\r\n    }\r\n  }, [content]);\r\n\r\n  if (!editor) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={cn(\r\n        'border border-border rounded-lg bg-background relative overflow-hidden',\r\n        isDragging && 'ring-2 ring-primary border-primary',\r\n        className\r\n      )}\r\n      onDragEnter={handleDragEnter}\r\n      onDragLeave={handleDragLeave}\r\n      onDragOver={handleDragOver}\r\n      onDrop={handleDrop}\r\n    >\r\n      {/* Drag overlay */}\r\n      {isDragging && (\r\n        <div className=\"absolute inset-0 z-10 bg-primary/10 flex items-center justify-center pointer-events-none\">\r\n          <div className=\"flex flex-col items-center gap-2 text-primary\">\r\n            <Upload className=\"h-8 w-8\" />\r\n            <span className=\"font-medium\">Th·∫£ ·∫£nh v√†o ƒë√¢y</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Toolbar */}\r\n      <div className=\"flex items-center gap-1 p-2 border-b border-border bg-muted/30 flex-wrap\">\r\n        {/* Text formatting */}\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().toggleBold().run()}\r\n          className={cn('h-8 w-8 p-0', editor.isActive('bold') && 'bg-muted')}\r\n          disabled={disabled}\r\n          title=\"In ƒë·∫≠m (Ctrl+B)\"\r\n        >\r\n          <Bold className=\"h-4 w-4\" />\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().toggleItalic().run()}\r\n          className={cn('h-8 w-8 p-0', editor.isActive('italic') && 'bg-muted')}\r\n          disabled={disabled}\r\n          title=\"In nghi√™ng (Ctrl+I)\"\r\n        >\r\n          <Italic className=\"h-4 w-4\" />\r\n        </Button>\r\n        \r\n        <div className=\"w-px h-6 bg-border mx-1\" />\r\n        \r\n        {/* Headings */}\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}\r\n          className={cn('h-8 w-8 p-0', editor.isActive('heading', { level: 2 }) && 'bg-muted')}\r\n          disabled={disabled}\r\n          title=\"Ti√™u ƒë·ªÅ\"\r\n        >\r\n          <Heading2 className=\"h-4 w-4\" />\r\n        </Button>\r\n        \r\n        <div className=\"w-px h-6 bg-border mx-1\" />\r\n        \r\n        {/* Lists */}\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n          className={cn('h-8 w-8 p-0', editor.isActive('bulletList') && 'bg-muted')}\r\n          disabled={disabled}\r\n          title=\"Danh s√°ch\"\r\n        >\r\n          <List className=\"h-4 w-4\" />\r\n        </Button>\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => editor.chain().focus().toggleOrderedList().run()}\r\n          className={cn('h-8 w-8 p-0', editor.isActive('orderedList') && 'bg-muted')}\r\n          disabled={disabled}\r\n          title=\"Danh s√°ch s·ªë\"\r\n        >\r\n          <ListOrdered className=\"h-4 w-4\" />\r\n        </Button>\r\n        \r\n        <div className=\"w-px h-6 bg-border mx-1\" />\r\n        \r\n        {/* Image */}\r\n        <Button\r\n          type=\"button\"\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={() => fileInputRef.current?.click()}\r\n          className=\"h-8 w-8 p-0\"\r\n          disabled={disabled || isUploading}\r\n          title=\"Ch√®n ·∫£nh\"\r\n        >\r\n          {isUploading ? (\r\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n          ) : (\r\n            <ImageIcon className=\"h-4 w-4\" />\r\n          )}\r\n        </Button>\r\n        \r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={handleImageSelect}\r\n          className=\"hidden\"\r\n        />\r\n        \r\n        {/* Staging indicator */}\r\n        {stagingFiles.length > 0 && (\r\n          <span className=\"ml-auto text-xs text-muted-foreground\">\r\n            {stagingFiles.length} ·∫£nh ch·ªù l∆∞u\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Editor Content */}\r\n      <div\r\n        onClick={() => editor?.commands.focus()}\r\n        className=\"cursor-text\"\r\n        style={{ minHeight }}\r\n      >\r\n        <EditorContent\r\n          editor={editor}\r\n          className={cn(\r\n            'prose prose-sm max-w-none p-4',\r\n            'prose-headings:font-semibold prose-headings:text-foreground',\r\n            'prose-p:text-foreground prose-p:leading-relaxed',\r\n            'prose-img:rounded-lg prose-img:max-w-full',\r\n            disabled && 'opacity-50'\r\n          )}\r\n        />\r\n      </div>\r\n\r\n      {/* Upload indicator */}\r\n      {isUploading && (\r\n        <div className=\"absolute bottom-0 left-0 right-0 p-2 bg-muted/80 text-xs text-muted-foreground flex items-center gap-2 border-t border-border\">\r\n          <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n          ƒêang t·∫£i ·∫£nh l√™n...\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3248, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pkgx/types.ts"],"sourcesContent":["import type { SystemId } from '@/lib/id-types';\r\n\r\n// ========================================\r\n// PKGX Reference Data Types\r\n// ========================================\r\n\r\n/**\r\n * Danh m·ª•c PKGX (cat_id t·ª´ ECShop)\r\n */\r\nexport type PkgxCategory = {\r\n  id: number;         // cat_id tr√™n PKGX\r\n  name: string;       // T√™n danh m·ª•c\r\n  parentId?: number;  // Parent category (n·∫øu c√≥)\r\n  sortOrder?: number; // Th·ª© t·ª± s·∫Øp x·∫øp\r\n  isShow?: number;    // Hi·ªÉn th·ªã (1=hi·ªán, 0=·∫©n)\r\n  // SEO fields\r\n  cat_desc?: string;      // M√¥ t·∫£ danh m·ª•c ng·∫Øn\r\n  long_desc?: string;     // M√¥ t·∫£ danh m·ª•c d√†i (HTML)\r\n  keywords?: string;      // SEO keywords\r\n  meta_title?: string;    // Meta title\r\n  meta_desc?: string;     // Meta description\r\n  cat_alias?: string;     // Slug/alias\r\n  style?: string;         // Template style\r\n  grade?: number;         // C·∫•p ƒë·ªô danh m·ª•c\r\n  filter_attr?: string;   // Filter attributes\r\n};\r\n\r\n/**\r\n * Th∆∞∆°ng hi·ªáu PKGX (brand_id t·ª´ ECShop)\r\n */\r\nexport type PkgxBrand = {\r\n  id: number;           // brand_id tr√™n PKGX\r\n  name: string;         // T√™n th∆∞∆°ng hi·ªáu\r\n  // Basic fields\r\n  logo?: string;          // Logo URL\r\n  description?: string;   // M√¥ t·∫£ th∆∞∆°ng hi·ªáu (brand_desc)\r\n  siteUrl?: string;       // Website URL\r\n  sortOrder?: number;     // Th·ª© t·ª± s·∫Øp x·∫øp\r\n  isShow?: number;        // Hi·ªÉn th·ªã (1=hi·ªán, 0=·∫©n)\r\n  // SEO fields\r\n  keywords?: string;      // Keywords\r\n  metaTitle?: string;     // Meta title\r\n  metaDesc?: string;      // Meta description\r\n  // Description fields\r\n  shortDescription?: string;  // M√¥ t·∫£ ng·∫Øn (short_desc)\r\n  longDescription?: string;   // M√¥ t·∫£ d√†i (long_desc)\r\n  // Legacy fields (backward compatibility)\r\n  brand_logo?: string;    // Logo URL (legacy)\r\n  brand_desc?: string;    // M√¥ t·∫£ th∆∞∆°ng hi·ªáu (HTML) (legacy)\r\n  site_url?: string;      // Website URL (legacy)\r\n  sort_order?: number;    // Th·ª© t·ª± s·∫Øp x·∫øp (legacy)\r\n};\r\n\r\n/**\r\n * ·∫¢nh trong gallery s·∫£n ph·∫©m PKGX\r\n */\r\nexport type PkgxGalleryImage = {\r\n  img_id: number;           // ID ·∫£nh trong gallery\r\n  goods_id: number;         // ID s·∫£n ph·∫©m\r\n  img_url: string;          // ƒê∆∞·ªùng d·∫´n ·∫£nh g·ªëc\r\n  thumb_url: string;        // ƒê∆∞·ªùng d·∫´n thumbnail\r\n  img_desc?: string;        // M√¥ t·∫£ ·∫£nh\r\n  img_original?: string;    // ·∫¢nh g·ªëc (n·∫øu c√≥)\r\n};\r\n\r\n// ========================================\r\n// Mapping Types\r\n// ========================================\r\n\r\n/**\r\n * Mapping danh m·ª•c HRM ‚Üí PKGX\r\n */\r\nexport type PkgxCategoryMapping = {\r\n  id: string;                     // Unique mapping ID\r\n  hrmCategorySystemId: SystemId;  // Category systemId trong HRM\r\n  hrmCategoryName: string;        // T√™n hi·ªÉn th·ªã HRM\r\n  pkgxCatId: number;              // cat_id tr√™n PKGX\r\n  pkgxCatName: string;            // T√™n danh m·ª•c PKGX\r\n};\r\n\r\n/**\r\n * Mapping th∆∞∆°ng hi·ªáu HRM ‚Üí PKGX\r\n */\r\nexport type PkgxBrandMapping = {\r\n  id: string;                     // Unique mapping ID\r\n  hrmBrandSystemId: SystemId;     // Brand systemId trong HRM\r\n  hrmBrandName: string;           // T√™n hi·ªÉn th·ªã HRM\r\n  pkgxBrandId: number;            // brand_id tr√™n PKGX\r\n  pkgxBrandName: string;          // T√™n th∆∞∆°ng hi·ªáu PKGX\r\n};\r\n\r\n/**\r\n * Mapping b·∫£ng gi√° HRM ‚Üí c√°c lo·∫°i gi√° PKGX\r\n */\r\nexport type PkgxPriceMapping = {\r\n  shopPrice: SystemId | null;     // B·∫£ng gi√° ‚Üí shop_price (gi√° b√°n)\r\n  marketPrice: SystemId | null;   // B·∫£ng gi√° ‚Üí market_price (gi√° th·ªã tr∆∞·ªùng)\r\n  partnerPrice: SystemId | null;  // B·∫£ng gi√° ‚Üí partner_price (gi√° ƒë·ªëi t√°c)\r\n  acePrice: SystemId | null;      // B·∫£ng gi√° ‚Üí ace_price\r\n  dealPrice: SystemId | null;     // B·∫£ng gi√° ‚Üí deal_price\r\n};\r\n\r\n// ========================================\r\n// Sync Settings Types\r\n// ========================================\r\n\r\n/**\r\n * C√†i ƒë·∫∑t ƒë·ªìng b·ªô t·ª± ƒë·ªông\r\n */\r\nexport type PkgxSyncSettings = {\r\n  autoSyncEnabled: boolean;       // B·∫≠t/t·∫Øt auto sync\r\n  intervalMinutes: number;        // T·∫ßn su·∫•t (15, 30, 60, 120, 240)\r\n  syncInventory: boolean;         // ƒê·ªìng b·ªô t·ªìn kho\r\n  syncPrice: boolean;             // ƒê·ªìng b·ªô gi√°\r\n  syncSeo: boolean;               // ƒê·ªìng b·ªô SEO (meta_title, meta_desc, keywords)\r\n  syncOnProductUpdate: boolean;   // Sync ngay khi update SP trong HRM\r\n  notifyOnError: boolean;         // Th√¥ng b√°o khi c√≥ l·ªói\r\n};\r\n\r\n/**\r\n * Log ƒë·ªìng b·ªô PKGX - Ghi l·∫°i T·∫§T C·∫¢ c√°c API call\r\n */\r\nexport type PkgxSyncLog = {\r\n  id: string;                     // Unique log ID\r\n  timestamp: string;              // ISO timestamp\r\n  action: \r\n    | 'test_connection'           // Test k·∫øt n·ªëi API\r\n    | 'ping'                      // Ping server\r\n    | 'sync_all'                  // ƒê·ªìng b·ªô to√†n b·ªô\r\n    | 'sync_price'                // ƒê·ªìng b·ªô gi√°\r\n    | 'sync_inventory'            // ƒê·ªìng b·ªô t·ªìn kho\r\n    | 'sync_seo'                  // ƒê·ªìng b·ªô SEO\r\n    | 'sync_description'          // ƒê·ªìng b·ªô m√¥ t·∫£\r\n    | 'sync_flags'                // ƒê·ªìng b·ªô flags (isHot, isNew, etc.)\r\n    | 'sync_basic'                // ƒê·ªìng b·ªô th√¥ng tin c∆° b·∫£n (alias)\r\n    | 'sync_basic_info'           // ƒê·ªìng b·ªô th√¥ng tin c∆° b·∫£n\r\n    | 'sync_images'               // ƒê·ªìng b·ªô ·∫£nh s·∫£n ph·∫©m\r\n    | 'create_product'            // T·∫°o s·∫£n ph·∫©m m·ªõi tr√™n PKGX\r\n    | 'update_product'            // C·∫≠p nh·∫≠t s·∫£n ph·∫©m\r\n    | 'link_product'              // Li√™n k·∫øt SP HRM v·ªõi PKGX\r\n    | 'unlink_product'            // H·ªßy li√™n k·∫øt SP\r\n    | 'unlink_mapping'            // H·ªßy li√™n k·∫øt mapping (category/brand)\r\n    | 'batch_unlink'              // H·ªßy li√™n k·∫øt h√†ng lo·∫°t\r\n    | 'bulk_sync_all'             // Bulk: ƒê·ªìng b·ªô to√†n b·ªô\r\n    | 'bulk_sync_basic'           // Bulk: ƒê·ªìng b·ªô th√¥ng tin c∆° b·∫£n\r\n    | 'bulk_sync_price'           // Bulk: ƒê·ªìng b·ªô gi√°\r\n    | 'bulk_sync_inventory'       // Bulk: ƒê·ªìng b·ªô t·ªìn kho\r\n    | 'bulk_sync_seo'             // Bulk: ƒê·ªìng b·ªô SEO\r\n    | 'bulk_sync_description'     // Bulk: ƒê·ªìng b·ªô m√¥ t·∫£\r\n    | 'bulk_sync_flags'           // Bulk: ƒê·ªìng b·ªô flags\r\n    | 'bulk_sync_images'          // Bulk: ƒê·ªìng b·ªô ·∫£nh\r\n    | 'sync_categories'           // ƒê·ªìng b·ªô danh m·ª•c\r\n    | 'sync_brands'               // ƒê·ªìng b·ªô th∆∞∆°ng hi·ªáu\r\n    | 'get_products'              // L·∫•y danh s√°ch SP t·ª´ PKGX\r\n    | 'upload_image'              // Upload ·∫£nh s·∫£n ph·∫©m\r\n    | 'save_config'               // L∆∞u c·∫•u h√¨nh\r\n    | 'save_mapping';             // L∆∞u mapping\r\n  status: 'success' | 'error' | 'partial' | 'info';\r\n  message: string;                // Log message\r\n  // User info - Ai th·ª±c hi·ªán action\r\n  userId?: string;                // User systemId ho·∫∑c 'SYSTEM'\r\n  userName?: string;              // T√™n ng∆∞·ªùi d√πng\r\n  details?: {\r\n    // Request info\r\n    url?: string;\r\n    method?: string;\r\n    // Response info\r\n    responseTime?: number;        // ms\r\n    httpStatus?: number;\r\n    // Data info\r\n    total?: number;\r\n    success?: number;\r\n    failed?: number;\r\n    productId?: string;\r\n    productName?: string;\r\n    pkgxId?: number;\r\n    inventory?: number;\r\n    categoryId?: number;\r\n    brandId?: number;\r\n    // Error info\r\n    error?: string;\r\n    errorCode?: string;\r\n  };\r\n};\r\n\r\n/**\r\n * K·∫øt qu·∫£ sync g·∫ßn nh·∫•t\r\n */\r\nexport type PkgxSyncResult = {\r\n  status: 'success' | 'partial' | 'error';\r\n  total: number;\r\n  success: number;\r\n  failed: number;\r\n  errors?: string[];\r\n};\r\n\r\n// ========================================\r\n// Main PKGX Settings Type\r\n// ========================================\r\n\r\n/**\r\n * To√†n b·ªô c√†i ƒë·∫∑t PKGX\r\n */\r\nexport type PkgxSettings = {\r\n  // === General Config ===\r\n  apiUrl: string;\r\n  apiKey: string;\r\n  enabled: boolean;                // B·∫≠t/t·∫Øt t√≠ch h·ª£p PKGX\r\n  \r\n  // === Reference Data ===\r\n  categories: PkgxCategory[];\r\n  brands: PkgxBrand[];\r\n  \r\n  // === Mappings ===\r\n  priceMapping: PkgxPriceMapping;\r\n  categoryMappings: PkgxCategoryMapping[];\r\n  brandMappings: PkgxBrandMapping[];\r\n  \r\n  // === Sync Settings ===\r\n  syncSettings: PkgxSyncSettings;\r\n  \r\n  // === Status ===\r\n  lastSyncAt?: string;\r\n  lastSyncResult?: PkgxSyncResult;\r\n  connectionStatus?: 'connected' | 'disconnected' | 'error';\r\n  connectionError?: string;\r\n  \r\n  // === Logs ===\r\n  logs: PkgxSyncLog[];\r\n  \r\n  // === Cached PKGX Products ===\r\n  pkgxProducts: PkgxProduct[];     // S·∫£n ph·∫©m t·ª´ PKGX - l∆∞u cache ƒë·ªÉ kh√¥ng m·∫•t khi chuy·ªÉn tab\r\n  pkgxProductsLastFetch?: string;  // Th·ªùi gian fetch g·∫ßn nh·∫•t\r\n};\r\n\r\n// ========================================\r\n// PKGX Product Response Types (t·ª´ API)\r\n// ========================================\r\n\r\n/**\r\n * S·∫£n ph·∫©m tr·∫£ v·ªÅ t·ª´ PKGX API\r\n * \r\n * L∆∞u √Ω quan tr·ªçng:\r\n * - goods_id: Primary Key, d√πng ƒë·ªÉ update/link s·∫£n ph·∫©m qua API\r\n * - goods_sn: M√£ SKU c·ªßa s·∫£n ph·∫©m, c√≥ th·ªÉ sync v·ªõi HRM.sku\r\n */\r\nexport type PkgxProduct = {\r\n  goods_id: number;      // PRIMARY KEY - D√πng ƒë·ªÉ update s·∫£n ph·∫©m qua API\r\n  goods_name: string;\r\n  goods_sn: string;      // M√£ SKU - map v·ªõi HRM Product.sku\r\n  cat_id: number;\r\n  brand_id: number;\r\n  shop_price: number;\r\n  market_price: number;\r\n  partner_price: number;\r\n  ace_price?: number;\r\n  deal_price?: number;\r\n  goods_number: number;\r\n  goods_desc: string;\r\n  keywords: string;\r\n  goods_brief: string;\r\n  meta_title: string;\r\n  meta_desc: string;\r\n  goods_img: string;\r\n  goods_thumb: string;\r\n  original_img: string;\r\n  is_on_sale: number;\r\n  is_best: number;\r\n  is_hot: number;\r\n  is_new: number;\r\n  is_home: number;\r\n  slug: string;\r\n  seller_note?: string;\r\n  add_time?: number;\r\n  last_update?: number;\r\n};\r\n\r\n/**\r\n * Response ph√¢n trang t·ª´ get_products\r\n */\r\nexport type PkgxProductsResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  pagination: {\r\n    total_items: number;\r\n    total_pages: number;\r\n    current_page: number;\r\n    per_page: number;\r\n  };\r\n  data: PkgxProduct[];\r\n};\r\n\r\n/**\r\n * Response upload ·∫£nh\r\n */\r\nexport type PkgxImageUploadResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  data: {\r\n    original_img: string;\r\n    goods_img: string;\r\n    goods_thumb: string;\r\n    full_urls: {\r\n      original: string;\r\n      goods: string;\r\n      thumb: string;\r\n    };\r\n  };\r\n  goods_id?: number;\r\n  product_updated?: boolean;\r\n};\r\n\r\n/**\r\n * Response l·∫•y danh s√°ch danh m·ª•c t·ª´ PKGX API\r\n */\r\nexport type PkgxCategoryFromApi = {\r\n  cat_id: number;\r\n  cat_name: string;\r\n  parent_id: number;\r\n  sort_order: number;\r\n  is_show?: number; // 0 or 1\r\n  // SEO fields\r\n  cat_desc?: string;\r\n  long_desc?: string;\r\n  keywords?: string;\r\n  meta_title?: string;\r\n  meta_desc?: string;\r\n  cat_alias?: string;\r\n  style?: string;\r\n  grade?: number;\r\n  filter_attr?: string;\r\n};\r\n\r\nexport type PkgxCategoriesResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  total: number;\r\n  data: PkgxCategoryFromApi[];\r\n};\r\n\r\n/**\r\n * Response l·∫•y danh s√°ch th∆∞∆°ng hi·ªáu t·ª´ PKGX API\r\n */\r\nexport type PkgxBrandFromApi = {\r\n  brand_id: number;\r\n  brand_name: string;\r\n  brand_logo?: string;\r\n  brand_desc?: string;\r\n  short_desc?: string;\r\n  long_desc?: string;\r\n  keywords?: string;\r\n  meta_title?: string;\r\n  meta_desc?: string;\r\n  site_url?: string;\r\n  sort_order: number;\r\n  is_show?: number; // 0 or 1\r\n};\r\n\r\nexport type PkgxBrandsResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  total: number;\r\n  data: PkgxBrandFromApi[];\r\n};\r\n\r\n/**\r\n * Response l·∫•y gallery ·∫£nh s·∫£n ph·∫©m t·ª´ PKGX API\r\n */\r\nexport type PkgxGalleryResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  goods_id: number;\r\n  total: number;\r\n  data: PkgxGalleryImage[];\r\n};\r\n\r\n/**\r\n * Payload t·∫°o/c·∫≠p nh·∫≠t s·∫£n ph·∫©m\r\n */\r\nexport type PkgxProductPayload = {\r\n  goods_name?: string;\r\n  goods_sn?: string;\r\n  cat_id?: number;\r\n  brand_id?: number;\r\n  shop_price?: number;\r\n  market_price?: number;\r\n  partner_price?: number;\r\n  ace_price?: number;\r\n  deal_price?: number;\r\n  goods_number?: number;\r\n  goods_desc?: string;\r\n  keywords?: string;\r\n  goods_brief?: string;\r\n  meta_title?: string;\r\n  meta_desc?: string;\r\n  original_img?: string;\r\n  gallery_images?: string[];  // Album ·∫£nh s·∫£n ph·∫©m\r\n  best?: boolean;\r\n  hot?: boolean;\r\n  new?: boolean;\r\n  ishome?: boolean;\r\n  is_on_sale?: boolean;  // Hi·ªÉn th·ªã ƒëƒÉng web (on/off tr√™n website PKGX)\r\n  seller_note?: string;\r\n};\r\n\r\n// ========================================\r\n// UI State Types\r\n// ========================================\r\n\r\nexport type PkgxSettingsTab = \r\n  | 'general'\r\n  | 'categories'\r\n  | 'brands'\r\n  | 'category-mapping'\r\n  | 'brand-mapping'\r\n  | 'price-mapping'\r\n  | 'product-mapping'\r\n  | 'sync';\r\n\r\nexport type ConnectionTestResult = {\r\n  success: boolean;\r\n  message: string;\r\n  productCount?: number;\r\n};\r\n\r\n// ========================================\r\n// Default Values\r\n// ========================================\r\n\r\nexport const DEFAULT_PKGX_SETTINGS: PkgxSettings = {\r\n  apiUrl: 'https://phukiengiaxuong.com.vn/admin/api_product_pro.php',\r\n  apiKey: '',\r\n  enabled: false,\r\n  \r\n  categories: [],\r\n  brands: [],\r\n  \r\n  priceMapping: {\r\n    shopPrice: null,\r\n    marketPrice: null,\r\n    partnerPrice: null,\r\n    acePrice: null,\r\n    dealPrice: null,\r\n  },\r\n  categoryMappings: [],\r\n  brandMappings: [],\r\n  \r\n  syncSettings: {\r\n    autoSyncEnabled: false,\r\n    intervalMinutes: 30,\r\n    syncInventory: true,\r\n    syncPrice: true,\r\n    syncSeo: false,\r\n    syncOnProductUpdate: true,\r\n    notifyOnError: true,\r\n  },\r\n  \r\n  logs: [],\r\n  \r\n  // Cached PKGX Products\r\n  pkgxProducts: [],\r\n  pkgxProductsLastFetch: undefined,\r\n};\r\n\r\nexport const SYNC_INTERVAL_OPTIONS = [\r\n  { value: 15, label: '15 ph√∫t' },\r\n  { value: 30, label: '30 ph√∫t' },\r\n  { value: 60, label: '1 gi·ªù' },\r\n  { value: 120, label: '2 gi·ªù' },\r\n  { value: 240, label: '4 gi·ªù' },\r\n];\r\n"],"names":[],"mappings":";;;;;;AA6aO,MAAM,wBAAsC;IACjD,QAAQ;IACR,QAAQ;IACR,SAAS;IAET,YAAY,EAAE;IACd,QAAQ,EAAE;IAEV,cAAc;QACZ,WAAW;QACX,aAAa;QACb,cAAc;QACd,UAAU;QACV,WAAW;IACb;IACA,kBAAkB,EAAE;IACpB,eAAe,EAAE;IAEjB,cAAc;QACZ,iBAAiB;QACjB,iBAAiB;QACjB,eAAe;QACf,WAAW;QACX,SAAS;QACT,qBAAqB;QACrB,eAAe;IACjB;IAEA,MAAM,EAAE;IAER,uBAAuB;IACvB,cAAc,EAAE;IAChB,uBAAuB;AACzB;AAEO,MAAM,wBAAwB;IACnC;QAAE,OAAO;QAAI,OAAO;IAAU;IAC9B;QAAE,OAAO;QAAI,OAAO;IAAU;IAC9B;QAAE,OAAO;QAAI,OAAO;IAAQ;IAC5B;QAAE,OAAO;QAAK,OAAO;IAAQ;IAC7B;QAAE,OAAO;QAAK,OAAO;IAAQ;CAC9B"}},
    {"offset": {"line": 3309, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pkgx/constants.ts"],"sourcesContent":["import type { PkgxCategory, PkgxBrand } from './types';\r\n\r\n/**\r\n * Danh s√°ch danh m·ª•c PKGX (cat_id t·ª´ ECShop)\r\n * Ngu·ªìn: idpkgx.xlsx\r\n */\r\nexport const PKGX_CATEGORIES: PkgxCategory[] = [\r\n  // === Danh m·ª•c ch√≠nh - H√†ng theo lo·∫°i ===\r\n  { id: 382, name: 'S·∫£n ph·∫©m m·ªõi' },\r\n  { id: 302, name: 'H√†ng Theo Lo·∫°i B√°n' },\r\n  { id: 413, name: 'H√†ng Hot Trend' },\r\n  { id: 390, name: 'H√†ng B√°n Ch·∫°y' },\r\n  { id: 389, name: 'H√†ng Thanh L√Ω' },\r\n  { id: 387, name: 'H√†ng ƒê·ªôc Quy·ªÅn' },\r\n  { id: 391, name: 'H√†ng b√°n S√†n TMƒêT' },\r\n  { id: 388, name: 'H√†ng T·∫∑ng K√®m' },\r\n  { id: 386, name: 'H√†ng Ch·ª£' },\r\n  \r\n  // === Tai nghe ===\r\n  { id: 37, name: 'S·ªâ tai nghe' },\r\n  { id: 315, name: 'Tai nghe Bluetooth TWS' },\r\n  { id: 314, name: 'Tai nghe c√≥ d√¢y' },\r\n  { id: 316, name: 'Tai nghe ch·ª•p tai bluetooth' },\r\n  { id: 375, name: 'Tai nghe bluetooth 1 b√™n' },\r\n  { id: 376, name: 'Tai nghe bluetooth th·ªÉ thao' },\r\n  { id: 377, name: 'Tai nghe ch·ª•p tai Gaming' },\r\n  { id: 384, name: 'Case Tai Nghe Bluetooth' },\r\n  \r\n  // === C√°p s·∫°c ===\r\n  { id: 38, name: 'S·ªâ c√°p s·∫°c' },\r\n  { id: 317, name: 'C√°p s·∫°c Type-C' },\r\n  { id: 318, name: 'C√°p s·∫°c Lightning' },\r\n  { id: 319, name: 'C√°p s·∫°c Micro USB' },\r\n  { id: 320, name: 'C√°p s·∫°c ƒëa nƒÉng' },\r\n  { id: 378, name: 'C√°p s·∫°c nhanh' },\r\n  \r\n  // === C·ªß s·∫°c ===\r\n  { id: 39, name: 'S·ªâ c·ªß s·∫°c' },\r\n  { id: 321, name: 'C·ªß s·∫°c nhanh' },\r\n  { id: 322, name: 'C·ªß s·∫°c th∆∞·ªùng' },\r\n  { id: 323, name: 'C·ªß s·∫°c kh√¥ng d√¢y' },\r\n  { id: 379, name: 'C·ªß s·∫°c Magsafe' },\r\n  \r\n  // === S·∫°c d·ª± ph√≤ng ===\r\n  { id: 40, name: 'S·ªâ s·∫°c d·ª± ph√≤ng' },\r\n  { id: 324, name: 'S·∫°c d·ª± ph√≤ng 10000mAh' },\r\n  { id: 325, name: 'S·∫°c d·ª± ph√≤ng 20000mAh' },\r\n  { id: 326, name: 'S·∫°c d·ª± ph√≤ng 30000mAh+' },\r\n  { id: 380, name: 'S·∫°c d·ª± ph√≤ng mini' },\r\n  \r\n  // === Loa ===\r\n  { id: 41, name: 'S·ªâ loa bluetooth' },\r\n  { id: 327, name: 'Loa bluetooth mini' },\r\n  { id: 328, name: 'Loa bluetooth karaoke' },\r\n  { id: 329, name: 'Loa bluetooth ch·ªëng n∆∞·ªõc' },\r\n  { id: 381, name: 'Loa k√©o' },\r\n  \r\n  // === Ph·ª• ki·ªán ƒëi·ªán tho·∫°i ===\r\n  { id: 42, name: 'Ph·ª• ki·ªán ƒëi·ªán tho·∫°i' },\r\n  { id: 330, name: '·ªêp l∆∞ng ƒëi·ªán tho·∫°i' },\r\n  { id: 331, name: 'K√≠nh c∆∞·ªùng l·ª±c' },\r\n  { id: 332, name: 'Gi√° ƒë·ª° ƒëi·ªán tho·∫°i' },\r\n  { id: 333, name: 'G·∫≠y selfie/tripod' },\r\n  { id: 383, name: 'Ring holder' },\r\n  \r\n  // === Ph·ª• ki·ªán m√°y t√≠nh ===\r\n  { id: 43, name: 'Ph·ª• ki·ªán m√°y t√≠nh' },\r\n  { id: 334, name: 'Chu·ªôt m√°y t√≠nh' },\r\n  { id: 335, name: 'B√†n ph√≠m' },\r\n  { id: 336, name: 'Hub USB' },\r\n  { id: 337, name: 'Webcam' },\r\n  \r\n  // === ƒê·ªìng h·ªì th√¥ng minh ===\r\n  { id: 44, name: 'S·ªâ ƒë·ªìng h·ªì th√¥ng minh' },\r\n  { id: 338, name: 'Smartwatch' },\r\n  { id: 339, name: 'Smartband' },\r\n  { id: 340, name: 'D√¢y ƒëeo smartwatch' },\r\n  \r\n  // === Gaming ===\r\n  { id: 45, name: 'Ph·ª• ki·ªán gaming' },\r\n  { id: 341, name: 'Tay c·∫ßm ch∆°i game' },\r\n  { id: 342, name: 'Qu·∫°t t·∫£n nhi·ªát ƒëi·ªán tho·∫°i' },\r\n  { id: 343, name: 'N√∫t b·∫•m ch∆°i game' },\r\n  \r\n  // === √î t√¥ ===\r\n  { id: 46, name: 'Ph·ª• ki·ªán √¥ t√¥' },\r\n  { id: 344, name: 'S·∫°c xe h∆°i' },\r\n  { id: 345, name: 'Gi√° ƒë·ª° ƒëi·ªán tho·∫°i xe h∆°i' },\r\n  { id: 346, name: 'Camera h√†nh tr√¨nh' },\r\n  \r\n  // === Gia d·ª•ng ===\r\n  { id: 47, name: 'ƒê·ªì gia d·ª•ng' },\r\n  { id: 347, name: 'ƒê√®n LED' },\r\n  { id: 348, name: 'Qu·∫°t mini' },\r\n  { id: 349, name: 'C√¢n ƒëi·ªán t·ª≠' },\r\n];\r\n\r\n/**\r\n * Danh s√°ch th∆∞∆°ng hi·ªáu PKGX (brand_id t·ª´ ECShop)\r\n * Ngu·ªìn: idpkgx.xlsx\r\n */\r\nexport const PKGX_BRANDS: PkgxBrand[] = [\r\n  // === Th∆∞∆°ng hi·ªáu ch√≠nh ===\r\n  { id: 15, name: 'Hoco' },\r\n  { id: 141, name: 'Borofone' },\r\n  { id: 138, name: 'Baseus' },\r\n  { id: 12, name: 'Wekome' },\r\n  { id: 157, name: 'Maxitech' },\r\n  \r\n  // === Th∆∞∆°ng hi·ªáu ph·ª• ===\r\n  { id: 10, name: 'Anker' },\r\n  { id: 11, name: 'Xiaomi' },\r\n  { id: 13, name: 'Samsung' },\r\n  { id: 14, name: 'Apple' },\r\n  { id: 16, name: 'Remax' },\r\n  { id: 17, name: 'Ugreen' },\r\n  { id: 18, name: 'Vivan' },\r\n  { id: 19, name: 'Energizer' },\r\n  { id: 20, name: 'Sony' },\r\n  { id: 21, name: 'JBL' },\r\n  { id: 22, name: 'Logitech' },\r\n  { id: 23, name: 'Rapoo' },\r\n  { id: 24, name: 'Orico' },\r\n  { id: 25, name: 'Havit' },\r\n  { id: 26, name: 'Edifier' },\r\n  { id: 27, name: 'Aukey' },\r\n  { id: 28, name: 'Belkin' },\r\n  { id: 29, name: 'Mophie' },\r\n  { id: 30, name: 'Spigen' },\r\n  { id: 31, name: 'Nillkin' },\r\n  { id: 32, name: 'ESR' },\r\n  { id: 33, name: 'Mazer' },\r\n  { id: 34, name: 'Hyphen' },\r\n  { id: 35, name: 'WiWU' },\r\n  { id: 36, name: 'Pisen' },\r\n  { id: 37, name: 'Yoobao' },\r\n  { id: 38, name: 'iWalk' },\r\n  { id: 39, name: 'Romoss' },\r\n  { id: 40, name: 'Tronsmart' },\r\n  { id: 41, name: 'QCY' },\r\n  { id: 42, name: 'Lenovo' },\r\n  { id: 43, name: 'Huawei' },\r\n  { id: 44, name: 'Oppo' },\r\n  { id: 45, name: 'Vivo' },\r\n  { id: 46, name: 'Realme' },\r\n  { id: 47, name: 'Nothing' },\r\n  { id: 100, name: 'Kh√¥ng th∆∞∆°ng hi·ªáu' },\r\n  { id: 101, name: 'OEM' },\r\n  { id: 102, name: 'Noname' },\r\n];\r\n\r\n/**\r\n * API Configuration\r\n */\r\nexport const PKGX_API_CONFIG = {\r\n  baseUrl: 'https://phukiengiaxuong.com.vn/admin/api_product_hrm.php',\r\n  cdnUrl: 'https://phukiengiaxuong.com.vn/cdn/',\r\n  defaultApiKey: 'a91f2c47e5d8b6f03a7c4e9d12f0b8a6',\r\n  \r\n  // Rate limiting\r\n  maxRequestsPerMinute: 60,\r\n  requestTimeout: 30000, // 30 seconds\r\n  \r\n  // Pagination\r\n  defaultPageSize: 50,\r\n  maxPageSize: 100,\r\n};\r\n\r\n/**\r\n * Field mapping reference\r\n */\r\nexport const FIELD_MAPPING_REFERENCE = {\r\n  // HRM Field ‚Üí PKGX Field\r\n  'pkgxId': 'goods_id',\r\n  'id': 'goods_sn',\r\n  'name': 'goods_name',\r\n  'categorySystemId': 'cat_id',\r\n  'brandSystemId': 'brand_id',\r\n  'description': 'goods_desc',\r\n  'shortDescription': 'goods_brief',\r\n  'ktitle': 'meta_title',\r\n  'seoDescription': 'meta_desc',\r\n  'tags': 'keywords',\r\n  'thumbnailImage': 'original_img',\r\n  'isFeatured': 'is_best',\r\n  'isNewArrival': 'is_new',\r\n  'isPublished': 'is_on_sale',\r\n  'slug': 'slug',\r\n} as const;\r\n\r\n/**\r\n * PKGX Price field descriptions\r\n */\r\nexport const PKGX_PRICE_FIELDS = [\r\n  { key: 'shopPrice', field: 'shop_price', label: 'Gi√° b√°n (shop_price)', description: 'Gi√° b√°n ch√≠nh tr√™n website' },\r\n  { key: 'marketPrice', field: 'market_price', label: 'Gi√° th·ªã tr∆∞·ªùng (market_price)', description: 'Gi√° ni√™m y·∫øt / gi√° g·ªëc' },\r\n  { key: 'partnerPrice', field: 'partner_price', label: 'Gi√° ƒë·ªëi t√°c (partner_price)', description: 'Gi√° d√†nh cho ƒë·ªëi t√°c' },\r\n  { key: 'acePrice', field: 'ace_price', label: 'Gi√° ACE (ace_price)', description: 'Gi√° ƒë·∫∑c bi·ªát ACE' },\r\n  { key: 'dealPrice', field: 'deal_price', label: 'Gi√° deal (deal_price)', description: 'Gi√° khuy·∫øn m√£i' },\r\n] as const;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3840, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/settings/pkgx/store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport type { SystemId } from '@/lib/id-types';\r\nimport type {\r\n  PkgxSettings,\r\n  PkgxCategory,\r\n  PkgxBrand,\r\n  PkgxCategoryMapping,\r\n  PkgxBrandMapping,\r\n  PkgxPriceMapping,\r\n  PkgxSyncSettings,\r\n  PkgxSyncResult,\r\n  PkgxSyncLog,\r\n  PkgxProduct,\r\n} from './types';\r\nimport { DEFAULT_PKGX_SETTINGS } from './types';\r\nimport { PKGX_CATEGORIES, PKGX_BRANDS } from './constants';\r\nimport { getCategories as fetchPkgxCategories, getBrands as fetchPkgxBrands } from '@/lib/pkgx/api-service';\r\nimport { getCurrentUserInfo } from '@/contexts/auth-context';\r\n\r\n// ========================================\r\n// Store Interface\r\n// ========================================\r\n\r\ninterface PkgxSettingsStore {\r\n  // === State ===\r\n  settings: PkgxSettings;\r\n  isLoading: boolean;\r\n  isSaving: boolean;\r\n  \r\n  // === General Config Actions ===\r\n  setApiUrl: (url: string) => void;\r\n  setApiKey: (key: string) => void;\r\n  setEnabled: (enabled: boolean) => void;\r\n  \r\n  // === Reference Data Actions ===\r\n  setCategories: (categories: PkgxCategory[]) => void;\r\n  addCategory: (category: PkgxCategory) => void;\r\n  updateCategory: (id: number, updates: Partial<PkgxCategory>) => void;\r\n  deleteCategory: (id: number) => void;\r\n  \r\n  setBrands: (brands: PkgxBrand[]) => void;\r\n  addBrand: (brand: PkgxBrand) => void;\r\n  updateBrand: (id: number, updates: Partial<PkgxBrand>) => void;\r\n  deleteBrand: (id: number) => void;\r\n  \r\n  // === Mapping Actions ===\r\n  setPriceMapping: (mapping: PkgxPriceMapping) => void;\r\n  updatePriceMapping: (field: keyof PkgxPriceMapping, policyId: SystemId | null) => void;\r\n  \r\n  setCategoryMappings: (mappings: PkgxCategoryMapping[]) => void;\r\n  addCategoryMapping: (mapping: PkgxCategoryMapping) => void;\r\n  updateCategoryMapping: (id: string, updates: Partial<PkgxCategoryMapping>) => void;\r\n  deleteCategoryMapping: (id: string) => void;\r\n  \r\n  setBrandMappings: (mappings: PkgxBrandMapping[]) => void;\r\n  addBrandMapping: (mapping: PkgxBrandMapping) => void;\r\n  updateBrandMapping: (id: string, updates: Partial<PkgxBrandMapping>) => void;\r\n  deleteBrandMapping: (id: string) => void;\r\n  \r\n  // === Sync Settings Actions ===\r\n  setSyncSettings: (settings: PkgxSyncSettings) => void;\r\n  updateSyncSetting: <K extends keyof PkgxSyncSettings>(key: K, value: PkgxSyncSettings[K]) => void;\r\n  \r\n  // === Log Actions ===\r\n  addLog: (log: Omit<PkgxSyncLog, 'id' | 'timestamp'>) => void;\r\n  clearLogs: () => void;\r\n  \r\n  // === Sync Actions ===\r\n  syncCategoriesFromPkgx: () => Promise<void>;\r\n  syncBrandsFromPkgx: () => Promise<void>;\r\n  \r\n  // === PKGX Products Cache Actions ===\r\n  setPkgxProducts: (products: PkgxProduct[]) => void;\r\n  clearPkgxProducts: () => void;\r\n  \r\n  // === Status Actions ===\r\n  setLastSyncAt: (timestamp: string) => void;\r\n  setLastSyncResult: (result: PkgxSyncResult) => void;\r\n  setConnectionStatus: (status: 'connected' | 'disconnected' | 'error', error?: string) => void;\r\n  \r\n  // === Utility Actions ===\r\n  loadDefaultData: () => void;\r\n  resetSettings: () => void;\r\n  setLoading: (loading: boolean) => void;\r\n  setSaving: (saving: boolean) => void;\r\n  \r\n  // === Getters ===\r\n  getCategoryById: (id: number) => PkgxCategory | undefined;\r\n  getBrandById: (id: number) => PkgxBrand | undefined;\r\n  getCategoryMappingByHrmId: (hrmCategoryId: SystemId) => PkgxCategoryMapping | undefined;\r\n  getBrandMappingByHrmId: (hrmBrandId: SystemId) => PkgxBrandMapping | undefined;\r\n  getPkgxCatIdByHrmCategory: (hrmCategoryId: SystemId) => number | null;\r\n  getPkgxBrandIdByHrmBrand: (hrmBrandId: SystemId) => number | null;\r\n  \r\n  // === API Sync ===\r\n  initialized: boolean;\r\n  loadFromAPI: () => Promise<void>;\r\n}\r\n\r\n// ========================================\r\n// API Sync Helper\r\n// ========================================\r\nasync function syncPkgxSettingsToAPI(settings: Partial<PkgxSettings>): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/settings/pkgx', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n      body: JSON.stringify(settings),\r\n    });\r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('[PKGX Settings API] sync error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// ========================================\r\n// Store Implementation\r\n// ========================================\r\n\r\nexport const usePkgxSettingsStore = create<PkgxSettingsStore>()(\r\n  (set, get) => ({\r\n      // === Initial State ===\r\n      settings: {\r\n        ...DEFAULT_PKGX_SETTINGS,\r\n        categories: PKGX_CATEGORIES,\r\n        brands: PKGX_BRANDS,\r\n      },\r\n      isLoading: false,\r\n      isSaving: false,\r\n      initialized: false,\r\n      \r\n      // === General Config Actions ===\r\n      setApiUrl: (url) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, apiUrl: url },\r\n        })),\r\n        \r\n      setApiKey: (key) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, apiKey: key },\r\n        })),\r\n        \r\n      setEnabled: (enabled) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, enabled },\r\n        })),\r\n      \r\n      // === Reference Data Actions ===\r\n      setCategories: (categories) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, categories },\r\n        })),\r\n        \r\n      addCategory: (category) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            categories: [...state.settings.categories, category],\r\n          },\r\n        })),\r\n        \r\n      updateCategory: (id, updates) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            categories: state.settings.categories.map((c) =>\r\n              c.id === id ? { ...c, ...updates } : c\r\n            ),\r\n          },\r\n        })),\r\n        \r\n      deleteCategory: (id) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            categories: state.settings.categories.filter((c) => c.id !== id),\r\n            // Also remove related mappings\r\n            categoryMappings: state.settings.categoryMappings.filter(\r\n              (m) => m.pkgxCatId !== id\r\n            ),\r\n          },\r\n        })),\r\n      \r\n      setBrands: (brands) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, brands },\r\n        })),\r\n        \r\n      addBrand: (brand) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            brands: [...state.settings.brands, brand],\r\n          },\r\n        })),\r\n        \r\n      updateBrand: (id, updates) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            brands: state.settings.brands.map((b) =>\r\n              b.id === id ? { ...b, ...updates } : b\r\n            ),\r\n          },\r\n        })),\r\n        \r\n      deleteBrand: (id) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            brands: state.settings.brands.filter((b) => b.id !== id),\r\n            // Also remove related mappings\r\n            brandMappings: state.settings.brandMappings.filter(\r\n              (m) => m.pkgxBrandId !== id\r\n            ),\r\n          },\r\n        })),\r\n      \r\n      // === Mapping Actions ===\r\n      setPriceMapping: (mapping) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, priceMapping: mapping },\r\n        })),\r\n        \r\n      updatePriceMapping: (field, policyId) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            priceMapping: {\r\n              ...state.settings.priceMapping,\r\n              [field]: policyId,\r\n            },\r\n          },\r\n        })),\r\n      \r\n      setCategoryMappings: (mappings) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, categoryMappings: mappings },\r\n        })),\r\n        \r\n      addCategoryMapping: (mapping) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            categoryMappings: [...state.settings.categoryMappings, mapping],\r\n          },\r\n        })),\r\n        \r\n      updateCategoryMapping: (id, updates) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            categoryMappings: state.settings.categoryMappings.map((m) =>\r\n              m.id === id ? { ...m, ...updates } : m\r\n            ),\r\n          },\r\n        })),\r\n        \r\n      deleteCategoryMapping: (id) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            categoryMappings: state.settings.categoryMappings.filter(\r\n              (m) => m.id !== id\r\n            ),\r\n          },\r\n        })),\r\n      \r\n      setBrandMappings: (mappings) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, brandMappings: mappings },\r\n        })),\r\n        \r\n      addBrandMapping: (mapping) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            brandMappings: [...state.settings.brandMappings, mapping],\r\n          },\r\n        })),\r\n        \r\n      updateBrandMapping: (id, updates) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            brandMappings: state.settings.brandMappings.map((m) =>\r\n              m.id === id ? { ...m, ...updates } : m\r\n            ),\r\n          },\r\n        })),\r\n        \r\n      deleteBrandMapping: (id) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            brandMappings: state.settings.brandMappings.filter(\r\n              (m) => m.id !== id\r\n            ),\r\n          },\r\n        })),\r\n      \r\n      // === Sync Settings Actions ===\r\n      setSyncSettings: (syncSettings) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, syncSettings },\r\n        })),\r\n        \r\n      updateSyncSetting: (key, value) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            syncSettings: {\r\n              ...state.settings.syncSettings,\r\n              [key]: value,\r\n            },\r\n          },\r\n        })),\r\n      \r\n      // === Log Actions ===\r\n      addLog: (log) => {\r\n        // L·∫•y th√¥ng tin user hi·ªán t·∫°i\r\n        const userInfo = getCurrentUserInfo();\r\n        \r\n        const newLog: PkgxSyncLog = {\r\n          ...log,\r\n          id: `log-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,\r\n          timestamp: new Date().toISOString(),\r\n          userId: userInfo.systemId,\r\n          userName: userInfo.name,\r\n        };\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            logs: [newLog, ...state.settings.logs].slice(0, 100), // Keep last 100 logs\r\n          },\r\n        }));\r\n      },\r\n      \r\n      clearLogs: () =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, logs: [] },\r\n        })),\r\n      \r\n      // === Sync Actions ===\r\n      syncCategoriesFromPkgx: async () => {\r\n        const { addLog, setCategories } = get();\r\n        try {\r\n          const response = await fetchPkgxCategories();\r\n          if (response.success && response.data && !response.data.error) {\r\n            // Map API response to PkgxCategory format\r\n            const categories: PkgxCategory[] = response.data.data.map((cat) => ({\r\n              id: cat.cat_id,\r\n              name: cat.cat_name,\r\n              parentId: cat.parent_id > 0 ? cat.parent_id : undefined,\r\n            }));\r\n            \r\n            // Replace all categories with fresh data from server\r\n            setCategories(categories);\r\n            addLog({\r\n              action: 'sync_categories',\r\n              status: 'success',\r\n              message: `ƒê√£ ƒë·ªìng b·ªô ${categories.length} danh m·ª•c t·ª´ PKGX`,\r\n              details: { total: categories.length, success: categories.length, failed: 0 },\r\n            });\r\n          } else {\r\n            throw new Error(response.error || response.data?.message || 'Kh√¥ng th·ªÉ l·∫•y danh s√°ch danh m·ª•c');\r\n          }\r\n        } catch (error) {\r\n          addLog({\r\n            action: 'sync_categories',\r\n            status: 'error',\r\n            message: 'L·ªói khi ƒë·ªìng b·ªô danh m·ª•c t·ª´ PKGX',\r\n            details: { error: error instanceof Error ? error.message : String(error) },\r\n          });\r\n          throw error; // Re-throw to let UI handle\r\n        }\r\n      },\r\n      \r\n      syncBrandsFromPkgx: async () => {\r\n        const { addLog, setBrands } = get();\r\n        try {\r\n          const response = await fetchPkgxBrands();\r\n          if (response.success && response.data && !response.data.error) {\r\n            // Map API response to PkgxBrand format\r\n            const brands: PkgxBrand[] = response.data.data.map((brand) => ({\r\n              id: brand.brand_id,\r\n              name: brand.brand_name,\r\n            }));\r\n            \r\n            // Replace all brands with fresh data from server\r\n            setBrands(brands);\r\n            addLog({\r\n              action: 'sync_brands',\r\n              status: 'success',\r\n              message: `ƒê√£ ƒë·ªìng b·ªô ${brands.length} th∆∞∆°ng hi·ªáu t·ª´ PKGX`,\r\n              details: { total: brands.length, success: brands.length, failed: 0 },\r\n            });\r\n          } else {\r\n            throw new Error(response.error || response.data?.message || 'Kh√¥ng th·ªÉ l·∫•y danh s√°ch th∆∞∆°ng hi·ªáu');\r\n          }\r\n        } catch (error) {\r\n          addLog({\r\n            action: 'sync_brands',\r\n            status: 'error',\r\n            message: 'L·ªói khi ƒë·ªìng b·ªô th∆∞∆°ng hi·ªáu t·ª´ PKGX',\r\n            details: { error: error instanceof Error ? error.message : String(error) },\r\n          });\r\n          throw error; // Re-throw to let UI handle\r\n        }\r\n      },\r\n      \r\n      // === PKGX Products Cache Actions ===\r\n      setPkgxProducts: (products) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            pkgxProducts: products,\r\n            pkgxProductsLastFetch: new Date().toISOString(),\r\n          },\r\n        })),\r\n        \r\n      clearPkgxProducts: () =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            pkgxProducts: [],\r\n            pkgxProductsLastFetch: undefined,\r\n          },\r\n        })),\r\n      \r\n      // === Status Actions ===\r\n      setLastSyncAt: (timestamp) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, lastSyncAt: timestamp },\r\n        })),\r\n        \r\n      setLastSyncResult: (result) =>\r\n        set((state) => ({\r\n          settings: { ...state.settings, lastSyncResult: result },\r\n        })),\r\n        \r\n      setConnectionStatus: (status, error) =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            connectionStatus: status,\r\n            connectionError: error,\r\n          },\r\n        })),\r\n      \r\n      // === Utility Actions ===\r\n      loadDefaultData: () =>\r\n        set((state) => ({\r\n          settings: {\r\n            ...state.settings,\r\n            categories: PKGX_CATEGORIES,\r\n            brands: PKGX_BRANDS,\r\n          },\r\n        })),\r\n        \r\n      resetSettings: () =>\r\n        set({\r\n          settings: {\r\n            ...DEFAULT_PKGX_SETTINGS,\r\n            categories: PKGX_CATEGORIES,\r\n            brands: PKGX_BRANDS,\r\n          },\r\n        }),\r\n        \r\n      setLoading: (isLoading) => set({ isLoading }),\r\n      setSaving: (isSaving) => set({ isSaving }),\r\n      \r\n      // === Getters ===\r\n      getCategoryById: (id) =>\r\n        get().settings.categories.find((c) => c.id === id),\r\n        \r\n      getBrandById: (id) =>\r\n        get().settings.brands.find((b) => b.id === id),\r\n        \r\n      getCategoryMappingByHrmId: (hrmCategoryId) =>\r\n        get().settings.categoryMappings.find(\r\n          (m) => m.hrmCategorySystemId === hrmCategoryId\r\n        ),\r\n        \r\n      getBrandMappingByHrmId: (hrmBrandId) =>\r\n        get().settings.brandMappings.find(\r\n          (m) => m.hrmBrandSystemId === hrmBrandId\r\n        ),\r\n        \r\n      getPkgxCatIdByHrmCategory: (hrmCategoryId) => {\r\n        const mapping = get().settings.categoryMappings.find(\r\n          (m) => m.hrmCategorySystemId === hrmCategoryId\r\n        );\r\n        return mapping?.pkgxCatId ?? null;\r\n      },\r\n      \r\n      getPkgxBrandIdByHrmBrand: (hrmBrandId) => {\r\n        const mapping = get().settings.brandMappings.find(\r\n          (m) => m.hrmBrandSystemId === hrmBrandId\r\n        );\r\n        return mapping?.pkgxBrandId ?? null;\r\n      },\r\n      \r\n      loadFromAPI: async () => {\r\n        if (get().initialized) return;\r\n        \r\n        try {\r\n          const response = await fetch('/api/settings/pkgx', {\r\n            credentials: 'include',\r\n          });\r\n          if (response.ok) {\r\n            const json = await response.json();\r\n            const data = json.data || json.settings;\r\n            if (data) {\r\n              set({ \r\n                settings: { \r\n                  ...DEFAULT_PKGX_SETTINGS, \r\n                  categories: PKGX_CATEGORIES,\r\n                  brands: PKGX_BRANDS,\r\n                  ...data \r\n                },\r\n                initialized: true \r\n              });\r\n            } else {\r\n              set({ initialized: true });\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error('[PKGX Settings Store] loadFromAPI error:', error);\r\n        }\r\n      },\r\n    })\r\n);\r\n\r\n// ========================================\r\n// Selector Hooks\r\n// ========================================\r\n\r\nexport function usePkgxEnabled() {\r\n  return usePkgxSettingsStore((state) => state.settings.enabled);\r\n}\r\n\r\nexport function usePkgxApiConfig() {\r\n  return usePkgxSettingsStore((state) => ({\r\n    apiUrl: state.settings.apiUrl,\r\n    apiKey: state.settings.apiKey,\r\n    enabled: state.settings.enabled,\r\n  }));\r\n}\r\n\r\nexport function usePkgxCategories() {\r\n  return usePkgxSettingsStore((state) => state.settings.categories);\r\n}\r\n\r\nexport function usePkgxBrands() {\r\n  return usePkgxSettingsStore((state) => state.settings.brands);\r\n}\r\n\r\nexport function usePkgxPriceMapping() {\r\n  return usePkgxSettingsStore((state) => state.settings.priceMapping);\r\n}\r\n\r\nexport function usePkgxCategoryMappings() {\r\n  return usePkgxSettingsStore((state) => state.settings.categoryMappings);\r\n}\r\n\r\nexport function usePkgxBrandMappings() {\r\n  return usePkgxSettingsStore((state) => state.settings.brandMappings);\r\n}\r\n\r\nexport function usePkgxSyncSettings() {\r\n  return usePkgxSettingsStore((state) => state.settings.syncSettings);\r\n}\r\n\r\nexport function usePkgxSyncStatus() {\r\n  return usePkgxSettingsStore((state) => ({\r\n    lastSyncAt: state.settings.lastSyncAt,\r\n    lastSyncResult: state.settings.lastSyncResult,\r\n    connectionStatus: state.settings.connectionStatus,\r\n    connectionError: state.settings.connectionError,\r\n  }));\r\n}\r\n\r\nexport function usePkgxProducts() {\r\n  return usePkgxSettingsStore((state) => ({\r\n    products: state.settings.pkgxProducts,\r\n    lastFetch: state.settings.pkgxProductsLastFetch,\r\n  }));\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4327, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/pkgx/api-service.ts"],"sourcesContent":["import { usePkgxSettingsStore } from '../../features/settings/pkgx/store';\r\nimport type {\r\n  PkgxProduct,\r\n  PkgxProductsResponse,\r\n  PkgxProductPayload,\r\n  PkgxImageUploadResponse,\r\n  PkgxCategoriesResponse,\r\n  PkgxBrandsResponse,\r\n  PkgxBrandFromApi,\r\n  PkgxGalleryResponse,\r\n  PkgxGalleryImage,\r\n} from '../../features/settings/pkgx/types';\r\nimport { PKGX_API_CONFIG } from '../../features/settings/pkgx/constants';\r\n\r\n// ========================================\r\n// Types\r\n// ========================================\r\n\r\ntype ApiResponse<T> = {\r\n  success: boolean;\r\n  data?: T;\r\n  error?: string;\r\n};\r\n\r\ntype CreateProductResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  goods_id: number;\r\n  created_slug: string;\r\n};\r\n\r\ntype UpdateProductResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  goods_id: number;\r\n  updated_slug?: string;\r\n};\r\n\r\n// ========================================\r\n// Helper Functions\r\n// ========================================\r\n\r\nfunction getApiConfig() {\r\n  const { settings } = usePkgxSettingsStore.getState();\r\n  return {\r\n    apiUrl: settings.apiUrl || PKGX_API_CONFIG.baseUrl,\r\n    apiKey: settings.apiKey,\r\n    enabled: settings.enabled,\r\n  };\r\n}\r\n\r\nasync function fetchWithAuth<T>(url: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\r\n  const { apiKey, enabled } = getApiConfig();\r\n\r\n  if (!enabled) {\r\n    return { success: false, error: 'T√≠ch h·ª£p PKGX ch∆∞a ƒë∆∞·ª£c b·∫≠t' };\r\n  }\r\n\r\n  if (!apiKey) {\r\n    return { success: false, error: 'Ch∆∞a c·∫•u h√¨nh API Key' };\r\n  }\r\n\r\n  // DEBUG: Log request details\r\n  console.log('[PKGX fetchWithAuth] URL:', url);\r\n  console.log('[PKGX fetchWithAuth] Method:', options.method || 'GET');\r\n  console.log('[PKGX fetchWithAuth] Headers:', options.headers);\r\n  if (options.body) {\r\n    console.log('[PKGX fetchWithAuth] Body (raw):', options.body);\r\n    console.log('[PKGX fetchWithAuth] Body type:', typeof options.body);\r\n  }\r\n\r\n  try {\r\n    const fetchOptions: RequestInit = {\r\n      ...options,\r\n      mode: 'cors',\r\n      credentials: 'omit',\r\n      headers: {\r\n        'X-API-KEY': apiKey,\r\n        'Content-Type': 'application/json',\r\n        ...options.headers,\r\n      },\r\n    };\r\n    console.log('[PKGX fetchWithAuth] Full fetch options:', JSON.stringify(fetchOptions, null, 2));\r\n    \r\n    const response = await fetch(url, fetchOptions);\r\n\r\n    const responseText = await response.text();\r\n    console.log('[PKGX fetchWithAuth] Response text:', responseText);\r\n    \r\n    const data = JSON.parse(responseText);\r\n    \r\n    // DEBUG: Log response\r\n    console.log('[PKGX fetchWithAuth] Response status:', response.status);\r\n    console.log('[PKGX fetchWithAuth] Response data:', data);\r\n\r\n    if (data.error) {\r\n      return { success: false, error: data.message || 'L·ªói t·ª´ server PKGX' };\r\n    }\r\n\r\n    return { success: true, data };\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server PKGX',\r\n    };\r\n  }\r\n}\r\n\r\n// ========================================\r\n// API Functions\r\n// ========================================\r\n\r\n/**\r\n * L·∫•y danh s√°ch danh m·ª•c t·ª´ PKGX\r\n */\r\nexport async function getCategories(): Promise<ApiResponse<PkgxCategoriesResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=get_categories`;\r\n  return fetchWithAuth<PkgxCategoriesResponse>(url, { method: 'GET' });\r\n}\r\n\r\n/**\r\n * L·∫•y danh s√°ch th∆∞∆°ng hi·ªáu t·ª´ PKGX\r\n */\r\nexport async function getBrands(): Promise<ApiResponse<PkgxBrandsResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=get_brands`;\r\n  return fetchWithAuth<PkgxBrandsResponse>(url, { method: 'GET' });\r\n}\r\n\r\n/**\r\n * L·∫•y chi ti·∫øt 1 th∆∞∆°ng hi·ªáu t·ª´ PKGX theo brand_id\r\n */\r\nexport async function getBrandById(brandId: number): Promise<ApiResponse<PkgxBrandFromApi | null>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=get_brands&brand_id=${brandId}`;\r\n  \r\n  const response = await fetchWithAuth<{ error: boolean; message: string; data: PkgxBrandFromApi }>(url, { method: 'GET' });\r\n  \r\n  if (!response.success || !response.data) {\r\n    return { success: false, error: response.error };\r\n  }\r\n  \r\n  return { success: true, data: response.data.data };\r\n}\r\n\r\n/**\r\n * L·∫•y danh s√°ch s·∫£n ph·∫©m t·ª´ PKGX (c√≥ ph√¢n trang)\r\n */\r\nexport async function getProducts(\r\n  page: number = 1,\r\n  limit: number = 50\r\n): Promise<ApiResponse<PkgxProductsResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=get_products&page=${page}&limit=${limit}`;\r\n  return fetchWithAuth<PkgxProductsResponse>(url, { method: 'GET' });\r\n}\r\n\r\n/**\r\n * L·∫•y t·∫•t c·∫£ s·∫£n ph·∫©m t·ª´ PKGX (t·ª± ƒë·ªông ph√¢n trang)\r\n */\r\nexport async function getAllProducts(): Promise<ApiResponse<PkgxProduct[]>> {\r\n  const allProducts: PkgxProduct[] = [];\r\n  let currentPage = 1;\r\n  let totalPages = 1;\r\n\r\n  while (currentPage <= totalPages) {\r\n    const response = await getProducts(currentPage, 100);\r\n\r\n    if (!response.success || !response.data) {\r\n      return { success: false, error: response.error };\r\n    }\r\n\r\n    allProducts.push(...response.data.data);\r\n    totalPages = response.data.pagination.total_pages;\r\n    currentPage++;\r\n  }\r\n\r\n  return { success: true, data: allProducts };\r\n}\r\n\r\n/**\r\n * L·∫•y s·∫£n ph·∫©m theo goods_id (s·ª≠ d·ª•ng API get_products v·ªõi filter)\r\n */\r\nexport async function getProductById(goodsId: number): Promise<ApiResponse<PkgxProduct | null>> {\r\n  const { apiUrl } = getApiConfig();\r\n  // API kh√¥ng c√≥ action=get_product, d√πng get_products v·ªõi goods_id filter\r\n  const url = `${apiUrl}?action=get_products&goods_id=${goodsId}`;\r\n  \r\n  const response = await fetchWithAuth<PkgxProductsResponse>(url, { method: 'GET' });\r\n  \r\n  if (!response.success || !response.data) {\r\n    return { success: false, error: response.error };\r\n  }\r\n  \r\n  // Tr·∫£ v·ªÅ s·∫£n ph·∫©m ƒë·∫ßu ti√™n n·∫øu c√≥\r\n  const product = response.data.data?.[0] || null;\r\n  return { success: true, data: product };\r\n}\r\n\r\n/**\r\n * L·∫•y gallery ·∫£nh s·∫£n ph·∫©m theo goods_id\r\n * Note: C·∫ßn API endpoint `get_gallery` tr√™n server PKGX\r\n */\r\nexport async function getProductGallery(goodsId: number): Promise<ApiResponse<PkgxGalleryImage[]>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=get_gallery&goods_id=${goodsId}`;\r\n  \r\n  try {\r\n    const response = await fetchWithAuth<PkgxGalleryResponse>(url, { method: 'GET' });\r\n    \r\n    // Debug log\r\n    console.log('Gallery API response:', response);\r\n    \r\n    if (!response.success) {\r\n      // N·∫øu API ch∆∞a c√≥ ho·∫∑c l·ªói, tr·∫£ v·ªÅ m·∫£ng r·ªóng\r\n      console.log('Gallery API error:', response.error);\r\n      return { success: true, data: [] };\r\n    }\r\n    \r\n    // response.data ch·ª©a to√†n b·ªô response t·ª´ API: { error, message, goods_id, total, data }\r\n    const galleryData = response.data as PkgxGalleryResponse;\r\n    return { success: true, data: galleryData.data || [] };\r\n  } catch (error) {\r\n    console.error('Gallery API exception:', error);\r\n    return { success: true, data: [] }; // Fallback to empty array\r\n  }\r\n}\r\n\r\n/**\r\n * T·∫°o s·∫£n ph·∫©m m·ªõi tr√™n PKGX\r\n */\r\nexport async function createProduct(\r\n  payload: PkgxProductPayload\r\n): Promise<ApiResponse<CreateProductResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=create_product`;\r\n\r\n  return fetchWithAuth<CreateProductResponse>(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t s·∫£n ph·∫©m tr√™n PKGX\r\n */\r\nexport async function updateProduct(\r\n  goodsId: number,\r\n  payload: Partial<PkgxProductPayload>\r\n): Promise<ApiResponse<UpdateProductResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=update_product&goods_id=${goodsId}`;\r\n\r\n  return fetchWithAuth<UpdateProductResponse>(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t gi√° s·∫£n ph·∫©m\r\n */\r\nexport async function updateProductPrice(\r\n  goodsId: number,\r\n  prices: {\r\n    shop_price?: number;\r\n    market_price?: number;\r\n    partner_price?: number;\r\n    ace_price?: number;\r\n    deal_price?: number;\r\n  }\r\n): Promise<ApiResponse<UpdateProductResponse>> {\r\n  return updateProduct(goodsId, prices);\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t SEO s·∫£n ph·∫©m\r\n */\r\nexport async function updateProductSeo(\r\n  goodsId: number,\r\n  seo: {\r\n    meta_title?: string;\r\n    meta_desc?: string;\r\n    keywords?: string;\r\n  }\r\n): Promise<ApiResponse<UpdateProductResponse>> {\r\n  return updateProduct(goodsId, seo);\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t t·ªìn kho s·∫£n ph·∫©m\r\n */\r\nexport async function updateProductStock(\r\n  goodsId: number,\r\n  goodsNumber: number\r\n): Promise<ApiResponse<UpdateProductResponse>> {\r\n  return updateProduct(goodsId, { goods_number: goodsNumber });\r\n}\r\n\r\n/**\r\n * Upload ·∫£nh s·∫£n ph·∫©m l√™n PKGX\r\n */\r\nexport async function uploadProductImage(\r\n  imageFile: File,\r\n  options?: {\r\n    filenameSlug?: string;\r\n    goodsId?: number;\r\n  }\r\n): Promise<ApiResponse<PkgxImageUploadResponse>> {\r\n  const { apiUrl, apiKey, enabled } = getApiConfig();\r\n\r\n  if (!enabled) {\r\n    return { success: false, error: 'T√≠ch h·ª£p PKGX ch∆∞a ƒë∆∞·ª£c b·∫≠t' };\r\n  }\r\n\r\n  if (!apiKey) {\r\n    return { success: false, error: 'Ch∆∞a c·∫•u h√¨nh API Key' };\r\n  }\r\n\r\n  const url = `${apiUrl}?action=upload_product_image`;\r\n  const formData = new FormData();\r\n  formData.append('image_file', imageFile);\r\n\r\n  if (options?.filenameSlug) {\r\n    formData.append('filename_slug', options.filenameSlug);\r\n  }\r\n\r\n  if (options?.goodsId) {\r\n    formData.append('goods_id', options.goodsId.toString());\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: { 'X-API-KEY': apiKey },\r\n      body: formData,\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.error) {\r\n      return { success: false, error: data.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Kh√¥ng th·ªÉ upload ·∫£nh',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Upload ·∫£nh t·ª´ URL (server-to-server, tr√°nh CORS)\r\n * Server PKGX s·∫Ω t·ª± download ·∫£nh t·ª´ URL r·ªìi x·ª≠ l√Ω\r\n */\r\nexport async function uploadImageFromUrl(\r\n  imageUrl: string,\r\n  options?: {\r\n    filenameSlug?: string;\r\n    goodsId?: number;\r\n  }\r\n): Promise<ApiResponse<PkgxImageUploadResponse>> {\r\n  const { apiUrl, apiKey, enabled } = getApiConfig();\r\n\r\n  if (!enabled) {\r\n    return { success: false, error: 'T√≠ch h·ª£p PKGX ch∆∞a ƒë∆∞·ª£c b·∫≠t' };\r\n  }\r\n\r\n  if (!apiKey) {\r\n    return { success: false, error: 'Ch∆∞a c·∫•u h√¨nh API Key' };\r\n  }\r\n\r\n  const url = `${apiUrl}?action=upload_image_from_url`;\r\n  \r\n  const payload: Record<string, unknown> = {\r\n    image_url: imageUrl,\r\n  };\r\n\r\n  if (options?.filenameSlug) {\r\n    payload.filename_slug = options.filenameSlug;\r\n  }\r\n\r\n  if (options?.goodsId) {\r\n    payload.goods_id = options.goodsId;\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: { \r\n        'X-API-KEY': apiKey,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.error) {\r\n      return { success: false, error: data.message };\r\n    }\r\n\r\n    return { success: true, data };\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Kh√¥ng th·ªÉ upload ·∫£nh t·ª´ URL',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * L·∫•y chi ti·∫øt danh m·ª•c theo cat_id (bao g·ªìm SEO fields)\r\n */\r\nexport async function getCategoryById(catId: number): Promise<ApiResponse<PkgxCategoriesResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=get_categories&cat_id=${catId}`;\r\n  return fetchWithAuth<PkgxCategoriesResponse>(url, { method: 'GET' });\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t th√¥ng tin danh m·ª•c (SEO, m√¥ t·∫£)\r\n * \r\n * C√°c tr∆∞·ªùng h·ªó tr·ª£:\r\n * - cat_name: T√™n danh m·ª•c\r\n * - cat_desc: M√¥ t·∫£ chi ti·∫øt (HTML) - t∆∞∆°ng ƒë∆∞∆°ng longDescription\r\n * - keywords: T·ª´ kh√≥a SEO - t∆∞∆°ng ƒë∆∞∆°ng seoKeywords\r\n * - cat_alias: Slug URL\r\n * - meta_title: Ti√™u ƒë·ªÅ SEO (NEW)\r\n * - meta_desc: M√¥ t·∫£ SEO (NEW)\r\n * - short_desc: M√¥ t·∫£ ng·∫Øn (NEW)\r\n */\r\nexport async function updateCategory(\r\n  catId: number,\r\n  payload: {\r\n    cat_name?: string;\r\n    cat_desc?: string;  // M√¥ t·∫£ ng·∫Øn (shortDescription)\r\n    long_desc?: string; // M√¥ t·∫£ d√†i (longDescription) - HTML\r\n    keywords?: string;\r\n    cat_alias?: string;\r\n    // SEO fields\r\n    meta_title?: string;\r\n    meta_desc?: string;\r\n  }\r\n): Promise<ApiResponse<{ error: boolean; message: string; cat_id: number }>> {\r\n  const { apiUrl } = getApiConfig();\r\n  // Add timestamp to bust cache\r\n  const timestamp = Date.now();\r\n  const url = `${apiUrl}?action=update_category&cat_id=${catId}&_t=${timestamp}`;\r\n\r\n  console.log('[updateCategory] Calling with catId:', catId, 'payload:', payload);\r\n\r\n  return fetchWithAuth(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t th√¥ng tin c∆° b·∫£n danh m·ª•c (t√™n, parent, hi·ªÉn th·ªã)\r\n * URL: POST ?action=update_category_basic&cat_id=123\r\n * \r\n * C√°c tr∆∞·ªùng h·ªó tr·ª£:\r\n * - cat_name: T√™n danh m·ª•c\r\n * - parent_id: ID danh m·ª•c cha (0 = g·ªëc)\r\n * - is_show: 1 = Hi·ªÉn th·ªã, 0 = ·∫®n (Display in Category Home)\r\n */\r\nexport async function updateCategoryBasic(\r\n  catId: number,\r\n  payload: {\r\n    cat_name?: string;\r\n    parent_id?: number;\r\n    is_show?: number; // 1 = hi·ªÉn th·ªã, 0 = ·∫©n\r\n  }\r\n): Promise<ApiResponse<{ error: boolean; message: string; cat_id: number; changes?: Record<string, { old: unknown; new: unknown }> }>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const timestamp = Date.now();\r\n  const url = `${apiUrl}?action=update_category_basic&cat_id=${catId}&_t=${timestamp}`;\r\n\r\n  console.log('[updateCategoryBasic] Calling with catId:', catId, 'payload:', payload);\r\n\r\n  return fetchWithAuth(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t th√¥ng tin th∆∞∆°ng hi·ªáu (SEO, m√¥ t·∫£)\r\n * \r\n * C√°c tr∆∞·ªùng h·ªó tr·ª£:\r\n * - brand_name: T√™n th∆∞∆°ng hi·ªáu\r\n * - brand_desc: M√¥ t·∫£ chi ti·∫øt (HTML) - t∆∞∆°ng ƒë∆∞∆°ng longDescription\r\n * - site_url: Website URL\r\n * - keywords: T·ª´ kh√≥a SEO (NEW) - t∆∞∆°ng ƒë∆∞∆°ng seoKeywords\r\n * - meta_title: Ti√™u ƒë·ªÅ SEO (NEW)\r\n * - meta_desc: M√¥ t·∫£ SEO (NEW)\r\n * - short_desc: M√¥ t·∫£ ng·∫Øn (NEW)\r\n * - long_desc: M√¥ t·∫£ d√†i (NEW)\r\n */\r\nexport async function updateBrand(\r\n  brandId: number,\r\n  payload: {\r\n    brand_name?: string;\r\n    brand_desc?: string;\r\n    site_url?: string;\r\n    // SEO fields (NEW)\r\n    keywords?: string;\r\n    meta_title?: string;\r\n    meta_desc?: string;\r\n    short_desc?: string;\r\n    long_desc?: string;\r\n  }\r\n): Promise<ApiResponse<{ error: boolean; message: string; brand_id: number }>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=update_brand&brand_id=${brandId}`;\r\n\r\n  return fetchWithAuth(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(payload),\r\n  });\r\n}\r\n\r\n/**\r\n * Test k·∫øt n·ªëi API\r\n */\r\nexport async function testConnection(): Promise<ApiResponse<{ productCount: number }>> {\r\n  const response = await getProducts(1, 1);\r\n\r\n  if (!response.success) {\r\n    return { success: false, error: response.error };\r\n  }\r\n\r\n  return {\r\n    success: true,\r\n    data: { productCount: response.data?.pagination.total_items || 0 },\r\n  };\r\n}\r\n\r\n// ========================================\r\n// Member Price API (Gi√° th√†nh vi√™n)\r\n// ========================================\r\n\r\ntype MemberRank = {\r\n  rank_id: number;\r\n  rank_name: string;\r\n  min_points: number;\r\n  max_points: number;\r\n  discount: number;\r\n  special_rank: number;\r\n};\r\n\r\ntype MemberRanksResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  total: number;\r\n  data: MemberRank[];\r\n};\r\n\r\ntype MemberPriceResult = {\r\n  user_rank: number;\r\n  rank_name?: string;\r\n  user_price?: number;\r\n  status: 'updated' | 'deleted' | 'skipped';\r\n  reason?: string;\r\n};\r\n\r\ntype CurrentMemberPrice = {\r\n  user_rank: string;\r\n  user_price: string;\r\n  rank_name: string;\r\n};\r\n\r\ntype UpdateMemberPriceResponse = {\r\n  error: boolean;\r\n  message: string;\r\n  goods_id: number;\r\n  goods_name: string;\r\n  results: MemberPriceResult[];\r\n  current_member_prices: CurrentMemberPrice[];\r\n};\r\n\r\n/**\r\n * L·∫•y danh s√°ch h·∫°ng th√†nh vi√™n t·ª´ PKGX\r\n */\r\nexport async function getMemberRanks(): Promise<ApiResponse<MemberRanksResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=get_member_ranks`;\r\n  return fetchWithAuth<MemberRanksResponse>(url, { method: 'GET' });\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t gi√° th√†nh vi√™n cho s·∫£n ph·∫©m\r\n * \r\n * @param goodsId - ID s·∫£n ph·∫©m tr√™n PKGX\r\n * @param memberPrices - M·∫£ng gi√° th√†nh vi√™n theo user_rank\r\n * \r\n * V√≠ d·ª•:\r\n * - C·∫≠p nh·∫≠t 1 gi√°: updateMemberPrice(8014, [{ user_rank: 8, user_price: 2200000 }])\r\n * - C·∫≠p nh·∫≠t nhi·ªÅu: updateMemberPrice(8014, [{ user_rank: 8, user_price: 2200000 }, { user_rank: 9, user_price: 1800000 }])\r\n * - X√≥a gi√° (set = 0): updateMemberPrice(8014, [{ user_rank: 8, user_price: 0 }])\r\n */\r\nexport async function updateMemberPrice(\r\n  goodsId: number,\r\n  memberPrices: Array<{ user_rank: number; user_price: number }>\r\n): Promise<ApiResponse<UpdateMemberPriceResponse>> {\r\n  const { apiUrl } = getApiConfig();\r\n  const url = `${apiUrl}?action=update_member_price&goods_id=${goodsId}`;\r\n\r\n  return fetchWithAuth<UpdateMemberPriceResponse>(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ member_prices: memberPrices }),\r\n  });\r\n}\r\n\r\n/**\r\n * C·∫≠p nh·∫≠t gi√° th√†nh vi√™n theo rank_id ƒë∆°n l·∫ª\r\n */\r\nexport async function updateMemberPriceSingle(\r\n  goodsId: number,\r\n  userRank: number,\r\n  userPrice: number\r\n): Promise<ApiResponse<UpdateMemberPriceResponse>> {\r\n  return updateMemberPrice(goodsId, [{ user_rank: userRank, user_price: userPrice }]);\r\n}\r\n\r\n// ========================================\r\n// HTML Image Processing\r\n// ========================================\r\n\r\n/**\r\n * Ki·ªÉm tra URL c√≥ ph·∫£i l√† URL c√¥ng khai kh√¥ng (kh√¥ng ph·∫£i localhost/internal)\r\n */\r\nfunction isPublicUrl(url: string): boolean {\r\n  try {\r\n    const parsed = new URL(url);\r\n    const hostname = parsed.hostname.toLowerCase();\r\n    \r\n    // Lo·∫°i b·ªè c√°c URL n·ªôi b·ªô\r\n    if (hostname === 'localhost' || \r\n        hostname === '127.0.0.1' ||\r\n        hostname.startsWith('192.168.') ||\r\n        hostname.startsWith('10.') ||\r\n        hostname.endsWith('.local')) {\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Ki·ªÉm tra xem URL c√≥ ph·∫£i l√† ·∫£nh base64 kh√¥ng\r\n */\r\nfunction isBase64Image(url: string): boolean {\r\n  return url.startsWith('data:image/');\r\n}\r\n\r\n/**\r\n * Ki·ªÉm tra xem URL ƒë√£ l√† URL c·ªßa PKGX CDN ch∆∞a\r\n */\r\nfunction isPkgxCdnUrl(url: string): boolean {\r\n  return url.includes('phukiengiaxuong.com.vn/cdn/');\r\n}\r\n\r\n/**\r\n * X·ª≠ l√Ω HTML ƒë·ªÉ upload t·∫•t c·∫£ ·∫£nh l√™n PKGX v√† thay th·∫ø URL\r\n * \r\n * H√†m n√†y s·∫Ω:\r\n * 1. T√¨m t·∫•t c·∫£ <img> tags trong HTML\r\n * 2. V·ªõi m·ªói ·∫£nh c√≥ src l√† URL c√¥ng khai (kh√¥ng ph·∫£i localhost):\r\n *    - Upload l√™n PKGX qua upload_image_from_url\r\n *    - Thay th·∫ø src b·∫±ng URL m·ªõi tr√™n PKGX CDN\r\n * 3. V·ªõi ·∫£nh base64: b·ªè qua (qu√° n·∫∑ng, kh√¥ng sync)\r\n * 4. V·ªõi ·∫£nh ƒë√£ tr√™n PKGX CDN: gi·ªØ nguy√™n\r\n * \r\n * @param html - HTML content c·∫ßn x·ª≠ l√Ω\r\n * @param filenamePrefix - Prefix cho t√™n file (optional)\r\n * @returns HTML ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω v·ªõi URLs m·ªõi\r\n */\r\nexport async function processHtmlImagesForPkgx(\r\n  html: string,\r\n  filenamePrefix?: string\r\n): Promise<{ processedHtml: string; uploadedCount: number; skippedCount: number; errors: string[] }> {\r\n  if (!html) {\r\n    return { processedHtml: html, uploadedCount: 0, skippedCount: 0, errors: [] };\r\n  }\r\n\r\n  // Regex ƒë·ªÉ t√¨m t·∫•t c·∫£ <img> tags\r\n  const imgRegex = /<img[^>]+src=[\"']([^\"']+)[\"'][^>]*>/gi;\r\n  \r\n  let processedHtml = html;\r\n  let uploadedCount = 0;\r\n  let skippedCount = 0;\r\n  const errors: string[] = [];\r\n  \r\n  // T√¨m t·∫•t c·∫£ c√°c ·∫£nh\r\n  const matches: Array<{ fullMatch: string; src: string }> = [];\r\n  let match;\r\n  while ((match = imgRegex.exec(html)) !== null) {\r\n    matches.push({ fullMatch: match[0], src: match[1] });\r\n  }\r\n\r\n  // X·ª≠ l√Ω t·ª´ng ·∫£nh\r\n  for (let i = 0; i < matches.length; i++) {\r\n    const { fullMatch, src } = matches[i];\r\n    \r\n    // Skip base64 images\r\n    if (isBase64Image(src)) {\r\n      skippedCount++;\r\n      errors.push(`B·ªè qua ·∫£nh base64 (kh√¥ng h·ªó tr·ª£ upload base64)`);\r\n      continue;\r\n    }\r\n    \r\n    // Skip if already on PKGX CDN\r\n    if (isPkgxCdnUrl(src)) {\r\n      skippedCount++;\r\n      continue;\r\n    }\r\n    \r\n    // Skip localhost/internal URLs\r\n    if (!isPublicUrl(src)) {\r\n      skippedCount++;\r\n      errors.push(`B·ªè qua URL n·ªôi b·ªô: ${src.substring(0, 50)}...`);\r\n      continue;\r\n    }\r\n    \r\n    // Upload to PKGX\r\n    try {\r\n      const slug = filenamePrefix \r\n        ? `${filenamePrefix}-desc-img-${i + 1}` \r\n        : `desc-img-${Date.now()}-${i + 1}`;\r\n      \r\n      const uploadResult = await uploadImageFromUrl(src, { filenameSlug: slug });\r\n      \r\n      if (uploadResult.success && uploadResult.data?.data?.full_urls?.original) {\r\n        // Replace src in HTML\r\n        const newSrc = uploadResult.data.data.full_urls.original;\r\n        const newImgTag = fullMatch.replace(src, newSrc);\r\n        processedHtml = processedHtml.replace(fullMatch, newImgTag);\r\n        uploadedCount++;\r\n      } else {\r\n        errors.push(`L·ªói upload ·∫£nh: ${uploadResult.error || 'Unknown error'}`);\r\n        skippedCount++;\r\n      }\r\n    } catch (error) {\r\n      errors.push(`Exception upload ·∫£nh: ${error instanceof Error ? error.message : String(error)}`);\r\n      skippedCount++;\r\n    }\r\n  }\r\n\r\n  return { processedHtml, uploadedCount, skippedCount, errors };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4883, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/brands/hooks/use-pkgx-brand-sync.ts"],"sourcesContent":["/**\r\n * Hook ch·ª©a t·∫•t c·∫£ c√°c handlers ƒë·ªÉ ƒë·ªìng b·ªô th∆∞∆°ng hi·ªáu (Brand) v·ªõi PKGX\r\n * T∆∞∆°ng t·ª± nh∆∞ use-pkgx-sync.ts c·ªßa products\r\n */\r\nimport React from 'react';\r\nimport { toast } from 'sonner';\r\nimport type { Brand } from '@/features/settings/inventory/types';\r\nimport { updateBrand, getBrandById } from '@/lib/pkgx/api-service';\r\nimport { usePkgxSettingsStore } from '@/features/settings/pkgx/store';\r\n\r\n// Types\r\ntype PkgxLogEntry = {\r\n  action: \r\n    | 'sync_brand_basic_info'\r\n    | 'sync_brand_seo'\r\n    | 'sync_brand_description'\r\n    | 'sync_brand_all';\r\n  status: 'success' | 'error' | 'partial' | 'info';\r\n  message: string;\r\n  details?: Record<string, unknown>;\r\n};\r\n\r\ntype UsePkgxBrandSyncOptions = {\r\n  addPkgxLog?: (entry: PkgxLogEntry) => void;\r\n};\r\n\r\n/**\r\n * L·∫•y pkgxBrandId t·ª´ brand mapping\r\n */\r\nfunction getPkgxBrandId(brand: Brand, brandMappings?: Array<{ hrmBrandSystemId: string; pkgxBrandId: number }>) {\r\n  if (!brandMappings) return undefined;\r\n  const mapping = brandMappings.find(m => m.hrmBrandSystemId === brand.systemId);\r\n  return mapping?.pkgxBrandId;\r\n}\r\n\r\n/**\r\n * Hook cung c·∫•p c√°c handlers ƒë·ªÉ ƒë·ªìng b·ªô Brand v·ªõi PKGX\r\n */\r\nexport function usePkgxBrandSync({ addPkgxLog }: UsePkgxBrandSyncOptions = {}) {\r\n  const { settings: pkgxSettings, updateBrand: updateBrandInStore } = usePkgxSettingsStore();\r\n\r\n  // Default log function if not provided\r\n  const logAction = React.useCallback((entry: PkgxLogEntry) => {\r\n    if (addPkgxLog) {\r\n      addPkgxLog(entry);\r\n    }\r\n    console.log('[PKGX Brand Sync]', entry.action, entry.status, entry.message);\r\n  }, [addPkgxLog]);\r\n\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  // HELPER: Refresh brand data t·ª´ PKGX sau khi sync th√†nh c√¥ng\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  const refreshBrandFromPkgx = React.useCallback(async (pkgxBrandId: number) => {\r\n    try {\r\n      const response = await getBrandById(pkgxBrandId);\r\n      if (response.success && response.data) {\r\n        // C·∫≠p nh·∫≠t v√†o store\r\n        updateBrandInStore(pkgxBrandId, {\r\n          id: response.data.brand_id,\r\n          name: response.data.brand_name,\r\n          logo: response.data.brand_logo || '',\r\n          description: response.data.brand_desc || '',\r\n          shortDescription: response.data.short_desc || '',\r\n          longDescription: response.data.long_desc || '',\r\n          keywords: response.data.keywords || '',\r\n          metaTitle: response.data.meta_title || '',\r\n          metaDesc: response.data.meta_desc || '',\r\n          siteUrl: response.data.site_url || '',\r\n          sortOrder: response.data.sort_order || 0,\r\n          isShow: response.data.is_show ?? 1,\r\n        });\r\n        console.log('[PKGX Brand Sync] Auto-refreshed brand data from PKGX:', pkgxBrandId);\r\n      }\r\n    } catch (error) {\r\n      console.warn('[PKGX Brand Sync] Failed to refresh brand data:', error);\r\n    }\r\n  }, [updateBrandInStore]);\r\n\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  // 1. SYNC TH√îNG TIN C∆† B·∫¢N (brand_name, site_url)\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  const handleSyncBasicInfo = React.useCallback(async (brand: Brand) => {\r\n    const pkgxBrandId = getPkgxBrandId(brand, pkgxSettings?.brandMappings);\r\n    \r\n    if (!pkgxBrandId) {\r\n      toast.error('Th∆∞∆°ng hi·ªáu ch∆∞a ƒë∆∞·ª£c li√™n k·∫øt v·ªõi PKGX. Vui l√≤ng mapping trong C√†i ƒë·∫∑t > PKGX.');\r\n      return;\r\n    }\r\n    \r\n    toast.loading(`ƒêang ƒë·ªìng b·ªô th√¥ng tin c∆° b·∫£n...`, { id: 'pkgx-brand-sync-basic' });\r\n    \r\n    try {\r\n      const basicPayload = {\r\n        brand_name: brand.name,\r\n        site_url: brand.website || '',\r\n      };\r\n      \r\n      console.log('[PKGX Brand Basic Sync] Payload:', basicPayload);\r\n      \r\n      const response = await updateBrand(pkgxBrandId, basicPayload);\r\n      \r\n      if (response.success) {\r\n        // Auto-refresh ƒë·ªÉ c·∫≠p nh·∫≠t store\r\n        await refreshBrandFromPkgx(pkgxBrandId);\r\n        \r\n        toast.success(`ƒê√£ ƒë·ªìng b·ªô th√¥ng tin c∆° b·∫£n: ${brand.name}`, { id: 'pkgx-brand-sync-basic' });\r\n        logAction({\r\n          action: 'sync_brand_basic_info',\r\n          status: 'success',\r\n          message: `ƒê√£ ƒë·ªìng b·ªô th√¥ng tin c∆° b·∫£n: ${brand.name}`,\r\n          details: { brandId: brand.systemId, pkgxBrandId, payload: basicPayload },\r\n        });\r\n      } else {\r\n        throw new Error(response.error);\r\n      }\r\n    } catch (error) {\r\n      toast.error(`L·ªói ƒë·ªìng b·ªô th√¥ng tin c∆° b·∫£n: ${error instanceof Error ? error.message : 'Unknown error'}`, { id: 'pkgx-brand-sync-basic' });\r\n      logAction({\r\n        action: 'sync_brand_basic_info',\r\n        status: 'error',\r\n        message: `L·ªói ƒë·ªìng b·ªô th√¥ng tin c∆° b·∫£n: ${brand.name}`,\r\n        details: { brandId: brand.systemId, error: error instanceof Error ? error.message : String(error) },\r\n      });\r\n    }\r\n  }, [pkgxSettings?.brandMappings, logAction, refreshBrandFromPkgx]);\r\n\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  // 2. SYNC SEO (keywords, meta_title, meta_desc)\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  const handleSyncSeo = React.useCallback(async (brand: Brand) => {\r\n    const pkgxBrandId = getPkgxBrandId(brand, pkgxSettings?.brandMappings);\r\n    \r\n    if (!pkgxBrandId) {\r\n      toast.error('Th∆∞∆°ng hi·ªáu ch∆∞a ƒë∆∞·ª£c li√™n k·∫øt v·ªõi PKGX. Vui l√≤ng mapping trong C√†i ƒë·∫∑t > PKGX.');\r\n      return;\r\n    }\r\n    \r\n    toast.loading(`ƒêang ƒë·ªìng b·ªô SEO th∆∞∆°ng hi·ªáu...`, { id: 'pkgx-brand-sync-seo' });\r\n    \r\n    try {\r\n      const pkgxSeo = brand.websiteSeo?.pkgx;\r\n      // Fallback chain: SEO PKGX ‚Üí SEO Chung ‚Üí name\r\n      // SEO ch·ªâ g·ªìm: keywords, meta_title, meta_desc\r\n      const seoPayload = {\r\n        keywords: pkgxSeo?.seoKeywords || brand.seoKeywords || brand.name,\r\n        meta_title: pkgxSeo?.seoTitle || brand.seoTitle || brand.name,\r\n        meta_desc: pkgxSeo?.metaDescription || brand.metaDescription || '',\r\n      };\r\n      \r\n      // DEBUG\r\n      console.log('[PKGX Brand SEO Sync] Brand:', brand.name);\r\n      console.log('[PKGX Brand SEO Sync] websiteSeo.pkgx:', pkgxSeo);\r\n      console.log('[PKGX Brand SEO Sync] SEO Chung - seoKeywords:', brand.seoKeywords);\r\n      console.log('[PKGX Brand SEO Sync] Payload:', seoPayload);\r\n      \r\n      const response = await updateBrand(pkgxBrandId, seoPayload);\r\n      \r\n      if (response.success) {\r\n        // Auto-refresh ƒë·ªÉ c·∫≠p nh·∫≠t store\r\n        await refreshBrandFromPkgx(pkgxBrandId);\r\n        \r\n        toast.success(`ƒê√£ ƒë·ªìng b·ªô SEO cho th∆∞∆°ng hi·ªáu: ${brand.name}`, { id: 'pkgx-brand-sync-seo' });\r\n        logAction({\r\n          action: 'sync_brand_seo',\r\n          status: 'success',\r\n          message: `ƒê√£ ƒë·ªìng b·ªô SEO: ${brand.name}`,\r\n          details: { brandId: brand.systemId, pkgxBrandId, payload: seoPayload },\r\n        });\r\n      } else {\r\n        throw new Error(response.error);\r\n      }\r\n    } catch (error) {\r\n      toast.error(`L·ªói ƒë·ªìng b·ªô SEO th∆∞∆°ng hi·ªáu: ${error instanceof Error ? error.message : 'Unknown error'}`, { id: 'pkgx-brand-sync-seo' });\r\n      logAction({\r\n        action: 'sync_brand_seo',\r\n        status: 'error',\r\n        message: `L·ªói ƒë·ªìng b·ªô SEO: ${brand.name}`,\r\n        details: { brandId: brand.systemId, error: error instanceof Error ? error.message : String(error) },\r\n      });\r\n    }\r\n  }, [pkgxSettings?.brandMappings, logAction, refreshBrandFromPkgx]);\r\n\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  // 3. SYNC M√î T·∫¢ (short_desc, long_desc)\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  const handleSyncDescription = React.useCallback(async (brand: Brand) => {\r\n    const pkgxBrandId = getPkgxBrandId(brand, pkgxSettings?.brandMappings);\r\n    \r\n    if (!pkgxBrandId) {\r\n      toast.error('Th∆∞∆°ng hi·ªáu ch∆∞a ƒë∆∞·ª£c li√™n k·∫øt v·ªõi PKGX. Vui l√≤ng mapping trong C√†i ƒë·∫∑t > PKGX.');\r\n      return;\r\n    }\r\n    \r\n    toast.loading(`ƒêang ƒë·ªìng b·ªô m√¥ t·∫£ th∆∞∆°ng hi·ªáu...`, { id: 'pkgx-brand-sync-desc' });\r\n    \r\n    try {\r\n      const pkgxSeo = brand.websiteSeo?.pkgx;\r\n      // M√¥ t·∫£ ch·ªâ g·ªìm: short_desc, long_desc\r\n      const descPayload = {\r\n        short_desc: pkgxSeo?.shortDescription || brand.shortDescription || '',\r\n        long_desc: pkgxSeo?.longDescription || brand.longDescription || '',\r\n      };\r\n      \r\n      console.log('[PKGX Brand Desc Sync] Payload:', descPayload);\r\n      \r\n      const response = await updateBrand(pkgxBrandId, descPayload);\r\n      \r\n      if (response.success) {\r\n        // Auto-refresh ƒë·ªÉ c·∫≠p nh·∫≠t store\r\n        await refreshBrandFromPkgx(pkgxBrandId);\r\n        \r\n        toast.success(`ƒê√£ ƒë·ªìng b·ªô m√¥ t·∫£ cho th∆∞∆°ng hi·ªáu: ${brand.name}`, { id: 'pkgx-brand-sync-desc' });\r\n        logAction({\r\n          action: 'sync_brand_description',\r\n          status: 'success',\r\n          message: `ƒê√£ ƒë·ªìng b·ªô m√¥ t·∫£: ${brand.name}`,\r\n          details: { brandId: brand.systemId, pkgxBrandId },\r\n        });\r\n      } else {\r\n        throw new Error(response.error);\r\n      }\r\n    } catch (error) {\r\n      toast.error(`L·ªói ƒë·ªìng b·ªô m√¥ t·∫£ th∆∞∆°ng hi·ªáu: ${error instanceof Error ? error.message : 'Unknown error'}`, { id: 'pkgx-brand-sync-desc' });\r\n      logAction({\r\n        action: 'sync_brand_description',\r\n        status: 'error',\r\n        message: `L·ªói ƒë·ªìng b·ªô m√¥ t·∫£: ${brand.name}`,\r\n        details: { brandId: brand.systemId, error: error instanceof Error ? error.message : String(error) },\r\n      });\r\n    }\r\n  }, [pkgxSettings?.brandMappings, logAction, refreshBrandFromPkgx]);\r\n\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  // 4. SYNC T·∫§T C·∫¢ (Th√¥ng tin c∆° b·∫£n + SEO + M√¥ t·∫£)\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  const handleSyncAll = React.useCallback(async (brand: Brand) => {\r\n    const pkgxBrandId = getPkgxBrandId(brand, pkgxSettings?.brandMappings);\r\n    \r\n    if (!pkgxBrandId) {\r\n      toast.error('Th∆∞∆°ng hi·ªáu ch∆∞a ƒë∆∞·ª£c li√™n k·∫øt v·ªõi PKGX. Vui l√≤ng mapping trong C√†i ƒë·∫∑t > PKGX.');\r\n      return;\r\n    }\r\n    \r\n    toast.loading(`ƒêang ƒë·ªìng b·ªô t·∫•t c·∫£ th√¥ng tin th∆∞∆°ng hi·ªáu...`, { id: 'pkgx-brand-sync-all' });\r\n    \r\n    try {\r\n      const pkgxSeo = brand.websiteSeo?.pkgx;\r\n      \r\n      // Build full payload\r\n      const fullPayload = {\r\n        // Basic info\r\n        brand_name: brand.name,\r\n        site_url: brand.website || '',\r\n        // SEO fields - Fallback chain: SEO PKGX ‚Üí SEO Chung ‚Üí name\r\n        keywords: pkgxSeo?.seoKeywords || brand.seoKeywords || brand.name,\r\n        meta_title: pkgxSeo?.seoTitle || brand.seoTitle || brand.name,\r\n        meta_desc: pkgxSeo?.metaDescription || brand.metaDescription || '',\r\n        // Descriptions\r\n        brand_desc: brand.description || '',\r\n        short_desc: pkgxSeo?.shortDescription || brand.shortDescription || '',\r\n        long_desc: pkgxSeo?.longDescription || brand.longDescription || '',\r\n      };\r\n      \r\n      console.log('[PKGX Brand Sync All] Payload:', fullPayload);\r\n      \r\n      const response = await updateBrand(pkgxBrandId, fullPayload);\r\n      \r\n      if (response.success) {\r\n        // Auto-refresh ƒë·ªÉ c·∫≠p nh·∫≠t store\r\n        await refreshBrandFromPkgx(pkgxBrandId);\r\n        \r\n        toast.success(`ƒê√£ ƒë·ªìng b·ªô t·∫•t c·∫£ th√¥ng tin th∆∞∆°ng hi·ªáu: ${brand.name}`, { id: 'pkgx-brand-sync-all' });\r\n        logAction({\r\n          action: 'sync_brand_all',\r\n          status: 'success',\r\n          message: `ƒê√£ ƒë·ªìng b·ªô t·∫•t c·∫£: ${brand.name}`,\r\n          details: { brandId: brand.systemId, pkgxBrandId },\r\n        });\r\n      } else {\r\n        throw new Error(response.error);\r\n      }\r\n    } catch (error) {\r\n      toast.error(`L·ªói ƒë·ªìng b·ªô th∆∞∆°ng hi·ªáu: ${error instanceof Error ? error.message : 'Unknown error'}`, { id: 'pkgx-brand-sync-all' });\r\n      logAction({\r\n        action: 'sync_brand_all',\r\n        status: 'error',\r\n        message: `L·ªói ƒë·ªìng b·ªô: ${brand.name}`,\r\n        details: { brandId: brand.systemId, error: error instanceof Error ? error.message : String(error) },\r\n      });\r\n    }\r\n  }, [pkgxSettings?.brandMappings, logAction, refreshBrandFromPkgx]);\r\n\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  // HELPER: Ki·ªÉm tra brand c√≥ mapping v·ªõi PKGX kh√¥ng\r\n  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\r\n  const hasPkgxMapping = React.useCallback((brand: Brand) => {\r\n    return !!getPkgxBrandId(brand, pkgxSettings?.brandMappings);\r\n  }, [pkgxSettings?.brandMappings]);\r\n\r\n  return {\r\n    handleSyncBasicInfo,\r\n    handleSyncSeo,\r\n    handleSyncDescription,\r\n    handleSyncAll,\r\n    hasPkgxMapping,\r\n    getPkgxBrandId: (brand: Brand) => getPkgxBrandId(brand, pkgxSettings?.brandMappings),\r\n  };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5214, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/brands/brand-detail.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react';\r\nimport Link from 'next/link';\r\nimport { useParams, usePathname, useRouter } from 'next/navigation';\r\nimport { \r\n  Save, \r\n  X, \r\n  Trash2,\r\n  Globe,\r\n  Tags,\r\n  ExternalLink,\r\n  Image as ImageIcon,\r\n  Pencil,\r\n  ArrowLeft,\r\n  BarChart3,\r\n  RefreshCw,\r\n} from 'lucide-react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport { cn } from '@/lib/utils';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormDescription,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from '@/components/ui/form';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { useBrandStore } from '../settings/inventory/brand-store';\r\nimport type { Brand } from '../settings/inventory/types';\r\nimport { asSystemId, asBusinessId, type SystemId } from '@/lib/id-types';\r\nimport { toast } from 'sonner';\r\nimport { NewDocumentsUpload } from '@/components/ui/new-documents-upload';\r\nimport { FileUploadAPI, type StagingFile } from '@/lib/file-upload-api';\r\nimport { SeoAnalysisPanel } from '@/components/shared/seo-preview';\r\nimport { TipTapEditor } from '@/components/ui/tiptap-editor';\r\nimport { usePageHeader } from '@/contexts/page-header-context';\r\nimport { usePkgxBrandSync } from './hooks/use-pkgx-brand-sync';\r\n\r\n// Schema\r\nconst websiteSeoSchema = z.object({\r\n  seoTitle: z.string().optional(),\r\n  metaDescription: z.string().optional(),\r\n  seoKeywords: z.string().optional(),\r\n  shortDescription: z.string().optional(),\r\n  longDescription: z.string().optional(),\r\n  slug: z.string().optional(),\r\n}).optional();\r\n\r\nconst brandFormSchema = z.object({\r\n  id: z.string().min(1, 'M√£ th∆∞∆°ng hi·ªáu l√† b·∫Øt bu·ªôc'),\r\n  name: z.string().min(1, 'T√™n th∆∞∆°ng hi·ªáu l√† b·∫Øt bu·ªôc'),\r\n  description: z.string().optional(),\r\n  website: z.string().optional(),\r\n  logo: z.string().optional(),\r\n  isActive: z.boolean().optional(),\r\n  // SEO m·∫∑c ƒë·ªãnh\r\n  seoTitle: z.string().optional(),\r\n  metaDescription: z.string().optional(),\r\n  seoKeywords: z.string().optional(),\r\n  shortDescription: z.string().optional(),\r\n  longDescription: z.string().optional(),\r\n  // SEO ri√™ng cho t·ª´ng website\r\n  websiteSeo: z.object({\r\n    pkgx: websiteSeoSchema,\r\n    trendtech: websiteSeoSchema,\r\n  }).optional(),\r\n});\r\n\r\ntype BrandFormValues = z.infer<typeof brandFormSchema>;\r\n\r\nexport function BrandDetailPage() {\r\n  const params = useParams<{ systemId: string }>();\r\n  const systemId = params?.systemId;\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  \r\n  const isEditMode = pathname.endsWith('/edit');\r\n  \r\n  const { data, update, remove } = useBrandStore();\r\n  \r\n  // PKGX sync hook\r\n  const { handleSyncSeo, handleSyncDescription, handleSyncAll, hasPkgxMapping } = usePkgxBrandSync();\r\n  \r\n  const brand = React.useMemo(() => \r\n    data.find(b => b.systemId === systemId), \r\n    [data, systemId]\r\n  );\r\n  \r\n  const [isDeleteAlertOpen, setIsDeleteAlertOpen] = React.useState(false);\r\n  const [activeTab, setActiveTab] = React.useState<'general' | 'seo-default' | 'seo-pkgx' | 'seo-trendtech'>('general');\r\n  \r\n  // Logo upload state\r\n  const [logoFiles, setLogoFiles] = React.useState<StagingFile[]>([]);\r\n  const [logoSessionId, setLogoSessionId] = React.useState<string | undefined>();\r\n\r\n  const form = useForm<BrandFormValues>({\r\n    resolver: zodResolver(brandFormSchema),\r\n    defaultValues: {\r\n      id: '',\r\n      name: '',\r\n      description: '',\r\n      website: '',\r\n      logo: '',\r\n      isActive: true,\r\n      // SEO m·∫∑c ƒë·ªãnh\r\n      seoTitle: '',\r\n      metaDescription: '',\r\n      seoKeywords: '',\r\n      shortDescription: '',\r\n      longDescription: '',\r\n      // SEO ri√™ng cho t·ª´ng website\r\n      websiteSeo: {\r\n        pkgx: {},\r\n        trendtech: {},\r\n      },\r\n    },\r\n  });\r\n\r\n  // Reset form when brand data changes\r\n  React.useEffect(() => {\r\n    if (brand) {\r\n      form.reset({\r\n        id: brand.id || '',\r\n        name: brand.name || '',\r\n        description: brand.description || '',\r\n        website: brand.website || '',\r\n        logo: brand.logo || '',\r\n        isActive: brand.isActive ?? true,\r\n        // SEO m·∫∑c ƒë·ªãnh\r\n        seoTitle: brand.seoTitle || '',\r\n        metaDescription: brand.metaDescription || '',\r\n        seoKeywords: brand.seoKeywords || '',\r\n        shortDescription: brand.shortDescription || '',\r\n        longDescription: brand.longDescription || '',\r\n        // SEO ri√™ng cho t·ª´ng website\r\n        websiteSeo: {\r\n          pkgx: brand.websiteSeo?.pkgx || {},\r\n          trendtech: brand.websiteSeo?.trendtech || {},\r\n        },\r\n      });\r\n    }\r\n  }, [brand, form]);\r\n\r\n  const watchedName = form.watch('name');\r\n  const watchedPkgxSeoTitle = form.watch('websiteSeo.pkgx.seoTitle');\r\n  const watchedPkgxMetaDesc = form.watch('websiteSeo.pkgx.metaDescription');\r\n  const watchedPkgxKeywords = form.watch('websiteSeo.pkgx.seoKeywords');\r\n  const watchedPkgxSlug = form.watch('websiteSeo.pkgx.slug');\r\n  const watchedTrendtechSeoTitle = form.watch('websiteSeo.trendtech.seoTitle');\r\n  const watchedTrendtechMetaDesc = form.watch('websiteSeo.trendtech.metaDescription');\r\n  const watchedTrendtechKeywords = form.watch('websiteSeo.trendtech.seoKeywords');\r\n  const watchedTrendtechSlug = form.watch('websiteSeo.trendtech.slug');\r\n\r\n  const handleSubmit = async (data: BrandFormValues) => {\r\n    if (!systemId) return;\r\n    \r\n    // Confirm logo staging files\r\n    let logoUrl = data.logo;\r\n    if (logoFiles.length > 0 && logoSessionId) {\r\n      try {\r\n        await FileUploadAPI.confirmStagingFiles(\r\n          logoSessionId,\r\n          systemId,\r\n          'brands',\r\n          'logo',\r\n          { name: data.name }\r\n        );\r\n        logoUrl = logoFiles[0]?.url || logoUrl;\r\n      } catch (error) {\r\n        console.error('Error confirming logo:', error);\r\n      }\r\n    }\r\n    \r\n    update(asSystemId(systemId), {\r\n      ...data,\r\n      id: asBusinessId(data.id),\r\n      logo: logoUrl,\r\n    });\r\n    \r\n    toast.success('ƒê√£ c·∫≠p nh·∫≠t th∆∞∆°ng hi·ªáu');\r\n    router.push(`/brands/${systemId}`);\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (!systemId) return;\r\n    remove(asSystemId(systemId));\r\n    toast.success('ƒê√£ x√≥a th∆∞∆°ng hi·ªáu');\r\n    router.push('/brands');\r\n  };\r\n\r\n  const handleSwitchToEdit = () => {\r\n    router.push(`/brands/${systemId}/edit`);\r\n  };\r\n\r\n  // Header actions\r\n  const headerActions = React.useMemo(() => {\r\n    if (isEditMode) {\r\n      return [\r\n        <Button key=\"cancel\" variant=\"outline\" size=\"sm\" className=\"h-9\" onClick={() => router.push(`/brands/${systemId}`)}>\r\n          <X className=\"mr-2 h-4 w-4\" />\r\n          H·ªßy\r\n        </Button>,\r\n        <Button key=\"save\" size=\"sm\" className=\"h-9\" onClick={form.handleSubmit(handleSubmit)}>\r\n          <Save className=\"mr-2 h-4 w-4\" />\r\n          L∆∞u\r\n        </Button>\r\n      ];\r\n    }\r\n    return [\r\n      <Button key=\"delete\" variant=\"outline\" size=\"sm\" className=\"h-9 text-destructive hover:text-destructive\" onClick={() => setIsDeleteAlertOpen(true)}>\r\n        <Trash2 className=\"mr-2 h-4 w-4\" />\r\n        X√≥a\r\n      </Button>,\r\n      <Button key=\"edit\" size=\"sm\" className=\"h-9\" onClick={handleSwitchToEdit}>\r\n        <Pencil className=\"mr-2 h-4 w-4\" />\r\n        Ch·ªânh s·ª≠a\r\n      </Button>\r\n    ];\r\n  }, [isEditMode, systemId, router, form]);\r\n\r\n  usePageHeader({\r\n    actions: headerActions,\r\n    showBackButton: true,\r\n  });\r\n\r\n  if (!brand) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-[50vh]\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-muted-foreground\">Kh√¥ng t√¨m th·∫•y th∆∞∆°ng hi·ªáu</p>\r\n          <Button variant=\"link\" onClick={() => router.push('/brands')}>\r\n            Quay l·∫°i danh s√°ch\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // View mode\r\n  if (!isEditMode) {\r\n    return (\r\n      <div className=\"space-y-6 pb-8\">\r\n        <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as typeof activeTab)}>\r\n          <TabsList className=\"grid w-full grid-cols-4 max-w-2xl\">\r\n            <TabsTrigger value=\"general\">Th√¥ng tin</TabsTrigger>\r\n            <TabsTrigger value=\"seo-default\" className=\"gap-1\">\r\n              <Globe className=\"h-3 w-3\" />\r\n              SEO Chung\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"seo-pkgx\" className=\"gap-1\">\r\n              <Globe className=\"h-3 w-3 text-red-500\" />\r\n              SEO PKGX\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"seo-trendtech\" className=\"gap-1\">\r\n              <Globe className=\"h-3 w-3 text-blue-500\" />\r\n              SEO Trendtech\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          {/* General Tab */}\r\n          <TabsContent value=\"general\" className=\"space-y-4 mt-4\">\r\n            {/* Brand Header Card */}\r\n            <Card>\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"text-base\">Th√¥ng tin c∆° b·∫£n</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"flex items-start gap-6\">\r\n                  <Avatar className=\"h-24 w-24 rounded-lg border\">\r\n                    {brand.logo ? (\r\n                      <AvatarImage src={brand.logo} alt={brand.name} className=\"object-cover\" />\r\n                    ) : null}\r\n                    <AvatarFallback className=\"rounded-lg bg-muted\">\r\n                      <ImageIcon className=\"h-10 w-10 text-muted-foreground\" />\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n                  \r\n                  <div className=\"flex-1 space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"text-sm text-muted-foreground\">M√£ th∆∞∆°ng hi·ªáu</p>\r\n                        <p className=\"font-mono font-medium\">{brand.id}</p>\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"text-sm text-muted-foreground\">Tr·∫°ng th√°i</p>\r\n                        {brand.isActive !== false ? (\r\n                          <Badge variant=\"default\" className=\"bg-green-100 text-green-800 hover:bg-green-100\">\r\n                            Ho·∫°t ƒë·ªông\r\n                          </Badge>\r\n                        ) : (\r\n                          <Badge variant=\"secondary\">T·∫°m t·∫Øt</Badge>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-1\">\r\n                      <p className=\"text-sm text-muted-foreground\">T√™n th∆∞∆°ng hi·ªáu</p>\r\n                      <p className=\"text-lg font-semibold\">{brand.name}</p>\r\n                    </div>\r\n                    \r\n                    {brand.website && (\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"text-sm text-muted-foreground\">Website</p>\r\n                        <a \r\n                          href={brand.website} \r\n                          target=\"_blank\" \r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"inline-flex items-center gap-1.5 text-sm text-primary hover:underline\"\r\n                        >\r\n                          <Globe className=\"h-4 w-4\" />\r\n                          {brand.website}\r\n                          <ExternalLink className=\"h-3 w-3\" />\r\n                        </a>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Description Card */}\r\n            {brand.description && (\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"text-base\">M√¥ t·∫£</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">{brand.description}</p>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </TabsContent>\r\n\r\n          {/* SEO Default Tab */}\r\n          <TabsContent value=\"seo-default\" className=\"space-y-4 mt-4\">\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Globe className=\"h-4 w-4\" />\r\n                  <CardTitle className=\"text-base\">SEO M·∫∑c ƒë·ªãnh</CardTitle>\r\n                </div>\r\n                <CardDescription>Th√¥ng tin SEO chung - s·∫Ω ƒë∆∞·ª£c d√πng n·∫øu kh√¥ng c√≥ SEO ri√™ng cho t·ª´ng website</CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">Ti√™u ƒë·ªÅ SEO</p>\r\n                  <p className=\"text-sm font-medium\">{brand.seoTitle || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">Meta Description</p>\r\n                  <p className=\"text-sm\">{brand.metaDescription || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">T·ª´ kh√≥a SEO</p>\r\n                  <p className=\"text-sm\">{brand.seoKeywords || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">M√¥ t·∫£ ng·∫Øn</p>\r\n                  {brand.shortDescription ? (\r\n                    <div className=\"prose prose-sm max-w-none text-sm border rounded-md p-3 bg-muted/30\" dangerouslySetInnerHTML={{ __html: brand.shortDescription }} />\r\n                  ) : <p className=\"text-sm text-muted-foreground\">-</p>}\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">M√¥ t·∫£ chi ti·∫øt</p>\r\n                  {brand.longDescription ? (\r\n                    <div className=\"prose prose-sm max-w-none text-sm border rounded-md p-3 bg-muted/30\" dangerouslySetInnerHTML={{ __html: brand.longDescription }} />\r\n                  ) : <p className=\"text-sm text-muted-foreground\">-</p>}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          {/* SEO PKGX Tab */}\r\n          <TabsContent value=\"seo-pkgx\" className=\"space-y-4 mt-4\">\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Globe className=\"h-4 w-4 text-red-500\" />\r\n                    <CardTitle className=\"text-base\">SEO PKGX</CardTitle>\r\n                  </div>\r\n                  {brand && hasPkgxMapping(brand) && (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Button \r\n                        variant=\"outline\" \r\n                        size=\"sm\" \r\n                        className=\"h-8 text-xs\"\r\n                        onClick={() => handleSyncSeo(brand)}\r\n                      >\r\n                        <RefreshCw className=\"mr-1.5 h-3 w-3\" />\r\n                        ƒê·ªìng b·ªô SEO\r\n                      </Button>\r\n                      <Button \r\n                        variant=\"outline\" \r\n                        size=\"sm\" \r\n                        className=\"h-8 text-xs\"\r\n                        onClick={() => handleSyncDescription(brand)}\r\n                      >\r\n                        <RefreshCw className=\"mr-1.5 h-3 w-3\" />\r\n                        ƒê·ªìng b·ªô m√¥ t·∫£\r\n                      </Button>\r\n                      <Button \r\n                        size=\"sm\" \r\n                        className=\"h-8 text-xs\"\r\n                        onClick={() => handleSyncAll(brand)}\r\n                      >\r\n                        <RefreshCw className=\"mr-1.5 h-3 w-3\" />\r\n                        ƒê·ªìng b·ªô t·∫•t c·∫£\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <CardDescription>\r\n                  phukiengiaxuong.com.vn - Override SEO chung\r\n                  {brand && !hasPkgxMapping(brand) && (\r\n                    <span className=\"text-orange-600 ml-2\">(Ch∆∞a mapping v·ªõi PKGX - v√†o C√†i ƒë·∫∑t &gt; PKGX ƒë·ªÉ mapping)</span>\r\n                  )}\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">Ti√™u ƒë·ªÅ SEO</p>\r\n                  <p className=\"text-sm font-medium\">{brand.websiteSeo?.pkgx?.seoTitle || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">Meta Description</p>\r\n                  <p className=\"text-sm\">{brand.websiteSeo?.pkgx?.metaDescription || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">T·ª´ kh√≥a SEO</p>\r\n                  <p className=\"text-sm\">{brand.websiteSeo?.pkgx?.seoKeywords || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">URL Slug</p>\r\n                  <p className=\"text-sm font-mono\">{brand.websiteSeo?.pkgx?.slug || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">M√¥ t·∫£ ng·∫Øn</p>\r\n                  {brand.websiteSeo?.pkgx?.shortDescription ? (\r\n                    <div className=\"prose prose-sm max-w-none text-sm border rounded-md p-3 bg-muted/30\" dangerouslySetInnerHTML={{ __html: brand.websiteSeo.pkgx.shortDescription }} />\r\n                  ) : <p className=\"text-sm text-muted-foreground\">-</p>}\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">M√¥ t·∫£ chi ti·∫øt</p>\r\n                  {brand.websiteSeo?.pkgx?.longDescription ? (\r\n                    <div className=\"prose prose-sm max-w-none text-sm border rounded-md p-3 bg-muted/30\" dangerouslySetInnerHTML={{ __html: brand.websiteSeo.pkgx.longDescription }} />\r\n                  ) : <p className=\"text-sm text-muted-foreground\">-</p>}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          {/* SEO Trendtech Tab */}\r\n          <TabsContent value=\"seo-trendtech\" className=\"space-y-4 mt-4\">\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Globe className=\"h-4 w-4 text-blue-500\" />\r\n                  <CardTitle className=\"text-base\">SEO Trendtech</CardTitle>\r\n                </div>\r\n                <CardDescription>trendtech.vn - Override SEO chung</CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">Ti√™u ƒë·ªÅ SEO</p>\r\n                  <p className=\"text-sm font-medium\">{brand.websiteSeo?.trendtech?.seoTitle || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">Meta Description</p>\r\n                  <p className=\"text-sm\">{brand.websiteSeo?.trendtech?.metaDescription || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">T·ª´ kh√≥a SEO</p>\r\n                  <p className=\"text-sm\">{brand.websiteSeo?.trendtech?.seoKeywords || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">URL Slug</p>\r\n                  <p className=\"text-sm font-mono\">{brand.websiteSeo?.trendtech?.slug || '-'}</p>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">M√¥ t·∫£ ng·∫Øn</p>\r\n                  {brand.websiteSeo?.trendtech?.shortDescription ? (\r\n                    <div className=\"prose prose-sm max-w-none text-sm border rounded-md p-3 bg-muted/30\" dangerouslySetInnerHTML={{ __html: brand.websiteSeo.trendtech.shortDescription }} />\r\n                  ) : <p className=\"text-sm text-muted-foreground\">-</p>}\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <p className=\"text-sm text-muted-foreground\">M√¥ t·∫£ chi ti·∫øt</p>\r\n                  {brand.websiteSeo?.trendtech?.longDescription ? (\r\n                    <div className=\"prose prose-sm max-w-none text-sm border rounded-md p-3 bg-muted/30\" dangerouslySetInnerHTML={{ __html: brand.websiteSeo.trendtech.longDescription }} />\r\n                  ) : <p className=\"text-sm text-muted-foreground\">-</p>}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        </Tabs>\r\n\r\n        {/* Delete Alert */}\r\n        <AlertDialog open={isDeleteAlertOpen} onOpenChange={setIsDeleteAlertOpen}>\r\n          <AlertDialogContent>\r\n            <AlertDialogHeader>\r\n              <AlertDialogTitle>X√≥a th∆∞∆°ng hi·ªáu?</AlertDialogTitle>\r\n              <AlertDialogDescription>\r\n                Th∆∞∆°ng hi·ªáu \"{brand.name}\" s·∫Ω b·ªã x√≥a kh·ªèi h·ªá th·ªëng. H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.\r\n              </AlertDialogDescription>\r\n            </AlertDialogHeader>\r\n            <AlertDialogFooter>\r\n              <AlertDialogCancel>ƒê√≥ng</AlertDialogCancel>\r\n              <AlertDialogAction onClick={handleDelete}>X√≥a</AlertDialogAction>\r\n            </AlertDialogFooter>\r\n          </AlertDialogContent>\r\n        </AlertDialog>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Edit mode\r\n  return (\r\n    <div className=\"space-y-4 pb-8\">\r\n      <Form {...form}>\r\n        <form className=\"space-y-6\">\r\n          <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as typeof activeTab)}>\r\n            <TabsList className=\"grid w-full grid-cols-4 max-w-2xl\">\r\n              <TabsTrigger value=\"general\">Th√¥ng tin</TabsTrigger>\r\n              <TabsTrigger value=\"seo-default\" className=\"gap-1\">\r\n                <Globe className=\"h-3 w-3\" />\r\n                SEO Chung\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"seo-pkgx\" className=\"gap-1\">\r\n                <Globe className=\"h-3 w-3 text-red-500\" />\r\n                SEO PKGX\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"seo-trendtech\" className=\"gap-1\">\r\n                <Globe className=\"h-3 w-3 text-blue-500\" />\r\n                SEO Trendtech\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            {/* General Tab */}\r\n            <TabsContent value=\"general\" className=\"space-y-4 mt-4\">\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"text-base\">Th√¥ng tin c∆° b·∫£n</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"id\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>M√£ th∆∞∆°ng hi·ªáu <span className=\"text-destructive\">*</span></FormLabel>\r\n                          <FormControl>\r\n                            <Input \r\n                              placeholder=\"VD: APPLE\" \r\n                              {...field} \r\n                              disabled\r\n                              className=\"bg-muted\"\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"name\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>T√™n th∆∞∆°ng hi·ªáu <span className=\"text-destructive\">*</span></FormLabel>\r\n                          <FormControl>\r\n                            <Input placeholder=\"VD: Apple Inc.\" {...field} />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n                  </div>\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"website\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>Website</FormLabel>\r\n                        <FormControl>\r\n                          <div className=\"flex gap-2\">\r\n                            <Input placeholder=\"https://apple.com\" {...field} />\r\n                            {field.value && (\r\n                              <Button\r\n                                type=\"button\"\r\n                                variant=\"outline\"\r\n                                size=\"icon\"\r\n                                className=\"flex-shrink-0\"\r\n                                onClick={() => window.open(field.value, '_blank')}\r\n                              >\r\n                                <ExternalLink className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            )}\r\n                          </div>\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"description\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>M√¥ t·∫£</FormLabel>\r\n                        <FormControl>\r\n                          <Textarea \r\n                            placeholder=\"M√¥ t·∫£ v·ªÅ th∆∞∆°ng hi·ªáu...\" \r\n                            {...field} \r\n                            rows={3}\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"isActive\"\r\n                    render={({ field }) => (\r\n                      <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-3\">\r\n                        <div className=\"space-y-0.5\">\r\n                          <FormLabel>K√≠ch ho·∫°t</FormLabel>\r\n                          <FormDescription>\r\n                            Th∆∞∆°ng hi·ªáu s·∫Ω hi·ªÉn th·ªã trong danh s√°ch l·ª±a ch·ªçn\r\n                          </FormDescription>\r\n                        </div>\r\n                        <FormControl>\r\n                          <Switch\r\n                            checked={field.value}\r\n                            onCheckedChange={field.onChange}\r\n                          />\r\n                        </FormControl>\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n\r\n              {/* Logo Upload Card */}\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"text-base flex items-center gap-2\">\r\n                    <ImageIcon className=\"h-4 w-4\" />\r\n                    Logo th∆∞∆°ng hi·ªáu\r\n                  </CardTitle>\r\n                  <CardDescription>T·∫£i l√™n logo th∆∞∆°ng hi·ªáu (PNG, JPG, WebP - t·ªëi ƒëa 2MB)</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  {brand?.logo && logoFiles.length === 0 && (\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div className=\"w-24 h-24 rounded-lg border overflow-hidden bg-muted flex items-center justify-center\">\r\n                        <img \r\n                          src={brand.logo} \r\n                          alt=\"Logo hi·ªán t·∫°i\" \r\n                          className=\"max-w-full max-h-full object-contain\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"text-sm text-muted-foreground\">\r\n                        Logo hi·ªán t·∫°i. Upload logo m·ªõi ƒë·ªÉ thay th·∫ø.\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <NewDocumentsUpload\r\n                    accept={{ 'image/*': ['.png', '.jpg', '.jpeg', '.webp'] }}\r\n                    maxFiles={1}\r\n                    maxSize={2 * 1024 * 1024}\r\n                    value={logoFiles}\r\n                    onChange={setLogoFiles}\r\n                    sessionId={logoSessionId}\r\n                    onSessionChange={setLogoSessionId}\r\n                    className=\"min-h-[120px]\"\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n            </TabsContent>\r\n\r\n            {/* SEO Default Tab */}\r\n            <TabsContent value=\"seo-default\" className=\"space-y-4 mt-4\">\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Globe className=\"h-4 w-4\" />\r\n                    <CardTitle className=\"text-base\">SEO M·∫∑c ƒë·ªãnh</CardTitle>\r\n                  </div>\r\n                  <CardDescription>Th√¥ng tin SEO chung - s·∫Ω ƒë∆∞·ª£c d√πng n·∫øu kh√¥ng c√≥ SEO ri√™ng</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"seoTitle\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>Ti√™u ƒë·ªÅ SEO</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"Ti√™u ƒë·ªÅ m·∫∑c ƒë·ªãnh\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormDescription>Title tag m·∫∑c ƒë·ªãnh. N√™n 50-60 k√Ω t·ª±.</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"metaDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>Meta Description</FormLabel>\r\n                        <FormControl>\r\n                          <Textarea placeholder=\"M√¥ t·∫£ SEO m·∫∑c ƒë·ªãnh\" {...field} value={field.value || ''} rows={2} />\r\n                        </FormControl>\r\n                        <FormDescription>N√™n 150-160 k√Ω t·ª±.</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"seoKeywords\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>T·ª´ kh√≥a SEO</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"t·ª´ kh√≥a 1, t·ª´ kh√≥a 2\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"shortDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>M√¥ t·∫£ ng·∫Øn</FormLabel>\r\n                        <FormControl>\r\n                          <TipTapEditor\r\n                            content={field.value || ''}\r\n                            onChange={field.onChange}\r\n                            placeholder=\"M√¥ t·∫£ ng·∫Øn g·ªçn 1-2 c√¢u...\"\r\n                            minHeight=\"100px\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"longDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>M√¥ t·∫£ chi ti·∫øt</FormLabel>\r\n                        <FormControl>\r\n                          <TipTapEditor\r\n                            content={field.value || ''}\r\n                            onChange={field.onChange}\r\n                            placeholder=\"M√¥ t·∫£ ƒë·∫ßy ƒë·ªß v·ªÅ th∆∞∆°ng hi·ªáu...\"\r\n                            minHeight=\"200px\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n            </TabsContent>\r\n\r\n            {/* SEO PKGX Tab */}\r\n            <TabsContent value=\"seo-pkgx\" className=\"space-y-4 mt-4\">\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Globe className=\"h-4 w-4 text-red-500\" />\r\n                    <CardTitle className=\"text-base\">SEO cho PKGX</CardTitle>\r\n                  </div>\r\n                  <CardDescription>phukiengiaxuong.com.vn</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.pkgx.seoTitle\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>Ti√™u ƒë·ªÅ SEO</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"Ti√™u ƒë·ªÅ cho PKGX\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormDescription>Title tag. N√™n 50-60 k√Ω t·ª±.</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.pkgx.metaDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>Meta Description</FormLabel>\r\n                        <FormControl>\r\n                          <Textarea placeholder=\"M√¥ t·∫£ SEO cho PKGX\" {...field} value={field.value || ''} rows={2} />\r\n                        </FormControl>\r\n                        <FormDescription>N√™n 150-160 k√Ω t·ª±.</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.pkgx.seoKeywords\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>T·ª´ kh√≥a SEO</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"t·ª´ kh√≥a 1, t·ª´ kh√≥a 2\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.pkgx.shortDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>M√¥ t·∫£ ng·∫Øn</FormLabel>\r\n                        <FormControl>\r\n                          <TipTapEditor\r\n                            content={field.value || ''}\r\n                            onChange={field.onChange}\r\n                            placeholder=\"M√¥ t·∫£ ng·∫Øn g·ªçn 1-2 c√¢u...\"\r\n                            minHeight=\"100px\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.pkgx.longDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>M√¥ t·∫£ chi ti·∫øt</FormLabel>\r\n                        <FormControl>\r\n                          <TipTapEditor\r\n                            content={field.value || ''}\r\n                            onChange={field.onChange}\r\n                            placeholder=\"M√¥ t·∫£ ƒë·∫ßy ƒë·ªß v·ªÅ th∆∞∆°ng hi·ªáu...\"\r\n                            minHeight=\"200px\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.pkgx.slug\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>URL Slug</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"thuong-hieu-abc\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormDescription>ƒê∆∞·ªùng d·∫´n URL th√¢n thi·ªán</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"text-base flex items-center gap-2\"><BarChart3 className=\"h-4 w-4\" /> Ph√¢n t√≠ch SEO</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <SeoAnalysisPanel\r\n                    title={watchedPkgxSeoTitle || watchedName || ''}\r\n                    description={watchedPkgxMetaDesc || ''}\r\n                    keywords={watchedPkgxKeywords || ''}\r\n                    slug={watchedPkgxSlug || ''}\r\n                    siteName=\"phukiengiaxuong.com.vn\"\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n            </TabsContent>\r\n\r\n            {/* SEO Trendtech Tab */}\r\n            <TabsContent value=\"seo-trendtech\" className=\"space-y-4 mt-4\">\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Globe className=\"h-4 w-4 text-blue-500\" />\r\n                    <CardTitle className=\"text-base\">SEO cho Trendtech</CardTitle>\r\n                  </div>\r\n                  <CardDescription>Coming soon</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.trendtech.seoTitle\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>Ti√™u ƒë·ªÅ SEO</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"Ti√™u ƒë·ªÅ cho Trendtech\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormDescription>Title tag. N√™n 50-60 k√Ω t·ª±.</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.trendtech.metaDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>Meta Description</FormLabel>\r\n                        <FormControl>\r\n                          <Textarea placeholder=\"M√¥ t·∫£ SEO cho Trendtech\" {...field} value={field.value || ''} rows={2} />\r\n                        </FormControl>\r\n                        <FormDescription>N√™n 150-160 k√Ω t·ª±.</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.trendtech.seoKeywords\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>T·ª´ kh√≥a SEO</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"t·ª´ kh√≥a 1, t·ª´ kh√≥a 2\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.trendtech.shortDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>M√¥ t·∫£ ng·∫Øn</FormLabel>\r\n                        <FormControl>\r\n                          <TipTapEditor\r\n                            content={field.value || ''}\r\n                            onChange={field.onChange}\r\n                            placeholder=\"M√¥ t·∫£ ng·∫Øn g·ªçn 1-2 c√¢u...\"\r\n                            minHeight=\"100px\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.trendtech.longDescription\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>M√¥ t·∫£ chi ti·∫øt</FormLabel>\r\n                        <FormControl>\r\n                          <TipTapEditor\r\n                            content={field.value || ''}\r\n                            onChange={field.onChange}\r\n                            placeholder=\"M√¥ t·∫£ ƒë·∫ßy ƒë·ªß v·ªÅ th∆∞∆°ng hi·ªáu...\"\r\n                            minHeight=\"200px\"\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"websiteSeo.trendtech.slug\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel>URL Slug</FormLabel>\r\n                        <FormControl>\r\n                          <Input placeholder=\"thuong-hieu-abc\" {...field} value={field.value || ''} />\r\n                        </FormControl>\r\n                        <FormDescription>ƒê∆∞·ªùng d·∫´n URL th√¢n thi·ªán</FormDescription>\r\n                        <FormMessage />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"pb-3\">\r\n                  <CardTitle className=\"text-base flex items-center gap-2\"><BarChart3 className=\"h-4 w-4\" /> Ph√¢n t√≠ch SEO</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <SeoAnalysisPanel\r\n                    title={watchedTrendtechSeoTitle || watchedName || ''}\r\n                    description={watchedTrendtechMetaDesc || ''}\r\n                    keywords={watchedTrendtechKeywords || ''}\r\n                    slug={watchedTrendtechSlug || ''}\r\n                    siteName=\"trendtech.vn\"\r\n                  />\r\n                </CardContent>\r\n              </Card>\r\n            </TabsContent>\r\n          </Tabs>\r\n        </form>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8351, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/app/%28authenticated%29/brands/%5BsystemId%5D/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { BrandDetailPage } from '@/features/brands/brand-detail'\r\nexport default BrandDetailPage\r\n"],"names":[],"mappings":";;;;AACA;AADA;;uCAEe,yJAAe"}}]
}