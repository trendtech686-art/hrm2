{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/api/receipts-api.ts"],"sourcesContent":["/**\r\n * Receipts (Phiếu Thu) API functions\r\n * \r\n * ⚠️ Direct import: import { fetchReceipts } from '@/features/receipts/api/receipts-api'\r\n */\r\n\r\nimport type { SystemId } from '@/lib/id-types';\r\nimport type { Receipt, ReceiptStatus, ReceiptCategory } from '../types';\r\n\r\nconst BASE_URL = '/api/receipts';\r\n\r\nexport interface ReceiptsParams {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  status?: ReceiptStatus;\r\n  category?: ReceiptCategory;\r\n  payerTypeSystemId?: string;\r\n  payerSystemId?: string;\r\n  branchId?: string;\r\n  accountId?: string;\r\n  startDate?: string;\r\n  endDate?: string;\r\n  sortBy?: string;\r\n  sortOrder?: 'asc' | 'desc';\r\n}\r\n\r\nexport interface ReceiptsResponse {\r\n  data: Receipt[];\r\n  total: number;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nexport async function fetchReceipts(params: ReceiptsParams = {}): Promise<ReceiptsResponse> {\r\n  const searchParams = new URLSearchParams();\r\n  \r\n  if (params.page) searchParams.set('page', String(params.page));\r\n  if (params.limit) searchParams.set('limit', String(params.limit));\r\n  if (params.search) searchParams.set('search', params.search);\r\n  if (params.status) searchParams.set('status', params.status);\r\n  if (params.category) searchParams.set('category', params.category);\r\n  if (params.payerTypeSystemId) searchParams.set('payerTypeSystemId', params.payerTypeSystemId);\r\n  if (params.payerSystemId) searchParams.set('payerSystemId', params.payerSystemId);\r\n  if (params.branchId) searchParams.set('branchId', params.branchId);\r\n  if (params.accountId) searchParams.set('accountId', params.accountId);\r\n  if (params.startDate) searchParams.set('startDate', params.startDate);\r\n  if (params.endDate) searchParams.set('endDate', params.endDate);\r\n  if (params.sortBy) searchParams.set('sortBy', params.sortBy);\r\n  if (params.sortOrder) searchParams.set('sortOrder', params.sortOrder);\r\n  \r\n  const url = searchParams.toString() ? `${BASE_URL}?${searchParams}` : BASE_URL;\r\n  const response = await fetch(url);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch receipts: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function fetchReceipt(systemId: SystemId): Promise<Receipt> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch receipt: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function createReceipt(data: Omit<Receipt, 'systemId' | 'id' | 'createdAt' | 'updatedAt'>): Promise<Receipt> {\r\n  const response = await fetch(BASE_URL, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to create receipt');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function updateReceipt(systemId: SystemId, data: Partial<Receipt>): Promise<Receipt> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'PUT',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to update receipt');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function deleteReceipt(systemId: SystemId): Promise<void> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}`, {\r\n    method: 'DELETE',\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to delete receipt: ${response.statusText}`);\r\n  }\r\n}\r\n\r\nexport async function cancelReceipt(systemId: SystemId, reason?: string): Promise<Receipt> {\r\n  const response = await fetch(`${BASE_URL}/${systemId}/cancel`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ reason }),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || 'Failed to cancel receipt');\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n\r\nexport async function fetchReceiptStats(): Promise<{\r\n  total: number;\r\n  completed: number;\r\n  cancelled: number;\r\n  totalAmount: number;\r\n}> {\r\n  const response = await fetch(`${BASE_URL}/stats`);\r\n  \r\n  if (!response.ok) {\r\n    throw new Error(`Failed to fetch receipt stats: ${response.statusText}`);\r\n  }\r\n  \r\n  return response.json();\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/hooks/use-receipts.ts"],"sourcesContent":["/**\r\n * useReceipts - React Query hooks (Phiếu Thu)\r\n * \r\n * ⚠️ Direct import: import { useReceipts } from '@/features/receipts/hooks/use-receipts'\r\n */\r\n\r\nimport { useQuery, useMutation, useQueryClient, keepPreviousData } from '@tanstack/react-query';\r\nimport { asSystemId } from '@/lib/id-types';\r\nimport {\r\n  fetchReceipts,\r\n  fetchReceipt,\r\n  createReceipt,\r\n  updateReceipt,\r\n  deleteReceipt,\r\n  cancelReceipt,\r\n  fetchReceiptStats,\r\n  type ReceiptsParams,\r\n} from '../api/receipts-api';\r\nimport type { Receipt } from '../types';\r\n\r\nexport const receiptKeys = {\r\n  all: ['receipts'] as const,\r\n  lists: () => [...receiptKeys.all, 'list'] as const,\r\n  list: (params: ReceiptsParams) => [...receiptKeys.lists(), params] as const,\r\n  details: () => [...receiptKeys.all, 'detail'] as const,\r\n  detail: (id: string) => [...receiptKeys.details(), id] as const,\r\n  stats: () => [...receiptKeys.all, 'stats'] as const,\r\n};\r\n\r\nexport function useReceipts(params: ReceiptsParams = {}) {\r\n  return useQuery({\r\n    queryKey: receiptKeys.list(params),\r\n    queryFn: () => fetchReceipts(params),\r\n    staleTime: 30_000,\r\n    gcTime: 5 * 60 * 1000,\r\n    placeholderData: keepPreviousData,\r\n  });\r\n}\r\n\r\nexport function useReceipt(id: string | null | undefined) {\r\n  return useQuery({\r\n    queryKey: receiptKeys.detail(id!),\r\n    queryFn: () => fetchReceipt(asSystemId(id!)),\r\n    enabled: !!id,\r\n    staleTime: 60_000,\r\n  });\r\n}\r\n\r\nexport function useReceiptStats() {\r\n  return useQuery({\r\n    queryKey: receiptKeys.stats(),\r\n    queryFn: fetchReceiptStats,\r\n    staleTime: 60_000,\r\n  });\r\n}\r\n\r\ninterface UseReceiptMutationsOptions {\r\n  onCreateSuccess?: (receipt: Receipt) => void;\r\n  onUpdateSuccess?: (receipt: Receipt) => void;\r\n  onDeleteSuccess?: () => void;\r\n  onCancelSuccess?: (receipt: Receipt) => void;\r\n  onError?: (error: Error) => void;\r\n}\r\n\r\nexport function useReceiptMutations(options: UseReceiptMutationsOptions = {}) {\r\n  const queryClient = useQueryClient();\r\n  \r\n  const create = useMutation({\r\n    mutationFn: createReceipt,\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.lists() });\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.stats() });\r\n      options.onCreateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const update = useMutation({\r\n    mutationFn: ({ systemId, data }: { systemId: string; data: Partial<Receipt> }) => \r\n      updateReceipt(asSystemId(systemId), data),\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.lists() });\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.stats() });\r\n      options.onUpdateSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const remove = useMutation({\r\n    mutationFn: (systemId: string) => deleteReceipt(asSystemId(systemId)),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.all });\r\n      options.onDeleteSuccess?.();\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  const cancel = useMutation({\r\n    mutationFn: ({ systemId, reason }: { systemId: string; reason?: string }) => \r\n      cancelReceipt(asSystemId(systemId), reason),\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.detail(variables.systemId) });\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.lists() });\r\n      queryClient.invalidateQueries({ queryKey: receiptKeys.stats() });\r\n      options.onCancelSuccess?.(data);\r\n    },\r\n    onError: options.onError,\r\n  });\r\n  \r\n  return { create, update, remove, cancel };\r\n}\r\n\r\nexport function useReceiptsByPayer(payerSystemId: string | null | undefined) {\r\n  return useReceipts({\r\n    payerSystemId: payerSystemId || undefined,\r\n    limit: 50,\r\n  });\r\n}\r\n\r\nexport function useReceiptsByBranch(branchId: string | null | undefined) {\r\n  return useReceipts({\r\n    branchId: branchId || undefined,\r\n    limit: 100,\r\n  });\r\n}\r\n\r\nexport function useReceiptsByDateRange(startDate: string, endDate: string) {\r\n  return useReceipts({ startDate, endDate });\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/hooks/use-all-receipts.ts"],"sourcesContent":["/**\r\n * useAllReceipts - Convenience hook for components needing all receipts as flat array\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { useReceipts } from './use-receipts';\r\nimport type { Receipt } from '../types';\r\n\r\nexport function useAllReceipts() {\r\n  const query = useReceipts({});\r\n  \r\n  return {\r\n    data: query.data?.data || [],\r\n    isLoading: query.isLoading,\r\n    isError: query.isError,\r\n    error: query.error,\r\n  };\r\n}\r\n\r\n/**\r\n * Finder hook for looking up receipts by systemId\r\n */\r\nexport function useReceiptFinder() {\r\n  const { data: receipts = [] } = useAllReceipts();\r\n  \r\n  const findById = React.useCallback((systemId: string): Receipt | undefined => {\r\n    return receipts.find(r => r.systemId === systemId);\r\n  }, [receipts]);\r\n  \r\n  return { findById };\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;CAEC,GAED;AACA;;;AAGO,SAAS;IACd,MAAM,QAAQ,IAAA,+JAAW,EAAC,CAAC;IAE3B,OAAO;QACL,MAAM,MAAM,IAAI,EAAE,QAAQ,EAAE;QAC5B,WAAW,MAAM,SAAS;QAC1B,SAAS,MAAM,OAAO;QACtB,OAAO,MAAM,KAAK;IACpB;AACF;AAKO,SAAS;IACd,MAAM,EAAE,MAAM,WAAW,EAAE,EAAE,GAAG;IAEhC,MAAM,WAAW,oNAAiB,CAAC,CAAC;QAClC,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;IAC3C,GAAG;QAAC;KAAS;IAEb,OAAO;QAAE;IAAS;AACpB"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/columns.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { formatDateCustom } from '@/lib/date-utils';\r\nimport type { Receipt } from './types';\r\nimport type { CashAccount } from \"../cashbook/types\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { DataTableColumnHeader } from \"@/components/data-table/data-table-column-header\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport type { ColumnDef } from '@/components/data-table/types';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Pencil, Trash2, RotateCcw, Eye, MoreHorizontal, CheckCircle, XCircle, Printer } from \"lucide-react\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"../../components/ui/tooltip\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\nconst formatCurrency = (value?: number) => {\r\n    if (typeof value !== 'number') return '0';\r\n    return new Intl.NumberFormat('vi-VN').format(value);\r\n};\r\n\r\nconst formatDateDisplay = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return formatDateCustom(date, \"dd/MM/yyyy\");\r\n};\r\n\r\nconst formatDateTimeDisplay = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return formatDateCustom(date, \"dd/MM/yyyy HH:mm\");\r\n};\r\n\r\nconst getStatusBadge = (status?: Receipt['status']) => {\r\n    const normalizedStatus: Receipt['status'] = status === 'cancelled' ? 'cancelled' : 'completed';\r\n    const variants: Record<Receipt['status'], { label: string; variant: 'default' | 'destructive' }> = {\r\n        completed: { label: 'Hoàn thành', variant: 'default' },\r\n        cancelled: { label: 'Đã hủy', variant: 'destructive' },\r\n    };\r\n    const config = variants[normalizedStatus];\r\n    return <Badge variant={config.variant}>{config.label}</Badge>;\r\n};\r\n\r\nexport const getColumns = (\r\n    accounts: CashAccount[],\r\n    onCancel: (systemId: SystemId) => void,\r\n    navigate: (path: string) => void,\r\n    onPrint?: (receipt: Receipt) => void\r\n): ColumnDef<Receipt>[] => [\r\n    {\r\n        id: \"select\",\r\n        header: ({ isAllPageRowsSelected, isSomePageRowsSelected, onToggleAll }) => (\r\n            <Checkbox\r\n                checked={isAllPageRowsSelected ? true : isSomePageRowsSelected ? \"indeterminate\" : false}\r\n                onCheckedChange={(value) => onToggleAll?.(!!value)}\r\n                aria-label=\"Select all\"\r\n            />\r\n        ),\r\n        cell: ({ onToggleSelect, isSelected }) => (\r\n            <Checkbox\r\n                checked={isSelected}\r\n                onCheckedChange={onToggleSelect}\r\n                aria-label=\"Select row\"\r\n            />\r\n        ),\r\n        size: 48,\r\n        meta: {\r\n            displayName: \"Chọn\",\r\n            sticky: \"left\",\r\n        }\r\n    },\r\n    {\r\n        id: \"id\",\r\n        accessorKey: \"id\",\r\n        header: ({ sorting, setSorting }) => (\r\n            <DataTableColumnHeader\r\n                title=\"Mã phiếu\"\r\n                sortKey=\"id\"\r\n                isSorted={sorting?.id === 'id'}\r\n                sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n                onSort={() => setSorting?.((s: any) => ({ id: 'id', desc: s.id === 'id' ? !s.desc : false }))}\r\n            />\r\n        ),\r\n        cell: ({ row }) => <div className=\"font-medium\">{row.id}</div>,\r\n        meta: {\r\n            displayName: \"Mã phiếu\",\r\n            group: \"Thông tin chung\"\r\n        },\r\n    },\r\n    {\r\n        id: \"date\",\r\n        accessorKey: \"date\",\r\n        header: ({ sorting, setSorting }) => (\r\n            <DataTableColumnHeader\r\n                title=\"Ngày thu\"\r\n                sortKey=\"date\"\r\n                isSorted={sorting?.id === 'date'}\r\n                sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n                onSort={() => setSorting?.((s: any) => ({ id: 'date', desc: s.id === 'date' ? !s.desc : false }))}\r\n            />\r\n        ),\r\n        cell: ({ row }) => formatDateDisplay(row.date),\r\n        meta: {\r\n            displayName: \"Ngày thu\",\r\n            group: \"Thông tin chung\"\r\n        },\r\n    },\r\n    {\r\n        id: \"amount\",\r\n        accessorKey: \"amount\",\r\n        header: ({ sorting, setSorting }) => (\r\n            <DataTableColumnHeader\r\n                title=\"Số tiền\"\r\n                sortKey=\"amount\"\r\n                isSorted={sorting?.id === 'amount'}\r\n                sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n                onSort={() => setSorting?.((s: any) => ({ id: 'amount', desc: s.id === 'amount' ? !s.desc : false }))}\r\n            />\r\n        ),\r\n        cell: ({ row }) => (\r\n            <div className=\"text-right font-medium text-green-600\">\r\n                {formatCurrency(row.amount)} ₫\r\n            </div>\r\n        ),\r\n        meta: {\r\n            displayName: \"Số tiền\",\r\n            group: \"Thông tin chung\"\r\n        },\r\n    },\r\n    {\r\n        id: \"payerName\",\r\n        accessorKey: \"payerName\",\r\n        header: \"Người nộp\",\r\n        cell: ({ row }) => (\r\n            <div className=\"max-w-[200px] truncate\" title={row.payerName}>\r\n                {row.payerName}\r\n            </div>\r\n        ),\r\n        meta: {\r\n            displayName: \"Người nộp\",\r\n            group: \"Thông tin người nộp\"\r\n        },\r\n    },\r\n    {\r\n        id: \"payerTypeName\",\r\n        accessorKey: \"payerTypeName\",\r\n        header: \"Loại người nộp\",\r\n        cell: ({ row }) => row.payerTypeName,\r\n        meta: {\r\n            displayName: \"Loại người nộp\",\r\n            group: \"Thông tin người nộp\"\r\n        },\r\n    },\r\n    {\r\n        id: \"paymentMethodName\",\r\n        accessorKey: \"paymentMethodName\",\r\n        header: \"Hình thức\",\r\n        cell: ({ row }) => row.paymentMethodName,\r\n        meta: {\r\n            displayName: \"Hình thức thanh toán\",\r\n            group: \"Thông tin thanh toán\"\r\n        },\r\n    },\r\n    {\r\n        id: \"accountSystemId\",\r\n        accessorKey: \"accountSystemId\",\r\n        header: \"Tài khoản\",\r\n        cell: ({ row }) => {\r\n            const account = accounts.find(a => a.systemId === row.accountSystemId);\r\n            return (\r\n                <div className=\"max-w-[150px] truncate\" title={account?.name}>\r\n                    {account?.name || row.accountSystemId}\r\n                </div>\r\n            );\r\n        },\r\n        meta: {\r\n            displayName: \"Tài khoản\",\r\n            group: \"Thông tin thanh toán\"\r\n        },\r\n    },\r\n    {\r\n        id: \"paymentReceiptTypeName\",\r\n        accessorKey: \"paymentReceiptTypeName\",\r\n        header: \"Loại phiếu\",\r\n        cell: ({ row }) => row.paymentReceiptTypeName,\r\n        meta: {\r\n            displayName: \"Loại phiếu thu\",\r\n            group: \"Phân loại\"\r\n        },\r\n    },\r\n    {\r\n        id: \"status\",\r\n        accessorKey: \"status\",\r\n        header: \"Trạng thái\",\r\n        cell: ({ row }) => getStatusBadge(row.status),\r\n        meta: {\r\n            displayName: \"Trạng thái\",\r\n            group: \"Thông tin chung\"\r\n        },\r\n    },\r\n    {\r\n        id: \"branchName\",\r\n        accessorKey: \"branchName\",\r\n        header: \"Chi nhánh\",\r\n        cell: ({ row }) => row.branchName,\r\n        meta: {\r\n            displayName: \"Chi nhánh\",\r\n            group: \"Thông tin chi nhánh\"\r\n        },\r\n    },\r\n    {\r\n        id: \"description\",\r\n        accessorKey: \"description\",\r\n        header: \"Diễn giải\",\r\n        cell: ({ row }) => (\r\n            <div className=\"max-w-[300px] truncate\" title={row.description}>\r\n                {row.description}\r\n            </div>\r\n        ),\r\n        meta: {\r\n            displayName: \"Diễn giải\",\r\n            group: \"Thông tin chung\"\r\n        },\r\n    },\r\n    {\r\n        id: \"originalDocumentId\",\r\n        accessorKey: \"originalDocumentId\",\r\n        header: \"Chứng từ gốc\",\r\n        cell: ({ row }) => row.originalDocumentId,\r\n        meta: {\r\n            displayName: \"Chứng từ gốc\",\r\n            group: \"Liên kết\"\r\n        },\r\n    },\r\n    {\r\n        id: \"customerName\",\r\n        accessorKey: \"customerName\",\r\n        header: \"Khách hàng\",\r\n        cell: ({ row }) => row.customerName || '-',\r\n        meta: {\r\n            displayName: \"Khách hàng\",\r\n            group: \"Liên kết\"\r\n        },\r\n    },\r\n    {\r\n        id: \"affectsDebt\",\r\n        accessorKey: \"affectsDebt\",\r\n        header: \"Ảnh hưởng CN\",\r\n        cell: ({ row }) => row.affectsDebt ? <CheckCircle className=\"h-4 w-4 text-green-600\" /> : <XCircle className=\"h-4 w-4 text-gray-400\" />,\r\n        meta: {\r\n            displayName: \"Ảnh hưởng công nợ\",\r\n            group: \"Tài chính\"\r\n        },\r\n    },\r\n    {\r\n        id: \"runningBalance\",\r\n        accessorKey: \"runningBalance\",\r\n        header: \"Số dư\",\r\n        cell: ({ row }) => row.runningBalance != null ? (\r\n            <div className=\"text-right\">{formatCurrency(row.runningBalance)} ₫</div>\r\n        ) : '-',\r\n        meta: {\r\n            displayName: \"Số dư\",\r\n            group: \"Tài chính\"\r\n        },\r\n    },\r\n    {\r\n        id: \"recognitionDate\",\r\n        accessorKey: \"recognitionDate\",\r\n        header: \"Ngày ghi nhận\",\r\n        cell: ({ row }) => formatDateDisplay(row.recognitionDate),\r\n        meta: {\r\n            displayName: \"Ngày ghi nhận\",\r\n            group: \"Thông tin bổ sung\"\r\n        },\r\n    },\r\n    {\r\n        id: \"createdBy\",\r\n        accessorKey: \"createdBy\",\r\n        header: \"Người tạo\",\r\n        cell: ({ row }) => row.createdBy,\r\n        meta: {\r\n            displayName: \"Người tạo\",\r\n            group: \"Thông tin hệ thống\"\r\n        },\r\n    },\r\n    {\r\n        id: \"createdAt\",\r\n        accessorKey: \"createdAt\",\r\n        header: ({ sorting, setSorting }) => (\r\n            <DataTableColumnHeader\r\n                title=\"Ngày tạo\"\r\n                sortKey=\"createdAt\"\r\n                isSorted={sorting?.id === 'createdAt'}\r\n                sortDirection={sorting?.desc ? 'desc' : 'asc'}\r\n                onSort={() => setSorting?.((s: any) => ({ id: 'createdAt', desc: s.id === 'createdAt' ? !s.desc : false }))}\r\n            />\r\n        ),\r\n        cell: ({ row }) => formatDateTimeDisplay(row.createdAt),\r\n        meta: {\r\n            displayName: \"Ngày tạo\",\r\n            group: \"Thông tin hệ thống\"\r\n        },\r\n    },\r\n    {\r\n        id: \"actions\",\r\n        header: () => <div className=\"text-center\">Hành động</div>,\r\n        cell: ({ row }) => {\r\n            const receipt = row as unknown as Receipt;\r\n            const isCancelled = receipt.status === 'cancelled';\r\n\r\n            return (\r\n                <div className=\"flex items-center justify-center gap-0.5\">\r\n                    {isCancelled ? (\r\n                        <TooltipProvider>\r\n                            <Tooltip>\r\n                                <TooltipTrigger asChild>\r\n                                    <div className=\"text-xs text-muted-foreground px-2\">Đã hủy</div>\r\n                                </TooltipTrigger>\r\n                                <TooltipContent>Phiếu đã bị hủy</TooltipContent>\r\n                            </Tooltip>\r\n                        </TooltipProvider>\r\n                    ) : (\r\n                        <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-7 w-7 p-0\"\r\n                                    onClick={(e) => e.stopPropagation()}\r\n                                >\r\n                                    <MoreHorizontal className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\" className=\"w-48\">\r\n                                <DropdownMenuItem\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        onPrint?.(receipt);\r\n                                    }}\r\n                                >\r\n                                    <Printer className=\"mr-2 h-4 w-4\" />\r\n                                    In phiếu\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuItem\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        navigate(`/receipts/${receipt.systemId}/edit`);\r\n                                    }}\r\n                                >\r\n                                    Chỉnh sửa\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuSeparator />\r\n                                <DropdownMenuItem\r\n                                    className=\"text-destructive focus:text-destructive\"\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        onCancel(receipt.systemId);\r\n                                    }}\r\n                                >\r\n                                    Hủy phiếu\r\n                                </DropdownMenuItem>\r\n                            </DropdownMenuContent>\r\n                        </DropdownMenu>\r\n                    )}\r\n                </div>\r\n            );\r\n        },\r\n        size: 90,\r\n        meta: {\r\n            displayName: \"Hành động\",\r\n            sticky: \"right\",\r\n        },\r\n    },\r\n];\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 862, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { formatDate, formatDateCustom } from '@/lib/date-utils';\r\nimport type { Receipt } from './types';\r\nimport { Card, CardContent, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { TouchButton } from \"@/components/mobile/touch-button\";\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\r\nimport { MoreHorizontal, Calendar, DollarSign, User, Building2, FileText, XCircle, Eye, Pencil } from \"lucide-react\";\r\nimport type { SystemId } from '@/lib/id-types';\r\n\r\nconst formatCurrency = (value?: number) => {\r\n    if (typeof value !== 'number') return '0';\r\n    return new Intl.NumberFormat('vi-VN').format(value);\r\n};\r\n\r\nconst formatDateDisplay = (dateString?: string) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return formatDateCustom(date, \"dd/MM/yyyy\");\r\n};\r\n\r\nconst getStatusBadge = (status?: Receipt['status']) => {\r\n    const normalizedStatus: Receipt['status'] = status === 'cancelled' ? 'cancelled' : 'completed';\r\n    const variants: Record<Receipt['status'], { label: string; variant: 'default' | 'destructive' }> = {\r\n        completed: { label: 'Hoàn thành', variant: 'default' },\r\n        cancelled: { label: 'Đã hủy', variant: 'destructive' },\r\n    };\r\n    const config = variants[normalizedStatus];\r\n    return <Badge variant={config.variant}>{config.label}</Badge>;\r\n};\r\n\r\nexport interface MobileReceiptCardProps {\r\n    receipt: Receipt;\r\n    onCancel: (systemId: SystemId) => void;\r\n    navigate: (path: string) => void;\r\n    handleRowClick: (receipt: Receipt) => void;\r\n}\r\n\r\nexport const MobileReceiptCard = ({ receipt, onCancel, navigate, handleRowClick }: MobileReceiptCardProps) => {\r\n    const getInitials = (name: string) => {\r\n        return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);\r\n    };\r\n\r\n    return (\r\n        <Card \r\n            className=\"hover:shadow-md transition-shadow cursor-pointer\"\r\n            onClick={() => handleRowClick(receipt)}\r\n        >\r\n            <CardContent className=\"p-4\">\r\n                {/* Header: ID + Amount + Menu */}\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <div className=\"flex items-center gap-2 flex-1 min-w-0\">\r\n                        <div className=\"flex items-center gap-1.5 min-w-0 flex-1\">\r\n                            <CardTitle className=\"font-semibold text-sm truncate\">{receipt.id}</CardTitle>\r\n                            <span className=\"text-xs text-muted-foreground\">•</span>\r\n                            <span className=\"text-sm font-medium text-emerald-600\">{formatCurrency(receipt.amount)} ₫</span>\r\n                        </div>\r\n                    </div>\r\n                    {receipt.status !== 'cancelled' && (\r\n                        <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                                <TouchButton\r\n                                    variant=\"ghost\"\r\n                                    size=\"sm\"\r\n                                    className=\"h-9 w-10 p-0 flex-shrink-0\"\r\n                                    onClick={(e) => e.stopPropagation()}\r\n                                >\r\n                                    <MoreHorizontal className=\"h-4 w-4\" />\r\n                                </TouchButton>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\">\r\n                                <DropdownMenuItem onClick={(e) => { e.stopPropagation(); navigate(`/receipts/${receipt.systemId}`); }}>\r\n                                    <Eye className=\"mr-2 h-4 w-4\" />\r\n                                    Xem chi tiết\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuItem onClick={(e) => { e.stopPropagation(); navigate(`/receipts/${receipt.systemId}/edit`); }}>\r\n                                    <Pencil className=\"mr-2 h-4 w-4\" />\r\n                                    Chỉnh sửa\r\n                                </DropdownMenuItem>\r\n                                <DropdownMenuSeparator />\r\n                                <DropdownMenuItem \r\n                                    className=\"text-destructive focus:text-destructive\"\r\n                                    onClick={(e) => { e.stopPropagation(); onCancel(receipt.systemId); }}\r\n                                >\r\n                                    <XCircle className=\"mr-2 h-4 w-4\" />\r\n                                    Hủy phiếu\r\n                                </DropdownMenuItem>\r\n                            </DropdownMenuContent>\r\n                        </DropdownMenu>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Payer + Payment Method */}\r\n                <div className=\"text-xs text-muted-foreground mb-3 flex items-center\">\r\n                    <User className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\r\n                    <span className=\"truncate\">{receipt.payerName} • {receipt.paymentMethodName}</span>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                <div className=\"border-t mb-3\" />\r\n\r\n                {/* Details */}\r\n                <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center text-xs text-muted-foreground\">\r\n                        <Calendar className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\r\n                        <span>{formatDateDisplay(receipt.date)}</span>\r\n                    </div>\r\n                    {receipt.branchName && (\r\n                        <div className=\"flex items-center text-xs text-muted-foreground\">\r\n                            <Building2 className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\r\n                            <span className=\"truncate\">{receipt.branchName}</span>\r\n                        </div>\r\n                    )}\r\n                    {receipt.description && (\r\n                        <div className=\"flex items-center text-xs text-muted-foreground\">\r\n                            <FileText className=\"h-3 w-3 mr-1.5 flex-shrink-0\" />\r\n                            <span className=\"truncate\">{receipt.description}</span>\r\n                        </div>\r\n                    )}\r\n                    <div className=\"flex items-center justify-between text-xs pt-1\">\r\n                        <div className=\"flex items-center text-muted-foreground\">\r\n                            {receipt.paymentReceiptTypeName && (\r\n                                <span className=\"text-xs\">{receipt.paymentReceiptTypeName}</span>\r\n                            )}\r\n                        </div>\r\n                        {getStatusBadge(receipt.status)}\r\n                    </div>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1243, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/features/receipts/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from \"react\";\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAllReceipts } from \"./hooks/use-all-receipts\";\r\nimport { useReceiptMutations } from \"./hooks/use-receipts\";\r\nimport { useAllReceiptTypes } from \"../settings/receipt-types/hooks/use-all-receipt-types\";\r\nimport { useAllCashAccounts } from \"../cashbook/hooks/use-all-cash-accounts\";\r\nimport { useAllBranches } from \"../settings/branches/hooks/use-all-branches\";\r\nimport { useAllCustomers } from \"../customers/hooks/use-all-customers\";\r\nimport { useStoreInfo } from \"../settings/store-info/hooks/use-store-info\";\r\nimport type { Receipt } from \"./types\";\r\nimport { usePageHeader } from \"@/contexts/page-header-context\";\r\nimport { ResponsiveDataTable, type BulkAction } from \"@/components/data-table/responsive-data-table\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Plus, Printer, FileSpreadsheet, Download } from \"lucide-react\";\r\nimport { GenericImportDialogV2 } from \"../../components/shared/generic-import-dialog-v2\";\r\nimport { GenericExportDialogV2 } from \"../../components/shared/generic-export-dialog-v2\";\r\nimport { receiptImportExportConfig } from \"../../lib/import-export/configs/receipt.config\";\r\nimport { useAuth } from \"../../contexts/auth-context\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport Fuse from \"fuse.js\";\r\nimport { DataTableColumnCustomizer } from \"@/components/data-table/data-table-column-toggle\";\r\nimport { DataTableImportDialog } from \"@/components/data-table/data-table-import-dialog\";\r\nimport { DataTableDateFilter } from \"@/components/data-table/data-table-date-filter\";\r\nimport { DataTableFacetedFilter } from \"@/components/data-table/data-table-faceted-filter\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { PageToolbar } from \"@/components/layout/page-toolbar\";\r\nimport { PageFilters } from \"@/components/layout/page-filters\";\r\nimport { useMediaQuery } from \"@/lib/use-media-query\";\r\nimport { ROUTES, generatePath } from \"@/lib/router\";\r\nimport { toast } from \"sonner\";\r\nimport { formatDate, formatDateCustom, toISODate, toISODateTime } from '@/lib/date-utils';\r\nimport { isAfter, isBefore, isSameDay, differenceInMilliseconds } from 'date-fns';\r\nimport { getColumns } from \"./columns\";\r\nimport { MobileReceiptCard } from \"./card\";\r\nimport { asSystemId } from '@/lib/id-types';\r\nimport { usePrint } from \"@/lib/use-print\";\r\nimport { \r\n  convertReceiptForPrint,\r\n  mapReceiptToPrintData,\r\n  createStoreSettings,\r\n} from \"@/lib/print/receipt-print-helper\";\r\nimport { SimplePrintOptionsDialog, type SimplePrintOptionsResult } from \"@/components/shared/simple-print-options-dialog\";\r\nimport { useColumnVisibility } from \"../../hooks/use-column-visibility\";\r\n\r\nconst formatCurrency = (value?: number) => {\r\n  if (typeof value !== 'number') return '0';\r\n  return new Intl.NumberFormat('vi-VN').format(value);\r\n};\r\n\r\nconst formatDateDisplay = (dateString?: string) => {\r\n  if (!dateString) return '';\r\n  return formatDateCustom(new Date(dateString), \"dd/MM/yyyy\");\r\n};\r\n\r\nexport function ReceiptsPage() {\r\n    const router = useRouter();\r\n    const isMobile = useMediaQuery(\"(max-width: 768px)\");\r\n\r\n    const { data: receipts = [] } = useAllReceipts();\r\n    const { create, update, remove, cancel } = useReceiptMutations();\r\n    const { accounts = [] } = useAllCashAccounts();\r\n    const { data: branches = [] } = useAllBranches();\r\n    const { data: receiptTypes = [] } = useAllReceiptTypes();\r\n    const { data: customers = [] } = useAllCustomers();\r\n    const { data: storeInfo } = useStoreInfo();\r\n    const { print, printMultiple } = usePrint();\r\n    const { employee } = useAuth();\r\n\r\n    // Print dialog state\r\n    const [printDialogOpen, setPrintDialogOpen] = React.useState(false);\r\n    const [itemsToPrint, setItemsToPrint] = React.useState<Receipt[]>([]);\r\n    \r\n    // Import/Export dialog state\r\n    const [showImportDialog, setShowImportDialog] = React.useState(false);\r\n    const [showExportDialog, setShowExportDialog] = React.useState(false);\r\n    \r\n    // ✅ Header Actions\r\n    const headerActions = React.useMemo(() => [\r\n        <Button\r\n            key=\"add\"\r\n            size=\"sm\"\r\n            className=\"h-9\"\r\n            onClick={() => router.push(ROUTES.FINANCE.RECEIPT_NEW)}\r\n        >\r\n            <Plus className=\"mr-2 h-4 w-4\" />\r\n            Tạo phiếu thu\r\n        </Button>\r\n    ], [router]);\r\n    \r\n    usePageHeader({\r\n        title: 'Danh sách phiếu thu',\r\n        breadcrumb: [\r\n            { label: 'Trang chủ', href: '/', isCurrent: false },\r\n            { label: 'Phiếu thu', href: ROUTES.FINANCE.RECEIPTS, isCurrent: true }\r\n        ],\r\n        actions: headerActions,\r\n        showBackButton: false\r\n    });\r\n\r\n    const [rowSelection, setRowSelection] = React.useState<Record<string, boolean>>({});\r\n    const [isAlertOpen, setIsAlertOpen] = React.useState(false);\r\n    const [idToDelete, setIdToDelete] = React.useState<string | null>(null);\r\n    const [isBulkDeleteAlertOpen, setIsBulkDeleteAlertOpen] = React.useState(false);\r\n\r\n    const [sorting, setSorting] = React.useState({ id: 'createdAt', desc: true });\r\n    const [globalFilter, setGlobalFilter] = React.useState('');\r\n    const [debouncedGlobalFilter, setDebouncedGlobalFilter] = React.useState('');\r\n    const [pagination, setPagination] = React.useState({ pageIndex: 0, pageSize: 20 });\r\n    const [mobileLoadedCount, setMobileLoadedCount] = React.useState(20);\r\n    \r\n    // Use hook for column visibility (database-backed)\r\n    const [columnVisibility, setColumnVisibility] = useColumnVisibility('receipts', {});\r\n    \r\n    const [columnOrder, setColumnOrder] = React.useState<string[]>([]);\r\n    const [pinnedColumns, setPinnedColumns] = React.useState<string[]>(['select', 'id']);\r\n    \r\n    // ✅ New Filters\r\n    const [branchFilter, setBranchFilter] = React.useState('all');\r\n    const [statusFilter, setStatusFilter] = React.useState<Set<string>>(new Set());\r\n    const [typeFilter, setTypeFilter] = React.useState<Set<string>>(new Set());\r\n    const [customerFilter, setCustomerFilter] = React.useState<Set<string>>(new Set());\r\n    const [dateRange, setDateRange] = React.useState<[string | undefined, string | undefined] | undefined>();\r\n    \r\n    // ✅ Debounce search\r\n    React.useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setDebouncedGlobalFilter(globalFilter);\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n    }, [globalFilter]);\r\n    \r\n    const handleCancel = React.useCallback((systemId: string) => {\r\n        setIdToDelete(systemId);\r\n        setIsAlertOpen(true);\r\n    }, []);\r\n    \r\n    const handleEdit = React.useCallback((receipt: Receipt) => {\r\n        router.push(generatePath(ROUTES.FINANCE.RECEIPT_EDIT, { systemId: receipt.systemId }));\r\n    }, [router]);\r\n    \r\n    const handleRowClick = React.useCallback((receipt: Receipt) => {\r\n        router.push(generatePath(ROUTES.FINANCE.RECEIPT_VIEW, { systemId: receipt.systemId }));\r\n    }, [router]);\r\n\r\n    // Single print handler for dropdown action\r\n    const handleSinglePrint = React.useCallback((receipt: Receipt) => {\r\n        const branch = branches.find(b => b.systemId === receipt.branchSystemId);\r\n        const storeSettings = branch \r\n            ? createStoreSettings(branch)\r\n            : createStoreSettings(storeInfo);\r\n        const receiptData = convertReceiptForPrint(receipt, {});\r\n        \r\n        print('receipt', {\r\n            data: mapReceiptToPrintData(receiptData, storeSettings),\r\n            lineItems: [],\r\n        });\r\n    }, [branches, storeInfo, print]);\r\n\r\n    const columns = React.useMemo(() => getColumns(accounts, handleCancel, (path: string) => router.push(path), handleSinglePrint), [accounts, handleCancel, router, handleSinglePrint]);\r\n    \r\n        // ✅ Set default column visibility - Run ONCE on mount\r\n        const hasInitializedVisibility = React.useRef(false);\r\n        React.useEffect(() => {\r\n            if (hasInitializedVisibility.current) return;\r\n            hasInitializedVisibility.current = true;\r\n\r\n            const defaultVisibleColumns = [\r\n                'id', 'date', 'amount', 'payerName', 'payerTypeName', 'paymentMethodName', \r\n                'accountSystemId', 'paymentReceiptTypeName', 'status', 'branchName', \r\n                'description', 'originalDocumentId', 'customerName', 'createdBy', 'createdAt'\r\n            ];\r\n            const initialVisibility: Record<string, boolean> = {};\r\n            columns.forEach(c => {\r\n                    if (c.id === 'select' || c.id === 'actions') {\r\n                            initialVisibility[c.id!] = true;\r\n                    } else {\r\n                            initialVisibility[c.id!] = defaultVisibleColumns.includes(c.id!);\r\n                    }\r\n            });\r\n            setColumnVisibility(initialVisibility);\r\n            setColumnOrder(columns.map(c => c.id).filter(Boolean) as string[]);\r\n        }, [columns]); // ✅ Depends on columns\r\n    \r\n    const fuse = React.useMemo(() => new Fuse(receipts, { \r\n        keys: [\"id\", \"description\", \"payerName\", \"originalDocumentId\", \"createdBy\"],\r\n        threshold: 0.3,\r\n        ignoreLocation: true\r\n    }), [receipts]);\r\n    \r\n    const confirmCancel = () => { \r\n        if (idToDelete) {\r\n            cancel.mutate(\r\n                { systemId: idToDelete },\r\n                {\r\n                    onSuccess: () => toast.success(\"Đã hủy phiếu thu\"),\r\n                    onSettled: () => setIsAlertOpen(false),\r\n                }\r\n            );\r\n        } else {\r\n            setIsAlertOpen(false);\r\n        }\r\n    };\r\n\r\n    const confirmBulkCancel = () => {\r\n        const idsToCancel = Object.keys(rowSelection);\r\n        let completed = 0;\r\n        idsToCancel.forEach(id => {\r\n            cancel.mutate(\r\n                { systemId: id },\r\n                {\r\n                    onSuccess: () => {\r\n                        completed++;\r\n                        if (completed === idsToCancel.length) {\r\n                            toast.success(`Đã hủy ${idsToCancel.length} phiếu thu`);\r\n                            setRowSelection({});\r\n                            setIsBulkDeleteAlertOpen(false);\r\n                        }\r\n                    },\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    const handleAddNew = () => {\r\n        router.push(ROUTES.FINANCE.RECEIPT_NEW);\r\n    };\r\n    \r\n    // ✅ Filter options\r\n    const statusOptions = React.useMemo(() => [\r\n        { value: 'completed', label: 'Hoàn thành' },\r\n        { value: 'cancelled', label: 'Đã hủy' }\r\n    ], []);\r\n    \r\n    const typeOptions = React.useMemo(() => \r\n        receiptTypes.map(rt => ({ value: rt.systemId, label: rt.name }))\r\n    , [receiptTypes]);\r\n    \r\n    const customerOptions = React.useMemo(() => \r\n        customers.map(c => ({ value: c.systemId, label: c.name }))\r\n    , [customers]);\r\n    \r\n    // ✅ Apply all filters\r\n    const filteredData = React.useMemo(() => {\r\n        let result = receipts;\r\n        \r\n        // Branch filter\r\n        if (branchFilter && branchFilter !== 'all') {\r\n            result = result.filter(r => r.branchSystemId === branchFilter);\r\n        }\r\n        \r\n        // Status filter\r\n        if (statusFilter.size > 0) {\r\n            result = result.filter(r => r.status && statusFilter.has(r.status));\r\n        }\r\n        \r\n        // Type filter\r\n        if (typeFilter.size > 0) {\r\n            result = result.filter(r => r.paymentReceiptTypeSystemId && typeFilter.has(r.paymentReceiptTypeSystemId));\r\n        }\r\n        \r\n        // Customer filter\r\n        if (customerFilter.size > 0) {\r\n            result = result.filter(r => r.customerSystemId && customerFilter.has(r.customerSystemId));\r\n        }\r\n        \r\n        // Date range filter\r\n        if (dateRange && (dateRange[0] || dateRange[1])) {\r\n            result = result.filter(r => {\r\n                if (!r.date) return false;\r\n                const voucherDate = new Date(r.date);\r\n                const start = dateRange[0] ? new Date(dateRange[0]) : null;\r\n                const end = dateRange[1] ? new Date(dateRange[1]) : null;\r\n                \r\n                if (start && end) {\r\n                    return (isAfter(voucherDate, start) || isSameDay(voucherDate, start)) && \r\n                           (isBefore(voucherDate, end) || isSameDay(voucherDate, end));\r\n                } else if (start) {\r\n                    return isAfter(voucherDate, start) || isSameDay(voucherDate, start);\r\n                } else if (end) {\r\n                    return isBefore(voucherDate, end) || isSameDay(voucherDate, end);\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n        \r\n        // Text search (debounced)\r\n        if (debouncedGlobalFilter) {\r\n            const searchResults = fuse.search(debouncedGlobalFilter);\r\n            const searchIds = new Set(searchResults.map(r => r.item.systemId));\r\n            result = result.filter(r => searchIds.has(r.systemId));\r\n        }\r\n        \r\n        return result;\r\n    }, [receipts, branchFilter, statusFilter, typeFilter, customerFilter, dateRange, debouncedGlobalFilter, fuse]);\r\n    \r\n    // ✅ Calculate running balance\r\n    const dataWithRunningBalance = React.useMemo(() => {\r\n        // Sort by date ascending to calculate balance correctly\r\n        const sorted = [...filteredData].sort((a, b) => {\r\n            const dateA = new Date(a.date);\r\n            const dateB = new Date(b.date);\r\n            return differenceInMilliseconds(dateA, dateB);\r\n        });\r\n        \r\n        let balance = 0;\r\n        return sorted.map(voucher => {\r\n            // Receipts always increase balance\r\n            balance += voucher.amount;\r\n            return { ...voucher, runningBalance: balance };\r\n        });\r\n    }, [filteredData]);\r\n    \r\n    // ✅ Status badge variant\r\n    const getStatusVariant = (status?: string): \"default\" | \"destructive\" => {\r\n        return status === 'cancelled' ? 'destructive' : 'default';\r\n    };\r\n    \r\n    // ✅ Status label\r\n    const getStatusLabel = (status?: string): string => {\r\n        return status === 'cancelled' ? 'Đã hủy' : 'Hoàn thành';\r\n    };\r\n    \r\n\r\n    \r\n    const sortedData = React.useMemo(() => {\r\n      const sorted = [...dataWithRunningBalance];\r\n      if (sorting.id) {\r\n        sorted.sort((a, b) => {\r\n          const aValue = (a as any)[sorting.id];\r\n          const bValue = (b as any)[sorting.id];\r\n          // Special handling for date columns - parse as Date for proper comparison\r\n          if (sorting.id === 'createdAt' || sorting.id === 'date') {\r\n            const aTime = aValue ? new Date(aValue).getTime() : 0;\r\n            const bTime = bValue ? new Date(bValue).getTime() : 0;\r\n            return sorting.desc ? bTime - aTime : aTime - bTime;\r\n          }\r\n          if (aValue < bValue) return sorting.desc ? 1 : -1;\r\n          if (aValue > bValue) return sorting.desc ? -1 : 1;\r\n          return 0;\r\n        });\r\n      }\r\n      return sorted;\r\n    }, [dataWithRunningBalance, sorting]);\r\n    \r\n    const allSelectedRows = React.useMemo(() => \r\n      receipts.filter(v => rowSelection[v.systemId]),\r\n    [receipts, rowSelection]);\r\n\r\n    // Selected receipts for export\r\n    const selectedReceipts = React.useMemo(() => {\r\n      return receipts.filter(r => rowSelection[r.systemId]);\r\n    }, [receipts, rowSelection]);\r\n\r\n    // Import handler\r\n    const handleImport = React.useCallback(async (\r\n      importedReceipts: Partial<Receipt>[],\r\n      mode: 'insert-only' | 'update-only' | 'upsert',\r\n      _branchId?: string\r\n    ) => {\r\n      let addedCount = 0;\r\n      let updatedCount = 0;\r\n      let skippedCount = 0;\r\n      const errors: Array<{ row: number; message: string }> = [];\r\n      \r\n      for (let index = 0; index < importedReceipts.length; index++) {\r\n        const receipt = importedReceipts[index];\r\n        try {\r\n          const existing = receipts.find(r => \r\n            r.id.toLowerCase() === (receipt.id || '').toLowerCase()\r\n          );\r\n          \r\n          if (existing) {\r\n            if (mode === 'update-only' || mode === 'upsert') {\r\n              await update.mutateAsync({ \r\n                systemId: existing.systemId, \r\n                data: { ...existing, ...receipt, systemId: existing.systemId } as Partial<Receipt> \r\n              });\r\n              updatedCount++;\r\n            } else {\r\n              skippedCount++;\r\n            }\r\n          } else {\r\n            if (mode === 'insert-only' || mode === 'upsert') {\r\n              await create.mutateAsync(receipt as Omit<Receipt, 'systemId' | 'id' | 'createdAt' | 'updatedAt'>);\r\n              addedCount++;\r\n            } else {\r\n              skippedCount++;\r\n            }\r\n          }\r\n        } catch (error) {\r\n          errors.push({ row: index + 1, message: (error as Error).message });\r\n        }\r\n      }\r\n      \r\n      if (addedCount > 0 || updatedCount > 0) {\r\n        const messages = [];\r\n        if (addedCount > 0) messages.push(`${addedCount} phiếu thu mới`);\r\n        if (updatedCount > 0) messages.push(`${updatedCount} phiếu cập nhật`);\r\n        toast.success(`Đã import: ${messages.join(', ')}`);\r\n      }\r\n      \r\n      return {\r\n        success: addedCount + updatedCount,\r\n        failed: errors.length,\r\n        inserted: addedCount,\r\n        updated: updatedCount,\r\n        skipped: skippedCount,\r\n        errors,\r\n      };\r\n    }, [receipts, create, update]);\r\n\r\n    // Bulk print handlers\r\n    const handleBulkPrint = React.useCallback((rows: Receipt[]) => {\r\n        setItemsToPrint(rows);\r\n        setPrintDialogOpen(true);\r\n    }, []);\r\n\r\n    const handlePrintConfirm = React.useCallback((options: SimplePrintOptionsResult) => {\r\n        if (itemsToPrint.length === 0) return;\r\n        \r\n        const printItems = itemsToPrint.map(receipt => {\r\n            const selectedBranch = options.branchSystemId \r\n                ? branches.find(b => b.systemId === options.branchSystemId)\r\n                : branches.find(b => b.systemId === receipt.branchSystemId);\r\n            const storeSettings = selectedBranch \r\n                ? createStoreSettings(selectedBranch)\r\n                : createStoreSettings(storeInfo);\r\n            const receiptData = convertReceiptForPrint(receipt, {});\r\n            \r\n            return {\r\n                data: mapReceiptToPrintData(receiptData, storeSettings),\r\n                lineItems: [],\r\n                paperSize: options.paperSize,\r\n            };\r\n        });\r\n\r\n        printMultiple('receipt', printItems);\r\n        toast.success(`Đang in ${itemsToPrint.length} phiếu thu`);\r\n        setItemsToPrint([]);\r\n        setPrintDialogOpen(false);\r\n    }, [itemsToPrint, branches, storeInfo, printMultiple]);\r\n\r\n    // Bulk actions\r\n    const bulkActions: BulkAction<Receipt>[] = React.useMemo(() => [\r\n        {\r\n            label: 'In phiếu',\r\n            icon: Printer,\r\n            onSelect: handleBulkPrint,\r\n        },\r\n    ], [handleBulkPrint]);\r\n\r\n    // ✅ Mobile infinite scroll\r\n    React.useEffect(() => {\r\n        if (!isMobile) return;\r\n\r\n        const handleScroll = () => {\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n            const scrollHeight = document.documentElement.scrollHeight;\r\n            const clientHeight = window.innerHeight;\r\n            const scrollPercentage = (scrollTop + clientHeight) / scrollHeight;\r\n\r\n            if (scrollPercentage > 0.8 && mobileLoadedCount < sortedData.length) {\r\n                setMobileLoadedCount(prev => Math.min(prev + 20, sortedData.length));\r\n            }\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, [isMobile, mobileLoadedCount, sortedData.length]);\r\n\r\n    // ✅ Reset mobile loaded count when filters change\r\n    React.useEffect(() => {\r\n        setMobileLoadedCount(20);\r\n    }, [debouncedGlobalFilter, branchFilter, statusFilter, typeFilter, customerFilter, dateRange]);\r\n\r\n    const pageCount = Math.ceil(sortedData.length / pagination.pageSize);\r\n    const paginatedData = React.useMemo(() => sortedData.slice(pagination.pageIndex * pagination.pageSize, (pagination.pageIndex + 1) * pagination.pageSize), [sortedData, pagination]);\r\n\r\n    return (\r\n        <div className=\"space-y-4 h-full flex flex-col\">\r\n            {/* Desktop-only Toolbar */}\r\n            {!isMobile && (\r\n                <PageToolbar\r\n                    leftActions={\r\n                        <>\r\n                            <Button variant=\"outline\" size=\"sm\" onClick={() => setShowImportDialog(true)}>\r\n                                <FileSpreadsheet className=\"mr-2 h-4 w-4\" />\r\n                                Nhập file\r\n                            </Button>\r\n                            <Button variant=\"outline\" size=\"sm\" onClick={() => setShowExportDialog(true)}>\r\n                                <Download className=\"mr-2 h-4 w-4\" />\r\n                                Xuất Excel\r\n                            </Button>\r\n                        </>\r\n                    }\r\n                    rightActions={[\r\n                        <DataTableColumnCustomizer\r\n                            key=\"customizer\"\r\n                            columns={columns}\r\n                            columnVisibility={columnVisibility}\r\n                            setColumnVisibility={setColumnVisibility}\r\n                            columnOrder={columnOrder}\r\n                            setColumnOrder={setColumnOrder}\r\n                            pinnedColumns={pinnedColumns}\r\n                            setPinnedColumns={setPinnedColumns}\r\n                        />\r\n                    ]}\r\n                />\r\n            )}\r\n\r\n            {/* Filters Row */}\r\n            <PageFilters\r\n                searchValue={globalFilter}\r\n                onSearchChange={setGlobalFilter}\r\n                searchPlaceholder=\"Tìm theo mã phiếu, người nộp, chứng từ...\"\r\n                leftFilters={\r\n                    <DataTableDateFilter\r\n                        value={dateRange}\r\n                        onChange={setDateRange}\r\n                    />\r\n                }\r\n                rightFilters={\r\n                    <>\r\n                        <Select value={branchFilter} onValueChange={setBranchFilter}>\r\n                            <SelectTrigger className=\"h-9 w-[150px]\">\r\n                                <SelectValue placeholder=\"Chi nhánh\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"all\">Tất cả chi nhánh</SelectItem>\r\n                                {branches.map(branch => (\r\n                                    <SelectItem key={branch.systemId} value={branch.systemId}>\r\n                                        {branch.name}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        \r\n                        <DataTableFacetedFilter\r\n                            title=\"Trạng thái\"\r\n                            options={statusOptions}\r\n                            selectedValues={statusFilter}\r\n                            onSelectedValuesChange={setStatusFilter}\r\n                        />\r\n                        \r\n                        <DataTableFacetedFilter\r\n                            title=\"Loại phiếu\"\r\n                            options={typeOptions}\r\n                            selectedValues={typeFilter}\r\n                            onSelectedValuesChange={setTypeFilter}\r\n                        />\r\n                        \r\n                        <DataTableFacetedFilter\r\n                            title=\"Khách hàng\"\r\n                            options={customerOptions}\r\n                            selectedValues={customerFilter}\r\n                            onSelectedValuesChange={setCustomerFilter}\r\n                        />\r\n                    </>\r\n                }\r\n            />\r\n\r\n            {/* Mobile View - Cards */}\r\n            {isMobile ? (\r\n                <div className=\"space-y-2 flex-1 overflow-y-auto\">\r\n                    {sortedData.length === 0 ? (\r\n                        <Card>\r\n                            <CardContent className=\"p-8 text-center text-muted-foreground\">\r\n                                Không tìm thấy phiếu thu nào\r\n                            </CardContent>\r\n                        </Card>\r\n                    ) : (\r\n                        <>\r\n                            {sortedData.slice(0, mobileLoadedCount).map(receipt => (\r\n                                <MobileReceiptCard \r\n                                    key={receipt.systemId} \r\n                                    receipt={receipt}\r\n                                    onCancel={handleCancel}\r\n                                    navigate={(path: string) => router.push(path)}\r\n                                    handleRowClick={handleRowClick}\r\n                                />\r\n                            ))}\r\n                            {mobileLoadedCount < sortedData.length && (\r\n                                <Card>\r\n                                    <CardContent className=\"p-4 text-center text-muted-foreground\">\r\n                                        <div className=\"flex items-center justify-center gap-2\">\r\n                                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary\"></div>\r\n                                            <span>Đang tải thêm...</span>\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            )}\r\n                            {mobileLoadedCount >= sortedData.length && sortedData.length > 20 && (\r\n                                <Card>\r\n                                    <CardContent className=\"p-4 text-center text-muted-foreground text-sm\">\r\n                                        Đã hiển thị tất cả {sortedData.length} phiếu thu\r\n                                    </CardContent>\r\n                                </Card>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                /* Desktop View - Table */\r\n                <div className=\"w-full py-4\">\r\n                    <ResponsiveDataTable\r\n                        columns={columns}\r\n                        data={paginatedData}\r\n                        pageCount={pageCount}\r\n                        pagination={pagination}\r\n                        setPagination={setPagination}\r\n                        rowCount={dataWithRunningBalance.length}\r\n                        rowSelection={rowSelection}\r\n                        setRowSelection={setRowSelection}\r\n                        onBulkDelete={() => setIsBulkDeleteAlertOpen(true)}\r\n                        sorting={sorting}\r\n                    setSorting={setSorting as React.Dispatch<React.SetStateAction<{ id: string; desc: boolean; }>>}\r\n                    allSelectedRows={allSelectedRows}\r\n                    bulkActions={bulkActions}\r\n                    expanded={{}}\r\n                    setExpanded={() => {}}\r\n                    columnVisibility={columnVisibility}\r\n                    setColumnVisibility={setColumnVisibility}\r\n                    columnOrder={columnOrder}\r\n                    setColumnOrder={setColumnOrder}\r\n                    pinnedColumns={pinnedColumns}\r\n                    setPinnedColumns={setPinnedColumns}\r\n                    onRowClick={(receipt) => router.push(generatePath(ROUTES.FINANCE.RECEIPT_VIEW, { systemId: receipt.systemId }))}\r\n                    renderMobileCard={(receipt) => (\r\n                        <MobileReceiptCard \r\n                            receipt={receipt}\r\n                            onCancel={handleCancel}\r\n                            navigate={(path: string) => router.push(path)}\r\n                            handleRowClick={handleRowClick}\r\n                        />\r\n                    )}\r\n                />\r\n                </div>\r\n            )}\r\n\r\n            {/* Delete Alert Dialog */}\r\n            <AlertDialog open={isAlertOpen} onOpenChange={setIsAlertOpen}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Hủy phiếu thu?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Phiếu thu sẽ được chuyển sang trạng thái \"Đã hủy\". Bạn có thể xem lại phiếu đã hủy trong danh sách.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Đóng</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={confirmCancel}>Hủy phiếu</AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            {/* Bulk Delete Alert Dialog */}\r\n            <AlertDialog open={isBulkDeleteAlertOpen} onOpenChange={setIsBulkDeleteAlertOpen}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Hủy {Object.keys(rowSelection).length} phiếu thu?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Các phiếu thu sẽ được chuyển sang trạng thái \"Đã hủy\".\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Đóng</AlertDialogCancel>\r\n                        <AlertDialogAction onClick={confirmBulkCancel}>Hủy tất cả</AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            {/* Print Options Dialog */}\r\n            <SimplePrintOptionsDialog\r\n                open={printDialogOpen}\r\n                onOpenChange={setPrintDialogOpen}\r\n                onConfirm={handlePrintConfirm}\r\n                selectedCount={itemsToPrint.length}\r\n                title=\"In phiếu thu\"\r\n            />\r\n\r\n            {/* Import Dialog */}\r\n            <GenericImportDialogV2<Receipt>\r\n                open={showImportDialog}\r\n                onOpenChange={setShowImportDialog}\r\n                config={receiptImportExportConfig}\r\n                branches={branches.map(b => ({ systemId: b.systemId, name: b.name }))}\r\n                existingData={receipts}\r\n                onImport={handleImport}\r\n                currentUser={{\r\n                    name: employee?.fullName || 'Hệ thống',\r\n                    systemId: employee?.systemId || asSystemId('SYSTEM'),\r\n                }}\r\n            />\r\n\r\n            {/* Export Dialog */}\r\n            <GenericExportDialogV2<Receipt>\r\n                open={showExportDialog}\r\n                onOpenChange={setShowExportDialog}\r\n                config={receiptImportExportConfig}\r\n                allData={receipts}\r\n                filteredData={sortedData}\r\n                currentPageData={paginatedData}\r\n                selectedData={selectedReceipts}\r\n                currentUser={{\r\n                    name: employee?.fullName || 'Hệ thống',\r\n                    systemId: employee?.systemId || asSystemId('SYSTEM'),\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}