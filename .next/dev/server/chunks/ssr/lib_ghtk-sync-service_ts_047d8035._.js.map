{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/hrm2/lib/ghtk-sync-service.ts"],"sourcesContent":["/**\r\n * GHTK Auto-Sync Service\r\n * Handles automatic synchronization of GHTK shipment statuses\r\n * \r\n * Strategy: Webhook + Fallback Polling (Option 3)\r\n * - Primary: Webhook push from GHTK (real-time)\r\n * - Fallback: Periodic polling (every 5-10 minutes)\r\n * - On-demand: Sync when user views order\r\n */\r\n\r\nimport { getApiUrl, getBaseUrl } from './api-config';\r\nimport type { GHTKWebhookPayload } from '@/features/orders/types';\r\nimport { shouldSyncGHTKStatus } from './ghtk-constants';\r\n\r\nexport type SyncMode = 'webhook' | 'polling' | 'hybrid';\r\n\r\nclass GHTKSyncService {\r\n  private syncInterval: NodeJS.Timeout | undefined;\r\n  private webhookPollInterval: NodeJS.Timeout | undefined;\r\n  private mode: SyncMode = 'hybrid';\r\n  private pollingIntervalMs = 10 * 60 * 1000; // 10 minutes (fallback)\r\n  private webhookPollIntervalMs = 5 * 1000; // 5 seconds (webhook check)\r\n  private isRunning = false;\r\n  \r\n  // Cache to avoid duplicate API calls\r\n  private cache = new Map<string, { timestamp: number; data: any }>();\r\n  private cacheTTL = 2 * 60 * 1000; // 2 minutes\r\n  \r\n  constructor(mode: SyncMode = 'hybrid') {\r\n    this.mode = mode;\r\n  }\r\n  \r\n  /**\r\n   * Start auto-sync service\r\n   */\r\n  startAutoSync() {\r\n    if (this.isRunning) {\r\n      console.log('[GHTK Sync] Already running');\r\n      return;\r\n    }\r\n    \r\n    this.isRunning = true;\r\n    console.log(`[GHTK Sync] Starting in ${this.mode} mode`);\r\n    \r\n    // Start webhook polling (primary mechanism)\r\n    if (this.mode === 'webhook' || this.mode === 'hybrid') {\r\n      this.startWebhookPolling();\r\n    }\r\n    \r\n    // Start fallback polling (backup mechanism)\r\n    if (this.mode === 'polling' || this.mode === 'hybrid') {\r\n      this.startFallbackPolling();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Stop auto-sync service\r\n   */\r\n  stopAutoSync() {\r\n    if (!this.isRunning) return;\r\n    \r\n    if (this.syncInterval) {\r\n      clearInterval(this.syncInterval);\r\n      this.syncInterval = undefined;\r\n    }\r\n    \r\n    if (this.webhookPollInterval) {\r\n      clearInterval(this.webhookPollInterval);\r\n      this.webhookPollInterval = undefined;\r\n    }\r\n    \r\n    this.isRunning = false;\r\n    console.log('[GHTK Sync] Stopped');\r\n  }\r\n  \r\n  /**\r\n   * Poll webhook endpoint for updates from GHTK\r\n   * This checks if GHTK has pushed any status updates to our server\r\n   */\r\n  private startWebhookPolling() {\r\n    console.log('[GHTK Sync] Starting webhook polling (every 5s)');\r\n    \r\n    // Run immediately\r\n    this.checkWebhookUpdates();\r\n    \r\n    // Then poll every 5 seconds\r\n    this.webhookPollInterval = setInterval(() => {\r\n      this.checkWebhookUpdates();\r\n    }, this.webhookPollIntervalMs);\r\n  }\r\n  \r\n  /**\r\n   * Check for webhook updates from server\r\n   */\r\n  private async checkWebhookUpdates() {\r\n    try {\r\n      const response = await fetch(getApiUrl('/shipping/ghtk/webhook/poll'));\r\n      const data = await response.json();\r\n      \r\n      if (data.success && data.updates && data.updates.length > 0) {\r\n        console.log(`[GHTK Sync] Received ${data.updates.length} webhook updates`);\r\n        \r\n        // Process each webhook update\r\n        for (const update of data.updates) {\r\n          await this.processWebhookUpdate(update);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('[GHTK Sync] Webhook poll error:', error);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Process a webhook update\r\n   */\r\n  private async processWebhookUpdate(update: GHTKWebhookPayload) {\r\n    try {\r\n      // Dynamically import to avoid circular dependencies\r\n      const { useOrderStore } = await import('@/features/orders/store');\r\n      const { processGHTKWebhook } = useOrderStore.getState();\r\n      \r\n      console.log('[GHTK Sync] Processing webhook update:', {\r\n        trackingCode: update.label_id,\r\n        statusId: update.status_id,\r\n      });\r\n      \r\n      processGHTKWebhook(update);\r\n    } catch (error) {\r\n      console.error('[GHTK Sync] Error processing webhook:', error);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Start fallback polling (for orders webhook might miss)\r\n   */\r\n  private startFallbackPolling() {\r\n    console.log('[GHTK Sync] Starting fallback polling (every 10 min)');\r\n    \r\n    // Run immediately\r\n    this.syncStaleOrders();\r\n    \r\n    // Then poll every 10 minutes\r\n    this.syncInterval = setInterval(() => {\r\n      this.syncStaleOrders();\r\n    }, this.pollingIntervalMs);\r\n  }\r\n  \r\n  /**\r\n   * Sync orders that haven't been updated recently\r\n   */\r\n  private async syncStaleOrders() {\r\n    try {\r\n      const { useOrderStore } = await import('@/features/orders/store');\r\n      const { data: orders } = useOrderStore.getState();\r\n      \r\n      // Find orders with GHTK shipments that need syncing\r\n      const stalePackagings = orders.flatMap(order => \r\n        order.packagings\r\n          .filter(p => \r\n            p.carrier === 'GHTK' && \r\n            p.trackingCode &&\r\n            this.shouldSync(p)\r\n          )\r\n          .map(p => ({ \r\n            order, \r\n            packaging: p \r\n          }))\r\n      );\r\n      \r\n      if (stalePackagings.length === 0) {\r\n        console.log('[GHTK Sync] No stale orders to sync');\r\n        return;\r\n      }\r\n      \r\n      console.log(`[GHTK Sync] Syncing ${stalePackagings.length} stale shipments...`);\r\n      \r\n      // Sync each one with rate limiting\r\n      for (const { order, packaging } of stalePackagings) {\r\n        await this.syncOne(order.systemId, packaging.systemId, packaging.trackingCode!);\r\n        \r\n        // Rate limiting: 200ms between requests\r\n        await this.delay(200);\r\n      }\r\n      \r\n      console.log('[GHTK Sync] Fallback sync completed');\r\n    } catch (error) {\r\n      console.error('[GHTK Sync] Fallback sync error:', error);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Check if packaging should be synced\r\n   */\r\n  private shouldSync(packaging: any): boolean {\r\n    // Don't sync if status is final\r\n    if (!shouldSyncGHTKStatus(packaging.ghtkStatusId)) {\r\n      return false;\r\n    }\r\n    \r\n    // Don't sync if recently synced (< 5 minutes)\r\n    if (packaging.lastSyncedAt) {\r\n      const lastSync = new Date(packaging.lastSyncedAt).getTime();\r\n      const now = Date.now();\r\n      const diffMinutes = (now - lastSync) / 1000 / 60;\r\n      \r\n      if (diffMinutes < 5) {\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  }\r\n  \r\n  /**\r\n   * Sync single shipment by tracking code\r\n   */\r\n  async syncOne(orderSystemId: string, packagingSystemId: string, trackingCode: string): Promise<void> {\r\n    // Check cache first\r\n    const cached = this.cache.get(trackingCode);\r\n    if (cached && Date.now() - cached.timestamp < this.cacheTTL) {\r\n      console.log(`[GHTK Sync] Using cached data for ${trackingCode}`);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log(`[GHTK Sync] Fetching status for ${trackingCode}...`);\r\n      \r\n      const response = await fetch(getApiUrl(`/shipping/ghtk/track/${trackingCode}`));\r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${data.error || 'Unknown error'}`);\r\n      }\r\n      \r\n      if (data.success && data.order) {\r\n        const { useOrderStore } = await import('@/features/orders/store');\r\n        const { processGHTKWebhook } = useOrderStore.getState();\r\n        \r\n        // Convert tracking response to webhook format\r\n        const webhookData: GHTKWebhookPayload = {\r\n          label_id: data.order.label_id,\r\n          partner_id: data.order.partner_id,\r\n          status_id: parseInt(data.order.status),\r\n          action_time: data.order.modified,\r\n          weight: data.order.weight ? parseFloat(data.order.weight) : undefined,\r\n          fee: data.order.ship_money ? parseInt(data.order.ship_money) : undefined,\r\n          pick_money: data.order.pick_money ? parseInt(data.order.pick_money) : undefined,\r\n        };\r\n        \r\n        processGHTKWebhook(webhookData);\r\n        \r\n        // Cache the result\r\n        this.cache.set(trackingCode, {\r\n          timestamp: Date.now(),\r\n          data: webhookData,\r\n        });\r\n        \r\n        console.log(`[GHTK Sync] ✓ Synced ${trackingCode}: status ${data.order.status}`);\r\n      } else {\r\n        console.warn(`[GHTK Sync] ✗ Failed to sync ${trackingCode}:`, data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(`[GHTK Sync] ✗ Error syncing ${trackingCode}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Force sync specific order (called on page load)\r\n   */\r\n  async syncOrder(orderSystemId: string): Promise<void> {\r\n    try {\r\n      const { useOrderStore } = await import('@/features/orders/store');\r\n      const { findById } = useOrderStore.getState();\r\n      const order = findById(orderSystemId);\r\n      \r\n      if (!order) {\r\n        console.warn('[GHTK Sync] Order not found:', orderSystemId);\r\n        return;\r\n      }\r\n      \r\n      const ghtkPackagings = order.packagings.filter(\r\n        p => p.carrier === 'GHTK' && p.trackingCode\r\n      );\r\n      \r\n      if (ghtkPackagings.length === 0) {\r\n        return;\r\n      }\r\n      \r\n      console.log(`[GHTK Sync] Force syncing order ${order.id} (${ghtkPackagings.length} packages)...`);\r\n      \r\n      await Promise.all(\r\n        ghtkPackagings.map(p => \r\n          this.syncOne(order.systemId, p.systemId, p.trackingCode!)\r\n        )\r\n      );\r\n      \r\n      console.log(`[GHTK Sync] ✓ Order ${order.id} synced`);\r\n    } catch (error) {\r\n      console.error('[GHTK Sync] Order sync error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Utility: Delay helper\r\n   */\r\n  private delay(ms: number): Promise<void> {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n  \r\n  /**\r\n   * Clear cache (useful for testing)\r\n   */\r\n  clearCache() {\r\n    this.cache.clear();\r\n    console.log('[GHTK Sync] Cache cleared');\r\n  }\r\n  \r\n  /**\r\n   * Get sync status\r\n   */\r\n  getStatus() {\r\n    return {\r\n      isRunning: this.isRunning,\r\n      mode: this.mode,\r\n      cacheSize: this.cache.size,\r\n      pollingInterval: `${this.pollingIntervalMs / 1000}s`,\r\n      webhookPollInterval: `${this.webhookPollIntervalMs / 1000}s`,\r\n    };\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const ghtkSyncService = new GHTKSyncService('hybrid');\r\n"],"names":[],"mappings":"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"}}]
}