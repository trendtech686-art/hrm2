model Penalty {
  systemId                String    @id
  id                      String    @unique
  employeeId              String
  employeeName            String?   // Cached employee name
  penaltyTypeId           String?
  penaltyTypeName         String?   // Cached penalty type name
  amount                  Decimal   @db.Decimal(15, 2)
  reason                  String?
  date                    DateTime  @default(now())
  status                  String    @default("Chưa thanh toán") // 'Chưa thanh toán' | 'Đã thanh toán' | 'Đã hủy'
  category                String?   // 'complaint' | 'attendance' | 'performance' | 'other'
  // Issuer info
  issuerName              String?   // Employee Name of the issuer
  issuerSystemId          String?   // Employee SystemId of the issuer
  // Linked entities
  linkedComplaintSystemId String?   // Link to Complaint
  linkedOrderSystemId     String?   // Link to Order
  // Payroll integration
  payrollItemId           String?
  deductedInPayrollId     String?   // ID of payroll where this was deducted
  deductedAt              DateTime? // Date when deducted from salary
  isApplied               Boolean   @default(false)
  // Audit
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  createdBy               String?
  updatedBy               String?
  activityHistory         Json?

  @@index([employeeId])
  @@index([status])
  @@map("penalties")
}
