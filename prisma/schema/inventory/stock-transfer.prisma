model StockTransfer {
  systemId     String              @id
  id           String              @unique
  fromBranchId String
  toBranchId   String
  employeeId   String?
  transferDate DateTime            @default(now())
  receivedDate DateTime?
  status       StockTransferStatus @default(DRAFT)
  notes        String?
  createdAt    DateTime            @default(now())
  updatedAt    DateTime            @updatedAt
  createdBy    String?
  updatedBy    String?
  
  // === MISSING FIELDS FROM types.ts (Phase 7) ===
  
  // Reference code
  referenceCode        String?
  
  // Branch info (denormalized)
  fromBranchSystemId   String?
  fromBranchName       String?
  toBranchSystemId     String?
  toBranchName         String?
  
  // Created by info
  createdDate          DateTime     @default(now())
  createdBySystemId    String?
  createdByName        String?
  
  // Transfer confirmation
  transferredDate      DateTime?
  transferredBySystemId String?
  transferredByName    String?
  
  // Receive confirmation
  receivedBySystemId   String?
  receivedByName       String?
  
  // Cancellation
  cancelledDate        DateTime?
  cancelledBySystemId  String?
  cancelledByName      String?
  cancelReason         String?
  
  // Items (stored as JSON)
  transferItems        Json?        // Array of StockTransferItem with receivedQuantity
  
  // Note
  note                 String?
  
  // === RELATIONS ===
  items        StockTransferItem[]

  @@index([fromBranchId])
  @@index([status])
  @@index([toBranchId])
  @@map("stock_transfers")
}
