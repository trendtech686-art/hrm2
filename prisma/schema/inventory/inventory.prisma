// ═══════════════════════════════════════════════════════════════
// INVENTORY MODEL
// ═══════════════════════════════════════════════════════════════
// SystemId: INV0000000001 (English, 10 digits)
// BusinessId: TK0000000001 (Vietnamese - Tồn kho, 10 digits)
// ═══════════════════════════════════════════════════════════════

model Inventory {
  systemId          String        @id           // INV0000000001
  id                String        @unique       // TK0000000001
  
  // Product
  productId         String
  product           Product       @relation(fields: [productId], references: [systemId])
  
  // Location
  branchId          String?
  branch            Branch?       @relation(fields: [branchId], references: [systemId])
  locationId        String?
  stockLocation     StockLocation? @relation(fields: [locationId], references: [systemId])
  
  // Quantities
  quantity          Int           @default(0)
  reservedQuantity  Int           @default(0)
  availableQuantity Int           @default(0)
  
  // Tracking
  lotNumber         String?
  serialNumber      String?
  expiryDate        DateTime?
  
  // Cost
  unitCost          Decimal       @default(0) @db.Decimal(15, 2)
  totalValue        Decimal       @default(0) @db.Decimal(15, 2)
  
  // Audit
  lastCountDate     DateTime?
  lastCountBy       String?
  
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  
  @@unique([productId, branchId, locationId, lotNumber])
  @@map("inventories")
}
