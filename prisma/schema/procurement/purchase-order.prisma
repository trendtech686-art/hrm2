// ═══════════════════════════════════════════════════════════════
// PURCHASE ORDER MODEL
// ═══════════════════════════════════════════════════════════════
// SystemId: PO0000000001 (English, 10 digits)
// BusinessId: PN0000000001 (Vietnamese - Phiếu nhập, 10 digits)
// ═══════════════════════════════════════════════════════════════

model PurchaseOrder {
  systemId          String                @id           // PO0000000001
  id                String                @unique       // PN0000000001
  
  // Supplier
  supplierId        String?
  supplier          Supplier?             @relation(fields: [supplierId], references: [systemId])
  supplierName      String?
  
  // Branch
  branchId          String?
  branch            Branch?               @relation(fields: [branchId], references: [systemId])
  
  // Order details
  orderDate         DateTime              @default(now())
  expectedDate      DateTime?
  receivedDate      DateTime?
  
  // Status
  status            PurchaseOrderStatus   @default(DRAFT)
  paymentStatus     PaymentStatus         @default(PENDING)
  
  // Amounts
  subtotal          Decimal               @default(0) @db.Decimal(15, 2)
  discount          Decimal               @default(0) @db.Decimal(15, 2)
  tax               Decimal               @default(0) @db.Decimal(15, 2)
  shippingFee       Decimal               @default(0) @db.Decimal(15, 2)
  total             Decimal               @default(0) @db.Decimal(15, 2)
  paidAmount        Decimal               @default(0) @db.Decimal(15, 2)
  
  // Notes
  notes             String?
  internalNotes     String?
  
  // Relations
  items             PurchaseOrderItem[]
  payments          Payment[]
  purchaseReturns   PurchaseReturn[]
  
  // Soft delete
  isDeleted         Boolean               @default(false)
  deletedAt         DateTime?
  
  // Audit
  createdAt         DateTime              @default(now())
  updatedAt         DateTime              @updatedAt
  createdBy         String?
  updatedBy         String?
  approvedBy        String?
  approvedAt        DateTime?
  
  @@map("purchase_orders")
}
