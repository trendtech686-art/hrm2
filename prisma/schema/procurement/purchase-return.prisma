model PurchaseReturn {
  systemId        String               @id
  id              String               @unique
  supplierId      String
  purchaseOrderId String?
  branchId        String?
  employeeId      String?
  returnDate      DateTime             @default(now())
  status          PurchaseReturnStatus @default(DRAFT)
  reason          String?
  subtotal        Decimal              @default(0) @db.Decimal(15, 2)
  total           Decimal              @default(0) @db.Decimal(15, 2)
  createdAt       DateTime             @default(now())
  updatedAt       DateTime             @updatedAt
  createdBy       String?
  updatedBy       String?
  
  // === MISSING FIELDS FROM types.ts (Phase 7) ===
  
  // Purchase order linking
  purchaseOrderSystemId    String?    // SystemId of purchase order
  purchaseOrderBusinessId  String?    // Business ID for display
  
  // Supplier & branch info (denormalized)
  supplierSystemId     String?
  supplierName         String?
  branchSystemId       String?
  branchName           String?
  
  // Items (stored as JSON)
  returnItems          Json?          // Array of PurchaseReturnLineItem
  
  // Financial
  totalReturnValue     Decimal        @default(0) @db.Decimal(15, 2)
  refundAmount         Decimal        @default(0) @db.Decimal(15, 2)
  refundMethod         String?
  accountSystemId      String?        // Cash account for refund
  
  // Creator info
  creatorName          String?
  
  // Activity History
  activityHistory      Json?
  
  // === RELATIONS ===
  items           PurchaseReturnItem[]
  suppliers       Supplier             @relation(fields: [supplierId], references: [systemId])

  @@map("purchase_returns")
}
