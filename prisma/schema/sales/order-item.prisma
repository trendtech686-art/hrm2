// ═══════════════════════════════════════════════════════════════
// ORDER ITEM MODEL
// ═══════════════════════════════════════════════════════════════
// SystemId: OITEM0000000001 (English, 10 digits)
// BusinessId: CTDH0000000001 (Vietnamese - Chi tiết đơn hàng, 10 digits)
// ═══════════════════════════════════════════════════════════════

model OrderItem {
  systemId          String        @id           // OITEM0000000001
  id                String        @unique       // CTDH0000000001
  
  // Parent Order
  orderId           String
  order             Order         @relation(fields: [orderId], references: [systemId])
  
  // Product
  productId         String
  product           Product       @relation(fields: [productId], references: [systemId])
  productName       String
  productSku        String?
  
  // Quantity
  quantity          Int           @default(1)
  unitPrice         Decimal       @db.Decimal(15, 2)
  
  // Discount
  discount          Decimal       @default(0) @db.Decimal(15, 2)
  discountPercent   Decimal       @default(0) @db.Decimal(5, 2)
  
  // Tax
  taxRate           Decimal       @default(0) @db.Decimal(5, 2)
  taxAmount         Decimal       @default(0) @db.Decimal(15, 2)
  
  // Total
  lineTotal         Decimal       @db.Decimal(15, 2)
  
  // Warranty
  warrantyMonths    Int?
  warrantyExpiry    DateTime?
  
  // Notes
  notes             String?
  
  // Audit
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  
  @@map("order_items")
}
